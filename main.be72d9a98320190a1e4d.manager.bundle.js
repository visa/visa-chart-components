/*! For license information please see main.be72d9a98320190a1e4d.manager.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{449:function(module){module.exports=JSON.parse('{"a":"8.0.1"}')},450:function(module,exports,__webpack_require__){"use strict";(function(global,module){var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function isUndefined(payload){return void 0===payload}function isObject$4(payload){return null!==payload&&"object"==typeof payload&&void 0!==payload}var numeral,_,isEmpty=function(obj){return[Object,Array].includes((obj||{}).constructor)&&!Object.entries(obj||{}).length},binaryXor=function(arr1,arr2){var a=arr1.filter((function(x){return!arr2.includes(x)})),b=arr2.filter((function(x){return!arr1.includes(x)}));return Array.from(new Set(__spreadArrays(a,b)))},xor=function(){for(var arrays=[],_i=0;_i<arguments.length;_i++)arrays[_i]=arguments[_i];return arrays.reduce(binaryXor,[])},omit=function(obj,props){return obj=__assign({},obj),props.forEach((function(prop){return delete obj[prop]})),obj},has$1=function(obj,path){return!!(Array.isArray(path)?path:path.match(/([^[.\]])+/g)).reduce((function(prevObj,key){return prevObj&&prevObj[key]}),obj)},en={vcc:{attr:{language:"en"},general:{generic:{altTextGenerator:{overallNumberOfGroups:"Overall number of elements:",overallNumberOfGeom:"Overall number of elements in this chart:",numberOfInteractiveElements:"Number of interactive elements:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or element group.",shiftEnter:"Drill up a level on an element group or element.",space:"Select/Deselect an element on an element.",horizontalArrows:"Move among sibling element groups or elements when focusing on an element group or an element.",verticalArrows:"Move among elements across element groups when focusing on an element group or an element."}},geomTypes:{bar:"bar",slice:"slice",point:"point",marker:"marker",node:"node",dumbbell:"dumbbell",link:"link",cell:"cell"},groupNames:{"scatter-group":"scatter group",stack:"stack",cluster:"cluster","marker-group":"marker group",pie:"pie",line:"line",node:"node",row:"row","node-collection":"node collection"},keys:{ctrl:"Control",enter:"Enter",shift:"Shift",space:"Space",esc:"Esc",tab:"Tab"},keywords:{structure:"structure",selected:"selected",action:"action",result:"result",note:"note",keyboard:"keyboard",interactive:"interactive",titled:"titled",title:"title",subtitle:"subtitle",static:"static",image:"image",purpose:"purpose",chart:"chart",start:"start",end:"end",value:"value",axis:"axis",annotation:"annotation",referenceLine:"reference line"},expressions:{keyboardInstructions:"Keyboard Instructions",showKeyboardInstructions:"Display Keyboard Instructions",keyboardInstructionsNote:"Press and hold when using the arrow keys for the best navigation experience on a Mac (Voiceover).",dismissTooltip:"Dismiss the tooltip at any time.",keyboardInstructionsEsc:"Exit the chart at any time.",butSomeMayBeHiddenUntilYouInteractWithThisNode:"(but some may be hidden until you interact with this node).",asAPercentage:"as a percentage",numberOfAnnotations:"Number of annotations:",numberOfReferenceLines:"Number of reference lines:"}},dataTable:{table1:"You are currently on data table 1 of 2. This table contains data for the chart nodes.",table2:"You are currently on data table 2 of 2. This table contains the data for the chart links.",display:"display data table"},accessibilityController:{navigateToTheChartAreaByPressingEnter:"Navigate into the chart area by pressing ENTER."},accessibilityDescriptions:{chartLayoutDescription:"Chart Layout Description",withNoTitleProvided:"with no title provided.",fullDescription:"This section contains additional information about this chart. To access the keyboard instructions menu, press TAB. To navigate to the chart area, press TAB again.",nonInteractive:"This section contains additional information about this chart.",dataTableFocusOnHideDataTableButtonTrue:"To access the data table, use your screen reader go to table shortcut key.",dataTableFocusOnDataTableButtonFalse:"To focus on the data table button, press TAB once more.",longDescription:"Long Description",executiveSummary:"Executive Summary",statisticalInformation:"Statistical Information",xAxis:"The chart has a horizontal X axis.",yAxis:"The chart has a vertical Y axis.",primaryYAxis:"The chart has a primary vertical Y axis.",secondaryYAxis:"The chart has a secondary vertical Y axis.",multipleYAxisSections:"The chart has multiple vertical Y axis sections.",numberOfVerticalYAxisSections:"Number of vertical Y axis sections:",usingDifferentScales:"The Y Axes are using different scales.",thisSeriesIsTitled:"This series is titled:",notesAboutTheChartStructure:"Notes about the chart structure",referenceLineTitle:"Reference line title:",annotationTitle:"Annotation title:"},"bar-chart":{altTextGenerator:{overallNumberOfGroups:"Overall number of bars:",overallNumberOfGeom:"Overall number of bars in this bar chart:",numberOfInteractiveElements:"Number of interactive bars:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a bar group.",shiftEnter:"Drill up a level on a bar group or bar.",space:"Select/Deselect a bar on a bar.",horizontalArrows:"Move among sibling bar groups or bars when focusing on a bar group or a bar.",verticalArrows:"Move among bars across bar groups when focusing on a bar group or a bar."}},"clustered-bar-chart":{altTextGenerator:{overallNumberOfGroups:"Overall number of clusters:",overallNumberOfGeom:"Overall number of bars in currently selected cluster:",numberOfInteractiveElements:"Number of interactive bars in cluster:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a cluster.",shiftEnter:"Drill up a level on a cluster or bar.",space:"Select/Deselect a bar on a bar.",horizontalArrows:"Move among sibling clusters or bars on a cluster or bar.",verticalArrows:"Move among bars across clusters on a cluster or bar."}},"stacked-bar-chart":{altTextGenerator:{overallNumberOfGroups:"Overall number of stacks:",overallNumberOfGeom:"Overall number of bars in currently selected stack:",numberOfInteractiveElements:"Number of interactive bars in currently selected stack:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a stack.",shiftEnter:"Drill up a level on a stack or bar.",space:"Select/Deselect a bar on a bar.",horizontalArrows:"Move among sibling stacks or bars on a stack or bar.",verticalArrows:"Move among bars across stacks on a stack or bar."}},"line-chart":{altTextGenerator:{overallNumberOfGroups:"Overall number of lines:",overallNumberOfGeom:"Overall number of points in currently selected line:",numberOfInteractiveElements:"Number of interactive points in selected line:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a line.",shiftEnter:"Drill up a level on a line or point.",space:"Select/Deselect a point on a line or point.",horizontalArrows:"Move among sibling lines or points on a line or point.",verticalArrows:"Move among points across lines on a line or point."}},"pie-chart":{altTextGenerator:{overallNumberOfGroups:"Overall number of slices:",overallNumberOfGeom:"Overall number of slices in this pie chart:",numberOfInteractiveElements:"Number of interactive slices:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a pie.",shiftEnter:"Drill up a level on a pie or slice.",space:"Select/Deselect a slice on a slice.",horizontalArrows:"Move among sibling pies or slices on a pie or slice."}},"scatter-plot":{altTextGenerator:{overallNumberOfGroups:"Overall number of scatter groups:",overallNumberOfGeom:"Overall number of points in currently selected scatter group:",numberOfInteractiveElements:"Number of interactive points in this scatter group:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a scatter group.",shiftEnter:"Drill up a level on a scatter group or point.",space:"Select/Deselect a point on a scatter group or group.",horizontalArrows:"Move among sibling scatter groups or points on a scatter group or point.",verticalArrows:"Move among points across scatter groups on a scatter group or point."}},"heat-map":{altTextGenerator:{overallNumberOfGroups:"Overall number of rows:",overallNumberOfGeom:"Overall number of cells in this row:",numberOfInteractiveElements:"Number of interactive cells in this row:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a row.",shiftEnter:"Drill up a level on a row or cell.",space:"Select/Deselect a cell on a cell.",horizontalArrows:"Move among sibling rows or cells on a row or cell.",verticalArrows:"Move among cells across rows on a row or cell."}},"circle-packing":{altTextGenerator:{overallNumberOfGroups:"Overall number of nodes:",numberOfChildElements:"Number of child elements:",overallNumberOfGeom:"Overall number of nodes in this node collection:",numberOfInteractiveElements:"Number of interactive nodes in this circle:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a node collection.",shiftEnter:"Drill up a level on a node collection or node.",space:"Select/Deselect a node on a node collection or node.",horizontalArrows:"Move among sibling node collections or nodes on a node collection or node.",verticalArrows:"Drill up or down a level on a node collection or node."}},"parallel-plot":{altTextGenerator:{overallNumberOfGroups:"Overall number of lines:",overallNumberOfGeom:"Overall number of points in this line:",numberOfInteractiveElements:"Number of interactive points in this line:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a line.",shiftEnter:"Drill up a level on a line or point.",space:"Select/Deselect a point on a point.",horizontalArrows:"Move among sibling lines or points on a line or point.",verticalArrows:"Move among points across lines on a line or point."}},"dumbbell-plot":{altTextGenerator:{overallNumberOfGroups:"Overall number of dumbbells:",overallNumberOfGeom:"Overall number of dumbbells in this dumbbell plot",numberOfInteractiveElements:"Number of interactive dumbbells in this dumbbell plot:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a group.",shiftEnter:"Drill up a level on a group or dumbbell.",space:"Select/Deselect a dumbbell on a dumbbell.",horizontalArrows:"Move among sibling groups or dumbbells on a group or dumbbell."}},"world-map":{altTextGenerator:{overallNumberOfGroups:"Overall number of markers:",overallNumberOfGeom:"Overall number of markers on this map:",numberOfInteractiveElements:"Number of interactive markers on this map:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a marker group.",shiftEnter:"Drill up a level on a marker group or marker.",space:"Select/Deselect a marker on a marker.",horizontalArrows:"Move among sibling marker groups or markers on a marker group or marker.",verticalArrows:"Move among markers across marker groups on a marker group or marker."}},"alluvial-diagram":{altTextGenerator:{overallNumberOfGroups:"Overall number of nodes or links:",overallNumberOfGeom:"Overall number of nodes or links in currently selected node or link:",numberOfInteractiveElements:"Number of interactive nodes or links in these nodes or links:"},keyboardInstructions:{enter:"Enter the chart area/drill down a level on the chart area or a node.",shiftEnter:"Drill up a level on a node or link.",space:"Select/Deselect a link on a link.",horizontalArrows:"Move among sibling nodes or links on a node or link.",verticalArrows:"Drill up to link's Source or Target node on a link."}}}},formats={},locales={},defaults={currentLocale:"us",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},options$2={currentLocale:defaults.currentLocale,zeroFormat:defaults.zeroFormat,nullFormat:defaults.nullFormat,defaultFormat:defaults.defaultFormat,scalePercentBy100:defaults.scalePercentBy100};function Numeral(input,number){this._input=input,this._value=number}numeral=function(input){var value,kind,unformatFunction,regexp;if(numeral.isNumeral(input))value=input.value();else if(0===input||void 0===input)value=0;else if(null===input||_.isNaN(input))value=null;else if("string"==typeof input)if(options$2.zeroFormat&&input===options$2.zeroFormat)value=0;else if(options$2.nullFormat&&input===options$2.nullFormat||!input.replace(/[^0-9]+/g,"").length)value=null;else{for(kind in formats)if((regexp="function"==typeof formats[kind].regexps.unformat?formats[kind].regexps.unformat():formats[kind].regexps.unformat)&&input.match(regexp)){unformatFunction=formats[kind].unformat;break}value=(unformatFunction=unformatFunction||numeral._.stringToNumber)(input)}else value=Number(input)||null;return new Numeral(input,value)},numeral.version="2.0.6",numeral.isNumeral=function(obj){return obj instanceof Numeral},numeral._=_={numberToFormat:function(value,format,roundingFunction){var leadingCount,abbrForce,abs,int,precision,signed,thousands,output,locale=locales[numeral.options.currentLocale],negP=!1,optDec=!1,abbr="",decimal="",neg=!1;if(value=value||0,abs=Math.abs(value),numeral._.includes(format,"(")?(negP=!0,format=format.replace(/[\(|\)]/g,"")):(numeral._.includes(format,"+")||numeral._.includes(format,"-"))&&(signed=numeral._.includes(format,"+")?format.indexOf("+"):value<0?format.indexOf("-"):-1,format=format.replace(/[\+|\-]/g,"")),numeral._.includes(format,"a")&&(abbrForce=!!(abbrForce=format.match(/a(k|m|b|t)?/))&&abbrForce[1],numeral._.includes(format," a")&&(abbr=" "),format=format.replace(new RegExp(abbr+"a[kmbt]?"),""),abs>=1e12&&!abbrForce||"t"===abbrForce?(abbr+=locale.abbreviations.trillion,value/=1e12):abs<1e12&&abs>=1e9&&!abbrForce||"b"===abbrForce?(abbr+=locale.abbreviations.billion,value/=1e9):abs<1e9&&abs>=1e6&&!abbrForce||"m"===abbrForce?(abbr+=locale.abbreviations.million,value/=1e6):(abs<1e6&&abs>=1e3&&!abbrForce||"k"===abbrForce)&&(abbr+=locale.abbreviations.thousand,value/=1e3)),numeral._.includes(format,"[.]")&&(optDec=!0,format=format.replace("[.]",".")),int=value.toString().split(".")[0],precision=format.split(".")[1],thousands=format.indexOf(","),leadingCount=(format.split(".")[0].split(",")[0].match(/0/g)||[]).length,precision?(numeral._.includes(precision,"[")?(precision=(precision=precision.replace("]","")).split("["),decimal=numeral._.toFixed(value,precision[0].length+precision[1].length,roundingFunction,precision[1].length)):decimal=numeral._.toFixed(value,precision.length,roundingFunction),int=decimal.split(".")[0],decimal=numeral._.includes(decimal,".")?locale.delimiters.decimal+decimal.split(".")[1]:"",optDec&&0===Number(decimal.slice(1))&&(decimal="")):int=numeral._.toFixed(value,0,roundingFunction),abbr&&!abbrForce&&Number(int)>=1e3&&abbr!==locale.abbreviations.trillion)switch(int=String(Number(int)/1e3),abbr){case locale.abbreviations.thousand:abbr=locale.abbreviations.million;break;case locale.abbreviations.million:abbr=locale.abbreviations.billion;break;case locale.abbreviations.billion:abbr=locale.abbreviations.trillion}if(numeral._.includes(int,"-")&&(int=int.slice(1),neg=!0),int.length<leadingCount)for(var i=leadingCount-int.length;i>0;i--)int="0"+int;return thousands>-1&&(int=int.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+locale.delimiters.thousands)),0===format.indexOf(".")&&(int=""),output=int+decimal+(abbr||""),negP?output=(negP&&neg?"(":"")+output+(negP&&neg?")":""):signed>=0?output=0===signed?(neg?"-":"+")+output:output+(neg?"-":"+"):neg&&(output="-"+output),output},stringToNumber:function(string){var abbreviation,value,regexp,locale=locales[options$2.currentLocale],stringOriginal=string,abbreviations={thousand:3,million:6,billion:9,trillion:12};if(options$2.zeroFormat&&string===options$2.zeroFormat)value=0;else if(options$2.nullFormat&&string===options$2.nullFormat||!string.replace(/[^0-9]+/g,"").length)value=null;else{for(abbreviation in value=1,"."!==locale.delimiters.decimal&&(string=string.replace(/\./g,"").replace(locale.delimiters.decimal,".")),abbreviations)if(regexp=new RegExp("[^a-zA-Z]"+locale.abbreviations[abbreviation]+"(?:\\)|(\\"+locale.currency.symbol+")?(?:\\))?)?$"),stringOriginal.match(regexp)){value*=Math.pow(10,abbreviations[abbreviation]);break}value*=(string.split("-").length+Math.min(string.split("(").length-1,string.split(")").length-1))%2?1:-1,string=string.replace(/[^0-9\.]+/g,""),value*=Number(string)}return value},isNaN:function(value){return"number"==typeof value&&isNaN(value)},includes:function(string,search){return-1!==string.indexOf(search)},insert:function(string,subString,start){return string.slice(0,start)+subString+string.slice(start)},reduce:function(array,callback){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof callback)throw new TypeError(callback+" is not a function");var value,t=Object(array),len=t.length>>>0,k=0;if(3===arguments.length)value=arguments[2];else{for(;k<len&&!(k in t);)k++;if(k>=len)throw new TypeError("Reduce of empty array with no initial value");value=t[k++]}for(;k<len;k++)k in t&&(value=callback(value,t[k],k,t));return value},multiplier:function(x){var parts=x.toString().split(".");return parts.length<2?1:Math.pow(10,parts[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce((function(accum,next){var mn=_.multiplier(next);return accum>mn?accum:mn}),1)},toFixed:function(value,maxDecimals,roundingFunction,optionals){var boundedPrecision,optionalsRegExp,power,output,splitValue=value.toString().split("."),minDecimals=maxDecimals-(optionals||0);return boundedPrecision=2===splitValue.length?Math.min(Math.max(splitValue[1].length,minDecimals),maxDecimals):minDecimals,power=Math.pow(10,boundedPrecision),output=(roundingFunction(value+"e+"+boundedPrecision)/power).toFixed(boundedPrecision),optionals>maxDecimals-boundedPrecision&&(optionalsRegExp=new RegExp("\\.?0{1,"+(optionals-(maxDecimals-boundedPrecision))+"}$"),output=output.replace(optionalsRegExp,"")),output}},numeral.options=options$2,numeral.formats=formats,numeral.locales=locales,numeral.locale=function(key){return key&&(options$2.currentLocale=key.toLowerCase()),options$2.currentLocale},numeral.localeData=function(key){if(!key)return locales[options$2.currentLocale];if(key=key.toLowerCase(),!locales[key])throw new Error("Unknown locale : "+key);return locales[key]},numeral.reset=function(){for(var property in defaults)options$2[property]=defaults[property]},numeral.zeroFormat=function(format){options$2.zeroFormat="string"==typeof format?format:null},numeral.nullFormat=function(format){options$2.nullFormat="string"==typeof format?format:null},numeral.defaultFormat=function(format){options$2.defaultFormat="string"==typeof format?format:"0.0"},numeral.register=function(type,name,format,overwrite){if(name=name.toLowerCase(),!overwrite&&this[type+"s"][name])throw new TypeError(name+" "+type+" already registered.");return this[type+"s"][name]=format,format},numeral.validate=function(val,culture){var _decimalSep,_thousandSep,_currSymbol,_valArray,_abbrObj,_thousandRegEx,localeData,temp;if("string"!=typeof val&&(val+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",val)),(val=val.trim()).match(/^\d+$/))return!0;if(""===val)return!1;try{localeData=numeral.localeData(culture)}catch(e){localeData=numeral.localeData(numeral.locale())}return _currSymbol=localeData.currency.symbol,_abbrObj=localeData.abbreviations,_decimalSep=localeData.delimiters.decimal,_thousandSep="."===localeData.delimiters.thousands?"\\.":localeData.delimiters.thousands,(null===(temp=val.match(/^[^\d]+/))||(val=val.substr(1),temp[0]===_currSymbol))&&((null===(temp=val.match(/[^\d]+$/))||(val=val.slice(0,-1),temp[0]===_abbrObj.thousand||temp[0]===_abbrObj.million||temp[0]===_abbrObj.billion||temp[0]===_abbrObj.trillion))&&(_thousandRegEx=new RegExp(_thousandSep+"{2}"),!val.match(/[^\d.,]/g)&&(!((_valArray=val.split(_decimalSep)).length>2)&&(_valArray.length<2?!!_valArray[0].match(/^\d+.*\d$/)&&!_valArray[0].match(_thousandRegEx):1===_valArray[0].length?!!_valArray[0].match(/^\d+$/)&&!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/):!!_valArray[0].match(/^\d+.*\d$/)&&!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/)))))},numeral.fn=Numeral.prototype={clone:function(){return numeral(this)},format:function(inputString,roundingFunction){var kind,output,formatFunction,value=this._value,format=inputString||options$2.defaultFormat;if(roundingFunction=roundingFunction||Math.round,0===value&&null!==options$2.zeroFormat)output=options$2.zeroFormat;else if(null===value&&null!==options$2.nullFormat)output=options$2.nullFormat;else{for(kind in formats)if(format.match(formats[kind].regexps.format)){formatFunction=formats[kind].format;break}output=(formatFunction=formatFunction||numeral._.numberToFormat)(value,format,roundingFunction)}return output},value:function(){return this._value},input:function(){return this._input},set:function(value){return this._value=Number(value),this},add:function(value){var corrFactor=_.correctionFactor.call(null,this._value,value);return this._value=_.reduce([this._value,value],(function cback(accum,curr,currI,O){return accum+Math.round(corrFactor*curr)}),0)/corrFactor,this},subtract:function(value){var corrFactor=_.correctionFactor.call(null,this._value,value);return this._value=_.reduce([value],(function cback(accum,curr,currI,O){return accum-Math.round(corrFactor*curr)}),Math.round(this._value*corrFactor))/corrFactor,this},multiply:function(value){return this._value=_.reduce([this._value,value],(function cback(accum,curr,currI,O){var corrFactor=_.correctionFactor(accum,curr);return Math.round(accum*corrFactor)*Math.round(curr*corrFactor)/Math.round(corrFactor*corrFactor)}),1),this},divide:function(value){return this._value=_.reduce([this._value,value],(function cback(accum,curr,currI,O){var corrFactor=_.correctionFactor(accum,curr);return Math.round(accum*corrFactor)/Math.round(curr*corrFactor)})),this},difference:function(value){return Math.abs(numeral(this._value).subtract(value).value())}},numeral.register("locale","us",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(number){var b=number%10;return 1==~~(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),numeral.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(value,format,roundingFunction){var output,space=numeral._.includes(format," BPS")?" ":"";return value*=1e4,format=format.replace(/\s?BPS/,""),output=numeral._.numberToFormat(value,format,roundingFunction),numeral._.includes(output,")")?((output=output.split("")).splice(-1,0,space+"BPS"),output=output.join("")):output=output+space+"BPS",output},unformat:function(string){return+(1e-4*numeral._.stringToNumber(string)).toFixed(15)}}),function(){var decimal={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},binary={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},unformatRegex=decimal.suffixes.concat(binary.suffixes.filter((function(item){return decimal.suffixes.indexOf(item)<0}))).join("|");unformatRegex="("+unformatRegex.replace("B","B(?!PS)")+")",numeral.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(unformatRegex)},format:function(value,format,roundingFunction){var power,min,max,bytes=numeral._.includes(format,"ib")?binary:decimal,suffix=numeral._.includes(format," b")||numeral._.includes(format," ib")?" ":"";for(format=format.replace(/\s?i?b/,""),power=0;power<=bytes.suffixes.length;power++)if(min=Math.pow(bytes.base,power),max=Math.pow(bytes.base,power+1),null===value||0===value||value>=min&&value<max){suffix+=bytes.suffixes[power],min>0&&(value/=min);break}return numeral._.numberToFormat(value,format,roundingFunction)+suffix},unformat:function(string){var power,bytesMultiplier,value=numeral._.stringToNumber(string);if(value){for(power=decimal.suffixes.length-1;power>=0;power--){if(numeral._.includes(string,decimal.suffixes[power])){bytesMultiplier=Math.pow(decimal.base,power);break}if(numeral._.includes(string,binary.suffixes[power])){bytesMultiplier=Math.pow(binary.base,power);break}}value*=bytesMultiplier||1}return value}})}(),numeral.register("format","currency",{regexps:{format:/(\$)/},format:function(value,format,roundingFunction){var output,i,locale=numeral.locales[numeral.options.currentLocale],symbols={before:format.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:format.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(format=format.replace(/\s?\$\s?/,""),output=numeral._.numberToFormat(value,format,roundingFunction),value>=0?(symbols.before=symbols.before.replace(/[\-\(]/,""),symbols.after=symbols.after.replace(/[\-\)]/,"")):value<0&&!numeral._.includes(symbols.before,"-")&&!numeral._.includes(symbols.before,"(")&&(symbols.before="-"+symbols.before),i=0;i<symbols.before.length;i++)switch(symbols.before[i]){case"$":output=numeral._.insert(output,locale.currency.symbol,i);break;case" ":output=numeral._.insert(output," ",i+locale.currency.symbol.length-1)}for(i=symbols.after.length-1;i>=0;i--)switch(symbols.after[i]){case"$":output=i===symbols.after.length-1?output+locale.currency.symbol:numeral._.insert(output,locale.currency.symbol,-(symbols.after.length-(1+i)));break;case" ":output=i===symbols.after.length-1?output+" ":numeral._.insert(output," ",-(symbols.after.length-(1+i)+locale.currency.symbol.length-1))}return output}}),numeral.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(value,format,roundingFunction){var parts=("number"!=typeof value||numeral._.isNaN(value)?"0e+0":value.toExponential()).split("e");return format=format.replace(/e[\+|\-]{1}0/,""),numeral._.numberToFormat(Number(parts[0]),format,roundingFunction)+"e"+parts[1]},unformat:function(string){var parts=numeral._.includes(string,"e+")?string.split("e+"):string.split("e-"),value=Number(parts[0]),power=Number(parts[1]);return power=numeral._.includes(string,"e-")?power*=-1:power,numeral._.reduce([value,Math.pow(10,power)],(function cback(accum,curr,currI,O){var corrFactor=numeral._.correctionFactor(accum,curr);return accum*corrFactor*(curr*corrFactor)/(corrFactor*corrFactor)}),1)}}),numeral.register("format","ordinal",{regexps:{format:/(o)/},format:function(value,format,roundingFunction){var locale=numeral.locales[numeral.options.currentLocale],ordinal=numeral._.includes(format," o")?" ":"";return format=format.replace(/\s?o/,""),ordinal+=locale.ordinal(value),numeral._.numberToFormat(value,format,roundingFunction)+ordinal}}),numeral.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(value,format,roundingFunction){var output,space=numeral._.includes(format," %")?" ":"";return numeral.options.scalePercentBy100&&(value*=100),format=format.replace(/\s?\%/,""),output=numeral._.numberToFormat(value,format,roundingFunction),numeral._.includes(output,")")?((output=output.split("")).splice(-1,0,space+"%"),output=output.join("")):output=output+space+"%",output},unformat:function(string){var number=numeral._.stringToNumber(string);return numeral.options.scalePercentBy100?.01*number:number}}),numeral.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(value,format,roundingFunction){var hours=Math.floor(value/60/60),minutes=Math.floor((value-60*hours*60)/60),seconds=Math.round(value-60*hours*60-60*minutes);return hours+":"+(minutes<10?"0"+minutes:minutes)+":"+(seconds<10?"0"+seconds:seconds)},unformat:function(string){var timeArray=string.split(":"),seconds=0;return 3===timeArray.length?(seconds+=60*Number(timeArray[0])*60,seconds+=60*Number(timeArray[1]),seconds+=Number(timeArray[2])):2===timeArray.length&&(seconds+=60*Number(timeArray[0]),seconds+=Number(timeArray[1])),Number(seconds)}});var numeral$1=numeral;const consoleLogger={type:"logger",log(args){this.output("log",args)},warn(args){this.output("warn",args)},error(args){this.output("error",args)},output(type,args){console&&console[type]&&console[type].apply(console,args)}};class Logger{constructor(concreteLogger){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(concreteLogger,options)}init(concreteLogger){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=options.prefix||"i18next:",this.logger=concreteLogger||consoleLogger,this.options=options,this.debug=options.debug}log(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this.forward(args,"log","",!0)}warn(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return this.forward(args,"warn","",!0)}error(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return this.forward(args,"error","")}deprecate(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return this.forward(args,"warn","WARNING DEPRECATED: ",!0)}forward(args,lvl,prefix,debugOnly){return debugOnly&&!this.debug?null:("string"==typeof args[0]&&(args[0]=`${prefix}${this.prefix} ${args[0]}`),this.logger[lvl](args))}create(moduleName){return new Logger(this.logger,{prefix:`${this.prefix}:${moduleName}:`,...this.options})}clone(options){return(options=options||this.options).prefix=options.prefix||this.prefix,new Logger(this.logger,options)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(events,listener){return events.split(" ").forEach((event=>{this.observers[event]=this.observers[event]||[],this.observers[event].push(listener)})),this}off(event,listener){this.observers[event]&&(listener?this.observers[event]=this.observers[event].filter((l=>l!==listener)):delete this.observers[event])}emit(event){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];if(this.observers[event]){[].concat(this.observers[event]).forEach((observer=>{observer(...args)}))}if(this.observers["*"]){[].concat(this.observers["*"]).forEach((observer=>{observer.apply(observer,[event,...args])}))}}}function defer(){let res,rej;const promise=new Promise(((resolve,reject)=>{res=resolve,rej=reject}));return promise.resolve=res,promise.reject=rej,promise}function makeString(object){return null==object?"":""+object}function getLastOfPath(object,path,Empty){function cleanKey(key){return key&&key.indexOf("###")>-1?key.replace(/###/g,"."):key}function canNotTraverseDeeper(){return!object||"string"==typeof object}const stack="string"!=typeof path?[].concat(path):path.split(".");for(;stack.length>1;){if(canNotTraverseDeeper())return{};const key=cleanKey(stack.shift());!object[key]&&Empty&&(object[key]=new Empty),object=Object.prototype.hasOwnProperty.call(object,key)?object[key]:{}}return canNotTraverseDeeper()?{}:{obj:object,k:cleanKey(stack.shift())}}function setPath(object,path,newValue){const{obj:obj,k:k}=getLastOfPath(object,path,Object);obj[k]=newValue}function getPath(object,path){const{obj:obj,k:k}=getLastOfPath(object,path);if(obj)return obj[k]}function deepExtend(target,source,overwrite){for(const prop in source)"__proto__"!==prop&&"constructor"!==prop&&(prop in target?"string"==typeof target[prop]||target[prop]instanceof String||"string"==typeof source[prop]||source[prop]instanceof String?overwrite&&(target[prop]=source[prop]):deepExtend(target[prop],source[prop],overwrite):target[prop]=source[prop]);return target}function regexEscape(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escape(data){return"string"==typeof data?data.replace(/[&<>"'\/]/g,(s=>_entityMap[s])):data}const chars=[" ",",","?","!",";"];function deepFind(obj,path){let keySeparator=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!obj)return;if(obj[path])return obj[path];const paths=path.split(keySeparator);let current=obj;for(let i=0;i<paths.length;++i){if(!current)return;if("string"==typeof current[paths[i]]&&i+1<paths.length)return;if(void 0===current[paths[i]]){let j=2,p=paths.slice(i,i+j).join(keySeparator),mix=current[p];for(;void 0===mix&&paths.length>i+j;)j++,p=paths.slice(i,i+j).join(keySeparator),mix=current[p];if(void 0===mix)return;if(null===mix)return null;if(path.endsWith(p)){if("string"==typeof mix)return mix;if(p&&"string"==typeof mix[p])return mix[p]}const joinedPath=paths.slice(i+j).join(keySeparator);return joinedPath?deepFind(mix,joinedPath,keySeparator):void 0}current=current[paths[i]]}return current}function getCleanedCode(code){return code&&code.indexOf("_")>0?code.replace("_","-"):code}class ResourceStore extends EventEmitter{constructor(data){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=data||{},this.options=options,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(ns){this.options.ns.indexOf(ns)<0&&this.options.ns.push(ns)}removeNamespaces(ns){const index=this.options.ns.indexOf(ns);index>-1&&this.options.ns.splice(index,1)}getResource(lng,ns,key){let options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const keySeparator=void 0!==options.keySeparator?options.keySeparator:this.options.keySeparator,ignoreJSONStructure=void 0!==options.ignoreJSONStructure?options.ignoreJSONStructure:this.options.ignoreJSONStructure;let path=[lng,ns];key&&"string"!=typeof key&&(path=path.concat(key)),key&&"string"==typeof key&&(path=path.concat(keySeparator?key.split(keySeparator):key)),lng.indexOf(".")>-1&&(path=lng.split("."));const result=getPath(this.data,path);return result||!ignoreJSONStructure||"string"!=typeof key?result:deepFind(this.data&&this.data[lng]&&this.data[lng][ns],key,keySeparator)}addResource(lng,ns,key,value){let options=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const keySeparator=void 0!==options.keySeparator?options.keySeparator:this.options.keySeparator;let path=[lng,ns];key&&(path=path.concat(keySeparator?key.split(keySeparator):key)),lng.indexOf(".")>-1&&(path=lng.split("."),value=ns,ns=path[1]),this.addNamespaces(ns),setPath(this.data,path,value),options.silent||this.emit("added",lng,ns,key,value)}addResources(lng,ns,resources){let options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const m in resources)"string"!=typeof resources[m]&&"[object Array]"!==Object.prototype.toString.apply(resources[m])||this.addResource(lng,ns,m,resources[m],{silent:!0});options.silent||this.emit("added",lng,ns,resources)}addResourceBundle(lng,ns,resources,deep,overwrite){let options=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},path=[lng,ns];lng.indexOf(".")>-1&&(path=lng.split("."),deep=resources,resources=ns,ns=path[1]),this.addNamespaces(ns);let pack=getPath(this.data,path)||{};deep?deepExtend(pack,resources,overwrite):pack={...pack,...resources},setPath(this.data,path,pack),options.silent||this.emit("added",lng,ns,resources)}removeResourceBundle(lng,ns){this.hasResourceBundle(lng,ns)&&delete this.data[lng][ns],this.removeNamespaces(ns),this.emit("removed",lng,ns)}hasResourceBundle(lng,ns){return void 0!==this.getResource(lng,ns)}getResourceBundle(lng,ns){return ns||(ns=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(lng,ns)}:this.getResource(lng,ns)}getDataByLanguage(lng){return this.data[lng]}hasLanguageSomeTranslations(lng){const data=this.getDataByLanguage(lng);return!!(data&&Object.keys(data)||[]).find((v=>data[v]&&Object.keys(data[v]).length>0))}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(module){this.processors[module.name]=module},handle(processors,value,key,options,translator){return processors.forEach((processor=>{this.processors[processor]&&(value=this.processors[processor].process(value,key,options,translator))})),value}};const checkedLoadedFor={};class Translator extends EventEmitter{constructor(services){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),function copy$2(a,s,t){a.forEach((m=>{s[m]&&(t[m]=s[m])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],services,this),this.options=options,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(lng){lng&&(this.language=lng)}exists(key){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==key)return!1;const resolved=this.resolve(key,options);return resolved&&void 0!==resolved.res}extractFromKey(key,options){let nsSeparator=void 0!==options.nsSeparator?options.nsSeparator:this.options.nsSeparator;void 0===nsSeparator&&(nsSeparator=":");const keySeparator=void 0!==options.keySeparator?options.keySeparator:this.options.keySeparator;let namespaces=options.ns||this.options.defaultNS||[];const wouldCheckForNsInKey=nsSeparator&&key.indexOf(nsSeparator)>-1,seemsNaturalLanguage=!(this.options.userDefinedKeySeparator||options.keySeparator||this.options.userDefinedNsSeparator||options.nsSeparator||function looksLikeObjectPath(key,nsSeparator,keySeparator){nsSeparator=nsSeparator||"",keySeparator=keySeparator||"";const possibleChars=chars.filter((c=>nsSeparator.indexOf(c)<0&&keySeparator.indexOf(c)<0));if(0===possibleChars.length)return!0;const r=new RegExp(`(${possibleChars.map((c=>"?"===c?"\\?":c)).join("|")})`);let matched=!r.test(key);if(!matched){const ki=key.indexOf(keySeparator);ki>0&&!r.test(key.substring(0,ki))&&(matched=!0)}return matched}(key,nsSeparator,keySeparator));if(wouldCheckForNsInKey&&!seemsNaturalLanguage){const m=key.match(this.interpolator.nestingRegexp);if(m&&m.length>0)return{key:key,namespaces:namespaces};const parts=key.split(nsSeparator);(nsSeparator!==keySeparator||nsSeparator===keySeparator&&this.options.ns.indexOf(parts[0])>-1)&&(namespaces=parts.shift()),key=parts.join(keySeparator)}return"string"==typeof namespaces&&(namespaces=[namespaces]),{key:key,namespaces:namespaces}}translate(keys,options,lastKey){if("object"!=typeof options&&this.options.overloadTranslationOptionHandler&&(options=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof options&&(options={...options}),options||(options={}),null==keys)return"";Array.isArray(keys)||(keys=[String(keys)]);const returnDetails=void 0!==options.returnDetails?options.returnDetails:this.options.returnDetails,keySeparator=void 0!==options.keySeparator?options.keySeparator:this.options.keySeparator,{key:key,namespaces:namespaces}=this.extractFromKey(keys[keys.length-1],options),namespace=namespaces[namespaces.length-1],lng=options.lng||this.language,appendNamespaceToCIMode=options.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(lng&&"cimode"===lng.toLowerCase()){if(appendNamespaceToCIMode){const nsSeparator=options.nsSeparator||this.options.nsSeparator;return returnDetails?{res:`${namespace}${nsSeparator}${key}`,usedKey:key,exactUsedKey:key,usedLng:lng,usedNS:namespace}:`${namespace}${nsSeparator}${key}`}return returnDetails?{res:key,usedKey:key,exactUsedKey:key,usedLng:lng,usedNS:namespace}:key}const resolved=this.resolve(keys,options);let res=resolved&&resolved.res;const resUsedKey=resolved&&resolved.usedKey||key,resExactUsedKey=resolved&&resolved.exactUsedKey||key,resType=Object.prototype.toString.apply(res),joinArrays=void 0!==options.joinArrays?options.joinArrays:this.options.joinArrays,handleAsObjectInI18nFormat=!this.i18nFormat||this.i18nFormat.handleAsObject;if(handleAsObjectInI18nFormat&&res&&("string"!=typeof res&&"boolean"!=typeof res&&"number"!=typeof res)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(resType)<0&&("string"!=typeof joinArrays||"[object Array]"!==resType)){if(!options.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const r=this.options.returnedObjectHandler?this.options.returnedObjectHandler(resUsedKey,res,{...options,ns:namespaces}):`key '${key} (${this.language})' returned an object instead of string.`;return returnDetails?(resolved.res=r,resolved):r}if(keySeparator){const resTypeIsArray="[object Array]"===resType,copy=resTypeIsArray?[]:{},newKeyToUse=resTypeIsArray?resExactUsedKey:resUsedKey;for(const m in res)if(Object.prototype.hasOwnProperty.call(res,m)){const deepKey=`${newKeyToUse}${keySeparator}${m}`;copy[m]=this.translate(deepKey,{...options,joinArrays:!1,ns:namespaces}),copy[m]===deepKey&&(copy[m]=res[m])}res=copy}}else if(handleAsObjectInI18nFormat&&"string"==typeof joinArrays&&"[object Array]"===resType)res=res.join(joinArrays),res&&(res=this.extendTranslation(res,keys,options,lastKey));else{let usedDefault=!1,usedKey=!1;const needsPluralHandling=void 0!==options.count&&"string"!=typeof options.count,hasDefaultValue=Translator.hasDefaultValue(options),defaultValueSuffix=needsPluralHandling?this.pluralResolver.getSuffix(lng,options.count,options):"",defaultValueSuffixOrdinalFallback=options.ordinal&&needsPluralHandling?this.pluralResolver.getSuffix(lng,options.count,{ordinal:!1}):"",defaultValue=options[`defaultValue${defaultValueSuffix}`]||options[`defaultValue${defaultValueSuffixOrdinalFallback}`]||options.defaultValue;!this.isValidLookup(res)&&hasDefaultValue&&(usedDefault=!0,res=defaultValue),this.isValidLookup(res)||(usedKey=!0,res=key);const resForMissing=(options.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&usedKey?void 0:res,updateMissing=hasDefaultValue&&defaultValue!==res&&this.options.updateMissing;if(usedKey||usedDefault||updateMissing){if(this.logger.log(updateMissing?"updateKey":"missingKey",lng,namespace,key,updateMissing?defaultValue:res),keySeparator){const fk=this.resolve(key,{...options,keySeparator:!1});fk&&fk.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let lngs=[];const fallbackLngs=this.languageUtils.getFallbackCodes(this.options.fallbackLng,options.lng||this.language);if("fallback"===this.options.saveMissingTo&&fallbackLngs&&fallbackLngs[0])for(let i=0;i<fallbackLngs.length;i++)lngs.push(fallbackLngs[i]);else"all"===this.options.saveMissingTo?lngs=this.languageUtils.toResolveHierarchy(options.lng||this.language):lngs.push(options.lng||this.language);const send=(l,k,specificDefaultValue)=>{const defaultForMissing=hasDefaultValue&&specificDefaultValue!==res?specificDefaultValue:resForMissing;this.options.missingKeyHandler?this.options.missingKeyHandler(l,namespace,k,defaultForMissing,updateMissing,options):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(l,namespace,k,defaultForMissing,updateMissing,options),this.emit("missingKey",l,namespace,k,res)};this.options.saveMissing&&(this.options.saveMissingPlurals&&needsPluralHandling?lngs.forEach((language=>{this.pluralResolver.getSuffixes(language,options).forEach((suffix=>{send([language],key+suffix,options[`defaultValue${suffix}`]||defaultValue)}))})):send(lngs,key,defaultValue))}res=this.extendTranslation(res,keys,options,resolved,lastKey),usedKey&&res===key&&this.options.appendNamespaceToMissingKey&&(res=`${namespace}:${key}`),(usedKey||usedDefault)&&this.options.parseMissingKeyHandler&&(res="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${namespace}:${key}`:key,usedDefault?res:void 0):this.options.parseMissingKeyHandler(res))}return returnDetails?(resolved.res=res,resolved):res}extendTranslation(res,key,options,resolved,lastKey){var _this=this;if(this.i18nFormat&&this.i18nFormat.parse)res=this.i18nFormat.parse(res,{...this.options.interpolation.defaultVariables,...options},options.lng||this.language||resolved.usedLng,resolved.usedNS,resolved.usedKey,{resolved:resolved});else if(!options.skipInterpolation){options.interpolation&&this.interpolator.init({...options,interpolation:{...this.options.interpolation,...options.interpolation}});const skipOnVariables="string"==typeof res&&(options&&options.interpolation&&void 0!==options.interpolation.skipOnVariables?options.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let nestBef;if(skipOnVariables){const nb=res.match(this.interpolator.nestingRegexp);nestBef=nb&&nb.length}let data=options.replace&&"string"!=typeof options.replace?options.replace:options;if(this.options.interpolation.defaultVariables&&(data={...this.options.interpolation.defaultVariables,...data}),res=this.interpolator.interpolate(res,data,options.lng||this.language,options),skipOnVariables){const na=res.match(this.interpolator.nestingRegexp);nestBef<(na&&na.length)&&(options.nest=!1)}!options.lng&&"v1"!==this.options.compatibilityAPI&&resolved&&resolved.res&&(options.lng=resolved.usedLng),!1!==options.nest&&(res=this.interpolator.nest(res,(function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return lastKey&&lastKey[0]===args[0]&&!options.context?(_this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`),null):_this.translate(...args,key)}),options)),options.interpolation&&this.interpolator.reset()}const postProcess=options.postProcess||this.options.postProcess,postProcessorNames="string"==typeof postProcess?[postProcess]:postProcess;return null!=res&&postProcessorNames&&postProcessorNames.length&&!1!==options.applyPostProcessor&&(res=postProcessor.handle(postProcessorNames,res,key,this.options&&this.options.postProcessPassResolved?{i18nResolved:resolved,...options}:options,this)),res}resolve(keys){let found,usedKey,exactUsedKey,usedLng,usedNS,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof keys&&(keys=[keys]),keys.forEach((k=>{if(this.isValidLookup(found))return;const extracted=this.extractFromKey(k,options),key=extracted.key;usedKey=key;let namespaces=extracted.namespaces;this.options.fallbackNS&&(namespaces=namespaces.concat(this.options.fallbackNS));const needsPluralHandling=void 0!==options.count&&"string"!=typeof options.count,needsZeroSuffixLookup=needsPluralHandling&&!options.ordinal&&0===options.count&&this.pluralResolver.shouldUseIntlApi(),needsContextHandling=void 0!==options.context&&("string"==typeof options.context||"number"==typeof options.context)&&""!==options.context,codes=options.lngs?options.lngs:this.languageUtils.toResolveHierarchy(options.lng||this.language,options.fallbackLng);namespaces.forEach((ns=>{this.isValidLookup(found)||(usedNS=ns,!checkedLoadedFor[`${codes[0]}-${ns}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(usedNS)&&(checkedLoadedFor[`${codes[0]}-${ns}`]=!0,this.logger.warn(`key "${usedKey}" for languages "${codes.join(", ")}" won't get resolved as namespace "${usedNS}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),codes.forEach((code=>{if(this.isValidLookup(found))return;usedLng=code;const finalKeys=[key];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(finalKeys,key,code,ns,options);else{let pluralSuffix;needsPluralHandling&&(pluralSuffix=this.pluralResolver.getSuffix(code,options.count,options));const zeroSuffix=`${this.options.pluralSeparator}zero`,ordinalPrefix=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(needsPluralHandling&&(finalKeys.push(key+pluralSuffix),options.ordinal&&0===pluralSuffix.indexOf(ordinalPrefix)&&finalKeys.push(key+pluralSuffix.replace(ordinalPrefix,this.options.pluralSeparator)),needsZeroSuffixLookup&&finalKeys.push(key+zeroSuffix)),needsContextHandling){const contextKey=`${key}${this.options.contextSeparator}${options.context}`;finalKeys.push(contextKey),needsPluralHandling&&(finalKeys.push(contextKey+pluralSuffix),options.ordinal&&0===pluralSuffix.indexOf(ordinalPrefix)&&finalKeys.push(contextKey+pluralSuffix.replace(ordinalPrefix,this.options.pluralSeparator)),needsZeroSuffixLookup&&finalKeys.push(contextKey+zeroSuffix))}}let possibleKey;for(;possibleKey=finalKeys.pop();)this.isValidLookup(found)||(exactUsedKey=possibleKey,found=this.getResource(code,ns,possibleKey,options))})))}))})),{res:found,usedKey:usedKey,exactUsedKey:exactUsedKey,usedLng:usedLng,usedNS:usedNS}}isValidLookup(res){return!(void 0===res||!this.options.returnNull&&null===res||!this.options.returnEmptyString&&""===res)}getResource(code,ns,key){let options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(code,ns,key,options):this.resourceStore.getResource(code,ns,key,options)}static hasDefaultValue(options){for(const option in options)if(Object.prototype.hasOwnProperty.call(options,option)&&"defaultValue"===option.substring(0,12)&&void 0!==options[option])return!0;return!1}}function capitalize$1(string){return string.charAt(0).toUpperCase()+string.slice(1)}class LanguageUtil{constructor(options){this.options=options,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(code){if(!(code=getCleanedCode(code))||code.indexOf("-")<0)return null;const p=code.split("-");return 2===p.length?null:(p.pop(),"x"===p[p.length-1].toLowerCase()?null:this.formatLanguageCode(p.join("-")))}getLanguagePartFromCode(code){if(!(code=getCleanedCode(code))||code.indexOf("-")<0)return code;const p=code.split("-");return this.formatLanguageCode(p[0])}formatLanguageCode(code){if("string"==typeof code&&code.indexOf("-")>-1){const specialCases=["hans","hant","latn","cyrl","cans","mong","arab"];let p=code.split("-");return this.options.lowerCaseLng?p=p.map((part=>part.toLowerCase())):2===p.length?(p[0]=p[0].toLowerCase(),p[1]=p[1].toUpperCase(),specialCases.indexOf(p[1].toLowerCase())>-1&&(p[1]=capitalize$1(p[1].toLowerCase()))):3===p.length&&(p[0]=p[0].toLowerCase(),2===p[1].length&&(p[1]=p[1].toUpperCase()),"sgn"!==p[0]&&2===p[2].length&&(p[2]=p[2].toUpperCase()),specialCases.indexOf(p[1].toLowerCase())>-1&&(p[1]=capitalize$1(p[1].toLowerCase())),specialCases.indexOf(p[2].toLowerCase())>-1&&(p[2]=capitalize$1(p[2].toLowerCase()))),p.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?code.toLowerCase():code}isSupportedCode(code){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(code=this.getLanguagePartFromCode(code)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(code)>-1}getBestMatchFromCodes(codes){if(!codes)return null;let found;return codes.forEach((code=>{if(found)return;const cleanedLng=this.formatLanguageCode(code);this.options.supportedLngs&&!this.isSupportedCode(cleanedLng)||(found=cleanedLng)})),!found&&this.options.supportedLngs&&codes.forEach((code=>{if(found)return;const lngOnly=this.getLanguagePartFromCode(code);if(this.isSupportedCode(lngOnly))return found=lngOnly;found=this.options.supportedLngs.find((supportedLng=>supportedLng===lngOnly?supportedLng:supportedLng.indexOf("-")<0&&lngOnly.indexOf("-")<0?void 0:0===supportedLng.indexOf(lngOnly)?supportedLng:void 0))})),found||(found=this.getFallbackCodes(this.options.fallbackLng)[0]),found}getFallbackCodes(fallbacks,code){if(!fallbacks)return[];if("function"==typeof fallbacks&&(fallbacks=fallbacks(code)),"string"==typeof fallbacks&&(fallbacks=[fallbacks]),"[object Array]"===Object.prototype.toString.apply(fallbacks))return fallbacks;if(!code)return fallbacks.default||[];let found=fallbacks[code];return found||(found=fallbacks[this.getScriptPartFromCode(code)]),found||(found=fallbacks[this.formatLanguageCode(code)]),found||(found=fallbacks[this.getLanguagePartFromCode(code)]),found||(found=fallbacks.default),found||[]}toResolveHierarchy(code,fallbackCode){const fallbackCodes=this.getFallbackCodes(fallbackCode||this.options.fallbackLng||[],code),codes=[],addCode=c=>{c&&(this.isSupportedCode(c)?codes.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return"string"==typeof code&&(code.indexOf("-")>-1||code.indexOf("_")>-1)?("languageOnly"!==this.options.load&&addCode(this.formatLanguageCode(code)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&addCode(this.getScriptPartFromCode(code)),"currentOnly"!==this.options.load&&addCode(this.getLanguagePartFromCode(code))):"string"==typeof code&&addCode(this.formatLanguageCode(code)),fallbackCodes.forEach((fc=>{codes.indexOf(fc)<0&&addCode(this.formatLanguageCode(fc))})),codes}}let sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:function(n){return Number(n>1)},2:function(n){return Number(1!=n)},3:function(n){return 0},4:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},5:function(n){return Number(0==n?0:1==n?1:2==n?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5)},6:function(n){return Number(1==n?0:n>=2&&n<=4?1:2)},7:function(n){return Number(1==n?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},8:function(n){return Number(1==n?0:2==n?1:8!=n&&11!=n?2:3)},9:function(n){return Number(n>=2)},10:function(n){return Number(1==n?0:2==n?1:n<7?2:n<11?3:4)},11:function(n){return Number(1==n||11==n?0:2==n||12==n?1:n>2&&n<20?2:3)},12:function(n){return Number(n%10!=1||n%100==11)},13:function(n){return Number(0!==n)},14:function(n){return Number(1==n?0:2==n?1:3==n?2:3)},15:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2)},16:function(n){return Number(n%10==1&&n%100!=11?0:0!==n?1:2)},17:function(n){return Number(1==n||n%10==1&&n%100!=11?0:1)},18:function(n){return Number(0==n?0:1==n?1:2)},19:function(n){return Number(1==n?0:0==n||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3)},20:function(n){return Number(1==n?0:0==n||n%100>0&&n%100<20?1:2)},21:function(n){return Number(n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0)},22:function(n){return Number(1==n?0:2==n?1:(n<0||n>10)&&n%10==0?2:3)}};const nonIntlVersions=["v1","v2","v3"],intlVersions=["v4"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5};class PluralResolver{constructor(languageUtils){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=languageUtils,this.options=options,this.logger=baseLogger.create("pluralResolver"),this.options.compatibilityJSON&&!intlVersions.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function createRules(){const rules={};return sets.forEach((set=>{set.lngs.forEach((l=>{rules[l]={numbers:set.nr,plurals:_rulesPluralsTypes[set.fc]}}))})),rules}()}addRule(lng,obj){this.rules[lng]=obj}getRule(code){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(getCleanedCode(code),{type:options.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[code]||this.rules[this.languageUtils.getLanguagePartFromCode(code)]}needsPlural(code){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const rule=this.getRule(code,options);return this.shouldUseIntlApi()?rule&&rule.resolvedOptions().pluralCategories.length>1:rule&&rule.numbers.length>1}getPluralFormsOfKey(code,key){let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(code,options).map((suffix=>`${key}${suffix}`))}getSuffixes(code){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const rule=this.getRule(code,options);return rule?this.shouldUseIntlApi()?rule.resolvedOptions().pluralCategories.sort(((pluralCategory1,pluralCategory2)=>suffixesOrder[pluralCategory1]-suffixesOrder[pluralCategory2])).map((pluralCategory=>`${this.options.prepend}${options.ordinal?`ordinal${this.options.prepend}`:""}${pluralCategory}`)):rule.numbers.map((number=>this.getSuffix(code,number,options))):[]}getSuffix(code,count){let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const rule=this.getRule(code,options);return rule?this.shouldUseIntlApi()?`${this.options.prepend}${options.ordinal?`ordinal${this.options.prepend}`:""}${rule.select(count)}`:this.getSuffixRetroCompatible(rule,count):(this.logger.warn(`no plural rule found for: ${code}`),"")}getSuffixRetroCompatible(rule,count){const idx=rule.noAbs?rule.plurals(count):rule.plurals(Math.abs(count));let suffix=rule.numbers[idx];this.options.simplifyPluralSuffix&&2===rule.numbers.length&&1===rule.numbers[0]&&(2===suffix?suffix="plural":1===suffix&&(suffix=""));const returnSuffix=()=>this.options.prepend&&suffix.toString()?this.options.prepend+suffix.toString():suffix.toString();return"v1"===this.options.compatibilityJSON?1===suffix?"":"number"==typeof suffix?`_plural_${suffix.toString()}`:returnSuffix():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===rule.numbers.length&&1===rule.numbers[0]?returnSuffix():this.options.prepend&&idx.toString()?this.options.prepend+idx.toString():idx.toString()}shouldUseIntlApi(){return!nonIntlVersions.includes(this.options.compatibilityJSON)}}function deepFindWithDefaults(data,defaultData,key){let keySeparator=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",ignoreJSONStructure=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],path=function getPathWithDefaults(data,defaultData,key){const value=getPath(data,key);return void 0!==value?value:getPath(defaultData,key)}(data,defaultData,key);return!path&&ignoreJSONStructure&&"string"==typeof key&&(path=deepFind(data,key,keySeparator),void 0===path&&(path=deepFind(defaultData,key,keySeparator))),path}class Interpolator{constructor(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=options,this.format=options.interpolation&&options.interpolation.format||(value=>value),this.init(options)}init(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};options.interpolation||(options.interpolation={escapeValue:!0});const iOpts=options.interpolation;this.escape=void 0!==iOpts.escape?iOpts.escape:escape,this.escapeValue=void 0===iOpts.escapeValue||iOpts.escapeValue,this.useRawValueToEscape=void 0!==iOpts.useRawValueToEscape&&iOpts.useRawValueToEscape,this.prefix=iOpts.prefix?regexEscape(iOpts.prefix):iOpts.prefixEscaped||"{{",this.suffix=iOpts.suffix?regexEscape(iOpts.suffix):iOpts.suffixEscaped||"}}",this.formatSeparator=iOpts.formatSeparator?iOpts.formatSeparator:iOpts.formatSeparator||",",this.unescapePrefix=iOpts.unescapeSuffix?"":iOpts.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":iOpts.unescapeSuffix||"",this.nestingPrefix=iOpts.nestingPrefix?regexEscape(iOpts.nestingPrefix):iOpts.nestingPrefixEscaped||regexEscape("$t("),this.nestingSuffix=iOpts.nestingSuffix?regexEscape(iOpts.nestingSuffix):iOpts.nestingSuffixEscaped||regexEscape(")"),this.nestingOptionsSeparator=iOpts.nestingOptionsSeparator?iOpts.nestingOptionsSeparator:iOpts.nestingOptionsSeparator||",",this.maxReplaces=iOpts.maxReplaces?iOpts.maxReplaces:1e3,this.alwaysFormat=void 0!==iOpts.alwaysFormat&&iOpts.alwaysFormat,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const regexpStr=`${this.prefix}(.+?)${this.suffix}`;this.regexp=new RegExp(regexpStr,"g");const regexpUnescapeStr=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=new RegExp(regexpUnescapeStr,"g");const nestingRegexpStr=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=new RegExp(nestingRegexpStr,"g")}interpolate(str,data,lng,options){let match,value,replaces;const defaultData=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function regexSafe(val){return val.replace(/\$/g,"$$$$")}const handleFormat=key=>{if(key.indexOf(this.formatSeparator)<0){const path=deepFindWithDefaults(data,defaultData,key,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(path,void 0,lng,{...options,...data,interpolationkey:key}):path}const p=key.split(this.formatSeparator),k=p.shift().trim(),f=p.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(data,defaultData,k,this.options.keySeparator,this.options.ignoreJSONStructure),f,lng,{...options,...data,interpolationkey:k})};this.resetRegExp();const missingInterpolationHandler=options&&options.missingInterpolationHandler||this.options.missingInterpolationHandler,skipOnVariables=options&&options.interpolation&&void 0!==options.interpolation.skipOnVariables?options.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:val=>regexSafe(val)},{regex:this.regexp,safeValue:val=>this.escapeValue?regexSafe(this.escape(val)):regexSafe(val)}].forEach((todo=>{for(replaces=0;match=todo.regex.exec(str);){const matchedVar=match[1].trim();if(value=handleFormat(matchedVar),void 0===value)if("function"==typeof missingInterpolationHandler){const temp=missingInterpolationHandler(str,match,options);value="string"==typeof temp?temp:""}else if(options&&Object.prototype.hasOwnProperty.call(options,matchedVar))value="";else{if(skipOnVariables){value=match[0];continue}this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`),value=""}else"string"==typeof value||this.useRawValueToEscape||(value=makeString(value));const safeValue=todo.safeValue(value);if(str=str.replace(match[0],safeValue),skipOnVariables?(todo.regex.lastIndex+=value.length,todo.regex.lastIndex-=match[0].length):todo.regex.lastIndex=0,replaces++,replaces>=this.maxReplaces)break}})),str}nest(str,fc){let match,value,clonedOptions,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function handleHasOptions(key,inheritedOptions){const sep=this.nestingOptionsSeparator;if(key.indexOf(sep)<0)return key;const c=key.split(new RegExp(`${sep}[ ]*{`));let optionsString=`{${c[1]}`;key=c[0],optionsString=this.interpolate(optionsString,clonedOptions);const matchedSingleQuotes=optionsString.match(/'/g),matchedDoubleQuotes=optionsString.match(/"/g);(matchedSingleQuotes&&matchedSingleQuotes.length%2==0&&!matchedDoubleQuotes||matchedDoubleQuotes.length%2!=0)&&(optionsString=optionsString.replace(/'/g,'"'));try{clonedOptions=JSON.parse(optionsString),inheritedOptions&&(clonedOptions={...inheritedOptions,...clonedOptions})}catch(e){return this.logger.warn(`failed parsing options string in nesting for key ${key}`,e),`${key}${sep}${optionsString}`}return delete clonedOptions.defaultValue,key}for(;match=this.nestingRegexp.exec(str);){let formatters=[];clonedOptions={...options},clonedOptions=clonedOptions.replace&&"string"!=typeof clonedOptions.replace?clonedOptions.replace:clonedOptions,clonedOptions.applyPostProcessor=!1,delete clonedOptions.defaultValue;let doReduce=!1;if(-1!==match[0].indexOf(this.formatSeparator)&&!/{.*}/.test(match[1])){const r=match[1].split(this.formatSeparator).map((elem=>elem.trim()));match[1]=r.shift(),formatters=r,doReduce=!0}if(value=fc(handleHasOptions.call(this,match[1].trim(),clonedOptions),clonedOptions),value&&match[0]===str&&"string"!=typeof value)return value;"string"!=typeof value&&(value=makeString(value)),value||(this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`),value=""),doReduce&&(value=formatters.reduce(((v,f)=>this.format(v,f,options.lng,{...options,interpolationkey:match[1].trim()})),value.trim())),str=str.replace(match[0],value),this.regexp.lastIndex=0}return str}}function createCachedFormatter(fn){const cache={};return function invokeFormatter(val,lng,options){const key=lng+JSON.stringify(options);let formatter=cache[key];return formatter||(formatter=fn(getCleanedCode(lng),options),cache[key]=formatter),formatter(val)}}class Formatter{constructor(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=options,this.formats={number:createCachedFormatter(((lng,opt)=>{const formatter=new Intl.NumberFormat(lng,{...opt});return val=>formatter.format(val)})),currency:createCachedFormatter(((lng,opt)=>{const formatter=new Intl.NumberFormat(lng,{...opt,style:"currency"});return val=>formatter.format(val)})),datetime:createCachedFormatter(((lng,opt)=>{const formatter=new Intl.DateTimeFormat(lng,{...opt});return val=>formatter.format(val)})),relativetime:createCachedFormatter(((lng,opt)=>{const formatter=new Intl.RelativeTimeFormat(lng,{...opt});return val=>formatter.format(val,opt.range||"day")})),list:createCachedFormatter(((lng,opt)=>{const formatter=new Intl.ListFormat(lng,{...opt});return val=>formatter.format(val)}))},this.init(options)}init(services){const iOpts=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=iOpts.formatSeparator?iOpts.formatSeparator:iOpts.formatSeparator||","}add(name,fc){this.formats[name.toLowerCase().trim()]=fc}addCached(name,fc){this.formats[name.toLowerCase().trim()]=createCachedFormatter(fc)}format(value,format,lng){let options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return format.split(this.formatSeparator).reduce(((mem,f)=>{const{formatName:formatName,formatOptions:formatOptions}=function parseFormatStr(formatStr){let formatName=formatStr.toLowerCase().trim();const formatOptions={};if(formatStr.indexOf("(")>-1){const p=formatStr.split("(");formatName=p[0].toLowerCase().trim();const optStr=p[1].substring(0,p[1].length-1);"currency"===formatName&&optStr.indexOf(":")<0?formatOptions.currency||(formatOptions.currency=optStr.trim()):"relativetime"===formatName&&optStr.indexOf(":")<0?formatOptions.range||(formatOptions.range=optStr.trim()):optStr.split(";").forEach((opt=>{if(!opt)return;const[key,...rest]=opt.split(":"),val=rest.join(":").trim().replace(/^'+|'+$/g,"");formatOptions[key.trim()]||(formatOptions[key.trim()]=val),"false"===val&&(formatOptions[key.trim()]=!1),"true"===val&&(formatOptions[key.trim()]=!0),isNaN(val)||(formatOptions[key.trim()]=parseInt(val,10))}))}return{formatName:formatName,formatOptions:formatOptions}}(f);if(this.formats[formatName]){let formatted=mem;try{const valOptions=options&&options.formatParams&&options.formatParams[options.interpolationkey]||{},l=valOptions.locale||valOptions.lng||options.locale||options.lng||lng;formatted=this.formats[formatName](mem,l,{...formatOptions,...options,...valOptions})}catch(error){this.logger.warn(error)}return formatted}return this.logger.warn(`there was no format function for ${formatName}`),mem}),value)}}class Connector extends EventEmitter{constructor(backend,store,services){let options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=backend,this.store=store,this.services=services,this.languageUtils=services.languageUtils,this.options=options,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=options.maxParallelReads||10,this.readingCalls=0,this.maxRetries=options.maxRetries>=0?options.maxRetries:5,this.retryTimeout=options.retryTimeout>=1?options.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(services,options.backend,options)}queueLoad(languages,namespaces,options,callback){const toLoad={},pending={},toLoadLanguages={},toLoadNamespaces={};return languages.forEach((lng=>{let hasAllNamespaces=!0;namespaces.forEach((ns=>{const name=`${lng}|${ns}`;!options.reload&&this.store.hasResourceBundle(lng,ns)?this.state[name]=2:this.state[name]<0||(1===this.state[name]?void 0===pending[name]&&(pending[name]=!0):(this.state[name]=1,hasAllNamespaces=!1,void 0===pending[name]&&(pending[name]=!0),void 0===toLoad[name]&&(toLoad[name]=!0),void 0===toLoadNamespaces[ns]&&(toLoadNamespaces[ns]=!0)))})),hasAllNamespaces||(toLoadLanguages[lng]=!0)})),(Object.keys(toLoad).length||Object.keys(pending).length)&&this.queue.push({pending:pending,pendingCount:Object.keys(pending).length,loaded:{},errors:[],callback:callback}),{toLoad:Object.keys(toLoad),pending:Object.keys(pending),toLoadLanguages:Object.keys(toLoadLanguages),toLoadNamespaces:Object.keys(toLoadNamespaces)}}loaded(name,err,data){const s=name.split("|"),lng=s[0],ns=s[1];err&&this.emit("failedLoading",lng,ns,err),data&&this.store.addResourceBundle(lng,ns,data),this.state[name]=err?-1:2;const loaded={};this.queue.forEach((q=>{!function pushPath(object,path,newValue,concat){const{obj:obj,k:k}=getLastOfPath(object,path,Object);obj[k]=obj[k]||[],concat&&(obj[k]=obj[k].concat(newValue)),concat||obj[k].push(newValue)}(q.loaded,[lng],ns),function removePending(q,name){void 0!==q.pending[name]&&(delete q.pending[name],q.pendingCount--)}(q,name),err&&q.errors.push(err),0!==q.pendingCount||q.done||(Object.keys(q.loaded).forEach((l=>{loaded[l]||(loaded[l]={});const loadedKeys=q.loaded[l];loadedKeys.length&&loadedKeys.forEach((n=>{void 0===loaded[l][n]&&(loaded[l][n]=!0)}))})),q.done=!0,q.errors.length?q.callback(q.errors):q.callback())})),this.emit("loaded",loaded),this.queue=this.queue.filter((q=>!q.done))}read(lng,ns,fcName){let tried=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,wait=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,callback=arguments.length>5?arguments[5]:void 0;if(!lng.length)return callback(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:lng,ns:ns,fcName:fcName,tried:tried,wait:wait,callback:callback});this.readingCalls++;const resolver=(err,data)=>{if(this.readingCalls--,this.waitingReads.length>0){const next=this.waitingReads.shift();this.read(next.lng,next.ns,next.fcName,next.tried,next.wait,next.callback)}err&&data&&tried<this.maxRetries?setTimeout((()=>{this.read.call(this,lng,ns,fcName,tried+1,2*wait,callback)}),wait):callback(err,data)},fc=this.backend[fcName].bind(this.backend);if(2!==fc.length)return fc(lng,ns,resolver);try{const r=fc(lng,ns);r&&"function"==typeof r.then?r.then((data=>resolver(null,data))).catch(resolver):resolver(null,r)}catch(err){resolver(err)}}prepareLoading(languages,namespaces){let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},callback=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),callback&&callback();"string"==typeof languages&&(languages=this.languageUtils.toResolveHierarchy(languages)),"string"==typeof namespaces&&(namespaces=[namespaces]);const toLoad=this.queueLoad(languages,namespaces,options,callback);if(!toLoad.toLoad.length)return toLoad.pending.length||callback(),null;toLoad.toLoad.forEach((name=>{this.loadOne(name)}))}load(languages,namespaces,callback){this.prepareLoading(languages,namespaces,{},callback)}reload(languages,namespaces,callback){this.prepareLoading(languages,namespaces,{reload:!0},callback)}loadOne(name){let prefix=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s=name.split("|"),lng=s[0],ns=s[1];this.read(lng,ns,"read",void 0,void 0,((err,data)=>{err&&this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`,err),!err&&data&&this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`,data),this.loaded(name,err,data)}))}saveMissing(languages,namespace,key,fallbackValue,isUpdate){let options=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},clb=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(namespace))this.logger.warn(`did not save key "${key}" as the namespace "${namespace}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=key&&""!==key){if(this.backend&&this.backend.create){const opts={...options,isUpdate:isUpdate},fc=this.backend.create.bind(this.backend);if(fc.length<6)try{let r;r=5===fc.length?fc(languages,namespace,key,fallbackValue,opts):fc(languages,namespace,key,fallbackValue),r&&"function"==typeof r.then?r.then((data=>clb(null,data))).catch(clb):clb(null,r)}catch(err){clb(err)}else fc(languages,namespace,key,fallbackValue,clb,opts)}languages&&languages[0]&&this.store.addResource(languages[0],namespace,key,fallbackValue)}}}function get$c(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function handle(args){let ret={};if("object"==typeof args[1]&&(ret=args[1]),"string"==typeof args[1]&&(ret.defaultValue=args[1]),"string"==typeof args[2]&&(ret.tDescription=args[2]),"object"==typeof args[2]||"object"==typeof args[3]){const options=args[3]||args[2];Object.keys(options).forEach((key=>{ret[key]=options[key]}))}return ret},interpolation:{escapeValue:!0,format:(value,format,lng,options)=>value,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function transformOptions(options){return"string"==typeof options.ns&&(options.ns=[options.ns]),"string"==typeof options.fallbackLng&&(options.fallbackLng=[options.fallbackLng]),"string"==typeof options.fallbackNS&&(options.fallbackNS=[options.fallbackNS]),options.supportedLngs&&options.supportedLngs.indexOf("cimode")<0&&(options.supportedLngs=options.supportedLngs.concat(["cimode"])),options}function noop$a(){}class I18n extends EventEmitter{constructor(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},callback=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(options),this.services={},this.logger=baseLogger,this.modules={external:[]},function bindMemberFunctions(inst){Object.getOwnPropertyNames(Object.getPrototypeOf(inst)).forEach((mem=>{"function"==typeof inst[mem]&&(inst[mem]=inst[mem].bind(inst))}))}(this),callback&&!this.isInitialized&&!options.isClone){if(!this.options.initImmediate)return this.init(options,callback),this;setTimeout((()=>{this.init(options,callback)}),0)}}init(){var _this=this;let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},callback=arguments.length>1?arguments[1]:void 0;"function"==typeof options&&(callback=options,options={}),!options.defaultNS&&!1!==options.defaultNS&&options.ns&&("string"==typeof options.ns?options.defaultNS=options.ns:options.ns.indexOf("translation")<0&&(options.defaultNS=options.ns[0]));const defOpts=get$c();function createClassOnDemand(ClassOrObject){return ClassOrObject?"function"==typeof ClassOrObject?new ClassOrObject:ClassOrObject:null}if(this.options={...defOpts,...this.options,...transformOptions(options)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...defOpts.interpolation,...this.options.interpolation}),void 0!==options.keySeparator&&(this.options.userDefinedKeySeparator=options.keySeparator),void 0!==options.nsSeparator&&(this.options.userDefinedNsSeparator=options.nsSeparator),!this.options.isClone){let formatter;this.modules.logger?baseLogger.init(createClassOnDemand(this.modules.logger),this.options):baseLogger.init(null,this.options),this.modules.formatter?formatter=this.modules.formatter:"undefined"!=typeof Intl&&(formatter=Formatter);const lu=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const s=this.services;s.logger=baseLogger,s.resourceStore=this.store,s.languageUtils=lu,s.pluralResolver=new PluralResolver(lu,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!formatter||this.options.interpolation.format&&this.options.interpolation.format!==defOpts.interpolation.format||(s.formatter=createClassOnDemand(formatter),s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new Interpolator(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new Connector(createClassOnDemand(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(event){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];_this.emit(event,...args)})),this.modules.languageDetector&&(s.languageDetector=createClassOnDemand(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=createClassOnDemand(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",(function(event){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];_this.emit(event,...args)})),this.modules.external.forEach((m=>{m.init&&m.init(this)}))}if(this.format=this.options.interpolation.format,callback||(callback=noop$a),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const codes=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);codes.length>0&&"dev"!==codes[0]&&(this.options.lng=codes[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((fcName=>{this[fcName]=function(){return _this.store[fcName](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((fcName=>{this[fcName]=function(){return _this.store[fcName](...arguments),_this}}));const deferred=defer(),load=()=>{const finish=(err,t)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),deferred.resolve(t),callback(err,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return finish(null,this.t.bind(this));this.changeLanguage(this.options.lng,finish)};return this.options.resources||!this.options.initImmediate?load():setTimeout(load,0),deferred}loadResources(language){let usedCallback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:noop$a;const usedLng="string"==typeof language?language:this.language;if("function"==typeof language&&(usedCallback=language),!this.options.resources||this.options.partialBundledLanguages){if(usedLng&&"cimode"===usedLng.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return usedCallback();const toLoad=[],append=lng=>{if(!lng)return;if("cimode"===lng)return;this.services.languageUtils.toResolveHierarchy(lng).forEach((l=>{"cimode"!==l&&toLoad.indexOf(l)<0&&toLoad.push(l)}))};if(usedLng)append(usedLng);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((l=>append(l)))}this.options.preload&&this.options.preload.forEach((l=>append(l))),this.services.backendConnector.load(toLoad,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),usedCallback(e)}))}else usedCallback(null)}reloadResources(lngs,ns,callback){const deferred=defer();return lngs||(lngs=this.languages),ns||(ns=this.options.ns),callback||(callback=noop$a),this.services.backendConnector.reload(lngs,ns,(err=>{deferred.resolve(),callback(err)})),deferred}use(module){if(!module)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!module.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===module.type&&(this.modules.backend=module),("logger"===module.type||module.log&&module.warn&&module.error)&&(this.modules.logger=module),"languageDetector"===module.type&&(this.modules.languageDetector=module),"i18nFormat"===module.type&&(this.modules.i18nFormat=module),"postProcessor"===module.type&&postProcessor.addPostProcessor(module),"formatter"===module.type&&(this.modules.formatter=module),"3rdParty"===module.type&&this.modules.external.push(module),this}setResolvedLanguage(l){if(l&&this.languages&&!(["cimode","dev"].indexOf(l)>-1))for(let li=0;li<this.languages.length;li++){const lngInLngs=this.languages[li];if(!(["cimode","dev"].indexOf(lngInLngs)>-1)&&this.store.hasLanguageSomeTranslations(lngInLngs)){this.resolvedLanguage=lngInLngs;break}}}changeLanguage(lng,callback){var _this2=this;this.isLanguageChangingTo=lng;const deferred=defer();this.emit("languageChanging",lng);const setLngProps=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},done=(err,l)=>{l?(setLngProps(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,deferred.resolve((function(){return _this2.t(...arguments)})),callback&&callback(err,(function(){return _this2.t(...arguments)}))},setLng=lngs=>{lng||lngs||!this.services.languageDetector||(lngs=[]);const l="string"==typeof lngs?lngs:this.services.languageUtils.getBestMatchFromCodes(lngs);l&&(this.language||setLngProps(l),this.translator.language||this.translator.changeLanguage(l),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(l)),this.loadResources(l,(err=>{done(err,l)}))};return lng||!this.services.languageDetector||this.services.languageDetector.async?!lng&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(setLng):this.services.languageDetector.detect(setLng):setLng(lng):setLng(this.services.languageDetector.detect()),deferred}getFixedT(lng,ns,keyPrefix){var _this3=this;const fixedT=function(key,opts){let options;if("object"!=typeof opts){for(var _len3=arguments.length,rest=new Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++)rest[_key3-2]=arguments[_key3];options=_this3.options.overloadTranslationOptionHandler([key,opts].concat(rest))}else options={...opts};options.lng=options.lng||fixedT.lng,options.lngs=options.lngs||fixedT.lngs,options.ns=options.ns||fixedT.ns,options.keyPrefix=options.keyPrefix||keyPrefix||fixedT.keyPrefix;const keySeparator=_this3.options.keySeparator||".";let resultKey;return resultKey=options.keyPrefix&&Array.isArray(key)?key.map((k=>`${options.keyPrefix}${keySeparator}${k}`)):options.keyPrefix?`${options.keyPrefix}${keySeparator}${key}`:key,_this3.t(resultKey,options)};return"string"==typeof lng?fixedT.lng=lng:fixedT.lngs=lng,fixedT.ns=ns,fixedT.keyPrefix=keyPrefix,fixedT}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(ns){this.options.defaultNS=ns}hasLoadedNamespace(ns){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const lng=options.lng||this.resolvedLanguage||this.languages[0],fallbackLng=!!this.options&&this.options.fallbackLng,lastLng=this.languages[this.languages.length-1];if("cimode"===lng.toLowerCase())return!0;const loadNotPending=(l,n)=>{const loadState=this.services.backendConnector.state[`${l}|${n}`];return-1===loadState||2===loadState};if(options.precheck){const preResult=options.precheck(this,loadNotPending);if(void 0!==preResult)return preResult}return!!this.hasResourceBundle(lng,ns)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!loadNotPending(lng,ns)||fallbackLng&&!loadNotPending(lastLng,ns)))}loadNamespaces(ns,callback){const deferred=defer();return this.options.ns?("string"==typeof ns&&(ns=[ns]),ns.forEach((n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)})),this.loadResources((err=>{deferred.resolve(),callback&&callback(err)})),deferred):(callback&&callback(),Promise.resolve())}loadLanguages(lngs,callback){const deferred=defer();"string"==typeof lngs&&(lngs=[lngs]);const preloaded=this.options.preload||[],newLngs=lngs.filter((lng=>preloaded.indexOf(lng)<0));return newLngs.length?(this.options.preload=preloaded.concat(newLngs),this.loadResources((err=>{deferred.resolve(),callback&&callback(err)})),deferred):(callback&&callback(),Promise.resolve())}dir(lng){if(lng||(lng=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!lng)return"rtl";const languageUtils=this.services&&this.services.languageUtils||new LanguageUtil(get$c());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(languageUtils.getLanguagePartFromCode(lng))>-1||lng.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new I18n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},callback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:noop$a;const forkResourceStore=options.forkResourceStore;forkResourceStore&&delete options.forkResourceStore;const mergedOptions={...this.options,...options,isClone:!0},clone=new I18n(mergedOptions);void 0===options.debug&&void 0===options.prefix||(clone.logger=clone.logger.clone(options));return["store","services","language"].forEach((m=>{clone[m]=this[m]})),clone.services={...this.services},clone.services.utils={hasLoadedNamespace:clone.hasLoadedNamespace.bind(clone)},forkResourceStore&&(clone.store=new ResourceStore(this.store.data,mergedOptions),clone.services.resourceStore=clone.store),clone.translator=new Translator(clone.services,mergedOptions),clone.translator.on("*",(function(event){for(var _len4=arguments.length,args=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)args[_key4-1]=arguments[_key4];clone.emit(event,...args)})),clone.init(mergedOptions,callback),clone.translator.options=mergedOptions,clone.translator.backendConnector.services.utils={hasLoadedNamespace:clone.hasLoadedNamespace.bind(clone)},clone}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance,instance.createInstance,instance.dir,instance.init,instance.loadResources,instance.reloadResources,instance.use,instance.changeLanguage,instance.getFixedT,instance.t,instance.exists,instance.setDefaultNamespace,instance.hasLoadedNamespace,instance.loadNamespaces,instance.loadLanguages;var getGlobalInstances=function(){return window&&!window.VCCGlobalInstances&&(window.VCCGlobalInstances={i18Next:void 0,numeral:void 0}),window&&window.VCCGlobalInstances&&!window.VCCGlobalInstances.i18Next&&(window.VCCGlobalInstances.i18Next=instance,window.VCCGlobalInstances.numeral=numeral$1),window.VCCGlobalInstances.i18Next.isInitialized||window.VCCGlobalInstances.i18Next.init({ns:["vcc"],lng:"en",debug:!1,fallbackLng:{default:["en"]},resources:{en:en}}),window.VCCGlobalInstances};function numeralRegister(type,name,payload,overwrite){void 0===type&&(type="format"),void 0===name&&(name="formatName");var windowNumeral=getGlobalInstances().numeral;try{windowNumeral.register(type,name,payload,overwrite)}catch(e){console.warn("note: error encountered when registering to numeral instance",type,name)}}function registerNumeralLocale(name,payload,overwrite){void 0===name&&(name="formatName"),numeralRegister("locale",name,payload,overwrite)}function setNumeralLocale(locale){void 0===locale&&(locale="en");var windowNumeral=getGlobalInstances().numeral;windowNumeral.locales&&windowNumeral.locales[locale]?windowNumeral.locale(locale):console.error("numeral instance does not have the locale ",locale," registered.")}function formatStats(val,format){return void 0===val&&(val="0"),void 0===format&&(format="(0.00a)"),(0,getGlobalInstances().numeral)(val).format(format)}function roundTo(value,decimals){var scale=Math.pow(10,decimals||0);return Math.round((value+Number.EPSILON)*scale)/scale}var registerI18NextLanguage=function(language,overwrite){var i18Instance=getGlobalInstances().i18Next,languageString=language.vcc.attr.language;i18Instance.hasResourceBundle(languageString,"vcc")&&!overwrite||i18Instance.addResourceBundle(languageString,"vcc",__assign({},language.vcc))},changeI18NextLanguage=function(languageString){var i18Instance=getGlobalInstances().i18Next;i18Instance.hasResourceBundle(languageString,"vcc")&&i18Instance.changeLanguage(languageString,(function(err,t){if(err)return console.log("changing of language to "+languageString+" failed",err);t("key")}))};function translate(translationKey,language){var i18Instance=getGlobalInstances().i18Next,translated="";return translated=i18Instance.isInitialized?i18Instance.t(translationKey,{lng:language}):function explore(o,s){return s.split(".").reduce((function(r,ss){return r&&r[ss]?r[ss]:null}),o)}(en,"vcc."+translationKey),translated}var xhtml$5="http://www.w3.org/1999/xhtml",namespaces$5={svg:"http://www.w3.org/2000/svg",xhtml:xhtml$5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace$5(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces$5.hasOwnProperty(prefix)?{space:namespaces$5[prefix],local:name}:name}function creatorInherit$5(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml$5&&document.documentElement.namespaceURI===xhtml$5?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed$5(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator$5(name){var fullname=namespace$5(name);return(fullname.local?creatorFixed$5:creatorInherit$5)(fullname)}function none$7(){}function selector$5(selector){return null==selector?none$7:function(){return this.querySelector(selector)}}function empty$6(){return[]}function selectorAll$5(selector){return null==selector?empty$6:function(){return this.querySelectorAll(selector)}}function matcher$6(selector){return function(){return this.matches(selector)}}function sparse$5(update){return new Array(update.length)}function EnterNode$5(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}EnterNode$5.prototype={constructor:EnterNode$5,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};var keyPrefix$6="$";function bindIndex$5(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode$5(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey$5(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue={},groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=keyPrefix$6+key.call(node,node.__data__,i,group),keyValue in nodeByKeyValue?exit[i]=node:nodeByKeyValue[keyValue]=node);for(i=0;i<dataLength;++i)(node=nodeByKeyValue[keyValue=keyPrefix$6+key.call(parent,data[i],i,data)])?(update[i]=node,node.__data__=data[i],nodeByKeyValue[keyValue]=null):enter[i]=new EnterNode$5(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue[keyValues[i]]===node&&(exit[i]=node)}function ascending$9(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function attrRemove$9(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$9(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$9(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS$9(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction$9(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS$9(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function defaultView$5(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove$9(name){return function(){this.style.removeProperty(name)}}function styleConstant$9(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction$9(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function styleValue$5(node,name){return node.style.getPropertyValue(name)||defaultView$5(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove$5(name){return function(){delete this[name]}}function propertyConstant$5(name,value){return function(){this[name]=value}}function propertyFunction$5(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray$5(string){return string.trim().split(/^|\s+/)}function classList$5(node){return node.classList||new ClassList$5(node)}function ClassList$5(node){this._node=node,this._names=classArray$5(node.getAttribute("class")||"")}function classedAdd$5(node,names){for(var list=classList$5(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove$5(node,names){for(var list=classList$5(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue$5(names){return function(){classedAdd$5(this,names)}}function classedFalse$5(names){return function(){classedRemove$5(this,names)}}function classedFunction$5(names,value){return function(){(value.apply(this,arguments)?classedAdd$5:classedRemove$5)(this,names)}}function textRemove$5(){this.textContent=""}function textConstant$9(value){return function(){this.textContent=value}}function textFunction$9(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove$5(){this.innerHTML=""}function htmlConstant$5(value){return function(){this.innerHTML=value}}function htmlFunction$5(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise$6(){this.nextSibling&&this.parentNode.appendChild(this)}function lower$5(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull$5(){return null}function remove$5(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow$5(){var clone=this.cloneNode(!1),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep$5(){var clone=this.cloneNode(!0),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}ClassList$5.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};var filterEvents$5={},event$4=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(filterEvents$5={mouseenter:"mouseover",mouseleave:"mouseout"}));function filterContextListener$5(listener,index,group){return listener=contextListener$5(listener,index,group),function(event){var related=event.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||listener.call(this,event)}}function contextListener$5(listener,index,group){return function(event1){var event0=event$4;event$4=event1;try{listener.call(this,this.__data__,index,group)}finally{event$4=event0}}}function onRemove$5(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?on.length=i:delete this.__on}}}function onAdd$5(typename,value,capture){var wrap=filterEvents$5.hasOwnProperty(typename.type)?filterContextListener$5:contextListener$5;return function(d,i,group){var o,on=this.__on,listener=wrap(value,i,group);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=listener,o.capture=capture),void(o.value=value);this.addEventListener(typename.type,listener,capture),o={type:typename.type,name:typename.name,value:value,listener:listener,capture:capture},on?on.push(o):this.__on=[o]}}function customEvent$3(event1,listener,that,args){var event0=event$4;event1.sourceEvent=event$4,event$4=event1;try{return listener.apply(that,args)}finally{event$4=event0}}function dispatchEvent$5(node,type,params){var window=defaultView$5(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant$5(type,params){return function(){return dispatchEvent$5(this,type,params)}}function dispatchFunction$5(type,params){return function(){return dispatchEvent$5(this,type,params.apply(this,arguments))}}var root$7=[null];function Selection$9(groups,parents){this._groups=groups,this._parents=parents}function selection$2(){return new Selection$9([[document.documentElement]],root$7)}function select$4(selector){return"string"==typeof selector?new Selection$9([[document.querySelector(selector)]],[document.documentElement]):new Selection$9([[selector]],root$7)}Selection$9.prototype=selection$2.prototype={constructor:Selection$9,select:function selection_select$5(select){"function"!=typeof select&&(select=selector$5(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection$9(subgroups,this._parents)},selectAll:function selection_selectAll$5(select){"function"!=typeof select&&(select=selectorAll$5(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection$9(subgroups,parents)},filter:function selection_filter$5(match){"function"!=typeof match&&(match=matcher$6(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection$9(subgroups,this._parents)},data:function selection_data$5(value,key){if(!value)return data=new Array(this.size()),j=-1,this.each((function(d){data[++j]=d})),data;var bind=key?bindKey$5:bindIndex$5,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=function constant$p(x){return function(){return x}}(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=value.call(parent,parent&&parent.__data__,j,parents),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength);bind(parent,group,enterGroup,updateGroup,exit[j]=new Array(groupLength),data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection$9(update,parents))._enter=enter,update._exit=exit,update},enter:function selection_enter$5(){return new Selection$9(this._enter||this._groups.map(sparse$5),this._parents)},exit:function selection_exit$5(){return new Selection$9(this._exit||this._groups.map(sparse$5),this._parents)},join:function selection_join$4(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return enter="function"==typeof onenter?onenter(enter):enter.append(onenter+""),null!=onupdate&&(update=onupdate(update)),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function selection_merge$5(selection){for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection$9(merges,this._parents)},order:function selection_order$5(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function selection_sort$5(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending$9);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection$9(sortgroups,this._parents).order()},call:function selection_call$5(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function selection_nodes$5(){var nodes=new Array(this.size()),i=-1;return this.each((function(){nodes[++i]=this})),nodes},node:function selection_node$5(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function selection_size$5(){var size=0;return this.each((function(){++size})),size},empty:function selection_empty$5(){return!this.node()},each:function selection_each$5(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function selection_attr$5(name,value){var fullname=namespace$5(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS$9:attrRemove$9:"function"==typeof value?fullname.local?attrFunctionNS$9:attrFunction$9:fullname.local?attrConstantNS$9:attrConstant$9)(fullname,value))},style:function selection_style$5(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove$9:"function"==typeof value?styleFunction$9:styleConstant$9)(name,value,null==priority?"":priority)):styleValue$5(this.node(),name)},property:function selection_property$5(name,value){return arguments.length>1?this.each((null==value?propertyRemove$5:"function"==typeof value?propertyFunction$5:propertyConstant$5)(name,value)):this.node()[name]},classed:function selection_classed$5(name,value){var names=classArray$5(name+"");if(arguments.length<2){for(var list=classList$5(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction$5:value?classedTrue$5:classedFalse$5)(names,value))},text:function selection_text$5(value){return arguments.length?this.each(null==value?textRemove$5:("function"==typeof value?textFunction$9:textConstant$9)(value)):this.node().textContent},html:function selection_html$5(value){return arguments.length?this.each(null==value?htmlRemove$5:("function"==typeof value?htmlFunction$5:htmlConstant$5)(value)):this.node().innerHTML},raise:function selection_raise$5(){return this.each(raise$6)},lower:function selection_lower$5(){return this.each(lower$5)},append:function selection_append$5(name){var create="function"==typeof name?name:creator$5(name);return this.select((function(){return this.appendChild(create.apply(this,arguments))}))},insert:function selection_insert$5(name,before){var create="function"==typeof name?name:creator$5(name),select=null==before?constantNull$5:"function"==typeof before?before:selector$5(before);return this.select((function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function selection_remove$5(){return this.each(remove$5)},clone:function selection_clone$5(deep){return this.select(deep?selection_cloneDeep$5:selection_cloneShallow$5)},datum:function selection_datum$5(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function selection_on$5(typename,value,capture){var i,t,typenames=function parseTypenames$b(typenames){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name:name}}))}(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd$5:onRemove$5,null==capture&&(capture=!1),i=0;i<n;++i)this.each(on(typenames[i],value,capture));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function selection_dispatch$5(type,params){return this.each(("function"==typeof params?dispatchFunction$5:dispatchConstant$5)(type,params))}};var nextId$5=0;function Local$5(){this._="@"+(++nextId$5).toString(36)}function sourceEvent$3(){for(var source,current=event$4;source=current.sourceEvent;)current=source;return current}function point$g(node,event){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,point.y=event.clientY,[(point=point.matrixTransform(node.getScreenCTM().inverse())).x,point.y]}var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}function mouse$3(node){var event=sourceEvent$3();return event.changedTouches&&(event=event.changedTouches[0]),point$g(node,event)}function selectAll$1(selector){return"string"==typeof selector?new Selection$9([document.querySelectorAll(selector)],[document.documentElement]):new Selection$9([null==selector?[]:selector],root$7)}function touch$3(node,touches,identifier){arguments.length<3&&(identifier=touches,touches=sourceEvent$3().changedTouches);for(var touch,i=0,n=touches?touches.length:0;i<n;++i)if((touch=touches[i]).identifier===identifier)return point$g(node,touch);return null}function getBrowser(){var browserName="Unknown";return-1!==window.navigator.userAgent.indexOf("Edge")?browserName="Edge":-1!==window.navigator.userAgent.indexOf("Chrome")||-1!==window.navigator.userAgent.indexOf("Edg/")||-1!==window.navigator.userAgent.indexOf("UCBrowser")?browserName="Chrome":-1!==window.navigator.userAgent.indexOf("Safari")?browserName="Safari":-1!==window.navigator.userAgent.indexOf("Firefox")?browserName="Firefox":-1!==window.navigator.userAgent.indexOf("MSIE")||-1!==window.navigator.userAgent.indexOf("Trident")?browserName="IE":-1===window.navigator.userAgent.indexOf("Opera")&&-1===navigator.userAgent.indexOf("OPR")||(browserName="Opera"),browserName}Local$5.prototype={constructor:Local$5,get:function(node){for(var id=this._;!(id in node);)if(!(node=node.parentNode))return;return node[id]},set:function(node,value){return node[this._]=value},remove:function(node){return this._ in node&&delete node[this._]},toString:function(){return this._}};var t0$4=new Date,t1$4=new Date;function newInterval$3(floori,offseti,count,field){function interval(date){return floori(date=0===arguments.length?new Date:new Date(+date)),date}return interval.floor=function(date){return floori(date=new Date(+date)),date},interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval$3((function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)}),(function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););}))},count&&(interval.count=function(start,end){return t0$4.setTime(+start),t1$4.setTime(+end),floori(t0$4),floori(t1$4),Math.floor(count(t0$4,t1$4))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var millisecond$3=newInterval$3((function(){}),(function(date,step){date.setTime(+date+step)}),(function(start,end){return end-start}));millisecond$3.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval$3((function(date){date.setTime(Math.floor(date/k)*k)}),(function(date,step){date.setTime(+date+step*k)}),(function(start,end){return(end-start)/k})):millisecond$3:null},millisecond$3.range;var second$3=newInterval$3((function(date){date.setTime(date-date.getMilliseconds())}),(function(date,step){date.setTime(+date+1e3*step)}),(function(start,end){return(end-start)/1e3}),(function(date){return date.getUTCSeconds()}));second$3.range;var minute$3=newInterval$3((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds())}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getMinutes()}));minute$3.range;var hour$3=newInterval$3((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds()-6e4*date.getMinutes())}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getHours()}));hour$3.range;var day$3=newInterval$3((function(date){date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/864e5}),(function(date){return date.getDate()-1}));function weekday$3(i){return newInterval$3((function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+7*step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/6048e5}))}day$3.range;var sunday$3=weekday$3(0),monday$3=weekday$3(1),tuesday$3=weekday$3(2),wednesday$3=weekday$3(3),thursday$3=weekday$3(4),friday$3=weekday$3(5),saturday$3=weekday$3(6);sunday$3.range,monday$3.range,tuesday$3.range,wednesday$3.range,thursday$3.range,friday$3.range,saturday$3.range;var month$3=newInterval$3((function(date){date.setDate(1),date.setHours(0,0,0,0)}),(function(date,step){date.setMonth(date.getMonth()+step)}),(function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),(function(date){return date.getMonth()}));month$3.range;var year$3=newInterval$3((function(date){date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step)}),(function(start,end){return end.getFullYear()-start.getFullYear()}),(function(date){return date.getFullYear()}));year$3.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval$3((function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step*k)})):null},year$3.range;var utcMinute$3=newInterval$3((function(date){date.setUTCSeconds(0,0)}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getUTCMinutes()}));utcMinute$3.range;var utcHour$3=newInterval$3((function(date){date.setUTCMinutes(0,0,0)}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getUTCHours()}));utcHour$3.range;var utcDay$3=newInterval$3((function(date){date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+step)}),(function(start,end){return(end-start)/864e5}),(function(date){return date.getUTCDate()-1}));function utcWeekday$3(i){return newInterval$3((function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+7*step)}),(function(start,end){return(end-start)/6048e5}))}utcDay$3.range;var utcSunday$3=utcWeekday$3(0),utcMonday$3=utcWeekday$3(1),utcTuesday$3=utcWeekday$3(2),utcWednesday$3=utcWeekday$3(3),utcThursday$3=utcWeekday$3(4),utcFriday$3=utcWeekday$3(5),utcSaturday$3=utcWeekday$3(6);utcSunday$3.range,utcMonday$3.range,utcTuesday$3.range,utcWednesday$3.range,utcThursday$3.range,utcFriday$3.range,utcSaturday$3.range;var utcMonth$3=newInterval$3((function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCMonth(date.getUTCMonth()+step)}),(function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())}),(function(date){return date.getUTCMonth()}));utcMonth$3.range;var utcYear$3=newInterval$3((function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)}),(function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function(date){return date.getUTCFullYear()}));function localDate$2(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate$2(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newDate$1(y,m,d){return{y:y,m:m,d:d,H:0,M:0,S:0,L:0}}utcYear$3.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval$3((function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)})):null},utcYear$3.range;var locale$5,timeFormat$2,utcFormat$2,utcParse$2,pads$2={"-":"",_:" ",0:"0"},numberRe$2=/^\s*\d+/,percentRe$2=/^%/,requoteRe$2=/[\\^$*+?|[\]().{}]/g;function pad$3(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote$2(s){return s.replace(requoteRe$2,"\\$&")}function formatRe$2(names){return new RegExp("^(?:"+names.map(requote$2).join("|")+")","i")}function formatLookup$2(names){for(var map={},i=-1,n=names.length;++i<n;)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumberSunday$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone$2(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseQuarter$1(d,string,i){var n=numberRe$2.exec(string.slice(i,i+1));return n?(d.q=3*n[0]-3,i+n[0].length):-1}function parseMonthNumber$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds$2(d,string,i){var n=numberRe$2.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent$2(d,string,i){var n=percentRe$2.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp$2(d,string,i){var n=numberRe$2.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds$2(d,string,i){var n=numberRe$2.exec(string.slice(i));return n?(d.s=+n[0],i+n[0].length):-1}function formatDayOfMonth$2(d,p){return pad$3(d.getDate(),p,2)}function formatHour24$2(d,p){return pad$3(d.getHours(),p,2)}function formatHour12$2(d,p){return pad$3(d.getHours()%12||12,p,2)}function formatDayOfYear$2(d,p){return pad$3(1+day$3.count(year$3(d),d),p,3)}function formatMilliseconds$2(d,p){return pad$3(d.getMilliseconds(),p,3)}function formatMicroseconds$2(d,p){return formatMilliseconds$2(d,p)+"000"}function formatMonthNumber$2(d,p){return pad$3(d.getMonth()+1,p,2)}function formatMinutes$2(d,p){return pad$3(d.getMinutes(),p,2)}function formatSeconds$2(d,p){return pad$3(d.getSeconds(),p,2)}function formatWeekdayNumberMonday$2(d){var day=d.getDay();return 0===day?7:day}function formatWeekNumberSunday$2(d,p){return pad$3(sunday$3.count(year$3(d)-1,d),p,2)}function dISO$1(d){var day=d.getDay();return day>=4||0===day?thursday$3(d):thursday$3.ceil(d)}function formatWeekNumberISO$2(d,p){return d=dISO$1(d),pad$3(thursday$3.count(year$3(d),d)+(4===year$3(d).getDay()),p,2)}function formatWeekdayNumberSunday$2(d){return d.getDay()}function formatWeekNumberMonday$2(d,p){return pad$3(monday$3.count(year$3(d)-1,d),p,2)}function formatYear$3(d,p){return pad$3(d.getFullYear()%100,p,2)}function formatYearISO$1(d,p){return pad$3((d=dISO$1(d)).getFullYear()%100,p,2)}function formatFullYear$2(d,p){return pad$3(d.getFullYear()%1e4,p,4)}function formatFullYearISO$1(d,p){var day=d.getDay();return pad$3((d=day>=4||0===day?thursday$3(d):thursday$3.ceil(d)).getFullYear()%1e4,p,4)}function formatZone$2(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad$3(z/60|0,"0",2)+pad$3(z%60,"0",2)}function formatUTCDayOfMonth$2(d,p){return pad$3(d.getUTCDate(),p,2)}function formatUTCHour24$2(d,p){return pad$3(d.getUTCHours(),p,2)}function formatUTCHour12$2(d,p){return pad$3(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear$2(d,p){return pad$3(1+utcDay$3.count(utcYear$3(d),d),p,3)}function formatUTCMilliseconds$2(d,p){return pad$3(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds$2(d,p){return formatUTCMilliseconds$2(d,p)+"000"}function formatUTCMonthNumber$2(d,p){return pad$3(d.getUTCMonth()+1,p,2)}function formatUTCMinutes$2(d,p){return pad$3(d.getUTCMinutes(),p,2)}function formatUTCSeconds$2(d,p){return pad$3(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday$2(d){var dow=d.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday$2(d,p){return pad$3(utcSunday$3.count(utcYear$3(d)-1,d),p,2)}function UTCdISO$1(d){var day=d.getUTCDay();return day>=4||0===day?utcThursday$3(d):utcThursday$3.ceil(d)}function formatUTCWeekNumberISO$2(d,p){return d=UTCdISO$1(d),pad$3(utcThursday$3.count(utcYear$3(d),d)+(4===utcYear$3(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday$2(d){return d.getUTCDay()}function formatUTCWeekNumberMonday$2(d,p){return pad$3(utcMonday$3.count(utcYear$3(d)-1,d),p,2)}function formatUTCYear$2(d,p){return pad$3(d.getUTCFullYear()%100,p,2)}function formatUTCYearISO$1(d,p){return pad$3((d=UTCdISO$1(d)).getUTCFullYear()%100,p,2)}function formatUTCFullYear$2(d,p){return pad$3(d.getUTCFullYear()%1e4,p,4)}function formatUTCFullYearISO$1(d,p){var day=d.getUTCDay();return pad$3((d=day>=4||0===day?utcThursday$3(d):utcThursday$3.ceil(d)).getUTCFullYear()%1e4,p,4)}function formatUTCZone$2(){return"+0000"}function formatLiteralPercent$2(){return"%"}function formatUnixTimestamp$2(d){return+d}function formatUnixTimestampSeconds$2(d){return Math.floor(+d/1e3)}!function defaultLocale$5(definition){return locale$5=function formatLocale$5(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe$2(locale_periods),periodLookup=formatLookup$2(locale_periods),weekdayRe=formatRe$2(locale_weekdays),weekdayLookup=formatLookup$2(locale_weekdays),shortWeekdayRe=formatRe$2(locale_shortWeekdays),shortWeekdayLookup=formatLookup$2(locale_shortWeekdays),monthRe=formatRe$2(locale_months),monthLookup=formatLookup$2(locale_months),shortMonthRe=formatRe$2(locale_shortMonths),shortMonthLookup=formatLookup$2(locale_shortMonths),formats={a:function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]},A:function formatWeekday(d){return locale_weekdays[d.getDay()]},b:function formatShortMonth(d){return locale_shortMonths[d.getMonth()]},B:function formatMonth(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth$2,e:formatDayOfMonth$2,f:formatMicroseconds$2,g:formatYearISO$1,G:formatFullYearISO$1,H:formatHour24$2,I:formatHour12$2,j:formatDayOfYear$2,L:formatMilliseconds$2,m:formatMonthNumber$2,M:formatMinutes$2,p:function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]},q:function formatQuarter(d){return 1+~~(d.getMonth()/3)},Q:formatUnixTimestamp$2,s:formatUnixTimestampSeconds$2,S:formatSeconds$2,u:formatWeekdayNumberMonday$2,U:formatWeekNumberSunday$2,V:formatWeekNumberISO$2,w:formatWeekdayNumberSunday$2,W:formatWeekNumberMonday$2,x:null,X:null,y:formatYear$3,Y:formatFullYear$2,Z:formatZone$2,"%":formatLiteralPercent$2},utcFormats={a:function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]},A:function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]},b:function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]},B:function formatUTCMonth(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth$2,e:formatUTCDayOfMonth$2,f:formatUTCMicroseconds$2,g:formatUTCYearISO$1,G:formatUTCFullYearISO$1,H:formatUTCHour24$2,I:formatUTCHour12$2,j:formatUTCDayOfYear$2,L:formatUTCMilliseconds$2,m:formatUTCMonthNumber$2,M:formatUTCMinutes$2,p:function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]},q:function formatUTCQuarter(d){return 1+~~(d.getUTCMonth()/3)},Q:formatUnixTimestamp$2,s:formatUnixTimestampSeconds$2,S:formatUTCSeconds$2,u:formatUTCWeekdayNumberMonday$2,U:formatUTCWeekNumberSunday$2,V:formatUTCWeekNumberISO$2,w:formatUTCWeekdayNumberSunday$2,W:formatUTCWeekNumberMonday$2,x:null,X:null,y:formatUTCYear$2,Y:formatUTCFullYear$2,Z:formatUTCZone$2,"%":formatLiteralPercent$2},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth$2,e:parseDayOfMonth$2,f:parseMicroseconds$2,g:parseYear$2,G:parseFullYear$2,H:parseHour24$2,I:parseHour24$2,j:parseDayOfYear$2,L:parseMilliseconds$2,m:parseMonthNumber$2,M:parseMinutes$2,p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},q:parseQuarter$1,Q:parseUnixTimestamp$2,s:parseUnixTimestampSeconds$2,S:parseSeconds$2,u:parseWeekdayNumberMonday$2,U:parseWeekNumberSunday$2,V:parseWeekNumberISO$2,w:parseWeekdayNumberSunday$2,W:parseWeekNumberMonday$2,x:function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear$2,Y:parseFullYear$2,Z:parseZone$2,"%":parseLiteralPercent$2};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads$2[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,Z){return function(string){var week,day,d=newDate$1(1900,void 0,1);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(Z&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day=(week=utcDate$2(newDate$1(d.y,0,1))).getUTCDay(),week=day>4||0===day?utcMonday$3.ceil(week):utcMonday$3(week),week=utcDay$3.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day=(week=localDate$2(newDate$1(d.y,0,1))).getDay(),week=day>4||0===day?monday$3.ceil(week):monday$3(week),week=day$3.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?utcDate$2(newDate$1(d.y,0,1)).getUTCDay():localDate$2(newDate$1(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate$2(d)):localDate$2(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in pads$2?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",!1);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier+="",!0);return p.toString=function(){return specifier},p}}}(definition),timeFormat$2=locale$5.format,locale$5.parse,utcFormat$2=locale$5.utcFormat,utcParse$2=locale$5.utcParse,locale$5}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||utcFormat$2("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||utcParse$2("%Y-%m-%dT%H:%M:%S.%LZ");var formatDate$1=function(_a){var date=_a.date,format=_a.format,userTimezoneOffset=_a.offsetTimezone?6e4*date.getTimezoneOffset():0,offsetDate=new Date(date.getTime()+userTimezoneOffset);return format=format.includes("%")?format:"%Y %b",timeFormat$2(format)(offsetDate)};var accessorFormatMap={number:"0[.][0][0]a",date:"%B %d %Y",percent:"0[.][0][0]%",string:""},accessorFormats={valueAccessor:"number",nodeSizeAccessor:"number",latitudeAccessor:"number",longitudeAccessor:"number",xAccessor:[{charts:["scatter-plot"],type:"number"}],yAccessor:[{charts:["scatter-plot"],type:"number"}],sizeAccessor:[{charts:["scatter-plot"],type:"number"}]},orderColumns={"alluvial-diagram":["nodeIDAccessor","labelAccessor","valueAccessor"],"alluvial-diagram-secondary-table":["groupAccessor","sourceAccessor","targetAccessor","valueAccessor"],"bar-chart":["groupAccessor","ordinalAccessor","valueAccessor"],"clustered-bar-chart":["groupAccessor","ordinalAccessor","valueAccessor"],"stacked-bar-chart":["groupAccessor","ordinalAccessor","valueAccessor"],"line-chart":["seriesAccessor","ordinalAccessor","valueAccessor"],"pie-chart":["ordinalAccessor","valueAccessor"],"scatter-plot":["groupAccessor","xAccessor","yAccessor","sizeAccessor"],"heat-map":["xAccessor","yAccessor","valueAccessor"],"circle-packing":["clusterAccessor","nodeAccessor","nodeSizeAccessor","idAccessor"],"parallel-plot":["seriesAccessor","ordinalAccessor","valueAccessor"],"dumbbell-plot":["seriesAccessor","ordinalAccessor","valueAccessor"],"world-map":["groupAccessor","markerNameAccessor","joinNameAccessor","valueAccessor"]};function orderScopedData(_this,dataSample,chartType){var tableColumns=[];return orderColumns[chartType].forEach((function(col){_this[col]&&void 0!==dataSample[_this[col]]&&tableColumns.push(_this[col])})),Object.keys(dataSample).forEach((function(key){tableColumns.indexOf(key)<0&&tableColumns.push(key)})),tableColumns}function getScopedData(data,keyMap){var scopedData=[];return data.forEach((function(dataRecord){var scopedDataRecord={};Object.keys(keyMap).forEach((function(field){dataRecord[field]instanceof Date?scopedDataRecord[field]=formatDate$1({date:dataRecord[field],format:keyMap[field]?keyMap[field]:accessorFormatMap.date,offsetTimezone:!0}):"normalized"===keyMap[field]?(scopedDataRecord[field]=keyMap[field]&&dataRecord[field]?formatStats(dataRecord[field],accessorFormatMap.number):dataRecord[field],scopedDataRecord[field+"%"]=keyMap[field]&&dataRecord[field]&&dataRecord.getSum?formatStats(dataRecord[field]/dataRecord.getSum(),accessorFormatMap.percent):dataRecord[field]):scopedDataRecord[field]=keyMap[field]&&dataRecord[field]?formatStats(dataRecord[field],keyMap[field]):dataRecord[field]})),scopedData.push(scopedDataRecord)})),scopedData}function capitalized(str){return str.charAt(0).toUpperCase()+str.slice(1)}var createLabel=function(_a){var chartTag=_a.chartTag,language=_a.language,d=_a.d,i=_a.i,n=_a.n;_a.capitalizedGeomType,_a.capitalizedGroupName;var includeKeyNames=_a.includeKeyNames,dataKeys=_a.dataKeys,dataKeyNames=_a.dataKeyNames,groupKeys=_a.groupKeys,nested=_a.nested,recursive=_a.recursive,normalized=_a.normalized,valueAccessor=_a.valueAccessor,geomType=_a.geomType;_a.groupName;var datum=recursive?d.data.data:d,label="";if(nested?(datum[nested].length&&datum[nested].forEach((function(child){label+=iterateKeys(chartTag,language,child,dataKeys,dataKeyNames,includeKeyNames,!0,valueAccessor)})),groupKeys&&groupKeys.length&&groupKeys.forEach((function(groupKey){label+=groupKey?datum[groupKey]+". ":""}))):label+=iterateKeys(chartTag,language,datum,dataKeys,dataKeyNames,includeKeyNames,!1,valueAccessor),normalized&&(label+=(includeKeyNames?dataKeyNames?(dataKeyNames[valueAccessor+"%"]||(dataKeyNames[""+valueAccessor]||valueAccessor)+" (%)")+" ":valueAccessor+" (%) ":"")+formatStats(datum.hasOwnProperty("data")?datum.data[valueAccessor+"%"]:datum[valueAccessor+"%"],"0[.][0][0]%")+". "),label+=capitalized(translate("general.geomTypes."+geomType,language))+" "+(i+1)+".",recursive){var depth_1=d.depth,size=select$4(n[i].parentNode).selectAll("g:not(.vcl-accessibility-focus-highlight)").filter((function(data){return void 0===depth_1||data&&data.depth===depth_1+1})).size();label+=" "+translate(chartTag+".altTextGenerator.numberOfChildElements",language)+" "+(size||"0")+(!size&&d.children&&d.children.length?""+translate("general.expressions.butSomeMayBeHiddenUntilYouInteractWithThisNode",language):".")}return label},createGroupLabel=function(_a){var chartTag=_a.chartTag,language=_a.language,d=_a.d,targetNode=_a.targetNode,index=_a.index,groupAccessor=_a.groupAccessor,groupKeys=_a.groupKeys,dataKeyNames=_a.dataKeyNames,siblings=_a.siblings,isOffsetGroup=_a.isOffsetGroup,includeKeyNames=_a.includeKeyNames;_a.capitalizedGroupName,_a.capitalizedGeomType,_a.geomType;var groupName=_a.groupName,tabbableSiblings=0;if(Array.prototype.forEach.call(siblings,(function(sibling){null!==select$4(sibling).attr("tabindex")&&tabbableSiblings++})),tabbableSiblings>1){var targetRootForChildren=isOffsetGroup?targetNode.parentNode.nextSibling.childNodes[index]:targetNode,firstChild=targetNode.querySelectorAll("*:not(.vcl-accessibility-focus-highlight)")[0],groupData_1=firstChild&&firstChild.__data__?includeKeyNames&&groupAccessor&&dataKeyNames&&firstChild.__data__[groupAccessor]&&dataKeyNames[groupAccessor]?dataKeyNames[groupAccessor]+" "+firstChild.__data__[groupAccessor]+". ":includeKeyNames&&groupAccessor&&firstChild.__data__[groupAccessor]?groupAccessor+" "+firstChild.__data__[groupAccessor]+". ":firstChild.__data__[groupAccessor]+". ":"";groupKeys&&groupKeys.length&&groupKeys.forEach((function(groupKey){groupData_1+=groupKey?d[groupKey]+". ":""}));var childrenCount=targetRootForChildren?targetRootForChildren.querySelectorAll("*:not(.vcl-accessibility-focus-highlight)").length:0;return groupData_1+""+translate("general.groupNames."+groupName,language)+" "+(index+1)+"."}childrenCount=siblings[index].querySelectorAll("*:not(.vcl-accessibility-focus-highlight)").length;return translate(chartTag+".altTextGenerator.numberOfInteractiveElements",language)+" "+childrenCount+"."},iterateKeys=function(chartTag,language,item,objectOfDataKeys,dataKeyNames,includeKeyNames,nested,valueAccessor){var dataKeys=Object.keys(objectOfDataKeys),label="",datum=item.data?getScopedData([item.data],objectOfDataKeys)[0]:getScopedData([item],objectOfDataKeys)[0],keyPosition=1;return dataKeys.forEach((function(key){var mappedKeyName=dataKeyNames&&dataKeyNames[key]?dataKeyNames[key]:key;if(void 0!==datum[key]){var keyEnding="string"==typeof datum[key]&&"."===datum[key][datum[key].length-1]?" ":". ";if(!nested||includeKeyNames?(label+=includeKeyNames?mappedKeyName+" ":"",label+=datum[key]+keyEnding):label+=datum[key]+(keyPosition%2?" ":keyEnding),void 0!==datum[key+"%"]&&key!==valueAccessor){var percentKeyEnding="."===datum[key+"%"][datum[key+"%"].length-1]?" ":". ";label+=includeKeyNames?mappedKeyName+" "+translate("general.expressions.asAPercentage",language)+" ":"",label+=datum[key+"%"]+percentKeyEnding}keyPosition++}})),label},keyCodes_parent=13,keyCodes_child=13,keyCodes_select=32,keyCodes_nextSibling=39,keyCodes_previousSibling=37,keyCodes_nextCousin=40,keyCodes_previousCousin=38,keyCodes_nextCousinAlternate=190,keyCodes_previousCousinAlternate=188,keyCodes_escape=27,browser$2=getBrowser(),isIE11$2="IE"===browser$2,isIEEdge$1="Edge"===browser$2,fired=!1;isIE11$2&&function(window){var MouseEventPolyfill=function(eventType,params){params=params||{bubbles:!1,cancelable:!1};var mouseEvent=document.createEvent("MouseEvent");return mouseEvent.initMouseEvent(eventType,params.bubbles,params.cancelable,window,0,params.screenX||0,params.screenY||0,params.clientX||0,params.clientY||0,params.ctrlKey||!1,params.altKey||!1,params.shiftKey||!1,params.metaKey||!1,params.button||0,params.relatedTarget||null),mouseEvent};MouseEventPolyfill.prototype=Event.prototype,window.MouseEvent=MouseEventPolyfill}(window);var validKeyCode=function(keyCode){return keyCode===keyCodes_select||keyCode===keyCodes_child||keyCode===keyCodes_parent||keyCode===keyCodes_nextSibling||keyCode===keyCodes_previousSibling||keyCode===keyCodes_nextCousin||keyCode===keyCodes_previousCousin||keyCode===keyCodes_nextCousinAlternate||keyCode===keyCodes_previousCousinAlternate},prepareControllerNodes=function(_a){var chartTag=_a.chartTag,language=_a.language,rootNode=_a.rootNode,nodeID=_a.nodeID,geomType=_a.geomType,includeKeyNames=_a.includeKeyNames,dataKeys=_a.dataKeys,dataKeyNames=_a.dataKeyNames,groupKeys=_a.groupKeys,nested=_a.nested,groupName=_a.groupName,groupAccessor=_a.groupAccessor,valueAccessor=_a.valueAccessor,recursive=_a.recursive,sameGroupCousinKey=_a.sameGroupCousinKey,deleteControllers=_a.deleteControllers,normalized=_a.normalized;(isIE11$2||isIEEdge$1)&&(fired=!1);var drawCount=0;if(!deleteControllers){var tabBackNode=findTabBackwardNode(nodeID,recursive);tabBackNode&&tabBackNode.id&&(drawCount++,createControllerNode({chartTag:chartTag,language:language,rootNode:rootNode,nodeID:tabBackNode.id,isTarget:!1,geomType:geomType,includeKeyNames:includeKeyNames,dataKeys:dataKeys,dataKeyNames:dataKeyNames,groupKeys:groupKeys,nested:nested,recursive:recursive,groupName:groupName,groupAccessor:groupAccessor,valueAccessor:valueAccessor,direction:"backward",sourceID:nodeID,sameGroupCousinKey:sameGroupCousinKey,normalized:normalized}));var controllerNodeAlreadyExists=document.getElementById("node-"+nodeID);if(controllerNodeAlreadyExists){drawCount++,rootNode.appendChild(controllerNodeAlreadyExists.parentNode);var bounds=document.getElementById(nodeID).getBoundingClientRect(),parentBounds=rootNode.getBoundingClientRect();select$4(controllerNodeAlreadyExists).on("focus",(function(){})).style("position","absolute").style("padding",0).style("margin",0).style("overflow","visible").style("left",bounds.left-parentBounds.left+"px").style("top",bounds.top-parentBounds.top+"px").style("width",bounds.width+"px").style("height",bounds.height+"px")}else drawCount++,createControllerNode({chartTag:chartTag,language:language,rootNode:rootNode,nodeID:nodeID,isTarget:!0,geomType:geomType,includeKeyNames:includeKeyNames,dataKeys:dataKeys,dataKeyNames:dataKeyNames,groupKeys:groupKeys,nested:nested,recursive:recursive,groupName:groupName,groupAccessor:groupAccessor,valueAccessor:valueAccessor,sameGroupCousinKey:sameGroupCousinKey,normalized:normalized});var tabForwardNode=findTabForwardNode(nodeID,recursive);tabForwardNode&&tabForwardNode.id&&(drawCount++,createControllerNode({chartTag:chartTag,language:language,rootNode:rootNode,nodeID:tabForwardNode.id,isTarget:!1,geomType:geomType,includeKeyNames:includeKeyNames,dataKeys:dataKeys,dataKeyNames:dataKeyNames,groupKeys:groupKeys,nested:nested,recursive:recursive,groupName:groupName,groupAccessor:groupAccessor,valueAccessor:valueAccessor,direction:"forward",sourceID:nodeID,sameGroupCousinKey:sameGroupCousinKey,normalized:normalized}))}simulateFocus(nodeID,recursive,deleteControllers);for(var childrenToRemove=rootNode.children.length-drawCount;childrenToRemove;)rootNode.removeChild(rootNode.children[0]),childrenToRemove--},simulateFocus=function(nodeID,recursive,directID){var id=directID?nodeID:"node-"+nodeID,targetControllerElement=document.getElementById(id),targetChartElement=document.getElementById(nodeID);simulateBlur(directID?targetControllerElement:targetControllerElement.parentNode.parentNode),focusTarget(targetControllerElement),directID?removeActiveChild(targetChartElement,!0):(select$4(targetControllerElement).classed("VCL-controller-focused",!0),focusAsMouseover(targetChartElement,recursive,!1),setActiveChild(targetChartElement)),drawKeyboardFocusClone(targetChartElement,recursive)},simulateBlur=function(controllerRoot){var controllerToBlur=select$4(controllerRoot).select(".VCL-controller-focused");if(controllerToBlur.size()){controllerToBlur.classed("VCL-controller-focused",!1);var targetNode=document.getElementById(controllerToBlur.node().id.substring(5));controllerBlurToMouseout(targetNode)}},createControllerNode=function(_a){var chartTag=_a.chartTag,language=_a.language,rootNode=_a.rootNode,nodeID=_a.nodeID,isTarget=_a.isTarget,geomType=_a.geomType,includeKeyNames=_a.includeKeyNames,dataKeys=_a.dataKeys,dataKeyNames=_a.dataKeyNames,groupKeys=_a.groupKeys,nested=_a.nested,recursive=_a.recursive,groupName=_a.groupName,groupAccessor=_a.groupAccessor,valueAccessor=_a.valueAccessor,direction=_a.direction,sourceID=_a.sourceID,sameGroupCousinKey=_a.sameGroupCousinKey,normalized=_a.normalized,sourceNode=document.getElementById(nodeID),isOffsetGroup=select$4(sourceNode).attr("data-offset-group"),isGroup="g"===sourceNode.nodeName||isOffsetGroup,nodeType="div",nodeRole="img",nodeCanBePressed=null;isGroup||(nodeRole=select$4(sourceNode).attr("data-role"),nodeType=(nodeCanBePressed=select$4(sourceNode).attr("data-aria-pressed"))?"button":"div");var bounds=sourceNode.getBoundingClientRect(),parentBounds=rootNode.getBoundingClientRect();select$4(rootNode).append(isIEEdge$1?"div":"figure").attr("role","figure").append(nodeType).style("position","absolute").style("padding",0).style("margin",0).style("overflow","visible").attr("role",nodeRole).attr("id","node-"+nodeID).attr("tabindex",-1).on("keydown",(function(){var e=event$4;e.stopPropagation();var result=getInteractionResult(nodeID,e,isGroup,recursive,sameGroupCousinKey);if(result)if(result.clicked){var resultTarget=document.getElementById(result.id);hideKeyboardHighlight(resultTarget.parentNode);var evt=new MouseEvent("click",{bubbles:!1,cancelable:!0});resultTarget.dispatchEvent(evt),simulateFocus(nodeID,recursive)}else if(result.focused){var idOfTarget=result.id||rootNode.id;prepareControllerNodes({chartTag:chartTag,language:language,rootNode:rootNode,nodeID:idOfTarget,geomType:geomType,includeKeyNames:includeKeyNames,dataKeys:dataKeys,dataKeyNames:dataKeyNames,groupKeys:groupKeys,nested:nested,groupName:groupName,groupAccessor:groupAccessor,valueAccessor:valueAccessor,recursive:recursive,sameGroupCousinKey:sameGroupCousinKey,deleteControllers:idOfTarget===rootNode.id,normalized:normalized})}})).on("keyup",(function(){fired=!1})).on("focus",isTarget?null:function(){var id=nodeID;if(direction){var node="backward"===direction?findTabBackwardNode(sourceID,recursive):findTabForwardNode(sourceID,recursive);id=node?node.id:""}id&&prepareControllerNodes({chartTag:chartTag,language:language,rootNode:rootNode,nodeID:id,geomType:geomType,includeKeyNames:includeKeyNames,dataKeys:dataKeys,dataKeyNames:dataKeyNames,groupKeys:groupKeys,nested:nested,groupName:groupName,groupAccessor:groupAccessor,valueAccessor:valueAccessor,recursive:recursive,sameGroupCousinKey:sameGroupCousinKey,normalized:normalized})}).on("blur",(function(){var node=document.getElementById(nodeID);controllerBlurToMouseout(node)})).attr("aria-label",(function(_,i,n){var label="",capitalizedGeomType=geomType[0].toUpperCase()+geomType.substring(1),capitalizedGroupName=groupName?groupName[0].toUpperCase()+groupName.substring(1):"",targetNode=recursive?sourceNode.parentNode:sourceNode,siblings=recursive?findValidRecursiveSiblings(sourceNode):targetNode.parentNode.childNodes,index=Array.prototype.indexOf.call(siblings,sourceNode),element=select$4(targetNode),d=targetNode.__data__||element.data()[0];return label=isGroup?createGroupLabel({chartTag:chartTag,language:language,d:d,targetNode:targetNode,index:index,groupAccessor:groupAccessor,groupKeys:groupKeys,dataKeyNames:dataKeyNames,siblings:siblings,isOffsetGroup:isOffsetGroup,includeKeyNames:includeKeyNames,capitalizedGroupName:capitalizedGroupName,capitalizedGeomType:capitalizedGeomType,geomType:geomType,groupName:groupName}):createLabel({chartTag:chartTag,language:language,d:d,i:index,n:siblings,capitalizedGeomType:capitalizedGeomType,capitalizedGroupName:capitalizedGroupName,includeKeyNames:includeKeyNames,dataKeys:dataKeys,dataKeyNames:dataKeyNames,groupKeys:groupKeys,nested:nested,recursive:recursive,normalized:normalized,valueAccessor:valueAccessor,geomType:geomType,groupName:groupName}),select$4(n[i]).text(label),nodeCanBePressed&&select$4(n[i]).attr("aria-pressed",nodeCanBePressed),label})).style("left",bounds.left-parentBounds.left+"px").style("top",bounds.top-parentBounds.top+"px").style("width",bounds.width+"px").style("height",bounds.height+"px").style("pointer-events","none")},findOffsetParent=function(node,direction){var parent="next"===direction?"target":"source",i=direction?node.__data__[parent].index:Array.prototype.indexOf.call(node.parentNode.parentNode.childNodes,node.parentNode);return node.parentNode.parentNode.previousSibling.childNodes[i]},generateRandomStringID=function(lead){return lead+"-"+Math.round(1e6*Math.random())+"-"+Math.round(1e6*Math.random())+"-"+Math.round(1e6*Math.random())},findTabForwardNode=function(elementID,recursive,siblingsOnly){var target=""===elementID?null:document.getElementById(elementID);if(!target||"svg"===target.tagName)return null;if(!recursive&&target.nextElementSibling)return null!==select$4(target.nextElementSibling).attr("tabindex")?target.nextElementSibling:findTabForwardNode(target.nextElementSibling.id,recursive);if(recursive&&findValidCousin(target,"next",!0))return findValidCousin(target,"next",!0);if(!siblingsOnly){var parent=findValidParent(target,recursive),parentSibling=recursive?parent?findValidCousin(parent,"next",!0):null:parent.nextElementSibling;if(parentSibling){if(null!==select$4(parentSibling).attr("tabindex"))return parentSibling;if(parentSibling.id)return findTabForwardNode(parentSibling.id,recursive,!0)}}return null},findTabBackwardNode=function(elementID,recursive){var target=""===elementID?null:document.getElementById(elementID);return target&&"svg"!==target.tagName?!recursive&&target.previousElementSibling?null!==select$4(target.previousElementSibling).attr("tabindex")?target.previousElementSibling:findTabBackwardNode(target.previousElementSibling.id,recursive):recursive&&findValidCousin(target,"previous",!0)?findValidCousin(target,"previous",!0):"g"===target.tagName?null:findValidParent(target,recursive):null},setActiveChild=function(node){var rootSVG=findSVGRoot(node);rootSVG!==document.body&&rootSVG.parentNode.firstElementChild.setAttribute("aria-activedescendant","node-"+node.id)},removeActiveChild=function(node,isTheRoot){var rootSVG=isTheRoot?node:findSVGRoot(node);rootSVG!==document.body&&(isTheRoot?node:rootSVG.parentNode.firstElementChild).setAttribute("aria-activedescendant",null)},focusTarget=function(target){isIE11$2?setTimeout((function(){target.focus()}),10):target.focus()},controllerBlurToMouseout=function(target){target&&(removeActiveChild(target),blurAsMouseout(target),removeKeyboardHighlight(target))},findValidFinalSibling=function(node){if(null!==select$4(node.parentNode.lastElementChild).attr("tabindex"))return node.parentNode.lastElementChild;for(var target=null,index=node.parentNode.childNodes.length-2;!target&&index>=0;){var currentChild=node.parentNode.childNodes[index];null!==select$4(currentChild).attr("tabindex")&&(target=currentChild),index--}return target},findValidParent=function(currentTarget,recursive,requireTabIndex){return recursive?currentTarget.parentNode&&currentTarget.parentNode.parentNode&&currentTarget.parentNode.parentNode.firstElementChild&&findValidChildTarget(currentTarget.parentNode.parentNode.firstElementChild,!0)||findSVGRoot(currentTarget):requireTabIndex&&null!==select$4(currentTarget.parentNode).attr("tabindex")?currentTarget.parentNode:findSVGRoot(currentTarget)},findSVGRoot=function(node){return node.ownerSVGElement?node.ownerSVGElement:"svg"===node.parentNode.nodeName||node.parentNode===document.body?node.parentNode:findSVGRoot(node.parentNode)},enterChartArea=function(_event){var currentTarget=_event.target,keyCode=_event.keyCode||_event.which;if(!_event.shiftKey&&(keyCode===keyCodes_child||keyCode===keyCodes_select))return _event.preventDefault(),select$4(currentTarget.parentNode).select("svg").select("[tabindex]").node()},findValidRecursiveSiblings=function(node){var parents=node.parentNode.parentNode.childNodes,siblings=[];return Array.prototype.forEach.call(parents,(function(parent){"g"!==parent.tagName||parent.classList.contains(".vcl-accessibility-focus-highlight")||siblings.push(parent.firstElementChild)})),siblings},findValidCousin=function(currentTarget,direction,returnEarly){var parentSiblingChildren,target,currentParentIdx=getElementIndex(currentTarget.parentNode),currentIdx=select$4(currentTarget).attr("data-index")?+select$4(currentTarget).attr("data-index"):getElementIndex(currentTarget),_parent=currentTarget.parentNode.parentNode,parentsSiblings=[];Array.prototype.forEach.call(_parent.childNodes,(function(child){"g"!==child.tagName||child.classList.contains("vcl-accessibility-focus-highlight")||parentsSiblings.push(child)}));var childrenCount=parentsSiblings.length;if(!childrenCount)return null;if("previous"===direction){if(returnEarly&&0===currentParentIdx)return null;parentSiblingChildren=0!==currentParentIdx?parentsSiblings[currentParentIdx-1].childNodes:parentsSiblings[childrenCount-1].childNodes}else if("next"===direction){if(returnEarly&&currentParentIdx===childrenCount-1)return null;parentSiblingChildren=currentParentIdx!==childrenCount-1?parentsSiblings[currentParentIdx+1].childNodes:parentsSiblings[0].childNodes}for(target=select$4(currentTarget).attr("data-index")?Array.prototype.filter.call(parentSiblingChildren,(function(el){return currentIdx===+select$4(el).attr("data-index")}))[0]:parentSiblingChildren[currentIdx];!target&&currentIdx>-1;)target=select$4(currentTarget).attr("data-index")?Array.prototype.filter.call(parentSiblingChildren,(function(el){return currentIdx===+select$4(el).attr("data-index")}))[0]:parentSiblingChildren[currentIdx],0===currentIdx&&!target&&select$4(currentTarget).attr("data-index")&&(target=parentSiblingChildren[currentIdx]),currentIdx--;return currentTarget!==target?target:null},getElementIndex=function(el){for(var i=0,originalNodeName=el.nodeName;el.previousSibling;)originalNodeName!==el.previousSibling.nodeName||select$4(el.previousSibling).classed("vcl-accessibility-focus-hover")||i++,el=el.previousSibling;return i},getInteractionResult=function(nodeID,_event,isGroup,recursive,sameGroupCousinKey){var target,node,i,result={clicked:!1,focused:!1,id:""},currentTarget=document.getElementById(nodeID),keyCode=_event.keyCode||_event.which,eventType=validKeyCode(keyCode),direction=keyCode===keyCodes_nextSibling||keyCode===keyCodes_nextCousin||keyCode===keyCodes_nextCousinAlternate?"next":keyCode===keyCodes_previousSibling||keyCode===keyCodes_previousCousin||keyCode===keyCodes_previousCousinAlternate?"previous":_event.shiftKey&&keyCode===keyCodes_parent?"up":keyCode===keyCodes_child?"down":"";if((direction||keyCode===keyCodes_select)&&_event.preventDefault(),eventType&&!fired)if(fired=!0,keyCode===keyCodes_select)result.clicked=!0,result.id=nodeID;else if(keyCode!==keyCodes_nextSibling&&keyCode!==keyCodes_previousSibling||recursive){if(!recursive&&(keyCode===keyCodes_nextCousin||keyCode===keyCodes_nextCousinAlternate||keyCode===keyCodes_previousCousin||keyCode===keyCodes_previousCousinAlternate)||(keyCode===keyCodes_nextSibling||keyCode===keyCodes_previousSibling)&&recursive){if(sameGroupCousinKey&&!isGroup)target=function(currentTarget,direction,sameGroupCousinKey){var target,targetGroup=select$4(currentTarget).data()[0][sameGroupCousinKey],cousins=[],targetIndex=-1,found=0;return select$4(currentTarget.parentNode).selectAll("*").each((function(d,i,n){d&&d[sameGroupCousinKey]===targetGroup&&(cousins.push(n[i]),found++),targetIndex<0&&currentTarget===n[i]&&(targetIndex=found-1)})),found&&targetIndex>-1&&("previous"===direction?target=cousins[targetIndex-1]||cousins[cousins.length-1]:"next"===direction&&(target=cousins[targetIndex+1]||cousins[0])),target}(currentTarget,direction,sameGroupCousinKey);else if(!isGroup){target=select$4(currentTarget).attr("data-offset-element")?findOffsetParent(currentTarget,direction):findValidCousin(currentTarget,direction)}}else if("down"===direction||recursive&&(keyCode===keyCodes_nextCousin||keyCode===keyCodes_nextCousinAlternate)){if(isGroup||recursive)target=select$4(currentTarget).attr("data-offset-group")?(node=currentTarget,i=Array.prototype.indexOf.call(node.parentNode.childNodes,node),node.parentNode.nextSibling.childNodes[i]?node.parentNode.nextSibling.childNodes[i].childNodes[0]:void 0):function(currentTarget,recursive){var target=recursive?findValidSiblingTarget(currentTarget):currentTarget;return target&&target.firstElementChild?findValidChildTarget(target.firstElementChild,!0):null}(currentTarget,recursive)}else if("up"===direction||recursive&&(keyCode===keyCodes_previousCousin||keyCode===keyCodes_previousCousinAlternate)){if(isGroup)target=findSVGRoot(currentTarget);else target=select$4(currentTarget).attr("data-offset-element")?findOffsetParent(currentTarget):findValidParent(currentTarget,recursive,!0)}}else target=function(currentTarget,direction){var sibling=direction+"Sibling",loopSibling=("next"===direction?"first":"last")+"ElementChild",target=currentTarget[sibling]&&null!==select$4(currentTarget[sibling]).attr("tabindex")&&currentTarget[sibling]?currentTarget[sibling]:"next"===direction?currentTarget.parentNode.firstElementChild:findValidFinalSibling(currentTarget);return target||target.parentNode[loopSibling]}(currentTarget,direction);return target&&select$4(target).attr("tabindex")&&(result.focused=!0,result.id=target.id),result},removeKeyboardHighlight=function(parent,rootOnly){var className=rootOnly?"vcl-accessibility-focus-root":"vcl-accessibility-focus";select$4(parent.ownerSVGElement).selectAll("."+className+"-source").classed(className+"-source",!1),select$4(parent.ownerSVGElement).selectAll("."+className+"-indicator").remove()},hideKeyboardHighlight=function(parent){select$4(parent.ownerSVGElement).selectAll(".vcl-accessibility-focus-indicator").classed("hidden",!0).style("opacity",0).attr("opacity",0)},drawKeyboardFocusClone=function(inputElement,recursive){var source="DIV"!==inputElement.tagName?inputElement:select$4(inputElement.parentNode).select("svg").node(),shouldDeleteSource=!1,className="svg"!==source.tagName?"vcl-accessibility-focus":"vcl-accessibility-focus-root",isNotAGeometry="g"===source.tagName||"svg"===source.tagName;if(isNotAGeometry){var bbox=source.getBBox(),width="svg"===source.tagName?Math.max(+source.getAttribute("width")-10,0):+bbox.width+10,height="svg"===source.tagName?Math.max(+source.getAttribute("height")-10,0):+bbox.height+10,x="svg"===source.tagName?5:+bbox.x-5,y="svg"===source.tagName?5:+bbox.y-5;source=select$4("svg"!==source.tagName?source.parentNode:source).append("rect").attr("x",x).attr("y",y).attr("width",width).attr("height",height).attr("transform",select$4(source).attr("transform")||null).attr("fill","none").style("fill","none").node(),shouldDeleteSource=!0}else{select$4(source).style("outline").includes("auto")&&select$4(source).style("outline-width","0px").style("outline-offset","0px").style("outline-color","none")}var parent=source.parentNode;removeKeyboardHighlight("svg"!==parent.tagName?parent:parent.firstElementChild),select$4(source).classed(className+"-source",!0);var hasWidth=select$4(source).attr("width"),highlightCopy=source.cloneNode(!1),haloCopy=source.cloneNode(!1),copy=source.cloneNode(!1);if(!recursive&&!shouldDeleteSource||recursive&&isNotAGeometry){var targetAppendLocation=!isNotAGeometry&&(!(null===select$4(source.parentNode).attr("tabindex"))||select$4(source.parentNode).classed("offset-target"))?parent.parentNode:parent,parentCopy=parent.cloneNode(!1);parentCopy.appendChild(haloCopy),parentCopy.appendChild(highlightCopy),parentCopy.appendChild(copy),targetAppendLocation.appendChild(parentCopy),applyDefaults$1(select$4(parentCopy),className),select$4(parentCopy).attr("filter",null)}else if(recursive){var baseRadius=+select$4(copy).attr("r");parent.parentNode.appendChild(haloCopy),select$4(haloCopy).attr("r",baseRadius+6).attr("stroke-width",0),parent.parentNode.appendChild(highlightCopy),select$4(highlightCopy).attr("r",baseRadius+3).attr("stroke-width",0)}else{if(!!select$4(inputElement).attr("data-offset-group")){var offsetTarget=parent.nextSibling.nextSibling;parent.parentNode.insertBefore(haloCopy,offsetTarget),parent.parentNode.insertBefore(highlightCopy,offsetTarget),parent.parentNode.insertBefore(copy,offsetTarget)}else source.nextSibling?(parent.insertBefore(copy,source.nextSibling),parent.insertBefore(highlightCopy,source.nextSibling),parent.insertBefore(haloCopy,source.nextSibling)):(parent.appendChild(haloCopy),parent.appendChild(highlightCopy),parent.appendChild(copy))}var copyStyle=select$4(copy).style("opacity",isNotAGeometry?0:1).attr("opacity",isNotAGeometry?0:1).style("stroke-opacity",isNotAGeometry?0:1).attr("stroke-opacity",isNotAGeometry?0:1);(!recursive&&!isNotAGeometry&&hasWidth||isNotAGeometry)&&copyStyle.style("fill-opacity",0).attr("fill-opacity",0),applyDefaults$1(copyStyle,className);var isAlluvial=select$4(source).data()&&select$4(source).data()[0]&&select$4(source).data()[0].source&&select$4(source).data()[0].target&&(select$4(source).data()[0].y0||0===select$4(source).data()[0].y0),highlightStyle=select$4(highlightCopy);applyDefaults$1(highlightStyle,className),applyOutlineOverride$1(highlightStyle,isNotAGeometry||recursive||hasWidth?6:10,"#ffffff",isAlluvial?select$4(source).data()[0]:void 0),recursive||isNotAGeometry||!hasWidth||applySizeOverride(highlightStyle,3),highlightStyle.style("opacity",1).attr("opacity",1);var haloStyle=select$4(haloCopy);applyDefaults$1(haloStyle,className),applyOutlineOverride$1(haloStyle,isNotAGeometry||recursive||hasWidth?isNotAGeometry?10:2:14,"#000000",isAlluvial?select$4(source).data()[0]:void 0),recursive||isNotAGeometry||!hasWidth||applySizeOverride(haloStyle,7),haloStyle.style("opacity",1).attr("opacity",1),shouldDeleteSource&&select$4(source).remove()},applyDefaults$1=function(selection,className){selection.attr("d")&&selection.attr("filter")&&!selection.attr("marker-start")&&selection.attr("filter",null),selection.attr("id",null).attr("class",className+"-highlight "+className+"-indicator").attr("focusable",!1).attr("aria-label",null).attr("aria-hidden",!0).attr("role",null).style("pointer-events","none").attr("tabindex",null).attr("mix-blend-mode",null).style("mix-blend-mode",null).attr("r",(function(_,i,n){return parseFloat(select$4(n[i]).attr("r"))||1}))},applySizeOverride=function(selection,offset){selection.attr("width",(function(_,i,n){return parseFloat(select$4(n[i]).attr("width"))+2*offset})).attr("height",(function(_,i,n){return parseFloat(select$4(n[i]).attr("height"))+2*offset})).attr("x",(function(_,i,n){return parseFloat(select$4(n[i]).attr("x"))-offset})).attr("y",(function(_,i,n){return parseFloat(select$4(n[i]).attr("y"))-offset}))},applyOutlineOverride$1=function(selection,extraStrokeWidth,strokeColor,d){selection.style("stroke-dasharray","").attr("stroke-dasharray",null).style("outline-offset","0px").style("outline-color","none").style("outline-width","0px").attr("filter",null).style("stroke-linecap",d?"butt":"round").style("fill","none").style("stroke-opacity",1).style("stroke",strokeColor).style("stroke-width",(function(_,i,n){var width="none"!==select$4(n[i]).style("stroke")&&parseFloat(select$4(n[i]).style("stroke-width"))||0,scaleIndex=select$4(n[i]).attr("transform")?select$4(n[i]).attr("transform").indexOf("scale"):-1,scale=1;if(scaleIndex>-1){var scaleSubstring=select$4(n[i]).attr("transform").substring(scaleIndex+6),endSubstring=scaleSubstring.indexOf(",")<scaleSubstring.indexOf(")")&&-1!==scaleSubstring.indexOf(",")?scaleSubstring.indexOf(","):scaleSubstring.indexOf(")");scale=+scaleSubstring.substring(0,endSubstring)}var bonus=0,me=select$4(n[i]);if(me.attr("d")&&d){var originalPath=me.attr("d").substr(1),offsetStart="M "+(d.source.x1-extraStrokeWidth/2)+" "+d.y0+" L",offsetEnd="L "+(d.target.x0+extraStrokeWidth/2)+" "+d.y1;me.attr("d",offsetStart+originalPath+offsetEnd)}else if(me.attr("marker-start")&&me.attr("data-centerX1")&&me.attr("d")){var x1=me.attr("data-centerX1"),y1=me.attr("data-centerY1"),x2=me.attr("data-centerX2"),y2=me.attr("data-centerY2");me.attr("d","M "+x1+" "+y1+" L "+x2+" "+y2),bonus=+me.attr("data-barSize")+6}return me.attr("marker-start",null),me.attr("marker-end",null),(width+extraStrokeWidth+bonus)/scale+"px"}))},findValidSiblingTarget=function(element){return element.nextElementSibling?"g"===element.nextElementSibling.nodeName?element.nextElementSibling:findValidSiblingTarget(element.nextElementSibling):null},findValidChildTarget=function(element,requireTabIndex){return requireTabIndex&&(!requireTabIndex||null===select$4(element).attr("tabindex"))||select$4(element).classed("vcl-accessibility-focus-highlight")?element.nextElementSibling?findValidChildTarget(element.nextElementSibling,requireTabIndex):null:element},getOffset=function(el){var bounds=el.getBoundingClientRect(),left=bounds.left+(isIE11$2?0:document.body.scrollLeft+document.documentElement.scrollLeft);return{top:bounds.top+(isIE11$2?0:document.body.scrollTop+document.documentElement.scrollTop),left:left}},blurAsMouseout=function(node){removeKeyboardHighlight(node.parentNode);var evt=new MouseEvent("mouseout",{bubbles:!1,cancelable:!0});node.dispatchEvent(evt)},focusAsMouseover=function(node,recursive,drawClone){var leftPos=getOffset(node).left,topPos=getOffset(node).top,evt=new MouseEvent("mouseover",{bubbles:!1,cancelable:!0,clientX:leftPos,clientY:topPos});drawClone&&drawKeyboardFocusClone(node,recursive),node.dispatchEvent(evt)},browser$1=getBrowser(),isIE11$1="IE"===browser$1,isIEEdge="Edge"===browser$1,setTooltipAccess=function(el){el.setAttribute("role","tooltip"),el.setAttribute("aria-hidden","true"),el.setAttribute("tabindex",null)},setLegendAccess=function(root,id){hideNode(root),hideNode(root.parentNode,!0),select$4(root).classed("vcl-svg",!0),(isIE11$1||isIEEdge)&&handleContrast(null,id)},hideNode=function(node,excludeFocusable){select$4(node).attr("aria-hidden","true").attr("role","presentation").attr("focusable",excludeFocusable?null:"false").attr("tabindex",null)},createUrl=function(id){var path=window.location.pathname;return"/"===path[path.length-1]&&(path=path.substring(0,path.length-1)),"url(#"+(id?id+")":"")},setHighContrastListener=function(root,id){select$4(root).classed("vcl-svg",!0);var filter=select$4(root).select(".vcl-inversion-filter");if(!filter.size()){var defs=select$4(root).select("defs");defs.size()||(defs=select$4(root).append("defs")),(filter=defs.append("filter").attr("class","vcl-inversion-filter").attr("color-interpolation-filters","sRGB")).append("feColorMatrix").attr("in","SourceGraphic").attr("type","matrix").attr("values","-1 0 0 0 1 \n        0 -1 0 0 1 \n        0 0 -1 0 1\n        0 0 0 1 0"),filter.append("feColorMatrix").attr("type","hueRotate").attr("values","180")}filter.attr("id","inversion-"+id);var passMediaEventToHandler=function(a){handleContrast(a,id)};(isIE11$1||isIEEdge)&&(matchMedia("(-ms-high-contrast: active)").addListener(passMediaEventToHandler),matchMedia("(-ms-high-contrast: black-on-white)").addListener((function(){handleContrast(null,id)})),passMediaEventToHandler(matchMedia("(-ms-high-contrast: active)")))},handleContrast=function(a,id){if((a||matchMedia("(-ms-high-contrast: active)")).matches&&!matchMedia("(-ms-high-contrast: black-on-white)").matches){var url=createUrl("inversion-"+id);select$4("#"+id).selectAll(".vcl-svg").select("g").attr("filter",url)}else select$4("#"+id).selectAll(".vcl-svg").select("g").attr("filter",null)},hideTooltipHandler=function(event){event.keyCode===keyCodes_escape&&selectAll$1(".vcl-tooltip").each((function(_,i,n){var root=select$4(n[i]);1==root.style("opacity")&&drawTooltip({root:root,isToShow:!1})}))};function ascending$8(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}var ascendingBisect$2=function bisector$2(compare){return 1===compare.length&&(compare=function ascendingComparator$2(f){return function(d,x){return ascending$8(f(d),x)}}(compare)),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}(ascending$8),bisectRight$2=ascendingBisect$2.right;function range$2(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range}var e10$2=Math.sqrt(50),e5$2=Math.sqrt(10),e2$2=Math.sqrt(2);function tickIncrement$2(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10$2?10:error>=e5$2?5:error>=e2$2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10$2?10:error>=e5$2?5:error>=e2$2?2:1)}function max$3(values,valueof){var value,max,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(max=value;++i<n;)null!=(value=values[i])&&value>max&&(max=value)}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(max=value;++i<n;)null!=(value=valueof(values[i],i,values))&&value>max&&(max=value);return max}function merge$1(arrays){for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;for(merged=new Array(j);--n>=0;)for(m=(array=arrays[n]).length;--m>=0;)merged[--j]=array[m];return merged}function min$2(values,valueof){var value,min,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(min=value;++i<n;)null!=(value=values[i])&&min>value&&(min=value)}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(min=value;++i<n;)null!=(value=valueof(values[i],i,values))&&min>value&&(min=value);return min}function sum$3(values,valueof){var value,n=values.length,i=-1,sum=0;if(null==valueof)for(;++i<n;)(value=+values[i])&&(sum+=value);else for(;++i<n;)(value=+valueof(values[i],i,values))&&(sum+=value);return sum}function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}function Map$4(){}function map$7(object,f){var map=new Map$4;if(object instanceof Map$4)object.each((function(value,key){map.set(key,value)}));else if(Array.isArray(object)){var o,i=-1,n=object.length;if(null==f)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}function Set$4(){}Map$4.prototype=map$7.prototype={constructor:Map$4,has:function(key){return"$"+key in this},get:function(key){return this["$"+key]},set:function(key,value){return this["$"+key]=value,this},remove:function(key){var property="$"+key;return property in this&&delete this[property]},clear:function(){for(var property in this)"$"===property[0]&&delete this[property]},keys:function(){var keys=[];for(var property in this)"$"===property[0]&&keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)"$"===property[0]&&values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)"$"===property[0]&&entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)"$"===property[0]&&++size;return size},empty:function(){for(var property in this)if("$"===property[0])return!1;return!0},each:function(f){for(var property in this)"$"===property[0]&&f(this[property],property.slice(1),this)}};var proto$3=map$7.prototype;Set$4.prototype={constructor:Set$4,has:proto$3.has,add:function(value){return this["$"+(value+="")]=value,this},remove:proto$3.remove,clear:proto$3.clear,values:proto$3.keys,size:proto$3.size,empty:proto$3.empty,each:proto$3.each};var array$5=Array.prototype,map$6=array$5.map,slice$9=array$5.slice,implicit$1={name:"implicit"};function ordinal$1(){var index=map$7(),domain=[],range=[],unknown=implicit$1;function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit$1)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=map$7();for(var d,key,i=-1,n=_.length;++i<n;)index.has(key=(d=_[i])+"")||index.set(key,domain.push(d));return scale},scale.range=function(_){return arguments.length?(range=slice$9.call(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal$1(domain,range).unknown(unknown)},initRange.apply(scale,arguments),scale}function define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var brighter=1/.7,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?rgba(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function rgb$2(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatRgb(){const a=clampa(this.opacity);return`${1===a?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${1===a?")":`, ${a})`}`}function clampa(opacity){return isNaN(opacity)?1:Math.max(0,Math.min(1,opacity))}function clampi(value){return Math.max(0,Math.min(255,Math.round(value)||0))}function hex(value){return((value=clampi(value))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function hsl$2(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function clamph(value){return(value=(value||0)%360)<0?value+360:value}function clampt(value){return Math.max(0,Math.min(1,value||0))}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}define(Color,color,{copy(channels){return Object.assign(new this.constructor,this,channels)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:function color_formatHex8(){return this.rgb().formatHex8()},formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,rgb$2,extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,hsl$2,extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=clampa(this.opacity);return`${1===a?"hsl(":"hsla("}${clamph(this.h)}, ${100*clampt(this.s)}%, ${100*clampt(this.l)}%${1===a?")":`, ${a})`}`}}));const radians$1=Math.PI/180,degrees$4=180/Math.PI,Xn=.96422,Yn=1,Zn=.82521,t0$3=4/29,t1$3=6/29,t2=3*t1$3*t1$3,t3=t1$3*t1$3*t1$3;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl)return hcl2lab(o);o instanceof Rgb||(o=rgbConvert(o));var x,z,r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((.2225045*r+.7168786*g+.0606169*b)/Yn);return r===g&&g===b?x=z=y:(x=xyz2lab((.4360747*r+.3850649*g+.1430804*b)/Xn),z=xyz2lab((.0139322*r+.0971045*g+.7141733*b)/Zn)),new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function lab$1(l,a,b,opacity){return 1===arguments.length?labConvert(l):new Lab(l,a,b,null==opacity?1:opacity)}function Lab(l,a,b,opacity){this.l=+l,this.a=+a,this.b=+b,this.opacity=+opacity}function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/t2+t0$3}function lab2xyz(t){return t>t1$3?t*t*t:t2*(t-t0$3)}function lrgb2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(o instanceof Lab||(o=labConvert(o)),0===o.a&&0===o.b)return new Hcl(NaN,0<o.l&&o.l<100?0:NaN,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*degrees$4;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl$2(h,c,l,opacity){return 1===arguments.length?hclConvert(h):new Hcl(h,c,l,null==opacity?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h,this.c=+c,this.l=+l,this.opacity=+opacity}function hcl2lab(o){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*radians$1;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}define(Lab,lab$1,extend(Color,{brighter(k){return new Lab(this.l+18*(null==k?1:k),this.a,this.b,this.opacity)},darker(k){return new Lab(this.l-18*(null==k?1:k),this.a,this.b,this.opacity)},rgb(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;return new Rgb(lrgb2rgb(3.1338561*(x=Xn*lab2xyz(x))-1.6168667*(y=Yn*lab2xyz(y))-.4906146*(z=Zn*lab2xyz(z))),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}})),define(Hcl,hcl$2,extend(Color,{brighter(k){return new Hcl(this.h,this.c,this.l+18*(null==k?1:k),this.opacity)},darker(k){return new Hcl(this.h,this.c,this.l-18*(null==k?1:k),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelix$6(h,s,l,opacity){return 1===arguments.length?function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);o instanceof Rgb||(o=rgbConvert(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*degrees$4-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}(h):new Cubehelix(h,s,l,null==opacity?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function constant$o(x){return function(){return x}}function linear$6(a,d){return function(t){return a+t*d}}function gamma$3(y){return 1==(y=+y)?nogamma$3:function(a,b){return b-a?function exponential$4(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):constant$o(isNaN(a)?b:a)}}function nogamma$3(a,b){var d=b-a;return d?linear$6(a,d):constant$o(isNaN(a)?b:a)}define(Cubehelix,cubehelix$6,extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb(){var h=isNaN(this.h)?0:(this.h+120)*radians$1,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity)}}));var interpolateRgb$1=function rgbGamma(y){var color=gamma$3(y);function rgb(start,end){var r=color((start=rgb$2(start)).r,(end=rgb$2(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma$3(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function numberArray$1(a,b){b||(b=[]);var i,n=a?Math.min(b.length,a.length):0,c=b.slice();return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}}function genericArray$1(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=interpolate$5(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date$4(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function interpolateNumber$1(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function object$4(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=interpolate$5(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}var reA$3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB$3=new RegExp(reA$3.source,"g");function interpolateString$1(a,b){var am,bm,bs,bi=reA$3.lastIndex=reB$3.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA$3.exec(a))&&(bm=reB$3.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:interpolateNumber$1(am,bm)})),bi=reB$3.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one$3(b){return function(t){return b(t)+""}}(q[0].x):function zero$3(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function interpolate$5(a,b){var c,t=typeof b;return null==b||"boolean"===t?constant$o(b):("number"===t?interpolateNumber$1:"string"===t?(c=color(b))?(b=c,interpolateRgb$1):interpolateString$1:b instanceof color?interpolateRgb$1:b instanceof Date?date$4:function isNumberArray$1(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}(b)?numberArray$1:Array.isArray(b)?genericArray$1:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object$4:interpolateNumber$1)(a,b)}function interpolateRound$1(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}}var cssNode$2,cssRoot$2,cssView$2,svgNode$2,degrees$3=180/Math.PI,identity$g={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose$2(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees$3,skewX:Math.atan(skewX)*degrees$3,scaleX:scaleX,scaleY:scaleY}}function interpolateTransform$2(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:interpolateNumber$1(xa,xb)},{i:i-2,x:interpolateNumber$1(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:interpolateNumber$1(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:interpolateNumber$1(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:interpolateNumber$1(xa,xb)},{i:i-2,x:interpolateNumber$1(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss$2=interpolateTransform$2((function parseCss$2(value){return"none"===value?identity$g:(cssNode$2||(cssNode$2=document.createElement("DIV"),cssRoot$2=document.documentElement,cssView$2=document.defaultView),cssNode$2.style.transform=value,value=cssView$2.getComputedStyle(cssRoot$2.appendChild(cssNode$2),null).getPropertyValue("transform"),cssRoot$2.removeChild(cssNode$2),decompose$2(+(value=value.slice(7,-1).split(","))[0],+value[1],+value[2],+value[3],+value[4],+value[5]))}),"px, ","px)","deg)"),interpolateTransformSvg$2=interpolateTransform$2((function parseSvg$2(value){return null==value?identity$g:(svgNode$2||(svgNode$2=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode$2.setAttribute("transform",value),(value=svgNode$2.transform.baseVal.consolidate())?decompose$2((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):identity$g)}),", ",")",")"),rho$1=Math.SQRT2,rho2$1=2,rho4$1=4,epsilon2$3=1e-12;function cosh$1(x){return((x=Math.exp(x))+1/x)/2}function interpolateZoom(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<epsilon2$3)S=Math.log(w1/w0)/rho$1,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho$1*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4$1*d2)/(2*w0*rho2$1*d1),b1=(w1*w1-w0*w0-rho4$1*d2)/(2*w1*rho2$1*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho$1,i=function(t){var s=t*S,coshr0=cosh$1(r0),u=w0/(rho2$1*d1)*(coshr0*function tanh$1(x){return((x=Math.exp(2*x))-1)/(x+1)}(rho$1*s+r0)-function sinh$1(x){return((x=Math.exp(x))-1/x)/2}(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh$1(rho$1*s+r0)]}}return i.duration=1e3*S,i}function cubehelix$5(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=cubehelix$6(start)).h,(end=cubehelix$6(end)).h),s=nogamma$3(start.s,end.s),l=nogamma$3(start.l,end.l),opacity=nogamma$3(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}function number$9(x){return+x}cubehelix$5((function hue$3(a,b){var d=b-a;return d?linear$6(a,d>180||d<-180?d-360*Math.round(d/360):d):constant$o(isNaN(a)?b:a)})),cubehelix$5(nogamma$3);var unit$1=[0,1];function identity$f(x){return x}function normalize(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:function constant$n(x){return function(){return x}}(isNaN(b)?NaN:.5)}function clamper(domain){var t,a=domain[0],b=domain[domain.length-1];return a>b&&(t=a,a=b,b=t),function(x){return Math.max(a,Math.min(b,x))}}function bimap$1(domain,range,interpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=normalize(d1,d0),r0=interpolate(r1,r0)):(d0=normalize(d0,d1),r0=interpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap$1(domain,range,interpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=normalize(domain[i],domain[i+1]),r[i]=interpolate(range[i],range[i+1]);return function(x){var i=bisectRight$2(domain,x,1,j)-1;return r[i](d[i](x))}}function copy$1(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer$1(){var transform,untransform,unknown,piecewise,output,input,domain=unit$1,range=unit$1,interpolate=interpolate$5,clamp=identity$f;function rescale(){return piecewise=Math.min(domain.length,range.length)>2?polymap$1:bimap$1,output=input=null,scale}function scale(x){return isNaN(x=+x)?unknown:(output||(output=piecewise(domain.map(transform),range,interpolate)))(transform(clamp(x)))}return scale.invert=function(y){return clamp(untransform((input||(input=piecewise(range,domain.map(transform),interpolateNumber$1)))(y)))},scale.domain=function(_){return arguments.length?(domain=map$6.call(_,number$9),clamp===identity$f||(clamp=clamper(domain)),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=slice$9.call(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=slice$9.call(_),interpolate=interpolateRound$1,rescale()},scale.clamp=function(_){return arguments.length?(clamp=_?clamper(domain):identity$f,scale):clamp!==identity$f},scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t,u){return transform=t,untransform=u,rescale()}}function formatDecimalParts$1(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent$5(x){return(x=formatDecimalParts$1(Math.abs(x)))?x[1]:NaN}var prefixExponent$2,re$2=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier$2(specifier){if(!(match=re$2.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier$2({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier$2(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}function formatRounded$2(x,p){var d=formatDecimalParts$1(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}formatSpecifier$2.prototype=FormatSpecifier$2.prototype,FormatSpecifier$2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var formatTypes$2={"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function formatDecimal$2(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded$2(100*x,p)},r:formatRounded$2,s:function formatPrefixAuto$2(x,p){var d=formatDecimalParts$1(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent$2=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts$1(x,Math.max(0,p+i-1))[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}};function identity$e(x){return x}var locale$4,format$2,formatPrefix$2,map$5=Array.prototype.map,prefixes$3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$4(locale){var group=void 0===locale.grouping||void 0===locale.thousands?identity$e:function formatGroup$2(grouping,thousands){return function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}(map$5.call(locale.grouping,Number),locale.thousands+""),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?identity$e:function formatNumerals$2(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(map$5.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"-":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier$2(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes$2[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes$2[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0||1/value<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=function formatTrim$1(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&"+"!==sign&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes$3[8+prefixExponent$2/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier$2(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(exponent$5(value)/3))),k=Math.pow(10,-e),prefix=prefixes$3[8+e/3];return function(value){return f(k*value)+prefix}}}}function tickFormat$2(start,stop,count,specifier){var precision,step=function tickStep$2(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10$2?step1*=10:error>=e5$2?step1*=5:error>=e2$2&&(step1*=2),stop<start?-step1:step1}(start,stop,count);switch((specifier=formatSpecifier$2(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=function precisionPrefix$2(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent$5(value)/3)))-exponent$5(Math.abs(step)))}(step,value))||(specifier.precision=precision),formatPrefix$2(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=function precisionRound$2(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,exponent$5(max)-exponent$5(step))+1}(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=function precisionFixed$2(step){return Math.max(0,-exponent$5(Math.abs(step)))}(step))||(specifier.precision=precision-2*("%"===specifier.type))}return format$2(specifier)}function linearish$1(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return function ticks$2(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)==(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement$2(start,stop,count))||!isFinite(step))return[];if(step>0)for(start=Math.ceil(start/step),stop=Math.floor(stop/step),ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)*step;else for(start=Math.floor(start*step),stop=Math.ceil(stop*step),ticks=new Array(n=Math.ceil(start-stop+1));++i<n;)ticks[i]=(start-i)/step;return reverse&&ticks.reverse(),ticks}(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){var d=domain();return tickFormat$2(d[0],d[d.length-1],null==count?10:count,specifier)},scale.nice=function(count){null==count&&(count=10);var step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1];return stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step),(step=tickIncrement$2(start,stop,count))>0?step=tickIncrement$2(start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step,count):step<0&&(step=tickIncrement$2(start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step,count)),step>0?(d[i0]=Math.floor(start/step)*step,d[i1]=Math.ceil(stop/step)*step,domain(d)):step<0&&(d[i0]=Math.ceil(start*step)/step,d[i1]=Math.floor(stop*step)/step,domain(d)),scale},scale}function linear$5(){var scale=function continuous$1(transform,untransform){return transformer$1()(transform,untransform)}(identity$f,identity$f);return scale.copy=function(){return copy$1(scale,linear$5())},initRange.apply(scale,arguments),linearish$1(scale)}function transformPow(exponent){return function(x){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function transformSqrt(x){return x<0?-Math.sqrt(-x):Math.sqrt(x)}function transformSquare(x){return x<0?-x*x:x*x}function powish(transform){var scale=transform(identity$f,identity$f),exponent=1;return scale.exponent=function(_){return arguments.length?(exponent=+_,function rescale(){return 1===exponent?transform(identity$f,identity$f):.5===exponent?transform(transformSqrt,transformSquare):transform(transformPow(exponent),transformPow(1/exponent))}()):exponent},linearish$1(scale)}function pow$2(){var scale=powish(transformer$1());return scale.copy=function(){return copy$1(scale,pow$2()).exponent(scale.exponent())},initRange.apply(scale,arguments),scale}function sqrt$3(){return pow$2.apply(null,arguments).exponent(.5)}function quantize$2(){var unknown,x0=0,x1=1,n=1,domain=[.5],range=[0,1];function scale(x){return x<=x?range[bisectRight$2(domain,x,0,n)]:unknown}function rescale(){var i=-1;for(domain=new Array(n);++i<n;)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);return scale}return scale.domain=function(_){return arguments.length?(x0=+_[0],x1=+_[1],rescale()):[x0,x1]},scale.range=function(_){return arguments.length?(n=(range=slice$9.call(_)).length-1,rescale()):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]]},scale.unknown=function(_){return arguments.length?(unknown=_,scale):scale},scale.thresholds=function(){return domain.slice()},scale.copy=function(){return quantize$2().domain([x0,x1]).range(range).unknown(unknown)},initRange.apply(linearish$1(scale),arguments)}!function defaultLocale$4(definition){return locale$4=formatLocale$4(definition),format$2=locale$4.format,formatPrefix$2=locale$4.formatPrefix,locale$4}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var pi$8=Math.PI,tau$a=2*pi$8,tauEpsilon$2=tau$a-1e-6;function Path$2(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path$2(){return new Path$2}function constant$m(x){return function constant(){return x}}Path$2.prototype=path$2.prototype={constructor:Path$2,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r){var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((pi$8-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;Math.abs(t01-1)>1e-6&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}else this._+="L"+(this._x1=x1)+","+(this._y1=y1);else;},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y,ccw=!!ccw;var dx=(r=+r)*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(da<0&&(da=da%tau$a+tau$a),da>tauEpsilon$2?this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):da>1e-6&&(this._+="A"+r+","+r+",0,"+ +(da>=pi$8)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}};var pi$7=Math.PI,tau$9=2*pi$7;function x$7(p){return p[0]}function y$6(p){return p[1]}var slice$8=Array.prototype.slice;function linkSource$1(d){return d.source}function linkTarget$1(d){return d.target}function link$3(curve){var source=linkSource$1,target=linkTarget$1,x=x$7,y=y$6,context=null;function link(){var buffer,argv=slice$8.call(arguments),s=source.apply(this,argv),t=target.apply(this,argv);if(context||(context=buffer=path$2()),curve(context,+x.apply(this,(argv[0]=s,argv)),+y.apply(this,argv),+x.apply(this,(argv[0]=t,argv)),+y.apply(this,argv)),buffer)return context=null,buffer+""||null}return link.source=function(_){return arguments.length?(source=_,link):source},link.target=function(_){return arguments.length?(target=_,link):target},link.x=function(_){return arguments.length?(x="function"==typeof _?_:constant$m(+_),link):x},link.y=function(_){return arguments.length?(y="function"==typeof _?_:constant$m(+_),link):y},link.context=function(_){return arguments.length?(context=null==_?null:_,link):context},link}function curveHorizontal$1(context,x0,y0,x1,y1){context.moveTo(x0,y0),context.bezierCurveTo(x0=(x0+x1)/2,y0,x0,y1,x1,y1)}function curveVertical$1(context,x0,y0,x1,y1){context.moveTo(x0,y0),context.bezierCurveTo(x0,y0=(y0+y1)/2,x1,y0,x1,y1)}var symbolCircle={draw:function(context,size){var r=Math.sqrt(size/pi$7);context.moveTo(r,0),context.arc(0,0,r,0,tau$9)}},symbolCross={draw:function(context,size){var r=Math.sqrt(size/5)/2;context.moveTo(-3*r,-r),context.lineTo(-r,-r),context.lineTo(-r,-3*r),context.lineTo(r,-3*r),context.lineTo(r,-r),context.lineTo(3*r,-r),context.lineTo(3*r,r),context.lineTo(r,r),context.lineTo(r,3*r),context.lineTo(-r,3*r),context.lineTo(-r,r),context.lineTo(-3*r,r),context.closePath()}},tan30$1=Math.sqrt(1/3),tan30_2$1=2*tan30$1,symbolDiamond={draw:function(context,size){var y=Math.sqrt(size/tan30_2$1),x=y*tan30$1;context.moveTo(0,-y),context.lineTo(x,0),context.lineTo(0,y),context.lineTo(-x,0),context.closePath()}},kr$1=Math.sin(pi$7/10)/Math.sin(7*pi$7/10),kx$1=Math.sin(tau$9/10)*kr$1,ky$1=-Math.cos(tau$9/10)*kr$1,symbolStar={draw:function(context,size){var r=Math.sqrt(.8908130915292852*size),x=kx$1*r,y=ky$1*r;context.moveTo(0,-r),context.lineTo(x,y);for(var i=1;i<5;++i){var a=tau$9*i/5,c=Math.cos(a),s=Math.sin(a);context.lineTo(s*r,-c*r),context.lineTo(c*x-s*y,s*x+c*y)}context.closePath()}},symbolSquare={draw:function(context,size){var w=Math.sqrt(size),x=-w/2;context.rect(x,x,w,w)}},sqrt3$1=Math.sqrt(3),symbolTriangle={draw:function(context,size){var y=-Math.sqrt(size/(3*sqrt3$1));context.moveTo(0,2*y),context.lineTo(-sqrt3$1*y,-y),context.lineTo(sqrt3$1*y,-y),context.closePath()}};function noop$9(){}function point$f(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6)}function Basis$2(context){this._context=context}function Bundle$2(context,beta){this._basis=new Basis$2(context),this._beta=beta}function point$e(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal$2(context,tension){this._context=context,this._k=(1-tension)/6}function CardinalClosed$2(context,tension){this._context=context,this._k=(1-tension)/6}function CardinalOpen$2(context,tension){this._context=context,this._k=(1-tension)/6}function point$d(that,x,y){var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>1e-12){var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n,y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n}if(that._l23_a>1e-12){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m,y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m}that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom$2(context,alpha){this._context=context,this._alpha=alpha}function CatmullRomClosed$2(context,alpha){this._context=context,this._alpha=alpha}function CatmullRomOpen$2(context,alpha){this._context=context,this._alpha=alpha}function sign$3(x){return x<0?-1:1}function slope3$2(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);return(sign$3(s0)+sign$3(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}function slope2$2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function point$c(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX$2(context){this._context=context}function getTextWidth(text,fontSize,noPadding,fontFamily){var padding=noPadding?1:1.1,context=document.createElement("canvas").getContext("2d");return context.font=fontSize+"px "+(fontFamily||"OpenSans"),context.measureText(text).width*padding}Basis$2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$f(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$f(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}},Bundle$2.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0)for(var t,x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1;++i<=j;)t=i/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x=this._y=null,this._basis.lineEnd()},point:function(x,y){this._x.push(+x),this._y.push(+y)}},function custom(beta){function bundle(context){return 1===beta?new Basis$2(context):new Bundle$2(context,beta)}return bundle.beta=function(beta){return custom(+beta)},bundle}(.85),Cardinal$2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$e(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2,this._x1=x,this._y1=y;break;case 2:this._point=3;default:point$e(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}},function custom(tension){function cardinal(context){return new Cardinal$2(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0),CardinalClosed$2.prototype={areaStart:noop$9,areaEnd:noop$9,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:point$e(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}},function custom(tension){function cardinal(context){return new CardinalClosed$2(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0),CardinalOpen$2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$e(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}},function custom(tension){function cardinal(context){return new CardinalOpen$2(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0),CatmullRom$2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;default:point$d(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}},function custom(alpha){function catmullRom(context){return alpha?new CatmullRom$2(context,alpha):new Cardinal$2(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5),CatmullRomClosed$2.prototype={areaStart:noop$9,areaEnd:noop$9,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:point$d(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}},function custom(alpha){function catmullRom(context){return alpha?new CatmullRomClosed$2(context,alpha):new CardinalClosed$2(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5),CatmullRomOpen$2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$d(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}},function custom(alpha){function catmullRom(context){return alpha?new CatmullRomOpen$2(context,alpha):new CardinalOpen$2(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5),MonotoneX$2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$c(this,this._t0,slope2$2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){var t1=NaN;if(y=+y,(x=+x)!==this._x1||y!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,point$c(this,slope2$2(this,t1=slope3$2(this,x,y)),t1);break;default:point$c(this,this._t0,t1=slope3$2(this,x,y))}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y,this._t0=t1}}},Object.create(MonotoneX$2.prototype).point=function(x,y){MonotoneX$2.prototype.point.call(this,y,x)};var manuallyWrapText=function(_a){for(var text=_a.text,width=_a.width,fontSize=_a.fontSize,noPadding=_a.noPadding,wholeWords=_a.wholeWords,words=text.split(/\s+/).reverse(),lines=[],lineNumber=0,word=words.pop();word;){var line=lines[lineNumber];line||(lines.push([]),line=lines[lineNumber]),line.push(word);var lineWidth=getTextWidth(line.join(" "),fontSize);if(1===line.length&&lineWidth>width){if(wholeWords)word=words.pop();else{var splitWord=splitStringAtWidth(word,width,fontSize,noPadding);line.pop(),line.push(splitWord[0]+(splitWord[1]?"-":"")),word=splitWord[1]?splitWord[1]:words.pop()}lines[lineNumber]=line.join(" "),lineNumber++}else lineWidth>width?(line.pop(),lines[lineNumber]=line.join(" "),lineNumber++):(word=words.pop())||(lines[lineNumber]=line.join(" "))}return lines},splitStringAtWidth=function(string,width,fontSize,noPadding){if(string.length<=1)return[string,""];for(var index=string.length-1,start=string.substring(0,index),end=string.substring(index);getTextWidth(start+"-",fontSize,noPadding)>width&&index>1;)index--,start=string.substring(0,index),end=string.substring(index);return[start,end]};const cmdlen={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},regexp=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];const DegToRad=Math.PI/180,HalfPi=Math.PI/2,Tau=2*Math.PI;var segmentCache={},bezierCache={},join=[].join;function bezier(params){const key=join.call(params);if(bezierCache[key])return bezierCache[key];var cx=params[0],cy=params[1],th0=params[2],th1=params[3],rx=params[4],ry=params[5],sin_th=params[6],cos_th=params[7];const a00=cos_th*rx,a01=-sin_th*ry,a10=sin_th*rx,a11=cos_th*ry,cos_th0=Math.cos(th0),sin_th0=Math.sin(th0),cos_th1=Math.cos(th1),sin_th1=Math.sin(th1),th_half=.5*(th1-th0),sin_th_h2=Math.sin(.5*th_half),t=8/3*sin_th_h2*sin_th_h2/Math.sin(th_half),x1=cx+cos_th0-t*sin_th0,y1=cy+sin_th0+t*cos_th0,x3=cx+cos_th1,y3=cy+sin_th1,x2=x3+t*sin_th1,y2=y3-t*cos_th1;return bezierCache[key]=[a00*x1+a01*y1,a10*x1+a11*y1,a00*x2+a01*y2,a10*x2+a11*y2,a00*x3+a01*y3,a10*x3+a11*y3]}const temp$1=["l",0,0,0,0,0,0,0];function scale$1(current,sX,sY){const c=temp$1[0]=current[0];if("a"===c||"A"===c)temp$1[1]=sX*current[1],temp$1[2]=sY*current[2],temp$1[3]=current[3],temp$1[4]=current[4],temp$1[5]=current[5],temp$1[6]=sX*current[6],temp$1[7]=sY*current[7];else if("h"===c||"H"===c)temp$1[1]=sX*current[1];else if("v"===c||"V"===c)temp$1[1]=sY*current[1];else for(var i=1,n=current.length;i<n;++i)temp$1[i]=(i%2==1?sX:sY)*current[i];return temp$1}function drawArc(context,x,y,coords){const seg=function segments(x,y,rx,ry,large,sweep,rotateX,ox,oy){const key=join.call(arguments);if(segmentCache[key])return segmentCache[key];const th=rotateX*DegToRad,sin_th=Math.sin(th),cos_th=Math.cos(th),px=cos_th*(ox-x)*.5+sin_th*(oy-y)*.5,py=cos_th*(oy-y)*.5-sin_th*(ox-x)*.5;let pl=px*px/((rx=Math.abs(rx))*rx)+py*py/((ry=Math.abs(ry))*ry);pl>1&&(pl=Math.sqrt(pl),rx*=pl,ry*=pl);const a00=cos_th/rx,a01=sin_th/rx,a10=-sin_th/ry,a11=cos_th/ry,x0=a00*ox+a01*oy,y0=a10*ox+a11*oy,x1=a00*x+a01*y,y1=a10*x+a11*y;let sfactor_sq=1/((x1-x0)*(x1-x0)+(y1-y0)*(y1-y0))-.25;sfactor_sq<0&&(sfactor_sq=0);let sfactor=Math.sqrt(sfactor_sq);sweep==large&&(sfactor=-sfactor);const xc=.5*(x0+x1)-sfactor*(y1-y0),yc=.5*(y0+y1)+sfactor*(x1-x0),th0=Math.atan2(y0-yc,x0-xc);let th_arc=Math.atan2(y1-yc,x1-xc)-th0;th_arc<0&&1===sweep?th_arc+=Tau:th_arc>0&&0===sweep&&(th_arc-=Tau);const segs=Math.ceil(Math.abs(th_arc/(HalfPi+.001))),result=[];for(let i=0;i<segs;++i){const th2=th0+i*th_arc/segs,th3=th0+(i+1)*th_arc/segs;result[i]=[xc,yc,th2,th3,rx,ry,sin_th,cos_th]}return segmentCache[key]=result}(coords[5],coords[6],coords[0],coords[1],coords[3],coords[4],coords[2],x,y);for(let i=0;i<seg.length;++i){const bez=bezier(seg[i]);context.bezierCurveTo(bez[0],bez[1],bez[2],bez[3],bez[4],bez[5])}}const right0=new Uint32Array(33),right1=new Uint32Array(33);right1[0]=0,right0[0]=~right1[0];for(let i=1;i<=32;i++)right1[i]=right1[i-1]<<1|1,right0[i]=~right1[i];function applyMark(array,index,mask){array[index]|=mask}function applyUnmark(array,index,mask){array[index]&=mask}class BitMap{constructor(width,height,padding){this.pixelRatio=Math.sqrt(width*height/1e6),this.pixelRatio<1&&(this.pixelRatio=1),this.padding=padding,this.width=~~((width+2*padding+this.pixelRatio)/this.pixelRatio),this.height=~~((height+2*padding+this.pixelRatio)/this.pixelRatio),this.array=new Uint32Array(~~((this.width*this.height+32)/32))}getPixelRatio(){return this.pixelRatio}scalePixel(realPixel){return~~((realPixel+this.padding)/this.pixelRatio)}markScaled(x,y){const mapIndex=y*this.width+x;applyMark(this.array,mapIndex>>>5,1<<(31&mapIndex))}mark(x,y){this.markScaled(this.scalePixel(x),this.scalePixel(y))}unmarkScaled(x,y){const mapIndex=y*this.width+x;applyUnmark(this.array,mapIndex>>>5,~(1<<(31&mapIndex)))}unmark(x,y){this.unmarkScaled(this.scalePixel(x),this.scalePixel(y))}getScaled(x,y){const mapIndex=y*this.width+x;return this.array[mapIndex>>>5]&1<<(31&mapIndex)}get(x,y){return this.getScaled(this.scalePixel(x),this.scalePixel(y))}markInRangeScaled(x,y,x2,y2){let start,end,indexStart,indexEnd;for(;y<=y2;y++)if(start=y*this.width+x,end=y*this.width+x2,indexStart=start>>>5,indexEnd=end>>>5,indexStart===indexEnd)applyMark(this.array,indexStart,right0[31&start]&right1[1+(31&end)]);else{applyMark(this.array,indexStart,right0[31&start]),applyMark(this.array,indexEnd,right1[1+(31&end)]);for(let i=indexStart+1;i<indexEnd;i++)applyMark(this.array,i,4294967295)}}markInRange(x,y,x2,y2){return this.markInRangeScaled(this.scalePixel(x),this.scalePixel(y),this.scalePixel(x2),this.scalePixel(y2))}unmarkInRangeScaled(x,y,x2,y2){let start,end,indexStart,indexEnd;for(;y<=y2;y++)if(start=y*this.width+x,end=y*this.width+x2,indexStart=start>>>5,indexEnd=end>>>5,indexStart===indexEnd)applyUnmark(this.array,indexStart,right1[31&start]|right0[1+(31&end)]);else{applyUnmark(this.array,indexStart,right1[31&start]),applyUnmark(this.array,indexEnd,right0[1+(31&end)]);for(let i=indexStart+1;i<indexEnd;i++)applyUnmark(this.array,i,0)}}unmarkInRange(x,y,x2,y2){return this.unmarkInRangeScaled(this.scalePixel(x),this.scalePixel(y),this.scalePixel(x2),this.scalePixel(y2))}getInRangeScaled(x,y,x2,y2){let start,end,indexStart,indexEnd;for(;y<=y2;y++)if(start=y*this.width+x,end=y*this.width+x2,indexStart=start>>>5,indexEnd=end>>>5,indexStart===indexEnd){if(this.array[indexStart]&right0[31&start]&right1[1+(31&end)])return!0}else{if(this.array[indexStart]&right0[31&start])return!0;if(this.array[indexEnd]&right1[1+(31&end)])return!0;for(let i=indexStart+1;i<indexEnd;i++)if(this.array[i])return!0}return!1}getInRange(x,y,x2,y2){return this.getInRangeScaled(this.scalePixel(x),this.scalePixel(y),this.scalePixel(x2),this.scalePixel(y2))}searchOutOfBound(x,y,x2,y2){return x<0||y<0||y2>=this.height||x2>=this.width}}const ALPHA_MASK=4278190080,INSIDE_OPACITY_IN_ALPHA=268435456,INSIDE_OPACITY=.0625;function prepareBitmap(data,size,marktype,avoidBaseMark,avoidMarks,labelInside,padding){const width=size[0],height=size[1],n=data.length;if(avoidMarks.length){return function writeToBitMaps(context,width,height,labelInside,isGroupArea,padding){const layer1=new BitMap(width,height,padding),layer2=(labelInside||isGroupArea)&&new BitMap(width,height,padding),imageData=context.getImageData(0,0,width,height),canvasBuffer=new Uint32Array(imageData.data.buffer);let x,y,alpha;if(isGroupArea)for(y=0;y<height;y++)for(x=0;x<width;x++)alpha=canvasBuffer[y*width+x]&ALPHA_MASK,alpha&&alpha^INSIDE_OPACITY_IN_ALPHA&&layer2.mark(x,y);else for(y=0;y<height;y++)for(x=0;x<width;x++)alpha=canvasBuffer[y*width+x]&ALPHA_MASK,alpha&&(layer1.mark(x,y),labelInside&&alpha^INSIDE_OPACITY_IN_ALPHA&&layer2.mark(x,y));return[layer1,layer2]}(writeToCanvas(avoidMarks,width,height,labelInside||false),width,height,labelInside,false,padding)}{const bitMap=new BitMap(width,height,padding);if(avoidBaseMark)for(let i=0;i<n;i++){const d=data[i];bitMap.mark(d.markBound[0],d.markBound[3])}return[bitMap,void 0]}}function addToBitmap(bitmaps,data,size,marktype,avoidBaseMark,avoidMarks,labelInside,padding){const width=size[0],height=size[1],n=data.length;if(avoidMarks.length){return function writeToPassedBitMaps(context,bitmaps,width,height,labelInside,isGroupArea,padding){const imageData=context.getImageData(0,0,width,height),canvasBuffer=new Uint32Array(imageData.data.buffer);let x,y,alpha;if(isGroupArea)for(y=0;y<height;y++)for(x=0;x<width;x++)alpha=canvasBuffer[y*width+x]&ALPHA_MASK,alpha&&alpha^INSIDE_OPACITY_IN_ALPHA&&bitmaps[1].mark(x,y);else for(y=0;y<height;y++)for(x=0;x<width;x++)alpha=canvasBuffer[y*width+x]&ALPHA_MASK,alpha&&(bitmaps[0].mark(x,y),labelInside&&alpha^INSIDE_OPACITY_IN_ALPHA&&bitmaps[1].mark(x,y));return bitmaps}(writeToCanvas(avoidMarks,width,height,labelInside||false),bitmaps,width,height,labelInside,false)}if(avoidBaseMark)for(let i=0;i<n;i++){const d=data[i];bitmaps[0].mark(d.markBound[0],d.markBound[3])}return bitmaps}function writeToCanvas(avoidMarks,width,height,labelInside){const m=avoidMarks.length,c=document.createElement("canvas"),context=c.getContext("2d");let originalItems,itemsLen;c.setAttribute("width",width),c.setAttribute("height",height);for(let i=0;i<m;i++)originalItems=avoidMarks[i],itemsLen=originalItems.length,itemsLen&&("group"!==originalItems[0].nodeName?drawMark(context,originalItems,labelInside):drawGroup(context,originalItems,labelInside));return context}function drawMark(context,originalItems,labelInside){const n=originalItems.length;let items;if(labelInside){items=new Array(n);for(let i=0;i<n;i++)items[i]=prepareMarkItem(originalItems[i])}else items=originalItems;items.forEach((item=>function drawCanvasShape(context,item){const translateX=+item["data-translate-x"]?+item["data-translate-x"]:0,translateY=+item["data-translate-y"]?+item["data-translate-y"]:0,dx="true"===item["data-use-dx"]&&+item.dx?+item.dx:0,dy="true"===item["data-use-dy"]&&+item.dy?+item.dy:0;if(context.beginPath(),"rect"===item.nodeName)context.rect(+item["data-x"]+translateX,+item["data-y"]+translateY,+item["data-width"],+item["data-height"]),context.stroke(),item["data-fill"]&&"true"===item["data-fill"]&&context.fill();else if("text"===item.nodeName){const translateTextAnchor=item["text-anchor"]&&item["text-anchor"]&&"start"!==item["text-anchor"]?"middle"===item["text-anchor"]?item["data-width"]/2:item["data-width"]:0,translateTextHeight=(item.baseline,0);context.rect(+item["data-x"]+translateX-translateTextAnchor+dx,+item["data-y"]+translateY+translateTextHeight+dy,+item["data-width"],+item["data-height"]),context.stroke(),item["data-fill"]&&"true"===item["data-fill"]&&context.fill()}else if("circle"===item.nodeName)context.arc(+item["data-cx"]+translateX,+item["data-cy"]+translateY,+item["data-r"],0,2*Math.PI),context.stroke(),item["data-fill"]&&"true"===item["data-fill"]&&context.fill();else if("line"===item.nodeName)context.moveTo(+item["data-x1"]+translateX,+item["data-y1"]+translateY),context.lineTo(+item["data-x2"]+translateX,+item["data-y2"]+translateY),context.stroke();else if("path"===item.nodeName){const parsed=function pathParse(pathstr){const result=[];let curr,chunks,parsed,param,cmd,len,i,j,n,m;const path=pathstr.slice().replace(regexp[0],"###$1").split(regexp[1]).slice(1);for(i=0,n=path.length;i<n;++i){for(curr=path[i],chunks=curr.slice(1).trim().replace(regexp[2],"$1###$2").replace(regexp[3],"$1###$2").split(regexp[4]),cmd=curr.charAt(0),parsed=[cmd],j=0,m=chunks.length;j<m;++j)(param=+chunks[j])===param&&parsed.push(param);if(len=cmdlen[cmd.toLowerCase()],parsed.length-1>len){const m=parsed.length;for(j=1,result.push([cmd].concat(parsed.slice(j,j+=len))),cmd="M"===cmd?"L":"m"===cmd?"l":cmd;j<m;j+=len)result.push([cmd].concat(parsed.slice(j,j+len)))}else result.push(parsed)}return result}(item["data-d"]),l=(+item["data-x"]||0)+translateX,t=(+item["data-y"]||0)+translateY,sX=+item["data-r"]||1;!function pathRender(context,path,l,t,sX,sY){var current,tempX,tempY,tempControlX,tempControlY,previous=null,x=0,y=0,controlX=0,controlY=0;null==l&&(l=0),null==t&&(t=0),null==sX&&(sX=1),null==sY&&(sY=sX),context.beginPath&&context.beginPath();for(var i=0,len=path.length;i<len;++i){switch(current=path[i],1===sX&&1===sY||(current=scale$1(current,sX,sY)),current[0]){case"l":x+=current[1],y+=current[2],context.lineTo(x+l,y+t);break;case"L":x=current[1],y=current[2],context.lineTo(x+l,y+t);break;case"h":x+=current[1],context.lineTo(x+l,y+t);break;case"H":x=current[1],context.lineTo(x+l,y+t);break;case"v":y+=current[1],context.lineTo(x+l,y+t);break;case"V":y=current[1],context.lineTo(x+l,y+t);break;case"m":x+=current[1],y+=current[2],context.moveTo(x+l,y+t);break;case"M":x=current[1],y=current[2],context.moveTo(x+l,y+t);break;case"c":tempX=x+current[5],tempY=y+current[6],controlX=x+current[3],controlY=y+current[4],context.bezierCurveTo(x+current[1]+l,y+current[2]+t,controlX+l,controlY+t,tempX+l,tempY+t),x=tempX,y=tempY;break;case"C":x=current[5],y=current[6],controlX=current[3],controlY=current[4],context.bezierCurveTo(current[1]+l,current[2]+t,controlX+l,controlY+t,x+l,y+t);break;case"s":tempX=x+current[3],tempY=y+current[4],controlX=2*x-controlX,controlY=2*y-controlY,context.bezierCurveTo(controlX+l,controlY+t,x+current[1]+l,y+current[2]+t,tempX+l,tempY+t),controlX=x+current[1],controlY=y+current[2],x=tempX,y=tempY;break;case"S":tempX=current[3],tempY=current[4],controlX=2*x-controlX,controlY=2*y-controlY,context.bezierCurveTo(controlX+l,controlY+t,current[1]+l,current[2]+t,tempX+l,tempY+t),x=tempX,y=tempY,controlX=current[1],controlY=current[2];break;case"q":tempX=x+current[3],tempY=y+current[4],controlX=x+current[1],controlY=y+current[2],context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t),x=tempX,y=tempY;break;case"Q":tempX=current[3],tempY=current[4],context.quadraticCurveTo(current[1]+l,current[2]+t,tempX+l,tempY+t),x=tempX,y=tempY,controlX=current[1],controlY=current[2];break;case"t":tempX=x+current[1],tempY=y+current[2],null===previous[0].match(/[QqTt]/)?(controlX=x,controlY=y):"t"===previous[0]?(controlX=2*x-tempControlX,controlY=2*y-tempControlY):"q"===previous[0]&&(controlX=2*x-controlX,controlY=2*y-controlY),tempControlX=controlX,tempControlY=controlY,context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t),y=tempY,controlX=(x=tempX)+current[1],controlY=y+current[2];break;case"T":tempX=current[1],tempY=current[2],controlX=2*x-controlX,controlY=2*y-controlY,context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t),x=tempX,y=tempY;break;case"a":drawArc(context,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+x+l,current[7]+y+t]),x+=current[6],y+=current[7];break;case"A":drawArc(context,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+l,current[7]+t]),x=current[6],y=current[7];break;case"z":case"Z":context.closePath()}previous=current}}(context,parsed,l,t,sX,sX),context.stroke(),item["data-fill"]&&"true"===item["data-fill"]&&context.fill()}context.closePath()}(context,item)))}function drawGroup(context,groups,labelInside){const n=groups.length;let marks;for(let i=0;i<n;i++){marks=groups[i].items;for(let j=0;j<marks.length;j++){const g=marks[j];"group"!==g.marktype?drawMark(context,g.items,labelInside):drawGroup(context,g.items,labelInside)}}}function prepareMarkItem(originalItem){const item={};for(const key in originalItem)item[key]=originalItem[key];return item.stroke&&(item.strokeOpacity=1),item.fill&&(item.fillOpacity=INSIDE_OPACITY,item.stroke="#000",item.strokeOpacity=1,item.strokeWidth=2),item}function labelWidth(context,text,fontSize,font){return context.font=fontSize+"px "+font,context.measureText(text).width}function checkCollision(x1,y1,x2,y2,bitMap){return!bitMap||bitMap.getInRangeScaled(x1,y2,x2,y2)||bitMap.getInRangeScaled(x1,y1,x2,y2-1)}const ALIGN=["right","center","left"],BASELINE=["bottom","middle","top"];class LabelPlacer{constructor(bitmaps,size,anchors,offsets){this.bm0=bitmaps[0],this.bm1=bitmaps[1],this.width=size[0],this.height=size[1],this.anchors=anchors,this.offsets=offsets}place(d){const mb=d.markBound;if(mb[2]<0||mb[5]<0||mb[0]>this.width||mb[3]>this.height)return!1;const context=function domCanvas(w,h){if("undefined"!=typeof document&&document.createElement){const c=document.createElement("canvas");if(c&&c.getContext)return c.width=w,c.height=h,c}return null}().getContext("2d"),n=this.offsets.length,textHeight=d.textHeight,markBound=d.markBound,text=d.text,font=d.font;let dx,dy,isInside,sizeFactor,insideFactor,x,x1,xc,x2,y1,yc,y2,_x1,_x2,_y1,_y2,textWidth=d.textWidth;for(let i=0;i<n;i++){if(dx=(3&this.anchors[i])-1,dy=(this.anchors[i]>>>2&3)-1,isInside=this.bm1&&(0===dx&&0===dy||this.offsets[i]<0),sizeFactor=dx&&dy?.707106781186548:1,insideFactor=this.offsets[i]<0?-1:1,yc=markBound[4+dy]+insideFactor*textHeight*dy/2+this.offsets[i]*dy*sizeFactor,x=markBound[1+dx]+this.offsets[i]*dx*sizeFactor,y1=yc-textHeight/2,y2=yc+textHeight/2,_y1=this.bm0.scalePixel(y1),_y2=this.bm0.scalePixel(y2),_x1=this.bm0.scalePixel(x),!textWidth){if(!isLabelPlacable(_x1,_x1,_y1,_y2,this.bm0,this.bm1,x,x,y1,y2,markBound,isInside))continue;textWidth=labelWidth(context,text,textHeight,font)}if(xc=x+insideFactor*textWidth*dx/2,x1=xc-textWidth/2,x2=xc+textWidth/2,_x1=this.bm0.scalePixel(x1),_x2=this.bm0.scalePixel(x2),d.x=dx?dx*insideFactor<0?x2:x1:xc,d.y=dy?dy*insideFactor<0?y2:y1:yc,d.align=ALIGN[dx*insideFactor+1],d.baseline=BASELINE[dy*insideFactor+1],isLabelPlacable(_x1,_x2,_y1,_y2,this.bm0,this.bm1,x1,x2,y1,y2,markBound,isInside))return this.bm0.markInRangeScaled(_x1,_y1,_x2,_y2),!0}return!1}unplace(d){const n=this.offsets.length,textHeight=d.textHeight,markBound=d.markBound;let dx,dy,sizeFactor,insideFactor,x,x1,xc,x2,y1,yc,y2,_x1,_x2,_y1,_y2,textWidth=d.textWidth;for(let i=0;i<n;i++)dx=(3&this.anchors[i])-1,dy=(this.anchors[i]>>>2&3)-1,sizeFactor=dx&&dy?.707106781186548:1,insideFactor=this.offsets[i]<0?-1:1,yc=markBound[4+dy]+insideFactor*textHeight*dy/2+this.offsets[i]*dy*sizeFactor,x=markBound[1+dx]+this.offsets[i]*dx*sizeFactor,y1=yc-textHeight/2,y2=yc+textHeight/2,_y1=this.bm0.scalePixel(y1),_y2=this.bm0.scalePixel(y2),_x1=this.bm0.scalePixel(x),xc=x+insideFactor*textWidth*dx/2,x1=xc-textWidth/2,x2=xc+textWidth/2,_x1=this.bm0.scalePixel(x1),_x2=this.bm0.scalePixel(x2),this.bm0.unmarkInRangeScaled(_x1,_y1,_x2,_y2+3);return!0}}function isLabelPlacable(_x1,_x2,_y1,_y2,bm0,bm1,x1,x2,y1,y2,markBound,isInside){return!(bm0.searchOutOfBound(_x1,_y1,_x2,_y2)||(isInside?checkCollision(_x1,_y1,_x2,_y2,bm1)||!function isInMarkBound(x1,y1,x2,y2,markBound){return markBound[0]<=x1&&x2<=markBound[2]&&markBound[3]<=y1&&y2<=markBound[5]}(x1,y1,x2,y2,markBound):checkCollision(_x1,_y1,_x2,_y2,bm0)))}"IE"===getBrowser()&&null==Element.prototype.getAttributeNames&&(Element.prototype.getAttributeNames=function(){for(var attributes=this.attributes,length=attributes.length,result=new Array(length),i=0;i<length;i++)result[i]=attributes[i].name;return result});var anchorTextToNumber={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},resolveLabelCollision=function(_a){var labelSelection=_a.labelSelection,avoidMarks=_a.avoidMarks,validPositions=_a.validPositions,offsets=_a.offsets;_a.attributes;var accessors=_a.accessors,size=_a.size,boundsScope=_a.boundsScope,bitmaps=_a.bitmaps,hideOnly=_a.hideOnly,removeOnly=_a.removeOnly,suppressMarkDraw=_a.suppressMarkDraw,anchors=validPositions,labelsArray=[],marksArray=[],boundsHash={};if(!size||2!==size.length)throw Error("Size of chart should be specified as an array of width and height");avoidMarks&&avoidMarks.length&&avoidMarks.forEach((function(marks){var innerMarkArray=[];marks.each((function(d,i,n){var item={};item.node=n[i],item.nodeName=n[i].nodeName,item.datum=d&&d.data&&d.data.data?d.data.data:d&&d.data?d.data:d||{},n[i].getAttributeNames().forEach((function(attrName){item[attrName]=select$4(n[i]).attr(attrName)})),item.boundsScope=boundsScope,item.bounds=getMarkItemBounds(item);var accessorValues=accessors.map((function(key){return item.datum[key]||"Not Found"}));boundsHash[accessorValues.join("-")]=item.bounds,item.key=accessorValues.join("-"),innerMarkArray.push(item)})),marksArray.push(innerMarkArray)})),labelSelection&&labelSelection.each((function(d,i,n){var item={},textElement=n[i],style=getComputedStyle(textElement),fontSize=parseFloat(style.fontSize),fontFamily=style.fontFamily;textElement.getAttributeNames().forEach((function(attrName){item[attrName]=select$4(textElement).attr(attrName)})),item.originalOpacity=select$4(textElement).attr("opacity"),isObject$4(textElement.__transition)&&Object.keys(textElement.__transition).forEach((function(key){if("opacity"===textElement.__transition[key].name){var transitionOpacity=textElement.__transition[key].value["attr.opacity"];(transitionOpacity||0===transitionOpacity)&&(item.opacity=transitionOpacity)}})),item.node=n[i],item.i=i,item.nodeName=textElement.nodeName,item.fontSize=fontSize,item.font=style.fontFamily,item.text=textElement.textContent,item.sort=!1,item.datum=d&&d.data&&d.data.data?d.data.data:d&&d.data?d.data:d||{},item.textWidth="rect"===textElement.nodeName?+item.width:getTextWidth(textElement.textContent,fontSize,!0,fontFamily),item.textHeight="rect"===textElement.nodeName?+item.height:Math.max(fontSize-1,1);var accessorValues=accessors.map((function(key){return item.datum[key]||"Not Found"}));item.key=accessorValues.join("-"),item.boundsScope=boundsScope;var oldDataX=item["data-x"],oldDataY=item["data-y"];removeOnly&&item.x&&item.y&&"true"!==item["keep-data-y"]&&(item["data-x"]=item.x,item["data-y"]=item.y),item.markBound=boundsHash[accessorValues.join("-")]&&!hideOnly?boundsHash[accessorValues.join("-")]:getMarkItemBounds(item),removeOnly&&(item["data-x"]=oldDataX,item["data-y"]=oldDataY),labelsArray.push(item)}));!bitmaps||2!==bitmaps.length||removeOnly||suppressMarkDraw?removeOnly||suppressMarkDraw||(bitmaps=prepareBitmap(labelsArray,size,0,false,marksArray,!1,1)):addToBitmap(bitmaps,labelsArray,size,0,false,marksArray,!1);var alignMap={right:"end",center:"middle",left:"start"},anchorPositions=anchors.map((function(anchor){return anchorTextToNumber[anchor]})),labelPlacer=new LabelPlacer(bitmaps,size,anchorPositions,offsets),attributeHash={};return removeOnly?labelsArray.forEach((function(item,i){var itemKey="Not Found"===item.key?i:item.i+"-"+item.key;"true"!==item["data-label-hidden"]&&labelPlacer.unplace(item),attributeHash[itemKey]={"do-nothing":!0}})):(labelsArray.forEach((function(item,i){var itemKey="Not Found"===item.key?i:item.i+"-"+item.key;"true"===item["data-hidden"]||0==+item.opacity?attributeHash[itemKey]={"do-nothing":!0}:!item["data-hidden"]&&labelPlacer.place(item)?attributeHash[itemKey]={visibility:null,x:item.x,y:item.y,translateX:+item["data-translate-x"]?+item["data-translate-x"]:0,translateY:+item["data-translate-y"]?+item["data-translate-y"]:0,translateHeight:item["data-no-text-anchor"]?0:"top"===item.baseline?+item.textHeight:"middle"===item.baseline?+item.textHeight/3:0,"text-anchor":item["data-no-text-anchor"]?null:alignMap[item.align],"data-align":item.align,"data-baseline":item.baseline,"data-label-moved":!0,"data-label-hidden":!1,textHeight:item.textHeight}:attributeHash[itemKey]={visibility:"hidden",x:item.x,y:item.y,translateX:+item["data-translate-x"]?+item["data-translate-x"]:0,translateY:+item["data-translate-y"]?+item["data-translate-y"]:0,translateHeight:item["data-no-text-anchor"]?0:"top"===item.baseline?+item.textHeight:"middle"===item.baseline?+item.textHeight/3:0,"text-anchor":item["data-no-text-anchor"]?null:alignMap[item.align],"data-align":item.align,"data-baseline":item.baseline,textHeight:item.textHeight,"data-label-moved":!0,"data-label-hidden":!0}})),labelSelection.style("visibility",(function(d,i,n){var innerD=d&&d.data&&d.data.data?d.data.data:d&&d.data?d.data:d||{},accessorValues=accessors.map((function(key){return innerD[key]||"Not Found"})),attributes="Not Found"===accessorValues.join("-")?attributeHash[i]:attributeHash[i+"-"+accessorValues.join("-")];return accessors&&accessors.length&&attributes&&attributes["do-nothing"]?select$4(n[i]).style("visibility"):(select$4(n[i]).attr("data-label-hidden",accessors&&accessors.length&&attributes&&attributes["data-label-hidden"]).attr("data-label-moved",accessors&&accessors.length&&attributes&&attributes["data-label-moved"]).attr("data-align",attributes["data-align"]).attr("data-baseline",attributes["data-baseline"]).attr("dx","true"!==select$4(n[i]).attr("data-use-dx")?null:select$4(n[i]).attr("dx")).attr("dy","true"!==select$4(n[i]).attr("data-use-dy")?null:select$4(n[i]).attr("dy")).attr("data-use-dx",null).attr("data-use-dy",null),accessors&&accessors.length&&attributes&&(null===attributes.visibility||!attributes.visibility)?null:"hidden")})),hideOnly||labelSelection.attr("x",(function(d,i,n){var innerD=d&&d.data&&d.data.data?d.data.data:d&&d.data?d.data:d||{},accessorValues=accessors.map((function(key){return innerD[key]||"Not Found"})),attributes="Not Found"===accessorValues.join("-")?attributeHash[i]:attributeHash[i+"-"+accessorValues.join("-")];return accessors&&accessors.length&&attributes&&attributes.x?attributes.x-attributes.translateX:select$4(n[i]).attr("data-x")})).attr("y",(function(d,i,n){var innerD=d&&d.data&&d.data.data?d.data.data:d&&d.data?d.data:d||{},accessorValues=accessors.map((function(key){return innerD[key]||"Not Found"})),attributes="Not Found"===accessorValues.join("-")?attributeHash[i]:attributeHash[i+"-"+accessorValues.join("-")],translateTextHeight=accessors&&accessors.length&&attributes&&attributes.translateHeight;return accessors&&accessors.length&&attributes&&attributes.y?attributes.y-attributes.translateY+translateTextHeight:select$4(n[i]).attr("data-y")})).attr("text-anchor",(function(d,i,n){var innerD=d&&d.data&&d.data.data?d.data.data:d&&d.data?d.data:d||{},accessorValues=accessors.map((function(key){return innerD[key]||"Not Found"})),attributes="Not Found"===accessorValues.join("-")?attributeHash[i]:attributeHash[i+"-"+accessorValues.join("-")];return accessors&&accessors.length&&attributes&&attributes["text-anchor"]?attributes["text-anchor"]:select$4(n[i]).attr("text-anchor")}))),bitmaps},getMarkItemBounds=function(markItem){var translateX=+markItem["data-translate-x"]?+markItem["data-translate-x"]:0,translateY=+markItem["data-translate-y"]?+markItem["data-translate-y"]:0;switch(markItem.nodeName){case"text":var textWidth=(markItem.textWidth?+markItem.textWidth:+markItem["data-width"])||0,textHeight=(markItem.textHeight?+markItem.textHeight:+markItem["data-height"])||0,fontSize=+markItem.fontSize||textHeight,translateTextAnchor=markItem["data-text-anchor"]?markItem["data-text-anchor"]&&"start"!==markItem["data-text-anchor"]?"middle"===markItem["data-text-anchor"]?textWidth/2:textWidth:0:markItem["text-anchor"]&&markItem["text-anchor"]&&"start"!==markItem["text-anchor"]?"middle"===markItem["text-anchor"]?textWidth/2:textWidth:0,dx="true"!==markItem["data-use-dx"]?0:+markItem.dx?+markItem.dx:markItem.dx&&markItem.dx.indexOf("em")>=0?+markItem.dx.replace("em","")*fontSize:0,dy="true"!==markItem["data-use-dy"]?0:+markItem.dy?+markItem.dy:markItem.dy&&markItem.dy.indexOf("em")>=0?+markItem.dy.replace("em","")*fontSize:0;switch(markItem.boundsScope){case"centroid":return[+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth/2,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth/2,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth/2,+markItem["data-y"]+dy+translateY+textHeight/2,+markItem["data-y"]+dy+translateY+textHeight/2,+markItem["data-y"]+dy+translateY+textHeight/2];case"top":return[+markItem["data-x"]+dx+translateX-translateTextAnchor,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth/2,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth,+markItem["data-y"]+dy+translateY,+markItem["data-y"]+dy+translateY,+markItem["data-y"]+dy+translateY];case"middle":return[+markItem["data-x"]+dx+translateX-translateTextAnchor,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth/2,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth,+markItem["data-y"]+dy+translateY+textHeight/2,+markItem["data-y"]+dy+translateY+textHeight/2,+markItem["data-y"]+dy+translateY+textHeight/2];case"bottom":return[+markItem["data-x"]+dx+translateX-translateTextAnchor,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth/2,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth,+markItem["data-y"]+dy+translateY+textHeight,+markItem["data-y"]+dy+translateY+textHeight,+markItem["data-y"]+dy+translateY+textHeight];case"center":return[+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth/2,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth/2,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth/2,+markItem["data-y"]+dy+translateY,+markItem["data-y"]+dy+translateY+textHeight/2,+markItem["data-y"]+dy+translateY+textHeight];case"right":return[+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth,+markItem["data-y"]+dy+translateY,+markItem["data-y"]+dy+translateY+textHeight/2,+markItem["data-y"]+dy+translateY+textHeight];case"left":return[+markItem["data-x"]+dx+translateX-translateTextAnchor,+markItem["data-x"]+dx+translateX-translateTextAnchor,+markItem["data-x"]+dx+translateX-translateTextAnchor,+markItem["data-y"]+dy+translateY,+markItem["data-y"]+dy+translateY+textHeight/2,+markItem["data-y"]+dy+translateY+textHeight];default:return[+markItem["data-x"]+dx+translateX-translateTextAnchor,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth/2,+markItem["data-x"]+dx+translateX-translateTextAnchor+textWidth,+markItem["data-y"]+dy+translateY-textHeight,+markItem["data-y"]+dy+translateY-textHeight/2,+markItem["data-y"]+dy+translateY]}case"circle":return[+markItem["data-cx"]+translateX-+markItem["data-r"],+markItem["data-cx"]+translateX,+markItem["data-cx"]+translateX+ +markItem["data-r"],+markItem["data-cy"]+translateY-+markItem["data-r"],+markItem["data-cy"]+translateY,+markItem["data-cy"]+translateY+ +markItem["data-r"]];case"rect":switch(markItem.boundsScope){case"annotation":return[+markItem["data-x"]+translateX-+markItem["data-width"]/2,+markItem["data-x"]+translateX,+markItem["data-x"]+translateX+ +markItem["data-width"]/2,+markItem["data-y"]+translateY-+markItem["data-height"]/2,+markItem["data-y"]+translateY,+markItem["data-y"]+translateY+ +markItem["data-height"]/2];case"top":return[+markItem["data-x"]+translateX,+markItem["data-x"]+translateX+ +markItem["data-width"]/2,+markItem["data-x"]+translateX+ +markItem["data-width"],+markItem["data-y"]+translateY,+markItem["data-y"]+translateY,+markItem["data-y"]+translateY];case"middle":return[+markItem["data-x"]+translateX+ +markItem["data-width"]/2,+markItem["data-x"]+translateX+ +markItem["data-width"]/2,+markItem["data-x"]+translateX+ +markItem["data-width"]/2,+markItem["data-y"]+translateY+ +markItem["data-height"]/2,+markItem["data-y"]+translateY+ +markItem["data-height"]/2,+markItem["data-y"]+translateY+ +markItem["data-height"]/2];case"bottom":return[+markItem["data-x"]+translateX,+markItem["data-x"]+translateX+ +markItem["data-width"]/2,+markItem["data-x"]+translateX+ +markItem["data-width"],+markItem["data-y"]+translateY+ +markItem["data-height"]-6,+markItem["data-y"]+translateY+ +markItem["data-height"]-6,+markItem["data-y"]+translateY+ +markItem["data-height"]-6];case"right":return[+markItem["data-x"]+translateX+ +markItem["data-width"],+markItem["data-x"]+translateX+ +markItem["data-width"],+markItem["data-x"]+translateX+ +markItem["data-width"],+markItem["data-y"]+translateY,+markItem["data-y"]+translateY+ +markItem["data-height"]/2,+markItem["data-y"]+translateY+ +markItem["data-height"]];case"left":return[+markItem["data-x"]+translateX,+markItem["data-x"]+translateX,+markItem["data-x"]+translateX,+markItem["data-y"]+translateY,+markItem["data-y"]+translateY+ +markItem["data-height"]/2,+markItem["data-y"]+translateY+ +markItem["data-height"]];default:return[+markItem["data-x"]+translateX,+markItem["data-x"]+translateX+ +markItem["data-width"]/2,+markItem["data-x"]+translateX+ +markItem["data-width"],+markItem["data-y"]+translateY,+markItem["data-y"]+translateY+ +markItem["data-height"]/2,+markItem["data-y"]+translateY+ +markItem["data-height"]]}case"path":return+markItem["data-fake-x"]?[+markItem["data-fake-x"]+translateX-(+markItem["data-r"]||0),+markItem["data-fake-x"]+translateX,+markItem["data-fake-x"]+translateX+(+markItem["data-r"]||0),+markItem["data-fake-y"]+translateY-(+markItem["data-r"]||0),+markItem["data-fake-y"]+translateY,+markItem["data-fake-y"]+translateY+(+markItem["data-r"]||0)]:+markItem["data-centerX1"]?[+markItem["data-centerX1"]+translateX,+markItem["data-centerX1"]+(+markItem["data-centerX2"]-+markItem["data-centerX1"])/2+translateX,+markItem["data-centerX2"]+translateX,+markItem["data-centerY1"]+translateY,+markItem["data-centerY1"]+(+markItem["data-centerY2"]-+markItem["data-centerY1"])/2+translateY,+markItem["data-centerY2"]+translateY]:[+markItem["data-x"]+translateX-(+markItem["data-r"]||0),+markItem["data-x"]+translateX,+markItem["data-x"]+translateX+(+markItem["data-r"]||0),+markItem["data-y"]+translateY-(+markItem["data-r"]||0),+markItem["data-y"]+translateY,+markItem["data-y"]+translateY+(+markItem["data-r"]||0)];default:return[+markItem["data-x"]+translateX,+markItem["data-x"]+translateX+ +markItem["data-width"]/2,+markItem["data-x"]+translateX+ +markItem["data-width"],+markItem["data-y"]+translateY,+markItem["data-y"]+translateY+ +markItem["data-height"]/2,+markItem["data-y"]+translateY+ +markItem["data-height"]]}},visaColors={pri_grey:"#5C5C5C",sec_blue:"#003ea9",sec_orange:"#ef8400",sec_yellow:"#ffd700",comp_blue:"#2bb4da",comp_green:"#00a25e",supp_pink:"#ae48b4",supp_purple:"#7f48b4",supp_green:"#649f4a",supp_red:"#a50026",base_grey:"#D7D7DE",light_text:"#ffffff",grey_text:"#565656",dark_text:"#222222",oss_blue:"#0051dc",oss_light_blue:"#7FA8ED",oss_dark_grey:"#363636",oss_light_grey:"#D7D7D7",categorical_blue:"#226092",categorical_light_blue:"#7c99b1",categorical_blue_text:"#164d79",categorical_purple:"#796aaf",categorical_light_purple:"#cacae7",categorical_purple_text:"#66589b",categorical_olive:"#829e46",categorical_light_olive:"#abb798",categorical_olive_text:"#498329",categorical_grey:"#7a6763",categorical_light_grey:"#a19491",categorical_grey_text:"#6e5a55",categorical_rose:"#c18174",categorical_light_rose:"#e7c0b8",categorical_rose_text:"#954737",categorical_brown:"#43312d",categorical_light_brown:"#624c48",categorical_brown_text:"#43312d"};function darkerColor(color){return hsl$2(visaColors[color]||color).darker(1.5).hex()}var sequentialColorIndex=[[7],[7],[2,6],[0,3,6],[0,2,4,6],[0,1,3,5,7],[1,2,3,4,5,6],[0,1,2,3,4,5,6],[0,1,2,3,4,5,6,7]],divergingColorIndex=[[0],[0],[0,9],[0,4,9],[0,3,6,9],[0,2,4,6,9],[0,2,4,5,7,9],[0,1,2,4,7,8,9],[0,1,2,3,6,7,8,9],[0,1,2,3,4,6,7,8,9],[0,1,2,3,4,5,6,7,8,9]],categoricalColorIndex=[[0],[0],[0,1],[0,1,2],[0,1,2,3],[0,1,2,3,4],[0,1,2,3,4,5],[0,1,2,3,4,5,6],[0,1,2,3,4,5,6,7],[0,1,2,3,4,5,6,7,8],[0,1,2,3,4,5,6,7,8,9]];function getAccessibleStrokes(fillColor){var strokes=[];return strokes.push(getContrastingStroke(fillColor)),calculateRelativeLuminance(calculateLuminance(fillColor),1)>=3&&strokes.push(fillColor),strokes}function processColor(color,operation,contrast){var originalLuminance=calculateLuminance(color),hslObject=hsl$2(color),limitReached=!1,impossible=!1;if("darken"===operation)for(hslObject.l-=.01;calculateRelativeLuminance(calculateLuminance(hslObject.hex()),originalLuminance)<contrast&&!impossible;)hslObject.l-=.01,limitReached&&(impossible=!0),hslObject.l<0&&(hslObject.l=0,limitReached=!0);else for(hslObject.l+=.01;calculateRelativeLuminance(calculateLuminance(hslObject.hex()),originalLuminance)<contrast&&!impossible;)hslObject.l+=.01,limitReached&&(impossible=!0),hslObject.l>1&&(hslObject.l=1,limitReached=!0);return impossible?"":hslObject.hex()}function getContrastingStroke(fillColor){var originalLuminance=calculateLuminance(fillColor),luminanceToWhite=calculateRelativeLuminance(originalLuminance,1),hslObject=hsl$2(fillColor);if(luminanceToWhite<3)for(hslObject.l-=.01;hslObject.l>0&&calculateRelativeLuminance(calculateLuminance(hslObject.hex()),originalLuminance)<3&&hslObject.l;)hslObject.l-=.01,hslObject.l<0&&(hslObject.l=0);else for(hslObject.l+=.01;calculateRelativeLuminance(calculateLuminance(hslObject.hex()),originalLuminance)<3&&1!==hslObject.l;)hslObject.l+=.01,hslObject.l>1&&(hslObject.l=1);return hslObject.hex()}function ensureTextContrast(textColor){var luminanceToWhite=calculateRelativeLuminance(calculateLuminance(textColor),1),hslObject=hsl$2(textColor);if(luminanceToWhite<4.5)for(hslObject.l-=.01;hslObject.l>0&&calculateRelativeLuminance(calculateLuminance(hslObject.hex()),1)<4.5&&hslObject.l;)hslObject.l-=.01,hslObject.l<0&&(hslObject.l=0);return hslObject.hex()}function calculateLuminance(color){function calcColorScore(normalizedColor){return normalizedColor<=.03928?normalizedColor/12.92:Math.pow((normalizedColor+.055)/1.055,2.4)}var rgbObject=rgb$2(color);return.2126*calcColorScore(rgbObject.r/255)+.7152*calcColorScore(rgbObject.g/255)+.0722*calcColorScore(rgbObject.b/255)}function calculateRelativeLuminance(luminance1,luminance2){return luminance1>=luminance2?(luminance1+.05)/(luminance2+.05):(luminance2+.05)/(luminance1+.05)}function autoTextColor(backgroundColor){var lightLuminance=calculateLuminance(visaColors.light_text),greyLuminance=calculateLuminance(visaColors.dark_text),backgroundLuminance=calculateLuminance(backgroundColor),relativeToLight=calculateRelativeLuminance(lightLuminance,backgroundLuminance),relativeToGrey=calculateRelativeLuminance(greyLuminance,backgroundLuminance);return relativeToGrey<4.5&&relativeToLight<4.5||relativeToGrey>relativeToLight?visaColors.dark_text:visaColors.light_text}function visaColorToHex(color){return visaColors[color]||color}function transitionEndAll(transition,callback,noTransition){if(noTransition)callback.apply(this,arguments);else{var n=0;transition.each((function(){++n})).on("end",(function(){--n||callback.apply(this,arguments)}))}}var indices={categorical:[[0],[0],[0,1],[0,1,2],[0,1,2,3],[0,1,2,3,4],[0,1,2,3,4,5]],sequential:[[0],[0],[0,8],[0,4,8],[1,3,5,7],[0,2,4,6,8],[1,2,3,4,5,6],[1,2,3,4,5,6,7],[0,1,2,3,4,5,6,7],[0,1,2,3,4,5,6,7,8]],diverging_center:[,[5],,[0,5,10],,[1,3,5,7,9],,[2,3,4,5,6,7,8],,[1,2,3,4,5,6,7,8,9],,[0,1,2,3,4,5,6,7,8,9,10]],diverging_split:[,,[1,8],,[0,3,6,9],,[0,2,4,5,7,9],,[0,1,2,3,6,7,8,9],,[0,1,2,3,4,5,6,7,8,9]]};function getTexture(_a){var scheme=_a.scheme,id=_a.id,index=_a.index,fillColor=_a.fillColor,textureColor=_a.textureColor;return{categorical:[{attributes:{width:12,height:12,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"12",height:"12",fill:""+fillColor}},{name:"path",attributes:{d:"M 0,0 l 12,12 M -3,9 l 6,6 M 9,-3 l 6,6","stroke-width":"1","shape-rendering":"auto",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:12,height:12,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"12",height:"12",fill:""+fillColor}},{name:"circle",attributes:{cx:"6",cy:"6",r:"1",fill:""+textureColor,stroke:"#343434","stroke-width":"0"}},{name:"circle",attributes:{cx:"0",cy:"0",r:"1",fill:""+textureColor,stroke:"#343434","stroke-width":"0"}},{name:"circle",attributes:{cx:"0",cy:"12",r:"1",fill:""+textureColor,stroke:"#343434","stroke-width":"0"}},{name:"circle",attributes:{cx:"12",cy:"0",r:"1",fill:""+textureColor,stroke:"#343434","stroke-width":"0"}},{name:"circle",attributes:{cx:"12",cy:"12",r:"1",fill:""+textureColor,stroke:"#343434","stroke-width":"0"}}]},{attributes:{width:24,height:24,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"24",height:"24",fill:""+fillColor}},{name:"path",attributes:{d:"M 0,0 l 24,24 M -6,18 l 12,12 M 18,-6 l 12,12","stroke-width":"1","shape-rendering":"auto",stroke:""+textureColor,"stroke-linecap":"square"}},{name:"path",attributes:{d:"M 0,24 l 24,-24 M -6,6 l 12,-12 M 18,30 l 12,-12","stroke-width":"1","shape-rendering":"auto",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:12,height:12,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"12",height:"12",fill:""+fillColor}},{name:"path",attributes:{d:"M 4.5,4.5l3,3M4.5,7.5l3,-3",fill:"transparent",stroke:""+textureColor,"stroke-width":"1","stroke-linecap":"square","shape-rendering":"auto"}}]},{attributes:{width:10,height:10,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"10",height:"10",fill:""+fillColor}},{name:"path",attributes:{d:"M 5, 0 l 0, 10","stroke-width":"1","shape-rendering":"auto",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:12,height:12,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"12",height:"12",fill:""+fillColor}},{name:"circle",attributes:{cx:"6",cy:"6",r:"1.5",fill:"none",stroke:""+textureColor,"stroke-width":"1"}},{name:"circle",attributes:{cx:"2",cy:"10",r:"1.5",fill:"none",stroke:""+textureColor,"stroke-width":"1"}},{name:"circle",attributes:{cx:"10",cy:"2",r:"1.5",fill:"none",stroke:""+textureColor,"stroke-width":"1"}}]}],sequential:[{attributes:{width:10,height:10,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"10",height:"10",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 0 L 10 0M 0 10 L 10 10","stroke-width":"1",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:52.40843064167849,height:10.187166949552141,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"52.40843064167849",height:"10.187166949552141",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -52.40843064167849 10.187166949552141 L 52.40843064167849 -10.187166949552141M -52.40843064167849 20.374333899104283 L 104.81686128335699 -10.187166949552141M 0 20.374333899104283 L 104.81686128335699 0","stroke-width":"2",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:26.694671625540145,height:10.785347426775834,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"26.694671625540145",height:"10.785347426775834",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -26.694671625540145 10.785347426775834 L 26.694671625540145 -10.785347426775834M -26.694671625540145 21.570694853551668 L 53.38934325108029 -10.785347426775834M 0 21.570694853551668 L 53.38934325108029 0","stroke-width":"3",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:17.882916499714003,height:12.062179485039053,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"17.882916499714003",height:"12.062179485039053",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -17.882916499714003 12.062179485039053 L 17.882916499714003 -12.062179485039053M -17.882916499714003 24.124358970078106 L 35.76583299942801 -12.062179485039053M 0 24.124358970078106 L 35.76583299942801 0","stroke-width":"4",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:14.142135623730951,height:14.14213562373095,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"14.142135623730951",height:"14.14213562373095",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -14.142135623730951 14.14213562373095 L 14.142135623730951 -14.14213562373095M -14.142135623730951 28.2842712474619 L 28.284271247461902 -14.14213562373095M 0 28.2842712474619 L 28.284271247461902 0","stroke-width":"5",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:12.062179485039053,height:17.882916499714003,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"12.062179485039053",height:"17.882916499714003",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -12.062179485039053 17.882916499714003 L 12.062179485039053 -17.882916499714003M -12.062179485039053 35.76583299942801 L 24.124358970078106 -17.882916499714003M 0 35.76583299942801 L 24.124358970078106 0","stroke-width":"6",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:10.863603774052963,height:25.593046652474495,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"10.863603774052963",height:"25.593046652474495",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -10.863603774052963 25.593046652474495 L 10.863603774052963 -25.593046652474495M -10.863603774052963 51.18609330494899 L 21.727207548105927 -25.593046652474495M 0 51.18609330494899 L 21.727207548105927 0","stroke-width":"7",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:10.187166949552141,height:52.40843064167844,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"10.187166949552141",height:"52.40843064167844",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -10.187166949552141 52.40843064167844 L 10.187166949552141 -52.40843064167844M -10.187166949552141 104.81686128335689 L 20.374333899104283 -52.40843064167844M 0 104.81686128335689 L 20.374333899104283 0","stroke-width":"8",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:10,height:10,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"10",height:"10",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 0 L 0 10M 10 0 L 10 10","stroke-width":"9",stroke:""+textureColor,"stroke-linecap":"square"}}]}],diverging_split:[{attributes:{width:10.35276180410083,height:38.63703305156273,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"10.35276180410083",height:"38.63703305156273",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 -38.63703305156273 L 20.70552360820166 38.63703305156273M -10.35276180410083 -38.63703305156273 L 10.35276180410083 38.63703305156273M -10.35276180410083 0 L 10.35276180410083 77.27406610312546","stroke-width":"9",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:11.547005383792516,height:20.000000000000004,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"11.547005383792516",height:"20.000000000000004",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 -20.000000000000004 L 23.094010767585033 20.000000000000004M -11.547005383792516 -20.000000000000004 L 11.547005383792516 20.000000000000004M -11.547005383792516 0 L 11.547005383792516 40.00000000000001","stroke-width":"7",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:14.142135623730951,height:14.142135623730951,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"14.142135623730951",height:"14.142135623730951",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 -14.142135623730951 L 28.284271247461902 14.142135623730951M -14.142135623730951 -14.142135623730951 L 14.142135623730951 14.142135623730951M -14.142135623730951 0 L 14.142135623730951 28.284271247461902","stroke-width":"5",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:20.000000000000004,height:11.547005383792516,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"20.000000000000004",height:"11.547005383792516",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 -11.547005383792516 L 40.00000000000001 11.547005383792516M -20.000000000000004 -11.547005383792516 L 20.000000000000004 11.547005383792516M -20.000000000000004 0 L 20.000000000000004 23.094010767585033","stroke-width":"3",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:38.63703305156273,height:10.35276180410083,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"38.63703305156273",height:"10.35276180410083",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 -10.35276180410083 L 77.27406610312546 10.35276180410083M -38.63703305156273 -10.35276180410083 L 38.63703305156273 10.35276180410083M -38.63703305156273 0 L 38.63703305156273 20.70552360820166","stroke-width":"1",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:38.63703305156273,height:10.35276180410083,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"38.63703305156273",height:"10.35276180410083",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -38.63703305156273 10.35276180410083 L 38.63703305156273 -10.35276180410083M -38.63703305156273 20.70552360820166 L 77.27406610312546 -10.35276180410083M 0 20.70552360820166 L 77.27406610312546 0","stroke-width":"1",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:20.000000000000004,height:11.547005383792515,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"20.000000000000004",height:"11.547005383792515",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -20.000000000000004 11.547005383792515 L 20.000000000000004 -11.547005383792515M -20.000000000000004 23.09401076758503 L 40.00000000000001 -11.547005383792515M 0 23.09401076758503 L 40.00000000000001 0","stroke-width":"3",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:14.142135623730951,height:14.14213562373095,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"14.142135623730951",height:"14.14213562373095",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -14.142135623730951 14.14213562373095 L 14.142135623730951 -14.14213562373095M -14.142135623730951 28.2842712474619 L 28.284271247461902 -14.14213562373095M 0 28.2842712474619 L 28.284271247461902 0","stroke-width":"5",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:11.547005383792516,height:20.000000000000004,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"11.547005383792516",height:"20.000000000000004",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -11.547005383792516 20.000000000000004 L 11.547005383792516 -20.000000000000004M -11.547005383792516 40.00000000000001 L 23.094010767585033 -20.000000000000004M 0 40.00000000000001 L 23.094010767585033 0","stroke-width":"7",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:10.35276180410083,height:38.637033051562696,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"10.35276180410083",height:"38.637033051562696",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -10.35276180410083 38.637033051562696 L 10.35276180410083 -38.637033051562696M -10.35276180410083 77.27406610312539 L 20.70552360820166 -38.637033051562696M 0 77.27406610312539 L 20.70552360820166 0","stroke-width":"9",stroke:""+textureColor,"stroke-linecap":"square"}}]}],diverging_center:[{attributes:{width:12.423314164920995,height:46.36443966187528,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"12.423314164920995",height:"46.36443966187528",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 -46.36443966187528 L 24.84662832984199 46.36443966187528M -12.423314164920995 -46.36443966187528 L 12.423314164920995 46.36443966187528M -12.423314164920995 0 L 12.423314164920995 92.72887932375056","stroke-width":"11",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:13.85640646055102,height:24.000000000000004,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"13.85640646055102",height:"24.000000000000004",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 -24.000000000000004 L 27.71281292110204 24.000000000000004M -13.85640646055102 -24.000000000000004 L 13.85640646055102 24.000000000000004M -13.85640646055102 0 L 13.85640646055102 48.00000000000001","stroke-width":"9",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:16.970562748477143,height:16.970562748477143,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"16.970562748477143",height:"16.970562748477143",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 -16.970562748477143 L 33.941125496954285 16.970562748477143M -16.970562748477143 -16.970562748477143 L 16.970562748477143 16.970562748477143M -16.970562748477143 0 L 16.970562748477143 33.941125496954285","stroke-width":"7",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:24.000000000000004,height:13.85640646055102,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"24.000000000000004",height:"13.85640646055102",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 -13.85640646055102 L 48.00000000000001 13.85640646055102M -24.000000000000004 -13.85640646055102 L 24.000000000000004 13.85640646055102M -24.000000000000004 0 L 24.000000000000004 27.71281292110204","stroke-width":"5",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:46.36443966187528,height:12.423314164920995,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"46.36443966187528",height:"12.423314164920995",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 -12.423314164920995 L 92.72887932375056 12.423314164920995M -46.36443966187528 -12.423314164920995 L 46.36443966187528 12.423314164920995M -46.36443966187528 0 L 46.36443966187528 24.84662832984199","stroke-width":"3",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:12,height:12,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"12",height:"12",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M 0 0 L 12 0M 0 12 L 12 12","stroke-width":"1",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:46.36443966187528,height:12.423314164920995,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"46.36443966187528",height:"12.423314164920995",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -46.36443966187528 12.423314164920995 L 46.36443966187528 -12.423314164920995M -46.36443966187528 24.84662832984199 L 92.72887932375056 -12.423314164920995M 0 24.84662832984199 L 92.72887932375056 0","stroke-width":"3",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:24.000000000000004,height:13.856406460551018,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"24.000000000000004",height:"13.856406460551018",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -24.000000000000004 13.856406460551018 L 24.000000000000004 -13.856406460551018M -24.000000000000004 27.712812921102035 L 48.00000000000001 -13.856406460551018M 0 27.712812921102035 L 48.00000000000001 0","stroke-width":"5",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:16.970562748477143,height:16.97056274847714,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"16.970562748477143",height:"16.97056274847714",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -16.970562748477143 16.97056274847714 L 16.970562748477143 -16.97056274847714M -16.970562748477143 33.94112549695428 L 33.941125496954285 -16.97056274847714M 0 33.94112549695428 L 33.941125496954285 0","stroke-width":"7",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:13.85640646055102,height:24.000000000000004,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"13.85640646055102",height:"24.000000000000004",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -13.85640646055102 24.000000000000004 L 13.85640646055102 -24.000000000000004M -13.85640646055102 48.00000000000001 L 27.71281292110204 -24.000000000000004M 0 48.00000000000001 L 27.71281292110204 0","stroke-width":"9",stroke:""+textureColor,"stroke-linecap":"square"}}]},{attributes:{width:12.423314164920995,height:46.36443966187523,patternUnits:"userSpaceOnUse",id:""+id,class:"VCL-texture-pattern"},children:[{name:"rect",attributes:{width:"12.423314164920995",height:"46.36443966187523",fill:""+fillColor,stroke:"rgba(255, 0, 0, 0.1)","stroke-width":"0"}},{name:"path",attributes:{d:"M -12.423314164920995 46.36443966187523 L 12.423314164920995 -46.36443966187523M -12.423314164920995 92.72887932375046 L 24.84662832984199 -46.36443966187523M 0 92.72887932375046 L 24.84662832984199 0","stroke-width":"11",stroke:""+textureColor,"stroke-linecap":"square"}}]}]}[scheme][index]}var prepareStrokeColorsFromScheme=function(color,i,colorArray,scheme){var fillColor=colorArray[0],textureColor=colorArray[colorArray.length-1],textureScheme="categorical"!==scheme&&scheme?"sequential"===scheme?"sequential":colorArray.length%2?"diverging_center":"diverging_split":"categorical";if("categorical"===textureScheme)textureColor=getContrastingStroke(color),fillColor=color;else if("sequential"!==textureScheme)if(textureScheme.includes("center")){var firstHalfIndex=(colorArray.length-1)/2-1,secondHalfIndex=firstHalfIndex+1+1;i<=firstHalfIndex?(textureColor=colorArray[0],fillColor=colorArray[firstHalfIndex]):i>=secondHalfIndex?(textureColor=colorArray[colorArray.length-1],fillColor=colorArray[secondHalfIndex]):(textureColor=getContrastingStroke(color),fillColor=color)}else{var topHalfIndex=colorArray.length/2;i<topHalfIndex?(textureColor=colorArray[0],fillColor=colorArray[topHalfIndex-1]):(textureColor=colorArray[colorArray.length-1],fillColor=colorArray[topHalfIndex])}return{fillColor:fillColor,textureColor:textureColor,textureScheme:textureScheme}},createTextStrokeFilter=function(_a){var root=_a.root,id=_a.id,color=_a.color,strokeSizeOverride=_a.strokeSizeOverride,sanitizedColor="#"===color[0]?color.substr(1):color,s=((strokeSizeOverride||"")+"").replace(".","p"),strokeClass="VCL-t-s-f-"+sanitizedColor+s,strokeId=strokeClass+id+s,filter=select$4(root).select("."+strokeClass);if(filter.size())filter.attr("id",strokeId);else{var defs=select$4(root).select("defs");defs.size()||(defs=select$4(root).append("defs")),(filter=defs.append("filter").attr("id",strokeId).attr("class",strokeClass)).append("feMorphology").attr("in","SourceAlpha").attr("result","dilatedText").attr("operator","dilate").attr("radius",strokeSizeOverride||1.5),filter.append("feFlood").attr("flood-color",color||"#ffffff").attr("flood-opacity",1).attr("result","whiteTextFlood"),filter.append("feComposite").attr("in","whiteTextFlood").attr("in2","dilatedText").attr("operator","in").attr("result","textOutline");var merge=filter.append("feMerge");merge.append("feMergeNode").attr("in","textOutline"),strokeSizeOverride||(merge.append("feMergeNode").attr("in","textOutline"),merge.append("feMergeNode").attr("in","textOutline")),merge.append("feMergeNode").attr("in","SourceGraphic")}return createUrl(strokeId)},createMultiStrokeFilter=function(_a){var root=_a.root,id=_a.id,state=_a.state,fillColor=_a.fillColor,strokeWidth=_a.strokeWidth,forceStrokeColor=_a.forceStrokeColor,includeOuterStroke=_a.includeOuterStroke,strokeOnHover=_a.strokeOnHover,alwaysShowStroke=_a.alwaysShowStroke,stacked=_a.stacked,rootDefs=select$4(root).select("defs"),strokes=getAccessibleStrokes(fillColor),primaryStroke="hover"===state&&!strokeOnHover||1!==strokes.length&&"click"!==state?fillColor:strokes[0],cleanupStroke=fillColor,edgeStroke=strokes[1]||"",outerStroke=includeOuterStroke?"#ffffff":"",filterId="VCL-filter-"+("#"===primaryStroke[0]?primaryStroke.substring(1):primaryStroke)+"-"+state+"-"+id;rootDefs.select("#"+filterId).size()&&rootDefs.select("#"+filterId).remove();var filter=rootDefs.append("filter").attr("id",filterId).attr("class","VCL-accessibility-stroke-filter"),data=createFilterData("hover"!==state&&forceStrokeColor?forceStrokeColor:primaryStroke,cleanupStroke,primaryStroke!==fillColor||"hover"===state||alwaysShowStroke?strokeWidth:0,outerStroke,edgeStroke,stacked?.5:0);data.forEach((function(filterComposite){filter.append("feMorphology").attr("in","SourceAlpha").attr("operator",filterComposite.operator).attr("radius",filterComposite.radius).attr("result",filterComposite.result?filterComposite.result+"-morph":"morph-"+filterComposite.operator+"-"+filterComposite.radius),filterComposite.color&&filter.append("feFlood").attr("flood-color",filterComposite.color).attr("result",filterComposite.result+"-color"),filter.append("feComposite").attr("in",filterComposite.result?filterComposite.result+"-color":"SourceGraphic").attr("in2",filterComposite.result?filterComposite.result+"-morph":"morph-"+filterComposite.operator+"-"+filterComposite.radius).attr("operator","in").attr("result",filterComposite.result?filterComposite.result+"-stroke":"fill")}));var feMerge=filter.append("feMerge");return data.forEach((function(filterComposite){feMerge.append("feMergeNode").attr("in",filterComposite.result?filterComposite.result+"-stroke":"fill")})),createUrl(filterId)},createFilterData=function(primary,clean,strokeWidth,outside,edge,adjustForStack){var output=[],browser=getBrowser(),mod="IE"!==browser&&"Edge"!==browser?0:1,strokeStart="Safari"!==browser?mod:.1;return outside&&output.push({color:outside,result:"outside",operator:adjustForStack?"erode":"dilate",radius:adjustForStack?0:1}),edge&&(strokeStart++,output.push({color:edge,result:"edge",operator:"erode",radius:mod+adjustForStack})),output.push({color:primary,result:"primary",operator:"erode",radius:strokeStart+adjustForStack}),output.push({color:clean,result:"clean",operator:"erode",radius:strokeStart+strokeWidth+adjustForStack}),output.push({operator:"erode",radius:strokeStart+strokeWidth+1+adjustForStack}),output},applyDefaults=function(selection,className){selection.attr("class",className+"-highlight "+className+"-hover").attr("focusable",!1).attr("aria-label",null).attr("aria-hidden",!0).attr("role",null).style("pointer-events","none").attr("tabindex",null).attr("mix-blend-mode",null).style("mix-blend-mode",null)},applyOutlineOverride=function(selection,extraStrokeWidth,url,buffer,dash){selection.style("stroke-linecap","butt").style("outline-offset","0px").style("outline-color","none").style("outline-width","0px").attr("fill","none").style("fill","none").style("stroke-opacity",1).attr("marker-start",null).attr("marker-end",null).attr("filter",null).attr("stroke-dasharray",dash?"8 6":null).attr("clip-path",url).style("stroke-width",(function(_,i,n){var scaleIndex=select$4(n[i]).attr("transform")?select$4(n[i]).attr("transform").indexOf("scale"):-1,scale=1;if(scaleIndex>-1){var scaleSubstring=select$4(n[i]).attr("transform").substring(scaleIndex+6),endSubstring=scaleSubstring.indexOf(",")<scaleSubstring.indexOf(")")&&-1!==scaleSubstring.indexOf(",")?scaleSubstring.indexOf(","):scaleSubstring.indexOf(")");scale=+scaleSubstring.substring(0,endSubstring)}return((buffer?2:0)+2*extraStrokeWidth)/scale+"px"}))},createId=function(id,key){return id+"-"+((key instanceof Date?key.getTime():key)+"").replace(/\W/g,"-")};function checkInteraction(d,default_op,hover_op,hoverHighlight,clickHighlight,interactionKeys){var elementOpacity=0===default_op?0:hover_op,matchClick=checkClicked(d,clickHighlight,interactionKeys),matchHover=checkHovered(d,hoverHighlight,interactionKeys);return matchHover||matchClick?elementOpacity=default_op:hoverHighlight&&!matchHover||0!==clickHighlight.length&&!matchClick||(elementOpacity=default_op),elementOpacity}function checkHovered(d,hoverHighlight,interactionKeys){var datum=d&&d.data&&d.data.data?d.data.data:d&&d.data?d.data:d||{},matchHover=0;return hoverHighlight&&interactionKeys.map((function(key){hoverHighlight[key]instanceof Date&&datum[key]instanceof Date?hoverHighlight[key].getTime()===datum[key].getTime()&&matchHover++:hoverHighlight[key]===datum[key]&&matchHover++})),interactionKeys&&interactionKeys.length&&matchHover===interactionKeys.length}function checkClicked(d,clickHighlight,interactionKeys){var clickedCheck=!1,datum=d&&d.data&&d.data.data?d.data.data:d&&d.data?d.data:d||{};if(clickHighlight&&clickHighlight.length)for(var _loop_1=function(i){var matchedClick=0;if(interactionKeys.map((function(key){clickHighlight[i][key]instanceof Date&&datum[key]instanceof Date?clickHighlight[i][key].getTime()===datum[key].getTime()&&matchedClick++:clickHighlight[i][key]===datum[key]&&matchedClick++})),matchedClick===interactionKeys.length)return clickedCheck=!0,"break"},i=0;i<clickHighlight.length;i++){if("break"===_loop_1(i))break}return interactionKeys&&interactionKeys.length&&clickedCheck}function formatDataLabel(d,labelAccessor,format,normalized){var modifier=normalized&&0!==d.getSum()?d.getSum():1;return"text"===format||"string"===format?d[labelAccessor]:format?formatStats(d[labelAccessor]/modifier,"normalized"===format?"0[.][0]%":format):d[labelAccessor]/modifier}var noop$8={value:function(){}};function dispatch$5(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch$5(_)}function Dispatch$5(_){this._=_}function get$b(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set$a(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop$8,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch$5.prototype=dispatch$5.prototype={constructor:Dispatch$5,on:function(typename,callback){var t,_=this._,T=function parseTypenames$a(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}}))}(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set$a(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set$a(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get$b(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch$5(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var taskHead$2,taskTail$2,frame$2=0,timeout$5=0,interval$3=0,pokeDelay$2=1e3,clockLast$2=0,clockNow$2=0,clockSkew$2=0,clock$2="object"==typeof performance&&performance.now?performance:Date,setFrame$2="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now$2(){return clockNow$2||(setFrame$2(clearNow$2),clockNow$2=clock$2.now()+clockSkew$2)}function clearNow$2(){clockNow$2=0}function Timer$2(){this._call=this._time=this._next=null}function timer$2(callback,delay,time){var t=new Timer$2;return t.restart(callback,delay,time),t}function wake$2(){clockNow$2=(clockLast$2=clock$2.now())+clockSkew$2,frame$2=timeout$5=0;try{!function timerFlush$2(){now$2(),++frame$2;for(var e,t=taskHead$2;t;)(e=clockNow$2-t._time)>=0&&t._call.call(null,e),t=t._next;--frame$2}()}finally{frame$2=0,function nap$2(){var t0,t2,t1=taskHead$2,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead$2=t2);taskTail$2=t0,sleep$2(time)}(),clockNow$2=0}}function poke$3(){var now=clock$2.now(),delay=now-clockLast$2;delay>pokeDelay$2&&(clockSkew$2-=delay,clockLast$2=now)}function sleep$2(time){frame$2||(timeout$5&&(timeout$5=clearTimeout(timeout$5)),time-clockNow$2>24?(time<1/0&&(timeout$5=setTimeout(wake$2,time-clock$2.now()-clockSkew$2)),interval$3&&(interval$3=clearInterval(interval$3))):(interval$3||(clockLast$2=clock$2.now(),interval$3=setInterval(poke$3,pokeDelay$2)),frame$2=1,setFrame$2(wake$2)))}function timeout$4(callback,delay,time){var t=new Timer$2;return delay=null==delay?0:+delay,t.restart((function(elapsed){t.stop(),callback(elapsed+delay)}),delay,time),t}Timer$2.prototype=timer$2.prototype={constructor:Timer$2,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now$2():+time)+(null==delay?0:+delay),this._next||taskTail$2===this||(taskTail$2?taskTail$2._next=this:taskHead$2=this,taskTail$2=this),this._call=callback,this._time=time,sleep$2()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep$2())}};var emptyOn$3=dispatch$5("start","end","interrupt"),emptyTween$3=[],CREATED$3=0,SCHEDULED$3=1,STARTING$3=2,STARTED$3=3,RUNNING$3=4,ENDING$3=5,ENDED$3=6;function schedule$3(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function create$4(node,id,self){var tween,schedules=node.__transition;function schedule(elapsed){self.state=SCHEDULED$3,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(self.state!==SCHEDULED$3)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(o.state===STARTED$3)return timeout$4(start);o.state===RUNNING$3?(o.state=ENDED$3,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=ENDED$3,o.timer.stop(),delete schedules[i])}if(timeout$4((function(){self.state===STARTED$3&&(self.state=RUNNING$3,self.timer.restart(tick,self.delay,self.time),tick(elapsed))})),self.state=STARTING$3,self.on.call("start",node,node.__data__,self.index,self.group),self.state===STARTING$3){for(self.state=STARTED$3,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=ENDING$3,1),i=-1,n=tween.length;++i<n;)tween[i].call(null,t);self.state===ENDING$3&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=ENDED$3,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer$2(schedule,0,self.time)}(node,id,{name:name,index:index,group:group,on:emptyOn$3,tween:emptyTween$3,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:CREATED$3})}function init$3(node,id){var schedule=get$a(node,id);if(schedule.state>CREATED$3)throw new Error("too late; already scheduled");return schedule}function set$9(node,id){var schedule=get$a(node,id);if(schedule.state>STARTING$3)throw new Error("too late; already started");return schedule}function get$a(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function tweenRemove$3(id,name){var tween0,tween1;return function(){var schedule=set$9(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction$3(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=set$9(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name:name,value:value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue$3(transition,name,value){var id=transition._id;return transition.each((function(){var schedule=set$9(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)})),function(node){return get$a(node,id).value[name]}}function interpolate$4(a,b){var c;return("number"==typeof b?interpolateNumber$1:b instanceof color?interpolateRgb$1:(c=color(b))?(b=c,interpolateRgb$1):interpolateString$1)(a,b)}function attrRemove$8(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$8(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$8(name,interpolate,value1){var value00,interpolate0;return function(){var value0=this.getAttribute(name);return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate(value00=value0,value1)}}function attrConstantNS$8(fullname,interpolate,value1){var value00,interpolate0;return function(){var value0=this.getAttributeNS(fullname.space,fullname.local);return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate(value00=value0,value1)}}function attrFunction$8(name,interpolate,value){var value00,value10,interpolate0;return function(){var value0,value1=value(this);if(null!=value1)return(value0=this.getAttribute(name))===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate(value00=value0,value10=value1);this.removeAttribute(name)}}function attrFunctionNS$8(fullname,interpolate,value){var value00,value10,interpolate0;return function(){var value0,value1=value(this);if(null!=value1)return(value0=this.getAttributeNS(fullname.space,fullname.local))===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate(value00=value0,value10=value1);this.removeAttributeNS(fullname.space,fullname.local)}}function attrTweenNS$3(fullname,value){function tween(){var node=this,i=value.apply(node,arguments);return i&&function(t){node.setAttributeNS(fullname.space,fullname.local,i(t))}}return tween._value=value,tween}function attrTween$3(name,value){function tween(){var node=this,i=value.apply(node,arguments);return i&&function(t){node.setAttribute(name,i(t))}}return tween._value=value,tween}function delayFunction$3(id,value){return function(){init$3(this,id).delay=+value.apply(this,arguments)}}function delayConstant$3(id,value){return value=+value,function(){init$3(this,id).delay=value}}function durationFunction$3(id,value){return function(){set$9(this,id).duration=+value.apply(this,arguments)}}function durationConstant$3(id,value){return value=+value,function(){set$9(this,id).duration=value}}var Selection$8=selection$2.prototype.constructor;var id$3=0;function Transition$3(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function transition$1(name){return selection$2().transition(name)}function newId$3(){return++id$3}var selection_prototype$3=selection$2.prototype;function cubicInOut$2(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Transition$3.prototype=transition$1.prototype={constructor:Transition$3,select:function transition_select$3(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selector$5(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,schedule$3(subgroup[i],name,id,i,subgroup,get$a(node,id)));return new Transition$3(subgroups,this._parents,name,id)},selectAll:function transition_selectAll$3(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll$5(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=get$a(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule$3(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new Transition$3(subgroups,parents,name,id)},filter:function transition_filter$3(match){"function"!=typeof match&&(match=matcher$6(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Transition$3(subgroups,this._parents,this._name,this._id)},merge:function transition_merge$3(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Transition$3(merges,this._parents,this._name,this._id)},selection:function transition_selection$3(){return new Selection$8(this._groups,this._parents)},transition:function transition_transition$3(){for(var name=this._name,id0=this._id,id1=newId$3(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=get$a(node,id0);schedule$3(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition$3(groups,this._parents,name,id1)},call:selection_prototype$3.call,nodes:selection_prototype$3.nodes,node:selection_prototype$3.node,size:selection_prototype$3.size,empty:selection_prototype$3.empty,each:selection_prototype$3.each,on:function transition_on$3(name,listener){var id=this._id;return arguments.length<2?get$a(this.node(),id).on.on(name):this.each(function onFunction$3(id,name,listener){var on0,on1,sit=function start$4(name){return(name+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(name)?init$3:set$9;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}(id,name,listener))},attr:function transition_attr$3(name,value){var fullname=namespace$5(name),i="transform"===fullname?interpolateTransformSvg$2:interpolate$4;return this.attrTween(name,"function"==typeof value?(fullname.local?attrFunctionNS$8:attrFunction$8)(fullname,i,tweenValue$3(this,"attr."+name,value)):null==value?(fullname.local?attrRemoveNS$8:attrRemove$8)(fullname):(fullname.local?attrConstantNS$8:attrConstant$8)(fullname,i,value+""))},attrTween:function transition_attrTween$3(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace$5(name);return this.tween(key,(fullname.local?attrTweenNS$3:attrTween$3)(fullname,value))},style:function transition_style$3(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss$2:interpolate$4;return null==value?this.styleTween(name,function styleRemove$8(name,interpolate){var value00,value10,interpolate0;return function(){var value0=styleValue$5(this,name),value1=(this.style.removeProperty(name),styleValue$5(this,name));return value0===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate(value00=value0,value10=value1)}}(name,i)).on("end.style."+name,function styleRemoveEnd$1(name){return function(){this.style.removeProperty(name)}}(name)):this.styleTween(name,"function"==typeof value?function styleFunction$8(name,interpolate,value){var value00,value10,interpolate0;return function(){var value0=styleValue$5(this,name),value1=value(this);return null==value1&&(this.style.removeProperty(name),value1=styleValue$5(this,name)),value0===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate(value00=value0,value10=value1)}}(name,i,tweenValue$3(this,"style."+name,value)):function styleConstant$8(name,interpolate,value1){var value00,interpolate0;return function(){var value0=styleValue$5(this,name);return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate(value00=value0,value1)}}(name,i,value+""),priority)},styleTween:function transition_styleTween$3(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,function styleTween$3(name,value,priority){function tween(){var node=this,i=value.apply(node,arguments);return i&&function(t){node.style.setProperty(name,i(t),priority)}}return tween._value=value,tween}(name,value,null==priority?"":priority))},text:function transition_text$3(value){return this.tween("text","function"==typeof value?function textFunction$8(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue$3(this,"text",value)):function textConstant$8(value){return function(){this.textContent=value}}(null==value?"":value+""))},remove:function transition_remove$3(){return this.on("end.remove",function removeFunction$3(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}}(this._id))},tween:function transition_tween$3(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=get$a(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove$3:tweenFunction$3)(id,name,value))},delay:function transition_delay$3(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction$3:delayConstant$3)(id,value)):get$a(this.node(),id).delay},duration:function transition_duration$3(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction$3:durationConstant$3)(id,value)):get$a(this.node(),id).duration},ease:function transition_ease$3(value){var id=this._id;return arguments.length?this.each(function easeConstant$3(id,value){if("function"!=typeof value)throw new Error;return function(){set$9(this,id).ease=value}}(id,value)):get$a(this.node(),id).ease}};function tpmt$1(x){return 1.0009775171065494*(Math.pow(2,-10*x)-.0009765625)}function circleIn$1(t){return 1-Math.sqrt(1-t*t)}!function custom(e){function polyIn(t){return Math.pow(t,e)}return e=+e,polyIn.exponent=custom,polyIn}(3),function custom(e){function polyOut(t){return 1-Math.pow(1-t,e)}return e=+e,polyOut.exponent=custom,polyOut}(3),function custom(e){function polyInOut(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,polyInOut.exponent=custom,polyInOut}(3);!function custom(s){function backIn(t){return(t=+t)*t*(s*(t-1)+t)}return s=+s,backIn.overshoot=custom,backIn}(1.70158),function custom(s){function backOut(t){return--t*t*((t+1)*s+t)+1}return s=+s,backOut.overshoot=custom,backOut}(1.70158),function custom(s){function backInOut(t){return((t*=2)<1?t*t*((s+1)*t-s):(t-=2)*t*((s+1)*t+s)+2)/2}return s=+s,backInOut.overshoot=custom,backInOut}(1.70158);var tau$8=2*Math.PI;!function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau$8);function elasticIn(t){return a*tpmt$1(- --t)*Math.sin((s-t)/p)}return elasticIn.amplitude=function(a){return custom(a,p*tau$8)},elasticIn.period=function(p){return custom(a,p)},elasticIn}(1,.3),function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau$8);function elasticOut(t){return 1-a*tpmt$1(t=+t)*Math.sin((t+s)/p)}return elasticOut.amplitude=function(a){return custom(a,p*tau$8)},elasticOut.period=function(p){return custom(a,p)},elasticOut}(1,.3),function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau$8);function elasticInOut(t){return((t=2*t-1)<0?a*tpmt$1(-t)*Math.sin((s-t)/p):2-a*tpmt$1(t)*Math.sin((s+t)/p))/2}return elasticInOut.amplitude=function(a){return custom(a,p*tau$8)},elasticInOut.period=function(p){return custom(a,p)},elasticInOut}(1,.3);var defaultTiming$3={time:null,delay:0,duration:250,ease:cubicInOut$2};function inherit$3(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))return defaultTiming$3.time=now$2(),defaultTiming$3;return timing}selection$2.prototype.interrupt=function selection_interrupt$3(name){return this.each((function(){!function interrupt$3(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>STARTING$3&&schedule.state<ENDING$3,schedule.state=ENDED$3,schedule.timer.stop(),active&&schedule.on.call("interrupt",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}}(this,name)}))},selection$2.prototype.transition=function selection_transition$3(name){var id,timing;name instanceof Transition$3?(id=name._id,name=name._name):(id=newId$3(),(timing=defaultTiming$3).time=now$2(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule$3(node,name,id,i,group,timing||inherit$3(node,id));return new Transition$3(groups,this._parents,name,id)};var scale,hideAxisPath,drawTooltip=function(_a){var root=_a.root,data=_a.data,event=_a.event,isToShow=_a.isToShow,tooltipLabel=_a.tooltipLabel,dataKeyNames=_a.dataKeyNames,xAxis=_a.xAxis,yAxis=_a.yAxis,dataLabel=_a.dataLabel,layout=_a.layout,ordinalAccessor=_a.ordinalAccessor,valueAccessor=_a.valueAccessor,xAccessor=_a.xAccessor,yAccessor=_a.yAccessor,groupAccessor=_a.groupAccessor,sizeConfig=_a.sizeConfig,diffLabelDetails=_a.diffLabelDetails,normalized=_a.normalized,chartType=_a.chartType;root&&(isToShow?function(){var positions=[event.pageX,event.pageY],tooltipContent=function(_a){var data=_a.data,tooltipLabel=_a.tooltipLabel,dataKeyNames=_a.dataKeyNames,xAxis=_a.xAxis,yAxis=_a.yAxis,dataLabel=_a.dataLabel,layout=_a.layout,ordinalAccessor=_a.ordinalAccessor,valueAccessor=_a.valueAccessor,xAccessor=_a.xAccessor,yAccessor=_a.yAccessor,groupAccessor=_a.groupAccessor,sizeConfig=_a.sizeConfig,diffLabelDetails=_a.diffLabelDetails,normalized=_a.normalized,chartType=_a.chartType;if(tooltipLabel&&tooltipLabel.labelAccessor.length>0){var labelStr_1="";return tooltipLabel.labelAccessor.map((function(k,i){var title=tooltipLabel.labelTitle&&""!==tooltipLabel.labelTitle[i]?tooltipLabel.labelTitle[i]+": ":dataKeyNames&&dataKeyNames[k]?dataKeyNames[k]+": ":"";labelStr_1+=title+"<b>"+(tooltipLabel.format&&tooltipLabel.format[i]?data[k]instanceof Date?formatDate$1({date:data[k],format:tooltipLabel.format[i],offsetTimezone:!0}):normalized&&"normalized"===tooltipLabel.format[i]?formatDataLabel(data,k,dataLabel.format,k===valueAccessor):isNaN(parseFloat(data[k]))?data[k]:formatStats(data[k],tooltipLabel.format[i]):data[k])+" </b><br/>"})),labelStr_1.replace(",",""),labelStr_1}var defaultLabel="",firstTitle=xAxis&&yAxis&&xAccessor||ordinalAccessor,secondTitle=xAxis&&yAxis&&yAccessor||valueAccessor,thirdTitle=sizeConfig?sizeConfig.sizeAccessor:"",firstTitleMapped=dataKeyNames&&dataKeyNames[firstTitle]?dataKeyNames[firstTitle]:xAxis&&yAxis?"horizontal"===layout?yAxis.label:xAxis.label:firstTitle,secondTitleMapped=dataKeyNames&&dataKeyNames[secondTitle]?dataKeyNames[secondTitle]:xAxis&&yAxis?"horizontal"===layout?xAxis.label:yAxis.label:secondTitle,thirdTitleMapped=dataKeyNames&&dataKeyNames[thirdTitle]?dataKeyNames[thirdTitle]:thirdTitle,percentageTitleMapped=dataKeyNames&&dataKeyNames[secondTitle+"%"]?dataKeyNames[secondTitle+"%"]:void 0;return"bar"===chartType?defaultLabel="\n      <b>"+(groupAccessor&&data[groupAccessor]?data[groupAccessor]+"<br/>":"")+" </b>\n      "+capitalized(firstTitleMapped)+": <b>"+data[ordinalAccessor]+" </b><br/> \n        "+capitalized(secondTitleMapped)+":\n        <b>"+formatStats(data[valueAccessor],dataLabel.format)+"</b>":"pie"===chartType?defaultLabel="\n        "+capitalized(firstTitleMapped)+": <b>"+data[ordinalAccessor]+" </b><br/> \n        "+(normalized?percentageTitleMapped?capitalized(percentageTitleMapped)+": <b>"+formatDataLabel(data,valueAccessor,"0[.][0]%",normalized)+"</b><br/>":capitalized(secondTitleMapped)+" (%): <b>"+formatDataLabel(data,valueAccessor,"0[.][0]%",normalized)+"</b><br/>":"")+"\n        "+capitalized(secondTitleMapped)+": \n        <b>"+formatStats(data[valueAccessor],"normalized"===dataLabel.format?"0[.][0]a":dataLabel.format)+"</b>\n      ":"scatter"===chartType?defaultLabel="\n        <b>"+(groupAccessor&&data[groupAccessor]?data[groupAccessor]+"<br/>":"")+" </b>\n        "+capitalized(firstTitleMapped)+": \n        <b>"+formatStats(data[xAccessor],xAxis.format||"")+" </b><br/>\n        "+capitalized(secondTitleMapped)+": \n        <b>"+formatStats(data[yAccessor],yAxis.format||"")+"</b>\n        "+(sizeConfig&&sizeConfig.sizeAccessor?"<br/>"+capitalized(thirdTitleMapped)+":":"")+" \n        "+(sizeConfig&&sizeConfig.sizeAccessor?"<b>"+formatStats(data[sizeConfig.sizeAccessor],sizeConfig.format||dataLabel.format||"")+"</b>":""):"line"===chartType||"parallel"===chartType?defaultLabel="\n        <b>"+(groupAccessor&&data[groupAccessor]?data[groupAccessor]+"<br/>":"")+"</b>\n        "+capitalized(firstTitleMapped)+": \n        <b>"+(data[ordinalAccessor]instanceof Date?formatDate$1({date:data[ordinalAccessor],format:xAxis.format,offsetTimezone:!0}):data[ordinalAccessor])+" </b><br/>\n        "+capitalized(secondTitleMapped)+": \n        <b>"+formatStats(data[valueAccessor],dataLabel.format||"")+"</b>":"stacked"===chartType||"clustered"===chartType?defaultLabel="\n        <b>"+data[groupAccessor]+"<br/></b>\n        "+capitalized(firstTitleMapped)+": \n        <b>"+data[ordinalAccessor]+" </b><br/> \n        "+(normalized?percentageTitleMapped?capitalized(percentageTitleMapped)+": <b>"+formatDataLabel(data,valueAccessor,"0[.][0]%",normalized)+"</b><br/>":capitalized(secondTitleMapped)+" (%): <b>"+formatDataLabel(data,valueAccessor,"0[.][0]%",normalized)+"</b><br/>":"")+"\n        "+capitalized(secondTitleMapped)+": \n        <b>"+formatStats(data[valueAccessor],"normalized"===dataLabel.format?"0[.][0]a":dataLabel.format)+"</b>\n      ":"heat-map"===chartType?defaultLabel="\n        "+capitalized(firstTitleMapped)+": \n        <b>"+(data[xAccessor]instanceof Date?formatDate$1({date:data[xAccessor],format:xAxis.format,offsetTimezone:!0}):data[xAccessor])+" </b><br/>\n        "+capitalized(secondTitleMapped)+": \n        <b>"+(data[yAccessor]instanceof Date?formatDate$1({date:data[yAccessor],format:yAxis.format,offsetTimezone:!0}):data[yAccessor])+" </b><br/>\n        "+capitalized(dataKeyNames&&dataKeyNames[valueAccessor]?dataKeyNames[valueAccessor]:valueAccessor)+":\n        <b>"+formatStats(data[valueAccessor],dataLabel.format||"")+"</b>":"circle-packing"===chartType?defaultLabel="\n        <b>"+capitalized(data[ordinalAccessor])+" </b><br/>\n        "+capitalized(dataKeyNames&&dataKeyNames[groupAccessor]?dataKeyNames[groupAccessor]:groupAccessor)+": <b>"+data[groupAccessor]+" </b><br/>\n        "+capitalized(dataKeyNames&&dataKeyNames[valueAccessor]?dataKeyNames[valueAccessor]:valueAccessor)+":\n        <b>"+formatStats(data[valueAccessor],dataLabel.format||"")+"</b>":"world-map"===chartType?defaultLabel="\n        <b>"+(groupAccessor&&data[groupAccessor]?data[groupAccessor]+"<br/>":"")+" </b>\n        <b>"+data[xAccessor]+" ("+data[yAccessor]+") </b><br/>\n          "+(dataKeyNames&&dataKeyNames[valueAccessor]?dataKeyNames[valueAccessor]:valueAccessor)+": \n          <b>"+formatStats(data[valueAccessor],dataLabel.format||"")+"</b>":"dumbbell"===chartType?defaultLabel=data&&data.key&&data.values?"<b>\n          "+(data.values[0][ordinalAccessor]instanceof Date?formatDate$1({date:data.values[0][ordinalAccessor],format:xAxis.format,offsetTimezone:!0}):data.values[0][ordinalAccessor])+" </b><br/>Difference: <b>"+(dataLabel.format?formatStats(data[diffLabelDetails.calculation],dataLabel.format):data[diffLabelDetails.calculation])+" <br/></b>"+data.values[0][groupAccessor]+": <b>"+(dataLabel.format?formatStats(data.values[0][valueAccessor],dataLabel.format):data.values[0][valueAccessor])+" </b><br/>"+data.values[1][groupAccessor]+": <b>"+(dataLabel.format?formatStats(data.values[1][valueAccessor],dataLabel.format):data.values[1][valueAccessor])+"</b>\n        ":"<b>\n        "+(data[ordinalAccessor]instanceof Date?formatDate$1({date:data[ordinalAccessor],format:xAxis.format,offsetTimezone:!0}):data[ordinalAccessor])+" </b><br/>"+data[groupAccessor]+": <b>"+(dataLabel.format?formatStats(data[valueAccessor],dataLabel.format):data[valueAccessor])+"</b>\n        ":"alluvial-diagram"===chartType&&(defaultLabel="\n      <b>"+(groupAccessor&&data[groupAccessor]?data[groupAccessor]+"<br/>":"")+" </b>\n      <b>"+capitalized(data[xAccessor])+"</b>  <b>"+capitalized(data[yAccessor])+" </b><br/>\n      "+capitalized(dataKeyNames&&dataKeyNames[valueAccessor]?dataKeyNames[valueAccessor]:valueAccessor)+":\n      <b>"+(dataLabel&&dataLabel.format?formatStats(data[valueAccessor],dataLabel.format):data[valueAccessor])+"</b>"),defaultLabel}({data:data,tooltipLabel:tooltipLabel,dataKeyNames:dataKeyNames,xAxis:xAxis,yAxis:yAxis,dataLabel:dataLabel,layout:layout,ordinalAccessor:ordinalAccessor,valueAccessor:valueAccessor,xAccessor:xAccessor,yAccessor:yAccessor,groupAccessor:groupAccessor,sizeConfig:sizeConfig,diffLabelDetails:diffLabelDetails,normalized:normalized,chartType:chartType}),parentBounds=root.node().parentElement.getBoundingClientRect();root.style("left","0px").style("top","0px"),root.select("p").html(tooltipContent);var bounds=root.node().getBoundingClientRect(),adjLeft=(document.body.scrollLeft||0)+(document.documentElement.scrollLeft||0),adjLeftFlip=parentBounds.width/2-(positions[0]-bounds.left-adjLeft)<0?bounds.width:0,adjTop=(document.body.scrollTop||0)+(document.documentElement.scrollTop||0);root.style("left",positions[0]-bounds.left-adjLeft-adjLeftFlip+"px").style("top",positions[1]-bounds.top-bounds.height-adjTop+"px").transition(transition$1().duration(200)).style("opacity",1)}():root.transition(transition$1().duration(500)).style("opacity",0),setTooltipAccess(root.node()),function(isToShow){isToShow?window.addEventListener("keydown",hideTooltipHandler,!0):window.removeEventListener("keydown",hideTooltipHandler,!0)}(isToShow))},tickArguments=[],tickValues=null,transitionDuration=750,orient=1,tickFormat$1=null,tickSizeInner=6,tickSizeOuter=6,tickPadding=3,xOffset=0,yOffset=0,tickWidth=0,k$1=1,x$6="x",transform$2=translateX$2;function axis$2(context){var values=null==tickValues?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():tickValues,format=null==tickFormat$1?scale.tickFormat?scale.tickFormat.apply(scale,tickArguments):identity$d:tickFormat$1,spacing=Math.max(tickSizeInner,0)+tickPadding,range=scale.range(),range0=+range[0]+.5,range1=+range[range.length-1]+.5,position=(scale.bandwidth?center$3:number$8)(scale.copy()),selection=context.selection?context.selection():context,path=selection.selectAll(".domain").data([null]),tick=selection.selectAll(".tick").data(values,scale).order(),tickExit=tick.exit(),tickEnter=tick.enter().append("g").attr("class","tick").attr("data-testid","axis-tick"),line=tick.select("line"),text=tick.select("text");path=path.merge(path.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),selection.selectAll(".domain").attr("class",hideAxisPath?"domain hidden":"domain"),tick=tick.merge(tickEnter),line=line.merge(tickEnter.append("line").attr("data-testid","axis-tick-line").attr("stroke","currentColor").attr(x$6+"2",k$1*tickSizeInner)),scale.formattedTicks||(scale.formattedTicks=[]),text=text.merge(tickEnter.append("text").attr("data-testid","axis-tick-text").attr("fill","currentColor").attr(x$6,k$1*spacing).attr("dy",1===orient?"0em":3===orient?"0.71em":"0.32em")).text((function(d,i){return format(d,i)&&scale.formattedTicks.push(format(d,i)),format(d,i)})),tickWidth>0&&text.call(wrap$1),context!==selection&&transitionDuration&&(path=path.transition(context).duration(transitionDuration).ease(circleIn$1),tick=tick.transition(context).duration(transitionDuration).ease(circleIn$1),line=line.transition(context).duration(transitionDuration).ease(circleIn$1),text=text.transition(context).duration(transitionDuration).ease(circleIn$1),tickExit=tickExit.transition(context).attr("opacity",1e-6).attr("transform",(function(d){return isFinite(d=position(d))?transform$2(d):this.getAttribute("transform")})),tickEnter.attr("opacity",1e-6).attr("transform",(function(d){var p=this.parentNode.__axis;return transform$2(p&&isFinite(p=p(d))?p:position(d))}))),tickExit.remove(),path.attr("d",4===orient||2===orient?tickSizeOuter?"M"+k$1*tickSizeOuter+","+range0+"H0.5V"+range1+"H"+k$1*tickSizeOuter:"M0.5,"+range0+"V"+range1:tickSizeOuter?"M"+range0+","+k$1*tickSizeOuter+"V0.5H"+range1+"V"+k$1*tickSizeOuter:"M"+range0+",0.5H"+range1),tick.attr("opacity",1).attr("transform",(function(d){return transform$2(position(d))})),line.attr(x$6+"2",k$1*tickSizeInner),text.attr(x$6,k$1*spacing),selection.filter(entering$2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===orient?"start":4===orient?"end":"middle"),selection.each((function(){this.__axis=position}))}function wrap$1(selection){selection.each((function(){var text=select$4(this),words=manuallyWrapText({text:text.text(),width:tickWidth,fontSize:12,noPadding:!1,wholeWords:!1}),lineHeight=yOffset,lineNumber=0,y=text.attr("y"),dy=parseFloat(text.attr("dy"));text.text(null),words.forEach((function(word){text.append("tspan").attr("data-testid","axis-tick-text-tspan").attr("x",xOffset).attr("y",y).attr("dy",lineNumber*lineHeight+dy+"em").text(word),lineNumber++}))}))}function setOrientation(){k$1=1===orient||4===orient?-1:1,x$6=4===orient||2===orient?"x":"y",transform$2=1===orient||3===orient?translateX$2:translateY$2}function identity$d(id){return id}function translateX$2(xPos){return"translate("+(xPos+.5)+",0)"}function translateY$2(yPos){return"translate(0,"+(yPos+.5)+")"}function number$8(scaleFunction){return function(d){return+scaleFunction(d)}}function center$3(scaleFunction){var offset=Math.max(0,scaleFunction.bandwidth()-1)/2;return scaleFunction.round()&&(offset=Math.round(offset)),function(d){return+scaleFunction(d)+offset}}function entering$2(){return!this.__axis}var slice$7=Array.prototype.slice;function identity$c(x){return x}var top$1=1,right$1=2,bottom$1=3,left$1=4,epsilon$7=1e-6;function translateX$1(x){return"translate("+(x+.5)+",0)"}function translateY$1(y){return"translate(0,"+(y+.5)+")"}function number$7(scale){return function(d){return+scale(d)}}function center$2(scale){var offset=Math.max(0,scale.bandwidth()-1)/2;return scale.round()&&(offset=Math.round(offset)),function(d){return+scale(d)+offset}}function entering$1(){return!this.__axis}function axis$1(orient,scale){var tickArguments=[],tickValues=null,tickFormat=null,tickSizeInner=6,tickSizeOuter=6,tickPadding=3,k=orient===top$1||orient===left$1?-1:1,x=orient===left$1||orient===right$1?"x":"y",transform=orient===top$1||orient===bottom$1?translateX$1:translateY$1;function axis(context){var values=null==tickValues?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():tickValues,format=null==tickFormat?scale.tickFormat?scale.tickFormat.apply(scale,tickArguments):identity$c:tickFormat,spacing=Math.max(tickSizeInner,0)+tickPadding,range=scale.range(),range0=+range[0]+.5,range1=+range[range.length-1]+.5,position=(scale.bandwidth?center$2:number$7)(scale.copy()),selection=context.selection?context.selection():context,path=selection.selectAll(".domain").data([null]),tick=selection.selectAll(".tick").data(values,scale).order(),tickExit=tick.exit(),tickEnter=tick.enter().append("g").attr("class","tick"),line=tick.select("line"),text=tick.select("text");path=path.merge(path.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),tick=tick.merge(tickEnter),line=line.merge(tickEnter.append("line").attr("stroke","currentColor").attr(x+"2",k*tickSizeInner)),text=text.merge(tickEnter.append("text").attr("fill","currentColor").attr(x,k*spacing).attr("dy",orient===top$1?"0em":orient===bottom$1?"0.71em":"0.32em")),context!==selection&&(path=path.transition(context),tick=tick.transition(context),line=line.transition(context),text=text.transition(context),tickExit=tickExit.transition(context).attr("opacity",epsilon$7).attr("transform",(function(d){return isFinite(d=position(d))?transform(d):this.getAttribute("transform")})),tickEnter.attr("opacity",epsilon$7).attr("transform",(function(d){var p=this.parentNode.__axis;return transform(p&&isFinite(p=p(d))?p:position(d))}))),tickExit.remove(),path.attr("d",orient===left$1||orient==right$1?tickSizeOuter?"M"+k*tickSizeOuter+","+range0+"H0.5V"+range1+"H"+k*tickSizeOuter:"M0.5,"+range0+"V"+range1:tickSizeOuter?"M"+range0+","+k*tickSizeOuter+"V0.5H"+range1+"V"+k*tickSizeOuter:"M"+range0+",0.5H"+range1),tick.attr("opacity",1).attr("transform",(function(d){return transform(position(d))})),line.attr(x+"2",k*tickSizeInner),text.attr(x,k*spacing).text(format),selection.filter(entering$1).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",orient===right$1?"start":orient===left$1?"end":"middle"),selection.each((function(){this.__axis=position}))}return axis.scale=function(_){return arguments.length?(scale=_,axis):scale},axis.ticks=function(){return tickArguments=slice$7.call(arguments),axis},axis.tickArguments=function(_){return arguments.length?(tickArguments=null==_?[]:slice$7.call(_),axis):tickArguments.slice()},axis.tickValues=function(_){return arguments.length?(tickValues=null==_?null:slice$7.call(_),axis):tickValues&&tickValues.slice()},axis.tickFormat=function(_){return arguments.length?(tickFormat=_,axis):tickFormat},axis.tickSize=function(_){return arguments.length?(tickSizeInner=tickSizeOuter=+_,axis):tickSizeInner},axis.tickSizeInner=function(_){return arguments.length?(tickSizeInner=+_,axis):tickSizeInner},axis.tickSizeOuter=function(_){return arguments.length?(tickSizeOuter=+_,axis):tickSizeOuter},axis.tickPadding=function(_){return arguments.length?(tickPadding=+_,axis):tickPadding},axis}var symbols$1={cross:{general:"M-1.0606601238250732,-0.3535534143447876L-0.919238805770874,-0.3535534143447876L-0.7778174877166748,-0.3535534143447876L-0.6363961100578308,-0.3535534143447876L-0.4949747920036316,-0.3535534143447876L-0.3535534739494324,-0.3535534143447876L-0.3535533845424652,-0.4949747323989868L-0.3535533845424652,-0.636396050453186L-0.3535534143447876,-0.7778173685073853L-0.3535534143447876,-0.9192386865615845L-0.3535534143447876,-1.0606600046157837L-0.21213221549987793,-1.0606601238250732L-0.07071077823638916,-1.0606601238250732L0.07071053981781006,-1.0606601238250732L0.21213185787200928,-1.0606601238250732L0.3535531759262085,-1.0606601238250732L0.35355344414711,-0.9192389249801636L0.35355344414711,-0.7778176069259644L0.3535534143447876,-0.6363962888717651L0.3535534143447876,-0.4949749708175659L0.3535534143447876,-0.3535536527633667L0.49497461318969727,-0.3535534143447876L0.6363959312438965,-0.3535534143447876L0.7778174877166748,-0.3535534143447876L0.919238805770874,-0.3535534143447876L1.0606601238250732,-0.3535534143447876L1.0606601238250732,-0.21213233470916748L1.0606601238250732,-0.07071101665496826L1.0606601238250732,0.07071030139923096L1.0606601238250732,0.21213161945343018L1.0606601238250732,0.3535529375076294L0.9192391633987427,0.35355332493782043L0.7778178453445435,0.3535533547401428L0.6363965272903442,0.3535533845424652L0.494975209236145,0.3535533845424652L0.3535538911819458,0.3535534143447876L0.35355344414711,0.49497437477111816L0.35355344414711,0.6363956928253174L0.3535534143447876,0.7778170108795166L0.3535534143447876,0.9192383289337158L0.3535534143447876,1.060659646987915L0.21213233470916748,1.0606600046157837L0.07071101665496826,1.0606600046157837L-0.07071030139923096,1.0606601238250732L-0.21213161945343018,1.0606601238250732L-0.3535529375076294,1.0606601238250732L-0.3535533845424652,0.9192386865615845L-0.3535533845424652,0.7778173685073853L-0.3535534143447876,0.636396050453186L-0.3535534143447876,0.4949747323989868L-0.3535534143447876,0.3535534143447876L-0.49497485160827637,0.35355332493782043L-0.6363961696624756,0.3535533547401428L-0.7778174877166748,0.3535533845424652L-0.919238805770874,0.3535533845424652L-1.0606601238250732,0.3535534143447876L-1.0606601238250732,0.21213185787200928L-1.0606601238250732,0.07071053981781006L-1.0606601238250732,-0.07071077823638916L-1.0606601238250732,-0.21213209629058838Z",base:"M-1.0606601717798214,-0.3535533905932738L-0.3535533905932738,-0.3535533905932738L-0.3535533905932738,-1.0606601717798214L0.3535533905932738,-1.0606601717798214L0.3535533905932738,-0.3535533905932738L1.0606601717798214,-0.3535533905932738L1.0606601717798214,0.3535533905932738L0.3535533905932738,0.3535533905932738L0.3535533905932738,1.0606601717798214L-0.3535533905932738,1.0606601717798214L-0.3535533905932738,0.3535533905932738L-1.0606601717798214,0.3535533905932738Z"},circle:{general:"M1,0L0.9952487945556641,0.10496900230646133L0.9802308678627014,0.20940586924552917L0.9531400799751282,0.31073155999183655L0.9148818850517273,0.4079720079898834L0.8663365244865417,0.5002545714378357L0.8094649910926819,0.5883480906486511L0.743568480014801,0.6698152422904968L0.6695123314857483,0.7439088225364685L0.5881620049476624,0.8099220395088196L0.5004010796546936,0.867180347442627L0.4069012701511383,0.9140697717666626L0.30910128355026245,0.9513185620307922L0.2079721838235855,0.9784069061279297L0.10456041246652603,0.9948219656944275L9.057112038135529e-8,1L-0.10454819351434708,0.994599461555481L-0.20796485245227814,0.9783451557159424L-0.30910056829452515,0.9513131976127625L-0.40682557225227356,0.9137774109840393L-0.5000651478767395,0.8661796450614929L-0.5878113508224487,0.8090839982032776L-0.6691301465034485,0.7431550621986389L-0.7431550025939941,0.6691302061080933L-0.8090841770172119,0.5878111720085144L-0.8661795258522034,0.5000653266906738L-0.9137775301933289,0.4068255126476288L-0.9513131976127625,0.30910077691078186L-0.9783450961112976,0.20796531438827515L-0.994599461555481,0.10454835742712021L-1,1.5099580252808664e-7L-0.9952487945556641,-0.1049688383936882L-0.9802308082580566,-0.2094057947397232L-0.953140139579773,-0.3107314109802246L-0.9148820638656616,-0.4079718291759491L-0.8663367629051208,-0.5002543926239014L-0.8094651103019714,-0.5883479714393616L-0.7435685396194458,-0.6698151230812073L-0.6695123314857483,-0.7439088225364685L-0.5881620645523071,-0.8099220395088196L-0.5004012584686279,-0.867180347442627L-0.4069012701511383,-0.9140697717666626L-0.30910128355026245,-0.9513185620307922L-0.20797239243984222,-0.9784069061279297L-0.10456059128046036,-0.9948219656944275L-3.026798367500305e-9,-1L0.10454817116260529,-0.994599461555481L0.2079651653766632,-0.9783450961112976L0.30910080671310425,-0.9513131380081177L0.4068260192871094,-0.913777232170105L0.5000655055046082,-0.8661794066429138L0.587811291217804,-0.8090839982032776L0.6691306233406067,-0.7431545853614807L0.7431554198265076,-0.6691297292709351L0.8090841770172119,-0.5878111124038696L0.866179883480072,-0.5000647306442261L0.9137775301933289,-0.4068252444267273L0.9513131976127625,-0.309100478887558L0.9783451557159424,-0.20796477794647217L0.9945995211601257,-0.10454780608415604Z",base:"M1,0A1,1,0,1,1,-1,0A1,1,0,1,1,1,0"},square:{general:"M-0.9219544529914856,-0.9219544529914856L-0.799027144908905,-0.9219544529914856L-0.676099956035614,-0.9219544529914856L-0.5531726479530334,-0.9219544529914856L-0.4302453398704529,-0.9219544529914856L-0.30731815099716187,-0.9219544529914856L-0.18439096212387085,-0.9219544529914856L-0.06146365404129028,-0.9219544529914856L0.06146365404129028,-0.9219544529914856L0.1843908429145813,-0.9219544529914856L0.30731815099716187,-0.9219544529914856L0.43024545907974243,-0.9219544529914856L0.5531726479530334,-0.9219544529914856L0.676099956035614,-0.9219544529914856L0.799027144908905,-0.9219544529914856L0.9219544529914856,-0.9219544529914856L0.9219545125961304,-0.799027144908905L0.9219545125961304,-0.676099956035614L0.9219545125961304,-0.553172767162323L0.9219545125961304,-0.4302453398704529L0.9219545125961304,-0.30731815099716187L0.9219545125961304,-0.18439096212387085L0.9219545125961304,-0.06146353483200073L0.9219545125961304,0.06146365404129028L0.9219545125961304,0.1843908429145813L0.9219544529914856,0.3073182702064514L0.9219544529914856,0.43024545907974243L0.9219544529914856,0.5531726479530334L0.9219544529914856,0.6760998368263245L0.9219544529914856,0.7990272641181946L0.9219544529914856,0.9219544529914856L0.7990273833274841,0.9219542145729065L0.676099956035614,0.9219542145729065L0.553172767162323,0.9219542145729065L0.430245578289032,0.9219542741775513L0.30731838941574097,0.9219542741775513L0.18439120054244995,0.9219542741775513L0.06146353483200073,0.921954333782196L-0.06146365404129028,0.921954333782196L-0.1843908429145813,0.921954333782196L-0.3073180317878723,0.921954333782196L-0.43024522066116333,0.9219543933868408L-0.5531724095344543,0.9219543933868408L-0.6760995984077454,0.9219543933868408L-0.7990272641181946,0.9219544529914856L-0.9219544529914856,0.9219544529914856L-0.9219543933868408,0.799027144908905L-0.9219543933868408,0.676099956035614L-0.9219543933868408,0.553172767162323L-0.9219543933868408,0.430245578289032L-0.9219543933868408,0.30731791257858276L-0.9219543933868408,0.18439072370529175L-0.9219543933868408,0.06146353483200073L-0.9219543933868408,-0.06146365404129028L-0.9219543933868408,-0.1843908429145813L-0.9219544529914856,-0.3073180317878723L-0.9219544529914856,-0.43024522066116333L-0.9219544529914856,-0.5531728863716125L-0.9219544529914856,-0.6761000752449036L-0.9219544529914856,-0.7990272641181946Z",base:"M-0.9219544457292888,-0.9219544457292888h1.8439088914585775v1.8439088914585775h-1.8439088914585775Z"},star:{general:"M0,-1.462173581123352L0.05471307039260864,-1.2937841415405273L0.1094261109828949,-1.125394582748413L0.16413918137550354,-0.9570050239562988L0.21885225176811218,-0.7886155843734741L0.2735653221607208,-0.6202260255813599L0.32827839255332947,-0.4518364667892456L0.505333662033081,-0.4518364667892456L0.6823887825012207,-0.4518364667892456L0.8594440221786499,-0.4518364667892456L1.036499261856079,-0.4518364667892456L1.2135545015335083,-0.4518364667892456L1.3906097412109375,-0.4518364667892456L1.2473692893981934,-0.34776610136032104L1.104128360748291,-0.24369558691978455L0.9608877897262573,-0.13962522149085999L0.8176472187042236,-0.03555482625961304L0.6744064092636108,0.06851568818092346L0.5311657786369324,0.17258606851100922L0.5858786702156067,0.34097564220428467L0.6405917406082153,0.5093650817871094L0.6953047513961792,0.6777544617652893L0.7500178813934326,0.8461441397666931L0.8047309517860413,1.014533519744873L0.8594440817832947,1.1829231977462769L0.7162032723426819,1.078852653503418L0.5729628205299377,0.9747823476791382L0.42972204089164734,0.8707118630409241L0.28648123145103455,0.76664137840271L0.1432408094406128,0.6625710725784302L1.1102230246251565e-16,0.5585005879402161L-0.1432408094406128,0.6625711917877197L-0.28648126125335693,0.76664137840271L-0.42972204089164734,0.8707119226455688L-0.5729628801345825,0.9747824668884277L-0.7162032723426819,1.078852653503418L-0.8594440817832947,1.1829231977462769L-0.8047309517860413,1.014533519744873L-0.7500178217887878,0.846143901348114L-0.695304811000824,0.6777547001838684L-0.6405916810035706,0.5093650817871094L-0.5858786106109619,0.34097540378570557L-0.531165599822998,0.17258620262145996L-0.674406111240387,0.0685158371925354L-0.8176469206809998,-0.0355546772480011L-0.9608873128890991,-0.1396249234676361L-1.104128122329712,-0.2436954379081726L-1.2473689317703247,-0.3477659523487091L-1.3906097412109375,-0.4518364667892456L-1.2135542631149292,-0.4518364667892456L-1.0364998579025269,-0.4518364667892456L-0.8594444990158081,-0.4518364667892456L-0.6823891401290894,-0.4518364667892456L-0.5053337812423706,-0.4518364667892456L-0.32827839255332947,-0.4518364667892456L-0.27356526255607605,-0.6202262043952942L-0.21885214745998383,-0.788615882396698L-0.16413933038711548,-0.9570046067237854L-0.10942622274160385,-1.1253942251205444L-0.054713111370801926,-1.2937839031219482Z",base:"M0,-1.4621735258409942L0.3282784098583098,-0.4518364682100035L1.3906096597053377,-0.4518364682100036L0.5311656249235138,0.17258617349950994L0.859444034781824,1.1829232311305005L1.1102230246251565e-16,0.5585005894209871L-0.8594440347818236,1.1829232311305007L-0.5311656249235137,0.17258617349951003L-1.390609659705338,-0.4518364682100033L-0.3282784098583099,-0.4518364682100034Z"},triangle:{general:"M0,-1.3306167125701904L0.05761754512786865,-1.2308205366134644L0.1152348518371582,-1.1310244798660278L0.17285221815109253,-1.0312281847000122L0.23046964406967163,-0.9314318895339966L0.28808706998825073,-0.8316354751586914L0.34570443630218506,-0.7318392992019653L0.4033218026161194,-0.6320431232452393L0.4609392285346985,-0.5322468280792236L0.5185565948486328,-0.432450532913208L0.5761740207672119,-0.33265429735183716L0.6337913870811462,-0.2328580617904663L0.6914087533950806,-0.13306176662445068L0.7490261793136597,-0.033265531063079834L0.8066436052322388,0.06653076410293579L0.8642609119415283,0.16632699966430664L0.9218782782554626,0.2661232054233551L0.9794957041740417,0.3659195303916931L1.037113070487976,0.4657157063484192L1.0947304964065552,0.5655120611190796L1.1523479223251343,0.6653083562850952L1.0371133089065552,0.6653079986572266L0.921878457069397,0.6653080582618713L0.8066436052322388,0.6653080582618713L0.6914087533950806,0.6653080582618713L0.5761741399765015,0.6653081178665161L0.46093928813934326,0.6653081178665161L0.34570443630218506,0.6653081178665161L0.23046958446502686,0.6653081178665161L0.11523497104644775,0.6653081774711609L1.1920928955078125e-7,0.6653081774711609L-0.11523473262786865,0.6653081774711609L-0.23046934604644775,0.6653082370758057L-0.34570419788360596,0.6653082370758057L-0.46093904972076416,0.6653082370758057L-0.5761736631393433,0.6653082966804504L-0.6914085149765015,0.6653082966804504L-0.8066433668136597,0.6653082966804504L-0.9218782186508179,0.6653082966804504L-1.037113070487976,0.6653083562850952L-1.1523479223251343,0.6653083562850952L-1.094730257987976,0.5655120611190796L-1.037113070487976,0.4657161235809326L-0.9794957041740417,0.365919828414917L-0.9218782782554626,0.26612353324890137L-0.8642608523368835,0.1663271188735962L-0.8066434264183044,0.06653082370758057L-0.7490260004997253,-0.03326547145843506L-0.6914085745811462,-0.13306176662445068L-0.6337913870811462,-0.23285770416259766L-0.5761739611625671,-0.3326539993286133L-0.518556535243988,-0.4324502944946289L-0.4609391391277313,-0.5322465896606445L-0.4033217132091522,-0.6320429444313049L-0.3457042872905731,-0.7318392395973206L-0.288086861371994,-0.831635594367981L-0.2304694503545761,-0.9314318895339966L-0.1728522628545761,-1.0312278270721436L-0.1152348443865776,-1.1310241222381592L-0.0576174221932888,-1.2308204174041748Z",base:"M0,-1.330616708716245L1.1523478724483067,0.6653083543581225L-1.1523478724483067,0.6653083543581225Z"},diamond:{general:"M0,-1.4416868686676025L0.05549061298370361,-1.3455744981765747L0.11098116636276245,-1.2494620084762573L0.1664717197418213,-1.15334951877594L0.22196227312088013,-1.057237148284912L0.27745282649993896,-0.96112459897995L0.3329433500766754,-0.8650121688842773L0.38843390345573425,-0.76889967918396L0.4439244568347931,-0.6727872490882874L0.49941501021385193,-0.57667475938797L0.5549055337905884,-0.480562299489975L0.6103960871696472,-0.38444983959198L0.665886640548706,-0.288337379693985L0.7213771939277649,-0.19222491979599L0.7768677473068237,-0.096112459897995L0.8323583006858826,0L0.7768678665161133,0.09611248970031738L0.7213772535324097,0.19222497940063477L0.6658867001533508,0.2883373498916626L0.6103960871696472,0.38444995880126953L0.5549055933952332,0.48056232929229736L0.4994150996208191,0.5766746401786804L0.4439244866371155,0.6727872490882874L0.38843387365341187,0.7688997983932495L0.3329433500766754,0.8650121092796326L0.27745285630226135,0.9611244797706604L0.22196224331855774,1.0572370290756226L0.16647161543369293,1.1533496379852295L0.11098112165927887,1.2494620084762573L0.05549062043428421,1.3455742597579956L0,1.4416868686676025L-0.05549055337905884,1.345574140548706L-0.11098110675811768,1.2494617700576782L-0.16647160053253174,1.15334951877594L-0.22196221351623535,1.057236909866333L-0.27745282649993896,0.9611243605613708L-0.332943320274353,0.865011990070343L-0.3884338140487671,0.7688996195793152L-0.44392454624176025,0.6727868914604187L-0.4994150698184967,0.5766745209693909L-0.5549055337905884,0.4805621802806854L-0.6103960275650024,0.3844498097896576L-0.6658865809440613,0.28833746910095215L-0.7213773131370544,0.19222471117973328L-0.7768678069114685,0.09611235558986664L-0.8323583006858826,0L-0.7768675684928894,-0.09611260890960693L-0.7213770747184753,-0.19222497940063477L-0.6658865809440613,-0.2883373498916626L-0.6103960871696472,-0.38444972038269043L-0.5549055933952332,-0.4805620312690735L-0.4994148910045624,-0.5766748189926147L-0.4439243972301483,-0.6727871894836426L-0.38843390345573425,-0.7688995003700256L-0.3329431712627411,-0.8650122880935669L-0.277452677488327,-0.9611246585845947L-0.22196219861507416,-1.0572370290756226L-0.1664717048406601,-1.1533493995666504L-0.11098121851682663,-1.2494617700576782L-0.055490490049123764,-1.3455744981765747Z",base:"M0,-1.4416868484808527L0.8323582900575635,0L0,1.4416868484808527L-0.8323582900575635,0Z"}},setLegendInteractionState=function(_a){var root=_a.root;_a.uniqueID;var interactionKeys=_a.interactionKeys,groupAccessor=_a.groupAccessor,hoverHighlight=_a.hoverHighlight,clickHighlight=_a.clickHighlight,hoverStyle=_a.hoverStyle,clickStyle=_a.clickStyle,hoverOpacity=_a.hoverOpacity,type=root.attr("data-type");"gradient"!==type&&root.selectAll(".legend").each((function(d,i,n){var child=select$4(n[i].firstElementChild),text=select$4(n[i]).select("text"),datum=d.values?d.values[0]:d,validLegendInteraction=groupAccessor&&1===interactionKeys.length&&interactionKeys[0]===groupAccessor,hovered=checkHovered(datum,hoverHighlight,interactionKeys)&&validLegendInteraction,clicked=checkClicked(datum,clickHighlight,interactionKeys)&&validLegendInteraction,fill=child.attr("data-fill"),stroke=child.attr("data-stroke"),resultingStroke="";if(fill){var clickColor=clickStyle?visaColorToHex(clickStyle.color):"",hoverColor=hoverStyle?visaColorToHex(hoverStyle.color):"",resultingFill=clicked?clickColor||fill:hovered&&hoverColor?hoverColor:fill;child.attr("fill",resultingFill),child.style("fill",resultingFill);var hasStroke=child.attr("stroke"),baseColor=child.attr("data-base-color"),resultingClick="scatter"!==type?[getContrastingStroke(clickColor||baseColor||fill)]:getAccessibleStrokes(clickColor||baseColor||fill),resultingHover="scatter"!==type?[getContrastingStroke(hoverColor||baseColor||fill)]:getAccessibleStrokes(hoverColor||baseColor||fill);resultingStroke=clicked?resultingClick[1]||resultingClick[0]:hovered?resultingHover[1]||resultingHover[0]:hasStroke?stroke:getContrastingStroke(fill)}else if(stroke){clickColor=clickStyle&&clickStyle.color?getAccessibleStrokes(visaColorToHex(clickStyle.color)):[stroke],hoverColor=hoverStyle&&hoverStyle.color?getAccessibleStrokes(visaColorToHex(hoverStyle.color)):[stroke];resultingStroke=clicked?clickColor[1]||clickColor[0]:hovered?hoverColor[1]||hoverColor[0]:stroke}child.attr("stroke",resultingStroke),child.style("stroke",resultingStroke);var baseStrokeWidth=parseFloat(child.attr("data-stroke-width"))||("none"===stroke?0:1),strokeWidthDenominator=baseStrokeWidth<1?baseStrokeWidth:1,strokeWidthMultiplier="line"!==type?1:2,scale="scatter"!==type?1:4;child.attr("stroke-width",(clicked?clickStyle&&clickStyle.strokeWidth&&strokeWidthDenominator?parseFloat(clickStyle.strokeWidth+"")*strokeWidthMultiplier/strokeWidthDenominator:baseStrokeWidth:hovered&&hoverStyle&&hoverStyle.strokeWidth&&strokeWidthDenominator?parseFloat(hoverStyle.strokeWidth+"")*strokeWidthMultiplier/strokeWidthDenominator:baseStrokeWidth)/scale),child.style("stroke-width",child.attr("stroke-width"));var disableDash="scatter"===type||"line"===type;child.attr("stroke-dasharray",!hovered||clicked||disableDash?"line"!==type?"none":child.attr("stroke-dasharray"):"8 6"),child.style("stroke-dasharray",child.attr("stroke-dasharray"));var opacity=checkInteraction(d,1,hoverOpacity,hoverHighlight,clickHighlight||[],interactionKeys);child.attr("opacity",opacity),text.attr("opacity",opacity?1:0)}))},getLayout=function(d,layout){return layout||(d&&d.axis&&"x"===d.axis?"horizontal":"vertical")},labelPlacementHorizontalValidPlacements=["left","middle","right"],resolveLabelPlacementHorizontal=function(d,layout){return d.labelPlacementHorizontal&&labelPlacementHorizontalValidPlacements.includes(d.labelPlacementHorizontal)?d.labelPlacementHorizontal:"horizontal"===getLayout(d,layout)?"middle":"right"},labelPlacementVerticalValidPlacements=["top","middle","bottom"],resolveLabelPlacementVertical=function(d,layout){return d.labelPlacementVertical&&d.labelPlacementVertical&&labelPlacementVerticalValidPlacements.includes(d.labelPlacementVertical)?d.labelPlacementVertical:"horizontal"===getLayout(d,layout)?"top":"middle"},referenceLabelAligner=function(d,layout,groupName,innerPaddedHeight,innerPaddedWidth){var defaultPlacement={horizontal:{textAnchor:"middle",x:0,y:0,dx:"0em",dy:"-0.5em"},vertical:{textAnchor:"start",x:innerPaddedWidth,y:0,dx:"0.5em",dy:"0.0em"}},textAnchorPlacement={horizontal:{"left-top":"end","middle-top":"middle","right-top":"start","left-bottom":"end","middle-bottom":"middle","right-bottom":"start"},vertical:{"left-top":"start","left-middle":"end","left-bottom":"start","right-top":"end","right-middle":"start","right-bottom":"end"}},xydxdyPlacement={horizontal:{"left-top":{x:0,y:0,dx:"-0.5em",dy:"1em"},"middle-top":{x:0,y:0,dx:"0em",dy:"-0.5em"},"right-top":{x:0,y:0,dx:"0.5em",dy:"1em"},"left-bottom":{x:0,y:innerPaddedHeight,dx:"-0.5em",dy:"-0.5em"},"middle-bottom":{x:0,y:innerPaddedHeight,dx:"0em",dy:"1em"},"right-bottom":{x:0,y:innerPaddedHeight,dx:"0.5em",dy:"-0.5em"}},vertical:{"left-top":{x:0,y:0,dx:"0.5em",dy:"-0.5em"},"left-middle":{x:0,y:0,dx:"-0.5em",dy:"0.3em"},"left-bottom":{x:0,y:0,dx:"0.5em",dy:"1em"},"right-top":{x:innerPaddedWidth,y:0,dx:"-0.5em",dy:"-0.5em"},"right-middle":{x:innerPaddedWidth,y:0,dx:"0.5em",dy:"0.3em"},"right-bottom":{x:innerPaddedWidth,y:0,dx:"-0.5em",dy:"1em"}}};return{textAnchor:textAnchorPlacement[""+layout][resolveLabelPlacementHorizontal(d,layout)+"-"+resolveLabelPlacementVertical(d,layout)]?textAnchorPlacement[""+layout][resolveLabelPlacementHorizontal(d,layout)+"-"+resolveLabelPlacementVertical(d,layout)]:defaultPlacement[layout].textAnchor,x:xydxdyPlacement[""+layout][resolveLabelPlacementHorizontal(d,layout)+"-"+resolveLabelPlacementVertical(d,layout)]?xydxdyPlacement[""+layout][resolveLabelPlacementHorizontal(d,layout)+"-"+resolveLabelPlacementVertical(d,layout)].x:defaultPlacement[layout].x,y:xydxdyPlacement[""+layout][resolveLabelPlacementHorizontal(d,layout)+"-"+resolveLabelPlacementVertical(d,layout)]?xydxdyPlacement[""+layout][resolveLabelPlacementHorizontal(d,layout)+"-"+resolveLabelPlacementVertical(d,layout)].y:defaultPlacement[layout].y,dx:xydxdyPlacement[""+layout][resolveLabelPlacementHorizontal(d,layout)+"-"+resolveLabelPlacementVertical(d,layout)]?xydxdyPlacement[""+layout][resolveLabelPlacementHorizontal(d,layout)+"-"+resolveLabelPlacementVertical(d,layout)].dx:defaultPlacement[layout].dx,dy:xydxdyPlacement[""+layout][resolveLabelPlacementHorizontal(d,layout)+"-"+resolveLabelPlacementVertical(d,layout)]?xydxdyPlacement[""+layout][resolveLabelPlacementHorizontal(d,layout)+"-"+resolveLabelPlacementVertical(d,layout)].dy:defaultPlacement[layout].dy}},licenses=[{dependency:"visa-chart-components",github_link:"https://github.com/visa/visa-chart-components",license:{type:"MIT",update_date:"11/15/2020",link:"https://github.com/visa/visa-chart-components/blob/master/LICENSE.md",text:'\n        Copyright (c) Visa, Inc.\n\n        Permission is hereby granted, free of charge, to any person obtaining a copy\n        of this software and associated documentation files (the "Software"), to deal\n        in the Software without restriction, including without limitation the rights\n        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n        copies of the Software, and to permit persons to whom the Software is\n        furnished to do so, subject to the following conditions:\n        \n        The above copyright notice and this permission notice shall be included in\n        all copies or substantial portions of the Software.\n        \n        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n        THE SOFTWARE.\n      '}},{dependency:"node-uuid",github_link:"https://github.com/kelektiv/node-uuid",license:{type:"MIT",update_date:"10/15/2019",link:"https://github.com/kelektiv/node-uuid/blob/master/LICENSE.md",text:'\n        The MIT License (MIT)\n \n        Copyright (c) 2010-2016 Robert Kieffer and other contributors\n        \n        Permission is hereby granted, free of charge, to any person obtaining a copy\n        of this software and associated documentation files (the "Software"), to deal\n        in the Software without restriction, including without limitation the rights\n        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n        copies of the Software, and to permit persons to whom the Software is\n        furnished to do so, subject to the following conditions:\n        \n        The above copyright notice and this permission notice shall be included in all\n        copies or substantial portions of the Software.\n        \n        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n        SOFTWARE.\n      '}},{dependency:"turf.js",github_link:"https://github.com/Turfjs/turf",license:{type:"MIT",update_date:"8/8/2019",link:"https://github.com/Turfjs/turf/blob/master/LICENSE",text:'\n                The MIT License (MIT)\n\n                Copyright (c) 2019 Morgan Herlocker\n                \n                Permission is hereby granted, free of charge, to any person obtaining a copy of\n                this software and associated documentation files (the "Software"), to deal in\n                the Software without restriction, including without limitation the rights to\n                use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n                the Software, and to permit persons to whom the Software is furnished to do so,\n                subject to the following conditions:\n                \n                The above copyright notice and this permission notice shall be included in all\n                copies or substantial portions of the Software.\n                \n                THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n                IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n                FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n                COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n                IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n                CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n            '}},{dependency:"numeral.js",github_link:"https://github.com/adamwdraper/Numeral-js",license:{type:"MIT",update_date:"8/8/2019",link:"https://github.com/adamwdraper/Numeral-js/blob/master/LICENSE",text:'\n                The MIT License (MIT)\n\n                Copyright (c) 2016 Adam Draper\n\n                Permission is hereby granted, free of charge, to any person\n                obtaining a copy of this software and associated documentation\n                files (the "Software"), to deal in the Software without\n                restriction, including without limitation the rights to use,\n                copy, modify, merge, publish, distribute, sublicense, and/or sell\n                copies of the Software, and to permit persons to whom the\n                Software is furnished to do so, subject to the following\n                conditions:\n                \n                The above copyright notice and this permission notice shall be\n                included in all copies or substantial portions of the Software.\n                \n                THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n                EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n                OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n                NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n                HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n                WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n                FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n                OTHER DEALINGS IN THE SOFTWARE.\n            '}},{dependency:"stencil.js",github_link:"https://github.com/ionic-team/stencil",license:{type:"MIT",update_date:"8/8/2019",link:"https://github.com/ionic-team/stencil/blob/master/LICENSE",text:'\n                The MIT License (MIT)\n\n                Copyright (c) 2018-present Drifty Co.\n                \n                Permission is hereby granted, free of charge, to any person obtaining a copy\n                of this software and associated documentation files (the "Software"), to deal\n                in the Software without restriction, including without limitation the rights\n                to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n                copies of the Software, and to permit persons to whom the Software is\n                furnished to do so, subject to the following conditions:\n                \n                The above copyright notice and this permission notice shall be included in\n                all copies or substantial portions of the Software.\n                \n                THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n                IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n                FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n                AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n                LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n                OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n                THE SOFTWARE.\n            '}},{dependency:"topojson.js",github_link:"https://github.com/topojson/topojson",license:{type:"BSD 3-Clause",update_date:"8/8/2019",link:"https://github.com/topojson/topojson/blob/master/LICENSE.md",text:'\n                Copyright (c) 2012-2016, Michael Bostock All rights reserved.\n\n                Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n                \n                Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n                \n                Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n                \n                The name Michael Bostock may not be used to endorse or promote products derived from this software without specific prior written permission.\n                \n                THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL MICHAEL BOSTOCK BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n            '}},{dependency:"d3.js",github_link:"https://github.com/d3/d3",license:{type:"BSD 3-Clause",update_date:"8/8/2019",link:"https://github.com/d3/d3/blob/master/LICENSE",text:'\n                Copyright 2010-2017 Mike Bostock\n                All rights reserved.\n        \n                Redistribution and use in source and binary forms, with or without modification,\n                are permitted provided that the following conditions are met:\n        \n                * Redistributions of source code must retain the above copyright notice, this\n                list of conditions and the following disclaimer.\n        \n                * Redistributions in binary form must reproduce the above copyright notice,\n                this list of conditions and the following disclaimer in the documentation\n                and/or other materials provided with the distribution.\n        \n                * Neither the name of the author nor the names of contributors may be used to\n                endorse or promote products derived from this software without specific prior\n                written permission.\n        \n                THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\n                ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n                ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n            '}},{dependency:"d3-annotation.js",github_link:"https://github.com/susielu/d3-annotation",license:{type:"Apache-2.0",update_date:"8/8/2019",link:"https://raw.githubusercontent.com/susielu/d3-annotation/master/LICENSE",text:'\n                            Apache License\n                            Version 2.0, January 2004\n                        http://www.apache.org/licenses/\n\n                TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n                1. Definitions.\n\n                "License" shall mean the terms and conditions for use, reproduction,\n                and distribution as defined by Sections 1 through 9 of this document.\n\n                "Licensor" shall mean the copyright owner or entity authorized by\n                the copyright owner that is granting the License.\n\n                "Legal Entity" shall mean the union of the acting entity and all\n                other entities that control, are controlled by, or are under common\n                control with that entity. For the purposes of this definition,\n                "control" means (i) the power, direct or indirect, to cause the\n                direction or management of such entity, whether by contract or\n                otherwise, or (ii) ownership of fifty percent (50%) or more of the\n                outstanding shares, or (iii) beneficial ownership of such entity.\n\n                "You" (or "Your") shall mean an individual or Legal Entity\n                exercising permissions granted by this License.\n\n                "Source" form shall mean the preferred form for making modifications,\n                including but not limited to software source code, documentation\n                source, and configuration files.\n\n                "Object" form shall mean any form resulting from mechanical\n                transformation or translation of a Source form, including but\n                not limited to compiled object code, generated documentation,\n                and conversions to other media types.\n\n                "Work" shall mean the work of authorship, whether in Source or\n                Object form, made available under the License, as indicated by a\n                copyright notice that is included in or attached to the work\n                (an example is provided in the Appendix below).\n\n                "Derivative Works" shall mean any work, whether in Source or Object\n                form, that is based on (or derived from) the Work and for which the\n                editorial revisions, annotations, elaborations, or other modifications\n                represent, as a whole, an original work of authorship. For the purposes\n                of this License, Derivative Works shall not include works that remain\n                separable from, or merely link (or bind by name) to the interfaces of,\n                the Work and Derivative Works thereof.\n\n                "Contribution" shall mean any work of authorship, including\n                the original version of the Work and any modifications or additions\n                to that Work or Derivative Works thereof, that is intentionally\n                submitted to Licensor for inclusion in the Work by the copyright owner\n                or by an individual or Legal Entity authorized to submit on behalf of\n                the copyright owner. For the purposes of this definition, "submitted"\n                means any form of electronic, verbal, or written communication sent\n                to the Licensor or its representatives, including but not limited to\n                communication on electronic mailing lists, source code control systems,\n                and issue tracking systems that are managed by, or on behalf of, the\n                Licensor for the purpose of discussing and improving the Work, but\n                excluding communication that is conspicuously marked or otherwise\n                designated in writing by the copyright owner as "Not a Contribution."\n\n                "Contributor" shall mean Licensor and any individual or Legal Entity\n                on behalf of whom a Contribution has been received by Licensor and\n                subsequently incorporated within the Work.\n\n                2. Grant of Copyright License. Subject to the terms and conditions of\n                this License, each Contributor hereby grants to You a perpetual,\n                worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n                copyright license to reproduce, prepare Derivative Works of,\n                publicly display, publicly perform, sublicense, and distribute the\n                Work and such Derivative Works in Source or Object form.\n\n                3. Grant of Patent License. Subject to the terms and conditions of\n                this License, each Contributor hereby grants to You a perpetual,\n                worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n                (except as stated in this section) patent license to make, have made,\n                use, offer to sell, sell, import, and otherwise transfer the Work,\n                where such license applies only to those patent claims licensable\n                by such Contributor that are necessarily infringed by their\n                Contribution(s) alone or by combination of their Contribution(s)\n                with the Work to which such Contribution(s) was submitted. If You\n                institute patent litigation against any entity (including a\n                cross-claim or counterclaim in a lawsuit) alleging that the Work\n                or a Contribution incorporated within the Work constitutes direct\n                or contributory patent infringement, then any patent licenses\n                granted to You under this License for that Work shall terminate\n                as of the date such litigation is filed.\n\n                4. Redistribution. You may reproduce and distribute copies of the\n                Work or Derivative Works thereof in any medium, with or without\n                modifications, and in Source or Object form, provided that You\n                meet the following conditions:\n\n                (a) You must give any other recipients of the Work or\n                Derivative Works a copy of this License; and\n\n                (b) You must cause any modified files to carry prominent notices\n                stating that You changed the files; and\n\n                (c) You must retain, in the Source form of any Derivative Works\n                that You distribute, all copyright, patent, trademark, and\n                attribution notices from the Source form of the Work,\n                excluding those notices that do not pertain to any part of\n                the Derivative Works; and\n\n                (d) If the Work includes a "NOTICE" text file as part of its\n                distribution, then any Derivative Works that You distribute must\n                include a readable copy of the attribution notices contained\n                within such NOTICE file, excluding those notices that do not\n                pertain to any part of the Derivative Works, in at least one\n                of the following places: within a NOTICE text file distributed\n                as part of the Derivative Works; within the Source form or\n                documentation, if provided along with the Derivative Works; or,\n                within a display generated by the Derivative Works, if and\n                wherever such third-party notices normally appear. The contents\n                of the NOTICE file are for informational purposes only and\n                do not modify the License. You may add Your own attribution\n                notices within Derivative Works that You distribute, alongside\n                or as an addendum to the NOTICE text from the Work, provided\n                that such additional attribution notices cannot be construed\n                as modifying the License.\n\n                You may add Your own copyright statement to Your modifications and\n                may provide additional or different license terms and conditions\n                for use, reproduction, or distribution of Your modifications, or\n                for any such Derivative Works as a whole, provided Your use,\n                reproduction, and distribution of the Work otherwise complies with\n                the conditions stated in this License.\n\n                5. Submission of Contributions. Unless You explicitly state otherwise,\n                any Contribution intentionally submitted for inclusion in the Work\n                by You to the Licensor shall be under the terms and conditions of\n                this License, without any additional terms or conditions.\n                Notwithstanding the above, nothing herein shall supersede or modify\n                the terms of any separate license agreement you may have executed\n                with Licensor regarding such Contributions.\n\n                6. Trademarks. This License does not grant permission to use the trade\n                names, trademarks, service marks, or product names of the Licensor,\n                except as required for reasonable and customary use in describing the\n                origin of the Work and reproducing the content of the NOTICE file.\n\n                7. Disclaimer of Warranty. Unless required by applicable law or\n                agreed to in writing, Licensor provides the Work (and each\n                Contributor provides its Contributions) on an "AS IS" BASIS,\n                WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n                implied, including, without limitation, any warranties or conditions\n                of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n                PARTICULAR PURPOSE. You are solely responsible for determining the\n                appropriateness of using or redistributing the Work and assume any\n                risks associated with Your exercise of permissions under this License.\n\n                8. Limitation of Liability. In no event and under no legal theory,\n                whether in tort (including negligence), contract, or otherwise,\n                unless required by applicable law (such as deliberate and grossly\n                negligent acts) or agreed to in writing, shall any Contributor be\n                liable to You for damages, including any direct, indirect, special,\n                incidental, or consequential damages of any character arising as a\n                result of this License or out of the use or inability to use the\n                Work (including but not limited to damages for loss of goodwill,\n                work stoppage, computer failure or malfunction, or any and all\n                other commercial damages or losses), even if such Contributor\n                has been advised of the possibility of such damages.\n\n                9. Accepting Warranty or Additional Liability. While redistributing\n                the Work or Derivative Works thereof, You may choose to offer,\n                and charge a fee for, acceptance of support, warranty, indemnity,\n                or other liability obligations and/or rights consistent with this\n                License. However, in accepting such obligations, You may act only\n                on Your own behalf and on Your sole responsibility, not on behalf\n                of any other Contributor, and only if You agree to indemnify,\n                defend, and hold each Contributor harmless for any liability\n                incurred by, or claims asserted against, such Contributor by reason\n                of your accepting any such warranty or additional liability.\n\n                END OF TERMS AND CONDITIONS\n\n\n                APPENDIX: How to apply the Apache License to your work.\n\n                To apply the Apache License to your work, attach the following\n                boilerplate notice, with the fields enclosed by brackets "[]"\n                replaced with your own identifying information. (Don\'t include\n                the brackets!)  The text should be enclosed in the appropriate\n                comment syntax for the file format. We also recommend that a\n                file or class name and description of purpose be included on the\n                same "printed page" as the copyright notice for easier\n                identification within third-party archives.\n\n                Copyright (c) 2017, Susie Lu\n\n                Licensed under the Apache License, Version 2.0 (the "License");\n                you may not use this file except in compliance with the License.\n                You may obtain a copy of the License at\n\n                http://www.apache.org/licenses/LICENSE-2.0\n\n                Unless required by applicable law or agreed to in writing, software\n                distributed under the License is distributed on an "AS IS" BASIS,\n                WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n                See the License for the specific language governing permissions and\n                limitations under the License.\n            '}},{dependency:"yup",github_link:"https://github.com/jquense/yup",license:{type:"MIT",update_date:"12/16/2020",link:"https://github.com/jquense/yup/blob/master/LICENSE.md",text:'\n        The MIT License (MIT)\n\n        Copyright (c) 2014 Jason Quense\n        \n        Permission is hereby granted, free of charge, to any person obtaining a copy\n        of this software and associated documentation files (the "Software"), to deal\n        in the Software without restriction, including without limitation the rights\n        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n        copies of the Software, and to permit persons to whom the Software is\n        furnished to do so, subject to the following conditions:\n        \n        The above copyright notice and this permission notice shall be included in all\n        copies or substantial portions of the Software.\n        \n        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n        SOFTWARE.\n      '}},{dependency:"htmlwidgets",github_link:"https://github.com/ramnathv/htmlwidgets",license:{type:"MIT",update_date:"3/11/2021",link:"https://github.com/ramnathv/htmlwidgets/blob/master/LICENSE",text:'\n        MIT License\n\n        Copyright (c) 2016, Ramnath Vaidyanathan, Joe Cheng, JJ Allaire, Yihui Xie, and Kenton Russell\n\n        Permission is hereby granted, free of charge, to any person obtaining a copy\n        of this software and associated documentation files (the "Software"), to deal\n        in the Software without restriction, including without limitation the rights\n        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n        copies of the Software, and to permit persons to whom the Software is\n        furnished to do so, subject to the following conditions:\n        \n        The above copyright notice and this permission notice shall be included in all\n        copies or substantial portions of the Software.\n        \n        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n        SOFTWARE.\n      '}},{dependency:"vega-label and vega-canvas",github_link:"https://github.com/vega/vega-label",license:{type:"BSD-3-Clause",update_date:"7/8/2021",link:"https://github.com/vega/vega-label/blob/master/LICENSE",text:'\n        Copyright (c) 2016, University of Washington Interactive Data Lab\n        All rights reserved.\n        \n        Redistribution and use in source and binary forms, with or without\n        modification, are permitted provided that the following conditions are met:\n        \n        1. Redistributions of source code must retain the above copyright notice, this\n          list of conditions and the following disclaimer.\n        \n        2. Redistributions in binary form must reproduce the above copyright notice,\n          this list of conditions and the following disclaimer in the documentation\n          and/or other materials provided with the distribution.\n        \n        3. Neither the name of the copyright holder nor the names of its contributors\n          may be used to endorse or promote products derived from this software\n          without specific prior written permission.\n        \n        THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"\n        AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n        IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n        DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE\n        FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n        DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n        SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n        CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n        OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n        OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n      '}},{dependency:"i18Next",github_link:"https://github.com/i18next/i18next",license:{type:"MIT",update_date:"3/24/23",link:"https://github.com/i18next/i18next/blob/master/LICENSE",text:'\n      The MIT License (MIT)\n\n      Copyright (c) 2022 i18next\n      \n      Permission is hereby granted, free of charge, to any person obtaining a copy\n      of this software and associated documentation files (the "Software"), to deal\n      in the Software without restriction, including without limitation the rights\n      to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n      copies of the Software, and to permit persons to whom the Software is\n      furnished to do so, subject to the following conditions:\n      \n      The above copyright notice and this permission notice shall be included in all\n      copies or substantial portions of the Software.\n      \n      THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n      IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n      FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n      AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n      LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n      OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n      SOFTWARE.\n      '}},{dependency:"deep-keys",github_link:"https://github.com/a8m/deep-keys",license:{type:"MIT",update_date:"4/23/23",link:"https://github.com/a8m/deep-keys/blob/master/license",text:'\n      The MIT License (MIT)\n\n      Copyright (c) Ariel Mashraki <ariel@mashraki.co.il> (github.com/a8m)\n          \n      Permission is hereby granted, free of charge, to any person obtaining a copy\n      of this software and associated documentation files (the "Software"), to deal\n      in the Software without restriction, including without limitation the rights\n      to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n      copies of the Software, and to permit persons to whom the Software is\n      furnished to do so, subject to the following conditions:\n          \n      The above copyright notice and this permission notice shall be included in\n      all copies or substantial portions of the Software.\n          \n      THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n      IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n      FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n      AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n      LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n      OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n      THE SOFTWARE.\n      '}}];function getLicenses(){return licenses}var emptyDescriptions={"vcl-access-title":"","vcl-access-subtitle":"","vcl-access-long-description":"","vcl-access-context":"","vcl-access-executive-summary":"","vcl-access-purpose":"","vcl-access-statistics":"","vcl-access-layout":"","vcl-access-xAxis":"","vcl-access-yAxis":"","vcl-access-notes":"","vcl-access-annotation":"","vcl-access-annotation-title":"","vcl-access-annotation-description":"",headings:""},findTagLevel=function(startLevel,depthFromStart){if("p"===startLevel||"P"===startLevel||!startLevel)return"p";if("span"===startLevel||"SPAN"===startLevel)return"span";if("div"===startLevel||"DIV"===startLevel)return"div";var depth=depthFromStart||0,start="string"!=typeof startLevel||startLevel.length<=1?startLevel:startLevel[1];return+start+depth<7&&depth<3?"h"+(+start+depth):"p"},setDescriptionNode=function(root,description,headingText,tag,contentExists,headingTag){var contentNode=root.select("."+tag).text(description||emptyDescriptions[tag]),headingNode=root.select("."+(headingTag||tag)+"-heading");contentExists?(headingNode.size()||(headingNode=root.insert(contentNode.node().dataset.level,"."+(headingTag||tag)).attr("class","screen-reader-info "+(headingTag||tag)+"-heading")),headingNode.text(headingText)):headingNode.remove()};var validationStyle={warningStyle:"color: #C6003F;font-size:medium;",recommendationStyle:"font-size:medium;",specialRecommendationStyle:"color: #0061C1;font-size:medium;"};function ascending$7(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function bisector$1(compare){return 1===compare.length&&(compare=function ascendingComparator$1(f){return function(d,x){return ascending$7(f(d),x)}}(compare)),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}var ascendingBisect$1=bisector$1(ascending$7),bisectRight$1=ascendingBisect$1.right,bisectLeft=ascendingBisect$1.left;function pair(a,b){return[a,b]}function number$6(x){return null===x?NaN:+x}function variance(values,valueof){var value,delta,n=values.length,m=0,i=-1,mean=0,sum=0;if(null==valueof)for(;++i<n;)isNaN(value=number$6(values[i]))||(sum+=(delta=value-mean)*(value-(mean+=delta/++m)));else for(;++i<n;)isNaN(value=number$6(valueof(values[i],i,values)))||(sum+=(delta=value-mean)*(value-(mean+=delta/++m)));if(m>1)return sum/(m-1)}function deviation(array,f){var v=variance(array,f);return v?Math.sqrt(v):v}function extent$1(values,valueof){var value,min,max,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(min=max=value;++i<n;)null!=(value=values[i])&&(min>value&&(min=value),max<value&&(max=value))}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(min=max=value;++i<n;)null!=(value=valueof(values[i],i,values))&&(min>value&&(min=value),max<value&&(max=value));return[min,max]}var array$4=Array.prototype,slice$6=array$4.slice,map$4=array$4.map;function constant$l(x){return function(){return x}}function identity$b(x){return x}function range$1(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range}var e10$1=Math.sqrt(50),e5$1=Math.sqrt(10),e2$1=Math.sqrt(2);function tickIncrement$1(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10$1?10:error>=e5$1?5:error>=e2$1?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10$1?10:error>=e5$1?5:error>=e2$1?2:1)}function tickStep$1(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10$1?step1*=10:error>=e5$1?step1*=5:error>=e2$1&&(step1*=2),stop<start?-step1:step1}function sturges(values){return Math.ceil(Math.log(values.length)/Math.LN2)+1}function quantile$1(values,p,valueof){if(null==valueof&&(valueof=number$6),n=values.length){if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values);return value0+(+valueof(values[i0+1],i0+1,values)-value0)*(i-i0)}}function min$1(values,valueof){var value,min,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(min=value;++i<n;)null!=(value=values[i])&&min>value&&(min=value)}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(min=value;++i<n;)null!=(value=valueof(values[i],i,values))&&min>value&&(min=value);return min}function transpose(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=min$1(matrix,length$2),transpose=new Array(m);++i<m;)for(var n,j=-1,row=transpose[i]=new Array(n);++j<n;)row[j]=matrix[j][i];return transpose}function length$2(d){return d.length}var slice$5=Array.prototype.slice;function identity$a(x){return x}var top=1,right=2,bottom=3,left=4,epsilon$6=1e-6;function translateX(x){return"translate("+(x+.5)+",0)"}function translateY(y){return"translate(0,"+(y+.5)+")"}function number$5(scale){return function(d){return+scale(d)}}function center$1(scale){var offset=Math.max(0,scale.bandwidth()-1)/2;return scale.round()&&(offset=Math.round(offset)),function(d){return+scale(d)+offset}}function entering(){return!this.__axis}function axis(orient,scale){var tickArguments=[],tickValues=null,tickFormat=null,tickSizeInner=6,tickSizeOuter=6,tickPadding=3,k=orient===top||orient===left?-1:1,x=orient===left||orient===right?"x":"y",transform=orient===top||orient===bottom?translateX:translateY;function axis(context){var values=null==tickValues?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():tickValues,format=null==tickFormat?scale.tickFormat?scale.tickFormat.apply(scale,tickArguments):identity$a:tickFormat,spacing=Math.max(tickSizeInner,0)+tickPadding,range=scale.range(),range0=+range[0]+.5,range1=+range[range.length-1]+.5,position=(scale.bandwidth?center$1:number$5)(scale.copy()),selection=context.selection?context.selection():context,path=selection.selectAll(".domain").data([null]),tick=selection.selectAll(".tick").data(values,scale).order(),tickExit=tick.exit(),tickEnter=tick.enter().append("g").attr("class","tick"),line=tick.select("line"),text=tick.select("text");path=path.merge(path.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),tick=tick.merge(tickEnter),line=line.merge(tickEnter.append("line").attr("stroke","#000").attr(x+"2",k*tickSizeInner)),text=text.merge(tickEnter.append("text").attr("fill","#000").attr(x,k*spacing).attr("dy",orient===top?"0em":orient===bottom?"0.71em":"0.32em")),context!==selection&&(path=path.transition(context),tick=tick.transition(context),line=line.transition(context),text=text.transition(context),tickExit=tickExit.transition(context).attr("opacity",epsilon$6).attr("transform",(function(d){return isFinite(d=position(d))?transform(d):this.getAttribute("transform")})),tickEnter.attr("opacity",epsilon$6).attr("transform",(function(d){var p=this.parentNode.__axis;return transform(p&&isFinite(p=p(d))?p:position(d))}))),tickExit.remove(),path.attr("d",orient===left||orient==right?"M"+k*tickSizeOuter+","+range0+"H0.5V"+range1+"H"+k*tickSizeOuter:"M"+range0+","+k*tickSizeOuter+"V0.5H"+range1+"V"+k*tickSizeOuter),tick.attr("opacity",1).attr("transform",(function(d){return transform(position(d))})),line.attr(x+"2",k*tickSizeInner),text.attr(x,k*spacing).text(format),selection.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",orient===right?"start":orient===left?"end":"middle"),selection.each((function(){this.__axis=position}))}return axis.scale=function(_){return arguments.length?(scale=_,axis):scale},axis.ticks=function(){return tickArguments=slice$5.call(arguments),axis},axis.tickArguments=function(_){return arguments.length?(tickArguments=null==_?[]:slice$5.call(_),axis):tickArguments.slice()},axis.tickValues=function(_){return arguments.length?(tickValues=null==_?null:slice$5.call(_),axis):tickValues&&tickValues.slice()},axis.tickFormat=function(_){return arguments.length?(tickFormat=_,axis):tickFormat},axis.tickSize=function(_){return arguments.length?(tickSizeInner=tickSizeOuter=+_,axis):tickSizeInner},axis.tickSizeInner=function(_){return arguments.length?(tickSizeInner=+_,axis):tickSizeInner},axis.tickSizeOuter=function(_){return arguments.length?(tickSizeOuter=+_,axis):tickSizeOuter},axis.tickPadding=function(_){return arguments.length?(tickPadding=+_,axis):tickPadding},axis}function noevent$4(){event$4.preventDefault(),event$4.stopImmediatePropagation()}function dragDisable(view){var root=view.document.documentElement,selection=select$4(view).on("dragstart.drag",noevent$4,!0);"onselectstart"in root?selection.on("selectstart.drag",noevent$4,!0):(root.__noselect=root.style.MozUserSelect,root.style.MozUserSelect="none")}function yesdrag$2(view,noclick){var root=view.document.documentElement,selection=select$4(view).on("dragstart.drag",null);noclick&&(selection.on("click.drag",noevent$4,!0),setTimeout((function(){selection.on("click.drag",null)}),0)),"onselectstart"in root?selection.on("selectstart.drag",null):(root.style.MozUserSelect=root.__noselect,delete root.__noselect)}var emptyOn$2=dispatch$5("start","end","cancel","interrupt"),emptyTween$2=[],CREATED$2=0,SCHEDULED$2=1,STARTING$2=2,STARTED$2=3,RUNNING$2=4,ENDING$2=5,ENDED$2=6;function schedule$2(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function create$3(node,id,self){var tween,schedules=node.__transition;function schedule(elapsed){self.state=SCHEDULED$2,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(self.state!==SCHEDULED$2)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(o.state===STARTED$2)return timeout$4(start);o.state===RUNNING$2?(o.state=ENDED$2,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=ENDED$2,o.timer.stop(),o.on.call("cancel",node,node.__data__,o.index,o.group),delete schedules[i])}if(timeout$4((function(){self.state===STARTED$2&&(self.state=RUNNING$2,self.timer.restart(tick,self.delay,self.time),tick(elapsed))})),self.state=STARTING$2,self.on.call("start",node,node.__data__,self.index,self.group),self.state===STARTING$2){for(self.state=STARTED$2,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=ENDING$2,1),i=-1,n=tween.length;++i<n;)tween[i].call(node,t);self.state===ENDING$2&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=ENDED$2,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer$2(schedule,0,self.time)}(node,id,{name:name,index:index,group:group,on:emptyOn$2,tween:emptyTween$2,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:CREATED$2})}function init$2(node,id){var schedule=get$9(node,id);if(schedule.state>CREATED$2)throw new Error("too late; already scheduled");return schedule}function set$8(node,id){var schedule=get$9(node,id);if(schedule.state>STARTED$2)throw new Error("too late; already running");return schedule}function get$9(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function interrupt$2(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>STARTING$2&&schedule.state<ENDING$2,schedule.state=ENDED$2,schedule.timer.stop(),schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}}function tweenRemove$2(id,name){var tween0,tween1;return function(){var schedule=set$8(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction$2(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=set$8(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name:name,value:value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue$2(transition,name,value){var id=transition._id;return transition.each((function(){var schedule=set$8(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)})),function(node){return get$9(node,id).value[name]}}function interpolate$3(a,b){var c;return("number"==typeof b?interpolateNumber$1:b instanceof color?interpolateRgb$1:(c=color(b))?(b=c,interpolateRgb$1):interpolateString$1)(a,b)}function attrRemove$7(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$7(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$7(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrConstantNS$7(fullname,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrFunction$7(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttribute(name))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttribute(name)}}function attrFunctionNS$7(fullname,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttributeNS(fullname.space,fullname.local))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttributeNS(fullname.space,fullname.local)}}function attrTweenNS$2(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function attrInterpolateNS$1(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i.call(this,t))}}(fullname,i)),t0}return tween._value=value,tween}function attrTween$2(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function attrInterpolate$1(name,i){return function(t){this.setAttribute(name,i.call(this,t))}}(name,i)),t0}return tween._value=value,tween}function delayFunction$2(id,value){return function(){init$2(this,id).delay=+value.apply(this,arguments)}}function delayConstant$2(id,value){return value=+value,function(){init$2(this,id).delay=value}}function durationFunction$2(id,value){return function(){set$8(this,id).duration=+value.apply(this,arguments)}}function durationConstant$2(id,value){return value=+value,function(){set$8(this,id).duration=value}}var Selection$7=selection$2.prototype.constructor;function styleRemove$7(name){return function(){this.style.removeProperty(name)}}var id$2=0;function Transition$2(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function newId$2(){return++id$2}var selection_prototype$2=selection$2.prototype;Transition$2.prototype={constructor:Transition$2,select:function transition_select$2(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selector$5(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,schedule$2(subgroup[i],name,id,i,subgroup,get$9(node,id)));return new Transition$2(subgroups,this._parents,name,id)},selectAll:function transition_selectAll$2(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll$5(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=get$9(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule$2(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new Transition$2(subgroups,parents,name,id)},filter:function transition_filter$2(match){"function"!=typeof match&&(match=matcher$6(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Transition$2(subgroups,this._parents,this._name,this._id)},merge:function transition_merge$2(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Transition$2(merges,this._parents,this._name,this._id)},selection:function transition_selection$2(){return new Selection$7(this._groups,this._parents)},transition:function transition_transition$2(){for(var name=this._name,id0=this._id,id1=newId$2(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=get$9(node,id0);schedule$2(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition$2(groups,this._parents,name,id1)},call:selection_prototype$2.call,nodes:selection_prototype$2.nodes,node:selection_prototype$2.node,size:selection_prototype$2.size,empty:selection_prototype$2.empty,each:selection_prototype$2.each,on:function transition_on$2(name,listener){var id=this._id;return arguments.length<2?get$9(this.node(),id).on.on(name):this.each(function onFunction$2(id,name,listener){var on0,on1,sit=function start$3(name){return(name+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(name)?init$2:set$8;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}(id,name,listener))},attr:function transition_attr$2(name,value){var fullname=namespace$5(name),i="transform"===fullname?interpolateTransformSvg$2:interpolate$3;return this.attrTween(name,"function"==typeof value?(fullname.local?attrFunctionNS$7:attrFunction$7)(fullname,i,tweenValue$2(this,"attr."+name,value)):null==value?(fullname.local?attrRemoveNS$7:attrRemove$7)(fullname):(fullname.local?attrConstantNS$7:attrConstant$7)(fullname,i,value))},attrTween:function transition_attrTween$2(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace$5(name);return this.tween(key,(fullname.local?attrTweenNS$2:attrTween$2)(fullname,value))},style:function transition_style$2(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss$2:interpolate$3;return null==value?this.styleTween(name,function styleNull$1(name,interpolate){var string00,string10,interpolate0;return function(){var string0=styleValue$5(this,name),string1=(this.style.removeProperty(name),styleValue$5(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}(name,i)).on("end.style."+name,styleRemove$7(name)):"function"==typeof value?this.styleTween(name,function styleFunction$7(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=styleValue$5(this,name),value1=value(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=styleValue$5(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}(name,i,tweenValue$2(this,"style."+name,value))).each(function styleMaybeRemove$1(id,name){var on0,on1,listener0,remove,key="style."+name,event="end."+key;return function(){var schedule=set$8(this,id),on=schedule.on,listener=null==schedule.value[key]?remove||(remove=styleRemove$7(name)):void 0;on===on0&&listener0===listener||(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}(this._id,name)):this.styleTween(name,function styleConstant$7(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=styleValue$5(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}(name,i,value),priority).on("end.style."+name,null)},styleTween:function transition_styleTween$2(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,function styleTween$2(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t=(i0=i)&&function styleInterpolate$1(name,i,priority){return function(t){this.style.setProperty(name,i.call(this,t),priority)}}(name,i,priority)),t}return tween._value=value,tween}(name,value,null==priority?"":priority))},text:function transition_text$2(value){return this.tween("text","function"==typeof value?function textFunction$7(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue$2(this,"text",value)):function textConstant$7(value){return function(){this.textContent=value}}(null==value?"":value+""))},textTween:function transition_textTween$1(value){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,function textTween$1(value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function textInterpolate$1(i){return function(t){this.textContent=i.call(this,t)}}(i)),t0}return tween._value=value,tween}(value))},remove:function transition_remove$2(){return this.on("end.remove",function removeFunction$2(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}}(this._id))},tween:function transition_tween$2(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=get$9(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove$2:tweenFunction$2)(id,name,value))},delay:function transition_delay$2(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction$2:delayConstant$2)(id,value)):get$9(this.node(),id).delay},duration:function transition_duration$2(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction$2:durationConstant$2)(id,value)):get$9(this.node(),id).duration},ease:function transition_ease$2(value){var id=this._id;return arguments.length?this.each(function easeConstant$2(id,value){if("function"!=typeof value)throw new Error;return function(){set$8(this,id).ease=value}}(id,value)):get$9(this.node(),id).ease},end:function transition_end$1(){var on0,on1,that=this,id=that._id,size=that.size();return new Promise((function(resolve,reject){var cancel={value:reject},end={value:function(){0==--size&&resolve()}};that.each((function(){var schedule=set$8(this,id),on=schedule.on;on!==on0&&((on1=(on0=on).copy())._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end)),schedule.on=on1}))}))}};var defaultTiming$2={time:null,delay:0,duration:250,ease:cubicInOut$2};function inherit$2(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))return defaultTiming$2.time=now$2(),defaultTiming$2;return timing}function constant$k(x){return function(){return x}}function BrushEvent(target,type,selection){this.target=target,this.type=type,this.selection=selection}function nopropagation$3(){event$4.stopImmediatePropagation()}function noevent$3(){event$4.preventDefault(),event$4.stopImmediatePropagation()}selection$2.prototype.interrupt=function selection_interrupt$2(name){return this.each((function(){interrupt$2(this,name)}))},selection$2.prototype.transition=function selection_transition$2(name){var id,timing;name instanceof Transition$2?(id=name._id,name=name._name):(id=newId$2(),(timing=defaultTiming$2).time=now$2(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule$2(node,name,id,i,group,timing||inherit$2(node,id));return new Transition$2(groups,this._parents,name,id)};var MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"},X={name:"x",handles:["e","w"].map(type$1),input:function(x,e){return x&&[[x[0],e[0][1]],[x[1],e[1][1]]]},output:function(xy){return xy&&[xy[0][0],xy[1][0]]}},Y={name:"y",handles:["n","s"].map(type$1),input:function(y,e){return y&&[[e[0][0],y[0]],[e[1][0],y[1]]]},output:function(xy){return xy&&[xy[0][1],xy[1][1]]}},XY={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(type$1),input:function(xy){return xy},output:function(xy){return xy}},cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function type$1(t){return{type:t}}function defaultFilter$3(){return!event$4.button}function defaultExtent$1(){var svg=this.ownerSVGElement||this;return[[0,0],[svg.width.baseVal.value,svg.height.baseVal.value]]}function local$1(node){for(;!node.__brush;)if(!(node=node.parentNode))return;return node.__brush}function empty$5(extent){return extent[0][0]===extent[1][0]||extent[0][1]===extent[1][1]}function brush$1(dim){var touchending,extent=defaultExtent$1,filter=defaultFilter$3,listeners=dispatch$5(brush,"start","brush","end"),handleSize=6;function brush(group){var overlay=group.property("__brush",initialize).selectAll(".overlay").data([type$1("overlay")]);overlay.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(overlay).each((function(){var extent=local$1(this).extent;select$4(this).attr("x",extent[0][0]).attr("y",extent[0][1]).attr("width",extent[1][0]-extent[0][0]).attr("height",extent[1][1]-extent[0][1])})),group.selectAll(".selection").data([type$1("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var handle=group.selectAll(".handle").data(dim.handles,(function(d){return d.type}));handle.exit().remove(),handle.enter().append("rect").attr("class",(function(d){return"handle handle--"+d.type})).attr("cursor",(function(d){return cursors[d.type]})),group.each(redraw).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",started)}function redraw(){var group=select$4(this),selection=local$1(this).selection;selection?(group.selectAll(".selection").style("display",null).attr("x",selection[0][0]).attr("y",selection[0][1]).attr("width",selection[1][0]-selection[0][0]).attr("height",selection[1][1]-selection[0][1]),group.selectAll(".handle").style("display",null).attr("x",(function(d){return"e"===d.type[d.type.length-1]?selection[1][0]-handleSize/2:selection[0][0]-handleSize/2})).attr("y",(function(d){return"s"===d.type[0]?selection[1][1]-handleSize/2:selection[0][1]-handleSize/2})).attr("width",(function(d){return"n"===d.type||"s"===d.type?selection[1][0]-selection[0][0]+handleSize:handleSize})).attr("height",(function(d){return"e"===d.type||"w"===d.type?selection[1][1]-selection[0][1]+handleSize:handleSize}))):group.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function emitter(that,args){return that.__brush.emitter||new Emitter(that,args)}function Emitter(that,args){this.that=that,this.args=args,this.state=that.__brush,this.active=0}function started(){if(event$4.touches){if(event$4.changedTouches.length<event$4.touches.length)return noevent$3()}else if(touchending)return;if(filter.apply(this,arguments)){var w0,w1,n0,n1,e0,e1,s0,s1,dx,dy,moving,lockX,lockY,that=this,type=event$4.target.__data__.type,mode="selection"===(event$4.metaKey?type="overlay":type)?MODE_DRAG:event$4.altKey?MODE_CENTER:MODE_HANDLE,signX=dim===Y?null:signsX[type],signY=dim===X?null:signsY[type],state=local$1(that),extent=state.extent,selection=state.selection,W=extent[0][0],N=extent[0][1],E=extent[1][0],S=extent[1][1],shifting=signX&&signY&&event$4.shiftKey,point0=mouse$3(that),point=point0,emit=emitter(that,arguments).beforestart();"overlay"===type?state.selection=selection=[[w0=dim===Y?W:point0[0],n0=dim===X?N:point0[1]],[e0=dim===Y?E:w0,s0=dim===X?S:n0]]:(w0=selection[0][0],n0=selection[0][1],e0=selection[1][0],s0=selection[1][1]),w1=w0,n1=n0,e1=e0,s1=s0;var group=select$4(that).attr("pointer-events","none"),overlay=group.selectAll(".overlay").attr("cursor",cursors[type]);if(event$4.touches)group.on("touchmove.brush",moved,!0).on("touchend.brush touchcancel.brush",ended,!0);else{var view=select$4(event$4.view).on("keydown.brush",(function keydowned(){switch(event$4.keyCode){case 16:shifting=signX&&signY;break;case 18:mode===MODE_HANDLE&&(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER,move());break;case 32:mode!==MODE_HANDLE&&mode!==MODE_CENTER||(signX<0?e0=e1-dx:signX>0&&(w0=w1-dx),signY<0?s0=s1-dy:signY>0&&(n0=n1-dy),mode=MODE_SPACE,overlay.attr("cursor",cursors.selection),move());break;default:return}noevent$3()}),!0).on("keyup.brush",(function keyupped(){switch(event$4.keyCode){case 16:shifting&&(lockX=lockY=shifting=!1,move());break;case 18:mode===MODE_CENTER&&(signX<0?e0=e1:signX>0&&(w0=w1),signY<0?s0=s1:signY>0&&(n0=n1),mode=MODE_HANDLE,move());break;case 32:mode===MODE_SPACE&&(event$4.altKey?(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER):(signX<0?e0=e1:signX>0&&(w0=w1),signY<0?s0=s1:signY>0&&(n0=n1),mode=MODE_HANDLE),overlay.attr("cursor",cursors[type]),move());break;default:return}noevent$3()}),!0).on("mousemove.brush",moved,!0).on("mouseup.brush",ended,!0);dragDisable(event$4.view)}nopropagation$3(),interrupt$2(that),redraw.call(that),emit.start()}function moved(){var point1=mouse$3(that);!shifting||lockX||lockY||(Math.abs(point1[0]-point[0])>Math.abs(point1[1]-point[1])?lockY=!0:lockX=!0),point=point1,moving=!0,noevent$3(),move()}function move(){var t;switch(dx=point[0]-point0[0],dy=point[1]-point0[1],mode){case MODE_SPACE:case MODE_DRAG:signX&&(dx=Math.max(W-w0,Math.min(E-e0,dx)),w1=w0+dx,e1=e0+dx),signY&&(dy=Math.max(N-n0,Math.min(S-s0,dy)),n1=n0+dy,s1=s0+dy);break;case MODE_HANDLE:signX<0?(dx=Math.max(W-w0,Math.min(E-w0,dx)),w1=w0+dx,e1=e0):signX>0&&(dx=Math.max(W-e0,Math.min(E-e0,dx)),w1=w0,e1=e0+dx),signY<0?(dy=Math.max(N-n0,Math.min(S-n0,dy)),n1=n0+dy,s1=s0):signY>0&&(dy=Math.max(N-s0,Math.min(S-s0,dy)),n1=n0,s1=s0+dy);break;case MODE_CENTER:signX&&(w1=Math.max(W,Math.min(E,w0-dx*signX)),e1=Math.max(W,Math.min(E,e0+dx*signX))),signY&&(n1=Math.max(N,Math.min(S,n0-dy*signY)),s1=Math.max(N,Math.min(S,s0+dy*signY)))}e1<w1&&(signX*=-1,t=w0,w0=e0,e0=t,t=w1,w1=e1,e1=t,type in flipX&&overlay.attr("cursor",cursors[type=flipX[type]])),s1<n1&&(signY*=-1,t=n0,n0=s0,s0=t,t=n1,n1=s1,s1=t,type in flipY&&overlay.attr("cursor",cursors[type=flipY[type]])),state.selection&&(selection=state.selection),lockX&&(w1=selection[0][0],e1=selection[1][0]),lockY&&(n1=selection[0][1],s1=selection[1][1]),selection[0][0]===w1&&selection[0][1]===n1&&selection[1][0]===e1&&selection[1][1]===s1||(state.selection=[[w1,n1],[e1,s1]],redraw.call(that),emit.brush())}function ended(){if(nopropagation$3(),event$4.touches){if(event$4.touches.length)return;touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),500),group.on("touchmove.brush touchend.brush touchcancel.brush",null)}else yesdrag$2(event$4.view,moving),view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);group.attr("pointer-events","all"),overlay.attr("cursor",cursors.overlay),state.selection&&(selection=state.selection),empty$5(selection)&&(state.selection=null,redraw.call(that)),emit.end()}}function initialize(){var state=this.__brush||{selection:null};return state.extent=extent.apply(this,arguments),state.dim=dim,state}return brush.move=function(group,selection){group.selection?group.on("start.brush",(function(){emitter(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){emitter(this,arguments).end()})).tween("brush",(function(){var that=this,state=that.__brush,emit=emitter(that,arguments),selection0=state.selection,selection1=dim.input("function"==typeof selection?selection.apply(this,arguments):selection,state.extent),i=interpolate$5(selection0,selection1);function tween(t){state.selection=1===t&&empty$5(selection1)?null:i(t),redraw.call(that),emit.brush()}return selection0&&selection1?tween:tween(1)})):group.each((function(){var args=arguments,state=this.__brush,selection1=dim.input("function"==typeof selection?selection.apply(this,args):selection,state.extent),emit=emitter(this,args).beforestart();interrupt$2(this),state.selection=null==selection1||empty$5(selection1)?null:selection1,redraw.call(this),emit.start().brush().end()}))},Emitter.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(type){customEvent$3(new BrushEvent(brush,type,dim.output(this.state.selection)),listeners.apply,listeners,[type,this.that,this.args])}},brush.extent=function(_){return arguments.length?(extent="function"==typeof _?_:constant$k([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),brush):extent},brush.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant$k(!!_),brush):filter},brush.handleSize=function(_){return arguments.length?(handleSize=+_,brush):handleSize},brush.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?brush:value},brush}var cos$2=Math.cos,sin$2=Math.sin,pi$6=Math.PI,halfPi$4=pi$6/2,tau$7=2*pi$6,max$1=Math.max;var slice$4=Array.prototype.slice;function constant$j(x){return function(){return x}}function defaultSource$1(d){return d.source}function defaultTarget(d){return d.target}function defaultRadius$1(d){return d.radius}function defaultStartAngle(d){return d.startAngle}function defaultEndAngle(d){return d.endAngle}function Map$3(){}function map$3(object,f){var map=new Map$3;if(object instanceof Map$3)object.each((function(value,key){map.set(key,value)}));else if(Array.isArray(object)){var o,i=-1,n=object.length;if(null==f)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}function createObject(){return{}}function setObject(object,key,value){object[key]=value}function createMap(){return map$3()}function setMap(map,key,value){map.set(key,value)}function Set$3(){}Map$3.prototype=map$3.prototype={constructor:Map$3,has:function(key){return"$"+key in this},get:function(key){return this["$"+key]},set:function(key,value){return this["$"+key]=value,this},remove:function(key){var property="$"+key;return property in this&&delete this[property]},clear:function(){for(var property in this)"$"===property[0]&&delete this[property]},keys:function(){var keys=[];for(var property in this)"$"===property[0]&&keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)"$"===property[0]&&values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)"$"===property[0]&&entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)"$"===property[0]&&++size;return size},empty:function(){for(var property in this)if("$"===property[0])return!1;return!0},each:function(f){for(var property in this)"$"===property[0]&&f(this[property],property.slice(1),this)}};var proto$2=map$3.prototype;function set$7(object,f){var set=new Set$3;if(object instanceof Set$3)object.each((function(value){set.add(value)}));else if(object){var i=-1,n=object.length;if(null==f)for(;++i<n;)set.add(object[i]);else for(;++i<n;)set.add(f(object[i],i,object))}return set}Set$3.prototype=set$7.prototype={constructor:Set$3,has:proto$2.has,add:function(value){return this["$"+(value+="")]=value,this},remove:proto$2.remove,clear:proto$2.clear,values:proto$2.keys,size:proto$2.size,empty:proto$2.empty,each:proto$2.each};var noop$7={value:function(){}};function dispatch$4(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _)throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch$4(_)}function Dispatch$4(_){this._=_}function get$8(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set$6(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop$7,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch$4.prototype=dispatch$4.prototype={constructor:Dispatch$4,on:function(typename,callback){var t,_=this._,T=function parseTypenames$9(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}}))}(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set$6(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set$6(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get$8(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch$4(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var noop$6={value:function(){}};function dispatch$3(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch$3(_)}function Dispatch$3(_){this._=_}function get$7(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set$5(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop$6,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch$3.prototype=dispatch$3.prototype={constructor:Dispatch$3,on:function(typename,callback){var t,_=this._,T=function parseTypenames$8(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}}))}(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set$5(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set$5(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get$7(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch$3(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var xhtml$4="http://www.w3.org/1999/xhtml",namespaces$4={svg:"http://www.w3.org/2000/svg",xhtml:xhtml$4,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace$4(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces$4.hasOwnProperty(prefix)?{space:namespaces$4[prefix],local:name}:name}function creatorInherit$4(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml$4&&document.documentElement.namespaceURI===xhtml$4?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed$4(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator$4(name){var fullname=namespace$4(name);return(fullname.local?creatorFixed$4:creatorInherit$4)(fullname)}function none$6(){}function selector$4(selector){return null==selector?none$6:function(){return this.querySelector(selector)}}function empty$4(){return[]}function sparse$4(update){return new Array(update.length)}function EnterNode$4(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}EnterNode$4.prototype={constructor:EnterNode$4,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};var keyPrefix$5="$";function bindIndex$4(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode$4(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey$4(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue={},groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=keyPrefix$5+key.call(node,node.__data__,i,group),keyValue in nodeByKeyValue?exit[i]=node:nodeByKeyValue[keyValue]=node);for(i=0;i<dataLength;++i)(node=nodeByKeyValue[keyValue=keyPrefix$5+key.call(parent,data[i],i,data)])?(update[i]=node,node.__data__=data[i],nodeByKeyValue[keyValue]=null):enter[i]=new EnterNode$4(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue[keyValues[i]]===node&&(exit[i]=node)}function ascending$6(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function attrRemove$6(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$6(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$6(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS$6(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction$6(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS$6(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function defaultView$4(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove$6(name){return function(){this.style.removeProperty(name)}}function styleConstant$6(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction$6(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function propertyRemove$4(name){return function(){delete this[name]}}function propertyConstant$4(name,value){return function(){this[name]=value}}function propertyFunction$4(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray$4(string){return string.trim().split(/^|\s+/)}function classList$4(node){return node.classList||new ClassList$4(node)}function ClassList$4(node){this._node=node,this._names=classArray$4(node.getAttribute("class")||"")}function classedAdd$4(node,names){for(var list=classList$4(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove$4(node,names){for(var list=classList$4(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue$4(names){return function(){classedAdd$4(this,names)}}function classedFalse$4(names){return function(){classedRemove$4(this,names)}}function classedFunction$4(names,value){return function(){(value.apply(this,arguments)?classedAdd$4:classedRemove$4)(this,names)}}function textRemove$4(){this.textContent=""}function textConstant$6(value){return function(){this.textContent=value}}function textFunction$6(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove$4(){this.innerHTML=""}function htmlConstant$4(value){return function(){this.innerHTML=value}}function htmlFunction$4(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise$5(){this.nextSibling&&this.parentNode.appendChild(this)}function lower$4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull$4(){return null}function remove$4(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow$4(){var clone=this.cloneNode(!1),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep$4(){var clone=this.cloneNode(!0),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}ClassList$4.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};var filterEvents$4={},event$3=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(filterEvents$4={mouseenter:"mouseover",mouseleave:"mouseout"}));function filterContextListener$4(listener,index,group){return listener=contextListener$4(listener,index,group),function(event){var related=event.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||listener.call(this,event)}}function contextListener$4(listener,index,group){return function(event1){var event0=event$3;event$3=event1;try{listener.call(this,this.__data__,index,group)}finally{event$3=event0}}}function onRemove$4(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?on.length=i:delete this.__on}}}function onAdd$4(typename,value,capture){var wrap=filterEvents$4.hasOwnProperty(typename.type)?filterContextListener$4:contextListener$4;return function(d,i,group){var o,on=this.__on,listener=wrap(value,i,group);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=listener,o.capture=capture),void(o.value=value);this.addEventListener(typename.type,listener,capture),o={type:typename.type,name:typename.name,value:value,listener:listener,capture:capture},on?on.push(o):this.__on=[o]}}function customEvent$2(event1,listener,that,args){var event0=event$3;event1.sourceEvent=event$3,event$3=event1;try{return listener.apply(that,args)}finally{event$3=event0}}function dispatchEvent$4(node,type,params){var window=defaultView$4(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant$4(type,params){return function(){return dispatchEvent$4(this,type,params)}}function dispatchFunction$4(type,params){return function(){return dispatchEvent$4(this,type,params.apply(this,arguments))}}var root$6=[null];function Selection$6(groups,parents){this._groups=groups,this._parents=parents}function select$3(selector){return"string"==typeof selector?new Selection$6([[document.querySelector(selector)]],[document.documentElement]):new Selection$6([[selector]],root$6)}Selection$6.prototype={constructor:Selection$6,select:function selection_select$4(select){"function"!=typeof select&&(select=selector$4(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection$6(subgroups,this._parents)},selectAll:function selection_selectAll$4(select){"function"!=typeof select&&(select=function selectorAll$4(selector){return null==selector?empty$4:function(){return this.querySelectorAll(selector)}}(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection$6(subgroups,parents)},filter:function selection_filter$4(match){"function"!=typeof match&&(match=function matcher$5(selector){return function(){return this.matches(selector)}}(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection$6(subgroups,this._parents)},data:function selection_data$4(value,key){if(!value)return data=new Array(this.size()),j=-1,this.each((function(d){data[++j]=d})),data;var bind=key?bindKey$4:bindIndex$4,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=function constant$i(x){return function(){return x}}(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=value.call(parent,parent&&parent.__data__,j,parents),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength);bind(parent,group,enterGroup,updateGroup,exit[j]=new Array(groupLength),data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection$6(update,parents))._enter=enter,update._exit=exit,update},enter:function selection_enter$4(){return new Selection$6(this._enter||this._groups.map(sparse$4),this._parents)},exit:function selection_exit$4(){return new Selection$6(this._exit||this._groups.map(sparse$4),this._parents)},join:function selection_join$3(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return enter="function"==typeof onenter?onenter(enter):enter.append(onenter+""),null!=onupdate&&(update=onupdate(update)),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function selection_merge$4(selection){for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection$6(merges,this._parents)},order:function selection_order$4(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function selection_sort$4(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending$6);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection$6(sortgroups,this._parents).order()},call:function selection_call$4(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function selection_nodes$4(){var nodes=new Array(this.size()),i=-1;return this.each((function(){nodes[++i]=this})),nodes},node:function selection_node$4(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function selection_size$4(){var size=0;return this.each((function(){++size})),size},empty:function selection_empty$4(){return!this.node()},each:function selection_each$4(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function selection_attr$4(name,value){var fullname=namespace$4(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS$6:attrRemove$6:"function"==typeof value?fullname.local?attrFunctionNS$6:attrFunction$6:fullname.local?attrConstantNS$6:attrConstant$6)(fullname,value))},style:function selection_style$4(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove$6:"function"==typeof value?styleFunction$6:styleConstant$6)(name,value,null==priority?"":priority)):function styleValue$4(node,name){return node.style.getPropertyValue(name)||defaultView$4(node).getComputedStyle(node,null).getPropertyValue(name)}(this.node(),name)},property:function selection_property$4(name,value){return arguments.length>1?this.each((null==value?propertyRemove$4:"function"==typeof value?propertyFunction$4:propertyConstant$4)(name,value)):this.node()[name]},classed:function selection_classed$4(name,value){var names=classArray$4(name+"");if(arguments.length<2){for(var list=classList$4(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction$4:value?classedTrue$4:classedFalse$4)(names,value))},text:function selection_text$4(value){return arguments.length?this.each(null==value?textRemove$4:("function"==typeof value?textFunction$6:textConstant$6)(value)):this.node().textContent},html:function selection_html$4(value){return arguments.length?this.each(null==value?htmlRemove$4:("function"==typeof value?htmlFunction$4:htmlConstant$4)(value)):this.node().innerHTML},raise:function selection_raise$4(){return this.each(raise$5)},lower:function selection_lower$4(){return this.each(lower$4)},append:function selection_append$4(name){var create="function"==typeof name?name:creator$4(name);return this.select((function(){return this.appendChild(create.apply(this,arguments))}))},insert:function selection_insert$4(name,before){var create="function"==typeof name?name:creator$4(name),select=null==before?constantNull$4:"function"==typeof before?before:selector$4(before);return this.select((function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function selection_remove$4(){return this.each(remove$4)},clone:function selection_clone$4(deep){return this.select(deep?selection_cloneDeep$4:selection_cloneShallow$4)},datum:function selection_datum$4(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function selection_on$4(typename,value,capture){var i,t,typenames=function parseTypenames$7(typenames){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name:name}}))}(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd$4:onRemove$4,null==capture&&(capture=!1),i=0;i<n;++i)this.each(on(typenames[i],value,capture));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function selection_dispatch$4(type,params){return this.each(("function"==typeof params?dispatchFunction$4:dispatchConstant$4)(type,params))}};var nextId$4=0;function Local$4(){this._="@"+(++nextId$4).toString(36)}function sourceEvent$2(){for(var source,current=event$3;source=current.sourceEvent;)current=source;return current}function point$b(node,event){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,point.y=event.clientY,[(point=point.matrixTransform(node.getScreenCTM().inverse())).x,point.y]}var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}function mouse$2(node){var event=sourceEvent$2();return event.changedTouches&&(event=event.changedTouches[0]),point$b(node,event)}function touch$2(node,touches,identifier){arguments.length<3&&(identifier=touches,touches=sourceEvent$2().changedTouches);for(var touch,i=0,n=touches?touches.length:0;i<n;++i)if((touch=touches[i]).identifier===identifier)return point$b(node,touch);return null}function nopropagation$2(){event$3.stopImmediatePropagation()}function noevent$2(){event$3.preventDefault(),event$3.stopImmediatePropagation()}function nodrag$1(view){var root=view.document.documentElement,selection=select$3(view).on("dragstart.drag",noevent$2,!0);"onselectstart"in root?selection.on("selectstart.drag",noevent$2,!0):(root.__noselect=root.style.MozUserSelect,root.style.MozUserSelect="none")}function yesdrag$1(view,noclick){var root=view.document.documentElement,selection=select$3(view).on("dragstart.drag",null);noclick&&(selection.on("click.drag",noevent$2,!0),setTimeout((function(){selection.on("click.drag",null)}),0)),"onselectstart"in root?selection.on("selectstart.drag",null):(root.style.MozUserSelect=root.__noselect,delete root.__noselect)}function constant$h(x){return function(){return x}}function DragEvent$1(target,type,subject,id,active,x,y,dx,dy,dispatch){this.target=target,this.type=type,this.subject=subject,this.identifier=id,this.active=active,this.x=x,this.y=y,this.dx=dx,this.dy=dy,this._=dispatch}function defaultFilter$2(){return!event$3.button}function defaultContainer$1(){return this.parentNode}function defaultSubject$1(d){return null==d?{x:event$3.x,y:event$3.y}:d}function defaultTouchable$2(){return"ontouchstart"in this}Local$4.prototype={constructor:Local$4,get:function(node){for(var id=this._;!(id in node);)if(!(node=node.parentNode))return;return node[id]},set:function(node,value){return node[this._]=value},remove:function(node){return this._ in node&&delete node[this._]},toString:function(){return this._}},DragEvent$1.prototype.on=function(){var value=this._.on.apply(this._,arguments);return value===this._?this:value};var EOL$1={},EOF$1={};function objectConverter$1(columns){return new Function("d","return {"+columns.map((function(name,i){return JSON.stringify(name)+": d["+i+"]"})).join(",")+"}")}function dsv$2(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF$1;if(eol)return eol=!1,EOL$1;var i,c,j=I;if(34===text.charCodeAt(j)){for(;I++<N&&34!==text.charCodeAt(I)||34===text.charCodeAt(++I););return(i=I)>=N?eof=!0:10===(c=text.charCodeAt(I++))?eol=!0:13===c&&(eol=!0,10===text.charCodeAt(I)&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if(10===(c=text.charCodeAt(i=I++)))eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(10===text.charCodeAt(N-1)&&--N,13===text.charCodeAt(N-1)&&--N;(t=token())!==EOF$1;){for(var row=[];t!==EOL$1&&t!==EOF$1;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return null==text?"":reFormat.test(text+="")?'"'+text.replace(/"/g,'""')+'"':text}return{parse:function parse(text,f){var convert,columns,rows=parseRows(text,(function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function customConverter$1(columns,f){var object=objectConverter$1(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter$1(row)}));return rows.columns=columns||[],rows},parseRows:parseRows,format:function format(rows,columns){return null==columns&&(columns=function inferColumns$1(rows){var columnSet=Object.create(null),columns=[];return rows.forEach((function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)})),columns}(rows)),[columns.map(formatValue).join(delimiter)].concat(rows.map((function(row){return columns.map((function(column){return formatValue(row[column])})).join(delimiter)}))).join("\n")},formatRows:function formatRows(rows){return rows.map(formatRow).join("\n")}}}var csv$2=dsv$2(","),csvParse$1=csv$2.parse,csvParseRows=csv$2.parseRows,csvFormat=csv$2.format,csvFormatRows=csv$2.formatRows,tsv$2=dsv$2("\t"),tsvParse$1=tsv$2.parse,tsvParseRows=tsv$2.parseRows,tsvFormat=tsv$2.format,tsvFormatRows=tsv$2.formatRows;function quadInOut(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function cubicInOut$1(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var polyIn=function custom(e){function polyIn(t){return Math.pow(t,e)}return e=+e,polyIn.exponent=custom,polyIn}(3),polyOut=function custom(e){function polyOut(t){return 1-Math.pow(1-t,e)}return e=+e,polyOut.exponent=custom,polyOut}(3),polyInOut=function custom(e){function polyInOut(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,polyInOut.exponent=custom,polyInOut}(3),pi$5=Math.PI,halfPi$3=pi$5/2;function sinInOut(t){return(1-Math.cos(pi$5*t))/2}function expInOut(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function circleInOut(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceOut(t){return(t=+t)<b1?b0*t*t:t<b3?b0*(t-=b2)*t+b4:t<b6?b0*(t-=b5)*t+b7:b0*(t-=b8)*t+b9}var backIn=function custom(s){function backIn(t){return t*t*((s+1)*t-s)}return s=+s,backIn.overshoot=custom,backIn}(1.70158),backOut=function custom(s){function backOut(t){return--t*t*((s+1)*t+s)+1}return s=+s,backOut.overshoot=custom,backOut}(1.70158),backInOut=function custom(s){function backInOut(t){return((t*=2)<1?t*t*((s+1)*t-s):(t-=2)*t*((s+1)*t+s)+2)/2}return s=+s,backInOut.overshoot=custom,backInOut}(1.70158),tau$6=2*Math.PI,elasticIn=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau$6);function elasticIn(t){return a*Math.pow(2,10*--t)*Math.sin((s-t)/p)}return elasticIn.amplitude=function(a){return custom(a,p*tau$6)},elasticIn.period=function(p){return custom(a,p)},elasticIn}(1,.3),elasticOut=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau$6);function elasticOut(t){return 1-a*Math.pow(2,-10*(t=+t))*Math.sin((t+s)/p)}return elasticOut.amplitude=function(a){return custom(a,p*tau$6)},elasticOut.period=function(p){return custom(a,p)},elasticOut}(1,.3),elasticInOut=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau$6);function elasticInOut(t){return((t=2*t-1)<0?a*Math.pow(2,10*t)*Math.sin((s-t)/p):2-a*Math.pow(2,-10*t)*Math.sin((s+t)/p))/2}return elasticInOut.amplitude=function(a){return custom(a,p*tau$6)},elasticInOut.period=function(p){return custom(a,p)},elasticInOut}(1,.3);function constant$g(x){return function(){return x}}function jiggle(){return 1e-6*(Math.random()-.5)}function add$2(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,xm,ym,xp,yp,right,bottom,i,j,node=tree._root,leaf={data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1;if(!node)return tree._root=leaf,tree;for(;node.length;)if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return parent[i]=leaf,tree;if(xp=+tree._x.call(null,node.data),yp=+tree._y.call(null,node.data),x===xp&&y===yp)return leaf.next=node,parent?parent[i]=leaf:tree._root=leaf,tree;do{parent=parent?parent[i]=new Array(4):tree._root=new Array(4),(right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym}while((i=bottom<<1|right)==(j=(yp>=ym)<<1|xp>=xm));return parent[j]=node,parent[i]=leaf,tree}function Quad$1(node,x0,y0,x1,y1){this.node=node,this.x0=x0,this.y0=y0,this.x1=x1,this.y1=y1}function defaultX$1(d){return d[0]}function defaultY$1(d){return d[1]}function quadtree$1(nodes,x,y){var tree=new Quadtree$1(null==x?defaultX$1:x,null==y?defaultY$1:y,NaN,NaN,NaN,NaN);return null==nodes?tree:tree.addAll(nodes)}function Quadtree$1(x,y,x0,y0,x1,y1){this._x=x,this._y=y,this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this._root=void 0}function leaf_copy$1(leaf){for(var copy={data:leaf.data},next=copy;leaf=leaf.next;)next=next.next={data:leaf.data};return copy}var treeProto$1=quadtree$1.prototype=Quadtree$1.prototype;function x$5(d){return d.x+d.vx}function y$5(d){return d.y+d.vy}function index$4(d){return d.index}function find$1(nodeById,nodeId){var node=nodeById.get(nodeId);if(!node)throw new Error("missing: "+nodeId);return node}function x$4(d){return d.x}function y$4(d){return d.y}treeProto$1.copy=function(){var nodes,child,copy=new Quadtree$1(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root;if(!node)return copy;if(!node.length)return copy._root=leaf_copy$1(node),copy;for(nodes=[{source:node,target:copy._root=new Array(4)}];node=nodes.pop();)for(var i=0;i<4;++i)(child=node.source[i])&&(child.length?nodes.push({source:child,target:node.target[i]=new Array(4)}):node.target[i]=leaf_copy$1(child));return copy},treeProto$1.add=function tree_add$1(d){var x=+this._x.call(null,d),y=+this._y.call(null,d);return add$2(this.cover(x,y),x,y,d)},treeProto$1.addAll=function addAll$1(data){var d,i,x,y,n=data.length,xz=new Array(n),yz=new Array(n),x0=1/0,y0=1/0,x1=-1/0,y1=-1/0;for(i=0;i<n;++i)isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d))||(xz[i]=x,yz[i]=y,x<x0&&(x0=x),x>x1&&(x1=x),y<y0&&(y0=y),y>y1&&(y1=y));if(x0>x1||y0>y1)return this;for(this.cover(x0,y0).cover(x1,y1),i=0;i<n;++i)add$2(this,xz[i],yz[i],data[i]);return this},treeProto$1.cover=function tree_cover$1(x,y){if(isNaN(x=+x)||isNaN(y=+y))return this;var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0))x1=(x0=Math.floor(x))+1,y1=(y0=Math.floor(y))+1;else{for(var parent,i,z=x1-x0,node=this._root;x0>x||x>=x1||y0>y||y>=y1;)switch(i=(y<y0)<<1|x<x0,(parent=new Array(4))[i]=node,node=parent,z*=2,i){case 0:x1=x0+z,y1=y0+z;break;case 1:x0=x1-z,y1=y0+z;break;case 2:x1=x0+z,y0=y1-z;break;case 3:x0=x1-z,y0=y1-z}this._root&&this._root.length&&(this._root=node)}return this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this},treeProto$1.data=function tree_data$1(){var data=[];return this.visit((function(node){if(!node.length)do{data.push(node.data)}while(node=node.next)})),data},treeProto$1.extent=function tree_extent$1(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},treeProto$1.find=function tree_find$1(x,y,radius){var data,x1,y1,x2,y2,q,i,x0=this._x0,y0=this._y0,x3=this._x1,y3=this._y1,quads=[],node=this._root;for(node&&quads.push(new Quad$1(node,x0,y0,x3,y3)),null==radius?radius=1/0:(x0=x-radius,y0=y-radius,x3=x+radius,y3=y+radius,radius*=radius);q=quads.pop();)if(!(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0))if(node.length){var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new Quad$1(node[3],xm,ym,x2,y2),new Quad$1(node[2],x1,ym,xm,y2),new Quad$1(node[1],xm,y1,x2,ym),new Quad$1(node[0],x1,y1,xm,ym)),(i=(y>=ym)<<1|x>=xm)&&(q=quads[quads.length-1],quads[quads.length-1]=quads[quads.length-1-i],quads[quads.length-1-i]=q)}else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;if(d2<radius){var d=Math.sqrt(radius=d2);x0=x-d,y0=y-d,x3=x+d,y3=y+d,data=node.data}}return data},treeProto$1.remove=function tree_remove$1(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;var parent,retainer,previous,next,x,y,xm,ym,right,bottom,i,j,node=this._root,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(!node)return this;if(node.length)for(;;){if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return this;if(!node.length)break;(parent[i+1&3]||parent[i+2&3]||parent[i+3&3])&&(retainer=parent,j=i)}for(;node.data!==d;)if(previous=node,!(node=node.next))return this;return(next=node.next)&&delete node.next,previous?(next?previous.next=next:delete previous.next,this):parent?(next?parent[i]=next:delete parent[i],(node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length&&(retainer?retainer[j]=node:this._root=node),this):(this._root=next,this)},treeProto$1.removeAll=function removeAll$1(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this},treeProto$1.root=function tree_root$1(){return this._root},treeProto$1.size=function tree_size$1(){var size=0;return this.visit((function(node){if(!node.length)do{++size}while(node=node.next)})),size},treeProto$1.visit=function tree_visit$1(callback){var q,child,x0,y0,x1,y1,quads=[],node=this._root;for(node&&quads.push(new Quad$1(node,this._x0,this._y0,this._x1,this._y1));q=quads.pop();)if(!callback(node=q.node,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1)&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[3])&&quads.push(new Quad$1(child,xm,ym,x1,y1)),(child=node[2])&&quads.push(new Quad$1(child,x0,ym,xm,y1)),(child=node[1])&&quads.push(new Quad$1(child,xm,y0,x1,ym)),(child=node[0])&&quads.push(new Quad$1(child,x0,y0,xm,ym))}return this},treeProto$1.visitAfter=function tree_visitAfter$1(callback){var q,quads=[],next=[];for(this._root&&quads.push(new Quad$1(this._root,this._x0,this._y0,this._x1,this._y1));q=quads.pop();){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[0])&&quads.push(new Quad$1(child,x0,y0,xm,ym)),(child=node[1])&&quads.push(new Quad$1(child,xm,y0,x1,ym)),(child=node[2])&&quads.push(new Quad$1(child,x0,ym,xm,y1)),(child=node[3])&&quads.push(new Quad$1(child,xm,ym,x1,y1))}next.push(q)}for(;q=next.pop();)callback(q.node,q.x0,q.y0,q.x1,q.y1);return this},treeProto$1.x=function tree_x$1(_){return arguments.length?(this._x=_,this):this._x},treeProto$1.y=function tree_y$1(_){return arguments.length?(this._y=_,this):this._y};var prefixExponent$1,initialAngle=Math.PI*(3-Math.sqrt(5));function formatDecimal$1(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent$2(x){return(x=formatDecimal$1(Math.abs(x)))?x[1]:NaN}function formatRounded$1(x,p){var d=formatDecimal$1(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}var formatTypes$1={"":function formatDefault(x,p){out:for(var i1,n=(x=x.toPrecision(p)).length,i=1,i0=-1;i<n;++i)switch(x[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;case"e":break out;default:i0>0&&(i0=0)}return i0>0?x.slice(0,i0)+x.slice(i1+1):x},"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded$1(100*x,p)},r:formatRounded$1,s:function formatPrefixAuto$1(x,p){var d=formatDecimal$1(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent$1=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal$1(x,Math.max(0,p+i-1))[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}},re$1=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function formatSpecifier$1(specifier){return new FormatSpecifier$1(specifier)}function FormatSpecifier$1(specifier){if(!(match=re$1.exec(specifier)))throw new Error("invalid format: "+specifier);var match,fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zero=!!match[5],width=match[6]&&+match[6],comma=!!match[7],precision=match[8]&&+match[8].slice(1),type=match[9]||"";"n"===type?(comma=!0,type="g"):formatTypes$1[type]||(type=""),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="="),this.fill=fill,this.align=align,this.sign=sign,this.symbol=symbol,this.zero=zero,this.width=width,this.comma=comma,this.precision=precision,this.type=type}function identity$9(x){return x}formatSpecifier$1.prototype=FormatSpecifier$1.prototype,FormatSpecifier$1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var locale$3,format$1,formatPrefix$1,prefixes$2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$3(locale){var group=locale.grouping&&locale.thousands?function formatGroup$1(grouping,thousands){return function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}(locale.grouping,locale.thousands):identity$9,currency=locale.currency,decimal=locale.decimal,numerals=locale.numerals?function formatNumerals$1(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(locale.numerals):identity$9,percent=locale.percent||"%";function newFormat(specifier){var fill=(specifier=formatSpecifier$1(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,type=specifier.type,prefix="$"===symbol?currency[0]:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currency[1]:/[%p]/.test(type)?percent:"",formatType=formatTypes$1[type],maybeSuffix=!type||/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0;if(value=formatType(Math.abs(value),precision),valueNegative&&0==+value&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:"-":"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes$2[8+prefixExponent$1/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=null==precision?type?6:12:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier$1(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(exponent$2(value)/3))),k=Math.pow(10,-e),prefix=prefixes$2[8+e/3];return function(value){return f(k*value)+prefix}}}}function defaultLocale$3(definition){return locale$3=formatLocale$3(definition),format$1=locale$3.format,formatPrefix$1=locale$3.formatPrefix,locale$3}function adder(){return new Adder}function Adder(){this.reset()}defaultLocale$3({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(y){add$1(temp,y,this.t),add$1(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add$1(adder,a,b){var x=adder.s=a+b,bv=x-a,av=x-bv;adder.t=a-av+(b-bv)}var epsilon$5=1e-6,pi$4=Math.PI,halfPi$2=pi$4/2,quarterPi=pi$4/4,tau$5=2*pi$4,degrees$2=180/pi$4,radians=pi$4/180,abs$1=Math.abs,atan=Math.atan,atan2$1=Math.atan2,cos$1=Math.cos,ceil=Math.ceil,exp=Math.exp,log$1=Math.log,pow$1=Math.pow,sin$1=Math.sin,sign$2=Math.sign||function(x){return x>0?1:x<0?-1:0},sqrt$2=Math.sqrt,tan=Math.tan;function acos$1(x){return x>1?0:x<-1?pi$4:Math.acos(x)}function asin$2(x){return x>1?halfPi$2:x<-1?-halfPi$2:Math.asin(x)}function haversin(x){return(x=sin$1(x/2))*x}function noop$5(){}function streamGeometry(geometry,stream){geometry&&streamGeometryType.hasOwnProperty(geometry.type)&&streamGeometryType[geometry.type](geometry,stream)}var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){for(var features=object.features,i=-1,n=features.length;++i<n;)streamGeometry(features[i].geometry,stream)}},streamGeometryType={Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object=object.coordinates,stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamLine(coordinates[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamPolygon(coordinates[i],stream)},GeometryCollection:function(object,stream){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)streamGeometry(geometries[i],stream)}};function streamLine(coordinates,stream,closed){var coordinate,i=-1,n=coordinates.length-closed;for(stream.lineStart();++i<n;)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;for(stream.polygonStart();++i<n;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}function geoStream(object,stream){object&&streamObjectType.hasOwnProperty(object.type)?streamObjectType[object.type](object,stream):streamGeometry(object,stream)}var lambda00$2,phi00$2,lambda0$2,cosPhi0$1,sinPhi0$1,areaRingSum$1=adder(),areaSum$1=adder(),areaStream$1={point:noop$5,lineStart:noop$5,lineEnd:noop$5,polygonStart:function(){areaRingSum$1.reset(),areaStream$1.lineStart=areaRingStart$1,areaStream$1.lineEnd=areaRingEnd$1},polygonEnd:function(){var areaRing=+areaRingSum$1;areaSum$1.add(areaRing<0?tau$5+areaRing:areaRing),this.lineStart=this.lineEnd=this.point=noop$5},sphere:function(){areaSum$1.add(tau$5)}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1}function areaRingEnd$1(){areaPoint$1(lambda00$2,phi00$2)}function areaPointFirst$1(lambda,phi){areaStream$1.point=areaPoint$1,lambda00$2=lambda,phi00$2=phi,lambda0$2=lambda*=radians,cosPhi0$1=cos$1(phi=(phi*=radians)/2+quarterPi),sinPhi0$1=sin$1(phi)}function areaPoint$1(lambda,phi){var dLambda=(lambda*=radians)-lambda0$2,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=cos$1(phi=(phi*=radians)/2+quarterPi),sinPhi=sin$1(phi),k=sinPhi0$1*sinPhi,u=cosPhi0$1*cosPhi+k*cos$1(adLambda),v=k*sdLambda*sin$1(adLambda);areaRingSum$1.add(atan2$1(v,u)),lambda0$2=lambda,cosPhi0$1=cosPhi,sinPhi0$1=sinPhi}function spherical(cartesian){return[atan2$1(cartesian[1],cartesian[0]),asin$2(cartesian[2])]}function cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=cos$1(phi);return[cosPhi*cos$1(lambda),cosPhi*sin$1(lambda),sin$1(phi)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function cartesianNormalizeInPlace(d){var l=sqrt$2(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}var lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,ranges,range,W0,W1,X0$1,Y0$1,Z0$1,X1$1,Y1$1,Z1$1,X2$1,Y2$1,Z2$1,lambda00,phi00,x0$4,y0$4,z0,deltaSum=adder(),boundsStream$1={point:boundsPoint$1,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream$1.point=boundsRingPoint,boundsStream$1.lineStart=boundsRingStart,boundsStream$1.lineEnd=boundsRingEnd,deltaSum.reset(),areaStream$1.polygonStart()},polygonEnd:function(){areaStream$1.polygonEnd(),boundsStream$1.point=boundsPoint$1,boundsStream$1.lineStart=boundsLineStart,boundsStream$1.lineEnd=boundsLineEnd,areaRingSum$1<0?(lambda0$1=-(lambda1=180),phi0=-(phi1=90)):deltaSum>epsilon$5?phi1=90:deltaSum<-epsilon$5&&(phi0=-90),range[0]=lambda0$1,range[1]=lambda1}};function boundsPoint$1(lambda,phi){ranges.push(range=[lambda0$1=lambda,lambda1=lambda]),phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi)}function linePoint(lambda,phi){var p=cartesian([lambda*radians,phi*radians]);if(p0){var normal=cartesianCross(p0,p),inflection=cartesianCross([normal[1],-normal[0],0],normal);cartesianNormalizeInPlace(inflection),inflection=spherical(inflection);var phii,delta=lambda-lambda2,sign=delta>0?1:-1,lambdai=inflection[0]*degrees$2*sign,antimeridian=abs$1(delta)>180;antimeridian^(sign*lambda2<lambdai&&lambdai<sign*lambda)?(phii=inflection[1]*degrees$2)>phi1&&(phi1=phii):antimeridian^(sign*lambda2<(lambdai=(lambdai+360)%360-180)&&lambdai<sign*lambda)?(phii=-inflection[1]*degrees$2)<phi0&&(phi0=phii):(phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi)),antimeridian?lambda<lambda2?angle(lambda0$1,lambda)>angle(lambda0$1,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=lambda):lambda1>=lambda0$1?(lambda<lambda0$1&&(lambda0$1=lambda),lambda>lambda1&&(lambda1=lambda)):lambda>lambda2?angle(lambda0$1,lambda)>angle(lambda0$1,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=lambda)}else ranges.push(range=[lambda0$1=lambda,lambda1=lambda]);phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi),p0=p,lambda2=lambda}function boundsLineStart(){boundsStream$1.point=linePoint}function boundsLineEnd(){range[0]=lambda0$1,range[1]=lambda1,boundsStream$1.point=boundsPoint$1,p0=null}function boundsRingPoint(lambda,phi){if(p0){var delta=lambda-lambda2;deltaSum.add(abs$1(delta)>180?delta+(delta>0?360:-360):delta)}else lambda00$1=lambda,phi00$1=phi;areaStream$1.point(lambda,phi),linePoint(lambda,phi)}function boundsRingStart(){areaStream$1.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1),areaStream$1.lineEnd(),abs$1(deltaSum)>epsilon$5&&(lambda0$1=-(lambda1=180)),range[0]=lambda0$1,range[1]=lambda1,p0=null}function angle(lambda0,lambda1){return(lambda1-=lambda0)<0?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}var centroidStream$1={sphere:noop$5,point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.lineStart=centroidLineStart$1,centroidStream$1.lineEnd=centroidLineEnd$1}};function centroidPoint$1(lambda,phi){lambda*=radians;var cosPhi=cos$1(phi*=radians);centroidPointCartesian(cosPhi*cos$1(lambda),cosPhi*sin$1(lambda),sin$1(phi))}function centroidPointCartesian(x,y,z){++W0,X0$1+=(x-X0$1)/W0,Y0$1+=(y-Y0$1)/W0,Z0$1+=(z-Z0$1)/W0}function centroidLineStart$1(){centroidStream$1.point=centroidLinePointFirst}function centroidLinePointFirst(lambda,phi){lambda*=radians;var cosPhi=cos$1(phi*=radians);x0$4=cosPhi*cos$1(lambda),y0$4=cosPhi*sin$1(lambda),z0=sin$1(phi),centroidStream$1.point=centroidLinePoint,centroidPointCartesian(x0$4,y0$4,z0)}function centroidLinePoint(lambda,phi){lambda*=radians;var cosPhi=cos$1(phi*=radians),x=cosPhi*cos$1(lambda),y=cosPhi*sin$1(lambda),z=sin$1(phi),w=atan2$1(sqrt$2((w=y0$4*z-z0*y)*w+(w=z0*x-x0$4*z)*w+(w=x0$4*y-y0$4*x)*w),x0$4*x+y0$4*y+z0*z);W1+=w,X1$1+=w*(x0$4+(x0$4=x)),Y1$1+=w*(y0$4+(y0$4=y)),Z1$1+=w*(z0+(z0=z)),centroidPointCartesian(x0$4,y0$4,z0)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidRingPointFirst}function centroidRingEnd$1(){centroidRingPoint(lambda00,phi00),centroidStream$1.point=centroidPoint$1}function centroidRingPointFirst(lambda,phi){lambda00=lambda,phi00=phi,lambda*=radians,phi*=radians,centroidStream$1.point=centroidRingPoint;var cosPhi=cos$1(phi);x0$4=cosPhi*cos$1(lambda),y0$4=cosPhi*sin$1(lambda),z0=sin$1(phi),centroidPointCartesian(x0$4,y0$4,z0)}function centroidRingPoint(lambda,phi){lambda*=radians;var cosPhi=cos$1(phi*=radians),x=cosPhi*cos$1(lambda),y=cosPhi*sin$1(lambda),z=sin$1(phi),cx=y0$4*z-z0*y,cy=z0*x-x0$4*z,cz=x0$4*y-y0$4*x,m=sqrt$2(cx*cx+cy*cy+cz*cz),w=asin$2(m),v=m&&-w/m;X2$1+=v*cx,Y2$1+=v*cy,Z2$1+=v*cz,W1+=w,X1$1+=w*(x0$4+(x0$4=x)),Y1$1+=w*(y0$4+(y0$4=y)),Z1$1+=w*(z0+(z0=z)),centroidPointCartesian(x0$4,y0$4,z0)}function constant$f(x){return function(){return x}}function compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return(x=b.invert(x,y))&&a.invert(x[0],x[1])}),compose}function rotationIdentity(lambda,phi){return[lambda>pi$4?lambda-tau$5:lambda<-pi$4?lambda+tau$5:lambda,phi]}function rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%=tau$5)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity}function forwardRotationLambda(deltaLambda){return function(lambda,phi){return[(lambda+=deltaLambda)>pi$4?lambda-tau$5:lambda<-pi$4?lambda+tau$5:lambda,phi]}}function rotationLambda(deltaLambda){var rotation=forwardRotationLambda(deltaLambda);return rotation.invert=forwardRotationLambda(-deltaLambda),rotation}function rotationPhiGamma(deltaPhi,deltaGamma){var cosDeltaPhi=cos$1(deltaPhi),sinDeltaPhi=sin$1(deltaPhi),cosDeltaGamma=cos$1(deltaGamma),sinDeltaGamma=sin$1(deltaGamma);function rotation(lambda,phi){var cosPhi=cos$1(phi),x=cos$1(lambda)*cosPhi,y=sin$1(lambda)*cosPhi,z=sin$1(phi),k=z*cosDeltaPhi+x*sinDeltaPhi;return[atan2$1(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-z*sinDeltaPhi),asin$2(k*cosDeltaGamma+y*sinDeltaGamma)]}return rotation.invert=function(lambda,phi){var cosPhi=cos$1(phi),x=cos$1(lambda)*cosPhi,y=sin$1(lambda)*cosPhi,z=sin$1(phi),k=z*cosDeltaGamma-y*sinDeltaGamma;return[atan2$1(y*cosDeltaGamma+z*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi),asin$2(k*cosDeltaPhi-x*sinDeltaPhi)]},rotation}function rotation(rotate){function forward(coordinates){return(coordinates=rotate(coordinates[0]*radians,coordinates[1]*radians))[0]*=degrees$2,coordinates[1]*=degrees$2,coordinates}return rotate=rotateRadians(rotate[0]*radians,rotate[1]*radians,rotate.length>2?rotate[2]*radians:0),forward.invert=function(coordinates){return(coordinates=rotate.invert(coordinates[0]*radians,coordinates[1]*radians))[0]*=degrees$2,coordinates[1]*=degrees$2,coordinates},forward}function circleStream(stream,radius,delta,direction,t0,t1){if(delta){var cosRadius=cos$1(radius),sinRadius=sin$1(radius),step=direction*delta;null==t0?(t0=radius+direction*tau$5,t1=radius-step/2):(t0=circleRadius(cosRadius,t0),t1=circleRadius(cosRadius,t1),(direction>0?t0<t1:t0>t1)&&(t0+=direction*tau$5));for(var point,t=t0;direction>0?t>t1:t<t1;t-=step)point=spherical([cosRadius,-sinRadius*cos$1(t),-sinRadius*sin$1(t)]),stream.point(point[0],point[1])}}function circleRadius(cosRadius,point){(point=cartesian(point))[0]-=cosRadius,cartesianNormalizeInPlace(point);var radius=acos$1(-point[1]);return((-point[2]<0?-radius:radius)+tau$5-epsilon$5)%tau$5}function clipBuffer(){var line,lines=[];return{point:function(x,y){line.push([x,y])},lineStart:function(){lines.push(line=[])},lineEnd:noop$5,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;return lines=[],line=null,result}}}function pointEqual(a,b){return abs$1(a[0]-b[0])<epsilon$5&&abs$1(a[1]-b[1])<epsilon$5}function Intersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function clipRejoin(segments,compareIntersection,startInside,interpolate,stream){var i,n,subject=[],clip=[];if(segments.forEach((function(segment){if(!((n=segment.length-1)<=0)){var n,x,p0=segment[0],p1=segment[n];if(pointEqual(p0,p1)){for(stream.lineStart(),i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);stream.lineEnd()}else subject.push(x=new Intersection(p0,segment,null,!0)),clip.push(x.o=new Intersection(p0,null,x,!1)),subject.push(x=new Intersection(p1,segment,null,!1)),clip.push(x.o=new Intersection(p1,null,x,!0))}})),subject.length){for(clip.sort(compareIntersection),link$1(subject),link$1(clip),i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);current=current.p}points=(current=current.o).z,isSubject=!isSubject}while(!current.v);stream.lineEnd()}}}function link$1(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}rotationIdentity.invert=rotationIdentity;var sum$1=adder();function polygonContains(polygon,point){var lambda=point[0],phi=point[1],normal=[sin$1(lambda),-cos$1(lambda),0],angle=0,winding=0;sum$1.reset();for(var i=0,n=polygon.length;i<n;++i)if(m=(ring=polygon[i]).length)for(var ring,m,point0=ring[m-1],lambda0=point0[0],phi0=point0[1]/2+quarterPi,sinPhi0=sin$1(phi0),cosPhi0=cos$1(phi0),j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=point1[0],phi1=point1[1]/2+quarterPi,sinPhi1=sin$1(phi1),cosPhi1=cos$1(phi1),delta=lambda1-lambda0,sign=delta>=0?1:-1,absDelta=sign*delta,antimeridian=absDelta>pi$4,k=sinPhi0*sinPhi1;if(sum$1.add(atan2$1(k*sign*sin$1(absDelta),cosPhi0*cosPhi1+k*cos$1(absDelta))),angle+=antimeridian?delta+sign*tau$5:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian(point0),cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^delta>=0?-1:1)*asin$2(intersection[2]);(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1)}}return(angle<-epsilon$5||angle<epsilon$5&&sum$1<-epsilon$5)^1&winding}function clip(pointVisible,clipLine,interpolate,start){return function(sink){var polygon,segments,ring,line=clipLine(sink),ringBuffer=clipBuffer(),ringSink=clipLine(ringBuffer),polygonStarted=!1,clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=merge$1(segments);var startInside=polygonContains(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted=!0),clipRejoin(segments,compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){sink.polygonStart(),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),sink.polygonEnd()}};function point(lambda,phi){pointVisible(lambda,phi)&&sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]),ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var i,m,segment,point,clean=ringSink.clean(),ringSegments=ringBuffer.result(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){if((m=(segment=ringSegments[0]).length-1)>0){for(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);sink.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}return clip}}function validSegment(segment){return segment.length>1}function compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-halfPi$2-epsilon$5:halfPi$2-a[1])-((b=b.x)[0]<0?b[1]-halfPi$2-epsilon$5:halfPi$2-b[1])}var clipAntimeridian=clip((function(){return!0}),(function clipAntimeridianLine(stream){var clean,lambda0=NaN,phi0=NaN,sign0=NaN;return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?pi$4:-pi$4,delta=abs$1(lambda1-lambda0);abs$1(delta-pi$4)<epsilon$5?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?halfPi$2:-halfPi$2),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=pi$4&&(abs$1(lambda0-sign0)<epsilon$5&&(lambda0-=sign0*epsilon$5),abs$1(lambda1-sign1)<epsilon$5&&(lambda1-=sign1*epsilon$5),phi0=function clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=sin$1(lambda0-lambda1);return abs$1(sinLambda0Lambda1)>epsilon$5?atan((sin$1(phi0)*(cosPhi1=cos$1(phi1))*sin$1(lambda1)-sin$1(phi1)*(cosPhi0=cos$1(phi0))*sin$1(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}(lambda0,phi0,lambda1,phi1),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN},clean:function(){return 2-clean}}}),(function clipAntimeridianInterpolate(from,to,direction,stream){var phi;if(null==from)phi=direction*halfPi$2,stream.point(-pi$4,phi),stream.point(0,phi),stream.point(pi$4,phi),stream.point(pi$4,0),stream.point(pi$4,-phi),stream.point(0,-phi),stream.point(-pi$4,-phi),stream.point(-pi$4,0),stream.point(-pi$4,phi);else if(abs$1(from[0]-to[0])>epsilon$5){var lambda=from[0]<to[0]?pi$4:-pi$4;phi=direction*lambda/2,stream.point(-lambda,phi),stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1])}),[-pi$4,-halfPi$2]);function clipCircle(radius){var cr=cos$1(radius),delta=6*radians,smallRadius=cr>0,notHemisphere=abs$1(cr)>epsilon$5;function visible(lambda,phi){return cos$1(lambda)*cos$1(phi)>cr}function intersect(a,b,two){var n1=[1,0,0],n2=cartesianCross(cartesian(a),cartesian(b)),n2n2=cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=cartesianCross(n1,n2),A=cartesianScale(n1,c1);cartesianAddInPlace(A,cartesianScale(n2,c2));var u=n1xn2,w=cartesianDot(A,u),uu=cartesianDot(u,u),t2=w*w-uu*(cartesianDot(A,A)-1);if(!(t2<0)){var t=sqrt$2(t2),q=cartesianScale(u,(-w-t)/uu);if(cartesianAddInPlace(q,A),q=spherical(q),!two)return q;var z,lambda0=a[0],lambda1=b[0],phi0=a[1],phi1=b[1];lambda1<lambda0&&(z=lambda0,lambda0=lambda1,lambda1=z);var delta=lambda1-lambda0,polar=abs$1(delta-pi$4)<epsilon$5;if(!polar&&phi1<phi0&&(z=phi0,phi0=phi1,phi1=z),polar||delta<epsilon$5?polar?phi0+phi1>0^q[1]<(abs$1(q[0]-lambda0)<epsilon$5?phi0:phi1):phi0<=q[1]&&q[1]<=phi1:delta>pi$4^(lambda0<=q[0]&&q[0]<=lambda1)){var q1=cartesianScale(u,(-w+t)/uu);return cartesianAddInPlace(q1,A),[q,spherical(q1)]}}}function code(lambda,phi){var r=smallRadius?radius:pi$4-radius,code=0;return lambda<-r?code|=1:lambda>r&&(code|=2),phi<-r?code|=4:phi>r&&(code|=8),code}return clip(visible,(function clipLine(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(lambda,phi){var point2,point1=[lambda,phi],v=visible(lambda,phi),c=smallRadius?v?0:code(lambda,phi):v?code(lambda+(lambda<0?pi$4:-pi$4),phi):0;if(!point0&&(v00=v0=v)&&stream.lineStart(),v!==v0&&(!(point2=intersect(point0,point1))||pointEqual(point0,point2)||pointEqual(point1,point2))&&(point1[0]+=epsilon$5,point1[1]+=epsilon$5,v=visible(point1[0],point1[1])),v!==v0)clean=0,v?(stream.lineStart(),point2=intersect(point1,point0),stream.point(point2[0],point2[1])):(point2=intersect(point0,point1),stream.point(point2[0],point2[1]),stream.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(stream.lineStart(),stream.point(t[0][0],t[0][1]),stream.point(t[1][0],t[1][1]),stream.lineEnd()):(stream.point(t[1][0],t[1][1]),stream.lineEnd(),stream.lineStart(),stream.point(t[0][0],t[0][1])))}!v||point0&&pointEqual(point0,point1)||stream.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&stream.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}}),(function interpolate(from,to,direction,stream){circleStream(stream,radius,delta,direction,from,to)}),smallRadius?[0,-radius]:[-pi$4,radius-pi$4])}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(x0,y0,x1,y1){function visible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function interpolate(from,to,direction,stream){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoint(from,to)<0^direction>0)do{stream.point(0===a||3===a?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1);else stream.point(to[0],to[1])}function corner(p,direction){return abs$1(p[0]-x0)<epsilon$5?direction>0?0:3:abs$1(p[0]-x1)<epsilon$5?direction>0?2:1:abs$1(p[1]-y0)<epsilon$5?direction>0?1:0:direction>0?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}return function(stream){var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,activeStream=stream,bufferStream=clipBuffer(),clipStream={point:point,lineStart:function lineStart(){clipStream.point=linePoint,polygon&&polygon.push(ring=[]);first=!0,v_=!1,x_=y_=NaN},lineEnd:function lineEnd(){segments&&(linePoint(x__,y__),v__&&v_&&bufferStream.rejoin(),segments.push(bufferStream.result()));clipStream.point=point,v_&&activeStream.lineEnd()},polygonStart:function polygonStart(){activeStream=bufferStream,segments=[],polygon=[],clean=!0},polygonEnd:function polygonEnd(){var startInside=function polygonInside(){for(var winding=0,i=0,n=polygon.length;i<n;++i)for(var a0,a1,ring=polygon[i],j=1,m=ring.length,point=ring[0],b0=point[0],b1=point[1];j<m;++j)a0=b0,a1=b1,b0=(point=ring[j])[0],b1=point[1],a1<=y1?b1>y1&&(b0-a0)*(y1-a1)>(b1-a1)*(x0-a0)&&++winding:b1<=y1&&(b0-a0)*(y1-a1)<(b1-a1)*(x0-a0)&&--winding;return winding}(),cleanInside=clean&&startInside,visible=(segments=merge$1(segments)).length;(cleanInside||visible)&&(stream.polygonStart(),cleanInside&&(stream.lineStart(),interpolate(null,null,1,stream),stream.lineEnd()),visible&&clipRejoin(segments,compareIntersection,startInside,interpolate,stream),stream.polygonEnd());activeStream=stream,segments=polygon=ring=null}};function point(x,y){visible(x,y)&&activeStream.point(x,y)}function linePoint(x,y){var v=visible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(activeStream.lineStart(),activeStream.point(x,y));else if(v&&v_)activeStream.point(x,y);else{var a=[x_=Math.max(clipMin,Math.min(clipMax,x_)),y_=Math.max(clipMin,Math.min(clipMax,y_))],b=[x=Math.max(clipMin,Math.min(clipMax,x)),y=Math.max(clipMin,Math.min(clipMax,y))];!function clipLine(a,b,x0,y0,x1,y1){var r,ax=a[0],ay=a[1],t0=0,t1=1,dx=b[0]-ax,dy=b[1]-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return t0>0&&(a[0]=ax+t0*dx,a[1]=ay+t0*dy),t1<1&&(b[0]=ax+t1*dx,b[1]=ay+t1*dy),!0}}}}}(a,b,x0,y0,x1,y1)?v&&(activeStream.lineStart(),activeStream.point(x,y),clean=!1):(v_||(activeStream.lineStart(),activeStream.point(a[0],a[1])),activeStream.point(b[0],b[1]),v||activeStream.lineEnd(),clean=!1)}x_=x,y_=y,v_=v}return clipStream}}var lambda0,sinPhi0,cosPhi0,lengthSum$1=adder(),lengthStream$1={sphere:noop$5,point:noop$5,lineStart:function lengthLineStart(){lengthStream$1.point=lengthPointFirst$1,lengthStream$1.lineEnd=lengthLineEnd},lineEnd:noop$5,polygonStart:noop$5,polygonEnd:noop$5};function lengthLineEnd(){lengthStream$1.point=lengthStream$1.lineEnd=noop$5}function lengthPointFirst$1(lambda,phi){lambda0=lambda*=radians,sinPhi0=sin$1(phi*=radians),cosPhi0=cos$1(phi),lengthStream$1.point=lengthPoint$1}function lengthPoint$1(lambda,phi){lambda*=radians;var sinPhi=sin$1(phi*=radians),cosPhi=cos$1(phi),delta=abs$1(lambda-lambda0),cosDelta=cos$1(delta),x=cosPhi*sin$1(delta),y=cosPhi0*sinPhi-sinPhi0*cosPhi*cosDelta,z=sinPhi0*sinPhi+cosPhi0*cosPhi*cosDelta;lengthSum$1.add(atan2$1(sqrt$2(x*x+y*y),z)),lambda0=lambda,sinPhi0=sinPhi,cosPhi0=cosPhi}function length$1(object){return lengthSum$1.reset(),geoStream(object,lengthStream$1),+lengthSum$1}var coordinates=[null,null],object$3={type:"LineString",coordinates:coordinates};function distance(a,b){return coordinates[0]=a,coordinates[1]=b,length$1(object$3)}var containsObjectType={Feature:function(object,point){return containsGeometry(object.geometry,point)},FeatureCollection:function(object,point){for(var features=object.features,i=-1,n=features.length;++i<n;)if(containsGeometry(features[i].geometry,point))return!0;return!1}},containsGeometryType={Sphere:function(){return!0},Point:function(object,point){return containsPoint(object.coordinates,point)},MultiPoint:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsPoint(coordinates[i],point))return!0;return!1},LineString:function(object,point){return containsLine(object.coordinates,point)},MultiLineString:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsLine(coordinates[i],point))return!0;return!1},Polygon:function(object,point){return containsPolygon(object.coordinates,point)},MultiPolygon:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsPolygon(coordinates[i],point))return!0;return!1},GeometryCollection:function(object,point){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)if(containsGeometry(geometries[i],point))return!0;return!1}};function containsGeometry(geometry,point){return!(!geometry||!containsGeometryType.hasOwnProperty(geometry.type))&&containsGeometryType[geometry.type](geometry,point)}function containsPoint(coordinates,point){return 0===distance(coordinates,point)}function containsLine(coordinates,point){var ab=distance(coordinates[0],coordinates[1]);return distance(coordinates[0],point)+distance(point,coordinates[1])<=ab+epsilon$5}function containsPolygon(coordinates,point){return!!polygonContains(coordinates.map(ringRadians),pointRadians(point))}function ringRadians(ring){return(ring=ring.map(pointRadians)).pop(),ring}function pointRadians(point){return[point[0]*radians,point[1]*radians]}function graticuleX(y0,y1,dy){var y=range$2(y0,y1-epsilon$5,dy).concat(y1);return function(x){return y.map((function(y){return[x,y]}))}}function graticuleY(x0,x1,dx){var x=range$2(x0,x1-epsilon$5,dx).concat(x1);return function(y){return x.map((function(x){return[x,y]}))}}function graticule(){var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return range$2(ceil(X0/DX)*DX,X1,DX).map(X).concat(range$2(ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(range$2(ceil(x0/dx)*dx,x1,dx).filter((function(x){return abs$1(x%DX)>epsilon$5})).map(x)).concat(range$2(ceil(y0/dy)*dy,y1,dy).filter((function(y){return abs$1(y%DY)>epsilon$5})).map(y))}return graticule.lines=function(){return lines().map((function(coordinates){return{type:"LineString",coordinates:coordinates}}))},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.extentMajor(_).extentMinor(_):graticule.extentMinor()},graticule.extentMajor=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.extentMinor=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.stepMajor(_).stepMinor(_):graticule.stepMinor()},graticule.stepMajor=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.stepMinor=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=graticuleX(y0,y1,90),y=graticuleY(x0,x1,precision),X=graticuleX(Y0,Y1,90),Y=graticuleY(X0,X1,precision),graticule):precision},graticule.extentMajor([[-180,-90+epsilon$5],[180,90-epsilon$5]]).extentMinor([[-180,-80-epsilon$5],[180,80+epsilon$5]])}function identity$8(x){return x}var x00$2,y00$2,x0$3,y0$3,areaSum=adder(),areaRingSum=adder(),areaStream={point:noop$5,lineStart:noop$5,lineEnd:noop$5,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$5,areaSum.add(abs$1(areaRingSum)),areaRingSum.reset()},result:function(){var area=areaSum/2;return areaSum.reset(),area}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(x,y){areaStream.point=areaPoint,x00$2=x0$3=x,y00$2=y0$3=y}function areaPoint(x,y){areaRingSum.add(y0$3*x-x0$3*y),x0$3=x,y0$3=y}function areaRingEnd(){areaPoint(x00$2,y00$2)}var x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream={point:function boundsPoint(x,y){x<x0$2&&(x0$2=x);x>x1&&(x1=x);y<y0$2&&(y0$2=y);y>y1&&(y1=y)},lineStart:noop$5,lineEnd:noop$5,polygonStart:noop$5,polygonEnd:noop$5,result:function(){var bounds=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),bounds}};var x00$1,y00$1,x0$1,y0$1,X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var centroid=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,centroid}};function centroidPoint(x,y){X0+=x,Y0+=y,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(x,y){centroidStream.point=centroidPointLine,centroidPoint(x0$1=x,y0$1=y)}function centroidPointLine(x,y){var dx=x-x0$1,dy=y-y0$1,z=sqrt$2(dx*dx+dy*dy);X1+=z*(x0$1+x)/2,Y1+=z*(y0$1+y)/2,Z1+=z,centroidPoint(x0$1=x,y0$1=y)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(x,y){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$1=x,y00$1=y0$1=y)}function centroidPointRing(x,y){var dx=x-x0$1,dy=y-y0$1,z=sqrt$2(dx*dx+dy*dy);X1+=z*(x0$1+x)/2,Y1+=z*(y0$1+y)/2,Z1+=z,X2+=(z=y0$1*x-x0$1*y)*(x0$1+x),Y2+=z*(y0$1+y),Z2+=3*z,centroidPoint(x0$1=x,y0$1=y)}function PathContext(context){this._context=context}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._context.moveTo(x,y),this._point=1;break;case 1:this._context.lineTo(x,y);break;default:this._context.moveTo(x+this._radius,y),this._context.arc(x,y,this._radius,0,tau$5)}},result:noop$5};var lengthRing,x00,y00,x0,y0,lengthSum=adder(),lengthStream={point:noop$5,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$5},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var length=+lengthSum;return lengthSum.reset(),length}};function lengthPointFirst(x,y){lengthStream.point=lengthPoint,x00=x0=x,y00=y0=y}function lengthPoint(x,y){x0-=x,y0-=y,lengthSum.add(sqrt$2(x0*x0+y0*y0)),x0=x,y0=y}function PathString(){this._string=[]}function circle$1(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}function transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];return s.stream=stream,s}}function TransformStream(){}function fit(projection,fitBounds,object){var clip=projection.clipExtent&&projection.clipExtent();return projection.scale(150).translate([0,0]),null!=clip&&projection.clipExtent(null),geoStream(object,projection.stream(boundsStream)),fitBounds(boundsStream.result()),null!=clip&&projection.clipExtent(clip),projection}function fitExtent(projection,extent,object){return fit(projection,(function(b){var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],k=Math.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1])),x=+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2,y=+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}function fitSize(projection,size,object){return fitExtent(projection,[[0,0],size],object)}function fitWidth(projection,width,object){return fit(projection,(function(b){var w=+width,k=w/(b[1][0]-b[0][0]),x=(w-k*(b[1][0]+b[0][0]))/2,y=-k*b[0][1];projection.scale(150*k).translate([x,y])}),object)}function fitHeight(projection,height,object){return fit(projection,(function(b){var h=+height,k=h/(b[1][1]-b[0][1]),x=-k*b[0][0],y=(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}PathString.prototype={_radius:4.5,_circle:circle$1(4.5),pointRadius:function(_){return(_=+_)!==this._radius&&(this._radius=_,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._string.push("M",x,",",y),this._point=1;break;case 1:this._string.push("L",x,",",y);break;default:null==this._circle&&(this._circle=circle$1(this._radius)),this._string.push("M",x,",",y,this._circle)}},result:function(){if(this._string.length){var result=this._string.join("");return this._string=[],result}return null}},TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var maxDepth=16,cosMinDistance=cos$1(30*radians);function resample(project,delta2){return+delta2?function resample$1(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*delta2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=sqrt$2(a*a+b*b+c*c),phi2=asin$2(c/=m),lambda2=abs$1(abs$1(c)-1)<epsilon$5||abs$1(lambda0-lambda1)<epsilon$5?(lambda0+lambda1)/2:atan2$1(b,a),p=project(lambda2,phi2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>delta2||abs$1((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,lambda0,a0,b0,c0,x2,y2,lambda2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream))}}return function(stream){var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0,resampleStream={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart(),resampleStream.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resampleStream.lineStart=lineStart}};function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resampleStream.point=linePoint,stream.lineStart()}function linePoint(lambda,phi){var c=cartesian([lambda,phi]),p=project(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0=p[0],y0=p[1],lambda0=lambda,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream),stream.point(x0,y0)}function lineEnd(){resampleStream.point=point,stream.lineEnd()}function ringStart(){lineStart(),resampleStream.point=ringPoint,resampleStream.lineEnd=ringEnd}function ringPoint(lambda,phi){linePoint(lambda00=lambda,phi),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resampleStream.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,maxDepth,stream),resampleStream.lineEnd=lineEnd,lineEnd()}return resampleStream}}(project,delta2):function resampleNone(project){return transformer({point:function(x,y){x=project(x,y),this.stream.point(x[0],x[1])}})}(project)}var transformRadians=transformer({point:function(x,y){this.stream.point(x*radians,y*radians)}});function projection(project){return projectionMutator((function(){return project}))()}function projectionMutator(projectAt){var project,dx,dy,rotate,projectRotate,y0,x1,y1,cache,cacheStream,k=150,x=480,y=250,lambda=0,phi=0,deltaLambda=0,deltaPhi=0,deltaGamma=0,theta=null,preclip=clipAntimeridian,x0=null,postclip=identity$8,delta2=.5,projectResample=resample(projectTransform,delta2);function projection(point){return[(point=projectRotate(point[0]*radians,point[1]*radians))[0]*k+dx,dy-point[1]*k]}function invert(point){return(point=projectRotate.invert((point[0]-dx)/k,(dy-point[1])/k))&&[point[0]*degrees$2,point[1]*degrees$2]}function projectTransform(x,y){return[(x=project(x,y))[0]*k+dx,dy-x[1]*k]}function recenter(){projectRotate=compose(rotate=rotateRadians(deltaLambda,deltaPhi,deltaGamma),project);var center=project(lambda,phi);return dx=x-center[0]*k,dy=y+center[1]*k,reset()}function reset(){return cache=cacheStream=null,projection}return projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transformRadians(function transformRotate(rotate){return transformer({point:function(x,y){var r=rotate(x,y);return this.stream.point(r[0],r[1])}})}(rotate)(preclip(projectResample(postclip(cacheStream=stream)))))},projection.preclip=function(_){return arguments.length?(preclip=_,theta=void 0,reset()):preclip},projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},projection.clipAngle=function(_){return arguments.length?(preclip=+_?clipCircle(theta=_*radians):(theta=null,clipAntimeridian),reset()):theta*degrees$2},projection.clipExtent=function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,identity$8):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},projection.scale=function(_){return arguments.length?(k=+_,recenter()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],recenter()):[x,y]},projection.center=function(_){return arguments.length?(lambda=_[0]%360*radians,phi=_[1]%360*radians,recenter()):[lambda*degrees$2,phi*degrees$2]},projection.rotate=function(_){return arguments.length?(deltaLambda=_[0]%360*radians,deltaPhi=_[1]%360*radians,deltaGamma=_.length>2?_[2]%360*radians:0,recenter()):[deltaLambda*degrees$2,deltaPhi*degrees$2,deltaGamma*degrees$2]},projection.precision=function(_){return arguments.length?(projectResample=resample(projectTransform,delta2=_*_),reset()):sqrt$2(delta2)},projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)},projection.fitSize=function(size,object){return fitSize(projection,size,object)},projection.fitWidth=function(width,object){return fitWidth(projection,width,object)},projection.fitHeight=function(height,object){return fitHeight(projection,height,object)},function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,recenter()}}function conicProjection(projectAt){var phi0=0,phi1=pi$4/3,m=projectionMutator(projectAt),p=m(phi0,phi1);return p.parallels=function(_){return arguments.length?m(phi0=_[0]*radians,phi1=_[1]*radians):[phi0*degrees$2,phi1*degrees$2]},p}function conicEqualAreaRaw(y0,y1){var sy0=sin$1(y0),n=(sy0+sin$1(y1))/2;if(abs$1(n)<epsilon$5)return function cylindricalEqualAreaRaw(phi0){var cosPhi0=cos$1(phi0);function forward(lambda,phi){return[lambda*cosPhi0,sin$1(phi)/cosPhi0]}return forward.invert=function(x,y){return[x/cosPhi0,asin$2(y*cosPhi0)]},forward}(y0);var c=1+sy0*(2*n-sy0),r0=sqrt$2(c)/n;function project(x,y){var r=sqrt$2(c-2*n*sin$1(y))/n;return[r*sin$1(x*=n),r0-r*cos$1(x)]}return project.invert=function(x,y){var r0y=r0-y;return[atan2$1(x,abs$1(r0y))/n*sign$2(r0y),asin$2((c-(x*x+r0y*r0y)*n*n)/(2*n))]},project}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function azimuthalRaw(scale){return function(x,y){var cx=cos$1(x),cy=cos$1(y),k=scale(cx*cy);return[k*cy*sin$1(x),k*sin$1(y)]}}function azimuthalInvert(angle){return function(x,y){var z=sqrt$2(x*x+y*y),c=angle(z),sc=sin$1(c),cc=cos$1(c);return[atan2$1(x*sc,z*cc),asin$2(z&&y*sc/z)]}}var azimuthalEqualAreaRaw=azimuthalRaw((function(cxcy){return sqrt$2(2/(1+cxcy))}));azimuthalEqualAreaRaw.invert=azimuthalInvert((function(z){return 2*asin$2(z/2)}));var azimuthalEquidistantRaw=azimuthalRaw((function(c){return(c=acos$1(c))&&c/sin$1(c)}));function mercatorRaw(lambda,phi){return[lambda,log$1(tan((halfPi$2+phi)/2))]}function mercatorProjection(project){var y0,x1,y1,m=projection(project),center=m.center,scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,x0=null;function reclip(){var k=pi$4*scale(),t=m(rotation(m.rotate()).invert([0,0]));return clipExtent(null==x0?[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]]:project===mercatorRaw?[[Math.max(t[0]-k,x0),y0],[Math.min(t[0]+k,x1),y1]]:[[x0,Math.max(t[1]-k,y0)],[x1,Math.min(t[1]+k,y1)]])}return m.scale=function(_){return arguments.length?(scale(_),reclip()):scale()},m.translate=function(_){return arguments.length?(translate(_),reclip()):translate()},m.center=function(_){return arguments.length?(center(_),reclip()):center()},m.clipExtent=function(_){return arguments.length?(null==_?x0=y0=x1=y1=null:(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reclip()):null==x0?null:[[x0,y0],[x1,y1]]},reclip()}function tany(y){return tan((halfPi$2+y)/2)}function conicConformalRaw(y0,y1){var cy0=cos$1(y0),n=y0===y1?sin$1(y0):log$1(cy0/cos$1(y1))/log$1(tany(y1)/tany(y0)),f=cy0*pow$1(tany(y0),n)/n;if(!n)return mercatorRaw;function project(x,y){f>0?y<-halfPi$2+epsilon$5&&(y=-halfPi$2+epsilon$5):y>halfPi$2-epsilon$5&&(y=halfPi$2-epsilon$5);var r=f/pow$1(tany(y),n);return[r*sin$1(n*x),f-r*cos$1(n*x)]}return project.invert=function(x,y){var fy=f-y,r=sign$2(n)*sqrt$2(x*x+fy*fy);return[atan2$1(x,abs$1(fy))/n*sign$2(fy),2*atan(pow$1(f/r,1/n))-halfPi$2]},project}function equirectangularRaw(lambda,phi){return[lambda,phi]}function conicEquidistantRaw(y0,y1){var cy0=cos$1(y0),n=y0===y1?sin$1(y0):(cy0-cos$1(y1))/(y1-y0),g=cy0/n+y0;if(abs$1(n)<epsilon$5)return equirectangularRaw;function project(x,y){var gy=g-y,nx=n*x;return[gy*sin$1(nx),g-gy*cos$1(nx)]}return project.invert=function(x,y){var gy=g-y;return[atan2$1(x,abs$1(gy))/n*sign$2(gy),g-sign$2(n)*sqrt$2(x*x+gy*gy)]},project}function gnomonicRaw(x,y){var cy=cos$1(y),k=cos$1(x)*cy;return[cy*sin$1(x)/k,sin$1(y)/k]}function scaleTranslate(kx,ky,tx,ty){return 1===kx&&1===ky&&0===tx&&0===ty?identity$8:transformer({point:function(x,y){this.stream.point(x*kx+tx,y*ky+ty)}})}function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(phi4*(.003971*phi2-.001529*phi4)-.013791)),phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))]}function orthographicRaw(x,y){return[cos$1(y)*sin$1(x),sin$1(y)]}function stereographicRaw(x,y){var cy=cos$1(y),k=1+cos$1(x)*cy;return[cy*sin$1(x)/k,sin$1(y)/k]}function transverseMercatorRaw(lambda,phi){return[log$1(tan((halfPi$2+phi)/2)),-lambda]}function defaultSeparation$1(a,b){return a.parent===b.parent?1:2}function meanXReduce(x,c){return x+c.x}function maxYReduce(y,c){return Math.max(y,c.y)}function count(node){var sum=0,children=node.children,i=children&&children.length;if(i)for(;--i>=0;)sum+=children[i].value;else sum=1;node.value=sum}function hierarchy(data,children){var node,child,childs,i,n,root=new Node$1(data),valued=+data.value&&(root.value=data.value),nodes=[root];for(null==children&&(children=defaultChildren);node=nodes.pop();)if(valued&&(node.value=+node.data.value),(childs=children(node.data))&&(n=childs.length))for(node.children=new Array(n),i=n-1;i>=0;--i)nodes.push(child=node.children[i]=new Node$1(childs[i])),child.parent=node,child.depth=node.depth+1;return root.eachBefore(computeHeight)}function defaultChildren(d){return d.children}function copyData(node){node.data=node.data.data}function computeHeight(node){var height=0;do{node.height=height}while((node=node.parent)&&node.height<++height)}function Node$1(data){this.data=data,this.depth=this.height=0,this.parent=null}azimuthalEquidistantRaw.invert=azimuthalInvert((function(z){return z})),mercatorRaw.invert=function(x,y){return[x,2*atan(exp(y))-halfPi$2]},equirectangularRaw.invert=equirectangularRaw,gnomonicRaw.invert=azimuthalInvert(atan),naturalEarth1Raw.invert=function(x,y){var delta,phi=y,i=25;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))-y)/(1.007226+phi2*(.045255+phi4*(.259866*phi2-.311325-.005916*11*phi4)))}while(abs$1(delta)>epsilon$5&&--i>0);return[x/(.8707+(phi2=phi*phi)*(phi2*(phi2*phi2*phi2*(.003971-.001529*phi2)-.013791)-.131979)),phi]},orthographicRaw.invert=azimuthalInvert(asin$2),stereographicRaw.invert=azimuthalInvert((function(z){return 2*atan(z)})),transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(exp(x))-halfPi$2]},Node$1.prototype=hierarchy.prototype={constructor:Node$1,count:function node_count(){return this.eachAfter(count)},each:function node_each(callback){var current,children,i,n,node=this,next=[node];do{for(current=next.reverse(),next=[];node=current.pop();)if(callback(node),children=node.children)for(i=0,n=children.length;i<n;++i)next.push(children[i])}while(next.length);return this},eachAfter:function node_eachAfter(callback){for(var children,i,n,node=this,nodes=[node],next=[];node=nodes.pop();)if(next.push(node),children=node.children)for(i=0,n=children.length;i<n;++i)nodes.push(children[i]);for(;node=next.pop();)callback(node);return this},eachBefore:function node_eachBefore(callback){for(var children,i,node=this,nodes=[node];node=nodes.pop();)if(callback(node),children=node.children)for(i=children.length-1;i>=0;--i)nodes.push(children[i]);return this},sum:function node_sum(value){return this.eachAfter((function(node){for(var sum=+value(node.data)||0,children=node.children,i=children&&children.length;--i>=0;)sum+=children[i].value;node.value=sum}))},sort:function node_sort(compare){return this.eachBefore((function(node){node.children&&node.children.sort(compare)}))},path:function node_path(end){for(var start=this,ancestor=function leastCommonAncestor(a,b){if(a===b)return a;var aNodes=a.ancestors(),bNodes=b.ancestors(),c=null;a=aNodes.pop(),b=bNodes.pop();for(;a===b;)c=a,a=aNodes.pop(),b=bNodes.pop();return c}(start,end),nodes=[start];start!==ancestor;)start=start.parent,nodes.push(start);for(var k=nodes.length;end!==ancestor;)nodes.splice(k,0,end),end=end.parent;return nodes},ancestors:function node_ancestors(){for(var node=this,nodes=[node];node=node.parent;)nodes.push(node);return nodes},descendants:function node_descendants(){var nodes=[];return this.each((function(node){nodes.push(node)})),nodes},leaves:function node_leaves(){var leaves=[];return this.eachBefore((function(node){node.children||leaves.push(node)})),leaves},links:function node_links(){var root=this,links=[];return root.each((function(node){node!==root&&links.push({source:node.parent,target:node})})),links},copy:function node_copy(){return hierarchy(this).eachBefore(copyData)}};var slice$3=Array.prototype.slice;function enclose(circles){for(var p,e,i=0,n=(circles=function shuffle(array){for(var t,i,m=array.length;m;)i=Math.random()*m--|0,t=array[m],array[m]=array[i],array[i]=t;return array}(slice$3.call(circles))).length,B=[];i<n;)p=circles[i],e&&enclosesWeak(e,p)?++i:(e=encloseBasis(B=extendBasis(B,p)),i=0);return e}function extendBasis(B,p){var i,j;if(enclosesWeakAll(p,B))return[p];for(i=0;i<B.length;++i)if(enclosesNot(p,B[i])&&enclosesWeakAll(encloseBasis2(B[i],p),B))return[B[i],p];for(i=0;i<B.length-1;++i)for(j=i+1;j<B.length;++j)if(enclosesNot(encloseBasis2(B[i],B[j]),p)&&enclosesNot(encloseBasis2(B[i],p),B[j])&&enclosesNot(encloseBasis2(B[j],p),B[i])&&enclosesWeakAll(encloseBasis3(B[i],B[j],p),B))return[B[i],B[j],p];throw new Error}function enclosesNot(a,b){var dr=a.r-b.r,dx=b.x-a.x,dy=b.y-a.y;return dr<0||dr*dr<dx*dx+dy*dy}function enclosesWeak(a,b){var dr=a.r-b.r+1e-6,dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy}function enclosesWeakAll(a,B){for(var i=0;i<B.length;++i)if(!enclosesWeak(a,B[i]))return!1;return!0}function encloseBasis(B){switch(B.length){case 1:return function encloseBasis1(a){return{x:a.x,y:a.y,r:a.r}}(B[0]);case 2:return encloseBasis2(B[0],B[1]);case 3:return encloseBasis3(B[0],B[1],B[2])}}function encloseBasis2(a,b){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x21=x2-x1,y21=y2-y1,r21=r2-r1,l=Math.sqrt(x21*x21+y21*y21);return{x:(x1+x2+x21/l*r21)/2,y:(y1+y2+y21/l*r21)/2,r:(l+r1+r2)/2}}function encloseBasis3(a,b,c){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x3=c.x,y3=c.y,r3=c.r,a2=x1-x2,a3=x1-x3,b2=y1-y2,b3=y1-y3,c2=r2-r1,c3=r3-r1,d1=x1*x1+y1*y1-r1*r1,d2=d1-x2*x2-y2*y2+r2*r2,d3=d1-x3*x3-y3*y3+r3*r3,ab=a3*b2-a2*b3,xa=(b2*d3-b3*d2)/(2*ab)-x1,xb=(b3*c2-b2*c3)/ab,ya=(a3*d2-a2*d3)/(2*ab)-y1,yb=(a2*c3-a3*c2)/ab,A=xb*xb+yb*yb-1,B=2*(r1+xa*xb+ya*yb),C=xa*xa+ya*ya-r1*r1,r=-(A?(B+Math.sqrt(B*B-4*A*C))/(2*A):C/B);return{x:x1+xa+xb*r,y:y1+ya+yb*r,r:r}}function place(a,b,c){var ax=a.x,ay=a.y,da=b.r+c.r,db=a.r+c.r,dx=b.x-ax,dy=b.y-ay,dc=dx*dx+dy*dy;if(dc){var x=.5+((db*=db)-(da*=da))/(2*dc),y=Math.sqrt(Math.max(0,2*da*(db+dc)-(db-=dc)*db-da*da))/(2*dc);c.x=ax+x*dx+y*dy,c.y=ay+x*dy-y*dx}else c.x=ax+db,c.y=ay}function intersects(a,b){var dx=b.x-a.x,dy=b.y-a.y,dr=a.r+b.r;return dr*dr-1e-6>dx*dx+dy*dy}function score(node){var a=node._,b=node.next._,ab=a.r+b.r,dx=(a.x*b.r+b.x*a.r)/ab,dy=(a.y*b.r+b.y*a.r)/ab;return dx*dx+dy*dy}function Node(circle){this._=circle,this.next=null,this.previous=null}function packEnclose(circles){if(!(n=circles.length))return 0;var a,b,c,n,aa,ca,i,j,k,sj,sk;if((a=circles[0]).x=0,a.y=0,!(n>1))return a.r;if(b=circles[1],a.x=-b.r,b.x=a.r,b.y=0,!(n>2))return a.r+b.r;place(b,a,c=circles[2]),a=new Node(a),b=new Node(b),c=new Node(c),a.next=c.previous=b,b.next=a.previous=c,c.next=b.previous=a;pack:for(i=3;i<n;++i){place(a._,b._,c=circles[i]),c=new Node(c),j=b.next,k=a.previous,sj=b._.r,sk=a._.r;do{if(sj<=sk){if(intersects(j._,c._)){b=j,a.next=b,b.previous=a,--i;continue pack}sj+=j._.r,j=j.next}else{if(intersects(k._,c._)){(a=k).next=b,b.previous=a,--i;continue pack}sk+=k._.r,k=k.previous}}while(j!==k.next);for(c.previous=a,c.next=b,a.next=b.previous=b=c,aa=score(a);(c=c.next)!==b;)(ca=score(c))<aa&&(a=c,aa=ca);b=a.next}for(a=[b._],c=b;(c=c.next)!==b;)a.push(c._);for(c=enclose(a),i=0;i<n;++i)(a=circles[i]).x-=c.x,a.y-=c.y;return c.r}function required(f){if("function"!=typeof f)throw new Error;return f}function constantZero(){return 0}function constant$e(x){return function(){return x}}function defaultRadius(d){return Math.sqrt(d.value)}function radiusLeaf(radius){return function(node){node.children||(node.r=Math.max(0,+radius(node)||0))}}function packChildren(padding,k){return function(node){if(children=node.children){var children,i,e,n=children.length,r=padding(node)*k||0;if(r)for(i=0;i<n;++i)children[i].r+=r;if(e=packEnclose(children),r)for(i=0;i<n;++i)children[i].r-=r;node.r=e+r}}}function translateChild(k){return function(node){var parent=node.parent;node.r*=k,parent&&(node.x=parent.x+k*node.x,node.y=parent.y+k*node.y)}}function roundNode(node){node.x0=Math.round(node.x0),node.y0=Math.round(node.y0),node.x1=Math.round(node.x1),node.y1=Math.round(node.y1)}function treemapDice(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(x1-x0)/parent.value;++i<n;)(node=nodes[i]).y0=y0,node.y1=y1,node.x0=x0,node.x1=x0+=node.value*k}var preroot={depth:-1},ambiguous={};function defaultId$1(d){return d.id}function defaultParentId(d){return d.parentId}function defaultSeparation(a,b){return a.parent===b.parent?1:2}function nextLeft(v){var children=v.children;return children?children[0]:v.t}function nextRight(v){var children=v.children;return children?children[children.length-1]:v.t}function moveSubtree(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change,wp.s+=shift,wm.c+=change,wp.z+=shift,wp.m+=shift}function nextAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}function TreeNode(node,i){this._=node,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=i}function treemapSlice(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(y1-y0)/parent.value;++i<n;)(node=nodes[i]).x0=x0,node.x1=x1,node.y0=y0,node.y1=y0+=node.value*k}TreeNode.prototype=Object.create(Node$1.prototype);var phi=(1+Math.sqrt(5))/2;function squarifyRatio(ratio,parent,x0,y0,x1,y1){for(var row,nodeValue,dx,dy,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta,rows=[],nodes=parent.children,i0=0,i1=0,n=nodes.length,value=parent.value;i0<n;){dx=x1-x0,dy=y1-y0;do{sumValue=nodes[i1++].value}while(!sumValue&&i1<n);for(minValue=maxValue=sumValue,beta=sumValue*sumValue*(alpha=Math.max(dy/dx,dx/dy)/(value*ratio)),minRatio=Math.max(maxValue/beta,beta/minValue);i1<n;++i1){if(sumValue+=nodeValue=nodes[i1].value,nodeValue<minValue&&(minValue=nodeValue),nodeValue>maxValue&&(maxValue=nodeValue),beta=sumValue*sumValue*alpha,(newRatio=Math.max(maxValue/beta,beta/minValue))>minRatio){sumValue-=nodeValue;break}minRatio=newRatio}rows.push(row={value:sumValue,dice:dx<dy,children:nodes.slice(i0,i1)}),row.dice?treemapDice(row,x0,y0,x1,value?y0+=dy*sumValue/value:y1):treemapSlice(row,x0,y0,value?x0+=dx*sumValue/value:x1,y1),value-=sumValue,i0=i1}return rows}var squarify=function custom(ratio){function squarify(parent,x0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1)}return squarify.ratio=function(x){return custom((x=+x)>1?x:1)},squarify}(phi);var resquarify=function custom(ratio){function resquarify(parent,x0,y0,x1,y1){if((rows=parent._squarify)&&rows.ratio===ratio)for(var rows,row,nodes,i,n,j=-1,m=rows.length,value=parent.value;++j<m;){for(nodes=(row=rows[j]).children,i=row.value=0,n=nodes.length;i<n;++i)row.value+=nodes[i].value;row.dice?treemapDice(row,x0,y0,x1,y0+=(y1-y0)*row.value/value):treemapSlice(row,x0,y0,x0+=(x1-x0)*row.value/value,y1),value-=row.value}else parent._squarify=rows=squarifyRatio(ratio,parent,x0,y0,x1,y1),rows.ratio=ratio}return resquarify.ratio=function(x){return custom((x=+x)>1?x:1)},resquarify}(phi);function basis$1(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}function basis$2(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis$1((t-i/n)*n,v0,v1,v2,v3)}}function basisClosed$1(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis$1((t-i/n)*n,v0,v1,v2,v3)}}function constant$d(x){return function(){return x}}function linear$3(a,d){return function(t){return a+t*d}}function hue$2(a,b){var d=b-a;return d?linear$3(a,d>180||d<-180?d-360*Math.round(d/360):d):constant$d(isNaN(a)?b:a)}function gamma$2(y){return 1==(y=+y)?nogamma$2:function(a,b){return b-a?function exponential$3(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):constant$d(isNaN(a)?b:a)}}function nogamma$2(a,b){var d=b-a;return d?linear$3(a,d):constant$d(isNaN(a)?b:a)}var rgb$1=function rgbGamma(y){var color=gamma$2(y);function rgb(start,end){var r=color((start=rgb$2(start)).r,(end=rgb$2(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma$2(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=rgb$2(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}var rgbBasis=rgbSpline(basis$2),rgbBasisClosed=rgbSpline(basisClosed$1);function array$3(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=value$1(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date$3(a,b){var d=new Date;return b-=a=+a,function(t){return d.setTime(a+b*t),d}}function number$4(a,b){return b-=a=+a,function(t){return a+b*t}}function object$2(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=value$1(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}var reA$2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB$2=new RegExp(reA$2.source,"g");function string$2(a,b){var am,bm,bs,bi=reA$2.lastIndex=reB$2.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA$2.exec(a))&&(bm=reB$2.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:number$4(am,bm)})),bi=reB$2.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one$2(b){return function(t){return b(t)+""}}(q[0].x):function zero$2(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function value$1(a,b){var c,t=typeof b;return null==b||"boolean"===t?constant$d(b):("number"===t?number$4:"string"===t?(c=color(b))?(b=c,rgb$1):string$2:b instanceof color?rgb$1:b instanceof Date?date$3:Array.isArray(b)?array$3:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object$2:number$4)(a,b)}var cssNode$1,cssRoot$1,cssView$1,svgNode$1,degrees$1=180/Math.PI,identity$6={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose$1(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees$1,skewX:Math.atan(skewX)*degrees$1,scaleX:scaleX,scaleY:scaleY}}function interpolateTransform$1(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:number$4(xa,xb)},{i:i-2,x:number$4(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:number$4(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:number$4(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:number$4(xa,xb)},{i:i-2,x:number$4(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss$1=interpolateTransform$1((function parseCss$1(value){return"none"===value?identity$6:(cssNode$1||(cssNode$1=document.createElement("DIV"),cssRoot$1=document.documentElement,cssView$1=document.defaultView),cssNode$1.style.transform=value,value=cssView$1.getComputedStyle(cssRoot$1.appendChild(cssNode$1),null).getPropertyValue("transform"),cssRoot$1.removeChild(cssNode$1),decompose$1(+(value=value.slice(7,-1).split(","))[0],+value[1],+value[2],+value[3],+value[4],+value[5]))}),"px, ","px)","deg)"),interpolateTransformSvg$1=interpolateTransform$1((function parseSvg$1(value){return null==value?identity$6:(svgNode$1||(svgNode$1=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode$1.setAttribute("transform",value),(value=svgNode$1.transform.baseVal.consolidate())?decompose$1((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):identity$6)}),", ",")",")"),rho=Math.SQRT2;function cosh(x){return((x=Math.exp(x))+1/x)/2}function hsl(hue){return function(start,end){var h=hue((start=hsl$2(start)).h,(end=hsl$2(end)).h),s=nogamma$2(start.s,end.s),l=nogamma$2(start.l,end.l),opacity=nogamma$2(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(t),start.opacity=opacity(t),start+""}}}var hsl$1=hsl(hue$2),hslLong=hsl(nogamma$2);function hcl(hue){return function(start,end){var h=hue((start=hcl$2(start)).h,(end=hcl$2(end)).h),c=nogamma$2(start.c,end.c),l=nogamma$2(start.l,end.l),opacity=nogamma$2(start.opacity,end.opacity);return function(t){return start.h=h(t),start.c=c(t),start.l=l(t),start.opacity=opacity(t),start+""}}}var hcl$1=hcl(hue$2),hclLong=hcl(nogamma$2);function cubehelix$3(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=cubehelix$6(start)).h,(end=cubehelix$6(end)).h),s=nogamma$2(start.s,end.s),l=nogamma$2(start.l,end.l),opacity=nogamma$2(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}var cubehelix$4=cubehelix$3(hue$2),cubehelixLong$1=cubehelix$3(nogamma$2);var pi$3=Math.PI,tau$4=2*pi$3,tauEpsilon$1=tau$4-1e-6;function Path$1(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path$1(){return new Path$1}function cross$1(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function lexicographicOrder(a,b){return a[0]-b[0]||a[1]-b[1]}function computeUpperHullIndexes(points){for(var n=points.length,indexes=[0,1],size=2,i=2;i<n;++i){for(;size>1&&cross$1(points[indexes[size-2]],points[indexes[size-1]],points[i])<=0;)--size;indexes[size++]=i}return indexes.slice(0,size)}function add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,xm,ym,xp,yp,right,bottom,i,j,node=tree._root,leaf={data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1;if(!node)return tree._root=leaf,tree;for(;node.length;)if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return parent[i]=leaf,tree;if(xp=+tree._x.call(null,node.data),yp=+tree._y.call(null,node.data),x===xp&&y===yp)return leaf.next=node,parent?parent[i]=leaf:tree._root=leaf,tree;do{parent=parent?parent[i]=new Array(4):tree._root=new Array(4),(right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym}while((i=bottom<<1|right)==(j=(yp>=ym)<<1|xp>=xm));return parent[j]=node,parent[i]=leaf,tree}function Quad(node,x0,y0,x1,y1){this.node=node,this.x0=x0,this.y0=y0,this.x1=x1,this.y1=y1}function defaultX(d){return d[0]}function defaultY(d){return d[1]}function quadtree(nodes,x,y){var tree=new Quadtree(null==x?defaultX:x,null==y?defaultY:y,NaN,NaN,NaN,NaN);return null==nodes?tree:tree.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){this._x=x,this._y=y,this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this._root=void 0}function leaf_copy(leaf){for(var copy={data:leaf.data},next=copy;leaf=leaf.next;)next=next.next={data:leaf.data};return copy}Path$1.prototype=path$1.prototype={constructor:Path$1,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r){var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((pi$3-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;Math.abs(t01-1)>1e-6&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}else this._+="L"+(this._x1=x1)+","+(this._y1=y1);else;},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y;var dx=(r=+r)*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(da<0&&(da=da%tau$4+tau$4),da>tauEpsilon$1?this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):da>1e-6&&(this._+="A"+r+","+r+",0,"+ +(da>=pi$3)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}};var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var nodes,child,copy=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root;if(!node)return copy;if(!node.length)return copy._root=leaf_copy(node),copy;for(nodes=[{source:node,target:copy._root=new Array(4)}];node=nodes.pop();)for(var i=0;i<4;++i)(child=node.source[i])&&(child.length?nodes.push({source:child,target:node.target[i]=new Array(4)}):node.target[i]=leaf_copy(child));return copy},treeProto.add=function tree_add(d){var x=+this._x.call(null,d),y=+this._y.call(null,d);return add(this.cover(x,y),x,y,d)},treeProto.addAll=function addAll(data){var d,i,x,y,n=data.length,xz=new Array(n),yz=new Array(n),x0=1/0,y0=1/0,x1=-1/0,y1=-1/0;for(i=0;i<n;++i)isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d))||(xz[i]=x,yz[i]=y,x<x0&&(x0=x),x>x1&&(x1=x),y<y0&&(y0=y),y>y1&&(y1=y));for(x1<x0&&(x0=this._x0,x1=this._x1),y1<y0&&(y0=this._y0,y1=this._y1),this.cover(x0,y0).cover(x1,y1),i=0;i<n;++i)add(this,xz[i],yz[i],data[i]);return this},treeProto.cover=function tree_cover(x,y){if(isNaN(x=+x)||isNaN(y=+y))return this;var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0))x1=(x0=Math.floor(x))+1,y1=(y0=Math.floor(y))+1;else{if(!(x0>x||x>x1||y0>y||y>y1))return this;var parent,i,z=x1-x0,node=this._root;switch(i=(y<(y0+y1)/2)<<1|x<(x0+x1)/2){case 0:do{(parent=new Array(4))[i]=node,node=parent}while(y1=y0+(z*=2),x>(x1=x0+z)||y>y1);break;case 1:do{(parent=new Array(4))[i]=node,node=parent}while(y1=y0+(z*=2),(x0=x1-z)>x||y>y1);break;case 2:do{(parent=new Array(4))[i]=node,node=parent}while(y0=y1-(z*=2),x>(x1=x0+z)||y0>y);break;case 3:do{(parent=new Array(4))[i]=node,node=parent}while(y0=y1-(z*=2),(x0=x1-z)>x||y0>y)}this._root&&this._root.length&&(this._root=node)}return this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this},treeProto.data=function tree_data(){var data=[];return this.visit((function(node){if(!node.length)do{data.push(node.data)}while(node=node.next)})),data},treeProto.extent=function tree_extent(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},treeProto.find=function tree_find(x,y,radius){var data,x1,y1,x2,y2,q,i,x0=this._x0,y0=this._y0,x3=this._x1,y3=this._y1,quads=[],node=this._root;for(node&&quads.push(new Quad(node,x0,y0,x3,y3)),null==radius?radius=1/0:(x0=x-radius,y0=y-radius,x3=x+radius,y3=y+radius,radius*=radius);q=quads.pop();)if(!(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0))if(node.length){var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new Quad(node[3],xm,ym,x2,y2),new Quad(node[2],x1,ym,xm,y2),new Quad(node[1],xm,y1,x2,ym),new Quad(node[0],x1,y1,xm,ym)),(i=(y>=ym)<<1|x>=xm)&&(q=quads[quads.length-1],quads[quads.length-1]=quads[quads.length-1-i],quads[quads.length-1-i]=q)}else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;if(d2<radius){var d=Math.sqrt(radius=d2);x0=x-d,y0=y-d,x3=x+d,y3=y+d,data=node.data}}return data},treeProto.remove=function tree_remove(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;var parent,retainer,previous,next,x,y,xm,ym,right,bottom,i,j,node=this._root,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(!node)return this;if(node.length)for(;;){if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return this;if(!node.length)break;(parent[i+1&3]||parent[i+2&3]||parent[i+3&3])&&(retainer=parent,j=i)}for(;node.data!==d;)if(previous=node,!(node=node.next))return this;return(next=node.next)&&delete node.next,previous?(next?previous.next=next:delete previous.next,this):parent?(next?parent[i]=next:delete parent[i],(node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length&&(retainer?retainer[j]=node:this._root=node),this):(this._root=next,this)},treeProto.removeAll=function removeAll(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this},treeProto.root=function tree_root(){return this._root},treeProto.size=function tree_size(){var size=0;return this.visit((function(node){if(!node.length)do{++size}while(node=node.next)})),size},treeProto.visit=function tree_visit(callback){var q,child,x0,y0,x1,y1,quads=[],node=this._root;for(node&&quads.push(new Quad(node,this._x0,this._y0,this._x1,this._y1));q=quads.pop();)if(!callback(node=q.node,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1)&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[3])&&quads.push(new Quad(child,xm,ym,x1,y1)),(child=node[2])&&quads.push(new Quad(child,x0,ym,xm,y1)),(child=node[1])&&quads.push(new Quad(child,xm,y0,x1,ym)),(child=node[0])&&quads.push(new Quad(child,x0,y0,xm,ym))}return this},treeProto.visitAfter=function tree_visitAfter(callback){var q,quads=[],next=[];for(this._root&&quads.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));q=quads.pop();){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[0])&&quads.push(new Quad(child,x0,y0,xm,ym)),(child=node[1])&&quads.push(new Quad(child,xm,y0,x1,ym)),(child=node[2])&&quads.push(new Quad(child,x0,ym,xm,y1)),(child=node[3])&&quads.push(new Quad(child,xm,ym,x1,y1))}next.push(q)}for(;q=next.pop();)callback(q.node,q.x0,q.y0,q.x1,q.y1);return this},treeProto.x=function tree_x(_){return arguments.length?(this._x=_,this):this._x},treeProto.y=function tree_y(_){return arguments.length?(this._y=_,this):this._y};var slice$2=[].slice,noabort={};function Queue(size){this._size=size,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function poke$2(q){if(!q._start)try{!function start$2(q){for(;q._start=q._waiting&&q._active<q._size;){var i=q._ended+q._active,t=q._tasks[i],j=t.length-1,c=t[j];t[j]=end(q,i),--q._waiting,++q._active,t=c.apply(null,t),q._tasks[i]&&(q._tasks[i]=t||noabort)}}(q)}catch(e){if(q._tasks[q._ended+q._active-1])abort(q,e);else if(!q._data)throw e}}function end(q,i){return function(e,r){q._tasks[i]&&(--q._active,++q._ended,q._tasks[i]=null,null==q._error&&(null!=e?abort(q,e):(q._data[i]=r,q._waiting?poke$2(q):maybeNotify(q))))}}function abort(q,e){var t,i=q._tasks.length;for(q._error=e,q._data=void 0,q._waiting=NaN;--i>=0;)if((t=q._tasks[i])&&(q._tasks[i]=null,t.abort))try{t.abort()}catch(e){}q._active=NaN,maybeNotify(q)}function maybeNotify(q){if(!q._active&&q._call){var d=q._data;q._data=void 0,q._call(q._error,d)}}function queue(concurrency){if(null==concurrency)concurrency=1/0;else if(!((concurrency=+concurrency)>=1))throw new Error("invalid concurrency");return new Queue(concurrency)}function defaultSource(){return Math.random()}Queue.prototype=queue.prototype={constructor:Queue,defer:function(callback){if("function"!=typeof callback)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var t=slice$2.call(arguments,1);return t.push(callback),++this._waiting,this._tasks.push(t),poke$2(this),this},abort:function(){return null==this._error&&abort(this,new Error("abort")),this},await:function(callback){if("function"!=typeof callback)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(error,results){callback.apply(null,[error].concat(results))},maybeNotify(this),this},awaitAll:function(callback){if("function"!=typeof callback)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=callback,maybeNotify(this),this}};var uniform=function sourceRandomUniform(source){function randomUniform(min,max){return min=null==min?0:+min,max=null==max?1:+max,1===arguments.length?(max=min,min=0):max-=min,function(){return source()*max+min}}return randomUniform.source=sourceRandomUniform,randomUniform}(defaultSource),normal=function sourceRandomNormal(source){function randomNormal(mu,sigma){var x,r;return mu=null==mu?0:+mu,sigma=null==sigma?1:+sigma,function(){var y;if(null!=x)y=x,x=null;else do{x=2*source()-1,y=2*source()-1,r=x*x+y*y}while(!r||r>1);return mu+sigma*y*Math.sqrt(-2*Math.log(r)/r)}}return randomNormal.source=sourceRandomNormal,randomNormal}(defaultSource),logNormal=function sourceRandomLogNormal(source){function randomLogNormal(){var randomNormal=normal.source(source).apply(this,arguments);return function(){return Math.exp(randomNormal())}}return randomLogNormal.source=sourceRandomLogNormal,randomLogNormal}(defaultSource),irwinHall=function sourceRandomIrwinHall(source){function randomIrwinHall(n){return function(){for(var sum=0,i=0;i<n;++i)sum+=source();return sum}}return randomIrwinHall.source=sourceRandomIrwinHall,randomIrwinHall}(defaultSource),bates=function sourceRandomBates(source){function randomBates(n){var randomIrwinHall=irwinHall.source(source)(n);return function(){return randomIrwinHall()/n}}return randomBates.source=sourceRandomBates,randomBates}(defaultSource),exponential$2=function sourceRandomExponential(source){function randomExponential(lambda){return function(){return-Math.log(1-source())/lambda}}return randomExponential.source=sourceRandomExponential,randomExponential}(defaultSource);function request(url,callback){var request,mimeType,response,responseType,event=dispatch$5("beforesend","progress","load","error"),headers=map$7(),xhr=new XMLHttpRequest,user=null,password=null,timeout=0;function respond(o){var result,status=xhr.status;if(!status&&function hasResponse(xhr){var type=xhr.responseType;return type&&"text"!==type?xhr.response:xhr.responseText}(xhr)||status>=200&&status<300||304===status){if(response)try{result=response.call(request,xhr)}catch(e){return void event.call("error",request,e)}else result=xhr;event.call("load",request,result)}else event.call("error",request,o)}if("undefined"!=typeof XDomainRequest&&!("withCredentials"in xhr)&&/^(http(s)?:)?\/\//.test(url)&&(xhr=new XDomainRequest),"onload"in xhr?xhr.onload=xhr.onerror=xhr.ontimeout=respond:xhr.onreadystatechange=function(o){xhr.readyState>3&&respond(o)},xhr.onprogress=function(e){event.call("progress",request,e)},request={header:function(name,value){return name=(name+"").toLowerCase(),arguments.length<2?headers.get(name):(null==value?headers.remove(name):headers.set(name,value+""),request)},mimeType:function(value){return arguments.length?(mimeType=null==value?null:value+"",request):mimeType},responseType:function(value){return arguments.length?(responseType=value,request):responseType},timeout:function(value){return arguments.length?(timeout=+value,request):timeout},user:function(value){return arguments.length<1?user:(user=null==value?null:value+"",request)},password:function(value){return arguments.length<1?password:(password=null==value?null:value+"",request)},response:function(value){return response=value,request},get:function(data,callback){return request.send("GET",data,callback)},post:function(data,callback){return request.send("POST",data,callback)},send:function(method,data,callback){return xhr.open(method,url,!0,user,password),null==mimeType||headers.has("accept")||headers.set("accept",mimeType+",*/*"),xhr.setRequestHeader&&headers.each((function(value,name){xhr.setRequestHeader(name,value)})),null!=mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(mimeType),null!=responseType&&(xhr.responseType=responseType),timeout>0&&(xhr.timeout=timeout),null==callback&&"function"==typeof data&&(callback=data,data=null),null!=callback&&1===callback.length&&(callback=function fixCallback(callback){return function(error,xhr){callback(null==error?xhr:null)}}(callback)),null!=callback&&request.on("error",callback).on("load",(function(xhr){callback(null,xhr)})),event.call("beforesend",request,xhr),xhr.send(null==data?null:data),request},abort:function(){return xhr.abort(),request},on:function(){var value=event.on.apply(event,arguments);return value===event?request:value}},null!=callback){if("function"!=typeof callback)throw new Error("invalid callback: "+callback);return request.get(callback)}return request}function type(defaultMimeType,response){return function(url,callback){var r=request(url).mimeType(defaultMimeType).response(response);if(null!=callback){if("function"!=typeof callback)throw new Error("invalid callback: "+callback);return r.get(callback)}return r}}var html=type("text/html",(function(xhr){return document.createRange().createContextualFragment(xhr.responseText)})),json=type("application/json",(function(xhr){return JSON.parse(xhr.responseText)})),text=type("text/plain",(function(xhr){return xhr.responseText})),xml=type("application/xml",(function(xhr){var xml=xhr.responseXML;if(!xml)throw new Error("parse error");return xml})),EOL={},EOF={};function objectConverter(columns){return new Function("d","return {"+columns.map((function(name,i){return JSON.stringify(name)+": d["+i+'] || ""'})).join(",")+"}")}function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach((function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)})),columns}function pad$2(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatDate(date){var hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":function formatYear$2(year){return year<0?"-"+pad$2(-year,6):year>9999?"+"+pad$2(year,6):pad$2(year,4)}(date.getUTCFullYear())+"-"+pad$2(date.getUTCMonth()+1,2)+"-"+pad$2(date.getUTCDate(),2)+(milliseconds?"T"+pad$2(hours,2)+":"+pad$2(minutes,2)+":"+pad$2(seconds,2)+"."+pad$2(milliseconds,3)+"Z":seconds?"T"+pad$2(hours,2)+":"+pad$2(minutes,2)+":"+pad$2(seconds,2)+"Z":minutes||hours?"T"+pad$2(hours,2)+":"+pad$2(minutes,2)+"Z":"")}function dsv$1(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(34===text.charCodeAt(j)){for(;I++<N&&34!==text.charCodeAt(I)||34===text.charCodeAt(++I););return(i=I)>=N?eof=!0:10===(c=text.charCodeAt(I++))?eol=!0:13===c&&(eol=!0,10===text.charCodeAt(I)&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if(10===(c=text.charCodeAt(i=I++)))eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(10===text.charCodeAt(N-1)&&--N,13===text.charCodeAt(N-1)&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map((function(row){return columns.map((function(column){return formatValue(row[column])})).join(delimiter)}))}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return null==value?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:function parse(text,f){var convert,columns,rows=parseRows(text,(function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)}));return rows.columns=columns||[],rows},parseRows:parseRows,format:function format(rows,columns){return null==columns&&(columns=inferColumns(rows)),[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")},formatBody:function formatBody(rows,columns){return null==columns&&(columns=inferColumns(rows)),preformatBody(rows,columns).join("\n")},formatRows:function formatRows(rows){return rows.map(formatRow).join("\n")},formatRow:formatRow,formatValue:formatValue}}var csvParse=dsv$1(",").parse,tsvParse=dsv$1("\t").parse;function dsv(defaultMimeType,parse){return function(url,row,callback){arguments.length<3&&(callback=row,row=null);var r=request(url).mimeType(defaultMimeType);return r.row=function(_){return arguments.length?r.response(function responseOf(parse,row){return function(request){return parse(request.responseText,row)}}(parse,row=_)):row},r.row(row),callback?r.get(callback):r}}new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var csv=dsv("text/csv",csvParse),tsv=dsv("text/tab-separated-values",tsvParse);function ascending$5(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function bisector(compare){return 1===compare.length&&(compare=function ascendingComparator(f){return function(d,x){return ascending$5(f(d),x)}}(compare)),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}var bisectRight=bisector(ascending$5).right;function number$3(x){return null===x?NaN:+x}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)===(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0)for(start=Math.ceil(start/step),stop=Math.floor(stop/step),ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)*step;else for(start=Math.floor(start*step),stop=Math.ceil(stop*step),ticks=new Array(n=Math.ceil(start-stop+1));++i<n;)ticks[i]=(start-i)/step;return reverse&&ticks.reverse(),ticks}function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}function threshold$1(values,p,valueof){if(null==valueof&&(valueof=number$3),n=values.length){if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values);return value0+(+valueof(values[i0+1],i0+1,values)-value0)*(i-i0)}}function Map$2(){}function map$2(object,f){var map=new Map$2;if(object instanceof Map$2)object.each((function(value,key){map.set(key,value)}));else if(Array.isArray(object)){var o,i=-1,n=object.length;if(null==f)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}function Set$2(){}Map$2.prototype=map$2.prototype={constructor:Map$2,has:function(key){return"$"+key in this},get:function(key){return this["$"+key]},set:function(key,value){return this["$"+key]=value,this},remove:function(key){var property="$"+key;return property in this&&delete this[property]},clear:function(){for(var property in this)"$"===property[0]&&delete this[property]},keys:function(){var keys=[];for(var property in this)"$"===property[0]&&keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)"$"===property[0]&&values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)"$"===property[0]&&entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)"$"===property[0]&&++size;return size},empty:function(){for(var property in this)if("$"===property[0])return!1;return!0},each:function(f){for(var property in this)"$"===property[0]&&f(this[property],property.slice(1),this)}};var proto$1=map$2.prototype;Set$2.prototype={constructor:Set$2,has:proto$1.has,add:function(value){return this["$"+(value+="")]=value,this},remove:proto$1.remove,clear:proto$1.clear,values:proto$1.keys,size:proto$1.size,empty:proto$1.empty,each:proto$1.each};var array$2=Array.prototype,map$1=array$2.map,slice$1=array$2.slice,implicit={name:"implicit"};function ordinal(range){var index=map$2(),domain=[],unknown=implicit;function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}return range=null==range?[]:slice$1.call(range),scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=map$2();for(var d,key,i=-1,n=_.length;++i<n;)index.has(key=(d=_[i])+"")||index.set(key,domain.push(d));return scale},scale.range=function(_){return arguments.length?(range=slice$1.call(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal().domain(domain).range(range).unknown(unknown)},scale}function band(){var step,bandwidth,scale=ordinal().unknown(void 0),domain=scale.domain,ordinalRange=scale.range,range=[0,1],round=!1,paddingInner=0,paddingOuter=0,align=.5;function rescale(){var n=domain().length,reverse=range[1]<range[0],start=range[reverse-0],stop=range[1-reverse];step=(stop-start)/Math.max(1,n-paddingInner+2*paddingOuter),round&&(step=Math.floor(step)),start+=(stop-start-step*(n-paddingInner))*align,bandwidth=step*(1-paddingInner),round&&(start=Math.round(start),bandwidth=Math.round(bandwidth));var values=function sequence(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range}(n).map((function(i){return start+step*i}));return ordinalRange(reverse?values.reverse():values)}return delete scale.unknown,scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.range=function(_){return arguments.length?(range=[+_[0],+_[1]],rescale()):range.slice()},scale.rangeRound=function(_){return range=[+_[0],+_[1]],round=!0,rescale()},scale.bandwidth=function(){return bandwidth},scale.step=function(){return step},scale.round=function(_){return arguments.length?(round=!!_,rescale()):round},scale.padding=function(_){return arguments.length?(paddingInner=paddingOuter=Math.max(0,Math.min(1,_)),rescale()):paddingInner},scale.paddingInner=function(_){return arguments.length?(paddingInner=Math.max(0,Math.min(1,_)),rescale()):paddingInner},scale.paddingOuter=function(_){return arguments.length?(paddingOuter=Math.max(0,Math.min(1,_)),rescale()):paddingOuter},scale.align=function(_){return arguments.length?(align=Math.max(0,Math.min(1,_)),rescale()):align},scale.copy=function(){return band().domain(domain()).range(range).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)},rescale()}function pointish(scale){var copy=scale.copy;return scale.padding=scale.paddingOuter,delete scale.paddingInner,delete scale.paddingOuter,scale.copy=function(){return pointish(copy())},scale}function constant$c(x){return function(){return x}}function linear$2(a,d){return function(t){return a+t*d}}function gamma$1(y){return 1==(y=+y)?nogamma$1:function(a,b){return b-a?function exponential$1(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):constant$c(isNaN(a)?b:a)}}function nogamma$1(a,b){var d=b-a;return d?linear$2(a,d):constant$c(isNaN(a)?b:a)}var rgb=function rgbGamma(y){var color=gamma$1(y);function rgb(start,end){var r=color((start=rgb$2(start)).r,(end=rgb$2(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma$1(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function numberArray(a,b){b||(b=[]);var i,n=a?Math.min(b.length,a.length):0,c=b.slice();return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}}function genericArray(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=interpolateValue(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date$2(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function reinterpolate$1(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function object$1(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=interpolateValue(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}var reA$1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB$1=new RegExp(reA$1.source,"g");function string$1(a,b){var am,bm,bs,bi=reA$1.lastIndex=reB$1.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA$1.exec(a))&&(bm=reB$1.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:reinterpolate$1(am,bm)})),bi=reB$1.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one$1(b){return function(t){return b(t)+""}}(q[0].x):function zero$1(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function interpolateValue(a,b){var c,t=typeof b;return null==b||"boolean"===t?constant$c(b):("number"===t?reinterpolate$1:"string"===t?(c=color(b))?(b=c,rgb):string$1:b instanceof color?rgb:b instanceof Date?date$2:function isNumberArray(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}(b)?numberArray:Array.isArray(b)?genericArray:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object$1:reinterpolate$1)(a,b)}function interpolateRound(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}}function cubehelix$2(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=cubehelix$6(start)).h,(end=cubehelix$6(end)).h),s=nogamma$1(start.s,end.s),l=nogamma$1(start.l,end.l),opacity=nogamma$1(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}cubehelix$2((function hue$1(a,b){var d=b-a;return d?linear$2(a,d>180||d<-180?d-360*Math.round(d/360):d):constant$c(isNaN(a)?b:a)}));var cubehelixLong=cubehelix$2(nogamma$1);function constant$b(x){return function(){return x}}function number$2(x){return+x}var unit=[0,1];function deinterpolateLinear(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:constant$b(b)}function bimap(domain,range,deinterpolate,reinterpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=deinterpolate(d1,d0),r0=reinterpolate(r1,r0)):(d0=deinterpolate(d0,d1),r0=reinterpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap(domain,range,deinterpolate,reinterpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=deinterpolate(domain[i],domain[i+1]),r[i]=reinterpolate(range[i],range[i+1]);return function(x){var i=bisectRight(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp())}function continuous(deinterpolate,reinterpolate){var piecewise,output,input,domain=unit,range=unit,interpolate=interpolateValue,clamp=!1;function rescale(){return piecewise=Math.min(domain.length,range.length)>2?polymap:bimap,output=input=null,scale}function scale(x){return(output||(output=piecewise(domain,range,clamp?function deinterpolateClamp(deinterpolate){return function(a,b){var d=deinterpolate(a=+a,b=+b);return function(x){return x<=a?0:x>=b?1:d(x)}}}(deinterpolate):deinterpolate,interpolate)))(+x)}return scale.invert=function(y){return(input||(input=piecewise(range,domain,deinterpolateLinear,clamp?function reinterpolateClamp(reinterpolate){return function(a,b){var r=reinterpolate(a=+a,b=+b);return function(t){return t<=0?a:t>=1?b:r(t)}}}(reinterpolate):reinterpolate)))(+y)},scale.domain=function(_){return arguments.length?(domain=map$1.call(_,number$2),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=slice$1.call(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=slice$1.call(_),interpolate=interpolateRound,rescale()},scale.clamp=function(_){return arguments.length?(clamp=!!_,rescale()):clamp},scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate},rescale()}function formatDecimalParts(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent$1(x){return(x=formatDecimalParts(Math.abs(x)))?x[1]:NaN}var prefixExponent,re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}function formatRounded(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var formatTypes={"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function formatDecimal(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,s:function formatPrefixAuto(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts(x,Math.max(0,p+i-1))[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}};function identity$5(x){return x}var locale$2,format,formatPrefix,map=Array.prototype.map,prefixes$1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$2(locale){var group=void 0===locale.grouping||void 0===locale.thousands?identity$5:function formatGroup(grouping,thousands){return function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}(map.call(locale.grouping,Number),locale.thousands+""),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?identity$5:function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"-":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0||1/value<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=function formatTrim(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&"+"!==sign&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes$1[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(exponent$1(value)/3))),k=Math.pow(10,-e),prefix=prefixes$1[8+e/3];return function(value){return f(k*value)+prefix}}}}function tickFormat(domain,count,specifier){var precision,start=domain[0],stop=domain[domain.length-1],step=tickStep(start,stop,null==count?10:count);switch((specifier=formatSpecifier(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=function precisionPrefix(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent$1(value)/3)))-exponent$1(Math.abs(step)))}(step,value))||(specifier.precision=precision),formatPrefix(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=function precisionRound(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,exponent$1(max)-exponent$1(step))+1}(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=function precisionFixed(step){return Math.max(0,-exponent$1(Math.abs(step)))}(step))||(specifier.precision=precision-2*("%"===specifier.type))}return format(specifier)}function linearish(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return ticks(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){return tickFormat(domain(),count,specifier)},scale.nice=function(count){null==count&&(count=10);var step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1];return stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step),(step=tickIncrement(start,stop,count))>0?step=tickIncrement(start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step,count):step<0&&(step=tickIncrement(start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step,count)),step>0?(d[i0]=Math.floor(start/step)*step,d[i1]=Math.ceil(stop/step)*step,domain(d)):step<0&&(d[i0]=Math.ceil(start*step)/step,d[i1]=Math.floor(stop*step)/step,domain(d)),scale},scale}function linear$1(){var scale=continuous(deinterpolateLinear,reinterpolate$1);return scale.copy=function(){return copy(scale,linear$1())},linearish(scale)}function nice(domain,interval){var t,i0=0,i1=(domain=domain.slice()).length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(t=i0,i0=i1,i1=t,t=x0,x0=x1,x1=t),domain[i0]=interval.floor(x0),domain[i1]=interval.ceil(x1),domain}function deinterpolate(a,b){return(b=Math.log(b/a))?function(x){return Math.log(x/a)/b}:constant$b(b)}function reinterpolate(a,b){return a<0?function(t){return-Math.pow(-b,t)*Math.pow(-a,1-t)}:function(t){return Math.pow(b,t)*Math.pow(a,1-t)}}function pow10(x){return isFinite(x)?+("1e"+x):x<0?0:x}function powp(base){return 10===base?pow10:base===Math.E?Math.exp:function(x){return Math.pow(base,x)}}function logp(base){return base===Math.E?Math.log:10===base&&Math.log10||2===base&&Math.log2||(base=Math.log(base),function(x){return Math.log(x)/base})}function reflect(f){return function(x){return-f(-x)}}function raise$4(x,exponent){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}function pow(){var exponent=1,scale=continuous((function deinterpolate(a,b){return(b=raise$4(b,exponent)-(a=raise$4(a,exponent)))?function(x){return(raise$4(x,exponent)-a)/b}:constant$b(b)}),(function reinterpolate(a,b){return b=raise$4(b,exponent)-(a=raise$4(a,exponent)),function(t){return raise$4(a+b*t,1/exponent)}})),domain=scale.domain;return scale.exponent=function(_){return arguments.length?(exponent=+_,domain(domain())):exponent},scale.copy=function(){return copy(scale,pow().exponent(exponent))},linearish(scale)}!function defaultLocale$2(definition){return locale$2=formatLocale$2(definition),format=locale$2.format,formatPrefix=locale$2.formatPrefix,locale$2}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var t0$2=new Date,t1$2=new Date;function newInterval$2(floori,offseti,count,field){function interval(date){return floori(date=0===arguments.length?new Date:new Date(+date)),date}return interval.floor=function(date){return floori(date=new Date(+date)),date},interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval$2((function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)}),(function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););}))},count&&(interval.count=function(start,end){return t0$2.setTime(+start),t1$2.setTime(+end),floori(t0$2),floori(t1$2),Math.floor(count(t0$2,t1$2))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var millisecond$2=newInterval$2((function(){}),(function(date,step){date.setTime(+date+step)}),(function(start,end){return end-start}));millisecond$2.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval$2((function(date){date.setTime(Math.floor(date/k)*k)}),(function(date,step){date.setTime(+date+step*k)}),(function(start,end){return(end-start)/k})):millisecond$2:null},millisecond$2.range;var second$2=newInterval$2((function(date){date.setTime(date-date.getMilliseconds())}),(function(date,step){date.setTime(+date+1e3*step)}),(function(start,end){return(end-start)/1e3}),(function(date){return date.getUTCSeconds()}));second$2.range;var minute$2=newInterval$2((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds())}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getMinutes()}));minute$2.range;var hour$2=newInterval$2((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds()-6e4*date.getMinutes())}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getHours()}));hour$2.range;var day$2=newInterval$2((function(date){date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/864e5}),(function(date){return date.getDate()-1}));function weekday$2(i){return newInterval$2((function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+7*step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/6048e5}))}day$2.range;var sunday$2=weekday$2(0),monday$2=weekday$2(1),tuesday$2=weekday$2(2),wednesday$2=weekday$2(3),thursday$2=weekday$2(4),friday$2=weekday$2(5),saturday$2=weekday$2(6);sunday$2.range,monday$2.range,tuesday$2.range,wednesday$2.range,thursday$2.range,friday$2.range,saturday$2.range;var month$2=newInterval$2((function(date){date.setDate(1),date.setHours(0,0,0,0)}),(function(date,step){date.setMonth(date.getMonth()+step)}),(function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),(function(date){return date.getMonth()}));month$2.range;var year$2=newInterval$2((function(date){date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step)}),(function(start,end){return end.getFullYear()-start.getFullYear()}),(function(date){return date.getFullYear()}));year$2.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval$2((function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step*k)})):null},year$2.range;var utcMinute$2=newInterval$2((function(date){date.setUTCSeconds(0,0)}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getUTCMinutes()}));utcMinute$2.range;var utcHour$2=newInterval$2((function(date){date.setUTCMinutes(0,0,0)}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getUTCHours()}));utcHour$2.range;var utcDay$2=newInterval$2((function(date){date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+step)}),(function(start,end){return(end-start)/864e5}),(function(date){return date.getUTCDate()-1}));function utcWeekday$2(i){return newInterval$2((function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+7*step)}),(function(start,end){return(end-start)/6048e5}))}utcDay$2.range;var utcSunday$2=utcWeekday$2(0),utcMonday$2=utcWeekday$2(1),utcTuesday$2=utcWeekday$2(2),utcWednesday$2=utcWeekday$2(3),utcThursday$2=utcWeekday$2(4),utcFriday$2=utcWeekday$2(5),utcSaturday$2=utcWeekday$2(6);utcSunday$2.range,utcMonday$2.range,utcTuesday$2.range,utcWednesday$2.range,utcThursday$2.range,utcFriday$2.range,utcSaturday$2.range;var utcMonth$2=newInterval$2((function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCMonth(date.getUTCMonth()+step)}),(function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())}),(function(date){return date.getUTCMonth()}));utcMonth$2.range;var utcYear$2=newInterval$2((function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)}),(function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function(date){return date.getUTCFullYear()}));function localDate$1(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate$1(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newDate(y,m,d){return{y:y,m:m,d:d,H:0,M:0,S:0,L:0}}utcYear$2.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval$2((function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)})):null},utcYear$2.range;var locale$1,timeFormat$1,utcFormat$1,utcParse$1,pads$1={"-":"",_:" ",0:"0"},numberRe$1=/^\s*\d+/,percentRe$1=/^%/,requoteRe$1=/[\\^$*+?|[\]().{}]/g;function pad$1(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote$1(s){return s.replace(requoteRe$1,"\\$&")}function formatRe$1(names){return new RegExp("^(?:"+names.map(requote$1).join("|")+")","i")}function formatLookup$1(names){for(var map={},i=-1,n=names.length;++i<n;)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumberSunday$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone$1(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseQuarter(d,string,i){var n=numberRe$1.exec(string.slice(i,i+1));return n?(d.q=3*n[0]-3,i+n[0].length):-1}function parseMonthNumber$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds$1(d,string,i){var n=numberRe$1.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent$1(d,string,i){var n=percentRe$1.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp$1(d,string,i){var n=numberRe$1.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds$1(d,string,i){var n=numberRe$1.exec(string.slice(i));return n?(d.s=+n[0],i+n[0].length):-1}function formatDayOfMonth$1(d,p){return pad$1(d.getDate(),p,2)}function formatHour24$1(d,p){return pad$1(d.getHours(),p,2)}function formatHour12$1(d,p){return pad$1(d.getHours()%12||12,p,2)}function formatDayOfYear$1(d,p){return pad$1(1+day$2.count(year$2(d),d),p,3)}function formatMilliseconds$1(d,p){return pad$1(d.getMilliseconds(),p,3)}function formatMicroseconds$1(d,p){return formatMilliseconds$1(d,p)+"000"}function formatMonthNumber$1(d,p){return pad$1(d.getMonth()+1,p,2)}function formatMinutes$1(d,p){return pad$1(d.getMinutes(),p,2)}function formatSeconds$1(d,p){return pad$1(d.getSeconds(),p,2)}function formatWeekdayNumberMonday$1(d){var day=d.getDay();return 0===day?7:day}function formatWeekNumberSunday$1(d,p){return pad$1(sunday$2.count(year$2(d)-1,d),p,2)}function dISO(d){var day=d.getDay();return day>=4||0===day?thursday$2(d):thursday$2.ceil(d)}function formatWeekNumberISO$1(d,p){return d=dISO(d),pad$1(thursday$2.count(year$2(d),d)+(4===year$2(d).getDay()),p,2)}function formatWeekdayNumberSunday$1(d){return d.getDay()}function formatWeekNumberMonday$1(d,p){return pad$1(monday$2.count(year$2(d)-1,d),p,2)}function formatYear$1(d,p){return pad$1(d.getFullYear()%100,p,2)}function formatYearISO(d,p){return pad$1((d=dISO(d)).getFullYear()%100,p,2)}function formatFullYear$1(d,p){return pad$1(d.getFullYear()%1e4,p,4)}function formatFullYearISO(d,p){var day=d.getDay();return pad$1((d=day>=4||0===day?thursday$2(d):thursday$2.ceil(d)).getFullYear()%1e4,p,4)}function formatZone$1(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad$1(z/60|0,"0",2)+pad$1(z%60,"0",2)}function formatUTCDayOfMonth$1(d,p){return pad$1(d.getUTCDate(),p,2)}function formatUTCHour24$1(d,p){return pad$1(d.getUTCHours(),p,2)}function formatUTCHour12$1(d,p){return pad$1(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear$1(d,p){return pad$1(1+utcDay$2.count(utcYear$2(d),d),p,3)}function formatUTCMilliseconds$1(d,p){return pad$1(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds$1(d,p){return formatUTCMilliseconds$1(d,p)+"000"}function formatUTCMonthNumber$1(d,p){return pad$1(d.getUTCMonth()+1,p,2)}function formatUTCMinutes$1(d,p){return pad$1(d.getUTCMinutes(),p,2)}function formatUTCSeconds$1(d,p){return pad$1(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday$1(d){var dow=d.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday$1(d,p){return pad$1(utcSunday$2.count(utcYear$2(d)-1,d),p,2)}function UTCdISO(d){var day=d.getUTCDay();return day>=4||0===day?utcThursday$2(d):utcThursday$2.ceil(d)}function formatUTCWeekNumberISO$1(d,p){return d=UTCdISO(d),pad$1(utcThursday$2.count(utcYear$2(d),d)+(4===utcYear$2(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday$1(d){return d.getUTCDay()}function formatUTCWeekNumberMonday$1(d,p){return pad$1(utcMonday$2.count(utcYear$2(d)-1,d),p,2)}function formatUTCYear$1(d,p){return pad$1(d.getUTCFullYear()%100,p,2)}function formatUTCYearISO(d,p){return pad$1((d=UTCdISO(d)).getUTCFullYear()%100,p,2)}function formatUTCFullYear$1(d,p){return pad$1(d.getUTCFullYear()%1e4,p,4)}function formatUTCFullYearISO(d,p){var day=d.getUTCDay();return pad$1((d=day>=4||0===day?utcThursday$2(d):utcThursday$2.ceil(d)).getUTCFullYear()%1e4,p,4)}function formatUTCZone$1(){return"+0000"}function formatLiteralPercent$1(){return"%"}function formatUnixTimestamp$1(d){return+d}function formatUnixTimestampSeconds$1(d){return Math.floor(+d/1e3)}!function defaultLocale$1(definition){return locale$1=function formatLocale$1(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe$1(locale_periods),periodLookup=formatLookup$1(locale_periods),weekdayRe=formatRe$1(locale_weekdays),weekdayLookup=formatLookup$1(locale_weekdays),shortWeekdayRe=formatRe$1(locale_shortWeekdays),shortWeekdayLookup=formatLookup$1(locale_shortWeekdays),monthRe=formatRe$1(locale_months),monthLookup=formatLookup$1(locale_months),shortMonthRe=formatRe$1(locale_shortMonths),shortMonthLookup=formatLookup$1(locale_shortMonths),formats={a:function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]},A:function formatWeekday(d){return locale_weekdays[d.getDay()]},b:function formatShortMonth(d){return locale_shortMonths[d.getMonth()]},B:function formatMonth(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth$1,e:formatDayOfMonth$1,f:formatMicroseconds$1,g:formatYearISO,G:formatFullYearISO,H:formatHour24$1,I:formatHour12$1,j:formatDayOfYear$1,L:formatMilliseconds$1,m:formatMonthNumber$1,M:formatMinutes$1,p:function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]},q:function formatQuarter(d){return 1+~~(d.getMonth()/3)},Q:formatUnixTimestamp$1,s:formatUnixTimestampSeconds$1,S:formatSeconds$1,u:formatWeekdayNumberMonday$1,U:formatWeekNumberSunday$1,V:formatWeekNumberISO$1,w:formatWeekdayNumberSunday$1,W:formatWeekNumberMonday$1,x:null,X:null,y:formatYear$1,Y:formatFullYear$1,Z:formatZone$1,"%":formatLiteralPercent$1},utcFormats={a:function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]},A:function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]},b:function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]},B:function formatUTCMonth(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth$1,e:formatUTCDayOfMonth$1,f:formatUTCMicroseconds$1,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24$1,I:formatUTCHour12$1,j:formatUTCDayOfYear$1,L:formatUTCMilliseconds$1,m:formatUTCMonthNumber$1,M:formatUTCMinutes$1,p:function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]},q:function formatUTCQuarter(d){return 1+~~(d.getUTCMonth()/3)},Q:formatUnixTimestamp$1,s:formatUnixTimestampSeconds$1,S:formatUTCSeconds$1,u:formatUTCWeekdayNumberMonday$1,U:formatUTCWeekNumberSunday$1,V:formatUTCWeekNumberISO$1,w:formatUTCWeekdayNumberSunday$1,W:formatUTCWeekNumberMonday$1,x:null,X:null,y:formatUTCYear$1,Y:formatUTCFullYear$1,Z:formatUTCZone$1,"%":formatLiteralPercent$1},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth$1,e:parseDayOfMonth$1,f:parseMicroseconds$1,g:parseYear$1,G:parseFullYear$1,H:parseHour24$1,I:parseHour24$1,j:parseDayOfYear$1,L:parseMilliseconds$1,m:parseMonthNumber$1,M:parseMinutes$1,p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp$1,s:parseUnixTimestampSeconds$1,S:parseSeconds$1,u:parseWeekdayNumberMonday$1,U:parseWeekNumberSunday$1,V:parseWeekNumberISO$1,w:parseWeekdayNumberSunday$1,W:parseWeekNumberMonday$1,x:function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear$1,Y:parseFullYear$1,Z:parseZone$1,"%":parseLiteralPercent$1};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads$1[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,Z){return function(string){var week,day,d=newDate(1900,void 0,1);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(Z&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day=(week=utcDate$1(newDate(d.y,0,1))).getUTCDay(),week=day>4||0===day?utcMonday$2.ceil(week):utcMonday$2(week),week=utcDay$2.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day=(week=localDate$1(newDate(d.y,0,1))).getDay(),week=day>4||0===day?monday$2.ceil(week):monday$2(week),week=day$2.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?utcDate$1(newDate(d.y,0,1)).getUTCDay():localDate$1(newDate(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate$1(d)):localDate$1(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in pads$1?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",!1);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier+="",!0);return p.toString=function(){return specifier},p}}}(definition),timeFormat$1=locale$1.format,locale$1.parse,utcFormat$1=locale$1.utcFormat,utcParse$1=locale$1.utcParse,locale$1}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||utcFormat$1("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||utcParse$1("%Y-%m-%dT%H:%M:%S.%LZ");var durationSecond$2=1e3,durationMinute$2=60*durationSecond$2,durationHour$2=60*durationMinute$2,durationDay$2=24*durationHour$2,durationWeek$2=7*durationDay$2,durationMonth=30*durationDay$2,durationYear=365*durationDay$2;function date$1(t){return new Date(t)}function number$1(t){return t instanceof Date?+t:+new Date(+t)}function calendar(year,month,week,day,hour,minute,second,millisecond,format){var scale=continuous(deinterpolateLinear,reinterpolate$1),invert=scale.invert,domain=scale.domain,formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y"),tickIntervals=[[second,1,durationSecond$2],[second,5,5*durationSecond$2],[second,15,15*durationSecond$2],[second,30,30*durationSecond$2],[minute,1,durationMinute$2],[minute,5,5*durationMinute$2],[minute,15,15*durationMinute$2],[minute,30,30*durationMinute$2],[hour,1,durationHour$2],[hour,3,3*durationHour$2],[hour,6,6*durationHour$2],[hour,12,12*durationHour$2],[day,1,durationDay$2],[day,2,2*durationDay$2],[week,1,durationWeek$2],[month,1,durationMonth],[month,3,3*durationMonth],[year,1,durationYear]];function tickFormat(date){return(second(date)<date?formatMillisecond:minute(date)<date?formatSecond:hour(date)<date?formatMinute:day(date)<date?formatHour:month(date)<date?week(date)<date?formatDay:formatWeek:year(date)<date?formatMonth:formatYear)(date)}function tickInterval(interval,start,stop,step){if(null==interval&&(interval=10),"number"==typeof interval){var target=Math.abs(stop-start)/interval,i=bisector((function(i){return i[2]})).right(tickIntervals,target);i===tickIntervals.length?(step=tickStep(start/durationYear,stop/durationYear,interval),interval=year):i?(step=(i=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i])[1],interval=i[0]):(step=Math.max(tickStep(start,stop,interval),1),interval=millisecond)}return null==step?interval:interval.every(step)}return scale.invert=function(y){return new Date(invert(y))},scale.domain=function(_){return arguments.length?domain(map$1.call(_,number$1)):domain().map(date$1)},scale.ticks=function(interval,step){var t,d=domain(),t0=d[0],t1=d[d.length-1],r=t1<t0;return r&&(t=t0,t0=t1,t1=t),t=(t=tickInterval(interval,t0,t1,step))?t.range(t0,t1+1):[],r?t.reverse():t},scale.tickFormat=function(count,specifier){return null==specifier?tickFormat:format(specifier)},scale.nice=function(interval,step){var d=domain();return(interval=tickInterval(interval,d[0],d[d.length-1],step))?domain(nice(d,interval)):scale},scale.copy=function(){return copy(scale,calendar(year,month,week,day,hour,minute,second,millisecond,format))},scale}function colors(s){return s.match(/.{6}/g).map((function(x){return"#"+x}))}var category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),category20b=colors("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),category20c=colors("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),category20=colors("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),cubehelix$1=cubehelixLong(cubehelix$6(300,.5,0),cubehelix$6(-240,.5,1)),warm=cubehelixLong(cubehelix$6(-100,.75,.35),cubehelix$6(80,1.5,.8)),cool=cubehelixLong(cubehelix$6(260,.75,.35),cubehelix$6(80,1.5,.8)),rainbow=cubehelix$6();function ramp(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var viridis=ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var xhtml$3="http://www.w3.org/1999/xhtml",namespaces$3={svg:"http://www.w3.org/2000/svg",xhtml:xhtml$3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace$3(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces$3.hasOwnProperty(prefix)?{space:namespaces$3[prefix],local:name}:name}function creatorInherit$3(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml$3&&document.documentElement.namespaceURI===xhtml$3?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed$3(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator$3(name){var fullname=namespace$3(name);return(fullname.local?creatorFixed$3:creatorInherit$3)(fullname)}function none$5(){}function selector$3(selector){return null==selector?none$5:function(){return this.querySelector(selector)}}function empty$3(){return[]}function selectorAll$3(selector){return null==selector?empty$3:function(){return this.querySelectorAll(selector)}}var matcher$3=function(selector){return function(){return this.matches(selector)}};if("undefined"!=typeof document){var element$4=document.documentElement;if(!element$4.matches){var vendorMatches=element$4.webkitMatchesSelector||element$4.msMatchesSelector||element$4.mozMatchesSelector||element$4.oMatchesSelector;matcher$3=function(selector){return function(){return vendorMatches.call(this,selector)}}}}var matcher$4=matcher$3;function sparse$3(update){return new Array(update.length)}function EnterNode$3(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}EnterNode$3.prototype={constructor:EnterNode$3,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};var keyPrefix$3="$";function bindIndex$3(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode$3(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey$3(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue={},groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=keyPrefix$3+key.call(node,node.__data__,i,group),keyValue in nodeByKeyValue?exit[i]=node:nodeByKeyValue[keyValue]=node);for(i=0;i<dataLength;++i)(node=nodeByKeyValue[keyValue=keyPrefix$3+key.call(parent,data[i],i,data)])?(update[i]=node,node.__data__=data[i],nodeByKeyValue[keyValue]=null):enter[i]=new EnterNode$3(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue[keyValues[i]]===node&&(exit[i]=node)}function ascending$4(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function attrRemove$5(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$5(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$5(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS$5(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction$5(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS$5(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function defaultView$3(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove$5(name){return function(){this.style.removeProperty(name)}}function styleConstant$5(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction$5(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function styleValue$3(node,name){return node.style.getPropertyValue(name)||defaultView$3(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove$3(name){return function(){delete this[name]}}function propertyConstant$3(name,value){return function(){this[name]=value}}function propertyFunction$3(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray$3(string){return string.trim().split(/^|\s+/)}function classList$3(node){return node.classList||new ClassList$3(node)}function ClassList$3(node){this._node=node,this._names=classArray$3(node.getAttribute("class")||"")}function classedAdd$3(node,names){for(var list=classList$3(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove$3(node,names){for(var list=classList$3(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue$3(names){return function(){classedAdd$3(this,names)}}function classedFalse$3(names){return function(){classedRemove$3(this,names)}}function classedFunction$3(names,value){return function(){(value.apply(this,arguments)?classedAdd$3:classedRemove$3)(this,names)}}function textRemove$3(){this.textContent=""}function textConstant$5(value){return function(){this.textContent=value}}function textFunction$5(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove$3(){this.innerHTML=""}function htmlConstant$3(value){return function(){this.innerHTML=value}}function htmlFunction$3(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise$3(){this.nextSibling&&this.parentNode.appendChild(this)}function lower$3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull$3(){return null}function remove$3(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow$3(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function selection_cloneDeep$3(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}ClassList$3.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};var filterEvents$3={},event$2=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(filterEvents$3={mouseenter:"mouseover",mouseleave:"mouseout"}));function filterContextListener$3(listener,index,group){return listener=contextListener$3(listener,index,group),function(event){var related=event.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||listener.call(this,event)}}function contextListener$3(listener,index,group){return function(event1){var event0=event$2;event$2=event1;try{listener.call(this,this.__data__,index,group)}finally{event$2=event0}}}function onRemove$3(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?on.length=i:delete this.__on}}}function onAdd$3(typename,value,capture){var wrap=filterEvents$3.hasOwnProperty(typename.type)?filterContextListener$3:contextListener$3;return function(d,i,group){var o,on=this.__on,listener=wrap(value,i,group);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=listener,o.capture=capture),void(o.value=value);this.addEventListener(typename.type,listener,capture),o={type:typename.type,name:typename.name,value:value,listener:listener,capture:capture},on?on.push(o):this.__on=[o]}}function dispatchEvent$3(node,type,params){var window=defaultView$3(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant$3(type,params){return function(){return dispatchEvent$3(this,type,params)}}function dispatchFunction$3(type,params){return function(){return dispatchEvent$3(this,type,params.apply(this,arguments))}}var root$5=[null];function Selection$5(groups,parents){this._groups=groups,this._parents=parents}function selection$1(){return new Selection$5([[document.documentElement]],root$5)}function select$2(selector){return"string"==typeof selector?new Selection$5([[document.querySelector(selector)]],[document.documentElement]):new Selection$5([[selector]],root$5)}Selection$5.prototype=selection$1.prototype={constructor:Selection$5,select:function selection_select$3(select){"function"!=typeof select&&(select=selector$3(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection$5(subgroups,this._parents)},selectAll:function selection_selectAll$3(select){"function"!=typeof select&&(select=selectorAll$3(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection$5(subgroups,parents)},filter:function selection_filter$3(match){"function"!=typeof match&&(match=matcher$4(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection$5(subgroups,this._parents)},data:function selection_data$3(value,key){if(!value)return data=new Array(this.size()),j=-1,this.each((function(d){data[++j]=d})),data;var bind=key?bindKey$3:bindIndex$3,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=function constant$a(x){return function(){return x}}(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=value.call(parent,parent&&parent.__data__,j,parents),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength);bind(parent,group,enterGroup,updateGroup,exit[j]=new Array(groupLength),data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection$5(update,parents))._enter=enter,update._exit=exit,update},enter:function selection_enter$3(){return new Selection$5(this._enter||this._groups.map(sparse$3),this._parents)},exit:function selection_exit$3(){return new Selection$5(this._exit||this._groups.map(sparse$3),this._parents)},merge:function selection_merge$3(selection){for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection$5(merges,this._parents)},order:function selection_order$3(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&next!==node.nextSibling&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function selection_sort$3(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending$4);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection$5(sortgroups,this._parents).order()},call:function selection_call$3(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function selection_nodes$3(){var nodes=new Array(this.size()),i=-1;return this.each((function(){nodes[++i]=this})),nodes},node:function selection_node$3(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function selection_size$3(){var size=0;return this.each((function(){++size})),size},empty:function selection_empty$3(){return!this.node()},each:function selection_each$3(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function selection_attr$3(name,value){var fullname=namespace$3(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS$5:attrRemove$5:"function"==typeof value?fullname.local?attrFunctionNS$5:attrFunction$5:fullname.local?attrConstantNS$5:attrConstant$5)(fullname,value))},style:function selection_style$3(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove$5:"function"==typeof value?styleFunction$5:styleConstant$5)(name,value,null==priority?"":priority)):styleValue$3(this.node(),name)},property:function selection_property$3(name,value){return arguments.length>1?this.each((null==value?propertyRemove$3:"function"==typeof value?propertyFunction$3:propertyConstant$3)(name,value)):this.node()[name]},classed:function selection_classed$3(name,value){var names=classArray$3(name+"");if(arguments.length<2){for(var list=classList$3(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction$3:value?classedTrue$3:classedFalse$3)(names,value))},text:function selection_text$3(value){return arguments.length?this.each(null==value?textRemove$3:("function"==typeof value?textFunction$5:textConstant$5)(value)):this.node().textContent},html:function selection_html$3(value){return arguments.length?this.each(null==value?htmlRemove$3:("function"==typeof value?htmlFunction$3:htmlConstant$3)(value)):this.node().innerHTML},raise:function selection_raise$3(){return this.each(raise$3)},lower:function selection_lower$3(){return this.each(lower$3)},append:function selection_append$3(name){var create="function"==typeof name?name:creator$3(name);return this.select((function(){return this.appendChild(create.apply(this,arguments))}))},insert:function selection_insert$3(name,before){var create="function"==typeof name?name:creator$3(name),select=null==before?constantNull$3:"function"==typeof before?before:selector$3(before);return this.select((function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function selection_remove$3(){return this.each(remove$3)},clone:function selection_clone$3(deep){return this.select(deep?selection_cloneDeep$3:selection_cloneShallow$3)},datum:function selection_datum$3(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function selection_on$3(typename,value,capture){var i,t,typenames=function parseTypenames$6(typenames){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name:name}}))}(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd$3:onRemove$3,null==capture&&(capture=!1),i=0;i<n;++i)this.each(on(typenames[i],value,capture));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function selection_dispatch$3(type,params){return this.each(("function"==typeof params?dispatchFunction$3:dispatchConstant$3)(type,params))}};var nextId$3=0;function local(){return new Local$3}function Local$3(){this._="@"+(++nextId$3).toString(36)}function sourceEvent$1(){for(var source,current=event$2;source=current.sourceEvent;)current=source;return current}function point$9(node,event){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,point.y=event.clientY,[(point=point.matrixTransform(node.getScreenCTM().inverse())).x,point.y]}var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}Local$3.prototype=local.prototype={constructor:Local$3,get:function(node){for(var id=this._;!(id in node);)if(!(node=node.parentNode))return;return node[id]},set:function(node,value){return node[this._]=value},remove:function(node){return this._ in node&&delete node[this._]},toString:function(){return this._}};var pi$2=Math.PI,tau$3=2*pi$2,tauEpsilon=tau$3-1e-6;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}function constant$9(x){return function constant(){return x}}Path.prototype=path.prototype={constructor:Path,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r){var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((pi$2-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;Math.abs(t01-1)>1e-6&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}else this._+="L"+(this._x1=x1)+","+(this._y1=y1);else;},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y,ccw=!!ccw;var dx=(r=+r)*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(da<0&&(da=da%tau$3+tau$3),da>tauEpsilon?this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):da>1e-6&&(this._+="A"+r+","+r+",0,"+ +(da>=pi$2)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}};var abs=Math.abs,atan2=Math.atan2,cos=Math.cos,max=Math.max,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,pi$1=Math.PI,halfPi$1=pi$1/2,tau$2=2*pi$1;function asin$1(x){return x>=1?halfPi$1:x<=-1?-halfPi$1:Math.asin(x)}function arcInnerRadius$1(d){return d.innerRadius}function arcOuterRadius$1(d){return d.outerRadius}function arcStartAngle$1(d){return d.startAngle}function arcEndAngle$1(d){return d.endAngle}function arcPadAngle$1(d){return d&&d.padAngle}function cornerTangents$1(x0,y0,x1,y1,r1,rc,cw){var x01=x0-x1,y01=y0-y1,lo=(cw?rc:-rc)/sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d2=dx*dx+dy*dy,r=r1-rc,D=x11*y10-x10*y11,d=(dy<0?-1:1)*sqrt(max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;return dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1&&(cx0=cx1,cy0=cy1),{cx:cx0,cy:cy0,x01:-ox,y01:-oy,x11:cx0*(r1/r-1),y11:cy0*(r1/r-1)}}function Linear$1(context){this._context=context}function curveLinear$1(context){return new Linear$1(context)}function x$2(p){return p[0]}function y$2(p){return p[1]}function line$1(){var x=x$2,y=y$2,defined=constant$9(!0),context=null,curve=curveLinear$1,output=null;function line(data){var i,d,buffer,n=data.length,defined0=!1;for(null==context&&(output=curve(buffer=path())),i=0;i<=n;++i)!(i<n&&defined(d=data[i],i,data))===defined0&&((defined0=!defined0)?output.lineStart():output.lineEnd()),defined0&&output.point(+x(d,i,data),+y(d,i,data));if(buffer)return output=null,buffer+""||null}return line.x=function(_){return arguments.length?(x="function"==typeof _?_:constant$9(+_),line):x},line.y=function(_){return arguments.length?(y="function"==typeof _?_:constant$9(+_),line):y},line.defined=function(_){return arguments.length?(defined="function"==typeof _?_:constant$9(!!_),line):defined},line.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),line):curve},line.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),line):context},line}function area(){var x0=x$2,x1=null,y0=constant$9(0),y1=y$2,defined=constant$9(!0),context=null,curve=curveLinear$1,output=null;function area(data){var i,j,k,d,buffer,n=data.length,defined0=!1,x0z=new Array(n),y0z=new Array(n);for(null==context&&(output=curve(buffer=path())),i=0;i<=n;++i){if(!(i<n&&defined(d=data[i],i,data))===defined0)if(defined0=!defined0)j=i,output.areaStart(),output.lineStart();else{for(output.lineEnd(),output.lineStart(),k=i-1;k>=j;--k)output.point(x0z[k],y0z[k]);output.lineEnd(),output.areaEnd()}defined0&&(x0z[i]=+x0(d,i,data),y0z[i]=+y0(d,i,data),output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i]))}if(buffer)return output=null,buffer+""||null}function arealine(){return line$1().defined(defined).curve(curve).context(context)}return area.x=function(_){return arguments.length?(x0="function"==typeof _?_:constant$9(+_),x1=null,area):x0},area.x0=function(_){return arguments.length?(x0="function"==typeof _?_:constant$9(+_),area):x0},area.x1=function(_){return arguments.length?(x1=null==_?null:"function"==typeof _?_:constant$9(+_),area):x1},area.y=function(_){return arguments.length?(y0="function"==typeof _?_:constant$9(+_),y1=null,area):y0},area.y0=function(_){return arguments.length?(y0="function"==typeof _?_:constant$9(+_),area):y0},area.y1=function(_){return arguments.length?(y1=null==_?null:"function"==typeof _?_:constant$9(+_),area):y1},area.lineX0=area.lineY0=function(){return arealine().x(x0).y(y0)},area.lineY1=function(){return arealine().x(x0).y(y1)},area.lineX1=function(){return arealine().x(x1).y(y0)},area.defined=function(_){return arguments.length?(defined="function"==typeof _?_:constant$9(!!_),area):defined},area.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),area):curve},area.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),area):context},area}function descending$1(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function identity$3(d){return d}Linear$1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._context.lineTo(x,y)}}};var curveRadialLinear=curveRadial$1(curveLinear$1);function Radial(curve){this._curve=curve}function curveRadial$1(curve){function radial(context){return new Radial(curve(context))}return radial._curve=curve,radial}function lineRadial(l){var c=l.curve;return l.angle=l.x,delete l.x,l.radius=l.y,delete l.y,l.curve=function(_){return arguments.length?c(curveRadial$1(_)):c()._curve},l}function lineRadial$1(){return lineRadial(line$1().curve(curveRadialLinear))}function areaRadial(){var a=area().curve(curveRadialLinear),c=a.curve,x0=a.lineX0,x1=a.lineX1,y0=a.lineY0,y1=a.lineY1;return a.angle=a.x,delete a.x,a.startAngle=a.x0,delete a.x0,a.endAngle=a.x1,delete a.x1,a.radius=a.y,delete a.y,a.innerRadius=a.y0,delete a.y0,a.outerRadius=a.y1,delete a.y1,a.lineStartAngle=function(){return lineRadial(x0())},delete a.lineX0,a.lineEndAngle=function(){return lineRadial(x1())},delete a.lineX1,a.lineInnerRadius=function(){return lineRadial(y0())},delete a.lineY0,a.lineOuterRadius=function(){return lineRadial(y1())},delete a.lineY1,a.curve=function(_){return arguments.length?c(curveRadial$1(_)):c()._curve},a}function pointRadial(x,y){return[(y=+y)*Math.cos(x-=Math.PI/2),y*Math.sin(x)]}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,r){this._curve.point(r*Math.sin(a),r*-Math.cos(a))}};var slice=Array.prototype.slice;function linkSource(d){return d.source}function linkTarget(d){return d.target}function link(curve){var source=linkSource,target=linkTarget,x=x$2,y=y$2,context=null;function link(){var buffer,argv=slice.call(arguments),s=source.apply(this,argv),t=target.apply(this,argv);if(context||(context=buffer=path()),curve(context,+x.apply(this,(argv[0]=s,argv)),+y.apply(this,argv),+x.apply(this,(argv[0]=t,argv)),+y.apply(this,argv)),buffer)return context=null,buffer+""||null}return link.source=function(_){return arguments.length?(source=_,link):source},link.target=function(_){return arguments.length?(target=_,link):target},link.x=function(_){return arguments.length?(x="function"==typeof _?_:constant$9(+_),link):x},link.y=function(_){return arguments.length?(y="function"==typeof _?_:constant$9(+_),link):y},link.context=function(_){return arguments.length?(context=null==_?null:_,link):context},link}function curveHorizontal(context,x0,y0,x1,y1){context.moveTo(x0,y0),context.bezierCurveTo(x0=(x0+x1)/2,y0,x0,y1,x1,y1)}function curveVertical(context,x0,y0,x1,y1){context.moveTo(x0,y0),context.bezierCurveTo(x0,y0=(y0+y1)/2,x1,y0,x1,y1)}function curveRadial(context,x0,y0,x1,y1){var p0=pointRadial(x0,y0),p1=pointRadial(x0,y0=(y0+y1)/2),p2=pointRadial(x1,y0),p3=pointRadial(x1,y1);context.moveTo(p0[0],p0[1]),context.bezierCurveTo(p1[0],p1[1],p2[0],p2[1],p3[0],p3[1])}var circle={draw:function(context,size){var r=Math.sqrt(size/pi$1);context.moveTo(r,0),context.arc(0,0,r,0,tau$2)}},cross={draw:function(context,size){var r=Math.sqrt(size/5)/2;context.moveTo(-3*r,-r),context.lineTo(-r,-r),context.lineTo(-r,-3*r),context.lineTo(r,-3*r),context.lineTo(r,-r),context.lineTo(3*r,-r),context.lineTo(3*r,r),context.lineTo(r,r),context.lineTo(r,3*r),context.lineTo(-r,3*r),context.lineTo(-r,r),context.lineTo(-3*r,r),context.closePath()}},tan30=Math.sqrt(1/3),tan30_2=2*tan30,diamond={draw:function(context,size){var y=Math.sqrt(size/tan30_2),x=y*tan30;context.moveTo(0,-y),context.lineTo(x,0),context.lineTo(0,y),context.lineTo(-x,0),context.closePath()}},kr=Math.sin(pi$1/10)/Math.sin(7*pi$1/10),kx=Math.sin(tau$2/10)*kr,ky=-Math.cos(tau$2/10)*kr,star={draw:function(context,size){var r=Math.sqrt(.8908130915292852*size),x=kx*r,y=ky*r;context.moveTo(0,-r),context.lineTo(x,y);for(var i=1;i<5;++i){var a=tau$2*i/5,c=Math.cos(a),s=Math.sin(a);context.lineTo(s*r,-c*r),context.lineTo(c*x-s*y,s*x+c*y)}context.closePath()}},square={draw:function(context,size){var w=Math.sqrt(size),x=-w/2;context.rect(x,x,w,w)}},sqrt3=Math.sqrt(3),triangle={draw:function(context,size){var y=-Math.sqrt(size/(3*sqrt3));context.moveTo(0,2*y),context.lineTo(-sqrt3*y,-y),context.lineTo(sqrt3*y,-y),context.closePath()}},c=-.5,s=Math.sqrt(3)/2,k=1/Math.sqrt(12),a=3*(k/2+1),wye={draw:function(context,size){var r=Math.sqrt(size/a),x0=r/2,y0=r*k,x1=x0,y1=r*k+r,x2=-x1,y2=y1;context.moveTo(x0,y0),context.lineTo(x1,y1),context.lineTo(x2,y2),context.lineTo(c*x0-s*y0,s*x0+c*y0),context.lineTo(c*x1-s*y1,s*x1+c*y1),context.lineTo(c*x2-s*y2,s*x2+c*y2),context.lineTo(c*x0+s*y0,c*y0-s*x0),context.lineTo(c*x1+s*y1,c*y1-s*x1),context.lineTo(c*x2+s*y2,c*y2-s*x2),context.closePath()}},symbols=[circle,cross,diamond,square,star,triangle,wye];function noop$4(){}function point$8(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6)}function Basis$1(context){this._context=context}function BasisClosed(context){this._context=context}function BasisOpen(context){this._context=context}function Bundle$1(context,beta){this._basis=new Basis$1(context),this._beta=beta}Basis$1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$8(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$8(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}},BasisClosed.prototype={areaStart:noop$4,areaEnd:noop$4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x2=x,this._y2=y;break;case 1:this._point=2,this._x3=x,this._y3=y;break;case 2:this._point=3,this._x4=x,this._y4=y,this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:point$8(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}},BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var x0=(this._x0+4*this._x1+x)/6,y0=(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point=4;default:point$8(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}},Bundle$1.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0)for(var t,x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1;++i<=j;)t=i/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x=this._y=null,this._basis.lineEnd()},point:function(x,y){this._x.push(+x),this._y.push(+y)}};var bundle=function custom(beta){function bundle(context){return 1===beta?new Basis$1(context):new Bundle$1(context,beta)}return bundle.beta=function(beta){return custom(+beta)},bundle}(.85);function point$7(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal$1(context,tension){this._context=context,this._k=(1-tension)/6}Cardinal$1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$7(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2,this._x1=x,this._y1=y;break;case 2:this._point=3;default:point$7(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinal=function custom(tension){function cardinal(context){return new Cardinal$1(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0);function CardinalClosed$1(context,tension){this._context=context,this._k=(1-tension)/6}CardinalClosed$1.prototype={areaStart:noop$4,areaEnd:noop$4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:point$7(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalClosed=function custom(tension){function cardinal(context){return new CardinalClosed$1(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0);function CardinalOpen$1(context,tension){this._context=context,this._k=(1-tension)/6}CardinalOpen$1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$7(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalOpen=function custom(tension){function cardinal(context){return new CardinalOpen$1(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0);function point$6(that,x,y){var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>1e-12){var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n,y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n}if(that._l23_a>1e-12){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m,y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m}that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom$1(context,alpha){this._context=context,this._alpha=alpha}CatmullRom$1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;default:point$6(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRom=function custom(alpha){function catmullRom(context){return alpha?new CatmullRom$1(context,alpha):new Cardinal$1(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function CatmullRomClosed$1(context,alpha){this._context=context,this._alpha=alpha}CatmullRomClosed$1.prototype={areaStart:noop$4,areaEnd:noop$4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:point$6(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomClosed=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomClosed$1(context,alpha):new CardinalClosed$1(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function CatmullRomOpen$1(context,alpha){this._context=context,this._alpha=alpha}CatmullRomOpen$1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$6(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomOpen=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomOpen$1(context,alpha):new CardinalOpen$1(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function LinearClosed(context){this._context=context}function sign$1(x){return x<0?-1:1}function slope3$1(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);return(sign$1(s0)+sign$1(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}function slope2$1(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function point$5(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX$1(context){this._context=context}function MonotoneY(context){this._context=new ReflectContext(context)}function ReflectContext(context){this._context=context}function Natural(context){this._context=context}function controlPoints(x){var i,m,n=x.length-1,a=new Array(n),b=new Array(n),r=new Array(n);for(a[0]=0,b[0]=2,r[0]=x[0]+2*x[1],i=1;i<n-1;++i)a[i]=1,b[i]=4,r[i]=4*x[i]+2*x[i+1];for(a[n-1]=2,b[n-1]=7,r[n-1]=8*x[n-1]+x[n],i=1;i<n;++i)m=a[i]/b[i-1],b[i]-=m,r[i]-=m*r[i-1];for(a[n-1]=r[n-1]/b[n-1],i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];for(b[n-1]=(x[n]+a[n-1])/2,i=0;i<n-1;++i)b[i]=2*x[i+1]-a[i+1];return[a,b]}function Step(context,t){this._context=context,this._t=t}function none$4(series,order){if((n=series.length)>1)for(var j,s0,n,i=1,s1=series[order[0]],m=s1.length;i<n;++i)for(s0=s1,s1=series[order[i]],j=0;j<m;++j)s1[j][1]+=s1[j][0]=isNaN(s0[j][1])?s0[j][0]:s0[j][1]}function none$3(series){for(var n=series.length,o=new Array(n);--n>=0;)o[n]=n;return o}function stackValue(d,key){return d[key]}function ascending$3(series){var sums=series.map(sum);return none$3(series).sort((function(a,b){return sums[a]-sums[b]}))}function sum(series){for(var v,s=0,i=-1,n=series.length;++i<n;)(v=+series[i][1])&&(s+=v);return s}LinearClosed.prototype={areaStart:noop$4,areaEnd:noop$4,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(x,y){x=+x,y=+y,this._point?this._context.lineTo(x,y):(this._point=1,this._context.moveTo(x,y))}},MonotoneX$1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$5(this,this._t0,slope2$1(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){var t1=NaN;if(y=+y,(x=+x)!==this._x1||y!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,point$5(this,slope2$1(this,t1=slope3$1(this,x,y)),t1);break;default:point$5(this,this._t0,t1=slope3$1(this,x,y))}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y,this._t0=t1}}},(MonotoneY.prototype=Object.create(MonotoneX$1.prototype)).point=function(x,y){MonotoneX$1.prototype.point.call(this,y,x)},ReflectContext.prototype={moveTo:function(x,y){this._context.moveTo(y,x)},closePath:function(){this._context.closePath()},lineTo:function(x,y){this._context.lineTo(y,x)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x)}},Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var x=this._x,y=this._y,n=x.length;if(n)if(this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]),2===n)this._context.lineTo(x[1],y[1]);else for(var px=controlPoints(x),py=controlPoints(y),i0=0,i1=1;i1<n;++i0,++i1)this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x[i1],y[i1]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(x,y){this._x.push(+x),this._y.push(+y)}},Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,y),this._context.lineTo(x,y);else{var x1=this._x*(1-this._t)+x*this._t;this._context.lineTo(x1,this._y),this._context.lineTo(x1,y)}}this._x=x,this._y=y}};var t0$1=new Date,t1$1=new Date;function newInterval$1(floori,offseti,count,field){function interval(date){return floori(date=new Date(+date)),date}return interval.floor=interval,interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval$1((function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)}),(function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););}))},count&&(interval.count=function(start,end){return t0$1.setTime(+start),t1$1.setTime(+end),floori(t0$1),floori(t1$1),Math.floor(count(t0$1,t1$1))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var millisecond$1=newInterval$1((function(){}),(function(date,step){date.setTime(+date+step)}),(function(start,end){return end-start}));millisecond$1.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval$1((function(date){date.setTime(Math.floor(date/k)*k)}),(function(date,step){date.setTime(+date+step*k)}),(function(start,end){return(end-start)/k})):millisecond$1:null};var milliseconds=millisecond$1.range,second$1=newInterval$1((function(date){date.setTime(1e3*Math.floor(date/1e3))}),(function(date,step){date.setTime(+date+1e3*step)}),(function(start,end){return(end-start)/1e3}),(function(date){return date.getUTCSeconds()})),seconds=second$1.range,minute$1=newInterval$1((function(date){date.setTime(6e4*Math.floor(date/6e4))}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getMinutes()})),minutes=minute$1.range,hour$1=newInterval$1((function(date){var offset=6e4*date.getTimezoneOffset()%36e5;offset<0&&(offset+=36e5),date.setTime(36e5*Math.floor((+date-offset)/36e5)+offset)}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getHours()})),hours=hour$1.range,day$1=newInterval$1((function(date){date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/864e5}),(function(date){return date.getDate()-1})),days=day$1.range;function weekday$1(i){return newInterval$1((function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+7*step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/6048e5}))}var sunday$1=weekday$1(0),monday$1=weekday$1(1),tuesday$1=weekday$1(2),wednesday$1=weekday$1(3),thursday$1=weekday$1(4),friday$1=weekday$1(5),saturday$1=weekday$1(6),sundays=sunday$1.range,mondays=monday$1.range,tuesdays=tuesday$1.range,wednesdays=wednesday$1.range,thursdays=thursday$1.range,fridays=friday$1.range,saturdays=saturday$1.range,month$1=newInterval$1((function(date){date.setDate(1),date.setHours(0,0,0,0)}),(function(date,step){date.setMonth(date.getMonth()+step)}),(function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),(function(date){return date.getMonth()})),months=month$1.range,year$1=newInterval$1((function(date){date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step)}),(function(start,end){return end.getFullYear()-start.getFullYear()}),(function(date){return date.getFullYear()}));year$1.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval$1((function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step*k)})):null};var years=year$1.range,utcMinute$1=newInterval$1((function(date){date.setUTCSeconds(0,0)}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getUTCMinutes()})),utcMinutes=utcMinute$1.range,utcHour$1=newInterval$1((function(date){date.setUTCMinutes(0,0,0)}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getUTCHours()})),utcHours=utcHour$1.range,utcDay$1=newInterval$1((function(date){date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+step)}),(function(start,end){return(end-start)/864e5}),(function(date){return date.getUTCDate()-1})),utcDays=utcDay$1.range;function utcWeekday$1(i){return newInterval$1((function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+7*step)}),(function(start,end){return(end-start)/6048e5}))}var utcSunday$1=utcWeekday$1(0),utcMonday$1=utcWeekday$1(1),utcTuesday$1=utcWeekday$1(2),utcWednesday$1=utcWeekday$1(3),utcThursday$1=utcWeekday$1(4),utcFriday$1=utcWeekday$1(5),utcSaturday$1=utcWeekday$1(6),utcSundays=utcSunday$1.range,utcMondays=utcMonday$1.range,utcTuesdays=utcTuesday$1.range,utcWednesdays=utcWednesday$1.range,utcThursdays=utcThursday$1.range,utcFridays=utcFriday$1.range,utcSaturdays=utcSaturday$1.range,utcMonth$1=newInterval$1((function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCMonth(date.getUTCMonth()+step)}),(function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())}),(function(date){return date.getUTCMonth()})),utcMonths=utcMonth$1.range,utcYear$1=newInterval$1((function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)}),(function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function(date){return date.getUTCFullYear()}));utcYear$1.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval$1((function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)})):null};var utcYears=utcYear$1.range,t0=new Date,t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=0===arguments.length?new Date:new Date(+date)),date}return interval.floor=function(date){return floori(date=new Date(+date)),date},interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval((function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)}),(function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););}))},count&&(interval.count=function(start,end){return t0.setTime(+start),t1.setTime(+end),floori(t0),floori(t1),Math.floor(count(t0,t1))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var millisecond=newInterval((function(){}),(function(date,step){date.setTime(+date+step)}),(function(start,end){return end-start}));millisecond.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval((function(date){date.setTime(Math.floor(date/k)*k)}),(function(date,step){date.setTime(+date+step*k)}),(function(start,end){return(end-start)/k})):millisecond:null},millisecond.range;var second=newInterval((function(date){date.setTime(date-date.getMilliseconds())}),(function(date,step){date.setTime(+date+1e3*step)}),(function(start,end){return(end-start)/1e3}),(function(date){return date.getUTCSeconds()}));second.range;var minute=newInterval((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds())}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getMinutes()}));minute.range;var hour=newInterval((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds()-6e4*date.getMinutes())}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getHours()}));hour.range;var day=newInterval((function(date){date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/864e5}),(function(date){return date.getDate()-1}));function weekday(i){return newInterval((function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+7*step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/6048e5}))}day.range;var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6);sunday.range,monday.range,tuesday.range,wednesday.range,thursday.range,friday.range,saturday.range;var month=newInterval((function(date){date.setDate(1),date.setHours(0,0,0,0)}),(function(date,step){date.setMonth(date.getMonth()+step)}),(function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),(function(date){return date.getMonth()}));month.range;var year=newInterval((function(date){date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step)}),(function(start,end){return end.getFullYear()-start.getFullYear()}),(function(date){return date.getFullYear()}));year.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step*k)})):null},year.range;var utcMinute=newInterval((function(date){date.setUTCSeconds(0,0)}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getUTCMinutes()}));utcMinute.range;var utcHour=newInterval((function(date){date.setUTCMinutes(0,0,0)}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getUTCHours()}));utcHour.range;var utcDay=newInterval((function(date){date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+step)}),(function(start,end){return(end-start)/864e5}),(function(date){return date.getUTCDate()-1}));function utcWeekday(i){return newInterval((function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+7*step)}),(function(start,end){return(end-start)/6048e5}))}utcDay.range;var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range,utcMonday.range,utcTuesday.range,utcWednesday.range,utcThursday.range,utcFriday.range,utcSaturday.range;var utcMonth=newInterval((function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCMonth(date.getUTCMonth()+step)}),(function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())}),(function(date){return date.getUTCMonth()}));utcMonth.range;var utcYear=newInterval((function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)}),(function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function(date){return date.getUTCFullYear()}));function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newYear(y){return{y:y,m:0,d:1,H:0,M:0,S:0,L:0}}function formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={a:function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]},A:function formatWeekday(d){return locale_weekdays[d.getDay()]},b:function formatShortMonth(d){return locale_shortMonths[d.getMonth()]},B:function formatMonth(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},utcFormats={a:function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]},A:function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]},b:function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]},B:function formatUTCMonth(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,newDate){return function(string){var week,day$1,d=newYear(1900);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("p"in d&&(d.H=d.H%12+12*d.p),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day$1=(week=utcDate(newYear(d.y))).getUTCDay(),week=day$1>4||0===day$1?utcMonday.ceil(week):utcMonday(week),week=utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day$1=(week=newDate(newYear(d.y))).getDay(),week=day$1>4||0===day$1?monday.ceil(week):monday(week),week=day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day$1="Z"in d?utcDate(newYear(d.y)).getUTCDay():newDate(newYear(d.y)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day$1+5)%7:d.w+7*d.U-(day$1+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate(d)):newDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",localDate);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier,utcDate);return p.toString=function(){return specifier},p}}}utcYear.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)})):null},utcYear.range;var locale,timeFormat,timeParse,utcFormat,utcParse,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){for(var map={},i=-1,n=names.length;++i<n;)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=1e3*+n[0],i+n[0].length):-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+day.count(year(d),d),p,3)}function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000"}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){var day=d.getDay();return 0===day?7:day}function formatWeekNumberSunday(d,p){return pad(sunday.count(year(d),d),p,2)}function formatWeekNumberISO(d,p){var day=d.getDay();return d=day>=4||0===day?thursday(d):thursday.ceil(d),pad(thursday.count(year(d),d)+(4===year(d).getDay()),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(monday.count(year(d),d),p,2)}function formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad(z/60|0,"0",2)+pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+utcDay.count(utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000"}function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday(d,p){return pad(utcSunday.count(utcYear(d),d),p,2)}function formatUTCWeekNumberISO(d,p){var day=d.getUTCDay();return d=day>=4||0===day?utcThursday(d):utcThursday.ceil(d),pad(utcThursday.count(utcYear(d),d)+(4===utcYear(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(utcMonday.count(utcYear(d),d),p,2)}function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d){return+d}function formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}function defaultLocale(definition){return locale=formatLocale(definition),timeFormat=locale.format,timeParse=locale.parse,utcFormat=locale.utcFormat,utcParse=locale.utcParse,locale}defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var formatIso=Date.prototype.toISOString?function formatIsoNative(date){return date.toISOString()}:utcFormat("%Y-%m-%dT%H:%M:%S.%LZ");var taskHead$1,taskTail$1,parseIso=+new Date("2000-01-01T00:00:00.000Z")?function parseIsoNative(string){var date=new Date(string);return isNaN(date)?null:date}:utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),frame$1=0,timeout$3=0,interval$2=0,pokeDelay$1=1e3,clockLast$1=0,clockNow$1=0,clockSkew$1=0,clock$1="object"==typeof performance&&performance.now?performance:Date,setFrame$1="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now$1(){return clockNow$1||(setFrame$1(clearNow$1),clockNow$1=clock$1.now()+clockSkew$1)}function clearNow$1(){clockNow$1=0}function Timer$1(){this._call=this._time=this._next=null}function timer$1(callback,delay,time){var t=new Timer$1;return t.restart(callback,delay,time),t}function timerFlush$1(){now$1(),++frame$1;for(var e,t=taskHead$1;t;)(e=clockNow$1-t._time)>=0&&t._call.call(null,e),t=t._next;--frame$1}function wake$1(){clockNow$1=(clockLast$1=clock$1.now())+clockSkew$1,frame$1=timeout$3=0;try{timerFlush$1()}finally{frame$1=0,function nap$1(){var t0,t2,t1=taskHead$1,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead$1=t2);taskTail$1=t0,sleep$1(time)}(),clockNow$1=0}}function poke$1(){var now=clock$1.now(),delay=now-clockLast$1;delay>pokeDelay$1&&(clockSkew$1-=delay,clockLast$1=now)}function sleep$1(time){frame$1||(timeout$3&&(timeout$3=clearTimeout(timeout$3)),time-clockNow$1>24?(time<1/0&&(timeout$3=setTimeout(wake$1,time-clock$1.now()-clockSkew$1)),interval$2&&(interval$2=clearInterval(interval$2))):(interval$2||(clockLast$1=clock$1.now(),interval$2=setInterval(poke$1,pokeDelay$1)),frame$1=1,setFrame$1(wake$1)))}Timer$1.prototype=timer$1.prototype={constructor:Timer$1,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now$1():+time)+(null==delay?0:+delay),this._next||taskTail$1===this||(taskTail$1?taskTail$1._next=this:taskHead$1=this,taskTail$1=this),this._call=callback,this._time=time,sleep$1()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep$1())}};var xhtml$2="http://www.w3.org/1999/xhtml",namespaces$2={svg:"http://www.w3.org/2000/svg",xhtml:xhtml$2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace$2(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces$2.hasOwnProperty(prefix)?{space:namespaces$2[prefix],local:name}:name}function creatorInherit$2(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml$2&&document.documentElement.namespaceURI===xhtml$2?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed$2(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator$2(name){var fullname=namespace$2(name);return(fullname.local?creatorFixed$2:creatorInherit$2)(fullname)}function none$2(){}function selector$2(selector){return null==selector?none$2:function(){return this.querySelector(selector)}}function empty$2(){return[]}function selectorAll$2(selector){return null==selector?empty$2:function(){return this.querySelectorAll(selector)}}function matcher$2(selector){return function(){return this.matches(selector)}}function sparse$2(update){return new Array(update.length)}function EnterNode$2(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}EnterNode$2.prototype={constructor:EnterNode$2,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};var keyPrefix$2="$";function bindIndex$2(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode$2(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey$2(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue={},groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=keyPrefix$2+key.call(node,node.__data__,i,group),keyValue in nodeByKeyValue?exit[i]=node:nodeByKeyValue[keyValue]=node);for(i=0;i<dataLength;++i)(node=nodeByKeyValue[keyValue=keyPrefix$2+key.call(parent,data[i],i,data)])?(update[i]=node,node.__data__=data[i],nodeByKeyValue[keyValue]=null):enter[i]=new EnterNode$2(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue[keyValues[i]]===node&&(exit[i]=node)}function ascending$2(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function attrRemove$4(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$4(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$4(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS$4(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction$4(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS$4(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function defaultView$2(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove$4(name){return function(){this.style.removeProperty(name)}}function styleConstant$4(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction$4(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function styleValue$2(node,name){return node.style.getPropertyValue(name)||defaultView$2(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove$2(name){return function(){delete this[name]}}function propertyConstant$2(name,value){return function(){this[name]=value}}function propertyFunction$2(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray$2(string){return string.trim().split(/^|\s+/)}function classList$2(node){return node.classList||new ClassList$2(node)}function ClassList$2(node){this._node=node,this._names=classArray$2(node.getAttribute("class")||"")}function classedAdd$2(node,names){for(var list=classList$2(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove$2(node,names){for(var list=classList$2(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue$2(names){return function(){classedAdd$2(this,names)}}function classedFalse$2(names){return function(){classedRemove$2(this,names)}}function classedFunction$2(names,value){return function(){(value.apply(this,arguments)?classedAdd$2:classedRemove$2)(this,names)}}function textRemove$2(){this.textContent=""}function textConstant$4(value){return function(){this.textContent=value}}function textFunction$4(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove$2(){this.innerHTML=""}function htmlConstant$2(value){return function(){this.innerHTML=value}}function htmlFunction$2(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise$2(){this.nextSibling&&this.parentNode.appendChild(this)}function lower$2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull$2(){return null}function remove$2(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow$2(){var clone=this.cloneNode(!1),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep$2(){var clone=this.cloneNode(!0),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}ClassList$2.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};var filterEvents$2={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(filterEvents$2={mouseenter:"mouseover",mouseleave:"mouseout"}));function filterContextListener$2(listener,index,group){return listener=contextListener$2(listener,index,group),function(event){var related=event.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||listener.call(this,event)}}function contextListener$2(listener,index,group){return function(event1){try{listener.call(this,this.__data__,index,group)}finally{}}}function onRemove$2(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?on.length=i:delete this.__on}}}function onAdd$2(typename,value,capture){var wrap=filterEvents$2.hasOwnProperty(typename.type)?filterContextListener$2:contextListener$2;return function(d,i,group){var o,on=this.__on,listener=wrap(value,i,group);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=listener,o.capture=capture),void(o.value=value);this.addEventListener(typename.type,listener,capture),o={type:typename.type,name:typename.name,value:value,listener:listener,capture:capture},on?on.push(o):this.__on=[o]}}function dispatchEvent$2(node,type,params){var window=defaultView$2(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant$2(type,params){return function(){return dispatchEvent$2(this,type,params)}}function dispatchFunction$2(type,params){return function(){return dispatchEvent$2(this,type,params.apply(this,arguments))}}var root$4=[null];function Selection$4(groups,parents){this._groups=groups,this._parents=parents}function selection(){return new Selection$4([[document.documentElement]],root$4)}Selection$4.prototype=selection.prototype={constructor:Selection$4,select:function selection_select$2(select){"function"!=typeof select&&(select=selector$2(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection$4(subgroups,this._parents)},selectAll:function selection_selectAll$2(select){"function"!=typeof select&&(select=selectorAll$2(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection$4(subgroups,parents)},filter:function selection_filter$2(match){"function"!=typeof match&&(match=matcher$2(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection$4(subgroups,this._parents)},data:function selection_data$2(value,key){if(!value)return data=new Array(this.size()),j=-1,this.each((function(d){data[++j]=d})),data;var bind=key?bindKey$2:bindIndex$2,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=function constant$8(x){return function(){return x}}(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=value.call(parent,parent&&parent.__data__,j,parents),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength);bind(parent,group,enterGroup,updateGroup,exit[j]=new Array(groupLength),data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection$4(update,parents))._enter=enter,update._exit=exit,update},enter:function selection_enter$2(){return new Selection$4(this._enter||this._groups.map(sparse$2),this._parents)},exit:function selection_exit$2(){return new Selection$4(this._exit||this._groups.map(sparse$2),this._parents)},join:function selection_join$2(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return enter="function"==typeof onenter?onenter(enter):enter.append(onenter+""),null!=onupdate&&(update=onupdate(update)),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function selection_merge$2(selection){for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection$4(merges,this._parents)},order:function selection_order$2(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function selection_sort$2(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending$2);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection$4(sortgroups,this._parents).order()},call:function selection_call$2(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function selection_nodes$2(){var nodes=new Array(this.size()),i=-1;return this.each((function(){nodes[++i]=this})),nodes},node:function selection_node$2(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function selection_size$2(){var size=0;return this.each((function(){++size})),size},empty:function selection_empty$2(){return!this.node()},each:function selection_each$2(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function selection_attr$2(name,value){var fullname=namespace$2(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS$4:attrRemove$4:"function"==typeof value?fullname.local?attrFunctionNS$4:attrFunction$4:fullname.local?attrConstantNS$4:attrConstant$4)(fullname,value))},style:function selection_style$2(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove$4:"function"==typeof value?styleFunction$4:styleConstant$4)(name,value,null==priority?"":priority)):styleValue$2(this.node(),name)},property:function selection_property$2(name,value){return arguments.length>1?this.each((null==value?propertyRemove$2:"function"==typeof value?propertyFunction$2:propertyConstant$2)(name,value)):this.node()[name]},classed:function selection_classed$2(name,value){var names=classArray$2(name+"");if(arguments.length<2){for(var list=classList$2(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction$2:value?classedTrue$2:classedFalse$2)(names,value))},text:function selection_text$2(value){return arguments.length?this.each(null==value?textRemove$2:("function"==typeof value?textFunction$4:textConstant$4)(value)):this.node().textContent},html:function selection_html$2(value){return arguments.length?this.each(null==value?htmlRemove$2:("function"==typeof value?htmlFunction$2:htmlConstant$2)(value)):this.node().innerHTML},raise:function selection_raise$2(){return this.each(raise$2)},lower:function selection_lower$2(){return this.each(lower$2)},append:function selection_append$2(name){var create="function"==typeof name?name:creator$2(name);return this.select((function(){return this.appendChild(create.apply(this,arguments))}))},insert:function selection_insert$2(name,before){var create="function"==typeof name?name:creator$2(name),select=null==before?constantNull$2:"function"==typeof before?before:selector$2(before);return this.select((function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function selection_remove$2(){return this.each(remove$2)},clone:function selection_clone$2(deep){return this.select(deep?selection_cloneDeep$2:selection_cloneShallow$2)},datum:function selection_datum$2(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function selection_on$2(typename,value,capture){var i,t,typenames=function parseTypenames$5(typenames){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name:name}}))}(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd$2:onRemove$2,null==capture&&(capture=!1),i=0;i<n;++i)this.each(on(typenames[i],value,capture));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function selection_dispatch$2(type,params){return this.each(("function"==typeof params?dispatchFunction$2:dispatchConstant$2)(type,params))}};var nextId$2=0;function Local$2(){this._="@"+(++nextId$2).toString(36)}Local$2.prototype={constructor:Local$2,get:function(node){for(var id=this._;!(id in node);)if(!(node=node.parentNode))return;return node[id]},set:function(node,value){return node[this._]=value},remove:function(node){return this._ in node&&delete node[this._]},toString:function(){return this._}};var noop$3={value:function(){}};function dispatch$2(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch$2(_)}function Dispatch$2(_){this._=_}function get$6(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set$4(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop$3,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch$2.prototype=dispatch$2.prototype={constructor:Dispatch$2,on:function(typename,callback){var t,_=this._,T=function parseTypenames$4(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}}))}(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set$4(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set$4(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get$6(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch$2(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var taskHead,taskTail,frame=0,timeout$1=0,interval=0,pokeDelay=1e3,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),t}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{!function timerFlush(){now(),++frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(null,e),t=t._next;--frame}()}finally{frame=0,function nap(){var t0,t2,t1=taskHead,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time)}(),clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;delay>pokeDelay&&(clockSkew-=delay,clockLast=now)}function sleep(time){frame||(timeout$1&&(timeout$1=clearTimeout(timeout$1)),time-clockNow>24?(time<1/0&&(timeout$1=setTimeout(wake,time-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake)))}function timeout(callback,delay,time){var t=new Timer;return delay=null==delay?0:+delay,t.restart((function(elapsed){t.stop(),callback(elapsed+delay)}),delay,time),t}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn$1=dispatch$2("start","end","interrupt"),emptyTween$1=[],CREATED$1=0,SCHEDULED$1=1,STARTING$1=2,STARTED$1=3,RUNNING$1=4,ENDING$1=5,ENDED$1=6;function schedule$1(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function create$1(node,id,self){var tween,schedules=node.__transition;function schedule(elapsed){self.state=SCHEDULED$1,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(self.state!==SCHEDULED$1)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(o.state===STARTED$1)return timeout(start);o.state===RUNNING$1?(o.state=ENDED$1,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=ENDED$1,o.timer.stop(),delete schedules[i])}if(timeout((function(){self.state===STARTED$1&&(self.state=RUNNING$1,self.timer.restart(tick,self.delay,self.time),tick(elapsed))})),self.state=STARTING$1,self.on.call("start",node,node.__data__,self.index,self.group),self.state===STARTING$1){for(self.state=STARTED$1,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=ENDING$1,1),i=-1,n=tween.length;++i<n;)tween[i].call(null,t);self.state===ENDING$1&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=ENDED$1,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer(schedule,0,self.time)}(node,id,{name:name,index:index,group:group,on:emptyOn$1,tween:emptyTween$1,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:CREATED$1})}function init$1(node,id){var schedule=get$5(node,id);if(schedule.state>CREATED$1)throw new Error("too late; already scheduled");return schedule}function set$3(node,id){var schedule=get$5(node,id);if(schedule.state>STARTING$1)throw new Error("too late; already started");return schedule}function get$5(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function interrupt$1(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>STARTING$1&&schedule.state<ENDING$1,schedule.state=ENDED$1,schedule.timer.stop(),active&&schedule.on.call("interrupt",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}}function constant$7(x){return function(){return x}}function linear(a,d){return function(t){return a+t*d}}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):constant$7(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):constant$7(isNaN(a)?b:a)}var interpolateRgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=rgb$2(start)).r,(end=rgb$2(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function interpolateNumber(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function interpolateString(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:interpolateNumber(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one(b){return function(t){return b(t)+""}}(q[0].x):function zero(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}var cssNode,cssRoot,cssView,svgNode,degrees=180/Math.PI,identity$2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY}}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:interpolateNumber(xa,xb)},{i:i-2,x:interpolateNumber(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:interpolateNumber(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:interpolateNumber(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:interpolateNumber(xa,xb)},{i:i-2,x:interpolateNumber(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform((function parseCss(value){return"none"===value?identity$2:(cssNode||(cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView),cssNode.style.transform=value,value=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform"),cssRoot.removeChild(cssNode),decompose(+(value=value.slice(7,-1).split(","))[0],+value[1],+value[2],+value[3],+value[4],+value[5]))}),"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform((function parseSvg(value){return null==value?identity$2:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?decompose((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):identity$2)}),", ",")",")");function cubehelix(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=cubehelix$6(start)).h,(end=cubehelix$6(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}function tweenRemove$1(id,name){var tween0,tween1;return function(){var schedule=set$3(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction$1(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=set$3(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name:name,value:value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue$1(transition,name,value){var id=transition._id;return transition.each((function(){var schedule=set$3(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)})),function(node){return get$5(node,id).value[name]}}function interpolate$1(a,b){var c;return("number"==typeof b?interpolateNumber:b instanceof color?interpolateRgb:(c=color(b))?(b=c,interpolateRgb):interpolateString)(a,b)}function attrRemove$3(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$3(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$3(name,interpolate,value1){var value00,interpolate0;return function(){var value0=this.getAttribute(name);return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate(value00=value0,value1)}}function attrConstantNS$3(fullname,interpolate,value1){var value00,interpolate0;return function(){var value0=this.getAttributeNS(fullname.space,fullname.local);return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate(value00=value0,value1)}}function attrFunction$3(name,interpolate,value){var value00,value10,interpolate0;return function(){var value0,value1=value(this);if(null!=value1)return(value0=this.getAttribute(name))===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate(value00=value0,value10=value1);this.removeAttribute(name)}}function attrFunctionNS$3(fullname,interpolate,value){var value00,value10,interpolate0;return function(){var value0,value1=value(this);if(null!=value1)return(value0=this.getAttributeNS(fullname.space,fullname.local))===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate(value00=value0,value10=value1);this.removeAttributeNS(fullname.space,fullname.local)}}function attrTweenNS$1(fullname,value){function tween(){var node=this,i=value.apply(node,arguments);return i&&function(t){node.setAttributeNS(fullname.space,fullname.local,i(t))}}return tween._value=value,tween}function attrTween$1(name,value){function tween(){var node=this,i=value.apply(node,arguments);return i&&function(t){node.setAttribute(name,i(t))}}return tween._value=value,tween}function delayFunction$1(id,value){return function(){init$1(this,id).delay=+value.apply(this,arguments)}}function delayConstant$1(id,value){return value=+value,function(){init$1(this,id).delay=value}}function durationFunction$1(id,value){return function(){set$3(this,id).duration=+value.apply(this,arguments)}}function durationConstant$1(id,value){return value=+value,function(){set$3(this,id).duration=value}}cubehelix((function hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):constant$7(isNaN(a)?b:a)})),cubehelix(nogamma);var Selection$3=selection.prototype.constructor;var id$1=0;function Transition$1(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function transition(name){return selection().transition(name)}function newId$1(){return++id$1}var selection_prototype$1=selection.prototype;Transition$1.prototype=transition.prototype={constructor:Transition$1,select:function transition_select$1(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selector$2(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,schedule$1(subgroup[i],name,id,i,subgroup,get$5(node,id)));return new Transition$1(subgroups,this._parents,name,id)},selectAll:function transition_selectAll$1(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll$2(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=get$5(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule$1(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new Transition$1(subgroups,parents,name,id)},filter:function transition_filter$1(match){"function"!=typeof match&&(match=matcher$2(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Transition$1(subgroups,this._parents,this._name,this._id)},merge:function transition_merge$1(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Transition$1(merges,this._parents,this._name,this._id)},selection:function transition_selection$1(){return new Selection$3(this._groups,this._parents)},transition:function transition_transition$1(){for(var name=this._name,id0=this._id,id1=newId$1(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=get$5(node,id0);schedule$1(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition$1(groups,this._parents,name,id1)},call:selection_prototype$1.call,nodes:selection_prototype$1.nodes,node:selection_prototype$1.node,size:selection_prototype$1.size,empty:selection_prototype$1.empty,each:selection_prototype$1.each,on:function transition_on$1(name,listener){var id=this._id;return arguments.length<2?get$5(this.node(),id).on.on(name):this.each(function onFunction$1(id,name,listener){var on0,on1,sit=function start$1(name){return(name+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(name)?init$1:set$3;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}(id,name,listener))},attr:function transition_attr$1(name,value){var fullname=namespace$2(name),i="transform"===fullname?interpolateTransformSvg:interpolate$1;return this.attrTween(name,"function"==typeof value?(fullname.local?attrFunctionNS$3:attrFunction$3)(fullname,i,tweenValue$1(this,"attr."+name,value)):null==value?(fullname.local?attrRemoveNS$3:attrRemove$3)(fullname):(fullname.local?attrConstantNS$3:attrConstant$3)(fullname,i,value+""))},attrTween:function transition_attrTween$1(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace$2(name);return this.tween(key,(fullname.local?attrTweenNS$1:attrTween$1)(fullname,value))},style:function transition_style$1(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss:interpolate$1;return null==value?this.styleTween(name,function styleRemove$3(name,interpolate){var value00,value10,interpolate0;return function(){var value0=styleValue$2(this,name),value1=(this.style.removeProperty(name),styleValue$2(this,name));return value0===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate(value00=value0,value10=value1)}}(name,i)).on("end.style."+name,function styleRemoveEnd(name){return function(){this.style.removeProperty(name)}}(name)):this.styleTween(name,"function"==typeof value?function styleFunction$3(name,interpolate,value){var value00,value10,interpolate0;return function(){var value0=styleValue$2(this,name),value1=value(this);return null==value1&&(this.style.removeProperty(name),value1=styleValue$2(this,name)),value0===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate(value00=value0,value10=value1)}}(name,i,tweenValue$1(this,"style."+name,value)):function styleConstant$3(name,interpolate,value1){var value00,interpolate0;return function(){var value0=styleValue$2(this,name);return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate(value00=value0,value1)}}(name,i,value+""),priority)},styleTween:function transition_styleTween$1(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,function styleTween$1(name,value,priority){function tween(){var node=this,i=value.apply(node,arguments);return i&&function(t){node.style.setProperty(name,i(t),priority)}}return tween._value=value,tween}(name,value,null==priority?"":priority))},text:function transition_text$1(value){return this.tween("text","function"==typeof value?function textFunction$3(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue$1(this,"text",value)):function textConstant$3(value){return function(){this.textContent=value}}(null==value?"":value+""))},remove:function transition_remove$1(){return this.on("end.remove",function removeFunction$1(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}}(this._id))},tween:function transition_tween$1(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=get$5(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove$1:tweenFunction$1)(id,name,value))},delay:function transition_delay$1(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction$1:delayConstant$1)(id,value)):get$5(this.node(),id).delay},duration:function transition_duration$1(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction$1:durationConstant$1)(id,value)):get$5(this.node(),id).duration},ease:function transition_ease$1(value){var id=this._id;return arguments.length?this.each(function easeConstant$1(id,value){if("function"!=typeof value)throw new Error;return function(){set$3(this,id).ease=value}}(id,value)):get$5(this.node(),id).ease}};function tpmt(x){return 1.0009775171065494*(Math.pow(2,-10*x)-.0009765625)}!function custom(e){function polyIn(t){return Math.pow(t,e)}return e=+e,polyIn.exponent=custom,polyIn}(3),function custom(e){function polyOut(t){return 1-Math.pow(1-t,e)}return e=+e,polyOut.exponent=custom,polyOut}(3),function custom(e){function polyInOut(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,polyInOut.exponent=custom,polyInOut}(3);!function custom(s){function backIn(t){return(t=+t)*t*(s*(t-1)+t)}return s=+s,backIn.overshoot=custom,backIn}(1.70158),function custom(s){function backOut(t){return--t*t*((t+1)*s+t)+1}return s=+s,backOut.overshoot=custom,backOut}(1.70158),function custom(s){function backInOut(t){return((t*=2)<1?t*t*((s+1)*t-s):(t-=2)*t*((s+1)*t+s)+2)/2}return s=+s,backInOut.overshoot=custom,backInOut}(1.70158);var tau$1=2*Math.PI;!function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau$1);function elasticIn(t){return a*tpmt(- --t)*Math.sin((s-t)/p)}return elasticIn.amplitude=function(a){return custom(a,p*tau$1)},elasticIn.period=function(p){return custom(a,p)},elasticIn}(1,.3),function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau$1);function elasticOut(t){return 1-a*tpmt(t=+t)*Math.sin((t+s)/p)}return elasticOut.amplitude=function(a){return custom(a,p*tau$1)},elasticOut.period=function(p){return custom(a,p)},elasticOut}(1,.3),function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau$1);function elasticInOut(t){return((t=2*t-1)<0?a*tpmt(-t)*Math.sin((s-t)/p):2-a*tpmt(t)*Math.sin((s+t)/p))/2}return elasticInOut.amplitude=function(a){return custom(a,p*tau$1)},elasticInOut.period=function(p){return custom(a,p)},elasticInOut}(1,.3);var defaultTiming$1={time:null,delay:0,duration:250,ease:function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function inherit$1(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))return defaultTiming$1.time=now(),defaultTiming$1;return timing}selection.prototype.interrupt=function selection_interrupt$1(name){return this.each((function(){interrupt$1(this,name)}))},selection.prototype.transition=function selection_transition$1(name){var id,timing;name instanceof Transition$1?(id=name._id,name=name._name):(id=newId$1(),(timing=defaultTiming$1).time=now(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule$1(node,name,id,i,group,timing||inherit$1(node,id));return new Transition$1(groups,this._parents,name,id)};var root$3=[null];function constant$6(x){return function(){return x}}function x$1(d){return d[0]}function y$1(d){return d[1]}function RedBlackTree(){this._=null}function RedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null}function RedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.R=q.L,p.R&&(p.R.U=p),q.L=p}function RedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.L=q.R,p.L&&(p.L.U=p),q.R=p}function RedBlackFirst(node){for(;node.L;)node=node.L;return node}function createEdge(left,right,v0,v1){var edge=[null,null],index=edges.push(edge)-1;return edge.left=left,edge.right=right,v0&&setEdgeEnd(edge,left,right,v0),v1&&setEdgeEnd(edge,right,left,v1),cells[left.index].halfedges.push(index),cells[right.index].halfedges.push(index),edge}function createBorderEdge(left,v0,v1){var edge=[v0,v1];return edge.left=left,edge}function setEdgeEnd(edge,left,right,vertex){edge[0]||edge[1]?edge.left===right?edge[1]=vertex:edge[0]=vertex:(edge[0]=vertex,edge.left=left,edge.right=right)}function clipEdge(edge,x0,y0,x1,y1){var r,a=edge[0],b=edge[1],ax=a[0],ay=a[1],t0=0,t1=1,dx=b[0]-ax,dy=b[1]-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return!(t0>0||t1<1)||(t0>0&&(edge[0]=[ax+t0*dx,ay+t0*dy]),t1<1&&(edge[1]=[ax+t1*dx,ay+t1*dy]),!0)}}}}}function connectEdge(edge,x0,y0,x1,y1){var v1=edge[1];if(v1)return!0;var fm,fb,v0=edge[0],left=edge.left,right=edge.right,lx=left[0],ly=left[1],rx=right[0],ry=right[1],fx=(lx+rx)/2,fy=(ly+ry)/2;if(ry===ly){if(fx<x0||fx>=x1)return;if(lx>rx){if(v0){if(v0[1]>=y1)return}else v0=[fx,y0];v1=[fx,y1]}else{if(v0){if(v0[1]<y0)return}else v0=[fx,y1];v1=[fx,y0]}}else if(fb=fy-(fm=(lx-rx)/(ry-ly))*fx,fm<-1||fm>1)if(lx>rx){if(v0){if(v0[1]>=y1)return}else v0=[(y0-fb)/fm,y0];v1=[(y1-fb)/fm,y1]}else{if(v0){if(v0[1]<y0)return}else v0=[(y1-fb)/fm,y1];v1=[(y0-fb)/fm,y0]}else if(ly<ry){if(v0){if(v0[0]>=x1)return}else v0=[x0,fm*x0+fb];v1=[x1,fm*x1+fb]}else{if(v0){if(v0[0]<x0)return}else v0=[x1,fm*x1+fb];v1=[x0,fm*x0+fb]}return edge[0]=v0,edge[1]=v1,!0}function cellHalfedgeAngle(cell,edge){var site=cell.site,va=edge.left,vb=edge.right;return site===vb&&(vb=va,va=site),vb?Math.atan2(vb[1]-va[1],vb[0]-va[0]):(site===va?(va=edge[1],vb=edge[0]):(va=edge[0],vb=edge[1]),Math.atan2(va[0]-vb[0],vb[1]-va[1]))}function cellHalfedgeStart(cell,edge){return edge[+(edge.left!==cell.site)]}function cellHalfedgeEnd(cell,edge){return edge[+(edge.left===cell.site)]}RedBlackTree.prototype={constructor:RedBlackTree,insert:function(after,node){var parent,grandpa,uncle;if(after){if(node.P=after,node.N=after.N,after.N&&(after.N.P=node),after.N=node,after.R){for(after=after.R;after.L;)after=after.L;after.L=node}else after.R=node;parent=after}else this._?(after=RedBlackFirst(this._),node.P=null,node.N=after,after.P=after.L=node,parent=after):(node.P=node.N=null,this._=node,parent=null);for(node.L=node.R=null,node.U=parent,node.C=!0,after=node;parent&&parent.C;)parent===(grandpa=parent.U).L?(uncle=grandpa.R)&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.R&&(RedBlackRotateLeft(this,parent),parent=(after=parent).U),parent.C=!1,grandpa.C=!0,RedBlackRotateRight(this,grandpa)):(uncle=grandpa.L)&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.L&&(RedBlackRotateRight(this,parent),parent=(after=parent).U),parent.C=!1,grandpa.C=!0,RedBlackRotateLeft(this,grandpa)),parent=after.U;this._.C=!1},remove:function(node){node.N&&(node.N.P=node.P),node.P&&(node.P.N=node.N),node.N=node.P=null;var sibling,next,red,parent=node.U,left=node.L,right=node.R;if(next=left?right?RedBlackFirst(right):left:right,parent?parent.L===node?parent.L=next:parent.R=next:this._=next,left&&right?(red=next.C,next.C=node.C,next.L=left,left.U=next,next!==right?(parent=next.U,next.U=node.U,node=next.R,parent.L=node,next.R=right,right.U=next):(next.U=parent,parent=next,node=next.R)):(red=node.C,node=next),node&&(node.U=parent),!red)if(node&&node.C)node.C=!1;else{do{if(node===this._)break;if(node===parent.L){if((sibling=parent.R).C&&(sibling.C=!1,parent.C=!0,RedBlackRotateLeft(this,parent),sibling=parent.R),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.R&&sibling.R.C||(sibling.L.C=!1,sibling.C=!0,RedBlackRotateRight(this,sibling),sibling=parent.R),sibling.C=parent.C,parent.C=sibling.R.C=!1,RedBlackRotateLeft(this,parent),node=this._;break}}else if((sibling=parent.L).C&&(sibling.C=!1,parent.C=!0,RedBlackRotateRight(this,parent),sibling=parent.L),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.L&&sibling.L.C||(sibling.R.C=!1,sibling.C=!0,RedBlackRotateLeft(this,sibling),sibling=parent.L),sibling.C=parent.C,parent.C=sibling.L.C=!1,RedBlackRotateRight(this,parent),node=this._;break}sibling.C=!0,node=parent,parent=parent.U}while(!node.C);node&&(node.C=!1)}}};var firstCircle,circlePool=[];function Circle(){RedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function attachCircle(arc){var lArc=arc.P,rArc=arc.N;if(lArc&&rArc){var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite!==rSite){var bx=cSite[0],by=cSite[1],ax=lSite[0]-bx,ay=lSite[1]-by,cx=rSite[0]-bx,cy=rSite[1]-by,d=2*(ax*cy-ay*cx);if(!(d>=-epsilon2)){var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d,circle=circlePool.pop()||new Circle;circle.arc=arc,circle.site=cSite,circle.x=x+bx,circle.y=(circle.cy=y+by)+Math.sqrt(x*x+y*y),arc.circle=circle;for(var before=null,node=circles._;node;)if(circle.y<node.y||circle.y===node.y&&circle.x<=node.x){if(!node.L){before=node.P;break}node=node.L}else{if(!node.R){before=node;break}node=node.R}circles.insert(before,circle),before||(firstCircle=circle)}}}}function detachCircle(arc){var circle=arc.circle;circle&&(circle.P||(firstCircle=circle.N),circles.remove(circle),circlePool.push(circle),RedBlackNode(circle),arc.circle=null)}var beachPool=[];function Beach(){RedBlackNode(this),this.edge=this.site=this.circle=null}function createBeach(site){var beach=beachPool.pop()||new Beach;return beach.site=site,beach}function detachBeach(beach){detachCircle(beach),beaches.remove(beach),beachPool.push(beach),RedBlackNode(beach)}function removeBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex=[x,y],previous=beach.P,next=beach.N,disappearing=[beach];detachBeach(beach);for(var lArc=previous;lArc.circle&&Math.abs(x-lArc.circle.x)<epsilon$1&&Math.abs(y-lArc.circle.cy)<epsilon$1;)previous=lArc.P,disappearing.unshift(lArc),detachBeach(lArc),lArc=previous;disappearing.unshift(lArc),detachCircle(lArc);for(var rArc=next;rArc.circle&&Math.abs(x-rArc.circle.x)<epsilon$1&&Math.abs(y-rArc.circle.cy)<epsilon$1;)next=rArc.N,disappearing.push(rArc),detachBeach(rArc),rArc=next;disappearing.push(rArc),detachCircle(rArc);var iArc,nArcs=disappearing.length;for(iArc=1;iArc<nArcs;++iArc)rArc=disappearing[iArc],lArc=disappearing[iArc-1],setEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex);lArc=disappearing[0],(rArc=disappearing[nArcs-1]).edge=createEdge(lArc.site,rArc.site,null,vertex),attachCircle(lArc),attachCircle(rArc)}function addBeach(site){for(var lArc,rArc,dxl,dxr,x=site[0],directrix=site[1],node=beaches._;node;)if((dxl=leftBreakPoint(node,directrix)-x)>epsilon$1)node=node.L;else{if(!((dxr=x-rightBreakPoint(node,directrix))>epsilon$1)){dxl>-epsilon$1?(lArc=node.P,rArc=node):dxr>-epsilon$1?(lArc=node,rArc=node.N):lArc=rArc=node;break}if(!node.R){lArc=node;break}node=node.R}!function createCell(site){return cells[site.index]={site:site,halfedges:[]}}(site);var newArc=createBeach(site);if(beaches.insert(lArc,newArc),lArc||rArc){if(lArc===rArc)return detachCircle(lArc),rArc=createBeach(lArc.site),beaches.insert(newArc,rArc),newArc.edge=rArc.edge=createEdge(lArc.site,newArc.site),attachCircle(lArc),void attachCircle(rArc);if(rArc){detachCircle(lArc),detachCircle(rArc);var lSite=lArc.site,ax=lSite[0],ay=lSite[1],bx=site[0]-ax,by=site[1]-ay,rSite=rArc.site,cx=rSite[0]-ax,cy=rSite[1]-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex=[(cy*hb-by*hc)/d+ax,(bx*hc-cx*hb)/d+ay];setEdgeEnd(rArc.edge,lSite,rSite,vertex),newArc.edge=createEdge(lSite,site,null,vertex),rArc.edge=createEdge(site,rSite,null,vertex),attachCircle(lArc),attachCircle(rArc)}else newArc.edge=createEdge(lArc.site,newArc.site)}}function leftBreakPoint(arc,directrix){var site=arc.site,rfocx=site[0],rfocy=site[1],pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-1/0;var lfocx=(site=lArc.site)[0],lfocy=site[1],plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;return aby2?(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx:(rfocx+lfocx)/2}function rightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return leftBreakPoint(rArc,directrix);var site=arc.site;return site[1]===directrix?site[0]:1/0}var beaches,cells,circles,edges,epsilon$1=1e-6,epsilon2=1e-12;function triangleArea(a,b,c){return(a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1])}function lexicographic(a,b){return b[1]-a[1]||b[0]-a[0]}function Diagram(sites,extent){var x,y,circle,site=sites.sort(lexicographic).pop();for(edges=[],cells=new Array(sites.length),beaches=new RedBlackTree,circles=new RedBlackTree;;)if(circle=firstCircle,site&&(!circle||site[1]<circle.y||site[1]===circle.y&&site[0]<circle.x))site[0]===x&&site[1]===y||(addBeach(site),x=site[0],y=site[1]),site=sites.pop();else{if(!circle)break;removeBeach(circle.arc)}if(function sortCellHalfedges(){for(var cell,halfedges,j,m,i=0,n=cells.length;i<n;++i)if((cell=cells[i])&&(m=(halfedges=cell.halfedges).length)){var index=new Array(m),array=new Array(m);for(j=0;j<m;++j)index[j]=j,array[j]=cellHalfedgeAngle(cell,edges[halfedges[j]]);for(index.sort((function(i,j){return array[j]-array[i]})),j=0;j<m;++j)array[j]=halfedges[index[j]];for(j=0;j<m;++j)halfedges[j]=array[j]}}(),extent){var x0=+extent[0][0],y0=+extent[0][1],x1=+extent[1][0],y1=+extent[1][1];!function clipEdges(x0,y0,x1,y1){for(var edge,i=edges.length;i--;)connectEdge(edge=edges[i],x0,y0,x1,y1)&&clipEdge(edge,x0,y0,x1,y1)&&(Math.abs(edge[0][0]-edge[1][0])>epsilon$1||Math.abs(edge[0][1]-edge[1][1])>epsilon$1)||delete edges[i]}(x0,y0,x1,y1),function clipCells(x0,y0,x1,y1){var iCell,cell,site,iHalfedge,halfedges,nHalfedges,start,startX,startY,end,endX,endY,nCells=cells.length,cover=!0;for(iCell=0;iCell<nCells;++iCell)if(cell=cells[iCell]){for(site=cell.site,iHalfedge=(halfedges=cell.halfedges).length;iHalfedge--;)edges[halfedges[iHalfedge]]||halfedges.splice(iHalfedge,1);for(iHalfedge=0,nHalfedges=halfedges.length;iHalfedge<nHalfedges;)endX=(end=cellHalfedgeEnd(cell,edges[halfedges[iHalfedge]]))[0],endY=end[1],startX=(start=cellHalfedgeStart(cell,edges[halfedges[++iHalfedge%nHalfedges]]))[0],startY=start[1],(Math.abs(endX-startX)>epsilon$1||Math.abs(endY-startY)>epsilon$1)&&(halfedges.splice(iHalfedge,0,edges.push(createBorderEdge(site,end,Math.abs(endX-x0)<epsilon$1&&y1-endY>epsilon$1?[x0,Math.abs(startX-x0)<epsilon$1?startY:y1]:Math.abs(endY-y1)<epsilon$1&&x1-endX>epsilon$1?[Math.abs(startY-y1)<epsilon$1?startX:x1,y1]:Math.abs(endX-x1)<epsilon$1&&endY-y0>epsilon$1?[x1,Math.abs(startX-x1)<epsilon$1?startY:y0]:Math.abs(endY-y0)<epsilon$1&&endX-x0>epsilon$1?[Math.abs(startY-y0)<epsilon$1?startX:x0,y0]:null))-1),++nHalfedges);nHalfedges&&(cover=!1)}if(cover){var dx,dy,d2,dc=1/0;for(iCell=0,cover=null;iCell<nCells;++iCell)(cell=cells[iCell])&&(d2=(dx=(site=cell.site)[0]-x0)*dx+(dy=site[1]-y0)*dy)<dc&&(dc=d2,cover=cell);if(cover){var v00=[x0,y0],v01=[x0,y1],v11=[x1,y1],v10=[x1,y0];cover.halfedges.push(edges.push(createBorderEdge(site=cover.site,v00,v01))-1,edges.push(createBorderEdge(site,v01,v11))-1,edges.push(createBorderEdge(site,v11,v10))-1,edges.push(createBorderEdge(site,v10,v00))-1)}}for(iCell=0;iCell<nCells;++iCell)(cell=cells[iCell])&&(cell.halfedges.length||delete cells[iCell])}(x0,y0,x1,y1)}this.edges=edges,this.cells=cells,beaches=circles=edges=cells=null}Diagram.prototype={constructor:Diagram,polygons:function(){var edges=this.edges;return this.cells.map((function(cell){var polygon=cell.halfedges.map((function(i){return cellHalfedgeStart(cell,edges[i])}));return polygon.data=cell.site.data,polygon}))},triangles:function(){var triangles=[],edges=this.edges;return this.cells.forEach((function(cell,i){if(m=(halfedges=cell.halfedges).length)for(var halfedges,m,s0,site=cell.site,j=-1,e1=edges[halfedges[m-1]],s1=e1.left===site?e1.right:e1.left;++j<m;)s0=s1,s1=(e1=edges[halfedges[j]]).left===site?e1.right:e1.left,s0&&s1&&i<s0.index&&i<s1.index&&triangleArea(site,s0,s1)<0&&triangles.push([site.data,s0.data,s1.data])})),triangles},links:function(){return this.edges.filter((function(edge){return edge.right})).map((function(edge){return{source:edge.left.data,target:edge.right.data}}))},find:function(x,y,radius){for(var i0,cell,that=this,i1=that._found||0,n=that.cells.length;!(cell=that.cells[i1]);)if(++i1>=n)return null;var dx=x-cell.site[0],dy=y-cell.site[1],d2=dx*dx+dy*dy;do{cell=that.cells[i0=i1],i1=null,cell.halfedges.forEach((function(e){var edge=that.edges[e],v=edge.left;if(v!==cell.site&&v||(v=edge.right)){var vx=x-v[0],vy=y-v[1],v2=vx*vx+vy*vy;v2<d2&&(d2=v2,i1=v.index)}}))}while(null!==i1);return that._found=i0,null==radius||d2<=radius*radius?cell.site:null}};var emptyOn=dispatch$5("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function create(node,id,self){var tween,schedules=node.__transition;function schedule(elapsed){self.state=SCHEDULED,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(self.state!==SCHEDULED)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(o.state===STARTED)return timeout$4(start);o.state===RUNNING?(o.state=ENDED,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=ENDED,o.timer.stop(),o.on.call("cancel",node,node.__data__,o.index,o.group),delete schedules[i])}if(timeout$4((function(){self.state===STARTED&&(self.state=RUNNING,self.timer.restart(tick,self.delay,self.time),tick(elapsed))})),self.state=STARTING,self.on.call("start",node,node.__data__,self.index,self.group),self.state===STARTING){for(self.state=STARTED,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=ENDING,1),i=-1,n=tween.length;++i<n;)tween[i].call(node,t);self.state===ENDING&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=ENDED,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer$2(schedule,0,self.time)}(node,id,{name:name,index:index,group:group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:CREATED})}function init(node,id){var schedule=get$4(node,id);if(schedule.state>CREATED)throw new Error("too late; already scheduled");return schedule}function set$2(node,id){var schedule=get$4(node,id);if(schedule.state>STARTED)throw new Error("too late; already running");return schedule}function get$4(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function interrupt(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>STARTING&&schedule.state<ENDING,schedule.state=ENDED,schedule.timer.stop(),schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}}function tweenRemove(id,name){var tween0,tween1;return function(){var schedule=set$2(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=set$2(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name:name,value:value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue(transition,name,value){var id=transition._id;return transition.each((function(){var schedule=set$2(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)})),function(node){return get$4(node,id).value[name]}}function interpolate(a,b){var c;return("number"==typeof b?interpolateNumber$1:b instanceof color?interpolateRgb$1:(c=color(b))?(b=c,interpolateRgb$1):interpolateString$1)(a,b)}function attrRemove$2(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$2(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$2(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrConstantNS$2(fullname,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrFunction$2(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttribute(name))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttribute(name)}}function attrFunctionNS$2(fullname,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttributeNS(fullname.space,fullname.local))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttributeNS(fullname.space,fullname.local)}}function attrTweenNS(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function attrInterpolateNS(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i.call(this,t))}}(fullname,i)),t0}return tween._value=value,tween}function attrTween(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function attrInterpolate(name,i){return function(t){this.setAttribute(name,i.call(this,t))}}(name,i)),t0}return tween._value=value,tween}function delayFunction(id,value){return function(){init(this,id).delay=+value.apply(this,arguments)}}function delayConstant(id,value){return value=+value,function(){init(this,id).delay=value}}function durationFunction(id,value){return function(){set$2(this,id).duration=+value.apply(this,arguments)}}function durationConstant(id,value){return value=+value,function(){set$2(this,id).duration=value}}var Selection$2=selection$2.prototype.constructor;function styleRemove$2(name){return function(){this.style.removeProperty(name)}}var id=0;function Transition(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function newId(){return++id}var selection_prototype=selection$2.prototype;Transition.prototype={constructor:Transition,select:function transition_select(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selector$5(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,schedule(subgroup[i],name,id,i,subgroup,get$4(node,id)));return new Transition(subgroups,this._parents,name,id)},selectAll:function transition_selectAll(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll$5(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=get$4(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new Transition(subgroups,parents,name,id)},filter:function transition_filter(match){"function"!=typeof match&&(match=matcher$6(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Transition(subgroups,this._parents,this._name,this._id)},merge:function transition_merge(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Transition(merges,this._parents,this._name,this._id)},selection:function transition_selection(){return new Selection$2(this._groups,this._parents)},transition:function transition_transition(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=get$4(node,id0);schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition(groups,this._parents,name,id1)},call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:function transition_on(name,listener){var id=this._id;return arguments.length<2?get$4(this.node(),id).on.on(name):this.each(function onFunction(id,name,listener){var on0,on1,sit=function start(name){return(name+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(name)?init:set$2;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}(id,name,listener))},attr:function transition_attr(name,value){var fullname=namespace$5(name),i="transform"===fullname?interpolateTransformSvg$2:interpolate;return this.attrTween(name,"function"==typeof value?(fullname.local?attrFunctionNS$2:attrFunction$2)(fullname,i,tweenValue(this,"attr."+name,value)):null==value?(fullname.local?attrRemoveNS$2:attrRemove$2)(fullname):(fullname.local?attrConstantNS$2:attrConstant$2)(fullname,i,value))},attrTween:function transition_attrTween(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace$5(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value))},style:function transition_style(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss$2:interpolate;return null==value?this.styleTween(name,function styleNull(name,interpolate){var string00,string10,interpolate0;return function(){var string0=styleValue$5(this,name),string1=(this.style.removeProperty(name),styleValue$5(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}(name,i)).on("end.style."+name,styleRemove$2(name)):"function"==typeof value?this.styleTween(name,function styleFunction$2(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=styleValue$5(this,name),value1=value(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=styleValue$5(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}(name,i,tweenValue(this,"style."+name,value))).each(function styleMaybeRemove(id,name){var on0,on1,listener0,remove,key="style."+name,event="end."+key;return function(){var schedule=set$2(this,id),on=schedule.on,listener=null==schedule.value[key]?remove||(remove=styleRemove$2(name)):void 0;on===on0&&listener0===listener||(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}(this._id,name)):this.styleTween(name,function styleConstant$2(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=styleValue$5(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}(name,i,value),priority).on("end.style."+name,null)},styleTween:function transition_styleTween(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,function styleTween(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t=(i0=i)&&function styleInterpolate(name,i,priority){return function(t){this.style.setProperty(name,i.call(this,t),priority)}}(name,i,priority)),t}return tween._value=value,tween}(name,value,null==priority?"":priority))},text:function transition_text(value){return this.tween("text","function"==typeof value?function textFunction$2(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue(this,"text",value)):function textConstant$2(value){return function(){this.textContent=value}}(null==value?"":value+""))},textTween:function transition_textTween(value){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,function textTween(value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function textInterpolate(i){return function(t){this.textContent=i.call(this,t)}}(i)),t0}return tween._value=value,tween}(value))},remove:function transition_remove(){return this.on("end.remove",function removeFunction(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}}(this._id))},tween:function transition_tween(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=get$4(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove:tweenFunction)(id,name,value))},delay:function transition_delay(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction:delayConstant)(id,value)):get$4(this.node(),id).delay},duration:function transition_duration(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction:durationConstant)(id,value)):get$4(this.node(),id).duration},ease:function transition_ease(value){var id=this._id;return arguments.length?this.each(function easeConstant(id,value){if("function"!=typeof value)throw new Error;return function(){set$2(this,id).ease=value}}(id,value)):get$4(this.node(),id).ease},end:function transition_end(){var on0,on1,that=this,id=that._id,size=that.size();return new Promise((function(resolve,reject){var cancel={value:reject},end={value:function(){0==--size&&resolve()}};that.each((function(){var schedule=set$2(this,id),on=schedule.on;on!==on0&&((on1=(on0=on).copy())._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end)),schedule.on=on1}))}))}};var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut$2};function inherit(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))return defaultTiming.time=now$2(),defaultTiming;return timing}function constant$5(x){return function(){return x}}function ZoomEvent(target,type,transform){this.target=target,this.type=type,this.transform=transform}function Transform(k,x,y){this.k=k,this.x=x,this.y=y}selection$2.prototype.interrupt=function selection_interrupt(name){return this.each((function(){interrupt(this,name)}))},selection$2.prototype.transition=function selection_transition(name){var id,timing;name instanceof Transition?(id=name._id,name=name._name):(id=newId(),(timing=defaultTiming).time=now$2(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule(node,name,id,i,group,timing||inherit(node,id));return new Transition(groups,this._parents,name,id)},Transform.prototype={constructor:Transform,scale:function(k){return 1===k?this:new Transform(this.k*k,this.x,this.y)},translate:function(x,y){return 0===x&0===y?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*y)},apply:function(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y]},applyX:function(x){return x*this.k+this.x},applyY:function(y){return y*this.k+this.y},invert:function(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k]},invertX:function(x){return(x-this.x)/this.k},invertY:function(y){return(y-this.y)/this.k},rescaleX:function(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x))},rescaleY:function(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity$1=new Transform(1,0,0);function transform(node){return node.__zoom||identity$1}function nopropagation$1(){event$4.stopImmediatePropagation()}function noevent$1(){event$4.preventDefault(),event$4.stopImmediatePropagation()}function defaultFilter$1(){return!event$4.button}function defaultExtent(){var w,h,e=this;return e instanceof SVGElement?(w=(e=e.ownerSVGElement||e).width.baseVal.value,h=e.height.baseVal.value):(w=e.clientWidth,h=e.clientHeight),[[0,0],[w,h]]}function defaultTransform(){return this.__zoom||identity$1}function defaultWheelDelta(){return-event$4.deltaY*(event$4.deltaMode?120:1)/500}function defaultTouchable$1(){return"ontouchstart"in this}function defaultConstrain(transform,extent,translateExtent){var dx0=transform.invertX(extent[0][0])-translateExtent[0][0],dx1=transform.invertX(extent[1][0])-translateExtent[1][0],dy0=transform.invertY(extent[0][1])-translateExtent[0][1],dy1=transform.invertY(extent[1][1])-translateExtent[1][1];return transform.translate(dx1>dx0?(dx0+dx1)/2:Math.min(0,dx0)||Math.max(0,dx1),dy1>dy0?(dy0+dy1)/2:Math.min(0,dy0)||Math.max(0,dy1))}transform.prototype=Transform.prototype;var d3=Object.freeze({__proto__:null,version:"4.13.0",bisect:bisectRight$1,bisectRight:bisectRight$1,bisectLeft:bisectLeft,ascending:ascending$7,bisector:bisector$1,cross:function cross$2(values0,values1,reduce){var i0,i1,i,value0,n0=values0.length,n1=values1.length,values=new Array(n0*n1);for(null==reduce&&(reduce=pair),i0=i=0;i0<n0;++i0)for(value0=values0[i0],i1=0;i1<n1;++i1,++i)values[i]=reduce(value0,values1[i1]);return values},descending:function descending$2(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},deviation:deviation,extent:extent$1,histogram:function histogram(){var value=identity$b,domain=extent$1,threshold=sturges;function histogram(data){var i,x,n=data.length,values=new Array(n);for(i=0;i<n;++i)values[i]=value(data[i],i,data);var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);Array.isArray(tz)||(tz=tickStep$1(x0,x1,tz),tz=range$1(Math.ceil(x0/tz)*tz,Math.floor(x1/tz)*tz,tz));for(var m=tz.length;tz[0]<=x0;)tz.shift(),--m;for(;tz[m-1]>x1;)tz.pop(),--m;var bin,bins=new Array(m+1);for(i=0;i<=m;++i)(bin=bins[i]=[]).x0=i>0?tz[i-1]:x0,bin.x1=i<m?tz[i]:x1;for(i=0;i<n;++i)x0<=(x=values[i])&&x<=x1&&bins[bisectRight$1(tz,x,0,m)].push(data[i]);return bins}return histogram.value=function(_){return arguments.length?(value="function"==typeof _?_:constant$l(_),histogram):value},histogram.domain=function(_){return arguments.length?(domain="function"==typeof _?_:constant$l([_[0],_[1]]),histogram):domain},histogram.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:Array.isArray(_)?constant$l(slice$6.call(_)):constant$l(_),histogram):threshold},histogram},thresholdFreedmanDiaconis:function freedmanDiaconis(values,min,max){return values=map$4.call(values,number$6).sort(ascending$7),Math.ceil((max-min)/(2*(quantile$1(values,.75)-quantile$1(values,.25))*Math.pow(values.length,-1/3)))},thresholdScott:function scott(values,min,max){return Math.ceil((max-min)/(3.5*deviation(values)*Math.pow(values.length,-1/3)))},thresholdSturges:sturges,max:function max$2(values,valueof){var value,max,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(max=value;++i<n;)null!=(value=values[i])&&value>max&&(max=value)}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(max=value;++i<n;)null!=(value=valueof(values[i],i,values))&&value>max&&(max=value);return max},mean:function mean(values,valueof){var value,n=values.length,m=n,i=-1,sum=0;if(null==valueof)for(;++i<n;)isNaN(value=number$6(values[i]))?--m:sum+=value;else for(;++i<n;)isNaN(value=number$6(valueof(values[i],i,values)))?--m:sum+=value;if(m)return sum/m},median:function median(values,valueof){var value,n=values.length,i=-1,numbers=[];if(null==valueof)for(;++i<n;)isNaN(value=number$6(values[i]))||numbers.push(value);else for(;++i<n;)isNaN(value=number$6(valueof(values[i],i,values)))||numbers.push(value);return quantile$1(numbers.sort(ascending$7),.5)},merge:function merge(arrays){for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;for(merged=new Array(j);--n>=0;)for(m=(array=arrays[n]).length;--m>=0;)merged[--j]=array[m];return merged},min:min$1,pairs:function pairs(array,f){null==f&&(f=pair);for(var i=0,n=array.length-1,p=array[0],pairs=new Array(n<0?0:n);i<n;)pairs[i]=f(p,p=array[++i]);return pairs},permute:function permute(array,indexes){for(var i=indexes.length,permutes=new Array(i);i--;)permutes[i]=array[indexes[i]];return permutes},quantile:quantile$1,range:range$1,scan:function scan(values,compare){if(n=values.length){var n,xi,i=0,j=0,xj=values[j];for(null==compare&&(compare=ascending$7);++i<n;)(compare(xi=values[i],xj)<0||0!==compare(xj,xj))&&(xj=xi,j=i);return 0===compare(xj,xj)?j:void 0}},shuffle:function shuffle$1(array,i0,i1){for(var t,i,m=(null==i1?array.length:i1)-(i0=null==i0?0:+i0);m;)i=Math.random()*m--|0,t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t;return array},sum:function sum$2(values,valueof){var value,n=values.length,i=-1,sum=0;if(null==valueof)for(;++i<n;)(value=+values[i])&&(sum+=value);else for(;++i<n;)(value=+valueof(values[i],i,values))&&(sum+=value);return sum},ticks:function ticks$1(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)===(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement$1(start,stop,count))||!isFinite(step))return[];if(step>0)for(start=Math.ceil(start/step),stop=Math.floor(stop/step),ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)*step;else for(start=Math.floor(start*step),stop=Math.ceil(stop*step),ticks=new Array(n=Math.ceil(start-stop+1));++i<n;)ticks[i]=(start-i)/step;return reverse&&ticks.reverse(),ticks},tickIncrement:tickIncrement$1,tickStep:tickStep$1,transpose:transpose,variance:variance,zip:function zip(){return transpose(arguments)},axisTop:function axisTop(scale){return axis(top,scale)},axisRight:function axisRight(scale){return axis(right,scale)},axisBottom:function axisBottom(scale){return axis(bottom,scale)},axisLeft:function axisLeft(scale){return axis(left,scale)},brush:function brush(){return brush$1(XY)},brushX:function brushX(){return brush$1(X)},brushY:function brushY(){return brush$1(Y)},brushSelection:function brushSelection(node){var state=node.__brush;return state?state.dim.output(state.selection):null},chord:function chord(){var padAngle=0,sortGroups=null,sortSubgroups=null,sortChords=null;function chord(matrix){var k,x,x0,dx,i,j,n=matrix.length,groupSums=[],groupIndex=range$2(n),subgroupIndex=[],chords=[],groups=chords.groups=new Array(n),subgroups=new Array(n*n);for(k=0,i=-1;++i<n;){for(x=0,j=-1;++j<n;)x+=matrix[i][j];groupSums.push(x),subgroupIndex.push(range$2(n)),k+=x}for(sortGroups&&groupIndex.sort((function(a,b){return sortGroups(groupSums[a],groupSums[b])})),sortSubgroups&&subgroupIndex.forEach((function(d,i){d.sort((function(a,b){return sortSubgroups(matrix[i][a],matrix[i][b])}))})),dx=(k=max$1(0,tau$7-padAngle*n)/k)?padAngle:tau$7/n,x=0,i=-1;++i<n;){for(x0=x,j=-1;++j<n;){var di=groupIndex[i],dj=subgroupIndex[di][j],v=matrix[di][dj],a0=x,a1=x+=v*k;subgroups[dj*n+di]={index:di,subindex:dj,startAngle:a0,endAngle:a1,value:v}}groups[di]={index:di,startAngle:x0,endAngle:x,value:groupSums[di]},x+=dx}for(i=-1;++i<n;)for(j=i-1;++j<n;){var source=subgroups[j*n+i],target=subgroups[i*n+j];(source.value||target.value)&&chords.push(source.value<target.value?{source:target,target:source}:{source:source,target:target})}return sortChords?chords.sort(sortChords):chords}return chord.padAngle=function(_){return arguments.length?(padAngle=max$1(0,_),chord):padAngle},chord.sortGroups=function(_){return arguments.length?(sortGroups=_,chord):sortGroups},chord.sortSubgroups=function(_){return arguments.length?(sortSubgroups=_,chord):sortSubgroups},chord.sortChords=function(_){return arguments.length?(null==_?sortChords=null:(sortChords=function compareValue(compare){return function(a,b){return compare(a.source.value+a.target.value,b.source.value+b.target.value)}}(_))._=_,chord):sortChords&&sortChords._},chord},ribbon:function ribbon(){var source=defaultSource$1,target=defaultTarget,radius=defaultRadius$1,startAngle=defaultStartAngle,endAngle=defaultEndAngle,context=null;function ribbon(){var buffer,argv=slice$4.call(arguments),s=source.apply(this,argv),t=target.apply(this,argv),sr=+radius.apply(this,(argv[0]=s,argv)),sa0=startAngle.apply(this,argv)-halfPi$4,sa1=endAngle.apply(this,argv)-halfPi$4,sx0=sr*cos$2(sa0),sy0=sr*sin$2(sa0),tr=+radius.apply(this,(argv[0]=t,argv)),ta0=startAngle.apply(this,argv)-halfPi$4,ta1=endAngle.apply(this,argv)-halfPi$4;if(context||(context=buffer=path$2()),context.moveTo(sx0,sy0),context.arc(0,0,sr,sa0,sa1),sa0===ta0&&sa1===ta1||(context.quadraticCurveTo(0,0,tr*cos$2(ta0),tr*sin$2(ta0)),context.arc(0,0,tr,ta0,ta1)),context.quadraticCurveTo(0,0,sx0,sy0),context.closePath(),buffer)return context=null,buffer+""||null}return ribbon.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant$j(+_),ribbon):radius},ribbon.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:constant$j(+_),ribbon):startAngle},ribbon.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:constant$j(+_),ribbon):endAngle},ribbon.source=function(_){return arguments.length?(source=_,ribbon):source},ribbon.target=function(_){return arguments.length?(target=_,ribbon):target},ribbon.context=function(_){return arguments.length?(context=null==_?null:_,ribbon):context},ribbon},nest:function nest(){var sortValues,rollup,nest,keys=[],sortKeys=[];function apply(array,depth,createResult,setResult){if(depth>=keys.length)return null!=sortValues&&array.sort(sortValues),null!=rollup?rollup(array):array;for(var keyValue,value,values,i=-1,n=array.length,key=keys[depth++],valuesByKey=map$3(),result=createResult();++i<n;)(values=valuesByKey.get(keyValue=key(value=array[i])+""))?values.push(value):valuesByKey.set(keyValue,[value]);return valuesByKey.each((function(values,key){setResult(result,key,apply(values,depth,createResult,setResult))})),result}function entries(map,depth){if(++depth>keys.length)return map;var array,sortKey=sortKeys[depth-1];return null!=rollup&&depth>=keys.length?array=map.entries():(array=[],map.each((function(v,k){array.push({key:k,values:entries(v,depth)})}))),null!=sortKey?array.sort((function(a,b){return sortKey(a.key,b.key)})):array}return nest={object:function(array){return apply(array,0,createObject,setObject)},map:function(array){return apply(array,0,createMap,setMap)},entries:function(array){return entries(apply(array,0,createMap,setMap),0)},key:function(d){return keys.push(d),nest},sortKeys:function(order){return sortKeys[keys.length-1]=order,nest},sortValues:function(order){return sortValues=order,nest},rollup:function(f){return rollup=f,nest}}},set:set$7,map:map$3,keys:function keys$1(map){var keys=[];for(var key in map)keys.push(key);return keys},values:function values$1(map){var values=[];for(var key in map)values.push(map[key]);return values},entries:function entries(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries},color:color,rgb:rgb$2,hsl:hsl$2,lab:lab$1,hcl:hcl$2,lch:function lch(l,c,h,opacity){return 1===arguments.length?hclConvert(l):new Hcl(h,c,l,null==opacity?1:opacity)},gray:function gray(l,opacity){return new Lab(l,0,0,null==opacity?1:opacity)},cubehelix:cubehelix$6,dispatch:dispatch$4,drag:function drag$1(){var mousedownx,mousedowny,mousemoving,touchending,filter=defaultFilter$2,container=defaultContainer$1,subject=defaultSubject$1,touchable=defaultTouchable$2,gestures={},listeners=dispatch$3("start","drag","end"),active=0,clickDistance2=0;function drag(selection){selection.on("mousedown.drag",mousedowned).filter(touchable).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved).on("touchend.drag touchcancel.drag",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function mousedowned(){if(!touchending&&filter.apply(this,arguments)){var gesture=beforestart("mouse",container.apply(this,arguments),mouse$2,this,arguments);gesture&&(select$3(event$3.view).on("mousemove.drag",mousemoved,!0).on("mouseup.drag",mouseupped,!0),nodrag$1(event$3.view),nopropagation$2(),mousemoving=!1,mousedownx=event$3.clientX,mousedowny=event$3.clientY,gesture("start"))}}function mousemoved(){if(noevent$2(),!mousemoving){var dx=event$3.clientX-mousedownx,dy=event$3.clientY-mousedowny;mousemoving=dx*dx+dy*dy>clickDistance2}gestures.mouse("drag")}function mouseupped(){select$3(event$3.view).on("mousemove.drag mouseup.drag",null),yesdrag$1(event$3.view,mousemoving),noevent$2(),gestures.mouse("end")}function touchstarted(){if(filter.apply(this,arguments)){var i,gesture,touches=event$3.changedTouches,c=container.apply(this,arguments),n=touches.length;for(i=0;i<n;++i)(gesture=beforestart(touches[i].identifier,c,touch$2,this,arguments))&&(nopropagation$2(),gesture("start"))}}function touchmoved(){var i,gesture,touches=event$3.changedTouches,n=touches.length;for(i=0;i<n;++i)(gesture=gestures[touches[i].identifier])&&(noevent$2(),gesture("drag"))}function touchended(){var i,gesture,touches=event$3.changedTouches,n=touches.length;for(touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),500),i=0;i<n;++i)(gesture=gestures[touches[i].identifier])&&(nopropagation$2(),gesture("end"))}function beforestart(id,container,point,that,args){var s,dx,dy,p=point(container,id),sublisteners=listeners.copy();if(customEvent$2(new DragEvent$1(drag,"beforestart",s,id,active,p[0],p[1],0,0,sublisteners),(function(){return null!=(event$3.subject=s=subject.apply(that,args))&&(dx=s.x-p[0]||0,dy=s.y-p[1]||0,!0)})))return function gesture(type){var n,p0=p;switch(type){case"start":gestures[id]=gesture,n=active++;break;case"end":delete gestures[id],--active;case"drag":p=point(container,id),n=active}customEvent$2(new DragEvent$1(drag,type,s,id,n,p[0]+dx,p[1]+dy,p[0]-p0[0],p[1]-p0[1],sublisteners),sublisteners.apply,sublisteners,[type,that,args])}}return drag.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant$h(!!_),drag):filter},drag.container=function(_){return arguments.length?(container="function"==typeof _?_:constant$h(_),drag):container},drag.subject=function(_){return arguments.length?(subject="function"==typeof _?_:constant$h(_),drag):subject},drag.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:constant$h(!!_),drag):touchable},drag.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?drag:value},drag.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,drag):Math.sqrt(clickDistance2)},drag},dragDisable:nodrag$1,dragEnable:yesdrag$1,dsvFormat:dsv$2,csvParse:csvParse$1,csvParseRows:csvParseRows,csvFormat:csvFormat,csvFormatRows:csvFormatRows,tsvParse:tsvParse$1,tsvParseRows:tsvParseRows,tsvFormat:tsvFormat,tsvFormatRows:tsvFormatRows,easeLinear:function linear$4(t){return+t},easeQuad:quadInOut,easeQuadIn:function quadIn(t){return t*t},easeQuadOut:function quadOut(t){return t*(2-t)},easeQuadInOut:quadInOut,easeCubic:cubicInOut$1,easeCubicIn:function cubicIn(t){return t*t*t},easeCubicOut:function cubicOut(t){return--t*t*t+1},easeCubicInOut:cubicInOut$1,easePoly:polyInOut,easePolyIn:polyIn,easePolyOut:polyOut,easePolyInOut:polyInOut,easeSin:sinInOut,easeSinIn:function sinIn(t){return 1-Math.cos(t*halfPi$3)},easeSinOut:function sinOut(t){return Math.sin(t*halfPi$3)},easeSinInOut:sinInOut,easeExp:expInOut,easeExpIn:function expIn(t){return Math.pow(2,10*t-10)},easeExpOut:function expOut(t){return 1-Math.pow(2,-10*t)},easeExpInOut:expInOut,easeCircle:circleInOut,easeCircleIn:function circleIn(t){return 1-Math.sqrt(1-t*t)},easeCircleOut:function circleOut(t){return Math.sqrt(1- --t*t)},easeCircleInOut:circleInOut,easeBounce:bounceOut,easeBounceIn:function bounceIn(t){return 1-bounceOut(1-t)},easeBounceOut:bounceOut,easeBounceInOut:function bounceInOut(t){return((t*=2)<=1?1-bounceOut(1-t):bounceOut(t-1)+1)/2},easeBack:backInOut,easeBackIn:backIn,easeBackOut:backOut,easeBackInOut:backInOut,easeElastic:elasticOut,easeElasticIn:elasticIn,easeElasticOut:elasticOut,easeElasticInOut:elasticInOut,forceCenter:function center(x,y){var nodes;function force(){var i,node,n=nodes.length,sx=0,sy=0;for(i=0;i<n;++i)sx+=(node=nodes[i]).x,sy+=node.y;for(sx=sx/n-x,sy=sy/n-y,i=0;i<n;++i)(node=nodes[i]).x-=sx,node.y-=sy}return null==x&&(x=0),null==y&&(y=0),force.initialize=function(_){nodes=_},force.x=function(_){return arguments.length?(x=+_,force):x},force.y=function(_){return arguments.length?(y=+_,force):y},force},forceCollide:function collide(radius){var nodes,radii,strength=1,iterations=1;function force(){for(var i,tree,node,xi,yi,ri,ri2,n=nodes.length,k=0;k<iterations;++k)for(tree=quadtree$1(nodes,x$5,y$5).visitAfter(prepare),i=0;i<n;++i)node=nodes[i],ri=radii[node.index],ri2=ri*ri,xi=node.x+node.vx,yi=node.y+node.vy,tree.visit(apply);function apply(quad,x0,y0,x1,y1){var data=quad.data,rj=quad.r,r=ri+rj;if(!data)return x0>xi+r||x1<xi-r||y0>yi+r||y1<yi-r;if(data.index>node.index){var x=xi-data.x-data.vx,y=yi-data.y-data.vy,l=x*x+y*y;l<r*r&&(0===x&&(l+=(x=jiggle())*x),0===y&&(l+=(y=jiggle())*y),l=(r-(l=Math.sqrt(l)))/l*strength,node.vx+=(x*=l)*(r=(rj*=rj)/(ri2+rj)),node.vy+=(y*=l)*r,data.vx-=x*(r=1-r),data.vy-=y*r)}}}function prepare(quad){if(quad.data)return quad.r=radii[quad.data.index];for(var i=quad.r=0;i<4;++i)quad[i]&&quad[i].r>quad.r&&(quad.r=quad[i].r)}function initialize(){if(nodes){var i,node,n=nodes.length;for(radii=new Array(n),i=0;i<n;++i)node=nodes[i],radii[node.index]=+radius(node,i,nodes)}}return"function"!=typeof radius&&(radius=constant$g(null==radius?1:+radius)),force.initialize=function(_){nodes=_,initialize()},force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){return arguments.length?(strength=+_,force):strength},force.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant$g(+_),initialize(),force):radius},force},forceLink:function link$2(links){var strengths,distances,nodes,count,bias,id=index$4,strength=function defaultStrength(link){return 1/Math.min(count[link.source.index],count[link.target.index])},distance=constant$g(30),iterations=1;function force(alpha){for(var k=0,n=links.length;k<iterations;++k)for(var link,source,target,x,y,l,b,i=0;i<n;++i)source=(link=links[i]).source,x=(target=link.target).x+target.vx-source.x-source.vx||jiggle(),y=target.y+target.vy-source.y-source.vy||jiggle(),x*=l=((l=Math.sqrt(x*x+y*y))-distances[i])/l*alpha*strengths[i],y*=l,target.vx-=x*(b=bias[i]),target.vy-=y*b,source.vx+=x*(b=1-b),source.vy+=y*b}function initialize(){if(nodes){var i,link,n=nodes.length,m=links.length,nodeById=map$7(nodes,id);for(i=0,count=new Array(n);i<m;++i)(link=links[i]).index=i,"object"!=typeof link.source&&(link.source=find$1(nodeById,link.source)),"object"!=typeof link.target&&(link.target=find$1(nodeById,link.target)),count[link.source.index]=(count[link.source.index]||0)+1,count[link.target.index]=(count[link.target.index]||0)+1;for(i=0,bias=new Array(m);i<m;++i)link=links[i],bias[i]=count[link.source.index]/(count[link.source.index]+count[link.target.index]);strengths=new Array(m),initializeStrength(),distances=new Array(m),initializeDistance()}}function initializeStrength(){if(nodes)for(var i=0,n=links.length;i<n;++i)strengths[i]=+strength(links[i],i,links)}function initializeDistance(){if(nodes)for(var i=0,n=links.length;i<n;++i)distances[i]=+distance(links[i],i,links)}return null==links&&(links=[]),force.initialize=function(_){nodes=_,initialize()},force.links=function(_){return arguments.length?(links=_,initialize(),force):links},force.id=function(_){return arguments.length?(id=_,force):id},force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant$g(+_),initializeStrength(),force):strength},force.distance=function(_){return arguments.length?(distance="function"==typeof _?_:constant$g(+_),initializeDistance(),force):distance},force},forceManyBody:function manyBody(){var nodes,node,alpha,strengths,strength=constant$g(-30),distanceMin2=1,distanceMax2=1/0,theta2=.81;function force(_){var i,n=nodes.length,tree=quadtree$1(nodes,x$4,y$4).visitAfter(accumulate);for(alpha=_,i=0;i<n;++i)node=nodes[i],tree.visit(apply)}function initialize(){if(nodes){var i,node,n=nodes.length;for(strengths=new Array(n),i=0;i<n;++i)node=nodes[i],strengths[node.index]=+strength(node,i,nodes)}}function accumulate(quad){var q,c,x,y,i,strength=0,weight=0;if(quad.length){for(x=y=i=0;i<4;++i)(q=quad[i])&&(c=Math.abs(q.value))&&(strength+=q.value,weight+=c,x+=c*q.x,y+=c*q.y);quad.x=x/weight,quad.y=y/weight}else{(q=quad).x=q.data.x,q.y=q.data.y;do{strength+=strengths[q.data.index]}while(q=q.next)}quad.value=strength}function apply(quad,x1,_,x2){if(!quad.value)return!0;var x=quad.x-node.x,y=quad.y-node.y,w=x2-x1,l=x*x+y*y;if(w*w/theta2<l)return l<distanceMax2&&(0===x&&(l+=(x=jiggle())*x),0===y&&(l+=(y=jiggle())*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)),node.vx+=x*quad.value*alpha/l,node.vy+=y*quad.value*alpha/l),!0;if(!(quad.length||l>=distanceMax2)){(quad.data!==node||quad.next)&&(0===x&&(l+=(x=jiggle())*x),0===y&&(l+=(y=jiggle())*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)));do{quad.data!==node&&(w=strengths[quad.data.index]*alpha/l,node.vx+=x*w,node.vy+=y*w)}while(quad=quad.next)}}return force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant$g(+_),initialize(),force):strength},force.distanceMin=function(_){return arguments.length?(distanceMin2=_*_,force):Math.sqrt(distanceMin2)},force.distanceMax=function(_){return arguments.length?(distanceMax2=_*_,force):Math.sqrt(distanceMax2)},force.theta=function(_){return arguments.length?(theta2=_*_,force):Math.sqrt(theta2)},force},forceRadial:function radial(radius,x,y){var nodes,strengths,radiuses,strength=constant$g(.1);function force(alpha){for(var i=0,n=nodes.length;i<n;++i){var node=nodes[i],dx=node.x-x||1e-6,dy=node.y-y||1e-6,r=Math.sqrt(dx*dx+dy*dy),k=(radiuses[i]-r)*strengths[i]*alpha/r;node.vx+=dx*k,node.vy+=dy*k}}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),radiuses=new Array(n),i=0;i<n;++i)radiuses[i]=+radius(nodes[i],i,nodes),strengths[i]=isNaN(radiuses[i])?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof radius&&(radius=constant$g(+radius)),null==x&&(x=0),null==y&&(y=0),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant$g(+_),initialize(),force):strength},force.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant$g(+_),initialize(),force):radius},force.x=function(_){return arguments.length?(x=+_,force):x},force.y=function(_){return arguments.length?(y=+_,force):y},force},forceSimulation:function simulation(nodes){var simulation,alpha=1,alphaMin=.001,alphaDecay=1-Math.pow(alphaMin,1/300),alphaTarget=0,velocityDecay=.6,forces=map$7(),stepper=timer$2(step),event=dispatch$5("tick","end");function step(){tick(),event.call("tick",simulation),alpha<alphaMin&&(stepper.stop(),event.call("end",simulation))}function tick(){var i,node,n=nodes.length;for(alpha+=(alphaTarget-alpha)*alphaDecay,forces.each((function(force){force(alpha)})),i=0;i<n;++i)null==(node=nodes[i]).fx?node.x+=node.vx*=velocityDecay:(node.x=node.fx,node.vx=0),null==node.fy?node.y+=node.vy*=velocityDecay:(node.y=node.fy,node.vy=0)}function initializeNodes(){for(var node,i=0,n=nodes.length;i<n;++i){if((node=nodes[i]).index=i,isNaN(node.x)||isNaN(node.y)){var radius=10*Math.sqrt(i),angle=i*initialAngle;node.x=radius*Math.cos(angle),node.y=radius*Math.sin(angle)}(isNaN(node.vx)||isNaN(node.vy))&&(node.vx=node.vy=0)}}function initializeForce(force){return force.initialize&&force.initialize(nodes),force}return null==nodes&&(nodes=[]),initializeNodes(),simulation={tick:tick,restart:function(){return stepper.restart(step),simulation},stop:function(){return stepper.stop(),simulation},nodes:function(_){return arguments.length?(nodes=_,initializeNodes(),forces.each(initializeForce),simulation):nodes},alpha:function(_){return arguments.length?(alpha=+_,simulation):alpha},alphaMin:function(_){return arguments.length?(alphaMin=+_,simulation):alphaMin},alphaDecay:function(_){return arguments.length?(alphaDecay=+_,simulation):+alphaDecay},alphaTarget:function(_){return arguments.length?(alphaTarget=+_,simulation):alphaTarget},velocityDecay:function(_){return arguments.length?(velocityDecay=1-_,simulation):1-velocityDecay},force:function(name,_){return arguments.length>1?(null==_?forces.remove(name):forces.set(name,initializeForce(_)),simulation):forces.get(name)},find:function(x,y,radius){var dx,dy,d2,node,closest,i=0,n=nodes.length;for(null==radius?radius=1/0:radius*=radius,i=0;i<n;++i)(d2=(dx=x-(node=nodes[i]).x)*dx+(dy=y-node.y)*dy)<radius&&(closest=node,radius=d2);return closest},on:function(name,_){return arguments.length>1?(event.on(name,_),simulation):event.on(name)}}},forceX:function x$3(x){var nodes,strengths,xz,strength=constant$g(.1);function force(alpha){for(var node,i=0,n=nodes.length;i<n;++i)(node=nodes[i]).vx+=(xz[i]-node.x)*strengths[i]*alpha}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),xz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(xz[i]=+x(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof x&&(x=constant$g(null==x?0:+x)),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant$g(+_),initialize(),force):strength},force.x=function(_){return arguments.length?(x="function"==typeof _?_:constant$g(+_),initialize(),force):x},force},forceY:function y$3(y){var nodes,strengths,yz,strength=constant$g(.1);function force(alpha){for(var node,i=0,n=nodes.length;i<n;++i)(node=nodes[i]).vy+=(yz[i]-node.y)*strengths[i]*alpha}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),yz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(yz[i]=+y(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof y&&(y=constant$g(null==y?0:+y)),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant$g(+_),initialize(),force):strength},force.y=function(_){return arguments.length?(y="function"==typeof _?_:constant$g(+_),initialize(),force):y},force},formatDefaultLocale:defaultLocale$3,get format(){return format$1},get formatPrefix(){return formatPrefix$1},formatLocale:formatLocale$3,formatSpecifier:formatSpecifier$1,precisionFixed:function precisionFixed$1(step){return Math.max(0,-exponent$2(Math.abs(step)))},precisionPrefix:function precisionPrefix$1(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent$2(value)/3)))-exponent$2(Math.abs(step)))},precisionRound:function precisionRound$1(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,exponent$2(max)-exponent$2(step))+1},geoArea:function area$2(object){return areaSum$1.reset(),geoStream(object,areaStream$1),2*areaSum$1},geoBounds:function bounds(feature){var i,n,a,b,merged,deltaMax,delta;if(phi1=lambda1=-(lambda0$1=phi0=1/0),ranges=[],geoStream(feature,boundsStream$1),n=ranges.length){for(ranges.sort(rangeCompare),i=1,merged=[a=ranges[0]];i<n;++i)rangeContains(a,(b=ranges[i])[0])||rangeContains(a,b[1])?(angle(a[0],b[1])>angle(a[0],a[1])&&(a[1]=b[1]),angle(b[0],a[1])>angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(deltaMax=-1/0,i=0,a=merged[n=merged.length-1];i<=n;a=b,++i)b=merged[i],(delta=angle(a[1],b[0]))>deltaMax&&(deltaMax=delta,lambda0$1=b[0],lambda1=a[1])}return ranges=range=null,lambda0$1===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]]},geoCentroid:function centroid$1(object){W0=W1=X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=X2$1=Y2$1=Z2$1=0,geoStream(object,centroidStream$1);var x=X2$1,y=Y2$1,z=Z2$1,m=x*x+y*y+z*z;return m<1e-12&&(x=X1$1,y=Y1$1,z=Z1$1,W1<epsilon$5&&(x=X0$1,y=Y0$1,z=Z0$1),(m=x*x+y*y+z*z)<1e-12)?[NaN,NaN]:[atan2$1(y,x)*degrees$2,asin$2(z/sqrt$2(m))*degrees$2]},geoCircle:function circle$2(){var ring,rotate,center=constant$f([0,0]),radius=constant$f(90),precision=constant$f(6),stream={point:function point(x,y){ring.push(x=rotate(x,y)),x[0]*=degrees$2,x[1]*=degrees$2}};function circle(){var c=center.apply(this,arguments),r=radius.apply(this,arguments)*radians,p=precision.apply(this,arguments)*radians;return ring=[],rotate=rotateRadians(-c[0]*radians,-c[1]*radians,0).invert,circleStream(stream,r,p,1),c={type:"Polygon",coordinates:[ring]},ring=rotate=null,c}return circle.center=function(_){return arguments.length?(center="function"==typeof _?_:constant$f([+_[0],+_[1]]),circle):center},circle.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant$f(+_),circle):radius},circle.precision=function(_){return arguments.length?(precision="function"==typeof _?_:constant$f(+_),circle):precision},circle},geoClipAntimeridian:clipAntimeridian,geoClipCircle:clipCircle,geoClipExtent:function extent(){var cache,cacheStream,clip,x0=0,y0=0,x1=960,y1=500;return clip={stream:function(stream){return cache&&cacheStream===stream?cache:cache=clipRectangle(x0,y0,x1,y1)(cacheStream=stream)},extent:function(_){return arguments.length?(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1],cache=cacheStream=null,clip):[[x0,y0],[x1,y1]]}}},geoClipRectangle:clipRectangle,geoContains:function contains$1(object,point){return(object&&containsObjectType.hasOwnProperty(object.type)?containsObjectType[object.type]:containsGeometry)(object,point)},geoDistance:distance,geoGraticule:graticule,geoGraticule10:function graticule10(){return graticule()()},geoInterpolate:function interpolate$2(a,b){var x0=a[0]*radians,y0=a[1]*radians,x1=b[0]*radians,y1=b[1]*radians,cy0=cos$1(y0),sy0=sin$1(y0),cy1=cos$1(y1),sy1=sin$1(y1),kx0=cy0*cos$1(x0),ky0=cy0*sin$1(x0),kx1=cy1*cos$1(x1),ky1=cy1*sin$1(x1),d=2*asin$2(sqrt$2(haversin(y1-y0)+cy0*cy1*haversin(x1-x0))),k=sin$1(d),interpolate=d?function(t){var B=sin$1(t*=d)/k,A=sin$1(d-t)/k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[atan2$1(y,x)*degrees$2,atan2$1(z,sqrt$2(x*x+y*y))*degrees$2]}:function(){return[x0*degrees$2,y0*degrees$2]};return interpolate.distance=d,interpolate},geoLength:length$1,geoPath:function index$3(projection,context){var projectionStream,contextStream,pointRadius=4.5;function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),geoStream(object,projectionStream(contextStream))),contextStream.result()}return path.area=function(object){return geoStream(object,projectionStream(areaStream)),areaStream.result()},path.measure=function(object){return geoStream(object,projectionStream(lengthStream)),lengthStream.result()},path.bounds=function(object){return geoStream(object,projectionStream(boundsStream)),boundsStream.result()},path.centroid=function(object){return geoStream(object,projectionStream(centroidStream)),centroidStream.result()},path.projection=function(_){return arguments.length?(projectionStream=null==_?(projection=null,identity$8):(projection=_).stream,path):projection},path.context=function(_){return arguments.length?(contextStream=null==_?(context=null,new PathString):new PathContext(context=_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),path):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.projection(projection).context(context)},geoAlbers:albers,geoAlbersUsa:function albersUsa(){var cache,cacheStream,lower48Point,alaskaPoint,hawaiiPoint,point,lower48=albers(),alaska=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={point:function(x,y){point=[x,y]}};function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point.point(x,y),point||(alaskaPoint.point(x,y),point)||(hawaiiPoint.point(x,y),point)}function reset(){return cache=cacheStream=null,albersUsa}return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){return cache&&cacheStream===stream?cache:cache=function multiplex(streams){var n=streams.length;return{point:function(x,y){for(var i=-1;++i<n;)streams[i].point(x,y)},sphere:function(){for(var i=-1;++i<n;)streams[i].sphere()},lineStart:function(){for(var i=-1;++i<n;)streams[i].lineStart()},lineEnd:function(){for(var i=-1;++i<n;)streams[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<n;)streams[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<n;)streams[i].polygonEnd()}}}([lower48.stream(cacheStream=stream),alaska.stream(stream),hawaii.stream(stream)])},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),reset()):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream),alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+epsilon$5,y+.12*k+epsilon$5],[x-.214*k-epsilon$5,y+.234*k-epsilon$5]]).stream(pointStream),hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+epsilon$5,y+.166*k+epsilon$5],[x-.115*k-epsilon$5,y+.234*k-epsilon$5]]).stream(pointStream),reset()},albersUsa.fitExtent=function(extent,object){return fitExtent(albersUsa,extent,object)},albersUsa.fitSize=function(size,object){return fitSize(albersUsa,size,object)},albersUsa.fitWidth=function(width,object){return fitWidth(albersUsa,width,object)},albersUsa.fitHeight=function(height,object){return fitHeight(albersUsa,height,object)},albersUsa.scale(1070)},geoAzimuthalEqualArea:function azimuthalEqualArea(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(179.999)},geoAzimuthalEqualAreaRaw:azimuthalEqualAreaRaw,geoAzimuthalEquidistant:function azimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(179.999)},geoAzimuthalEquidistantRaw:azimuthalEquidistantRaw,geoConicConformal:function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])},geoConicConformalRaw:conicConformalRaw,geoConicEqualArea:conicEqualArea,geoConicEqualAreaRaw:conicEqualAreaRaw,geoConicEquidistant:function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])},geoConicEquidistantRaw:conicEquidistantRaw,geoEquirectangular:function equirectangular(){return projection(equirectangularRaw).scale(152.63)},geoEquirectangularRaw:equirectangularRaw,geoGnomonic:function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)},geoGnomonicRaw:gnomonicRaw,geoIdentity:function identity$7(){var y0,x1,y1,cache,cacheStream,projection,k=1,tx=0,ty=0,sx=1,sy=1,transform=identity$8,x0=null,postclip=identity$8;function reset(){return cache=cacheStream=null,projection}return projection={stream:function(stream){return cache&&cacheStream===stream?cache:cache=transform(postclip(cacheStream=stream))},postclip:function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},clipExtent:function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,identity$8):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},scale:function(_){return arguments.length?(transform=scaleTranslate((k=+_)*sx,k*sy,tx,ty),reset()):k},translate:function(_){return arguments.length?(transform=scaleTranslate(k*sx,k*sy,tx=+_[0],ty=+_[1]),reset()):[tx,ty]},reflectX:function(_){return arguments.length?(transform=scaleTranslate(k*(sx=_?-1:1),k*sy,tx,ty),reset()):sx<0},reflectY:function(_){return arguments.length?(transform=scaleTranslate(k*sx,k*(sy=_?-1:1),tx,ty),reset()):sy<0},fitExtent:function(extent,object){return fitExtent(projection,extent,object)},fitSize:function(size,object){return fitSize(projection,size,object)},fitWidth:function(width,object){return fitWidth(projection,width,object)},fitHeight:function(height,object){return fitHeight(projection,height,object)}}},geoProjection:projection,geoProjectionMutator:projectionMutator,geoMercator:function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau$5)},geoMercatorRaw:mercatorRaw,geoNaturalEarth1:function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295)},geoNaturalEarth1Raw:naturalEarth1Raw,geoOrthographic:function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon$5)},geoOrthographicRaw:orthographicRaw,geoStereographic:function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)},geoStereographicRaw:stereographicRaw,geoTransverseMercator:function transverseMercator(){var m=mercatorProjection(transverseMercatorRaw),center=m.center,rotate=m.rotate;return m.center=function(_){return arguments.length?center([-_[1],_[0]]):[(_=center())[1],-_[0]]},m.rotate=function(_){return arguments.length?rotate([_[0],_[1],_.length>2?_[2]+90:90]):[(_=rotate())[0],_[1],_[2]-90]},rotate([0,0,90]).scale(159.155)},geoTransverseMercatorRaw:transverseMercatorRaw,geoRotation:rotation,geoStream:geoStream,geoTransform:function transform$1(methods){return{stream:transformer(methods)}},cluster:function cluster(){var separation=defaultSeparation$1,dx=1,dy=1,nodeSize=!1;function cluster(root){var previousNode,x=0;root.eachAfter((function(node){var children=node.children;children?(node.x=function meanX(children){return children.reduce(meanXReduce,0)/children.length}(children),node.y=function maxY(children){return 1+children.reduce(maxYReduce,0)}(children)):(node.x=previousNode?x+=separation(node,previousNode):0,node.y=0,previousNode=node)}));var left=function leafLeft(node){for(var children;children=node.children;)node=children[0];return node}(root),right=function leafRight(node){for(var children;children=node.children;)node=children[children.length-1];return node}(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return root.eachAfter(nodeSize?function(node){node.x=(node.x-root.x)*dx,node.y=(root.y-node.y)*dy}:function(node){node.x=(node.x-x0)/(x1-x0)*dx,node.y=(1-(root.y?node.y/root.y:1))*dy})}return cluster.separation=function(x){return arguments.length?(separation=x,cluster):separation},cluster.size=function(x){return arguments.length?(nodeSize=!1,dx=+x[0],dy=+x[1],cluster):nodeSize?null:[dx,dy]},cluster.nodeSize=function(x){return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],cluster):nodeSize?[dx,dy]:null},cluster},hierarchy:hierarchy,pack:function index$2(){var radius=null,dx=1,dy=1,padding=constantZero;function pack(root){return root.x=dx/2,root.y=dy/2,radius?root.eachBefore(radiusLeaf(radius)).eachAfter(packChildren(padding,.5)).eachBefore(translateChild(1)):root.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(padding,root.r/Math.min(dx,dy))).eachBefore(translateChild(Math.min(dx,dy)/(2*root.r))),root}return pack.radius=function(x){return arguments.length?(radius=function optional(f){return null==f?null:required(f)}(x),pack):radius},pack.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],pack):[dx,dy]},pack.padding=function(x){return arguments.length?(padding="function"==typeof x?x:constant$e(+x),pack):padding},pack},packSiblings:function siblings(circles){return packEnclose(circles),circles},packEnclose:enclose,partition:function partition(){var dx=1,dy=1,padding=0,round=!1;function partition(root){var n=root.height+1;return root.x0=root.y0=padding,root.x1=dx,root.y1=dy/n,root.eachBefore(function positionNode(dy,n){return function(node){node.children&&treemapDice(node,node.x0,dy*(node.depth+1)/n,node.x1,dy*(node.depth+2)/n);var x0=node.x0,y0=node.y0,x1=node.x1-padding,y1=node.y1-padding;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1}}(dy,n)),round&&root.eachBefore(roundNode),root}return partition.round=function(x){return arguments.length?(round=!!x,partition):round},partition.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],partition):[dx,dy]},partition.padding=function(x){return arguments.length?(padding=+x,partition):padding},partition},stratify:function stratify(){var id=defaultId$1,parentId=defaultParentId;function stratify(data){var d,i,root,parent,node,nodeId,nodeKey,n=data.length,nodes=new Array(n),nodeByKey={};for(i=0;i<n;++i)d=data[i],node=nodes[i]=new Node$1(d),null!=(nodeId=id(d,i,data))&&(nodeId+="")&&(nodeByKey[nodeKey="$"+(node.id=nodeId)]=nodeKey in nodeByKey?ambiguous:node);for(i=0;i<n;++i)if(node=nodes[i],null!=(nodeId=parentId(data[i],i,data))&&(nodeId+="")){if(!(parent=nodeByKey["$"+nodeId]))throw new Error("missing: "+nodeId);if(parent===ambiguous)throw new Error("ambiguous: "+nodeId);parent.children?parent.children.push(node):parent.children=[node],node.parent=parent}else{if(root)throw new Error("multiple roots");root=node}if(!root)throw new Error("no root");if(root.parent=preroot,root.eachBefore((function(node){node.depth=node.parent.depth+1,--n})).eachBefore(computeHeight),root.parent=null,n>0)throw new Error("cycle");return root}return stratify.id=function(x){return arguments.length?(id=required(x),stratify):id},stratify.parentId=function(x){return arguments.length?(parentId=required(x),stratify):parentId},stratify},tree:function tree(){var separation=defaultSeparation,dx=1,dy=1,nodeSize=null;function tree(root){var t=function treeRoot(root){for(var node,child,children,i,n,tree=new TreeNode(root,0),nodes=[tree];node=nodes.pop();)if(children=node._.children)for(node.children=new Array(n=children.length),i=n-1;i>=0;--i)nodes.push(child=node.children[i]=new TreeNode(children[i],i)),child.parent=node;return(tree.parent=new TreeNode(null,0)).children=[tree],tree}(root);if(t.eachAfter(firstWalk),t.parent.m=-t.z,t.eachBefore(secondWalk),nodeSize)root.eachBefore(sizeNode);else{var left=root,right=root,bottom=root;root.eachBefore((function(node){node.x<left.x&&(left=node),node.x>right.x&&(right=node),node.depth>bottom.depth&&(bottom=node)}));var s=left===right?1:separation(left,right)/2,tx=s-left.x,kx=dx/(right.x+s+tx),ky=dy/(bottom.depth||1);root.eachBefore((function(node){node.x=(node.x+tx)*kx,node.y=node.depth*ky}))}return root}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children){!function executeShifts(v){for(var w,shift=0,change=0,children=v.children,i=children.length;--i>=0;)(w=children[i]).z+=shift,w.m+=shift,shift+=w.s+(change+=w.c)}(v);var midpoint=(children[0].z+children[children.length-1].z)/2;w?(v.z=w.z+separation(v._,w._),v.m=v.z-midpoint):v.z=midpoint}else w&&(v.z=w.z+separation(v._,w._));v.parent.A=function apportion(v,w,ancestor){if(w){for(var shift,vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m;vim=nextRight(vim),vip=nextLeft(vip),vim&&vip;)vom=nextLeft(vom),(vop=nextRight(vop)).a=v,(shift=vim.z+sim-vip.z-sip+separation(vim._,vip._))>0&&(moveSubtree(nextAncestor(vim,v,ancestor),v,shift),sip+=shift,sop+=shift),sim+=vim.m,sip+=vip.m,som+=vom.m,sop+=vop.m;vim&&!nextRight(vop)&&(vop.t=vim,vop.m+=sim-sop),vip&&!nextLeft(vom)&&(vom.t=vip,vom.m+=sip-som,ancestor=v)}return ancestor}(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function sizeNode(node){node.x*=dx,node.y=node.depth*dy}return tree.separation=function(x){return arguments.length?(separation=x,tree):separation},tree.size=function(x){return arguments.length?(nodeSize=!1,dx=+x[0],dy=+x[1],tree):nodeSize?null:[dx,dy]},tree.nodeSize=function(x){return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],tree):nodeSize?[dx,dy]:null},tree},treemap:function index$1(){var tile=squarify,round=!1,dx=1,dy=1,paddingStack=[0],paddingInner=constantZero,paddingTop=constantZero,paddingRight=constantZero,paddingBottom=constantZero,paddingLeft=constantZero;function treemap(root){return root.x0=root.y0=0,root.x1=dx,root.y1=dy,root.eachBefore(positionNode),paddingStack=[0],round&&root.eachBefore(roundNode),root}function positionNode(node){var p=paddingStack[node.depth],x0=node.x0+p,y0=node.y0+p,x1=node.x1-p,y1=node.y1-p;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1,node.children&&(p=paddingStack[node.depth+1]=paddingInner(node)/2,x0+=paddingLeft(node)-p,y0+=paddingTop(node)-p,(x1-=paddingRight(node)-p)<x0&&(x0=x1=(x0+x1)/2),(y1-=paddingBottom(node)-p)<y0&&(y0=y1=(y0+y1)/2),tile(node,x0,y0,x1,y1))}return treemap.round=function(x){return arguments.length?(round=!!x,treemap):round},treemap.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],treemap):[dx,dy]},treemap.tile=function(x){return arguments.length?(tile=required(x),treemap):tile},treemap.padding=function(x){return arguments.length?treemap.paddingInner(x).paddingOuter(x):treemap.paddingInner()},treemap.paddingInner=function(x){return arguments.length?(paddingInner="function"==typeof x?x:constant$e(+x),treemap):paddingInner},treemap.paddingOuter=function(x){return arguments.length?treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):treemap.paddingTop()},treemap.paddingTop=function(x){return arguments.length?(paddingTop="function"==typeof x?x:constant$e(+x),treemap):paddingTop},treemap.paddingRight=function(x){return arguments.length?(paddingRight="function"==typeof x?x:constant$e(+x),treemap):paddingRight},treemap.paddingBottom=function(x){return arguments.length?(paddingBottom="function"==typeof x?x:constant$e(+x),treemap):paddingBottom},treemap.paddingLeft=function(x){return arguments.length?(paddingLeft="function"==typeof x?x:constant$e(+x),treemap):paddingLeft},treemap},treemapBinary:function binary(parent,x0,y0,x1,y1){var i,sum,nodes=parent.children,n=nodes.length,sums=new Array(n+1);for(sums[0]=sum=i=0;i<n;++i)sums[i+1]=sum+=nodes[i].value;!function partition(i,j,value,x0,y0,x1,y1){if(i>=j-1){var node=nodes[i];return node.x0=x0,node.y0=y0,node.x1=x1,void(node.y1=y1)}var valueOffset=sums[i],valueTarget=value/2+valueOffset,k=i+1,hi=j-1;for(;k<hi;){var mid=k+hi>>>1;sums[mid]<valueTarget?k=mid+1:hi=mid}valueTarget-sums[k-1]<sums[k]-valueTarget&&i+1<k&&--k;var valueLeft=sums[k]-valueOffset,valueRight=value-valueLeft;if(x1-x0>y1-y0){var xk=(x0*valueRight+x1*valueLeft)/value;partition(i,k,valueLeft,x0,y0,xk,y1),partition(k,j,valueRight,xk,y0,x1,y1)}else{var yk=(y0*valueRight+y1*valueLeft)/value;partition(i,k,valueLeft,x0,y0,x1,yk),partition(k,j,valueRight,x0,yk,x1,y1)}}(0,n,parent.value,x0,y0,x1,y1)},treemapDice:treemapDice,treemapSlice:treemapSlice,treemapSliceDice:function sliceDice(parent,x0,y0,x1,y1){(1&parent.depth?treemapSlice:treemapDice)(parent,x0,y0,x1,y1)},treemapSquarify:squarify,treemapResquarify:resquarify,interpolate:value$1,interpolateArray:array$3,interpolateBasis:basis$2,interpolateBasisClosed:basisClosed$1,interpolateDate:date$3,interpolateNumber:number$4,interpolateObject:object$2,interpolateRound:function round(a,b){return b-=a=+a,function(t){return Math.round(a+b*t)}},interpolateString:string$2,interpolateTransformCss:interpolateTransformCss$1,interpolateTransformSvg:interpolateTransformSvg$1,interpolateZoom:function zoom$1(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<1e-12)S=Math.log(w1/w0)/rho,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+4*d2)/(2*w0*2*d1),b1=(w1*w1-w0*w0-4*d2)/(2*w1*2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho,i=function(t){var s=t*S,coshr0=cosh(r0),u=w0/(2*d1)*(coshr0*function tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}(rho*s+r0)-function sinh(x){return((x=Math.exp(x))-1/x)/2}(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)]}}return i.duration=1e3*S,i},interpolateRgb:rgb$1,interpolateRgbBasis:rgbBasis,interpolateRgbBasisClosed:rgbBasisClosed,interpolateHsl:hsl$1,interpolateHslLong:hslLong,interpolateLab:function lab(start,end){var l=nogamma$2((start=lab$1(start)).l,(end=lab$1(end)).l),a=nogamma$2(start.a,end.a),b=nogamma$2(start.b,end.b),opacity=nogamma$2(start.opacity,end.opacity);return function(t){return start.l=l(t),start.a=a(t),start.b=b(t),start.opacity=opacity(t),start+""}},interpolateHcl:hcl$1,interpolateHclLong:hclLong,interpolateCubehelix:cubehelix$4,interpolateCubehelixLong:cubehelixLong$1,quantize:function quantize$1(interpolator,n){for(var samples=new Array(n),i=0;i<n;++i)samples[i]=interpolator(i/(n-1));return samples},path:path$1,polygonArea:function area$1(polygon){for(var a,i=-1,n=polygon.length,b=polygon[n-1],area=0;++i<n;)a=b,b=polygon[i],area+=a[1]*b[0]-a[0]*b[1];return area/2},polygonCentroid:function centroid(polygon){for(var a,c,i=-1,n=polygon.length,x=0,y=0,b=polygon[n-1],k=0;++i<n;)a=b,b=polygon[i],k+=c=a[0]*b[1]-b[0]*a[1],x+=(a[0]+b[0])*c,y+=(a[1]+b[1])*c;return[x/(k*=3),y/k]},polygonHull:function hull(points){if((n=points.length)<3)return null;var i,n,sortedPoints=new Array(n),flippedPoints=new Array(n);for(i=0;i<n;++i)sortedPoints[i]=[+points[i][0],+points[i][1],i];for(sortedPoints.sort(lexicographicOrder),i=0;i<n;++i)flippedPoints[i]=[sortedPoints[i][0],-sortedPoints[i][1]];var upperIndexes=computeUpperHullIndexes(sortedPoints),lowerIndexes=computeUpperHullIndexes(flippedPoints),skipLeft=lowerIndexes[0]===upperIndexes[0],skipRight=lowerIndexes[lowerIndexes.length-1]===upperIndexes[upperIndexes.length-1],hull=[];for(i=upperIndexes.length-1;i>=0;--i)hull.push(points[sortedPoints[upperIndexes[i]][2]]);for(i=+skipLeft;i<lowerIndexes.length-skipRight;++i)hull.push(points[sortedPoints[lowerIndexes[i]][2]]);return hull},polygonContains:function contains(polygon,point){for(var x1,y1,n=polygon.length,p=polygon[n-1],x=point[0],y=point[1],x0=p[0],y0=p[1],inside=!1,i=0;i<n;++i)x1=(p=polygon[i])[0],(y1=p[1])>y!=y0>y&&x<(x0-x1)*(y-y1)/(y0-y1)+x1&&(inside=!inside),x0=x1,y0=y1;return inside},polygonLength:function length(polygon){for(var xa,ya,i=-1,n=polygon.length,b=polygon[n-1],xb=b[0],yb=b[1],perimeter=0;++i<n;)xa=xb,ya=yb,xa-=xb=(b=polygon[i])[0],ya-=yb=b[1],perimeter+=Math.sqrt(xa*xa+ya*ya);return perimeter},quadtree:quadtree,queue:queue,randomUniform:uniform,randomNormal:normal,randomLogNormal:logNormal,randomBates:bates,randomIrwinHall:irwinHall,randomExponential:exponential$2,request:request,html:html,json:json,text:text,xml:xml,csv:csv,tsv:tsv,scaleBand:band,scalePoint:function point$a(){return pointish(band().paddingInner(1))},scaleIdentity:function identity$4(){var domain=[0,1];function scale(x){return+x}return scale.invert=scale,scale.domain=scale.range=function(_){return arguments.length?(domain=map$1.call(_,number$2),scale):domain.slice()},scale.copy=function(){return identity$4().domain(domain)},linearish(scale)},scaleLinear:linear$1,scaleLog:function log(){var scale=continuous(deinterpolate,reinterpolate).domain([1,10]),domain=scale.domain,base=10,logs=logp(10),pows=powp(10);function rescale(){return logs=logp(base),pows=powp(base),domain()[0]<0&&(logs=reflect(logs),pows=reflect(pows)),scale}return scale.base=function(_){return arguments.length?(base=+_,rescale()):base},scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.ticks=function(count){var r,d=domain(),u=d[0],v=d[d.length-1];(r=v<u)&&(i=u,u=v,v=i);var p,k,t,i=logs(u),j=logs(v),n=null==count?10:+count,z=[];if(!(base%1)&&j-i<n){if(i=Math.round(i)-1,j=Math.round(j)+1,u>0){for(;i<j;++i)for(k=1,p=pows(i);k<base;++k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}}else for(;i<j;++i)for(k=base-1,p=pows(i);k>=1;--k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}}else z=ticks(i,j,Math.min(j-i,n)).map(pows);return r?z.reverse():z},scale.tickFormat=function(count,specifier){if(null==specifier&&(specifier=10===base?".0e":","),"function"!=typeof specifier&&(specifier=format(specifier)),count===1/0)return specifier;null==count&&(count=10);var k=Math.max(1,base*count/scale.ticks().length);return function(d){var i=d/pows(Math.round(logs(d)));return i*base<base-.5&&(i*=base),i<=k?specifier(d):""}},scale.nice=function(){return domain(nice(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){return pows(Math.ceil(logs(x)))}}))},scale.copy=function(){return copy(scale,log().base(base))},scale},scaleOrdinal:ordinal,scaleImplicit:implicit,scalePow:pow,scaleSqrt:function sqrt$1(){return pow().exponent(.5)},scaleQuantile:function quantile(){var domain=[],range=[],thresholds=[];function rescale(){var i=0,n=Math.max(1,range.length);for(thresholds=new Array(n-1);++i<n;)thresholds[i-1]=threshold$1(domain,i/n);return scale}function scale(x){if(!isNaN(x=+x))return range[bisectRight(thresholds,x)]}return scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:[i>0?thresholds[i-1]:domain[0],i<thresholds.length?thresholds[i]:domain[domain.length-1]]},scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(var d,i=0,n=_.length;i<n;++i)null==(d=_[i])||isNaN(d=+d)||domain.push(d);return domain.sort(ascending$5),rescale()},scale.range=function(_){return arguments.length?(range=slice$1.call(_),rescale()):range.slice()},scale.quantiles=function(){return thresholds.slice()},scale.copy=function(){return quantile().domain(domain).range(range)},scale},scaleQuantize:function quantize(){var x0=0,x1=1,n=1,domain=[.5],range=[0,1];function scale(x){if(x<=x)return range[bisectRight(domain,x,0,n)]}function rescale(){var i=-1;for(domain=new Array(n);++i<n;)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);return scale}return scale.domain=function(_){return arguments.length?(x0=+_[0],x1=+_[1],rescale()):[x0,x1]},scale.range=function(_){return arguments.length?(n=(range=slice$1.call(_)).length-1,rescale()):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]]},scale.copy=function(){return quantize().domain([x0,x1]).range(range)},linearish(scale)},scaleThreshold:function threshold(){var domain=[.5],range=[0,1],n=1;function scale(x){if(x<=x)return range[bisectRight(domain,x,0,n)]}return scale.domain=function(_){return arguments.length?(domain=slice$1.call(_),n=Math.min(domain.length,range.length-1),scale):domain.slice()},scale.range=function(_){return arguments.length?(range=slice$1.call(_),n=Math.min(domain.length,range.length-1),scale):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return[domain[i-1],domain[i]]},scale.copy=function(){return threshold().domain(domain).range(range)},scale},scaleTime:function time(){return calendar(year$2,month$2,sunday$2,day$2,hour$2,minute$2,second$2,millisecond$2,timeFormat$1).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},scaleUtc:function utcTime(){return calendar(utcYear$2,utcMonth$2,utcSunday$2,utcDay$2,utcHour$2,utcMinute$2,second$2,millisecond$2,utcFormat$1).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},schemeCategory10:category10,schemeCategory20b:category20b,schemeCategory20c:category20c,schemeCategory20:category20,interpolateCubehelixDefault:cubehelix$1,interpolateRainbow:function rainbow$1(t){(t<0||t>1)&&(t-=Math.floor(t));var ts=Math.abs(t-.5);return rainbow.h=360*t-100,rainbow.s=1.5-1.5*ts,rainbow.l=.8-.9*ts,rainbow+""},interpolateWarm:warm,interpolateCool:cool,interpolateViridis:viridis,interpolateMagma:magma,interpolateInferno:inferno,interpolatePlasma:plasma,scaleSequential:function sequential(interpolator){var x0=0,x1=1,clamp=!1;function scale(x){var t=(x-x0)/(x1-x0);return interpolator(clamp?Math.max(0,Math.min(1,t)):t)}return scale.domain=function(_){return arguments.length?(x0=+_[0],x1=+_[1],scale):[x0,x1]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.copy=function(){return sequential(interpolator).domain([x0,x1]).clamp(clamp)},linearish(scale)},create:function create$2(name){return select$2(creator$3(name).call(document.documentElement))},creator:creator$3,local:local,matcher:matcher$4,mouse:function mouse$1(node){var event=sourceEvent$1();return event.changedTouches&&(event=event.changedTouches[0]),point$9(node,event)},namespace:namespace$3,namespaces:namespaces$3,clientPoint:point$9,select:select$2,selectAll:function selectAll(selector){return"string"==typeof selector?new Selection$5([document.querySelectorAll(selector)],[document.documentElement]):new Selection$5([null==selector?[]:selector],root$5)},selection:selection$1,selector:selector$3,selectorAll:selectorAll$3,style:styleValue$3,touch:function touch$1(node,touches,identifier){arguments.length<3&&(identifier=touches,touches=sourceEvent$1().changedTouches);for(var touch,i=0,n=touches?touches.length:0;i<n;++i)if((touch=touches[i]).identifier===identifier)return point$9(node,touch);return null},touches:function touches(node,touches){null==touches&&(touches=sourceEvent$1().touches);for(var i=0,n=touches?touches.length:0,points=new Array(n);i<n;++i)points[i]=point$9(node,touches[i]);return points},window:defaultView$3,get event(){return event$2},customEvent:function customEvent$1(event1,listener,that,args){var event0=event$2;event1.sourceEvent=event$2,event$2=event1;try{return listener.apply(that,args)}finally{event$2=event0}},arc:function arc$1(){var innerRadius=arcInnerRadius$1,outerRadius=arcOuterRadius$1,cornerRadius=constant$9(0),padRadius=null,startAngle=arcStartAngle$1,endAngle=arcEndAngle$1,padAngle=arcPadAngle$1,context=null;function arc(){var buffer,r,r0=+innerRadius.apply(this,arguments),r1=+outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)-halfPi$1,a1=endAngle.apply(this,arguments)-halfPi$1,da=abs(a1-a0),cw=a1>a0;if(context||(context=buffer=path()),r1<r0&&(r=r1,r1=r0,r0=r),r1>1e-12)if(da>tau$2-1e-12)context.moveTo(r1*cos(a0),r1*sin(a0)),context.arc(0,0,r1,a0,a1,!cw),r0>1e-12&&(context.moveTo(r0*cos(a1),r0*sin(a1)),context.arc(0,0,r0,a1,a0,cw));else{var t0,t1,a01=a0,a11=a1,a00=a0,a10=a1,da0=da,da1=da,ap=padAngle.apply(this,arguments)/2,rp=ap>1e-12&&(padRadius?+padRadius.apply(this,arguments):sqrt(r0*r0+r1*r1)),rc=min(abs(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0=rc,rc1=rc;if(rp>1e-12){var p0=asin$1(rp/r0*sin(ap)),p1=asin$1(rp/r1*sin(ap));(da0-=2*p0)>1e-12?(a00+=p0*=cw?1:-1,a10-=p0):(da0=0,a00=a10=(a0+a1)/2),(da1-=2*p1)>1e-12?(a01+=p1*=cw?1:-1,a11-=p1):(da1=0,a01=a11=(a0+a1)/2)}var x01=r1*cos(a01),y01=r1*sin(a01),x10=r0*cos(a10),y10=r0*sin(a10);if(rc>1e-12){var x11=r1*cos(a11),y11=r1*sin(a11),x00=r0*cos(a00),y00=r0*sin(a00);if(da<pi$1){var oc=da0>1e-12?function intersect$1(x0,y0,x1,y1,x2,y2,x3,y3){var x10=x1-x0,y10=y1-y0,x32=x3-x2,y32=y3-y2,t=(x32*(y0-y2)-y32*(x0-x2))/(y32*x10-x32*y10);return[x0+t*x10,y0+t*y10]}(x01,y01,x00,y00,x11,y11,x10,y10):[x10,y10],ax=x01-oc[0],ay=y01-oc[1],bx=x11-oc[0],by=y11-oc[1],kc=1/sin(function acos(x){return x>1?0:x<-1?pi$1:Math.acos(x)}((ax*bx+ay*by)/(sqrt(ax*ax+ay*ay)*sqrt(bx*bx+by*by)))/2),lc=sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=min(rc,(r0-lc)/(kc-1)),rc1=min(rc,(r1-lc)/(kc+1))}}da1>1e-12?rc1>1e-12?(t0=cornerTangents$1(x00,y00,x01,y01,r1,rc1,cw),t1=cornerTangents$1(x11,y11,x10,y10,r1,rc1,cw),context.moveTo(t0.cx+t0.x01,t0.cy+t0.y01),rc1<rc?context.arc(t0.cx,t0.cy,rc1,atan2(t0.y01,t0.x01),atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc1,atan2(t0.y01,t0.x01),atan2(t0.y11,t0.x11),!cw),context.arc(0,0,r1,atan2(t0.cy+t0.y11,t0.cx+t0.x11),atan2(t1.cy+t1.y11,t1.cx+t1.x11),!cw),context.arc(t1.cx,t1.cy,rc1,atan2(t1.y11,t1.x11),atan2(t1.y01,t1.x01),!cw))):(context.moveTo(x01,y01),context.arc(0,0,r1,a01,a11,!cw)):context.moveTo(x01,y01),r0>1e-12&&da0>1e-12?rc0>1e-12?(t0=cornerTangents$1(x10,y10,x11,y11,r0,-rc0,cw),t1=cornerTangents$1(x01,y01,x00,y00,r0,-rc0,cw),context.lineTo(t0.cx+t0.x01,t0.cy+t0.y01),rc0<rc?context.arc(t0.cx,t0.cy,rc0,atan2(t0.y01,t0.x01),atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc0,atan2(t0.y01,t0.x01),atan2(t0.y11,t0.x11),!cw),context.arc(0,0,r0,atan2(t0.cy+t0.y11,t0.cx+t0.x11),atan2(t1.cy+t1.y11,t1.cx+t1.x11),cw),context.arc(t1.cx,t1.cy,rc0,atan2(t1.y11,t1.x11),atan2(t1.y01,t1.x01),!cw))):context.arc(0,0,r0,a10,a00,cw):context.lineTo(x10,y10)}else context.moveTo(0,0);if(context.closePath(),buffer)return context=null,buffer+""||null}return arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-pi$1/2;return[cos(a)*r,sin(a)*r]},arc.innerRadius=function(_){return arguments.length?(innerRadius="function"==typeof _?_:constant$9(+_),arc):innerRadius},arc.outerRadius=function(_){return arguments.length?(outerRadius="function"==typeof _?_:constant$9(+_),arc):outerRadius},arc.cornerRadius=function(_){return arguments.length?(cornerRadius="function"==typeof _?_:constant$9(+_),arc):cornerRadius},arc.padRadius=function(_){return arguments.length?(padRadius=null==_?null:"function"==typeof _?_:constant$9(+_),arc):padRadius},arc.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:constant$9(+_),arc):startAngle},arc.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:constant$9(+_),arc):endAngle},arc.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:constant$9(+_),arc):padAngle},arc.context=function(_){return arguments.length?(context=null==_?null:_,arc):context},arc},area:area,line:line$1,pie:function pie(){var value=identity$3,sortValues=descending$1,sort=null,startAngle=constant$9(0),endAngle=constant$9(tau$2),padAngle=constant$9(0);function pie(data){var i,j,k,a1,v,n=data.length,sum=0,index=new Array(n),arcs=new Array(n),a0=+startAngle.apply(this,arguments),da=Math.min(tau$2,Math.max(-tau$2,endAngle.apply(this,arguments)-a0)),p=Math.min(Math.abs(da)/n,padAngle.apply(this,arguments)),pa=p*(da<0?-1:1);for(i=0;i<n;++i)(v=arcs[index[i]=i]=+value(data[i],i,data))>0&&(sum+=v);for(null!=sortValues?index.sort((function(i,j){return sortValues(arcs[i],arcs[j])})):null!=sort&&index.sort((function(i,j){return sort(data[i],data[j])})),i=0,k=sum?(da-n*pa)/sum:0;i<n;++i,a0=a1)j=index[i],a1=a0+((v=arcs[j])>0?v*k:0)+pa,arcs[j]={data:data[j],index:i,value:v,startAngle:a0,endAngle:a1,padAngle:p};return arcs}return pie.value=function(_){return arguments.length?(value="function"==typeof _?_:constant$9(+_),pie):value},pie.sortValues=function(_){return arguments.length?(sortValues=_,sort=null,pie):sortValues},pie.sort=function(_){return arguments.length?(sort=_,sortValues=null,pie):sort},pie.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:constant$9(+_),pie):startAngle},pie.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:constant$9(+_),pie):endAngle},pie.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:constant$9(+_),pie):padAngle},pie},areaRadial:areaRadial,radialArea:areaRadial,lineRadial:lineRadial$1,radialLine:lineRadial$1,pointRadial:pointRadial,linkHorizontal:function linkHorizontal(){return link(curveHorizontal)},linkVertical:function linkVertical(){return link(curveVertical)},linkRadial:function linkRadial(){var l=link(curveRadial);return l.angle=l.x,delete l.x,l.radius=l.y,delete l.y,l},symbol:function symbol(){var type=constant$9(circle),size=constant$9(64),context=null;function symbol(){var buffer;if(context||(context=buffer=path()),type.apply(this,arguments).draw(context,+size.apply(this,arguments)),buffer)return context=null,buffer+""||null}return symbol.type=function(_){return arguments.length?(type="function"==typeof _?_:constant$9(_),symbol):type},symbol.size=function(_){return arguments.length?(size="function"==typeof _?_:constant$9(+_),symbol):size},symbol.context=function(_){return arguments.length?(context=null==_?null:_,symbol):context},symbol},symbols:symbols,symbolCircle:circle,symbolCross:cross,symbolDiamond:diamond,symbolSquare:square,symbolStar:star,symbolTriangle:triangle,symbolWye:wye,curveBasisClosed:function basisClosed(context){return new BasisClosed(context)},curveBasisOpen:function basisOpen(context){return new BasisOpen(context)},curveBasis:function basis(context){return new Basis$1(context)},curveBundle:bundle,curveCardinalClosed:cardinalClosed,curveCardinalOpen:cardinalOpen,curveCardinal:cardinal,curveCatmullRomClosed:catmullRomClosed,curveCatmullRomOpen:catmullRomOpen,curveCatmullRom:catmullRom,curveLinearClosed:function linearClosed(context){return new LinearClosed(context)},curveLinear:curveLinear$1,curveMonotoneX:function monotoneX(context){return new MonotoneX$1(context)},curveMonotoneY:function monotoneY(context){return new MonotoneY(context)},curveNatural:function natural(context){return new Natural(context)},curveStep:function step(context){return new Step(context,.5)},curveStepAfter:function stepAfter(context){return new Step(context,1)},curveStepBefore:function stepBefore(context){return new Step(context,0)},stack:function stack(){var keys=constant$9([]),order=none$3,offset=none$4,value=stackValue;function stack(data){var i,oz,kz=keys.apply(this,arguments),m=data.length,n=kz.length,sz=new Array(n);for(i=0;i<n;++i){for(var sij,ki=kz[i],si=sz[i]=new Array(m),j=0;j<m;++j)si[j]=sij=[0,+value(data[j],ki,j,data)],sij.data=data[j];si.key=ki}for(i=0,oz=order(sz);i<n;++i)sz[oz[i]].index=i;return offset(sz,oz),sz}return stack.keys=function(_){return arguments.length?(keys="function"==typeof _?_:constant$9(slice.call(_)),stack):keys},stack.value=function(_){return arguments.length?(value="function"==typeof _?_:constant$9(+_),stack):value},stack.order=function(_){return arguments.length?(order=null==_?none$3:"function"==typeof _?_:constant$9(slice.call(_)),stack):order},stack.offset=function(_){return arguments.length?(offset=null==_?none$4:_,stack):offset},stack},stackOffsetExpand:function expand(series,order){if((n=series.length)>0){for(var i,n,y,j=0,m=series[0].length;j<m;++j){for(y=i=0;i<n;++i)y+=series[i][j][1]||0;if(y)for(i=0;i<n;++i)series[i][j][1]/=y}none$4(series,order)}},stackOffsetDiverging:function diverging(series,order){if((n=series.length)>1)for(var i,d,dy,yp,yn,n,j=0,m=series[order[0]].length;j<m;++j)for(yp=yn=0,i=0;i<n;++i)(dy=(d=series[order[i]][j])[1]-d[0])>=0?(d[0]=yp,d[1]=yp+=dy):dy<0?(d[1]=yn,d[0]=yn+=dy):d[0]=yp},stackOffsetNone:none$4,stackOffsetSilhouette:function silhouette(series,order){if((n=series.length)>0){for(var n,j=0,s0=series[order[0]],m=s0.length;j<m;++j){for(var i=0,y=0;i<n;++i)y+=series[i][j][1]||0;s0[j][1]+=s0[j][0]=-y/2}none$4(series,order)}},stackOffsetWiggle:function wiggle(series,order){if((n=series.length)>0&&(m=(s0=series[order[0]]).length)>0){for(var s0,m,n,y=0,j=1;j<m;++j){for(var i=0,s1=0,s2=0;i<n;++i){for(var si=series[order[i]],sij0=si[j][1]||0,s3=(sij0-(si[j-1][1]||0))/2,k=0;k<i;++k){var sk=series[order[k]];s3+=(sk[j][1]||0)-(sk[j-1][1]||0)}s1+=sij0,s2+=s3*sij0}s0[j-1][1]+=s0[j-1][0]=y,s1&&(y-=s2/s1)}s0[j-1][1]+=s0[j-1][0]=y,none$4(series,order)}},stackOrderAscending:ascending$3,stackOrderDescending:function descending(series){return ascending$3(series).reverse()},stackOrderInsideOut:function insideOut(series){var i,j,n=series.length,sums=series.map(sum),order=none$3(series).sort((function(a,b){return sums[b]-sums[a]})),top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i)j=order[i],top<bottom?(top+=sums[j],tops.push(j)):(bottom+=sums[j],bottoms.push(j));return bottoms.reverse().concat(tops)},stackOrderNone:none$3,stackOrderReverse:function reverse(series){return none$3(series).reverse()},timeInterval:newInterval$1,timeMillisecond:millisecond$1,timeMilliseconds:milliseconds,utcMillisecond:millisecond$1,utcMilliseconds:milliseconds,timeSecond:second$1,timeSeconds:seconds,utcSecond:second$1,utcSeconds:seconds,timeMinute:minute$1,timeMinutes:minutes,timeHour:hour$1,timeHours:hours,timeDay:day$1,timeDays:days,timeWeek:sunday$1,timeWeeks:sundays,timeSunday:sunday$1,timeSundays:sundays,timeMonday:monday$1,timeMondays:mondays,timeTuesday:tuesday$1,timeTuesdays:tuesdays,timeWednesday:wednesday$1,timeWednesdays:wednesdays,timeThursday:thursday$1,timeThursdays:thursdays,timeFriday:friday$1,timeFridays:fridays,timeSaturday:saturday$1,timeSaturdays:saturdays,timeMonth:month$1,timeMonths:months,timeYear:year$1,timeYears:years,utcMinute:utcMinute$1,utcMinutes:utcMinutes,utcHour:utcHour$1,utcHours:utcHours,utcDay:utcDay$1,utcDays:utcDays,utcWeek:utcSunday$1,utcWeeks:utcSundays,utcSunday:utcSunday$1,utcSundays:utcSundays,utcMonday:utcMonday$1,utcMondays:utcMondays,utcTuesday:utcTuesday$1,utcTuesdays:utcTuesdays,utcWednesday:utcWednesday$1,utcWednesdays:utcWednesdays,utcThursday:utcThursday$1,utcThursdays:utcThursdays,utcFriday:utcFriday$1,utcFridays:utcFridays,utcSaturday:utcSaturday$1,utcSaturdays:utcSaturdays,utcMonth:utcMonth$1,utcMonths:utcMonths,utcYear:utcYear$1,utcYears:utcYears,timeFormatDefaultLocale:defaultLocale,get timeFormat(){return timeFormat},get timeParse(){return timeParse},get utcFormat(){return utcFormat},get utcParse(){return utcParse},timeFormatLocale:formatLocale,isoFormat:formatIso,isoParse:parseIso,now:now$1,timer:timer$1,timerFlush:timerFlush$1,timeout:function timeout$2(callback,delay,time){var t=new Timer$1;return delay=null==delay?0:+delay,t.restart((function(elapsed){t.stop(),callback(elapsed+delay)}),delay,time),t},interval:function interval$1(callback,delay,time){var t=new Timer$1,total=delay;return null==delay?(t.restart(callback,delay,time),t):(delay=+delay,time=null==time?now$1():+time,t.restart((function tick(elapsed){elapsed+=total,t.restart(tick,total+=delay,time),callback(elapsed)}),delay,time),t)},transition:transition,active:function active(node,name){var schedule,i,schedules=node.__transition;if(schedules)for(i in name=null==name?null:name+"",schedules)if((schedule=schedules[i]).state>SCHEDULED$1&&schedule.name===name)return new Transition$1([[node]],root$3,name,+i);return null},interrupt:interrupt$1,voronoi:function voronoi(){var x=x$1,y=y$1,extent=null;function voronoi(data){return new Diagram(data.map((function(d,i){var s=[Math.round(x(d,i,data)/epsilon$1)*epsilon$1,Math.round(y(d,i,data)/epsilon$1)*epsilon$1];return s.index=i,s.data=d,s})),extent)}return voronoi.polygons=function(data){return voronoi(data).polygons()},voronoi.links=function(data){return voronoi(data).links()},voronoi.triangles=function(data){return voronoi(data).triangles()},voronoi.x=function(_){return arguments.length?(x="function"==typeof _?_:constant$6(+_),voronoi):x},voronoi.y=function(_){return arguments.length?(y="function"==typeof _?_:constant$6(+_),voronoi):y},voronoi.extent=function(_){return arguments.length?(extent=null==_?null:[[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]],voronoi):extent&&[[extent[0][0],extent[0][1]],[extent[1][0],extent[1][1]]]},voronoi.size=function(_){return arguments.length?(extent=null==_?null:[[0,0],[+_[0],+_[1]]],voronoi):extent&&[extent[1][0]-extent[0][0],extent[1][1]-extent[0][1]]},voronoi},zoom:function zoom(){var touchstarting,touchending,filter=defaultFilter$1,extent=defaultExtent,constrain=defaultConstrain,wheelDelta=defaultWheelDelta,touchable=defaultTouchable$1,scaleExtent=[0,1/0],translateExtent=[[-1/0,-1/0],[1/0,1/0]],duration=250,interpolate=interpolateZoom,gestures=[],listeners=dispatch$5("start","zoom","end"),touchDelay=500,wheelDelay=150,clickDistance2=0;function zoom(selection){selection.property("__zoom",defaultTransform).on("wheel.zoom",wheeled).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).filter(touchable).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function scale(transform,k){return(k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],k)))===transform.k?transform:new Transform(k,transform.x,transform.y)}function translate(transform,p0,p1){var x=p0[0]-p1[0]*transform.k,y=p0[1]-p1[1]*transform.k;return x===transform.x&&y===transform.y?transform:new Transform(transform.k,x,y)}function centroid(extent){return[(+extent[0][0]+ +extent[1][0])/2,(+extent[0][1]+ +extent[1][1])/2]}function schedule(transition,transform,center){transition.on("start.zoom",(function(){gesture(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){gesture(this,arguments).end()})).tween("zoom",(function(){var args=arguments,g=gesture(this,args),e=extent.apply(this,args),p=center||centroid(e),w=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),a=this.__zoom,b="function"==typeof transform?transform.apply(this,args):transform,i=interpolate(a.invert(p).concat(w/a.k),b.invert(p).concat(w/b.k));return function(t){if(1===t)t=b;else{var l=i(t),k=w/l[2];t=new Transform(k,p[0]-l[0]*k,p[1]-l[1]*k)}g.zoom(null,t)}}))}function gesture(that,args){for(var g,i=0,n=gestures.length;i<n;++i)if((g=gestures[i]).that===that)return g;return new Gesture(that,args)}function Gesture(that,args){this.that=that,this.args=args,this.index=-1,this.active=0,this.extent=extent.apply(that,args)}function wheeled(){if(filter.apply(this,arguments)){var g=gesture(this,arguments),t=this.__zoom,k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],t.k*Math.pow(2,wheelDelta.apply(this,arguments)))),p=mouse$3(this);if(g.wheel)g.mouse[0][0]===p[0]&&g.mouse[0][1]===p[1]||(g.mouse[1]=t.invert(g.mouse[0]=p)),clearTimeout(g.wheel);else{if(t.k===k)return;g.mouse=[p,t.invert(p)],interrupt(this),g.start()}noevent$1(),g.wheel=setTimeout((function wheelidled(){g.wheel=null,g.end()}),wheelDelay),g.zoom("mouse",constrain(translate(scale(t,k),g.mouse[0],g.mouse[1]),g.extent,translateExtent))}}function mousedowned(){if(!touchending&&filter.apply(this,arguments)){var g=gesture(this,arguments),v=select$4(event$4.view).on("mousemove.zoom",(function mousemoved(){if(noevent$1(),!g.moved){var dx=event$4.clientX-x0,dy=event$4.clientY-y0;g.moved=dx*dx+dy*dy>clickDistance2}g.zoom("mouse",constrain(translate(g.that.__zoom,g.mouse[0]=mouse$3(g.that),g.mouse[1]),g.extent,translateExtent))}),!0).on("mouseup.zoom",(function mouseupped(){v.on("mousemove.zoom mouseup.zoom",null),yesdrag$2(event$4.view,g.moved),noevent$1(),g.end()}),!0),p=mouse$3(this),x0=event$4.clientX,y0=event$4.clientY;dragDisable(event$4.view),nopropagation$1(),g.mouse=[p,this.__zoom.invert(p)],interrupt(this),g.start()}}function dblclicked(){if(filter.apply(this,arguments)){var t0=this.__zoom,p0=mouse$3(this),p1=t0.invert(p0),k1=t0.k*(event$4.shiftKey?.5:2),t1=constrain(translate(scale(t0,k1),p0,p1),extent.apply(this,arguments),translateExtent);noevent$1(),duration>0?select$4(this).transition().duration(duration).call(schedule,t1,p0):select$4(this).call(zoom.transform,t1)}}function touchstarted(){if(filter.apply(this,arguments)){var started,i,t,p,g=gesture(this,arguments),touches=event$4.changedTouches,n=touches.length;for(nopropagation$1(),i=0;i<n;++i)p=[p=touch$3(this,touches,(t=touches[i]).identifier),this.__zoom.invert(p),t.identifier],g.touch0?g.touch1||(g.touch1=p):(g.touch0=p,started=!0);if(touchstarting&&(touchstarting=clearTimeout(touchstarting),!g.touch1))return g.end(),void((p=select$4(this).on("dblclick.zoom"))&&p.apply(this,arguments));started&&(touchstarting=setTimeout((function(){touchstarting=null}),touchDelay),interrupt(this),g.start())}}function touchmoved(){var i,t,p,l,g=gesture(this,arguments),touches=event$4.changedTouches,n=touches.length;for(noevent$1(),touchstarting&&(touchstarting=clearTimeout(touchstarting)),i=0;i<n;++i)p=touch$3(this,touches,(t=touches[i]).identifier),g.touch0&&g.touch0[2]===t.identifier?g.touch0[0]=p:g.touch1&&g.touch1[2]===t.identifier&&(g.touch1[0]=p);if(t=g.that.__zoom,g.touch1){var p0=g.touch0[0],l0=g.touch0[1],p1=g.touch1[0],l1=g.touch1[1],dp=(dp=p1[0]-p0[0])*dp+(dp=p1[1]-p0[1])*dp,dl=(dl=l1[0]-l0[0])*dl+(dl=l1[1]-l0[1])*dl;t=scale(t,Math.sqrt(dp/dl)),p=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2]}else{if(!g.touch0)return;p=g.touch0[0],l=g.touch0[1]}g.zoom("touch",constrain(translate(t,p,l),g.extent,translateExtent))}function touchended(){var i,t,g=gesture(this,arguments),touches=event$4.changedTouches,n=touches.length;for(nopropagation$1(),touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),touchDelay),i=0;i<n;++i)t=touches[i],g.touch0&&g.touch0[2]===t.identifier?delete g.touch0:g.touch1&&g.touch1[2]===t.identifier&&delete g.touch1;g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0?g.touch0[1]=this.__zoom.invert(g.touch0[0]):g.end()}return zoom.transform=function(collection,transform){var selection=collection.selection?collection.selection():collection;selection.property("__zoom",defaultTransform),collection!==selection?schedule(collection,transform):selection.interrupt().each((function(){gesture(this,arguments).start().zoom(null,"function"==typeof transform?transform.apply(this,arguments):transform).end()}))},zoom.scaleBy=function(selection,k){zoom.scaleTo(selection,(function(){return this.__zoom.k*("function"==typeof k?k.apply(this,arguments):k)}))},zoom.scaleTo=function(selection,k){zoom.transform(selection,(function(){var e=extent.apply(this,arguments),t0=this.__zoom,p0=centroid(e),p1=t0.invert(p0),k1="function"==typeof k?k.apply(this,arguments):k;return constrain(translate(scale(t0,k1),p0,p1),e,translateExtent)}))},zoom.translateBy=function(selection,x,y){zoom.transform(selection,(function(){return constrain(this.__zoom.translate("function"==typeof x?x.apply(this,arguments):x,"function"==typeof y?y.apply(this,arguments):y),extent.apply(this,arguments),translateExtent)}))},zoom.translateTo=function(selection,x,y){zoom.transform(selection,(function(){var e=extent.apply(this,arguments),t=this.__zoom,p=centroid(e);return constrain(identity$1.translate(p[0],p[1]).scale(t.k).translate("function"==typeof x?-x.apply(this,arguments):-x,"function"==typeof y?-y.apply(this,arguments):-y),e,translateExtent)}))},Gesture.prototype={start:function(){return 1==++this.active&&(this.index=gestures.push(this)-1,this.emit("start")),this},zoom:function(key,transform){return this.mouse&&"mouse"!==key&&(this.mouse[1]=transform.invert(this.mouse[0])),this.touch0&&"touch"!==key&&(this.touch0[1]=transform.invert(this.touch0[0])),this.touch1&&"touch"!==key&&(this.touch1[1]=transform.invert(this.touch1[0])),this.that.__zoom=transform,this.emit("zoom"),this},end:function(){return 0==--this.active&&(gestures.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(type){customEvent$3(new ZoomEvent(zoom,type,this.that.__zoom),listeners.apply,listeners,[type,this.that,this.args])}},zoom.wheelDelta=function(_){return arguments.length?(wheelDelta="function"==typeof _?_:constant$5(+_),zoom):wheelDelta},zoom.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant$5(!!_),zoom):filter},zoom.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:constant$5(!!_),zoom):touchable},zoom.extent=function(_){return arguments.length?(extent="function"==typeof _?_:constant$5([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),zoom):extent},zoom.scaleExtent=function(_){return arguments.length?(scaleExtent[0]=+_[0],scaleExtent[1]=+_[1],zoom):[scaleExtent[0],scaleExtent[1]]},zoom.translateExtent=function(_){return arguments.length?(translateExtent[0][0]=+_[0][0],translateExtent[1][0]=+_[1][0],translateExtent[0][1]=+_[0][1],translateExtent[1][1]=+_[1][1],zoom):[[translateExtent[0][0],translateExtent[0][1]],[translateExtent[1][0],translateExtent[1][1]]]},zoom.constrain=function(_){return arguments.length?(constrain=_,zoom):constrain},zoom.duration=function(_){return arguments.length?(duration=+_,zoom):duration},zoom.interpolate=function(_){return arguments.length?(interpolate=_,zoom):interpolate},zoom.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?zoom:value},zoom.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,zoom):Math.sqrt(clickDistance2)},zoom},zoomTransform:transform,zoomIdentity:identity$1}),xhtml$1="http://www.w3.org/1999/xhtml",namespaces$1={svg:"http://www.w3.org/2000/svg",xhtml:xhtml$1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace$1(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces$1.hasOwnProperty(prefix)?{space:namespaces$1[prefix],local:name}:name}function creatorInherit$1(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml$1&&document.documentElement.namespaceURI===xhtml$1?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed$1(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator$1(name){var fullname=namespace$1(name);return(fullname.local?creatorFixed$1:creatorInherit$1)(fullname)}function none$1(){}function selector$1(selector){return null==selector?none$1:function(){return this.querySelector(selector)}}function empty$1(){return[]}function sparse$1(update){return new Array(update.length)}function EnterNode$1(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}EnterNode$1.prototype={constructor:EnterNode$1,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};var keyPrefix$1="$";function bindIndex$1(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode$1(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey$1(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue={},groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=keyPrefix$1+key.call(node,node.__data__,i,group),keyValue in nodeByKeyValue?exit[i]=node:nodeByKeyValue[keyValue]=node);for(i=0;i<dataLength;++i)(node=nodeByKeyValue[keyValue=keyPrefix$1+key.call(parent,data[i],i,data)])?(update[i]=node,node.__data__=data[i],nodeByKeyValue[keyValue]=null):enter[i]=new EnterNode$1(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue[keyValues[i]]===node&&(exit[i]=node)}function ascending$1(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function attrRemove$1(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$1(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$1(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS$1(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction$1(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS$1(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function defaultView$1(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove$1(name){return function(){this.style.removeProperty(name)}}function styleConstant$1(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction$1(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function propertyRemove$1(name){return function(){delete this[name]}}function propertyConstant$1(name,value){return function(){this[name]=value}}function propertyFunction$1(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray$1(string){return string.trim().split(/^|\s+/)}function classList$1(node){return node.classList||new ClassList$1(node)}function ClassList$1(node){this._node=node,this._names=classArray$1(node.getAttribute("class")||"")}function classedAdd$1(node,names){for(var list=classList$1(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove$1(node,names){for(var list=classList$1(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue$1(names){return function(){classedAdd$1(this,names)}}function classedFalse$1(names){return function(){classedRemove$1(this,names)}}function classedFunction$1(names,value){return function(){(value.apply(this,arguments)?classedAdd$1:classedRemove$1)(this,names)}}function textRemove$1(){this.textContent=""}function textConstant$1(value){return function(){this.textContent=value}}function textFunction$1(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove$1(){this.innerHTML=""}function htmlConstant$1(value){return function(){this.innerHTML=value}}function htmlFunction$1(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise$1(){this.nextSibling&&this.parentNode.appendChild(this)}function lower$1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull$1(){return null}function remove$1(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow$1(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function selection_cloneDeep$1(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}ClassList$1.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};var filterEvents$1={},event$1=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(filterEvents$1={mouseenter:"mouseover",mouseleave:"mouseout"}));function filterContextListener$1(listener,index,group){return listener=contextListener$1(listener,index,group),function(event){var related=event.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||listener.call(this,event)}}function contextListener$1(listener,index,group){return function(event1){var event0=event$1;event$1=event1;try{listener.call(this,this.__data__,index,group)}finally{event$1=event0}}}function onRemove$1(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?on.length=i:delete this.__on}}}function onAdd$1(typename,value,capture){var wrap=filterEvents$1.hasOwnProperty(typename.type)?filterContextListener$1:contextListener$1;return function(d,i,group){var o,on=this.__on,listener=wrap(value,i,group);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=listener,o.capture=capture),void(o.value=value);this.addEventListener(typename.type,listener,capture),o={type:typename.type,name:typename.name,value:value,listener:listener,capture:capture},on?on.push(o):this.__on=[o]}}function dispatchEvent$1(node,type,params){var window=defaultView$1(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant$1(type,params){return function(){return dispatchEvent$1(this,type,params)}}function dispatchFunction$1(type,params){return function(){return dispatchEvent$1(this,type,params.apply(this,arguments))}}var root$2=[null];function Selection$1(groups,parents){this._groups=groups,this._parents=parents}function select$1(selector){return"string"==typeof selector?new Selection$1([[document.querySelector(selector)]],[document.documentElement]):new Selection$1([[selector]],root$2)}Selection$1.prototype={constructor:Selection$1,select:function selection_select$1(select){"function"!=typeof select&&(select=selector$1(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection$1(subgroups,this._parents)},selectAll:function selection_selectAll$1(select){"function"!=typeof select&&(select=function selectorAll$1(selector){return null==selector?empty$1:function(){return this.querySelectorAll(selector)}}(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection$1(subgroups,parents)},filter:function selection_filter$1(match){"function"!=typeof match&&(match=function matcher$1(selector){return function(){return this.matches(selector)}}(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection$1(subgroups,this._parents)},data:function selection_data$1(value,key){if(!value)return data=new Array(this.size()),j=-1,this.each((function(d){data[++j]=d})),data;var bind=key?bindKey$1:bindIndex$1,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=function constant$4(x){return function(){return x}}(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=value.call(parent,parent&&parent.__data__,j,parents),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength);bind(parent,group,enterGroup,updateGroup,exit[j]=new Array(groupLength),data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection$1(update,parents))._enter=enter,update._exit=exit,update},enter:function selection_enter$1(){return new Selection$1(this._enter||this._groups.map(sparse$1),this._parents)},exit:function selection_exit$1(){return new Selection$1(this._exit||this._groups.map(sparse$1),this._parents)},join:function selection_join$1(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return enter="function"==typeof onenter?onenter(enter):enter.append(onenter+""),null!=onupdate&&(update=onupdate(update)),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function selection_merge$1(selection){for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection$1(merges,this._parents)},order:function selection_order$1(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function selection_sort$1(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending$1);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection$1(sortgroups,this._parents).order()},call:function selection_call$1(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function selection_nodes$1(){var nodes=new Array(this.size()),i=-1;return this.each((function(){nodes[++i]=this})),nodes},node:function selection_node$1(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function selection_size$1(){var size=0;return this.each((function(){++size})),size},empty:function selection_empty$1(){return!this.node()},each:function selection_each$1(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function selection_attr$1(name,value){var fullname=namespace$1(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS$1:attrRemove$1:"function"==typeof value?fullname.local?attrFunctionNS$1:attrFunction$1:fullname.local?attrConstantNS$1:attrConstant$1)(fullname,value))},style:function selection_style$1(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove$1:"function"==typeof value?styleFunction$1:styleConstant$1)(name,value,null==priority?"":priority)):function styleValue$1(node,name){return node.style.getPropertyValue(name)||defaultView$1(node).getComputedStyle(node,null).getPropertyValue(name)}(this.node(),name)},property:function selection_property$1(name,value){return arguments.length>1?this.each((null==value?propertyRemove$1:"function"==typeof value?propertyFunction$1:propertyConstant$1)(name,value)):this.node()[name]},classed:function selection_classed$1(name,value){var names=classArray$1(name+"");if(arguments.length<2){for(var list=classList$1(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction$1:value?classedTrue$1:classedFalse$1)(names,value))},text:function selection_text$1(value){return arguments.length?this.each(null==value?textRemove$1:("function"==typeof value?textFunction$1:textConstant$1)(value)):this.node().textContent},html:function selection_html$1(value){return arguments.length?this.each(null==value?htmlRemove$1:("function"==typeof value?htmlFunction$1:htmlConstant$1)(value)):this.node().innerHTML},raise:function selection_raise$1(){return this.each(raise$1)},lower:function selection_lower$1(){return this.each(lower$1)},append:function selection_append$1(name){var create="function"==typeof name?name:creator$1(name);return this.select((function(){return this.appendChild(create.apply(this,arguments))}))},insert:function selection_insert$1(name,before){var create="function"==typeof name?name:creator$1(name),select=null==before?constantNull$1:"function"==typeof before?before:selector$1(before);return this.select((function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function selection_remove$1(){return this.each(remove$1)},clone:function selection_clone$1(deep){return this.select(deep?selection_cloneDeep$1:selection_cloneShallow$1)},datum:function selection_datum$1(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function selection_on$1(typename,value,capture){var i,t,typenames=function parseTypenames$3(typenames){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name:name}}))}(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd$1:onRemove$1,null==capture&&(capture=!1),i=0;i<n;++i)this.each(on(typenames[i],value,capture));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function selection_dispatch$1(type,params){return this.each(("function"==typeof params?dispatchFunction$1:dispatchConstant$1)(type,params))}};var nextId$1=0;function Local$1(){this._="@"+(++nextId$1).toString(36)}Local$1.prototype={constructor:Local$1,get:function(node){for(var id=this._;!(id in node);)if(!(node=node.parentNode))return;return node[id]},set:function(node,value){return node[this._]=value},remove:function(node){return this._ in node&&delete node[this._]},toString:function(){return this._}};var noop$2={value:function(){}};function dispatch$1(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch$1(_)}function Dispatch$1(_){this._=_}function get$3(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set$1(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop$2,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch$1.prototype=dispatch$1.prototype={constructor:Dispatch$1,on:function(typename,callback){var t,_=this._,T=function parseTypenames$2(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}}))}(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set$1(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set$1(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get$3(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch$1(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces.hasOwnProperty(prefix)?{space:namespaces[prefix],local:name}:name}function creatorInherit(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document.documentElement.namespaceURI===xhtml?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator(name){var fullname=namespace(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)}function none(){}function selector(selector){return null==selector?none:function(){return this.querySelector(selector)}}function empty(){return[]}function sparse(update){return new Array(update.length)}function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}EnterNode.prototype={constructor:EnterNode,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};var keyPrefix="$";function bindIndex(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue={},groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=keyPrefix+key.call(node,node.__data__,i,group),keyValue in nodeByKeyValue?exit[i]=node:nodeByKeyValue[keyValue]=node);for(i=0;i<dataLength;++i)(node=nodeByKeyValue[keyValue=keyPrefix+key.call(parent,data[i],i,data)])?(update[i]=node,node.__data__=data[i],nodeByKeyValue[keyValue]=null):enter[i]=new EnterNode(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue[keyValues[i]]===node&&(exit[i]=node)}function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function defaultView(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value){return function(){this[name]=value}}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray(string){return string.trim().split(/^|\s+/)}function classList(node){return node.classList||new ClassList(node)}function ClassList(node){this._node=node,this._names=classArray(node.getAttribute("class")||"")}function classedAdd(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}function textRemove(){this.textContent=""}function textConstant(value){return function(){this.textContent=value}}function textFunction(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove(){this.innerHTML=""}function htmlConstant(value){return function(){this.innerHTML=value}}function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull(){return null}function remove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow(){var clone=this.cloneNode(!1),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep(){var clone=this.cloneNode(!0),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}ClassList.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};var filterEvents={},event=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(filterEvents={mouseenter:"mouseover",mouseleave:"mouseout"}));function filterContextListener(listener,index,group){return listener=contextListener(listener,index,group),function(event){var related=event.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||listener.call(this,event)}}function contextListener(listener,index,group){return function(event1){var event0=event;event=event1;try{listener.call(this,this.__data__,index,group)}finally{event=event0}}}function onRemove(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?on.length=i:delete this.__on}}}function onAdd(typename,value,capture){var wrap=filterEvents.hasOwnProperty(typename.type)?filterContextListener:contextListener;return function(d,i,group){var o,on=this.__on,listener=wrap(value,i,group);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=listener,o.capture=capture),void(o.value=value);this.addEventListener(typename.type,listener,capture),o={type:typename.type,name:typename.name,value:value,listener:listener,capture:capture},on?on.push(o):this.__on=[o]}}function customEvent(event1,listener,that,args){var event0=event;event1.sourceEvent=event,event=event1;try{return listener.apply(that,args)}finally{event=event0}}function dispatchEvent(node,type,params){var window=defaultView(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params)}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments))}}var root$1=[null];function Selection(groups,parents){this._groups=groups,this._parents=parents}function select(selector){return"string"==typeof selector?new Selection([[document.querySelector(selector)]],[document.documentElement]):new Selection([[selector]],root$1)}Selection.prototype={constructor:Selection,select:function selection_select(select){"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection(subgroups,this._parents)},selectAll:function selection_selectAll(select){"function"!=typeof select&&(select=function selectorAll(selector){return null==selector?empty:function(){return this.querySelectorAll(selector)}}(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection(subgroups,parents)},filter:function selection_filter(match){"function"!=typeof match&&(match=function matcher(selector){return function(){return this.matches(selector)}}(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection(subgroups,this._parents)},data:function selection_data(value,key){if(!value)return data=new Array(this.size()),j=-1,this.each((function(d){data[++j]=d})),data;var bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=function constant$3(x){return function(){return x}}(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=value.call(parent,parent&&parent.__data__,j,parents),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength);bind(parent,group,enterGroup,updateGroup,exit[j]=new Array(groupLength),data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection(update,parents))._enter=enter,update._exit=exit,update},enter:function selection_enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents)},exit:function selection_exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents)},join:function selection_join(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return enter="function"==typeof onenter?onenter(enter):enter.append(onenter+""),null!=onupdate&&(update=onupdate(update)),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function selection_merge(selection){for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection(merges,this._parents)},order:function selection_order(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function selection_sort(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection(sortgroups,this._parents).order()},call:function selection_call(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function selection_nodes(){var nodes=new Array(this.size()),i=-1;return this.each((function(){nodes[++i]=this})),nodes},node:function selection_node(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function selection_size(){var size=0;return this.each((function(){++size})),size},empty:function selection_empty(){return!this.node()},each:function selection_each(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function selection_attr(name,value){var fullname=namespace(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS:attrRemove:"function"==typeof value?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value))},style:function selection_style(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove:"function"==typeof value?styleFunction:styleConstant)(name,value,null==priority?"":priority)):function styleValue(node,name){return node.style.getPropertyValue(name)||defaultView(node).getComputedStyle(node,null).getPropertyValue(name)}(this.node(),name)},property:function selection_property(name,value){return arguments.length>1?this.each((null==value?propertyRemove:"function"==typeof value?propertyFunction:propertyConstant)(name,value)):this.node()[name]},classed:function selection_classed(name,value){var names=classArray(name+"");if(arguments.length<2){for(var list=classList(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction:value?classedTrue:classedFalse)(names,value))},text:function selection_text(value){return arguments.length?this.each(null==value?textRemove:("function"==typeof value?textFunction:textConstant)(value)):this.node().textContent},html:function selection_html(value){return arguments.length?this.each(null==value?htmlRemove:("function"==typeof value?htmlFunction:htmlConstant)(value)):this.node().innerHTML},raise:function selection_raise(){return this.each(raise)},lower:function selection_lower(){return this.each(lower)},append:function selection_append(name){var create="function"==typeof name?name:creator(name);return this.select((function(){return this.appendChild(create.apply(this,arguments))}))},insert:function selection_insert(name,before){var create="function"==typeof name?name:creator(name),select=null==before?constantNull:"function"==typeof before?before:selector(before);return this.select((function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function selection_remove(){return this.each(remove)},clone:function selection_clone(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)},datum:function selection_datum(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function selection_on(typename,value,capture){var i,t,typenames=function parseTypenames$1(typenames){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name:name}}))}(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd:onRemove,null==capture&&(capture=!1),i=0;i<n;++i)this.each(on(typenames[i],value,capture));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function selection_dispatch(type,params){return this.each(("function"==typeof params?dispatchFunction:dispatchConstant)(type,params))}};var nextId=0;function Local(){this._="@"+(++nextId).toString(36)}function sourceEvent(){for(var source,current=event;source=current.sourceEvent;)current=source;return current}function point$4(node,event){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,point.y=event.clientY,[(point=point.matrixTransform(node.getScreenCTM().inverse())).x,point.y]}var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}function mouse(node){var event=sourceEvent();return event.changedTouches&&(event=event.changedTouches[0]),point$4(node,event)}function touch(node,touches,identifier){arguments.length<3&&(identifier=touches,touches=sourceEvent().changedTouches);for(var touch,i=0,n=touches?touches.length:0;i<n;++i)if((touch=touches[i]).identifier===identifier)return point$4(node,touch);return null}function nopropagation(){event.stopImmediatePropagation()}function noevent(){event.preventDefault(),event.stopImmediatePropagation()}function constant$2(x){return function(){return x}}function DragEvent(target,type,subject,id,active,x,y,dx,dy,dispatch){this.target=target,this.type=type,this.subject=subject,this.identifier=id,this.active=active,this.x=x,this.y=y,this.dx=dx,this.dy=dy,this._=dispatch}function defaultFilter(){return!event.button}function defaultContainer(){return this.parentNode}function defaultSubject(d){return null==d?{x:event.x,y:event.y}:d}function defaultTouchable(){return"ontouchstart"in this}function drag(){var mousedownx,mousedowny,mousemoving,touchending,filter=defaultFilter,container=defaultContainer,subject=defaultSubject,touchable=defaultTouchable,gestures={},listeners=dispatch$1("start","drag","end"),active=0,clickDistance2=0;function drag(selection){selection.on("mousedown.drag",mousedowned).filter(touchable).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved).on("touchend.drag touchcancel.drag",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function mousedowned(){if(!touchending&&filter.apply(this,arguments)){var gesture=beforestart("mouse",container.apply(this,arguments),mouse,this,arguments);gesture&&(select(event.view).on("mousemove.drag",mousemoved,!0).on("mouseup.drag",mouseupped,!0),function nodrag(view){var root=view.document.documentElement,selection=select(view).on("dragstart.drag",noevent,!0);"onselectstart"in root?selection.on("selectstart.drag",noevent,!0):(root.__noselect=root.style.MozUserSelect,root.style.MozUserSelect="none")}(event.view),nopropagation(),mousemoving=!1,mousedownx=event.clientX,mousedowny=event.clientY,gesture("start"))}}function mousemoved(){if(noevent(),!mousemoving){var dx=event.clientX-mousedownx,dy=event.clientY-mousedowny;mousemoving=dx*dx+dy*dy>clickDistance2}gestures.mouse("drag")}function mouseupped(){select(event.view).on("mousemove.drag mouseup.drag",null),function yesdrag(view,noclick){var root=view.document.documentElement,selection=select(view).on("dragstart.drag",null);noclick&&(selection.on("click.drag",noevent,!0),setTimeout((function(){selection.on("click.drag",null)}),0)),"onselectstart"in root?selection.on("selectstart.drag",null):(root.style.MozUserSelect=root.__noselect,delete root.__noselect)}(event.view,mousemoving),noevent(),gestures.mouse("end")}function touchstarted(){if(filter.apply(this,arguments)){var i,gesture,touches=event.changedTouches,c=container.apply(this,arguments),n=touches.length;for(i=0;i<n;++i)(gesture=beforestart(touches[i].identifier,c,touch,this,arguments))&&(nopropagation(),gesture("start"))}}function touchmoved(){var i,gesture,touches=event.changedTouches,n=touches.length;for(i=0;i<n;++i)(gesture=gestures[touches[i].identifier])&&(noevent(),gesture("drag"))}function touchended(){var i,gesture,touches=event.changedTouches,n=touches.length;for(touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),500),i=0;i<n;++i)(gesture=gestures[touches[i].identifier])&&(nopropagation(),gesture("end"))}function beforestart(id,container,point,that,args){var s,dx,dy,p=point(container,id),sublisteners=listeners.copy();if(customEvent(new DragEvent(drag,"beforestart",s,id,active,p[0],p[1],0,0,sublisteners),(function(){return null!=(event.subject=s=subject.apply(that,args))&&(dx=s.x-p[0]||0,dy=s.y-p[1]||0,!0)})))return function gesture(type){var n,p0=p;switch(type){case"start":gestures[id]=gesture,n=active++;break;case"end":delete gestures[id],--active;case"drag":p=point(container,id),n=active}customEvent(new DragEvent(drag,type,s,id,n,p[0]+dx,p[1]+dy,p[0]-p0[0],p[1]-p0[1],sublisteners),sublisteners.apply,sublisteners,[type,that,args])}}return drag.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant$2(!!_),drag):filter},drag.container=function(_){return arguments.length?(container="function"==typeof _?_:constant$2(_),drag):container},drag.subject=function(_){return arguments.length?(subject="function"==typeof _?_:constant$2(_),drag):subject},drag.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:constant$2(!!_),drag):touchable},drag.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?drag:value},drag.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,drag):Math.sqrt(clickDistance2)},drag}function constant$1(x){return function constant(){return x}}Local.prototype={constructor:Local,get:function(node){for(var id=this._;!(id in node);)if(!(node=node.parentNode))return;return node[id]},set:function(node,value){return node[this._]=value},remove:function(node){return this._ in node&&delete node[this._]},toString:function(){return this._}},DragEvent.prototype.on=function(){var value=this._.on.apply(this._,arguments);return value===this._?this:value};var pi=Math.PI,halfPi=pi/2,tau=2*pi;function arcInnerRadius(d){return d.innerRadius}function arcOuterRadius(d){return d.outerRadius}function arcStartAngle(d){return d.startAngle}function arcEndAngle(d){return d.endAngle}function arcPadAngle(d){return d&&d.padAngle}function asin(x){return x>=1?halfPi:x<=-1?-halfPi:Math.asin(x)}function cornerTangents(x0,y0,x1,y1,r1,rc,cw){var x01=x0-x1,y01=y0-y1,lo=(cw?rc:-rc)/Math.sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d2=dx*dx+dy*dy,r=r1-rc,D=x11*y10-x10*y11,d=(dy<0?-1:1)*Math.sqrt(Math.max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;return dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1&&(cx0=cx1,cy0=cy1),{cx:cx0,cy:cy0,x01:-ox,y01:-oy,x11:cx0*(r1/r-1),y11:cy0*(r1/r-1)}}function Linear(context){this._context=context}function curveLinear(context){return new Linear(context)}function x(p){return p[0]}function y(p){return p[1]}function noop$1(){}function point$3(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6)}function Basis(context){this._context=context}function Bundle(context,beta){this._basis=new Basis(context),this._beta=beta}function point$2(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal(context,tension){this._context=context,this._k=(1-tension)/6}function CardinalClosed(context,tension){this._context=context,this._k=(1-tension)/6}function CardinalOpen(context,tension){this._context=context,this._k=(1-tension)/6}function point$1(that,x,y){var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>1e-12){var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n,y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n}if(that._l23_a>1e-12){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m,y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m}that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom(context,alpha){this._context=context,this._alpha=alpha}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._context.lineTo(x,y)}}},Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$3(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}},Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0)for(var t,x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1;++i<=j;)t=i/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x=this._y=null,this._basis.lineEnd()},point:function(x,y){this._x.push(+x),this._y.push(+y)}},function custom(beta){function bundle(context){return 1===beta?new Basis(context):new Bundle(context,beta)}return bundle.beta=function(beta){return custom(+beta)},bundle}(.85),Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$2(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2,this._x1=x,this._y1=y;break;case 2:this._point=3;default:point$2(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}},function custom(tension){function cardinal(context){return new Cardinal(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0),CardinalClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:point$2(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}},function custom(tension){function cardinal(context){return new CardinalClosed(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0),CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}},function custom(tension){function cardinal(context){return new CardinalOpen(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0),CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;default:point$1(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var curveCatmullRom=function custom(alpha){function catmullRom(context){return alpha?new CatmullRom(context,alpha):new Cardinal(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function CatmullRomClosed(context,alpha){this._context=context,this._alpha=alpha}function CatmullRomOpen(context,alpha){this._context=context,this._alpha=alpha}function sign(x){return x<0?-1:1}function slope3(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);return(sign(s0)+sign(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}function slope2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function point(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX(context){this._context=context}CatmullRomClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:point$1(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}},function custom(alpha){function catmullRom(context){return alpha?new CatmullRomClosed(context,alpha):new CardinalClosed(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5),CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$1(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}},function custom(alpha){function catmullRom(context){return alpha?new CatmullRomOpen(context,alpha):new CardinalOpen(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5),MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){var t1=NaN;if(y=+y,(x=+x)!==this._x1||y!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,point(this,slope2(this,t1=slope3(this,x,y)),t1);break;default:point(this,this._t0,t1=slope3(this,x,y))}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y,this._t0=t1}}},Object.create(MonotoneX.prototype).point=function(x,y){MonotoneX.prototype.point.call(this,y,x)};var noop={value:function(){}};function dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _)throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function get$2(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}}))}(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get$2(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extends$1=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},get$1=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},inherits$1=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call},Annotation=function(){function Annotation(_ref){var _ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,nx=_ref.nx,ny=_ref.ny,_ref$dy=_ref.dy,dy=void 0===_ref$dy?0:_ref$dy,_ref$dx=_ref.dx,dx=void 0===_ref$dx?0:_ref$dx,_ref$color=_ref.color,color=void 0===_ref$color?"grey":_ref$color,data=_ref.data,type=_ref.type,subject=_ref.subject,connector=_ref.connector,note=_ref.note,disable=_ref.disable,id=_ref.id,className=_ref.className;classCallCheck(this,Annotation),this._dx=void 0!==nx?nx-x:dx,this._dy=void 0!==ny?ny-y:dy,this._x=x,this._y=y,this._color=color,this.id=id,this._className=className||"",this._type=type||"",this.data=data,this.note=note||{},this.connector=connector||{},this.subject=subject||{},this.disable=disable||[]}return createClass(Annotation,[{key:"updatePosition",value:function updatePosition(){this.type.setPosition&&(this.type.setPosition(),this.type.subject&&0!==this.type.subject.selectAll(":not(.handle)").nodes().length&&this.type.redrawSubject())}},{key:"clearComponents",value:function clearComponents(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function updateOffset(){this.type.setOffset&&(this.type.setOffset(),0!==this.type.connector.selectAll(":not(.handle)").nodes().length&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function get$$1(){return this._className},set:function set$$1(className){this._className=className,this.type.setClassName&&this.type.setClassName()}},{key:"type",get:function get$$1(){return this._type},set:function set$$1(type){this._type=type,this.clearComponents()}},{key:"x",get:function get$$1(){return this._x},set:function set$$1(x){this._x=x,this.updatePosition()}},{key:"y",get:function get$$1(){return this._y},set:function set$$1(y){this._y=y,this.updatePosition()}},{key:"color",get:function get$$1(){return this._color},set:function set$$1(color){this._color=color,this.updatePosition()}},{key:"dx",get:function get$$1(){return this._dx},set:function set$$1(dx){this._dx=dx,this.updateOffset()}},{key:"dy",get:function get$$1(){return this._dy},set:function set$$1(dy){this._dy=dy,this.updateOffset()}},{key:"nx",set:function set$$1(nx){this._dx=nx-this._x,this.updateOffset()}},{key:"ny",set:function set$$1(ny){this._dy=ny-this._y,this.updateOffset()}},{key:"offset",get:function get$$1(){return{x:this._dx,y:this._dy}},set:function set$$1(_ref2){var x=_ref2.x,y=_ref2.y;this._dx=x,this._dy=y,this.updateOffset()}},{key:"position",get:function get$$1(){return{x:this._x,y:this._y}},set:function set$$1(_ref3){var x=_ref3.x,y=_ref3.y;this._x=x,this._y=y,this.updatePosition()}},{key:"translation",get:function get$$1(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function get$$1(){var json={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(json.data=this.data),this.type&&(json.type=this.type),this._className&&(json.className=this._className),Object.keys(this.connector).length>0&&(json.connector=this.connector),Object.keys(this.subject).length>0&&(json.subject=this.subject),Object.keys(this.note).length>0&&(json.note=this.note),json}}]),Annotation}(),AnnotationCollection=function(){function AnnotationCollection(_ref){var annotations=_ref.annotations,accessors=_ref.accessors,accessorsInverse=_ref.accessorsInverse;classCallCheck(this,AnnotationCollection),this.accessors=accessors,this.accessorsInverse=accessorsInverse,this.annotations=annotations}return createClass(AnnotationCollection,[{key:"clearTypes",value:function clearTypes(newSettings){this.annotations.forEach((function(d){d.type=void 0,d.subject=newSettings&&newSettings.subject||d.subject,d.connector=newSettings&&newSettings.connector||d.connector,d.note=newSettings&&newSettings.note||d.note}))}},{key:"setPositionWithAccessors",value:function setPositionWithAccessors(){var _this=this;this.annotations.forEach((function(d){d.type.setPositionWithAccessors(_this.accessors)}))}},{key:"editMode",value:function editMode(_editMode){this.annotations.forEach((function(a){a.type&&(a.type.editMode=_editMode,a.type.updateEditMode())}))}},{key:"updateDisable",value:function updateDisable(disable){this.annotations.forEach((function(a){a.disable=disable,a.type&&disable.forEach((function(d){a.type[d]&&(a.type[d].remove&&a.type[d].remove(),a.type[d]=void 0)}))}))}},{key:"updateTextWrap",value:function updateTextWrap(textWrap){this.annotations.forEach((function(a){a.type&&a.type.updateTextWrap&&a.type.updateTextWrap(textWrap)}))}},{key:"updateText",value:function updateText(){this.annotations.forEach((function(a){a.type&&a.type.drawText&&a.type.drawText()}))}},{key:"updateNotePadding",value:function updateNotePadding(notePadding){this.annotations.forEach((function(a){a.type&&(a.type.notePadding=notePadding)}))}},{key:"json",get:function get$$1(){var _this2=this;return this.annotations.map((function(a){var json=a.json;return _this2.accessorsInverse&&a.data&&(json.data={},Object.keys(_this2.accessorsInverse).forEach((function(k){json.data[k]=_this2.accessorsInverse[k]({x:a.x,y:a.y})}))),json}))}},{key:"noteNodes",get:function get$$1(){return this.annotations.map((function(a){return _extends$1({},a.type.getNoteBBoxOffset(),{positionX:a.x,positionY:a.y})}))}}]),AnnotationCollection}(),leftRightDynamic=function leftRightDynamic(align,y){return"dynamic"!==align&&"left"!==align&&"right"!==align||(align=y<0?"top":"bottom"),align},topBottomDynamic=function topBottomDynamic(align,x){return"dynamic"!==align&&"top"!==align&&"bottom"!==align||(align=x<0?"right":"left"),align},orientationTopBottom=["topBottom","top","bottom"],orientationLeftRight=["leftRight","left","right"],lineBuilder=function lineBuilder(_ref){var data=_ref.data,_ref$curve=_ref.curve,curve=void 0===_ref$curve?curveLinear:_ref$curve,canvasContext=_ref.canvasContext,className=_ref.className,classID=_ref.classID,lineGen=function line(){var x$1=x,y$1=y,defined=constant$1(!0),context=null,curve=curveLinear,output=null;function line(data){var i,d,buffer,n=data.length,defined0=!1;for(null==context&&(output=curve(buffer=path$2())),i=0;i<=n;++i)!(i<n&&defined(d=data[i],i,data))===defined0&&((defined0=!defined0)?output.lineStart():output.lineEnd()),defined0&&output.point(+x$1(d,i,data),+y$1(d,i,data));if(buffer)return output=null,buffer+""||null}return line.x=function(_){return arguments.length?(x$1="function"==typeof _?_:constant$1(+_),line):x$1},line.y=function(_){return arguments.length?(y$1="function"==typeof _?_:constant$1(+_),line):y$1},line.defined=function(_){return arguments.length?(defined="function"==typeof _?_:constant$1(!!_),line):defined},line.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),line):curve},line.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),line):context},line}().curve(curve),builder={type:"path",className:className,classID:classID,data:data};return canvasContext?(lineGen.context(canvasContext),builder.pathMethods=lineGen):builder.attrs={d:lineGen(data)},builder},arcBuilder=function arcBuilder(_ref2){var data=_ref2.data,canvasContext=_ref2.canvasContext,builder={type:"path",className:_ref2.className,classID:_ref2.classID,data:data},arcShape=function arc(){var innerRadius=arcInnerRadius,outerRadius=arcOuterRadius,cornerRadius=constant$1(0),padRadius=null,startAngle=arcStartAngle,endAngle=arcEndAngle,padAngle=arcPadAngle,context=null;function arc(){var buffer,r,r0=+innerRadius.apply(this,arguments),r1=+outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)-halfPi,a1=endAngle.apply(this,arguments)-halfPi,da=Math.abs(a1-a0),cw=a1>a0;if(context||(context=buffer=path$2()),r1<r0&&(r=r1,r1=r0,r0=r),r1>1e-12)if(da>tau-1e-12)context.moveTo(r1*Math.cos(a0),r1*Math.sin(a0)),context.arc(0,0,r1,a0,a1,!cw),r0>1e-12&&(context.moveTo(r0*Math.cos(a1),r0*Math.sin(a1)),context.arc(0,0,r0,a1,a0,cw));else{var t0,t1,a01=a0,a11=a1,a00=a0,a10=a1,da0=da,da1=da,ap=padAngle.apply(this,arguments)/2,rp=ap>1e-12&&(padRadius?+padRadius.apply(this,arguments):Math.sqrt(r0*r0+r1*r1)),rc=Math.min(Math.abs(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0=rc,rc1=rc;if(rp>1e-12){var p0=asin(rp/r0*Math.sin(ap)),p1=asin(rp/r1*Math.sin(ap));(da0-=2*p0)>1e-12?(a00+=p0*=cw?1:-1,a10-=p0):(da0=0,a00=a10=(a0+a1)/2),(da1-=2*p1)>1e-12?(a01+=p1*=cw?1:-1,a11-=p1):(da1=0,a01=a11=(a0+a1)/2)}var x01=r1*Math.cos(a01),y01=r1*Math.sin(a01),x10=r0*Math.cos(a10),y10=r0*Math.sin(a10);if(rc>1e-12){var x11=r1*Math.cos(a11),y11=r1*Math.sin(a11),x00=r0*Math.cos(a00),y00=r0*Math.sin(a00);if(da<pi){var oc=da0>1e-12?function intersect(x0,y0,x1,y1,x2,y2,x3,y3){var x10=x1-x0,y10=y1-y0,x32=x3-x2,y32=y3-y2,t=(x32*(y0-y2)-y32*(x0-x2))/(y32*x10-x32*y10);return[x0+t*x10,y0+t*y10]}(x01,y01,x00,y00,x11,y11,x10,y10):[x10,y10],ax=x01-oc[0],ay=y01-oc[1],bx=x11-oc[0],by=y11-oc[1],kc=1/Math.sin(Math.acos((ax*bx+ay*by)/(Math.sqrt(ax*ax+ay*ay)*Math.sqrt(bx*bx+by*by)))/2),lc=Math.sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=Math.min(rc,(r0-lc)/(kc-1)),rc1=Math.min(rc,(r1-lc)/(kc+1))}}da1>1e-12?rc1>1e-12?(t0=cornerTangents(x00,y00,x01,y01,r1,rc1,cw),t1=cornerTangents(x11,y11,x10,y10,r1,rc1,cw),context.moveTo(t0.cx+t0.x01,t0.cy+t0.y01),rc1<rc?context.arc(t0.cx,t0.cy,rc1,Math.atan2(t0.y01,t0.x01),Math.atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc1,Math.atan2(t0.y01,t0.x01),Math.atan2(t0.y11,t0.x11),!cw),context.arc(0,0,r1,Math.atan2(t0.cy+t0.y11,t0.cx+t0.x11),Math.atan2(t1.cy+t1.y11,t1.cx+t1.x11),!cw),context.arc(t1.cx,t1.cy,rc1,Math.atan2(t1.y11,t1.x11),Math.atan2(t1.y01,t1.x01),!cw))):(context.moveTo(x01,y01),context.arc(0,0,r1,a01,a11,!cw)):context.moveTo(x01,y01),r0>1e-12&&da0>1e-12?rc0>1e-12?(t0=cornerTangents(x10,y10,x11,y11,r0,-rc0,cw),t1=cornerTangents(x01,y01,x00,y00,r0,-rc0,cw),context.lineTo(t0.cx+t0.x01,t0.cy+t0.y01),rc0<rc?context.arc(t0.cx,t0.cy,rc0,Math.atan2(t0.y01,t0.x01),Math.atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc0,Math.atan2(t0.y01,t0.x01),Math.atan2(t0.y11,t0.x11),!cw),context.arc(0,0,r0,Math.atan2(t0.cy+t0.y11,t0.cx+t0.x11),Math.atan2(t1.cy+t1.y11,t1.cx+t1.x11),cw),context.arc(t1.cx,t1.cy,rc0,Math.atan2(t1.y11,t1.x11),Math.atan2(t1.y01,t1.x01),!cw))):context.arc(0,0,r0,a10,a00,cw):context.lineTo(x10,y10)}else context.moveTo(0,0);if(context.closePath(),buffer)return context=null,buffer+""||null}return arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-pi/2;return[Math.cos(a)*r,Math.sin(a)*r]},arc.innerRadius=function(_){return arguments.length?(innerRadius="function"==typeof _?_:constant$1(+_),arc):innerRadius},arc.outerRadius=function(_){return arguments.length?(outerRadius="function"==typeof _?_:constant$1(+_),arc):outerRadius},arc.cornerRadius=function(_){return arguments.length?(cornerRadius="function"==typeof _?_:constant$1(+_),arc):cornerRadius},arc.padRadius=function(_){return arguments.length?(padRadius=null==_?null:"function"==typeof _?_:constant$1(+_),arc):padRadius},arc.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:constant$1(+_),arc):startAngle},arc.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:constant$1(+_),arc):endAngle},arc.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:constant$1(+_),arc):padAngle},arc.context=function(_){return arguments.length?(context=null==_?null:_,arc):context},arc}().innerRadius(data.innerRadius||0).outerRadius(data.outerRadius||data.radius||2).startAngle(data.startAngle||0).endAngle(data.endAngle||2*Math.PI);return canvasContext?(arcShape.context(canvasContext),builder.pathMethods=lineGen):builder.attrs={d:arcShape()},builder},lineSetup=function lineSetup(_ref){var type=_ref.type,subjectType=_ref.subjectType,annotation=type.annotation,offset=annotation.position,x1=annotation.x-offset.x,x2=x1+annotation.dx,y1=annotation.y-offset.y,y2=y1+annotation.dy,subjectData=annotation.subject;if("circle"===subjectType&&(subjectData.outerRadius||subjectData.radius)){var h=Math.sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2)),angle=Math.asin(-y2/h),r=subjectData.outerRadius||subjectData.radius+(subjectData.radiusPadding||0);x1=Math.abs(Math.cos(angle)*r)*(x2<0?-1:1),y1=Math.abs(Math.sin(angle)*r)*(y2<0?-1:1)}if("rect"===subjectType){var width=subjectData.width,height=subjectData.height;(width>0&&annotation.dx>0||width<0&&annotation.dx<0)&&(x1=Math.abs(width)>Math.abs(annotation.dx)?width/2:width),(height>0&&annotation.dy>0||height<0&&annotation.dy<0)&&(y1=Math.abs(height)>Math.abs(annotation.dy)?height/2:height),x1===width/2&&y1===height/2&&(x1=x2,y1=y2)}return[[x1,y1],[x2,y2]]},connectorCurve=function(_ref){var type=_ref.type,connectorData=_ref.connectorData,subjectType=_ref.subjectType;connectorData||(connectorData={}),connectorData.points&&"number"!=typeof connectorData.points||(connectorData.points=createPoints(type.annotation.offset,connectorData.points)),connectorData.curve||(connectorData.curve=curveCatmullRom);var handles=[];if(type.editMode){var cHandles=connectorData.points.map((function(c,i){return _extends$1({},function pointHandle(_ref){var _ref$cx=_ref.cx,cx=void 0===_ref$cx?0:_ref$cx,_ref$cy=_ref.cy;return{move:{x:cx,y:void 0===_ref$cy?0:_ref$cy}}}({cx:c[0],cy:c[1]}),{index:i})})),updatePoint=function updatePoint(index){connectorData.points[index][0]+=event$1.dx,connectorData.points[index][1]+=event$1.dy,type.redrawConnector()};handles=type.mapHandles(cHandles.map((function(h){return _extends$1({},h.move,{drag:updatePoint.bind(type,h.index)})})))}var data=lineSetup({type:type,subjectType:subjectType});return data=[data[0]].concat(function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(connectorData.points),[data[1]]),{components:[lineBuilder({data:data,curve:connectorData.curve,className:"connector"})],handles:handles}},createPoints=function createPoints(offset){for(var anchors=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,diff_x=offset.x/(anchors+1),diff_y=offset.y/(anchors+1),p=[],i=1;i<=anchors;i++)p.push([diff_x*i+i%2*20,diff_y*i-i%2*20]);return p},subjectCircle=function(_ref){var subjectData=_ref.subjectData,type=_ref.type;subjectData.radius||subjectData.outerRadius||(subjectData.radius=20);var handles=[],c=arcBuilder({data:subjectData,className:"subject"});if(type.editMode){var h=function circleHandles(_ref2){var _ref2$cx=_ref2.cx,cx=void 0===_ref2$cx?0:_ref2$cx,_ref2$cy=_ref2.cy,cy=void 0===_ref2$cy?0:_ref2$cy,r1=_ref2.r1,r2=_ref2.r2,padding=_ref2.padding,h={move:{x:cx,y:cy}};return void 0!==r1&&(h.r1={x:cx+r1/Math.sqrt(2),y:cy+r1/Math.sqrt(2)}),void 0!==r2&&(h.r2={x:cx+r2/Math.sqrt(2),y:cy+r2/Math.sqrt(2)}),void 0!==padding&&(h.padding={x:cx+r1+padding,y:cy}),h}({r1:c.data.outerRadius||c.data.radius,r2:c.data.innerRadius,padding:subjectData.radiusPadding}),updateRadius=function updateRadius(attr){var r=subjectData[attr]+event$1.dx*Math.sqrt(2);subjectData[attr]=r,type.redrawSubject(),type.redrawConnector()},cHandles=[_extends$1({},h.r1,{drag:updateRadius.bind(type,void 0!==subjectData.outerRadius?"outerRadius":"radius")})];subjectData.innerRadius&&cHandles.push(_extends$1({},h.r2,{drag:updateRadius.bind(type,"innerRadius")})),handles=type.mapHandles(cHandles)}return c.attrs["fill-opacity"]=0,{components:[c],handles:handles}},Type=function(){function Type(_ref){var a=_ref.a,annotation=_ref.annotation,editMode=_ref.editMode,dispatcher=_ref.dispatcher,notePadding=_ref.notePadding,accessors=_ref.accessors;if(classCallCheck(this,Type),this.a=a,this.note=-1===annotation.disable.indexOf("note")&&a.select("g.annotation-note"),this.noteContent=this.note&&a.select("g.annotation-note-content"),this.connector=-1===annotation.disable.indexOf("connector")&&a.select("g.annotation-connector"),this.subject=-1===annotation.disable.indexOf("subject")&&a.select("g.annotation-subject"),this.dispatcher=dispatcher,dispatcher){var handler=addHandlers.bind(null,dispatcher,annotation);handler({component:this.note,name:"note"}),handler({component:this.connector,name:"connector"}),handler({component:this.subject,name:"subject"})}this.annotation=annotation,this.editMode=annotation.editMode||editMode,this.notePadding=void 0!==notePadding?notePadding:3,this.offsetCornerX=0,this.offsetCornerY=0,accessors&&annotation.data&&this.init(accessors)}return createClass(Type,[{key:"init",value:function init(accessors){this.annotation.x||this.mapX(accessors),this.annotation.y||this.mapY(accessors)}},{key:"mapY",value:function mapY(accessors){accessors.y&&(this.annotation.y=accessors.y(this.annotation.data))}},{key:"mapX",value:function mapX(accessors){accessors.x&&(this.annotation.x=accessors.x(this.annotation.data))}},{key:"updateEditMode",value:function updateEditMode(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function drawOnSVG(component,builders){var _this=this;Array.isArray(builders)||(builders=[builders]),builders.filter((function(b){return b})).forEach((function(_ref2){var type=_ref2.type,className=_ref2.className,attrs=_ref2.attrs,handles=_ref2.handles,classID=_ref2.classID;if("handle"===type)!function addHandles(_ref5){var group=_ref5.group,handles=_ref5.handles,_ref5$r=_ref5.r,r=void 0===_ref5$r?10:_ref5$r,h=group.selectAll("circle.handle").data(handles);h.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(drag().container(select$1("g.annotations").node()).on("start",(function(d){return d.start&&d.start(d)})).on("drag",(function(d){return d.drag&&d.drag(d)})).on("end",(function(d){return d.end&&d.end(d)}))),group.selectAll("circle.handle").attr("cx",(function(d){return d.x})).attr("cy",(function(d){return d.y})).attr("r",(function(d){return d.r||r})).attr("class",(function(d){return"handle "+(d.className||"")})),h.exit().remove()}({group:component,r:attrs&&attrs.r,handles:handles});else{newWithClass(component,[_this.annotation],type,className,classID);for(var el=component.select(type+"."+(classID||className)),addAttrs=Object.keys(attrs),removeAttrs=[],currentAttrs=el.node().attributes,i=currentAttrs.length-1;i>=0;i--){var name=currentAttrs[i].name;-1===addAttrs.indexOf(name)&&"class"!==name&&removeAttrs.push(name)}addAttrs.forEach((function(attr){"text"===attr?el.text(attrs[attr]):el.attr(attr,attrs[attr])})),removeAttrs.forEach((function(attr){return el.attr(attr,null)}))}}))}},{key:"getNoteBBox",value:function getNoteBBox(){return bboxWithoutHandles(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function getNoteBBoxOffset(){var bbox=bboxWithoutHandles(this.note,".annotation-note-content"),transform=this.noteContent.attr("transform").split(/\(|\,|\)/g);return bbox.offsetCornerX=parseFloat(transform[1])+this.annotation.dx,bbox.offsetCornerY=parseFloat(transform[2])+this.annotation.dy,bbox.offsetX=this.annotation.dx,bbox.offsetY=this.annotation.dy,bbox}},{key:"drawSubject",value:function drawSubject(){var _this2=this,context=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},subjectData=this.annotation.subject,type=context.type,subjectParams={type:this,subjectData:subjectData},subject={};"circle"===type?subject=subjectCircle(subjectParams):"rect"===type?subject=function(_ref){var subjectData=_ref.subjectData,type=_ref.type;subjectData.width||(subjectData.width=100),subjectData.height||(subjectData.height=100);var handles=[],width=subjectData.width,height=subjectData.height,rect=lineBuilder({data:[[0,0],[width,0],[width,height],[0,height],[0,0]],className:"subject"});if(type.editMode){var rHandles=[{x:width,y:height/2,drag:function updateWidth(){subjectData.width=event$1.x,type.redrawSubject(),type.redrawConnector()}.bind(type)},{x:width/2,y:height,drag:function updateHeight(){subjectData.height=event$1.y,type.redrawSubject(),type.redrawConnector()}.bind(type)}];handles=type.mapHandles(rHandles)}return rect.attrs["fill-opacity"]=.1,{components:[rect],handles:handles}}(subjectParams):"threshold"===type?subject=function(_ref){var subjectData=_ref.subjectData,offset=_ref.type.annotation.position,x1=(void 0!==subjectData.x1?subjectData.x1:offset.x)-offset.x,x2=(void 0!==subjectData.x2?subjectData.x2:offset.x)-offset.x,y1=(void 0!==subjectData.y1?subjectData.y1:offset.y)-offset.y,y2=(void 0!==subjectData.y2?subjectData.y2:offset.y)-offset.y;return{components:[lineBuilder({data:[[x1,y1],[x2,y2]],className:"subject"})]}}(subjectParams):"badge"===type&&(subject=function(_ref){var _ref$subjectData=_ref.subjectData,subjectData=void 0===_ref$subjectData?{}:_ref$subjectData,_ref$type=_ref.type,type=void 0===_ref$type?{}:_ref$type,annotation=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},typeSettings=type.typeSettings&&type.typeSettings.subject;subjectData.radius||(typeSettings&&typeSettings.radius?subjectData.radius=typeSettings.radius:subjectData.radius=14),subjectData.x||typeSettings&&typeSettings.x&&(subjectData.x=typeSettings.x),subjectData.y||typeSettings&&typeSettings.y&&(subjectData.y=typeSettings.y);var handles=[],components=[],radius=subjectData.radius,innerRadius=.7*radius,x=0,y=0,notCornerOffset=Math.sqrt(2)*radius,placement={xleftcorner:-radius,xrightcorner:radius,ytopcorner:-radius,ybottomcorner:radius,xleft:-notCornerOffset,xright:notCornerOffset,ytop:-notCornerOffset,ybottom:notCornerOffset};subjectData.x&&!subjectData.y?x=placement["x"+subjectData.x]:subjectData.y&&!subjectData.x?y=placement["y"+subjectData.y]:subjectData.x&&subjectData.y&&(x=placement["x"+subjectData.x+"corner"],y=placement["y"+subjectData.y+"corner"]);var transform="translate("+x+", "+y+")",circlebg=arcBuilder({className:"subject",data:{radius:radius}});circlebg.attrs.transform=transform,circlebg.attrs.fill=annotation.color,circlebg.attrs["stroke-linecap"]="round",circlebg.attrs["stroke-width"]="3px";var circle=arcBuilder({className:"subject-ring",data:{outerRadius:radius,innerRadius:innerRadius}});circle.attrs.transform=transform,circle.attrs["stroke-width"]="3px",circle.attrs.fill="white";var pointer=void 0;if(x&&y||!x&&!y)pointer=lineBuilder({className:"subject-pointer",data:[[0,0],[x||0,0],[0,y||0],[0,0]]});else if(x||y){var notCornerPointerXY=function notCornerPointerXY(v){var sign=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return v&&v/Math.sqrt(2)/Math.sqrt(2)||sign*radius/Math.sqrt(2)};pointer=lineBuilder({className:"subject-pointer",data:[[0,0],[notCornerPointerXY(x),notCornerPointerXY(y)],[notCornerPointerXY(x,-1),notCornerPointerXY(y,-1)],[0,0]]})}if(pointer&&(pointer.attrs.fill=annotation.color,pointer.attrs["stroke-linecap"]="round",pointer.attrs["stroke-width"]="3px",components.push(pointer)),type.editMode){var bHandles={x:2*x,y:2*y,drag:function dragBadge(){subjectData.x=event$1.x<2*-radius?"left":event$1.x>2*radius?"right":void 0,subjectData.y=event$1.y<2*-radius?"top":event$1.y>2*radius?"bottom":void 0,type.redrawSubject()}.bind(type)};bHandles.x||bHandles.y||(bHandles.y=-radius),handles=type.mapHandles([bHandles])}var text=void 0;return subjectData.text&&(text={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:subjectData.text,"text-anchor":"middle",dy:".25em",x:x,y:y}}),components.push(circlebg),components.push(circle),components.push(text),{components:components,handles:handles}}(subjectParams,this.annotation));var _subject=subject,_subject$components=_subject.components,components=void 0===_subject$components?[]:_subject$components,_subject$handles=_subject.handles,handles=void 0===_subject$handles?[]:_subject$handles;return components.forEach((function(c){c&&c.attrs&&!c.attrs.stroke&&(c.attrs.stroke=_this2.annotation.color)})),this.editMode&&(handles=handles.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),components.push({type:"handle",handles:handles})),components}},{key:"drawConnector",value:function drawConnector(){var _this3=this,context=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},connectorData=this.annotation.connector,type=connectorData.type||context.type,connectorParams={type:this,connectorData:connectorData};connectorParams.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var connector={};connector="curve"===type?connectorCurve(connectorParams):"elbow"===type?function(_ref){var type=_ref.type,subjectType=_ref.subjectType,annotation=type.annotation,offset=annotation.position,x1=annotation.x-offset.x,x2=x1+annotation.dx,y1=annotation.y-offset.y,y2=y1+annotation.dy,subjectData=annotation.subject;if("rect"===subjectType){var width=subjectData.width,height=subjectData.height;(width>0&&annotation.dx>0||width<0&&annotation.dx<0)&&(x1=Math.abs(width)>Math.abs(annotation.dx)?width/2:width),(height>0&&annotation.dy>0||height<0&&annotation.dy<0)&&(y1=Math.abs(height)>Math.abs(annotation.dy)?height/2:height),x1===width/2&&y1===height/2&&(x1=x2,y1=y2)}var data=[[x1,y1],[x2,y2]],diffY=y2-y1,diffX=x2-x1,xe=x2,ye=y2,opposite=y2<y1&&x2>x1||x2<x1&&y2>y1?-1:1;if(Math.abs(diffX)<Math.abs(diffY)?(xe=x2,ye=y1+diffX*opposite):(ye=y2,xe=x1+diffY*opposite),"circle"===subjectType&&(subjectData.outerRadius||subjectData.radius)){var r=(subjectData.outerRadius||subjectData.radius)+(subjectData.radiusPadding||0),length=r/Math.sqrt(2);if(Math.abs(diffX)>length&&Math.abs(diffY)>length)data=[[x1=length*(x2<0?-1:1),y1=length*(y2<0?-1:1)],[xe,ye],[x2,y2]];else if(Math.abs(diffX)>Math.abs(diffY)){var angle=Math.asin(-y2/r);data=[[x1=Math.abs(Math.cos(angle)*r)*(x2<0?-1:1),y2],[x2,y2]]}else{var _angle=Math.acos(x2/r);data=[[x2,y1=Math.abs(Math.sin(_angle)*r)*(y2<0?-1:1)],[x2,y2]]}}else data=[[x1,y1],[xe,ye],[x2,y2]];return{components:[lineBuilder({data:data,className:"connector"})]}}(connectorParams):function(connectorData){var data=lineSetup(connectorData);return{components:[lineBuilder({data:data,className:"connector"})]}}(connectorParams);var _connector=connector,_connector$components=_connector.components,components=void 0===_connector$components?[]:_connector$components,_connector$handles=_connector.handles,handles=void 0===_connector$handles?[]:_connector$handles,line$$1=components[0];line$$1&&(line$$1.attrs.stroke=this.annotation.color,line$$1.attrs.fill="none");var endType=connectorData.end||context.end,end={};if("arrow"===endType){var s=line$$1.data[1],e=line$$1.data[0];Math.sqrt(Math.pow(s[0]-e[0],2)+Math.pow(s[1]-e[1],2))<5&&line$$1.data[2]&&(s=line$$1.data[2]),end=function(_ref){var annotation=_ref.annotation,start=_ref.start,end=_ref.end,_ref$scale=_ref.scale,scale=void 0===_ref$scale?1:_ref$scale,offset=annotation.position;start=start?[-end[0]+start[0],-end[1]+start[1]]:[annotation.dx,annotation.dy],end||(end=[annotation.x-offset.x,annotation.y-offset.y]);var x1=end[0],y1=end[1],dx=start[0],dy=start[1],size=10*scale,angleOffset=16/180*Math.PI,angle=Math.atan(dy/dx);dx<0&&(angle+=Math.PI);var data=[[x1,y1],[Math.cos(angle+angleOffset)*size+x1,Math.sin(angle+angleOffset)*size+y1],[Math.cos(angle-angleOffset)*size+x1,Math.sin(angle-angleOffset)*size+y1],[x1,y1]];return{components:[lineBuilder({data:data,className:"connector-end connector-arrow",classID:"connector-end"})]}}({annotation:this.annotation,start:s,end:e,scale:connectorData.endScale})}else"dot"===endType?end=function(_ref){var line$$1=_ref.line,_ref$scale=_ref.scale,scale=void 0===_ref$scale?1:_ref$scale,dot=arcBuilder({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(scale)}});return dot.attrs.transform="translate("+line$$1.data[0][0]+", "+line$$1.data[0][1]+")",{components:[dot]}}({line:line$$1,scale:connectorData.endScale}):endType&&"none"!==endType||this.connector&&this.connector.select(".connector-end").remove();return end.components&&(end.components.forEach((function(c){c.attrs.fill=_this3.annotation.color,c.attrs.stroke=_this3.annotation.color})),components=components.concat(end.components)),this.editMode&&0!==handles.length&&components.push({type:"handle",handles:handles}),components}},{key:"drawNote",value:function drawNote(){var _this4=this,context=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},noteData=this.annotation.note,align=noteData.align||context.align||"dynamic",noteParams={bbox:context.bbox,align:align,offset:this.annotation.offset},lineType=noteData.lineType||context.lineType,note={};"vertical"===lineType?note=function(_ref){var align=_ref.align,_ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,bbox=_ref.bbox,offset=_ref.offset;"top"===(align=leftRightDynamic(align,offset.y))?y-=bbox.height:"middle"===align&&(y-=bbox.height/2);var data=[[x,y],[x,y+bbox.height]];return{components:[lineBuilder({data:data,className:"note-line"})]}}(noteParams):"horizontal"===lineType&&(note=function(_ref){var align=_ref.align,_ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,offset=_ref.offset,bbox=_ref.bbox;"right"===(align=topBottomDynamic(align,offset.x))?x-=bbox.width:"middle"===align&&(x-=bbox.width/2);var data=[[x,y],[x+bbox.width,y]];return{components:[lineBuilder({data:data,className:"note-line"})]}}(noteParams));var _note=note,_note$components=_note.components,components=void 0===_note$components?[]:_note$components,_note$handles=_note.handles,handles=void 0===_note$handles?[]:_note$handles;if(components.forEach((function(c){c.attrs.stroke=_this4.annotation.color})),this.editMode){handles=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),components.push({type:"handle",handles:handles});var dragging=this.dragNote.bind(this),start=this.dragstarted.bind(this),end=this.dragended.bind(this);this.note.call(drag().container(select$1("g.annotations").node()).on("start",(function(d){return start(d)})).on("drag",(function(d){return dragging(d)})).on("end",(function(d){return end(d)})))}else this.note.on("mousedown.drag",null);return components}},{key:"drawNoteContent",value:function drawNoteContent(context){var noteData=this.annotation.note,padding=void 0!==noteData.padding?noteData.padding:this.notePadding,orientation=noteData.orientation||context.orientation||"topBottom",lineType=noteData.lineType||context.lineType,align=noteData.align||context.align||"dynamic";"vertical"===lineType?orientation="leftRight":"horizontal"===lineType&&(orientation="topBottom");var _noteAlignment=function(_ref){var _ref$padding=_ref.padding,padding=void 0===_ref$padding?0:_ref$padding,_ref$bbox=_ref.bbox,bbox=void 0===_ref$bbox?{x:0,y:0,width:0,height:0}:_ref$bbox,align=_ref.align,orientation=_ref.orientation,_ref$offset=_ref.offset,offset=void 0===_ref$offset?{x:0,y:0}:_ref$offset,x=-bbox.x,y=0;return-1!==orientationTopBottom.indexOf(orientation)?(align=topBottomDynamic(align,offset.x),offset.y<0&&"topBottom"===orientation||"top"===orientation?y-=bbox.height+padding:y+=padding,"middle"===align?x-=bbox.width/2:"right"===align&&(x-=bbox.width)):-1!==orientationLeftRight.indexOf(orientation)&&(align=leftRightDynamic(align,offset.y),offset.x<0&&"leftRight"===orientation||"left"===orientation?x-=bbox.width+padding:x+=padding,"middle"===align?y-=bbox.height/2:"top"===align&&(y-=bbox.height)),{x:x,y:y}}({padding:padding,bbox:context.bbox,offset:this.annotation.offset,orientation:orientation,align:align}),x=_noteAlignment.x,y=_noteAlignment.y;return this.offsetCornerX=x+this.annotation.dx,this.offsetCornerY=y+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+x+", "+y+")"),[]}},{key:"drawOnScreen",value:function drawOnScreen(component,drawFunction){return this.drawOnSVG(component,drawFunction)}},{key:"redrawSubject",value:function redrawSubject(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function redrawConnector(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function redrawNote(){var bbox=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:bbox})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:bbox}))}},{key:"setPosition",value:function setPosition(){var position=this.annotation.position;this.a.attr("transform","translate("+position.x+", "+position.y+")")}},{key:"clearComponents",value:function clearComponents(){this.subject&&this.subject.select("*").remove(),this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function setOffset(){if(this.note){var offset=this.annotation.offset;this.note.attr("transform","translate("+offset.x+", "+offset.y+")")}}},{key:"setPositionWithAccessors",value:function setPositionWithAccessors(accessors){accessors&&this.annotation.data&&(this.mapX(accessors),this.mapY(accessors)),this.setPosition()}},{key:"setClassName",value:function setClassName(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function draw(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function dragstarted(){event$1.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function dragended(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function dragSubject(){var position=this.annotation.position;position.x+=event$1.dx,position.y+=event$1.dy,this.annotation.position=position}},{key:"dragNote",value:function dragNote(){var offset=this.annotation.offset;offset.x+=event$1.dx,offset.y+=event$1.dy,this.annotation.offset=offset}},{key:"mapHandles",value:function mapHandles(handles){var _this5=this;return handles.map((function(h){return _extends$1({},h,{start:_this5.dragstarted.bind(_this5),end:_this5.dragended.bind(_this5)})}))}}]),Type}(),customType=function customType(initialType,typeSettings,_init){return function(_initialType){function customType(settings){classCallCheck(this,customType);var _this6=possibleConstructorReturn(this,(customType.__proto__||Object.getPrototypeOf(customType)).call(this,settings));return _this6.typeSettings=typeSettings,typeSettings.disable&&typeSettings.disable.forEach((function(d){_this6[d]&&_this6[d].remove(),_this6[d]=void 0,"note"===d&&(_this6.noteContent=void 0)})),_this6}return inherits$1(customType,_initialType),createClass(customType,[{key:"className",value:function className(){return""+(typeSettings.className||get$1(customType.prototype.__proto__||Object.getPrototypeOf(customType.prototype),"className",this)&&get$1(customType.prototype.__proto__||Object.getPrototypeOf(customType.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function drawSubject(context){return this.typeSettings.subject=_extends$1({},typeSettings.subject,this.typeSettings.subject),get$1(customType.prototype.__proto__||Object.getPrototypeOf(customType.prototype),"drawSubject",this).call(this,_extends$1({},context,this.typeSettings.subject))}},{key:"drawConnector",value:function drawConnector(context){return this.typeSettings.connector=_extends$1({},typeSettings.connector,this.typeSettings.connector),get$1(customType.prototype.__proto__||Object.getPrototypeOf(customType.prototype),"drawConnector",this).call(this,_extends$1({},context,typeSettings.connector,this.typeSettings.connector))}},{key:"drawNote",value:function drawNote(context){return this.typeSettings.note=_extends$1({},typeSettings.note,this.typeSettings.note),get$1(customType.prototype.__proto__||Object.getPrototypeOf(customType.prototype),"drawNote",this).call(this,_extends$1({},context,typeSettings.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function drawNoteContent(context){return get$1(customType.prototype.__proto__||Object.getPrototypeOf(customType.prototype),"drawNoteContent",this).call(this,_extends$1({},context,typeSettings.note,this.typeSettings.note))}}],[{key:"init",value:function init(annotation,accessors){return get$1(customType.__proto__||Object.getPrototypeOf(customType),"init",this).call(this,annotation,accessors),_init&&(annotation=_init(annotation,accessors)),annotation}}]),customType}(initialType)},d3NoteText=function(_Type){function d3NoteText(params){classCallCheck(this,d3NoteText);var _this7=possibleConstructorReturn(this,(d3NoteText.__proto__||Object.getPrototypeOf(d3NoteText)).call(this,params));return _this7.textWrap=params.textWrap||120,_this7.drawText(),_this7}return inherits$1(d3NoteText,_Type),createClass(d3NoteText,[{key:"updateTextWrap",value:function updateTextWrap(textWrap){this.textWrap=textWrap,this.drawText()}},{key:"drawText",value:function drawText(){if(this.note){newWithClass(this.note,[this.annotation],"g","annotation-note-content");var noteContent=this.note.select("g.annotation-note-content");newWithClass(noteContent,[this.annotation],"rect","annotation-note-bg"),newWithClass(noteContent,[this.annotation],"text","annotation-note-label"),newWithClass(noteContent,[this.annotation],"text","annotation-note-title");var titleBBox={height:0},label=this.a.select("text.annotation-note-label"),wrapLength=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,wrapSplitter=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter,bgPadding=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding,bgPaddingFinal={top:0,bottom:0,left:0,right:0};if("number"==typeof bgPadding?bgPaddingFinal={top:bgPadding,bottom:bgPadding,left:bgPadding,right:bgPadding}:bgPadding&&"object"===(void 0===bgPadding?"undefined":_typeof$1(bgPadding))&&(bgPaddingFinal=_extends$1(bgPaddingFinal,bgPadding)),this.annotation.note.title){var title=this.a.select("text.annotation-note-title");title.text(this.annotation.note.title),title.attr("fill",this.annotation.color),title.attr("font-weight","bold"),title.call(wrap,wrapLength,wrapSplitter),titleBBox=title.node().getBBox()}label.text(this.annotation.note.label).attr("dx","0"),label.call(wrap,wrapLength,wrapSplitter),label.attr("y",1.1*titleBBox.height||0),label.attr("fill",this.annotation.color);var bbox=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",bbox.width+bgPaddingFinal.left+bgPaddingFinal.right).attr("height",bbox.height+bgPaddingFinal.top+bgPaddingFinal.bottom).attr("x",bbox.x-bgPaddingFinal.left).attr("y",-bgPaddingFinal.top).attr("fill","white").attr("fill-opacity",0)}}}]),d3NoteText}(Type),d3Label=customType(d3NoteText,{className:"label",note:{align:"middle"}}),d3Callout=customType(d3NoteText,{className:"callout",note:{lineType:"horizontal"}}),d3CalloutElbow=customType(d3Callout,{className:"callout elbow",connector:{type:"elbow"}}),d3CalloutCurve=customType(d3Callout,{className:"callout curve",connector:{type:"curve"}}),d3Badge=customType(Type,{className:"badge",subject:{type:"badge"},disable:["connector","note"]}),d3CalloutCircle=customType(d3NoteText,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}}),d3CalloutRect=customType(d3NoteText,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}}),ThresholdMap=function(_d3Callout){function ThresholdMap(){return classCallCheck(this,ThresholdMap),possibleConstructorReturn(this,(ThresholdMap.__proto__||Object.getPrototypeOf(ThresholdMap)).apply(this,arguments))}return inherits$1(ThresholdMap,_d3Callout),createClass(ThresholdMap,[{key:"mapY",value:function mapY(accessors){get$1(ThresholdMap.prototype.__proto__||Object.getPrototypeOf(ThresholdMap.prototype),"mapY",this).call(this,accessors);var a=this.annotation;(a.subject.x1||a.subject.x2)&&a.data&&accessors.y&&(a.y=accessors.y(a.data)),!a.subject.x1&&!a.subject.x2||a.x||(a.x=a.subject.x1||a.subject.x2)}},{key:"mapX",value:function mapX(accessors){get$1(ThresholdMap.prototype.__proto__||Object.getPrototypeOf(ThresholdMap.prototype),"mapX",this).call(this,accessors);var a=this.annotation;(a.subject.y1||a.subject.y2)&&a.data&&accessors.x&&(a.x=accessors.x(a.data)),!a.subject.y1&&!a.subject.y2||a.y||(a.y=a.subject.y1||a.subject.y2)}}]),ThresholdMap}(d3Callout),d3XYThreshold=customType(ThresholdMap,{className:"callout xythreshold",subject:{type:"threshold"}}),newWithClass=function newWithClass(a,d,type,className,classID){var group=a.selectAll(type+"."+(classID||className)).data(d);return group.enter().append(type).merge(group).attr("class",className),group.exit().remove(),a},addHandlers=function addHandlers(dispatcher,annotation,_ref3){var component=_ref3.component,name=_ref3.name;component&&component.on("mouseover.annotations",(function(){dispatcher.call(name+"over",component,annotation)})).on("mouseout.annotations",(function(){return dispatcher.call(name+"out",component,annotation)})).on("click.annotations",(function(){return dispatcher.call(name+"click",component,annotation)}))},wrap=function wrap(text,width,wrapSplitter){var lineHeight=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2;text.each((function(){for(var text=select$1(this),words=text.text().split(wrapSplitter||/[ \t\r\n]+/).reverse().filter((function(w){return""!==w})),word=void 0,line$$1=[],tspan=text.text(null).append("tspan").attr("x",0).attr("dy","0.8em");word=words.pop();)line$$1.push(word),tspan.text(line$$1.join(" ")),tspan.node().getComputedTextLength()>width&&line$$1.length>1&&(line$$1.pop(),tspan.text(line$$1.join(" ")),line$$1=[word],tspan=text.append("tspan").attr("x",0).attr("dy",lineHeight+"em").text(word))}))},bboxWithoutHandles=function bboxWithoutHandles(selection){var selector=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":not(.handle)";return selection?selection.selectAll(selector).nodes().reduce((function(p,c){var bbox=c.getBBox();p.x=Math.min(p.x,bbox.x),p.y=Math.min(p.y,bbox.y),p.width=Math.max(p.width,bbox.width);var yOffset=c&&c.attributes&&c.attributes.y;return p.height=Math.max(p.height,(yOffset&&parseFloat(yOffset.value)||0)+bbox.height),p}),{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}};function annotation(){var annotations=[],collection=void 0,context=void 0,disable=[],accessors={},accessorsInverse={},editMode=!1,ids=void 0,type=d3Callout,textWrap=void 0,notePadding=void 0,annotationDispatcher=dispatch("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),sel=void 0,annotation=function annotation(selection){sel=selection,editMode||selection.selectAll("circle.handle").remove();var translatedAnnotations=annotations.map((function(a){return a.type||(a.type=type),a.disable||(a.disable=disable),new Annotation(a)}));collection=collection||new AnnotationCollection({annotations:translatedAnnotations,accessors:accessors,accessorsInverse:accessorsInverse,ids:ids}),selection.selectAll("g").data([collection]).enter().append("g").attr("class","annotations");var group=selection.select("g.annotations");newWithClass(group,collection.annotations,"g","annotation");var annotation=group.selectAll("g.annotation");annotation.each((function(d){var a=select$1(this);a.attr("class","annotation"),newWithClass(a,[d],"g","annotation-connector"),newWithClass(a,[d],"g","annotation-subject"),newWithClass(a,[d],"g","annotation-note"),newWithClass(a.select("g.annotation-note"),[d],"g","annotation-note-content"),d.type="[object Object]"===d.type.toString()?d.type:new d.type({a:a,annotation:d,textWrap:textWrap,notePadding:notePadding,editMode:editMode,dispatcher:annotationDispatcher,accessors:accessors}),d.type.draw(),d.type.drawText&&d.type.drawText()}))};return annotation.json=function(){return console.log("Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.",collection.json),window.copy(JSON.stringify(collection.json.map((function(a){return delete a.type,a})))),annotation},annotation.update=function(){return annotations&&collection&&(annotations=collection.annotations.map((function(a){return a.type.draw(),a}))),annotation},annotation.updateText=function(){return collection&&(collection.updateText(textWrap),annotations=collection.annotations),annotation},annotation.updatedAccessors=function(){return collection.setPositionWithAccessors(),annotations=collection.annotations,annotation},annotation.disable=function(_){return arguments.length?(disable=_,collection&&(collection.updateDisable(disable),annotations=collection.annotations),annotation):disable},annotation.textWrap=function(_){return arguments.length?(textWrap=_,collection&&(collection.updateTextWrap(textWrap),annotations=collection.annotations),annotation):textWrap},annotation.notePadding=function(_){return arguments.length?(notePadding=_,collection&&(collection.updateNotePadding(notePadding),annotations=collection.annotations),annotation):notePadding},annotation.type=function(_,settings){return arguments.length?(type=_,collection&&(collection.annotations.map((function(a){a.type.note&&a.type.note.selectAll("*:not(.annotation-note-content)").remove(),a.type.noteContent&&a.type.noteContent.selectAll("*").remove(),a.type.subject&&a.type.subject.selectAll("*").remove(),a.type.connector&&a.type.connector.selectAll("*").remove(),a.type.typeSettings={},a.type=type,a.subject=settings&&settings.subject||a.subject,a.connector=settings&&settings.connector||a.connector,a.note=settings&&settings.note||a.note})),annotations=collection.annotations),annotation):type},annotation.annotations=function(_){if(!arguments.length)return collection&&collection.annotations||annotations;(annotations=_,collection&&collection.annotations)&&(annotations.some((function(d){return!d.type||"[object Object]"!==d.type.toString()}))?(collection=null,annotation(sel)):collection.annotations=annotations);return annotation},annotation.context=function(_){return arguments.length?(context=_,annotation):context},annotation.accessors=function(_){return arguments.length?(accessors=_,annotation):accessors},annotation.accessorsInverse=function(_){return arguments.length?(accessorsInverse=_,annotation):accessorsInverse},annotation.ids=function(_){return arguments.length?(ids=_,annotation):ids},annotation.editMode=function(_){return arguments.length?(editMode=_,sel&&sel.selectAll("g.annotation").classed("editable",editMode),collection&&(collection.editMode(editMode),annotations=collection.annotations),annotation):editMode},annotation.collection=function(_){return arguments.length?(collection=_,annotation):collection},annotation.on=function(){var value=annotationDispatcher.on.apply(annotationDispatcher,arguments);return value===annotationDispatcher?annotation:value},annotation}var types={annotationLabel:d3Label,annotationCallout:d3Callout,annotationCalloutElbow:d3CalloutElbow,annotationCalloutCurve:d3CalloutCurve,annotationCalloutCircle:d3CalloutCircle,annotationCalloutRect:d3CalloutRect,annotationXYThreshold:d3XYThreshold,annotationBadge:d3Badge};function resolveValue(d,scale,percentScale,shouldBeDate){if(d)if(d instanceof Array){if(1===d.length)return checkZero(scale(checkDate(d[0],shouldBeDate)));if(2===d.length)return checkZero(scale(checkDate(d[0],shouldBeDate))-scale(checkDate(d[1],shouldBeDate)))}else if("string"==typeof d&&"%"===d.substring(d.length-1,d.length))return checkZero(percentScale(+d.substring(0,d.length-1)));return checkZero(d)}function checkZero(v){return 0===v?1e-9:v}function checkDate(d,shouldCheck){return shouldCheck?"object"==typeof d&&"function"==typeof d.getMonth?d:new Date(d):d}function hideOverlappingAnnotations(source,width,height,padding,margin,bitmaps){var annotationsG=select$4(source).select(".vcl-annotation-group").select(".annotations");annotationsG.selectAll(".annotation").style("visibility",null),annotationsG.selectAll(".annotation-detect-collision").each((function(_,i,n){var me=n[i],annotationTransform=parseTransformSimple(select$4(me).attr("transform")),annotationTranslate=annotationTransform&&annotationTransform.translate||[0,0],annotationNoteTransform=select$4(me).select(".annotation-note").attr("transform")&&parseTransformSimple(select$4(me).select(".annotation-note").attr("transform")),annotationNoteTranslate=annotationNoteTransform&&annotationNoteTransform.translate||[0,0],annotationNoteContentTransform=select$4(me).select(".annotation-note").select(".annotation-note-content").attr("transform")&&parseTransformSimple(select$4(me).select(".annotation-note").select(".annotation-note-content").attr("transform")),annotationNoteContentTranslate=annotationNoteContentTransform&&annotationNoteContentTransform.translate||[0,0];select$4(me).selectAll("path").each((function(_,i,n){var pathMe=select$4(n[i]),translateX=annotationTranslate[0]+padding.left+margin.left,translateY=annotationTranslate[1]+padding.top+margin.top;pathMe.classed("note-line")&&(translateX+=annotationNoteTranslate[0],translateY+=annotationNoteTranslate[1]),pathMe.attr("data-d",pathMe.attr("d")).attr("data-translate-x",translateX).attr("data-translate-y",translateY)}));var maxDataWidth=0;select$4(me).selectAll("text").each((function(_,i,n){var textElement=n[i],style=getComputedStyle(textElement),fontSize=parseFloat(style.fontSize),textHeight=Math.max(fontSize-1,1),textWidth=getTextWidth(textElement.textContent,fontSize,!0,style.fontFamily),textMe=select$4(textElement),translateX=annotationTranslate[0]+annotationNoteTranslate[0]+annotationNoteContentTranslate[0]+padding.left+margin.left,translateY=annotationTranslate[1]+annotationNoteTranslate[1]+annotationNoteContentTranslate[1]+padding.top+margin.top;maxDataWidth=Math.max(textWidth,maxDataWidth),textMe.attr("data-x",+textMe.attr("x")||0).attr("data-y",textHeight/2+ +textMe.attr("y")||0).attr("data-ignore",0===textWidth).attr("data-width",textWidth).attr("data-height",textHeight).attr("data-translate-x",translateX).attr("data-translate-y",translateY).attr("data-no-text-anchor",!0)})),0===maxDataWidth&&select$4(me).attr("data-no-text",!0)})),bitmaps=resolveLabelCollision({bitmaps:bitmaps,labelSelection:select$4(".nothing-exists-here"),avoidMarks:[annotationsG.selectAll(".annotation-detect-collision").selectAll("path")],validPositions:["middle"],offsets:[1],accessors:["cidx"],size:[roundTo(width,0),roundTo(height,0)]}),bitmaps=resolveLabelCollision({bitmaps:bitmaps,labelSelection:annotationsG.selectAll(".annotation-detect-collision text"),avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["cidx"],size:[roundTo(width,0),roundTo(height,0)]}),annotationsG.selectAll(".annotation-detect-collision").each((function(_,i,n){var me=n[i],textShownIndicator=!1;select$4(me).selectAll("text").each((function(_,i,n){var textElement=n[i],elementIndicator="false"===select$4(textElement).attr("data-label-hidden")&&"false"===select$4(textElement).attr("data-ignore");textShownIndicator=textShownIndicator||elementIndicator})),textShownIndicator||"true"===select$4(me).attr("data-no-text")?select$4(me).style("visibility",null):select$4(me).style("visibility","hidden")}))}function parseTransformSimple(transform){var result={};return transform.trim().replace(", ",",").split(" ").forEach((function(transformation){var step1=transformation.split(")")[0].split(","),step2=step1[0].split("(");result[step2[0]]=[],result[step2[0]].push(+step2[1],+step1[1])})),result}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function toPropertyKey(t){var i=function toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,toPropertyKey(o.key),o)}}var hasOwnProperty$c=Object.prototype.hasOwnProperty;function baseHas(object,key){return null!=object&&hasOwnProperty$c.call(object,key)}var isArray$1=Array.isArray,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$e=Object.prototype,hasOwnProperty$b=objectProto$e.hasOwnProperty,nativeObjectToString$1=objectProto$e.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;var nativeObjectToString=Object.prototype.toString;var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?function getRawTag(value){var isOwn=hasOwnProperty$b.call(value,symToStringTag$1),tag=value[symToStringTag$1];try{value[symToStringTag$1]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString$1.call(value);return unmasked&&(isOwn?value[symToStringTag$1]=tag:delete value[symToStringTag$1]),result}(value):function objectToString(value){return nativeObjectToString.call(value)}(value)}function isObjectLike(value){return null!=value&&"object"==typeof value}var symbolTag$3="[object Symbol]";function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag$3}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray$1(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function isObject$3(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject$3(value))return!1;var tag=baseGetTag(value);return tag==funcTag$2||tag==genTag$1||tag==asyncTag||tag==proxyTag}var uid,coreJsData=root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";var funcToString$1=Function.prototype.toString;function toSource(func){if(null!=func){try{return funcToString$1.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$c=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$a=objectProto$c.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){return!(!isObject$3(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}var nativeCreate=getNative(Object,"create");var hasOwnProperty$9=Object.prototype.hasOwnProperty;var hasOwnProperty$8=Object.prototype.hasOwnProperty;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function eq(value,other){return value===other||value!=value&&other!=other}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty$9.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty$8.call(data,key)},Hash.prototype.set=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this};var splice=Array.prototype.splice;function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this};var Map$1=getNative(root,"Map");function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this};var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache;var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function memoizeCapped(func){var result=memoize(func,(function(key){return 500===cache.size&&cache.clear(),key})),cache=result.cache;return result}((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}));function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}var INFINITY$1=1/0,symbolProto$2=Symbol$1?Symbol$1.prototype:void 0,symbolToString$1=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(value){if("string"==typeof value)return value;if(isArray$1(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString$1?symbolToString$1.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY$1?"-0":result}function toString$1(value){return null==value?"":baseToString(value)}function castPath(value,object){return isArray$1(value)?value:isKey(value,object)?[value]:stringToPath(toString$1(value))}function baseIsArguments(value){return isObjectLike(value)&&"[object Arguments]"==baseGetTag(value)}var objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$7.call(value,"callee")&&!propertyIsEnumerable$1.call(value,"callee")},MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;return!!(length=null==length?MAX_SAFE_INTEGER$1:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}var INFINITY=1/0;function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function hasPath(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray$1(object)||isArguments(object))}function has(object,path){return null!=object&&hasPath(object,path,baseHas)}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function stackGet(key){return this.__data__.get(key)},Stack.prototype.has=function stackHas(key){return this.__data__.has(key)},Stack.prototype.set=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map$1||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}var hasOwnProperty$6=Object.prototype.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];hasOwnProperty$6.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;void 0===newValue&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}var freeExports$2=exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer$1=freeModule$2&&freeModule$2.exports===freeExports$2?root.Buffer:void 0,isBuffer=(Buffer$1?Buffer$1.isBuffer:void 0)||function stubFalse(){return!1},typedArrayTags={};function baseUnary(func){return function(value){return func(value)}}typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1;var freeExports$1=exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule$1&&freeModule$1.exports===freeExports$1&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]},hasOwnProperty$5=Object.prototype.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray$1(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty$5.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}var objectProto$6=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto$6)}function overArg(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys=overArg(Object.keys,Object),hasOwnProperty$4=Object.prototype.hasOwnProperty;function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty$4.call(object,key)&&"constructor"!=key&&result.push(key);return result}(object)}var hasOwnProperty$3=Object.prototype.hasOwnProperty;function baseKeysIn(object){if(!isObject$3(object))return function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty$3.call(object,key))&&result.push(key);return result}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}var freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function stubArray(){return[]}var propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(object){return null==object?[]:(object=Object(object),function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols$1(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:stubArray;function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}var getPrototype=overArg(Object.getPrototypeOf,Object),getSymbolsIn=Object.getOwnPropertySymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray;function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray$1(object)?result:arrayPush(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView$1&&"[object DataView]"!=getTag(new DataView$1(new ArrayBuffer(1)))||Map$1&&"[object Map]"!=getTag(new Map$1)||Promise$1&&"[object Promise]"!=getTag(Promise$1.resolve())||Set$1&&"[object Set]"!=getTag(new Set$1)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result});var getTag$1=getTag,hasOwnProperty$2=Object.prototype.hasOwnProperty;var Uint8Array=root.Uint8Array;function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}var reFlags=/\w*$/;var symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$3="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag$2:return cloneArrayBuffer(object);case boolTag$2:case dateTag$2:return new Ctor(+object);case dataViewTag$2:return function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}(object,isDeep);case mapTag$4:return new Ctor;case numberTag$2:case stringTag$3:return new Ctor(object);case regexpTag$2:return function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}(object);case setTag$4:return new Ctor;case symbolTag$2:return function cloneSymbol(symbol){return symbolValueOf$1?Object(symbolValueOf$1.call(symbol)):{}}(object)}}var objectCreate=Object.create,baseCreate=function(){function object(){}return function(proto){if(!isObject$3(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=void 0,result}}();var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):function baseIsMap(value){return isObjectLike(value)&&"[object Map]"==getTag$1(value)};var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):function baseIsSet(value){return isObjectLike(value)&&"[object Set]"==getTag$1(value)},CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4,argsTag$1="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",objectTag$1="[object Object]",cloneableTags={};function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG$1,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG$1;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject$3(value))return value;var isArr=isArray$1(value);if(isArr){if(result=function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty$2.call(array,"index")&&(result.index=array.index,result.input=array.input),result}(value),!isDeep)return copyArray(value,result)}else{var tag=getTag$1(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}(value,isDeep);if(tag==objectTag$1||tag==argsTag$1||isFunc&&!object){if(result=isFlat||isFunc?{}:function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}(value),!isDeep)return isFlat?function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}(value,function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}(result,value)):function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}(value,function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;stack.set(value,result),isSet(value)?value.forEach((function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))})):isMap(value)&&value.forEach((function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))}));var props=isArr?void 0:(isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys)(value);return function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&!1!==iteratee(array[index],index,array););return array}(props||value,(function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))})),result}cloneableTags[argsTag$1]=cloneableTags["[object Array]"]=cloneableTags["[object ArrayBuffer]"]=cloneableTags["[object DataView]"]=cloneableTags["[object Boolean]"]=cloneableTags["[object Date]"]=cloneableTags["[object Float32Array]"]=cloneableTags["[object Float64Array]"]=cloneableTags["[object Int8Array]"]=cloneableTags["[object Int16Array]"]=cloneableTags["[object Int32Array]"]=cloneableTags["[object Map]"]=cloneableTags["[object Number]"]=cloneableTags[objectTag$1]=cloneableTags["[object RegExp]"]=cloneableTags["[object Set]"]=cloneableTags["[object String]"]=cloneableTags["[object Symbol]"]=cloneableTags["[object Uint8Array]"]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags["[object Uint16Array]"]=cloneableTags["[object Uint32Array]"]=!0,cloneableTags["[object Error]"]=cloneableTags[funcTag]=cloneableTags["[object WeakMap]"]=!1;function cloneDeepWith(value,customizer){return baseClone(value,5,customizer="function"==typeof customizer?customizer:void 0)}var stringTag$1="[object String]";function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}var reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function hasUnicode(string){return reHasUnicode.test(string)}var rsAstral="[\\ud800-\\udfff]",rsCombo$2="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsNonAstral$1="[^\\ud800-\\udfff]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",reOptMod$1="(?:"+rsCombo$2+"|"+rsFitz$1+")"+"?",rsSeq$1="[\\ufe0e\\ufe0f]?"+reOptMod$1+("(?:\\u200d(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod$1+")*"),rsSymbol="(?:"+[rsNonAstral$1+rsCombo$2+"?",rsCombo$2,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function stringToArray(string){return hasUnicode(string)?function unicodeToArray(string){return string.match(reUnicode)||[]}(string):function asciiToArray(string){return string.split("")}(string)}function values(object){return null==object?[]:function baseValues(object,props){return arrayMap(props,(function(key){return object[key]}))}(object,keys(object))}var symIterator=Symbol$1?Symbol$1.iterator:void 0;function toArray(value){if(!value)return[];if(isArrayLike(value))return function isString(value){return"string"==typeof value||!isArray$1(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag$1}(value)?stringToArray(value):copyArray(value);if(symIterator&&value[symIterator])return function iteratorToArray(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}(value[symIterator]());var tag=getTag$1(value);return("[object Map]"==tag?mapToArray:"[object Set]"==tag?setToArray:values)(value)}var toString=Object.prototype.toString,errorToString=Error.prototype.toString,regExpToString=RegExp.prototype.toString,symbolToString="undefined"!=typeof Symbol?Symbol.prototype.toString:function(){return""},SYMBOL_REGEXP=/^Symbol\((.*)\)(.*)$/;function printSimpleValue(val,quoteStrings){if(void 0===quoteStrings&&(quoteStrings=!1),null==val||!0===val||!1===val)return""+val;var typeOf=typeof val;if("number"===typeOf)return function printNumber(val){return val!=+val?"NaN":0===val&&1/val<0?"-0":""+val}(val);if("string"===typeOf)return quoteStrings?'"'+val+'"':val;if("function"===typeOf)return"[Function "+(val.name||"anonymous")+"]";if("symbol"===typeOf)return symbolToString.call(val).replace(SYMBOL_REGEXP,"Symbol($1)");var tag=toString.call(val).slice(8,-1);return"Date"===tag?isNaN(val.getTime())?""+val:val.toISOString(val):"Error"===tag||val instanceof Error?"["+errorToString.call(val)+"]":"RegExp"===tag?regExpToString.call(val):null}function printValue(value,quoteStrings){var result=printSimpleValue(value,quoteStrings);return null!==result?result:JSON.stringify(value,(function(key,value){var result=printSimpleValue(this[key],quoteStrings);return null!==result?result:value}),2)}var mixed={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:function notType(_ref){var path=_ref.path,type=_ref.type,value=_ref.value,originalValue=_ref.originalValue,isCast=null!=originalValue&&originalValue!==value,msg=path+" must be a `"+type+"` type, but the final value was: `"+printValue(value,!0)+"`"+(isCast?" (cast from the value `"+printValue(originalValue,!0)+"`).":".");return null===value&&(msg+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),msg},defined:"${path} must be defined"},string={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},number={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",notEqual:"${path} must be not equal to ${notEqual}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},date={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},object={noUnknown:"${path} field has unspecified keys: ${unknown}"},array$1={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items"};_extends(Object.create(null),{mixed:mixed,string:string,number:number,date:date,object:object,array:array$1,boolean:{}});var isSchema=function(obj){return obj&&obj.__isYupSchema__},Condition=function(){function Condition(refs,options){if(this.refs=refs,"function"!=typeof options){if(!has(options,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!options.then&&!options.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");var is=options.is,then=options.then,otherwise=options.otherwise,check="function"==typeof is?is:function(){for(var _len=arguments.length,values=new Array(_len),_key=0;_key<_len;_key++)values[_key]=arguments[_key];return values.every((function(value){return value===is}))};this.fn=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];var options=args.pop(),schema=args.pop(),branch=check.apply(void 0,args)?then:otherwise;if(branch)return"function"==typeof branch?branch(schema):schema.concat(branch.resolve(options))}}else this.fn=options}return Condition.prototype.resolve=function resolve(base,options){var values=this.refs.map((function(ref){return ref.getValue(null==options?void 0:options.value,null==options?void 0:options.parent,null==options?void 0:options.context)})),schema=this.fn.apply(base,values.concat(base,options));if(void 0===schema||schema===base)return base;if(!isSchema(schema))throw new TypeError("conditions must return a schema object");return schema.resolve(options)},Condition}(),strReg=/\$\{\s*(\w+)\s*\}/g;function ValidationError(errors,value,field,type){var _this=this;this.name="ValidationError",this.value=value,this.path=field,this.type=type,this.errors=[],this.inner=[],errors&&[].concat(errors).forEach((function(err){_this.errors=_this.errors.concat(err.errors||err),err.inner&&(_this.inner=_this.inner.concat(err.inner.length?err.inner:err))})),this.message=this.errors.length>1?this.errors.length+" errors occurred":this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,ValidationError)}ValidationError.prototype=Object.create(Error.prototype),ValidationError.prototype.constructor=ValidationError,ValidationError.isError=function(err){return err&&"ValidationError"===err.name},ValidationError.formatError=function(message,params){return params.path=params.label||params.path||"this","string"==typeof message?message.replace(strReg,(function(_,key){return printValue(params[key])})):"function"==typeof message?message(params):message};function runTests(options,cb){var endEarly=options.endEarly,tests=options.tests,args=options.args,value=options.value,errors=options.errors,sort=options.sort,path=options.path,callback=function once(cb){var fired=!1;return function(){fired||(fired=!0,cb.apply(void 0,arguments))}}(cb),count=tests.length;if(!count)return callback(null,value);var nestedErrors=[];errors=errors||[];for(var i=0;i<tests.length;i++){(0,tests[i])(args,(function finishTestRun(err){if(err){if(!ValidationError.isError(err))return callback(err);if(endEarly)return err.value=value,callback(err);nestedErrors.push(err)}if(--count<=0){if(nestedErrors.length&&(sort&&nestedErrors.sort(sort),errors.length&&nestedErrors.push.apply(nestedErrors,errors),errors=nestedErrors),errors.length)return void callback(new ValidationError(errors,value,path));callback(null,value)}}))}}var isObject$2=function isObject(obj){return"[object Object]"===Object.prototype.toString.call(obj)};function prependDeep(target,source){for(var key in source)if(has(source,key)){var sourceVal=source[key],targetVal=target[key];if(void 0===targetVal)target[key]=sourceVal;else{if(targetVal===sourceVal)continue;isSchema(targetVal)?isSchema(sourceVal)&&(target[key]=sourceVal.concat(targetVal)):isObject$2(targetVal)?isObject$2(sourceVal)&&(target[key]=prependDeep(targetVal,sourceVal)):Array.isArray(targetVal)&&Array.isArray(sourceVal)&&(target[key]=sourceVal.concat(targetVal))}}return target}var baseFor=function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}();function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function setCacheHas(value){return this.__data__.has(value)};var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$5,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(key=othIndex,!seen.has(key)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex);var key}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;var COMPARE_PARTIAL_FLAG$3=1,hasOwnProperty$1=Object.prototype.hasOwnProperty;var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray$1(object),othIsArr=isArray$1(other),objTag=objIsArr?arrayTag:getTag$1(object),othTag=othIsArr?arrayTag:getTag$1(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG$4;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG$2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG$2)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$3,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$1.call(other,key)))return!1}var objStacked=stack.get(object),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack))}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function isStrictComparable(value){return value==value&&!isObject$3(value)}function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(void 0!==srcValue||key in Object(object)))}}function baseMatches(source){var matchData=function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(void 0===result?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,customizer,stack):result))return!1}}return!0}(object,source,matchData)}}function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}function baseHasIn(object,key){return null!=object&&key in Object(object)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}(object,path);return void 0===objValue&&objValue===srcValue?function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function identity(value){return value}function property(path){return isKey(path)?function baseProperty(key){return function(object){return null==object?void 0:object[key]}}(toKey(path)):function basePropertyDeep(path){return function(object){return baseGet(object,path)}}(path)}function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray$1(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function mapValues(object,iteratee){var result={};return iteratee=baseIteratee(iteratee),baseForOwn(object,(function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))})),result}function Cache(maxSize){this._maxSize=maxSize,this.clear()}Cache.prototype.clear=function(){this._size=0,this._values=Object.create(null)},Cache.prototype.get=function(key){return this._values[key]},Cache.prototype.set=function(key,value){return this._size>=this._maxSize&&this.clear(),key in this._values||this._size++,this._values[key]=value};var SPLIT_REGEX=/[^.^\]^[]+|(?=\[\]|\.\.)/g,DIGIT_REGEX=/^\d+$/,LEAD_DIGIT_REGEX=/^\d/,SPEC_CHAR_REGEX=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,CLEAN_QUOTES_REGEX=/^\s*(['"]?)(.*?)(\1)\s*$/,pathCache=new Cache(512),getCache=(new Cache(512),new Cache(512)),propertyExpr_getter=function(path,safe){var parts=normalizePath(path);return getCache.get(path)||getCache.set(path,(function getter(data){for(var index=0,len=parts.length;index<len;){if(null==data&&safe)return;data=data[parts[index++]]}return data}))},propertyExpr_forEach=function(path,cb,thisArg){!function forEach(parts,iter,thisArg){var part,idx,isArray,isBracket,len=parts.length;for(idx=0;idx<len;idx++)(part=parts[idx])&&(shouldBeQuoted(part)&&(part='"'+part+'"'),isArray=!(isBracket=isQuoted(part))&&/^\d+$/.test(part),iter.call(thisArg,part,isBracket,isArray,idx,parts))}(Array.isArray(path)?path:split(path),cb,thisArg)};function normalizePath(path){return pathCache.get(path)||pathCache.set(path,split(path).map((function(part){return part.replace(CLEAN_QUOTES_REGEX,"$2")})))}function split(path){return path.match(SPLIT_REGEX)||[""]}function isQuoted(str){return"string"==typeof str&&str&&-1!==["'",'"'].indexOf(str.charAt(0))}function shouldBeQuoted(part){return!isQuoted(part)&&(function hasLeadingNumber(part){return part.match(LEAD_DIGIT_REGEX)&&!part.match(DIGIT_REGEX)}(part)||function hasSpecialChars(part){return SPEC_CHAR_REGEX.test(part)}(part))}var propertyExpr_2=split,propertyExpr_5=propertyExpr_getter,propertyExpr_7=propertyExpr_forEach,prefixes_context="$",prefixes_value=".",Reference=function(){function Reference(key,options){if(void 0===options&&(options={}),"string"!=typeof key)throw new TypeError("ref must be a string, got: "+key);if(this.key=key.trim(),""===key)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===prefixes_context,this.isValue=this.key[0]===prefixes_value,this.isSibling=!this.isContext&&!this.isValue;var prefix=this.isContext?prefixes_context:this.isValue?prefixes_value:"";this.path=this.key.slice(prefix.length),this.getter=this.path&&propertyExpr_5(this.path,!0),this.map=options.map}var _proto=Reference.prototype;return _proto.getValue=function getValue(value,parent,context){var result=this.isContext?context:this.isValue?value:parent;return this.getter&&(result=this.getter(result||{})),this.map&&(result=this.map(result)),result},_proto.cast=function cast(value,options){return this.getValue(value,null==options?void 0:options.parent,null==options?void 0:options.context)},_proto.resolve=function resolve(){return this},_proto.describe=function describe(){return{type:"ref",key:this.key}},_proto.toString=function toString(){return"Ref("+this.key+")"},Reference.isRef=function isRef(value){return value&&value.__isYupRef},Reference}();function createValidation(config){function validate(_ref,cb){var value=_ref.value,path=_ref.path,label=_ref.label,options=_ref.options,originalValue=_ref.originalValue,sync=_ref.sync,rest=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}(_ref,["value","path","label","options","originalValue","sync"]),name=config.name,test=config.test,params=config.params,message=config.message,parent=options.parent,context=options.context;function resolve(item){return Reference.isRef(item)?item.getValue(value,parent,context):item}function createError(overrides){void 0===overrides&&(overrides={});var nextParams=mapValues(_extends({value:value,originalValue:originalValue,label:label,path:overrides.path||path},params,overrides.params),resolve),error=new ValidationError(ValidationError.formatError(overrides.message||message,nextParams),value,nextParams.path,overrides.type||name);return error.params=nextParams,error}var ctx=_extends({path:path,parent:parent,type:name,createError:createError,resolve:resolve,options:options,originalValue:originalValue},rest);if(sync){var result;try{var _result;if("function"==typeof(null==(_result=result=test.call(ctx,value,ctx))?void 0:_result.then))throw new Error('Validation test of type: "'+ctx.type+'" returned a Promise during a synchronous validate. This test will finish after the validate call has returned')}catch(err){return void cb(err)}ValidationError.isError(result)?cb(result):result?cb(null,result):cb(createError())}else try{Promise.resolve(test.call(ctx,value,ctx)).then((function(validOrError){ValidationError.isError(validOrError)?cb(validOrError):validOrError?cb(null,validOrError):cb(createError())}))}catch(err){cb(err)}}return validate.OPTIONS=config,validate}Reference.prototype.__isYupRef=!0;function _createForOfIteratorHelperLoose$1(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray$1(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray$1(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$1(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0;return function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(it=o[Symbol.iterator]()).next.bind(it)}function _arrayLikeToArray$1(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var RefSet=function(){function RefSet(){this.list=new Set,this.refs=new Map}var _proto=RefSet.prototype;return _proto.describe=function describe(){for(var _step,description=[],_iterator=_createForOfIteratorHelperLoose$1(this.list);!(_step=_iterator()).done;){var item=_step.value;description.push(item)}for(var _step2,_iterator2=_createForOfIteratorHelperLoose$1(this.refs);!(_step2=_iterator2()).done;){var ref=_step2.value[1];description.push(ref.describe())}return description},_proto.toArray=function toArray$1(){return toArray(this.list).concat(toArray(this.refs.values()))},_proto.add=function add(value){Reference.isRef(value)?this.refs.set(value.key,value):this.list.add(value)},_proto.delete=function _delete(value){Reference.isRef(value)?this.refs.delete(value.key):this.list.delete(value)},_proto.has=function has(value,resolve){if(this.list.has(value))return!0;for(var item,values=this.refs.values();!(item=values.next()).done;)if(resolve(item.value)===value)return!0;return!1},_proto.clone=function clone(){var next=new RefSet;return next.list=new Set(this.list),next.refs=new Map(this.refs),next},_proto.merge=function merge(newItems,removeItems){var next=this.clone();return newItems.list.forEach((function(value){return next.add(value)})),newItems.refs.forEach((function(value){return next.add(value)})),removeItems.list.forEach((function(value){return next.delete(value)})),removeItems.refs.forEach((function(value){return next.delete(value)})),next},function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(RefSet,[{key:"size",get:function get(){return this.list.size+this.refs.size}}]),RefSet}();function SchemaType(options){var _this=this;if(void 0===options&&(options={}),!(this instanceof SchemaType))return new SchemaType;this._deps=[],this._conditions=[],this._options={abortEarly:!0,recursive:!0},this._exclusive=Object.create(null),this._whitelist=new RefSet,this._blacklist=new RefSet,this.tests=[],this.transforms=[],this.withMutation((function(){_this.typeError(mixed.notType)})),has(options,"default")&&(this._defaultDefault=options.default),this.type=options.type||"mixed",this._type=options.type||"mixed"}for(var proto=SchemaType.prototype={__isYupSchema__:!0,constructor:SchemaType,clone:function clone(){var _this2=this;return this._mutate?this:cloneDeepWith(this,(function(value,key){return isSchema(value)&&value!==_this2?value:"_whitelist"===key||"_blacklist"===key?value.clone():void 0}))},label:function label(_label){var next=this.clone();return next._label=_label,next},meta:function meta(obj){if(0===arguments.length)return this._meta;var next=this.clone();return next._meta=_extends(next._meta||{},obj),next},withMutation:function withMutation(fn){var before=this._mutate;this._mutate=!0;var result=fn(this);return this._mutate=before,result},concat:function concat(schema){if(!schema||schema===this)return this;if(schema._type!==this._type&&"mixed"!==this._type)throw new TypeError("You cannot `concat()` schema's of different types: "+this._type+" and "+schema._type);var next=prependDeep(schema.clone(),this);return has(schema,"_default")&&(next._default=schema._default),next.tests=this.tests,next._exclusive=this._exclusive,next._whitelist=this._whitelist.merge(schema._whitelist,schema._blacklist),next._blacklist=this._blacklist.merge(schema._blacklist,schema._whitelist),next.withMutation((function(next){schema.tests.forEach((function(fn){next.test(fn.OPTIONS)}))})),next},isType:function isType(v){return!(!this._nullable||null!==v)||(!this._typeCheck||this._typeCheck(v))},resolve:function resolve(options){var schema=this;if(schema._conditions.length){var conditions=schema._conditions;(schema=schema.clone())._conditions=[],schema=(schema=conditions.reduce((function(schema,condition){return condition.resolve(schema,options)}),schema)).resolve(options)}return schema},cast:function cast(value,options){void 0===options&&(options={});var resolvedSchema=this.resolve(_extends({value:value},options)),result=resolvedSchema._cast(value,options);if(void 0!==value&&!1!==options.assert&&!0!==resolvedSchema.isType(result)){var formattedValue=printValue(value),formattedResult=printValue(result);throw new TypeError("The value of "+(options.path||"field")+' could not be cast to a value that satisfies the schema type: "'+resolvedSchema._type+'". \n\nattempted value: '+formattedValue+" \n"+(formattedResult!==formattedValue?"result of cast: "+formattedResult:""))}return result},_cast:function _cast(rawValue){var _this3=this,value=void 0===rawValue?rawValue:this.transforms.reduce((function(value,fn){return fn.call(_this3,value,rawValue)}),rawValue);return void 0===value&&has(this,"_default")&&(value=this.default()),value},_validate:function _validate(_value,options,cb){var _this4=this;void 0===options&&(options={});var _options=options,sync=_options.sync,path=_options.path,_options$from=_options.from,from=void 0===_options$from?[]:_options$from,_options$originalValu=_options.originalValue,originalValue=void 0===_options$originalValu?_value:_options$originalValu,_options$strict=_options.strict,strict=void 0===_options$strict?this._options.strict:_options$strict,_options$abortEarly=_options.abortEarly,abortEarly=void 0===_options$abortEarly?this._options.abortEarly:_options$abortEarly,value=_value;strict||(this._validating=!0,value=this._cast(value,_extends({assert:!1},options)),this._validating=!1);var args={value:value,path:path,options:options,originalValue:originalValue,schema:this,label:this._label,sync:sync,from:from},initialTests=[];return this._typeError&&initialTests.push(this._typeError),this._whitelistError&&initialTests.push(this._whitelistError),this._blacklistError&&initialTests.push(this._blacklistError),runTests({args:args,value:value,path:path,sync:sync,tests:initialTests,endEarly:abortEarly},(function(err){err?cb(err):runTests({tests:_this4.tests,args:args,path:path,sync:sync,value:value,endEarly:abortEarly},cb)}))},validate:function validate(value,options,maybeCb){void 0===options&&(options={});var schema=this.resolve(_extends({},options,{value:value}));return"function"==typeof maybeCb?schema._validate(value,options,maybeCb):new Promise((function(resolve,reject){return schema._validate(value,options,(function(err,value){err?reject(err):resolve(value)}))}))},validateSync:function validateSync(value,options){var result;return void 0===options&&(options={}),this.resolve(_extends({},options,{value:value}))._validate(value,_extends({},options,{sync:!0}),(function(err,value){if(err)throw err;result=value})),result},isValid:function isValid(value,options){return this.validate(value,options).then((function(){return!0})).catch((function(err){if("ValidationError"===err.name)return!1;throw err}))},isValidSync:function isValidSync(value,options){try{return this.validateSync(value,options),!0}catch(err){if("ValidationError"===err.name)return!1;throw err}},getDefault:function getDefault(options){return void 0===options&&(options={}),this.resolve(options).default()},default:function _default(def){if(0===arguments.length){var defaultValue=has(this,"_default")?this._default:this._defaultDefault;return"function"==typeof defaultValue?defaultValue.call(this):cloneDeepWith(defaultValue)}var next=this.clone();return next._default=def,next},strict:function strict(isStrict){void 0===isStrict&&(isStrict=!0);var next=this.clone();return next._options.strict=isStrict,next},_isPresent:function _isPresent(value){return null!=value},required:function required(message){return void 0===message&&(message=mixed.required),this.test({message:message,name:"required",exclusive:!0,test:function test(value){return this.schema._isPresent(value)}})},notRequired:function notRequired(){var next=this.clone();return next.tests=next.tests.filter((function(test){return"required"!==test.OPTIONS.name})),next},nullable:function nullable(isNullable){void 0===isNullable&&(isNullable=!0);var next=this.clone();return next._nullable=isNullable,next},transform:function transform(fn){var next=this.clone();return next.transforms.push(fn),next},test:function test(){var opts;if(void 0===(opts=1===arguments.length?"function"==typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]}).message&&(opts.message=mixed.default),"function"!=typeof opts.test)throw new TypeError("`test` is a required parameters");var next=this.clone(),validate=createValidation(opts),isExclusive=opts.exclusive||opts.name&&!0===next._exclusive[opts.name];if(opts.exclusive&&!opts.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return next._exclusive[opts.name]=!!opts.exclusive,next.tests=next.tests.filter((function(fn){if(fn.OPTIONS.name===opts.name){if(isExclusive)return!1;if(fn.OPTIONS.test===validate.OPTIONS.test)return!1}return!0})),next.tests.push(validate),next},when:function when(keys,options){1===arguments.length&&(options=keys,keys=".");var next=this.clone(),deps=[].concat(keys).map((function(key){return new Reference(key)}));return deps.forEach((function(dep){dep.isSibling&&next._deps.push(dep.key)})),next._conditions.push(new Condition(deps,options)),next},typeError:function typeError(message){var next=this.clone();return next._typeError=createValidation({message:message,name:"typeError",test:function test(value){return!(void 0!==value&&!this.schema.isType(value))||this.createError({params:{type:this.schema._type}})}}),next},oneOf:function oneOf(enums,message){void 0===message&&(message=mixed.oneOf);var next=this.clone();return enums.forEach((function(val){next._whitelist.add(val),next._blacklist.delete(val)})),next._whitelistError=createValidation({message:message,name:"oneOf",test:function test(value){if(void 0===value)return!0;var valids=this.schema._whitelist;return!!valids.has(value,this.resolve)||this.createError({params:{values:valids.toArray().join(", ")}})}}),next},notOneOf:function notOneOf(enums,message){void 0===message&&(message=mixed.notOneOf);var next=this.clone();return enums.forEach((function(val){next._blacklist.add(val),next._whitelist.delete(val)})),next._blacklistError=createValidation({message:message,name:"notOneOf",test:function test(value){var invalids=this.schema._blacklist;return!invalids.has(value,this.resolve)||this.createError({params:{values:invalids.toArray().join(", ")}})}}),next},strip:function strip(_strip){void 0===_strip&&(_strip=!0);var next=this.clone();return next._strip=_strip,next},_option:function _option(key,overrides){return has(overrides,key)?overrides[key]:this._options[key]},describe:function describe(){var next=this.clone(),description={type:next._type,meta:next._meta,label:next._label,tests:next.tests.map((function(fn){return{name:fn.OPTIONS.name,params:fn.OPTIONS.params}})).filter((function(n,idx,list){return list.findIndex((function(c){return c.name===n.name}))===idx}))};return next._whitelist.size&&(description.oneOf=next._whitelist.describe()),next._blacklist.size&&(description.notOneOf=next._blacklist.describe()),description},defined:function defined(message){return void 0===message&&(message=mixed.defined),this.test({message:message,name:"defined",exclusive:!0,test:function test(value){return void 0!==value}})}},_loop=function _loop(){var method=_arr[_i];proto[method+"At"]=function(path,value,options){void 0===options&&(options={});var _getIn=function getIn(schema,path,value,context){var parent,lastPart,lastPartDebug;return void 0===context&&(context=value),path?(propertyExpr_7(path,(function(_part,isBracket,isArray){var part=isBracket?function trim(part){return part.substr(0,part.length-1).substr(1)}(_part):_part;if((schema=schema.resolve({context:context,parent:parent,value:value})).innerType){var idx=isArray?parseInt(part,10):0;if(value&&idx>=value.length)throw new Error("Yup.reach cannot resolve an array item at index: "+_part+", in the path: "+path+". because there is no value at that index. ");parent=value,value=value&&value[idx],schema=schema.innerType}if(!isArray){if(!schema.fields||!schema.fields[part])throw new Error("The schema does not contain the path: "+path+". (failed at: "+lastPartDebug+' which is a type: "'+schema._type+'")');parent=value,value=value&&value[part],schema=schema.fields[part]}lastPart=part,lastPartDebug=isBracket?"["+_part+"]":"."+_part})),{schema:schema,parent:parent,parentPath:lastPart}):{parent:parent,parentPath:path,schema:schema}}(this,path,value,options.context),parent=_getIn.parent,parentPath=_getIn.parentPath;return _getIn.schema[method](parent&&parent[parentPath],_extends({},options,{parent:parent,path:path}))}},_i=0,_arr=["validate","validateSync"];_i<_arr.length;_i++)_loop();for(var _i2=0,_arr2=["equals","is"];_i2<_arr2.length;_i2++){proto[_arr2[_i2]]=proto.oneOf}for(var _i3=0,_arr3=["not","nope"];_i3<_arr3.length;_i3++){proto[_arr3[_i3]]=proto.notOneOf}function inherits(ctor,superCtor,spec){ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}}),_extends(ctor.prototype,spec)}function BooleanSchema(){var _this=this;if(!(this instanceof BooleanSchema))return new BooleanSchema;SchemaType.call(this,{type:"boolean"}),this.withMutation((function(){_this.transform((function(value){if(!this.isType(value)){if(/^(true|1)$/i.test(value))return!0;if(/^(false|0)$/i.test(value))return!1}return value}))}))}proto.optional=proto.notRequired,inherits(BooleanSchema,SchemaType,{_typeCheck:function _typeCheck(v){return v instanceof Boolean&&(v=v.valueOf()),"boolean"==typeof v}});var isAbsent=function(value){return null==value},rEmail=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,rUrl=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,rUUID=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,isTrimmed=function isTrimmed(value){return isAbsent(value)||value===value.trim()};function StringSchema(){var _this=this;if(!(this instanceof StringSchema))return new StringSchema;SchemaType.call(this,{type:"string"}),this.withMutation((function(){_this.transform((function(value){return this.isType(value)?value:null!=value&&value.toString?value.toString():value}))}))}inherits(StringSchema,SchemaType,{_typeCheck:function _typeCheck(value){return value instanceof String&&(value=value.valueOf()),"string"==typeof value},_isPresent:function _isPresent(value){return SchemaType.prototype._isPresent.call(this,value)&&value.length>0},length:function length(_length,message){return void 0===message&&(message=string.length),this.test({message:message,name:"length",exclusive:!0,params:{length:_length},test:function test(value){return isAbsent(value)||value.length===this.resolve(_length)}})},min:function min(_min,message){return void 0===message&&(message=string.min),this.test({message:message,name:"min",exclusive:!0,params:{min:_min},test:function test(value){return isAbsent(value)||value.length>=this.resolve(_min)}})},max:function max(_max,message){return void 0===message&&(message=string.max),this.test({name:"max",exclusive:!0,message:message,params:{max:_max},test:function test(value){return isAbsent(value)||value.length<=this.resolve(_max)}})},matches:function matches(regex,options){var message,name,excludeEmptyString=!1;return options&&("object"==typeof options?(excludeEmptyString=options.excludeEmptyString,message=options.message,name=options.name):message=options),this.test({name:name||"matches",message:message||string.matches,params:{regex:regex},test:function test(value){return isAbsent(value)||""===value&&excludeEmptyString||-1!==value.search(regex)}})},email:function email(message){return void 0===message&&(message=string.email),this.matches(rEmail,{name:"email",message:message,excludeEmptyString:!0})},url:function url(message){return void 0===message&&(message=string.url),this.matches(rUrl,{name:"url",message:message,excludeEmptyString:!0})},uuid:function uuid(message){return void 0===message&&(message=string.uuid),this.matches(rUUID,{name:"uuid",message:message,excludeEmptyString:!1})},ensure:function ensure(){return this.default("").transform((function(val){return null===val?"":val}))},trim:function trim(message){return void 0===message&&(message=string.trim),this.transform((function(val){return null!=val?val.trim():val})).test({message:message,name:"trim",test:isTrimmed})},lowercase:function lowercase(message){return void 0===message&&(message=string.lowercase),this.transform((function(value){return isAbsent(value)?value:value.toLowerCase()})).test({message:message,name:"string_case",exclusive:!0,test:function test(value){return isAbsent(value)||value===value.toLowerCase()}})},uppercase:function uppercase(message){return void 0===message&&(message=string.uppercase),this.transform((function(value){return isAbsent(value)?value:value.toUpperCase()})).test({message:message,name:"string_case",exclusive:!0,test:function test(value){return isAbsent(value)||value===value.toUpperCase()}})}});inherits((function NumberSchema(){var _this=this;if(!(this instanceof NumberSchema))return new NumberSchema;SchemaType.call(this,{type:"number"}),this.withMutation((function(){_this.transform((function(value){var parsed=value;if("string"==typeof parsed){if(""===(parsed=parsed.replace(/\s/g,"")))return NaN;parsed=+parsed}return this.isType(parsed)?parsed:parseFloat(parsed)}))}))}),SchemaType,{_typeCheck:function _typeCheck(value){return value instanceof Number&&(value=value.valueOf()),"number"==typeof value&&!function isNaN(value){return value!=+value}(value)},min:function min(_min,message){return void 0===message&&(message=number.min),this.test({message:message,name:"min",exclusive:!0,params:{min:_min},test:function test(value){return isAbsent(value)||value>=this.resolve(_min)}})},max:function max(_max,message){return void 0===message&&(message=number.max),this.test({message:message,name:"max",exclusive:!0,params:{max:_max},test:function test(value){return isAbsent(value)||value<=this.resolve(_max)}})},lessThan:function lessThan(less,message){return void 0===message&&(message=number.lessThan),this.test({message:message,name:"max",exclusive:!0,params:{less:less},test:function test(value){return isAbsent(value)||value<this.resolve(less)}})},moreThan:function moreThan(more,message){return void 0===message&&(message=number.moreThan),this.test({message:message,name:"min",exclusive:!0,params:{more:more},test:function test(value){return isAbsent(value)||value>this.resolve(more)}})},positive:function positive(msg){return void 0===msg&&(msg=number.positive),this.moreThan(0,msg)},negative:function negative(msg){return void 0===msg&&(msg=number.negative),this.lessThan(0,msg)},integer:function integer(message){return void 0===message&&(message=number.integer),this.test({name:"integer",message:message,test:function test(val){return isAbsent(val)||Number.isInteger(val)}})},truncate:function truncate(){return this.transform((function(value){return isAbsent(value)?value:0|value}))},round:function round(method){var avail=["ceil","floor","round","trunc"];if("trunc"===(method=method&&method.toLowerCase()||"round"))return this.truncate();if(-1===avail.indexOf(method.toLowerCase()))throw new TypeError("Only valid options for round() are: "+avail.join(", "));return this.transform((function(value){return isAbsent(value)?value:Math[method](value)}))}});var isoReg=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;var invalidDate=new Date("");inherits((function DateSchema(){var _this=this;if(!(this instanceof DateSchema))return new DateSchema;SchemaType.call(this,{type:"date"}),this.withMutation((function(){_this.transform((function(value){return this.isType(value)?value:(value=function parseIsoDate(date){var timestamp,struct,numericKeys=[1,4,5,6,7,10,11],minutesOffset=0;if(struct=isoReg.exec(date)){for(var k,i=0;k=numericKeys[i];++i)struct[k]=+struct[k]||0;struct[2]=(+struct[2]||1)-1,struct[3]=+struct[3]||1,struct[7]=struct[7]?String(struct[7]).substr(0,3):0,void 0!==struct[8]&&""!==struct[8]||void 0!==struct[9]&&""!==struct[9]?("Z"!==struct[8]&&void 0!==struct[9]&&(minutesOffset=60*struct[10]+struct[11],"+"===struct[9]&&(minutesOffset=0-minutesOffset)),timestamp=Date.UTC(struct[1],struct[2],struct[3],struct[4],struct[5]+minutesOffset,struct[6],struct[7])):timestamp=+new Date(struct[1],struct[2],struct[3],struct[4],struct[5],struct[6],struct[7])}else timestamp=Date.parse?Date.parse(date):NaN;return timestamp}(value),isNaN(value)?invalidDate:new Date(value))}))}))}),SchemaType,{_typeCheck:function _typeCheck(v){return function isDate(obj){return"[object Date]"===Object.prototype.toString.call(obj)}(v)&&!isNaN(v.getTime())},min:function min(_min,message){void 0===message&&(message=date.min);var limit=_min;if(!Reference.isRef(limit)&&(limit=this.cast(_min),!this._typeCheck(limit)))throw new TypeError("`min` must be a Date or a value that can be `cast()` to a Date");return this.test({message:message,name:"min",exclusive:!0,params:{min:_min},test:function test(value){return isAbsent(value)||value>=this.resolve(limit)}})},max:function max(_max,message){void 0===message&&(message=date.max);var limit=_max;if(!Reference.isRef(limit)&&(limit=this.cast(_max),!this._typeCheck(limit)))throw new TypeError("`max` must be a Date or a value that can be `cast()` to a Date");return this.test({message:message,name:"max",exclusive:!0,params:{max:_max},test:function test(value){return isAbsent(value)||value<=this.resolve(limit)}})}});var deburrLetter=function basePropertyOf(object){return function(key){return null==object?void 0:object[key]}}({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reComboMark=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var rsBreakRange="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsBreak="["+rsBreakRange+"]",rsDigits="\\d+",rsDingbat="[\\u2700-\\u27bf]",rsLower="[a-z\\xdf-\\xf6\\xf8-\\xff]",rsMisc="[^\\ud800-\\udfff"+rsBreakRange+rsDigits+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",reOptMod="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+(?:['](?:d|ll|m|re|s|t|ve))?",rsUpper+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsDigits,rsEmoji].join("|"),"g");function words(string,pattern,guard){return string=toString$1(string),void 0===(pattern=guard?void 0:pattern)?function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}(string)?function unicodeWords(string){return string.match(reUnicodeWord)||[]}(string):function asciiWords(string){return string.match(reAsciiWord)||[]}(string):string.match(pattern)||[]}var reApos=RegExp("[']","g");function createCompounder(callback){return function(string){return function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}(words(function deburr(string){return(string=toString$1(string))&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}(string).replace(reApos,"")),callback,"")}}var snakeCase=createCompounder((function(result,word,index){return result+(index?"_":"")+word.toLowerCase()}));function castSlice(array,start,end){var length=array.length;return end=void 0===end?length:end,!start&&end>=length?array:function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}(array,start,end)}var upperFirst=function createCaseFirst(methodName){return function(string){var strSymbols=hasUnicode(string=toString$1(string))?stringToArray(string):void 0,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}("toUpperCase");var camelCase=createCompounder((function(result,word,index){return word=word.toLowerCase(),result+(index?function capitalize(string){return upperFirst(toString$1(string).toLowerCase())}(word):word)}));var toposort_1=function(edges){return toposort(function uniqueNodes(arr){for(var res=new Set,i=0,len=arr.length;i<len;i++){var edge=arr[i];res.add(edge[0]),res.add(edge[1])}return Array.from(res)}(edges),edges)};function toposort(nodes,edges){var cursor=nodes.length,sorted=new Array(cursor),visited={},i=cursor,outgoingEdges=function makeOutgoingEdges(arr){for(var edges=new Map,i=0,len=arr.length;i<len;i++){var edge=arr[i];edges.has(edge[0])||edges.set(edge[0],new Set),edges.has(edge[1])||edges.set(edge[1],new Set),edges.get(edge[0]).add(edge[1])}return edges}(edges),nodesHash=function makeNodesHash(arr){for(var res=new Map,i=0,len=arr.length;i<len;i++)res.set(arr[i],i);return res}(nodes);for(edges.forEach((function(edge){if(!nodesHash.has(edge[0])||!nodesHash.has(edge[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));i--;)visited[i]||visit(nodes[i],i,new Set);return sorted;function visit(node,i,predecessors){if(predecessors.has(node)){var nodeRep;try{nodeRep=", node was:"+JSON.stringify(node)}catch(e){nodeRep=""}throw new Error("Cyclic dependency"+nodeRep)}if(!nodesHash.has(node))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(node));if(!visited[i]){visited[i]=!0;var outgoing=outgoingEdges.get(node)||new Set;if(i=(outgoing=Array.from(outgoing)).length){predecessors.add(node);do{var child=outgoing[--i];visit(child,nodesHash.get(child),predecessors)}while(i);predecessors.delete(node)}sorted[--cursor]=node}}}function sortFields(fields,excludes){void 0===excludes&&(excludes=[]);var edges=[],nodes=[];function addNode(depPath,key){var node=propertyExpr_2(depPath)[0];~nodes.indexOf(node)||nodes.push(node),~excludes.indexOf(key+"-"+node)||edges.push([key,node])}var _loop=function _loop(key){if(has(fields,key)){var value=fields[key];~nodes.indexOf(key)||nodes.push(key),Reference.isRef(value)&&value.isSibling?addNode(value.path,key):isSchema(value)&&value._deps&&value._deps.forEach((function(path){return addNode(path,key)}))}};for(var key in fields)_loop(key);return toposort_1.array(nodes,edges).reverse()}function findIndex(arr,err){var idx=1/0;return arr.some((function(key,ii){if(-1!==err.path.indexOf(key))return idx=ii,!0})),idx}function sortByKeyOrder(keys){return function(a,b){return findIndex(keys,a)-findIndex(keys,b)}}function _createForOfIteratorHelperLoose(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0;return function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(it=o[Symbol.iterator]()).next.bind(it)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}toposort_1.array=toposort;var isObject$1=function isObject(obj){return"[object Object]"===Object.prototype.toString.call(obj)};function ObjectSchema(spec){var _this2=this;if(!(this instanceof ObjectSchema))return new ObjectSchema(spec);SchemaType.call(this,{type:"object",default:function _default(){var _this=this;if(this._nodes.length){var dft={};return this._nodes.forEach((function(key){dft[key]=_this.fields[key].default?_this.fields[key].default():void 0})),dft}}}),this.fields=Object.create(null),this._sortErrors=sortByKeyOrder([]),this._nodes=[],this._excludedEdges=[],this.withMutation((function(){_this2.transform((function coerce(value){if("string"==typeof value)try{value=JSON.parse(value)}catch(err){value=null}return this.isType(value)?value:null})),spec&&_this2.shape(spec)}))}function ArraySchema(type){var _this=this;if(!(this instanceof ArraySchema))return new ArraySchema(type);SchemaType.call(this,{type:"array"}),this._subType=void 0,this.innerType=void 0,this.withMutation((function(){_this.transform((function(values){if("string"==typeof values)try{values=JSON.parse(values)}catch(err){values=null}return this.isType(values)?values:null})),type&&_this.of(type)}))}inherits(ObjectSchema,SchemaType,{_typeCheck:function _typeCheck(value){return isObject$1(value)||"function"==typeof value},_cast:function _cast(_value,options){var _this3=this;void 0===options&&(options={});var value=SchemaType.prototype._cast.call(this,_value);if(void 0===value)return this.default();if(!this._typeCheck(value))return value;for(var _step,fields=this.fields,strip=!0===this._option("stripUnknown",options),props=this._nodes.concat(Object.keys(value).filter((function(v){return-1===_this3._nodes.indexOf(v)}))),intermediateValue={},innerOptions=_extends({},options,{parent:intermediateValue,__validating:options.__validating||!1}),isChanged=!1,_iterator=_createForOfIteratorHelperLoose(props);!(_step=_iterator()).done;){var prop=_step.value,field=fields[prop],exists=has(value,prop);if(field){var fieldValue,strict=field._options&&field._options.strict;if(innerOptions.path=(options.path?options.path+".":"")+prop,innerOptions.value=value[prop],!0===(field=field.resolve(innerOptions))._strip){isChanged=isChanged||prop in value;continue}void 0!==(fieldValue=options.__validating&&strict?value[prop]:field.cast(value[prop],innerOptions))&&(intermediateValue[prop]=fieldValue)}else exists&&!strip&&(intermediateValue[prop]=value[prop]);intermediateValue[prop]!==value[prop]&&(isChanged=!0)}return isChanged?intermediateValue:value},_validate:function _validate(_value,opts,callback){var _this4=this;void 0===opts&&(opts={});var errors=[],_opts=opts,sync=_opts.sync,_opts$from=_opts.from,from=void 0===_opts$from?[]:_opts$from,_opts$originalValue=_opts.originalValue,originalValue=void 0===_opts$originalValue?_value:_opts$originalValue,_opts$abortEarly=_opts.abortEarly,abortEarly=void 0===_opts$abortEarly?this._options.abortEarly:_opts$abortEarly,_opts$recursive=_opts.recursive,recursive=void 0===_opts$recursive?this._options.recursive:_opts$recursive;from=[{schema:this,value:originalValue}].concat(from),opts.__validating=!0,opts.originalValue=originalValue,opts.from=from,SchemaType.prototype._validate.call(this,_value,opts,(function(err,value){if(err){if(abortEarly)return void callback(err);errors.push(err),value=err.value}if(recursive&&isObject$1(value)){originalValue=originalValue||value;var tests=_this4._nodes.map((function(key){return function(_,cb){var path=-1===key.indexOf(".")?(opts.path?opts.path+".":"")+key:(opts.path||"")+'["'+key+'"]',field=_this4.fields[key];field&&field.validate?field.validate(value[key],_extends({},opts,{path:path,from:from,strict:!0,parent:value,originalValue:originalValue[key]}),cb):cb(null)}}));runTests({sync:sync,tests:tests,value:value,errors:errors,endEarly:abortEarly,sort:_this4._sortErrors,path:opts.path},callback)}else callback(errors[0]||null,value)}))},concat:function concat(schema){var next=SchemaType.prototype.concat.call(this,schema);return next._nodes=sortFields(next.fields,next._excludedEdges),next},shape:function shape(schema,excludes){void 0===excludes&&(excludes=[]);var next=this.clone(),fields=_extends(next.fields,schema);if(next.fields=fields,next._sortErrors=sortByKeyOrder(Object.keys(fields)),excludes.length){Array.isArray(excludes[0])||(excludes=[excludes]);var keys=excludes.map((function(_ref){return _ref[0]+"-"+_ref[1]}));next._excludedEdges=next._excludedEdges.concat(keys)}return next._nodes=sortFields(fields,next._excludedEdges),next},from:function from(_from,to,alias){var fromGetter=propertyExpr_5(_from,!0);return this.transform((function(obj){if(null==obj)return obj;var newObj=obj;return has(obj,_from)&&(newObj=_extends({},obj),alias||delete newObj[_from],newObj[to]=fromGetter(obj)),newObj}))},noUnknown:function noUnknown(noAllow,message){void 0===noAllow&&(noAllow=!0),void 0===message&&(message=object.noUnknown),"string"==typeof noAllow&&(message=noAllow,noAllow=!0);var next=this.test({name:"noUnknown",exclusive:!0,message:message,test:function test(value){if(null==value)return!0;var unknownKeys=function unknown(ctx,value){var known=Object.keys(ctx.fields);return Object.keys(value).filter((function(key){return-1===known.indexOf(key)}))}(this.schema,value);return!noAllow||0===unknownKeys.length||this.createError({params:{unknown:unknownKeys.join(", ")}})}});return next._options.stripUnknown=noAllow,next},unknown:function unknown(allow,message){return void 0===allow&&(allow=!0),void 0===message&&(message=object.noUnknown),this.noUnknown(!allow,message)},transformKeys:function transformKeys(fn){return this.transform((function(obj){return obj&&function mapKeys(object,iteratee){var result={};return iteratee=baseIteratee(iteratee),baseForOwn(object,(function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)})),result}(obj,(function(_,key){return fn(key)}))}))},camelCase:function camelCase$1(){return this.transformKeys(camelCase)},snakeCase:function snakeCase$1(){return this.transformKeys(snakeCase)},constantCase:function constantCase(){return this.transformKeys((function(key){return snakeCase(key).toUpperCase()}))},describe:function describe(){var base=SchemaType.prototype.describe.call(this);return base.fields=mapValues(this.fields,(function(value){return value.describe()})),base}}),inherits(ArraySchema,SchemaType,{_typeCheck:function _typeCheck(v){return Array.isArray(v)},_cast:function _cast(_value,_opts){var _this2=this,value=SchemaType.prototype._cast.call(this,_value,_opts);if(!this._typeCheck(value)||!this.innerType)return value;var isChanged=!1,castArray=value.map((function(v,idx){var castElement=_this2.innerType.cast(v,_extends({},_opts,{path:(_opts.path||"")+"["+idx+"]"}));return castElement!==v&&(isChanged=!0),castElement}));return isChanged?castArray:value},_validate:function _validate(_value,options,callback){var _this3=this;void 0===options&&(options={});var errors=[],sync=options.sync,path=options.path,innerType=this.innerType,endEarly=this._option("abortEarly",options),recursive=this._option("recursive",options),originalValue=null!=options.originalValue?options.originalValue:_value;SchemaType.prototype._validate.call(this,_value,options,(function(err,value){if(err){if(endEarly)return void callback(err);errors.push(err),value=err.value}if(recursive&&innerType&&_this3._typeCheck(value)){originalValue=originalValue||value;for(var tests=new Array(value.length),_loop=function _loop(idx){var item=value[idx],path=(options.path||"")+"["+idx+"]",innerOptions=_extends({},options,{path:path,strict:!0,parent:value,index:idx,originalValue:originalValue[idx]});tests[idx]=function(_,cb){return innerType.validate?innerType.validate(item,innerOptions,cb):cb(null)}},idx=0;idx<value.length;idx++)_loop(idx);runTests({sync:sync,path:path,value:value,errors:errors,endEarly:endEarly,tests:tests},callback)}else callback(errors[0]||null,value)}))},_isPresent:function _isPresent(value){return SchemaType.prototype._isPresent.call(this,value)&&value.length>0},of:function of(schema){var next=this.clone();if(!1!==schema&&!isSchema(schema))throw new TypeError("`array.of()` sub-schema must be a valid yup schema, or `false` to negate a current sub-schema. not: "+printValue(schema));return next._subType=schema,next.innerType=schema,next},min:function min(_min,message){return message=message||array$1.min,this.test({message:message,name:"min",exclusive:!0,params:{min:_min},test:function test(value){return isAbsent(value)||value.length>=this.resolve(_min)}})},max:function max(_max,message){return message=message||array$1.max,this.test({message:message,name:"max",exclusive:!0,params:{max:_max},test:function test(value){return isAbsent(value)||value.length<=this.resolve(_max)}})},ensure:function ensure(){var _this4=this;return this.default((function(){return[]})).transform((function(val,original){return _this4._typeCheck(val)?val:null==original?[]:[].concat(original)}))},compact:function compact(rejector){var reject=rejector?function(v,i,a){return!rejector(v,i,a)}:function(v){return!!v};return this.transform((function(values){return null!=values?values.filter(reject):values}))},describe:function describe(){var base=SchemaType.prototype.describe.call(this);return this.innerType&&(base.innerType=this.innerType.describe()),base}});var ref=function ref(key,options){return new Reference(key,options)};function addMethod(schemaType,name,fn){if(!schemaType||!isSchema(schemaType.prototype))throw new TypeError("You must provide a yup schema constructor function");if("string"!=typeof name)throw new TypeError("A Method name must be provided");if("function"!=typeof fn)throw new TypeError("Method function must be provided");schemaType.prototype[name]=fn}var VALIDATIONRULES_TITLE={MIN:5,MAX:50},VALIDATIONRULES_PURPOSE={MIN:40,MAX:250},VALIDATIONRULES_EXECUTIVECOMBINED={MIN:40,MAX:250},VALIDATIONRULES_CONTEXTEXPLANATION={MIN:40,MAX:500},VALIDATIONRULES_CONTEXTEXPLANATIONCOMBINED={MIN:40,MAX:500},VALIDATIONRULES_STATISTICALNOTES={MIN:40,MAX:250},VALIDATIONRULES_STRUCTURENOTES={MIN:40,MAX:250},VALIDATIONRULES_DATAELEMENTDESCRIPTIONACCESSOR={MIN:0,MAX:125},VALIDATIONRULES_ELEMENTDESCRIPTIONACCESSOR={MAX:125},VALIDATIONRULES_ANNOTATIONNOTETITLE={MIN:5,MAX:50},VALIDATIONRULES_ANNOTATIONNOTELABEL={MIN:25,MAX:125},VALIDATIONRULES_ANNOTATIONACCESSIBILITYDESCRIPTION={MIN:25,MAX:125},VALIDATIONRULES_UNIQUEID={MIN:1,MAX:125},VALIDATIONMESSAGES$1={WARNINGS:{TITLE:"Either mainTitle or accessibility.title is required",LONGDESCRIPTION:"Either accessibility.longDescription or accessibility.contextExplanation is required",EXECUTIVESUMMARY:"Either accessibility.purpose or accessibility.executiveSummary is required",ONCLICKEVENT:"accessibility.elementsAreInterface needs a boolean value either true or false",ANNOTATIONDESCRIPTION:"Either annotation.accessibilityDescription or annotation.note.label is required",WARNINGLOGGROUP:"CHARTNAME has accessibility warnings and other messages",NORMALIZED:"Either tooltipLabel or dataLabel should have normalized format"},RECOMMENDATIONS:{EXECUTIVESUMMARY:"Either accessibility.purpose or accessibility.executiveSummary should have minimum 40 characters and a combined length between 40 and 250 characters",LONGDESCRIPTION:"Either accessibility.longDescription or accessibility.contextExplanation should have minimum 40 characters and a combined length between 40 and 500 characters",TITLE:"Either mainTitle or accessibility.title should have length between 5 and 50 characters",STATISTICALNOTES:"accessibility.statisticalNotes should have length between 40 and 250 characters",STRUCTURENOTES:"accessibility.structureNotes should have length between 40 and 250 characters",DATAELEMENTDESCRIPTIONACCESSOR:"accessibility.elementDescriptionAccessor should have length between 0 and 125 characters",ELEMENTDESCRIPTIONACCESSOR:"Passing accessibility.elementDescriptionAccessor can add description to chart elements",ANNOTATIONNOTETITLE:"Should have length between 5 and 50 characters",ANNOTATIONNOTELABEL:"Should have length between 25 and 125 characters",ANNOTATIONACCESSIBILITYDESCRIPTION:"Should have length between 25 and 125 characters",UNIQUEID:"Should have human readable uniqueID",INCLUDEDATAKEYNAMES:"accessibility.includeDataKeyNames: data's key names are recommended ashuman-readable with includeDataKeyNames set to true",RECOMMENDATIONLOGGROUP:"CHARTNAME has strong accessibility recommendations",SPECIALRECOMMENDATION:"Success! CHARTNAME has met minimum accessibility, we recommend you disable accessibility validation by setting accessibility.disableValidation"}},ACCESSIBILITYPROPS_MAINTITLE="mainTitle",ACCESSIBILITYPROPS_CONTEXTEXPLANATION="contextExplanation",ACCESSIBILITYPROPS_PURPOSE="purpose",ACCESSIBILITYPROPS_ONCLICKEVENT="onClickEvent",ACCESSIBILITYPROPS_NOTE="note",ACCESSIBILITYPROPS_DISABLEVALIDATION="disableValidation",ACCESSIBILITYPROPS_INCLUDEDATAKEYNAMES="includeDataKeyNames",ACCESSIBILITYPROPS_CHARTNAME="CHARTNAME",ACCESSIBILITYPROPS_TOOLTIPLABEL="tooltipLabel",ACCESSIBILITYPROPS_DATALABEL="dataLabel",ACCESSIBILITYPROPS_VALUEACCESSOR="valueAccessor",options$1={abortEarly:!1},accessibilityWarningsSubSchema={requiredSchema:StringSchema().required().trim(),requiredSubSchema:ObjectSchema().shape({label:StringSchema().required().trim()}),requiredBooleanSchema:BooleanSchema().required()},getCustomSchema=function(min,max){return StringSchema().required().trim().min(min).max(max)},validateBySchemaRefs=function(validationMessage,tooltipLabelRef,dataLabelRef,valueAccessorRef,schema){return this.test({message:validationMessage,test:function(value){var tooltipLabelValue=this.resolve(tooltipLabelRef),dataLabelValue=this.resolve(dataLabelRef),valueAccessorValue=this.resolve(valueAccessorRef);if(value&&StringSchema().min(1).isValidSync(valueAccessorValue,options$1)){var valueAccessorIndex=Array.prototype.findIndex.call(tooltipLabelValue.labelAccessor,(function(el){return el.trim()===(""+valueAccessorValue).trim()}));return valueAccessorIndex>-1?schema.isValidSync(((tooltipLabelValue||{}).format||[""])[valueAccessorIndex],options$1):schema.isValidSync((dataLabelValue||{}).format,options$1)}return!0}})},validateBySchemaRef$1=function(validationMessage,ref,firstSchema,secondSchema){return this.test({message:validationMessage,test:function(value){secondSchema=secondSchema||firstSchema;var refField=this.resolve(ref),isFieldValid=firstSchema.isValidSync(value,options$1);return!(!secondSchema.isValidSync(refField,options$1)&&!isFieldValid)}})},validateBySchemaRefBoolean$1=function(schema,booleanSchema,ref,validationMessage){return this.test({message:validationMessage,test:function(value){var refField=this.resolve(ref);return!schema.isValidSync(refField,options$1)||booleanSchema.isValidSync(value,{abortEarly:!1,strict:!0})}})},validateBySchemaRefAndCondition=function(schema,combinedSchema,ref,validationMessage){return this.test({message:validationMessage,test:function(value){var refField=(this.resolve(ref)||"").toString().trim(),field=(value||"").toString().trim(),fieldRefFieldCombined=""+refField+field,isValidRefField=schema.isValidSync(refField,options$1),isValidField=schema.isValidSync(field,options$1),isValid=combinedSchema.isValidSync(fieldRefFieldCombined,options$1);return!(!!(refField.length&&!isValidRefField||field.length&&!isValidField)||!isValidField&&!isValidRefField||!isValid)}})},validateBySchema=function(schema,validationMessage){return this.test({message:validationMessage,test:function(value){return schema.isValidSync(value,options$1)}})};function validateRecommendations$1(chartName,accessibilityProps,optionsWithContext,isAnyWarnings){var recommendationSpecialMessage=VALIDATIONMESSAGES$1.RECOMMENDATIONS.SPECIALRECOMMENDATION.replace(ACCESSIBILITYPROPS_CHARTNAME,chartName),recommendationGroup=VALIDATIONMESSAGES$1.RECOMMENDATIONS.RECOMMENDATIONLOGGROUP.replace(ACCESSIBILITYPROPS_CHARTNAME,chartName);try{ObjectSchema().shape({title:StringSchema().validateBySchemaRef(VALIDATIONMESSAGES$1.RECOMMENDATIONS.TITLE,ref("$"+ACCESSIBILITYPROPS_MAINTITLE),getCustomSchema(VALIDATIONRULES_TITLE.MIN,VALIDATIONRULES_TITLE.MAX)),longDescription:StringSchema().validateBySchemaRefAndCondition(getCustomSchema(VALIDATIONRULES_CONTEXTEXPLANATION.MIN,VALIDATIONRULES_CONTEXTEXPLANATION.MAX),getCustomSchema(VALIDATIONRULES_CONTEXTEXPLANATIONCOMBINED.MIN,VALIDATIONRULES_CONTEXTEXPLANATIONCOMBINED.MAX),ref(""+ACCESSIBILITYPROPS_CONTEXTEXPLANATION),VALIDATIONMESSAGES$1.RECOMMENDATIONS.LONGDESCRIPTION),executiveSummary:StringSchema().validateBySchemaRefAndCondition(getCustomSchema(VALIDATIONRULES_PURPOSE.MIN,VALIDATIONRULES_PURPOSE.MAX),getCustomSchema(VALIDATIONRULES_EXECUTIVECOMBINED.MIN,VALIDATIONRULES_EXECUTIVECOMBINED.MAX),ref(""+ACCESSIBILITYPROPS_PURPOSE),VALIDATIONMESSAGES$1.RECOMMENDATIONS.EXECUTIVESUMMARY),statisticalNotes:StringSchema().validateBySchema(getCustomSchema(VALIDATIONRULES_STATISTICALNOTES.MIN,VALIDATIONRULES_STATISTICALNOTES.MAX),VALIDATIONMESSAGES$1.RECOMMENDATIONS.STATISTICALNOTES),structureNotes:StringSchema().validateBySchema(getCustomSchema(VALIDATIONRULES_STRUCTURENOTES.MIN,VALIDATIONRULES_STRUCTURENOTES.MAX),VALIDATIONMESSAGES$1.RECOMMENDATIONS.STRUCTURENOTES),elementDescriptionAccessor:StringSchema().nullable().validateBySchema(StringSchema().nullable().max(VALIDATIONRULES_ELEMENTDESCRIPTIONACCESSOR.MAX),VALIDATIONMESSAGES$1.RECOMMENDATIONS.ELEMENTDESCRIPTIONACCESSOR),annotations:ArraySchema().of(ObjectSchema().shape({note:ObjectSchema().shape({title:StringSchema().validateBySchema(getCustomSchema(VALIDATIONRULES_ANNOTATIONNOTETITLE.MIN,VALIDATIONRULES_ANNOTATIONNOTETITLE.MAX),VALIDATIONMESSAGES$1.RECOMMENDATIONS.ANNOTATIONNOTETITLE),label:StringSchema().validateBySchema(getCustomSchema(VALIDATIONRULES_ANNOTATIONNOTELABEL.MIN,VALIDATIONRULES_ANNOTATIONNOTELABEL.MAX),VALIDATIONMESSAGES$1.RECOMMENDATIONS.ANNOTATIONNOTELABEL)}),accessibilityDescription:StringSchema().validateBySchema(getCustomSchema(VALIDATIONRULES_ANNOTATIONACCESSIBILITYDESCRIPTION.MIN,VALIDATIONRULES_ANNOTATIONACCESSIBILITYDESCRIPTION.MAX),VALIDATIONMESSAGES$1.RECOMMENDATIONS.ANNOTATIONACCESSIBILITYDESCRIPTION)})),data:ArraySchema().nullable().of(ObjectSchema().shape({note:StringSchema().nullable().validateBySchema(StringSchema().nullable().max(VALIDATIONRULES_DATAELEMENTDESCRIPTIONACCESSOR.MAX),VALIDATIONMESSAGES$1.RECOMMENDATIONS.DATAELEMENTDESCRIPTIONACCESSOR)})),uniqueID:StringSchema().validateBySchema(StringSchema().required().trim().min(VALIDATIONRULES_UNIQUEID.MIN),VALIDATIONMESSAGES$1.RECOMMENDATIONS.UNIQUEID)}).validateSync(accessibilityProps,optionsWithContext),isAnyWarnings||!accessibilityProps||accessibilityProps[ACCESSIBILITYPROPS_DISABLEVALIDATION]||console.log("%c "+recommendationSpecialMessage,validationStyle.specialRecommendationStyle)}catch(errors){var allErrors_1={};isAnyWarnings||console.groupCollapsed("%c "+recommendationGroup,validationStyle.recommendationStyle),errors.inner.map((function(error){allErrors_1[error.path]=error.message,console.log("%c "+error.path+": "+error.message,validationStyle.recommendationStyle)}))}accessibilityProps||accessibilityProps[ACCESSIBILITYPROPS_INCLUDEDATAKEYNAMES]||console.log("%c "+VALIDATIONMESSAGES$1.RECOMMENDATIONS.INCLUDEDATAKEYNAMES,validationStyle.recommendationStyle),console.groupEnd()}function validateWarnings$1(chartName,accessibilityProps,optionsWithContext){var regexWord,warningGroup=VALIDATIONMESSAGES$1.WARNINGS.WARNINGLOGGROUP.replace(ACCESSIBILITYPROPS_CHARTNAME,chartName);try{return ObjectSchema().shape({title:StringSchema().validateBySchemaRef(VALIDATIONMESSAGES$1.WARNINGS.TITLE,ref("$"+ACCESSIBILITYPROPS_MAINTITLE),accessibilityWarningsSubSchema.requiredSchema),longDescription:StringSchema().validateBySchemaRef(VALIDATIONMESSAGES$1.WARNINGS.LONGDESCRIPTION,ref(""+ACCESSIBILITYPROPS_CONTEXTEXPLANATION),accessibilityWarningsSubSchema.requiredSchema),executiveSummary:StringSchema().validateBySchemaRef(VALIDATIONMESSAGES$1.WARNINGS.EXECUTIVESUMMARY,ref(""+ACCESSIBILITYPROPS_PURPOSE),accessibilityWarningsSubSchema.requiredSchema),elementsAreInterface:BooleanSchema().validateBySchemaRefBoolean(accessibilityWarningsSubSchema.requiredSchema,accessibilityWarningsSubSchema.requiredBooleanSchema,ref("$"+ACCESSIBILITYPROPS_ONCLICKEVENT),VALIDATIONMESSAGES$1.WARNINGS.ONCLICKEVENT),normalized:BooleanSchema().validateBySchemaRefs(VALIDATIONMESSAGES$1.WARNINGS.NORMALIZED,ref("$"+ACCESSIBILITYPROPS_TOOLTIPLABEL),ref("$"+ACCESSIBILITYPROPS_DATALABEL),ref("$"+ACCESSIBILITYPROPS_VALUEACCESSOR),(regexWord=/^normalized$/,StringSchema().required().trim().matches(regexWord))),annotations:ArraySchema().of(ObjectSchema().shape({accessibilityDescription:StringSchema().validateBySchemaRef(VALIDATIONMESSAGES$1.WARNINGS.ANNOTATIONDESCRIPTION,ref(""+ACCESSIBILITYPROPS_NOTE),accessibilityWarningsSubSchema.requiredSchema,accessibilityWarningsSubSchema.requiredSubSchema)}))}).validateSync(accessibilityProps,optionsWithContext),!1}catch(errors){console.groupCollapsed("%c "+warningGroup,validationStyle.warningStyle);var allErrors_2={};return errors.inner.map((function(error){allErrors_2[error.path]=error.message,console.warn("%c "+error.path+": "+error.message,validationStyle.warningStyle)})),!0}}var US={attr:{numeralLocale:"US"},delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(number){var b=number%10;return 1==~~(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}};var isArray=Array.isArray;function deepKeys(obj,stack,parent,intermediate){return Object.keys(obj).forEach((function(el){var escaped=el.replace(/\./g,"\\.");if(function isObject(value){return null!==value&&"object"==typeof value&&!(value instanceof Date)}(obj[el])&&!isArray(obj[el])){var p=parent?parent+"."+escaped:parent;intermediate&&stack.push(parent?p:escaped),deepKeys(obj[el],stack,p||escaped,intermediate)}else{var key=parent?parent+"."+escaped:escaped;stack.push(key)}})),stack}var deepKeys_1=function(obj,intermediate){return deepKeys(obj,[],null,intermediate)},VALIDATIONMESSAGES={WARNINGS:{OBJECTDIFFERENCE:"The used file's keys file is different compared to the keys (and nested keys) of the template file. See below for more details on this error. Difference (references to differences are comma separated and refer to the file you loaded):",WARNINGLOGGROUP:"CHARTNAME has localization warnings and other messages",MISSINGLANGUAGE:"The language you selected as a string in your chart is not available. You need to register it first, or provide the object of it through the 'localization.language' property. Defaulting back to English language.",MISSINGNUMERALLOCALE:"The numeralLocale you selected as a string in your chart is not available. You need to register it first, through the global (registerNumeralLocale(<lowerCase string of numeralLocale identifier>, <numeralLocale object>);) or chart-based localization (provide the object of it through the 'localization.numeralLocale' property.) methods. Defaulting back to 'US' numeralLocale.",OVERWRITEBOOLEAN:"localization.overwrite needs a boolean value either true or false",OVERWRITE:"You are registering a language object that will overwrite an existing language object, if there is any. In case this is the first rendered chart, nothing will be overwritten."},RECOMMENDATIONS:{RECOMMENDATIONLOGGROUP:"CHARTNAME has strong localization recommendations",PAGELTR:"The page 'dir' of your HTML is 'ltr'. We suggest to use a 'ltr' language.",PAGERTL:"The page 'dir' of your HTML is 'rtl'. We suggest to use a 'rtl' language.",OVERWRITE:"Last loaded localization.language or localization.numeralLocale will overwrite previously loaded identical language and/or numeralLocale object(s) because localization.overwrite boolean is set to true.",NOOVERWRITE:"Last loaded localization.language or localization.numeralLocale will not overwrite previously loaded identical language and/or numeralLocale object(s) because localization.overwrite boolean is set to false.",SPECIALRECOMMENDATION:"Success! CHARTNAME has met minimum localization, we recommend you disable localization validation by setting localization.skipValidation"}},LOCALIZATIONPROPS_SKIPVALIDATION="skipValidation",LOCALIZATIONPROPS_OVERWRITEBOOLEAN="overwrite",LOCALIZATIONPROPS_CHARTNAME="CHARTNAME",LOCALIZATIONPROPS_LANGUAGE="language",LOCALIZATIONPROPS_NUMERALLOCALE="numeralLocale",options={abortEarly:!1};var validateBySchemaRefBoolean=function(schema,booleanSchema,ref,validationMessage){return this.test({message:validationMessage,test:function(value){var refField=this.resolve(ref);return!schema.isValidSync(refField,options)||booleanSchema.isValidSync(value,{abortEarly:!1,strict:!0})}})},validateBySchemaRef=function(validationMessage,ref,firstSchema,secondSchema){return this.test({message:validationMessage,test:function(value){secondSchema=secondSchema||firstSchema;var refField=this.resolve(ref),isFieldValid=firstSchema.isValidSync(value,options);return!(!secondSchema.isValidSync(refField,options)&&!isFieldValid)}})},localizationWarningsSubSchema={requiredSchema:StringSchema().required().trim(),requiredSubSchema:ObjectSchema().shape({overwrite:StringSchema().required().trim()}),requiredBooleanSchema:BooleanSchema().required()};function validateRecommendations(chartName,localizationProps,isAnyWarnings){var recommendationSpecialMessage=VALIDATIONMESSAGES.RECOMMENDATIONS.SPECIALRECOMMENDATION.replace(LOCALIZATIONPROPS_CHARTNAME,chartName),recommendationGroup=VALIDATIONMESSAGES.RECOMMENDATIONS.RECOMMENDATIONLOGGROUP.replace(LOCALIZATIONPROPS_CHARTNAME,chartName);try{var localizationRecommendationSchema=function(localizationProps){return ObjectSchema().shape({overwrite:StringSchema().nullable().validateByOverwriteValue(localizationProps,ref("$"+LOCALIZATIONPROPS_OVERWRITEBOOLEAN),VALIDATIONMESSAGES.RECOMMENDATIONS.OVERWRITE)})}(localizationProps);localizationRecommendationSchema.validateSync(localizationProps,options),isAnyWarnings||!localizationProps||localizationProps[LOCALIZATIONPROPS_SKIPVALIDATION]?function valDir(){(document.querySelector("html").dir="ltr")?console.log("%c "+VALIDATIONMESSAGES.RECOMMENDATIONS.PAGELTR,validationStyle.recommendationStyle):console.log("%c "+VALIDATIONMESSAGES.RECOMMENDATIONS.PAGERTL,validationStyle.recommendationStyle)}():console.log("%c "+recommendationSpecialMessage,validationStyle.specialRecommendationStyle)}catch(errors){var allErrors_1={};isAnyWarnings||console.groupCollapsed("%c "+recommendationGroup,validationStyle.recommendationStyle),errors.inner.map((function(error){allErrors_1[error.path]=error.message,console.log("%c "+error.path+": "+error.message,validationStyle.recommendationStyle)}))}console.groupEnd()}function validateWarnings(chartName,localizationProps){var warningGroup=VALIDATIONMESSAGES.WARNINGS.WARNINGLOGGROUP.replace(LOCALIZATIONPROPS_CHARTNAME,chartName);try{return ObjectSchema().shape({language:ObjectSchema().nullable().validateBySchemaObject(ref("$"+LOCALIZATIONPROPS_LANGUAGE),VALIDATIONMESSAGES.WARNINGS.OBJECTDIFFERENCE),numeralLocale:ObjectSchema().nullable().validateBySchemaObject(ref("$"+LOCALIZATIONPROPS_NUMERALLOCALE),VALIDATIONMESSAGES.WARNINGS.OBJECTDIFFERENCE),overwrite:BooleanSchema().validateBySchemaRefBoolean(localizationWarningsSubSchema.requiredSchema,localizationWarningsSubSchema.requiredBooleanSchema,ref("$"+LOCALIZATIONPROPS_OVERWRITEBOOLEAN),VALIDATIONMESSAGES.WARNINGS.OVERWRITEBOOLEAN)}).validateSync(localizationProps,options),!1}catch(errors){console.groupCollapsed("%c "+warningGroup,validationStyle.warningStyle);var allErrors_2={};return errors.inner.map((function(error){allErrors_2[error.path]=error.message,console.warn("%c "+error.path+": "+error.message,validationStyle.warningStyle)})),!0}}var validateBySchemaObject=function(ref,validationMessage){return this.test({message:validationMessage,test:function(value){var path=this.path,createError=this.createError;if(!isUndefined(value)){var templateFile="language"===path?en.vcc:omit(US,["attr"]),formattedValue="language"===path?value:omit(value,["attr"]),result=xor(deepKeys_1(formattedValue),deepKeys_1(templateFile));if(!isEmpty(result))return createError({path:path,message:validationMessage+" "+result})}return!0}})},validateByOverwriteValue=function(languageProps,ref,validationMessage){return this.test({test:function(value){var path=this.path,createError=this.createError;return"true"!=value||createError({path:path,message:""+validationMessage})}})},subTitle={text:"This is a subtitle",keywordsHighlight:[]},propDefaultValues=Object.freeze({__proto__:null,localization:{language:"en",numeralLocale:"US",skipValidation:!0,overwrite:!1},subTitle:subTitle,accessibility:{longDescription:"",executiveSummary:"",purpose:"",contextExplanation:"",title:"",elementDescriptionAccessor:"",statisticalNotes:"",structureNotes:"",includeDataKeyNames:!1,hideDataTableButton:!1,disableValidation:!1,elementsAreInterface:null,hideTextures:!1,hideStrokes:!1,showSmallLabels:!1,showExperimentalTextures:!1,keyboardNavConfig:{disabled:!1}},animationConfig:{disabled:!1},highestHeadingLevel:"h2",sortOrder:"",sortOrderAsc:"asc",sortOrderDesc:"desc",layout:"vertical",layoutHorizontal:"horizontal",xAxis:{visible:!0,gridVisible:!0,label:"X Axis",format:"0[.][0][0]a",tickInterval:1},xAxisBarChart:{visible:!0,gridVisible:!0,label:"X Axis",format:"0[.][0][0]a",tickInterval:1,centerBaseline:!1},xAxisDate:{visible:!0,gridVisible:!1,label:"X Axis",unit:"month",format:"%b %y",tickInterval:1},yAxis:{visible:!0,gridVisible:!0,label:"Y Axis",format:"0[.][0][0]a",tickInterval:1},yAxisBarChart:{visible:!0,gridVisible:!0,label:"Y Axis",format:"0[.][0][0]a",tickInterval:1,centerBaseline:!1},wrapLabel:!0,colorPaletteSingle:"single_blue",colorPaletteSequential:"sequential_suppPurple",colorPaletteSequentialGrey:"sequential_grey",colorPaletteDiverging:"diverging_RtoB",colorPaletteCategorical:"categorical",colorSteps4:4,colorSteps5:5,hoverStyle:{color:"",strokeWidth:2},clickStyle:{color:"",strokeWidth:2},symbolHoverStyle:{color:"",strokeWidth:2},symbolClickStyle:{color:"",strokeWidth:3},referenceStyle:{color:"pri_grey",strokeWidth:"1px",opacity:1,dashed:""},seriesLabel:{visible:!0,placement:"right",label:[],collisionHideOnly:!1},cursor:"default",hoverOpacity:1,strokeWidth1:1,strokeWidth2:2,roundedCorner:0,barIntervalRatio:.2,dotRadius6:6,dotRadius5:5,dotRadius4:4,dotOpacity:1,dotSymbols:["circle"],showDots:!0,lineCurve:"linear",showFitLine:!1,showBaselineTrue:!0,showBaselineFalse:!1,secondaryLines:{keys:[],showDataLabel:!0,showSeriesLabel:!0,opacity:1},hiddenDataLabel:{visible:!1,placement:"bottom",labelAccessor:"",format:"",collisionHideOnly:!1,collisionPlacement:"all"},dataLabel:{visible:!0,placement:"top",labelAccessor:"",format:"0[.][0][0]a",collisionHideOnly:!1,collisionPlacement:"top"},dataLabelBar:{visible:!0,placement:"top",displayOnly:["all"],labelAccessor:"",format:"0[.][0][0]a",collisionHideOnly:!1,collisionPlacement:"top"},dataLabelLine:{visible:!0,placement:"top",displayOnly:["all"],labelAccessor:"",format:"0[.][0][0]a",collisionHideOnly:!1,collisionPlacement:"all"},dataLabelOutside:{visible:!0,placement:"outside",labelAccessor:"",format:"0[.][0][0]a",collisionHideOnly:!1},dataLabelMiddle:{visible:!0,placement:"middle",labelAccessor:"",format:"0[.][0][0]a",collisionHideOnly:!1,collisionPlacement:"middle"},dataLabelCenter:{visible:!0,placement:"center",labelAccessor:"",format:"",collisionHideOnly:!1,collisionPlacement:"centroid"},dataLabelEnds:{visible:!0,placement:"ends",displayOnly:["all"],labelAccessor:"",format:"0[.][0][0]a",collisionHideOnly:!1},dataLabelBottomRight:{visible:!0,placement:"bottom-right",labelAccessor:"",format:"0[.][0][0]a",collisionHideOnly:!1,collisionPlacement:"right"},dataLabelNormalizedOut:{visible:!0,placement:"outside",labelAccessor:"",format:"normalized",collisionHideOnly:!1},tooltipLabel:{labelAccessor:[],labelTitle:[],format:""},sizeConfig:{sizeAccessor:"",minValueOverride:"",maxValueOverride:"",minSizeOverride:"",maxSizeOverride:"",dualEncodeColor:!1,format:""},legend:{visible:!0,interactive:!1,format:"0[.][0][0]a",labels:""},categoryLegend:{visible:!0,interactive:!1,format:"",labels:""},keyLegend:{visible:!0,interactive:!1,type:"key",format:"0[.][0][0]a",labels:""},hiddenLegend:{visible:!1,interactive:!1,labels:""},showTooltip:!0,suppressEvents:!1,referenceLines:[],annotations:[],clickHighlight:[]});function targetDepth(d){return d.target.depth}function sankeyJustify(node,n){return node.sourceLinks.length?node.depth:n-1}function constant(x){return function(){return x}}function ascendingSourceBreadth(a,b){return ascendingBreadth(a.source,b.source)||a.index-b.index}function ascendingTargetBreadth(a,b){return ascendingBreadth(a.target,b.target)||a.index-b.index}function ascendingBreadth(a,b){return a.y0-b.y0}function value(d){return d.value}function defaultId(d,_i,_nodes){return d.index}function defaultNodes(graph){return graph.nodes}function defaultLinks(graph){return graph.links}function find(nodeById,id){var node=nodeById.get(id);if(!node)throw new Error("missing: "+id);return node}function computeLinkBreadths(_a){for(var _b=0,nodes_1=_a.nodes;_b<nodes_1.length;_b++){for(var node=nodes_1[_b],y0=node.y0,y1=y0,_c=0,_d=node.sourceLinks;_c<_d.length;_c++){(link=_d[_c]).y0=y0+link.width/2,y0+=link.width}for(var _e=0,_f=node.targetLinks;_e<_f.length;_e++){var link;(link=_f[_e]).y1=y1+link.width/2,y1+=link.width}}}function horizontalSource(d){return[d.source.x1,d.y0]}function horizontalTarget(d){return[d.target.x0,d.y1]}function verticalSource(d){return[d.x1,d.target.y0]}function verticalTarget(d){return[d.x0,d.source.y1]}window.VisaChartsLibOSSLicenses=getLicenses();var Utils=Object.freeze({__proto__:null,isUndefined:isUndefined,isObject:isObject$4,isEmpty:isEmpty,xor:xor,has:has$1,setSubTitle:function(_a){var root=_a.root,subTitle$1=_a.subTitle;if(isObject$4(subTitle$1))if(isEmpty(subTitle$1.text))root.text(subTitle.text);else{var rootElement_1=root.node();if(rootElement_1.innerHTML="",isEmpty(subTitle$1.keywordsHighlight))rootElement_1.textContent=subTitle$1.text;else{var terms=subTitle$1.keywordsHighlight,sentence_1=subTitle$1.text,lastIndex_1=0;if(terms.forEach((function(term){for(var match,regex=new RegExp("\\b"+term.text+"\\b","gi"),counter=0;null!==(match=regex.exec(sentence_1));)if(counter++,!term.index||counter===term.index){if(match.index>lastIndex_1){var textNode=document.createTextNode(sentence_1.slice(lastIndex_1,match.index));rootElement_1.appendChild(textNode)}var span=document.createElement("span");span.textContent=match[0],"text"===term.mode?(span.style.color=ensureTextContrast(term.color),span.style.fontWeight="bold"):(term.mode,span.style.color=autoTextColor(term.color),span.style.padding="2px 4px",span.style.backgroundColor=term.color,span.style.border="1px solid "+getContrastingStroke(term.color)),rootElement_1.appendChild(span),lastIndex_1=regex.lastIndex}})),lastIndex_1<sentence_1.length){var textNode=document.createTextNode(sentence_1.slice(lastIndex_1));rootElement_1.appendChild(textNode)}}}else root.text(subTitle$1)},setReferenceLine:function(_a){var groupName=_a.groupName,root=_a.root,referenceLines=_a.referenceLines,duration=_a.duration,innerPaddedWidth=_a.innerPaddedWidth,innerPaddedHeight=_a.innerPaddedHeight,referenceStyle=_a.referenceStyle,layout=_a.layout,x=_a.x,y=_a.y,unitTest=_a.unitTest,classNamePrefix={bar:"bar",stack:"stacked-bar",cluster:"clustered-bar",line:"line",dumbbell:"dumbbell",scatter:"scatter"},currentReferences=root.selectAll("g").data(referenceLines,(function(d){return d.label})),enterReferences=currentReferences.enter().append("g").attr("class",classNamePrefix[groupName]+"-reference").attr("data-testid",unitTest?"reference-g":null).attr("opacity",1);enterReferences.attr("transform",(function(d){return"vertical"===getLayout(d,layout)?"translate(0,"+y(d.value)+")":"translate("+x(d.value)+",0)"})),enterReferences.append("line").attr("class",classNamePrefix[groupName]+"-reference-line").attr("data-testid",unitTest?"reference-line":null).attr("opacity",0).attr("x1",0).attr("y1",(function(d){return"horizontal"===getLayout(d,layout)?innerPaddedHeight:0})).attr("x2",(function(d){return"horizontal"===getLayout(d,layout)?0:innerPaddedWidth})).attr("y2",0),enterReferences.append("text").attr("class",classNamePrefix[groupName]+"-reference-line-label").attr("data-testid",unitTest?"reference-line-label":null).attr("opacity",0).attr("text-anchor",(function(d){return referenceLabelAligner(d,getLayout(d,layout),0,innerPaddedHeight,innerPaddedWidth).textAnchor})).attr("x",(function(d){return referenceLabelAligner(d,getLayout(d,layout),0,innerPaddedHeight,innerPaddedWidth).x})).attr("y",(function(d){return referenceLabelAligner(d,getLayout(d,layout),0,innerPaddedHeight,innerPaddedWidth).y})).attr("dx",(function(d){return referenceLabelAligner(d,getLayout(d,layout),0,innerPaddedHeight,innerPaddedWidth).dx})).attr("dy",(function(d){return referenceLabelAligner(d,getLayout(d,layout),0,innerPaddedHeight,innerPaddedWidth).dy}));var mergeReferences=currentReferences.merge(enterReferences);mergeReferences.transition("merge").ease(circleIn$1).duration(duration).attr("transform",(function(d){return"vertical"===getLayout(d,layout)?"translate(0,"+y(d.value)+")":"translate("+x(d.value)+",0)"}));var mergeLines=mergeReferences.selectAll("."+classNamePrefix[groupName]+"-reference-line").data((function(d){return[d]})).transition("merge").ease(circleIn$1).duration(duration).attr("x1",0).attr("y1",(function(d){return"horizontal"===getLayout(d,layout)?innerPaddedHeight:0})).attr("x2",(function(d){return"horizontal"===getLayout(d,layout)?0:innerPaddedWidth})).attr("y2",0),mergeLabels=mergeReferences.selectAll("."+classNamePrefix[groupName]+"-reference-line-label").data((function(d){return[d]})).transition("merge").ease(circleIn$1).duration(duration).text((function(d){return d.label})).attr("text-anchor",(function(d){return referenceLabelAligner(d,getLayout(d,layout),0,innerPaddedHeight,innerPaddedWidth).textAnchor})).attr("x",(function(d){return referenceLabelAligner(d,getLayout(d,layout),0,innerPaddedHeight,innerPaddedWidth).x})).attr("y",(function(d){return referenceLabelAligner(d,getLayout(d,layout),0,innerPaddedHeight,innerPaddedWidth).y})).attr("dx",(function(d){return referenceLabelAligner(d,getLayout(d,layout),0,innerPaddedHeight,innerPaddedWidth).dx})).attr("dy",(function(d){return referenceLabelAligner(d,getLayout(d,layout),0,innerPaddedHeight,innerPaddedWidth).dy}));mergeLines.style("stroke",visaColors[referenceStyle.color]||referenceStyle.color).style("stroke-width",referenceStyle.strokeWidth).attr("stroke-dasharray",referenceStyle.dashed?referenceStyle.dashed:"").attr("opacity",referenceStyle.opacity),mergeLabels.style("fill",visaColors[referenceStyle.color]||referenceStyle.color).attr("opacity",1).style("paint-order","stroke").style("stroke","white").style("stroke-width","4px"),currentReferences.exit().transition("exit").ease(circleIn$1).duration(duration).attr("opacity",0).remove()},getGlobalInstances:getGlobalInstances,registerI18NextLanguage:registerI18NextLanguage,changeI18NextLanguage:changeI18NextLanguage,getActiveLanguageString:function getActiveLanguageString(localization){var i18Instance=getGlobalInstances().i18Next;return localization&&localization.language?"object"==typeof localization.language?localization.language.vcc.attr.language:localization.language:i18Instance.resolvedLanguage},configLocalization:function configLocalization(localization){isObject$4(localization.language)&&registerI18NextLanguage(localization.language,localization.overwrite),isObject$4(localization.numeralLocale)&&registerNumeralLocale(localization.numeralLocale.attr.numeralLocale,localization.numeralLocale,localization.overwrite);var innerLanguage=isObject$4(localization.language)?localization.language.vcc.attr.language:localization.language,innerNumeralLocale=isObject$4(localization.numeralLocale)?localization.numeralLocale.attr.numeralLocale:localization.numeralLocale;innerLanguage&&"string"==typeof innerLanguage&&changeI18NextLanguage(innerLanguage.toLowerCase()),innerNumeralLocale&&"string"==typeof innerNumeralLocale&&setNumeralLocale(innerNumeralLocale.toLowerCase())},translate:translate,autoTextColor:autoTextColor,buildStrokes:function(_a){var root=_a.root,id=_a.id,colors=_a.colors,clickStyle=_a.clickStyle,hoverStyle=_a.hoverStyle,additionalStrokeSize=_a.additionalStrokeSize,strokeOnHover=_a.strokeOnHover,stacked=_a.stacked,strokeOverride=_a.strokeOverride,strokes={},additionalStrokeExists=additionalStrokeSize||0===additionalStrokeSize,i=0;return colors.forEach((function(color){var restSize=additionalStrokeExists?additionalStrokeSize:1;strokes["rest"+color]||(strokes["rest"+color]=createMultiStrokeFilter({root:root,id:id,state:"rest",fillColor:color,forceStrokeColor:strokeOverride&&strokeOverride.length?strokeOverride[i]:void 0,strokeWidth:restSize,includeOuterStroke:!0,alwaysShowStroke:!!additionalStrokeExists,stacked:stacked})),additionalStrokeExists&&!strokes["default"+color]&&(strokes["default"+color]=createMultiStrokeFilter({root:root,id:id,state:"default",fillColor:color,forceStrokeColor:strokeOverride&&strokeOverride.length?strokeOverride[i]:void 0,strokeWidth:1,includeOuterStroke:!0,alwaysShowStroke:!!additionalStrokeExists,stacked:stacked})),hoverStyle&&hoverStyle.color&&!strokes["hover"+hoverStyle.color]?strokes["hover"+hoverStyle.color]=createMultiStrokeFilter({root:root,id:id,state:"hover",fillColor:hoverStyle.color,strokeWidth:hoverStyle&&hoverStyle.strokeWidth?parseFloat(hoverStyle.strokeWidth):2,includeOuterStroke:!0,strokeOnHover:strokeOnHover,alwaysShowStroke:!!additionalStrokeExists,stacked:stacked}):strokes["hover"+color]=createMultiStrokeFilter({root:root,id:id,state:"hover",fillColor:color,forceStrokeColor:strokeOverride&&strokeOverride.length?strokeOverride[i]:void 0,strokeWidth:hoverStyle&&hoverStyle.strokeWidth?parseFloat(hoverStyle.strokeWidth):2,includeOuterStroke:!0,strokeOnHover:strokeOnHover,alwaysShowStroke:!!additionalStrokeExists,stacked:stacked}),clickStyle&&clickStyle.color&&!strokes["click"+clickStyle.color]?strokes["click"+clickStyle.color]=createMultiStrokeFilter({root:root,id:id,state:"click",fillColor:clickStyle.color,strokeWidth:clickStyle&&clickStyle.strokeWidth?parseFloat(clickStyle.strokeWidth):2,includeOuterStroke:!0,alwaysShowStroke:!!additionalStrokeExists,stacked:stacked}):strokes["click"+color]=createMultiStrokeFilter({root:root,id:id,state:"click",fillColor:color,forceStrokeColor:strokeOverride&&strokeOverride.length?strokeOverride[i]:void 0,strokeWidth:clickStyle&&clickStyle.strokeWidth?parseFloat(clickStyle.strokeWidth):2,includeOuterStroke:!0,alwaysShowStroke:!!additionalStrokeExists,stacked:stacked}),i++})),strokes},checkAttributeTransitions:function(source,attributeArray){for(var change=!1,i=0;!change&&i<attributeArray.length;){var d=attributeArray[i];change=!((d.numeric?parseFloat(source.attr(d.attr)):source.attr(d.attr))===d.newValue),i++}return change},createTextStrokeFilter:createTextStrokeFilter,getBrowser:getBrowser,findTagLevel:findTagLevel,createUrl:createUrl,createMultiStrokeFilter:createMultiStrokeFilter,removeFilters:function(root){select$4(root).selectAll(".VCL-accessibility-stroke-filter").remove()},drawHoverStrokes:function(_a){var inputElement=_a.inputElement,id=_a.id,key=_a.key,strokeWidth=_a.strokeWidth,fill=_a.fill,recursive=_a.recursive,strokeOverride=_a.strokeOverride,strokes=getAccessibleStrokes(fill),stroke=strokeOverride||strokes[0],shouldBuffer=!!strokes[1],uniqueElementId=createId(id,key),source="DIV"!==inputElement.tagName?inputElement:select$4(inputElement.parentNode).select("svg").node(),className="vcl-accessibility-focus";select$4(source).style("outline").includes("auto")&&select$4(source).style("outline-width","0px").style("outline-offset","0px").style("outline-color","none");var parent=source.parentNode;!function(parent,id){var root=select$4(parent.ownerSVGElement);root.selectAll(".vcl-accessibility-focus-hoverSource").classed("vcl-accessibility-focus-hoverSource",!1),root.select("#VCL-clip-"+id).remove(),root.select("#VCL-hover-stroke-"+id).remove(),root.select("#VCL-buffer-stroke"+id).remove(),root.select("#VCL-parent-"+id).remove()}(parent,uniqueElementId),select$4(source).classed(className+"-hoverSource",!0);var dashedStrokeLayer=source.cloneNode(!1),darkElementBuffer=shouldBuffer?source.cloneNode(!1):null,clipPathElement=source.cloneNode(!1),clipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath");if(clipPath.appendChild(clipPathElement),recursive)source.nextSibling?(shouldBuffer&&parent.insertBefore(darkElementBuffer,source.nextSibling),parent.insertBefore(dashedStrokeLayer,source.nextSibling),parent.insertBefore(clipPath,source.nextSibling)):(parent.appendChild(clipPath),parent.appendChild(dashedStrokeLayer),shouldBuffer&&parent.appendChild(darkElementBuffer));else{var parentOfParent=parent.parentNode,parentCopy=parent.cloneNode(!1),newParent=select$4(parentCopy).attr("id","VCL-parent-"+uniqueElementId);parentCopy.appendChild(clipPath),parentCopy.appendChild(dashedStrokeLayer),shouldBuffer&&parentCopy.appendChild(darkElementBuffer),parent.nextSibling?parentOfParent.insertBefore(parentCopy,parent.nextSibling):parentOfParent.appendChild(parentCopy),applyDefaults(newParent,className)}var clipId="VCL-clip-"+uniqueElementId,url=createUrl(clipId);select$4(clipPath).attr("id",clipId).attr("clipPathUnits","userSpaceOnUse").attr("class",className+"-highlight "+className+"-hover");var clip=select$4(clipPathElement).attr("id","VCL-clip-element-"+uniqueElementId).style("opacity",1).attr("opacity",1);applyDefaults(clip,className);var strokeElement=select$4(dashedStrokeLayer).attr("id","VCL-buffer-stroke-"+uniqueElementId).style("opacity",1).attr("opacity",1).style("stroke",stroke);if(applyDefaults(strokeElement,className),applyOutlineOverride(strokeElement,strokeWidth,url,shouldBuffer,!0),shouldBuffer){var buffer=select$4(darkElementBuffer).attr("id","VCL-buffer-stroke-"+uniqueElementId).style("opacity",1).attr("opacity",1).style("stroke",fill);applyDefaults(buffer,className),applyOutlineOverride(buffer,1,url,!1,!1)}},removeHoverStrokes:function(root){var className="vcl-accessibility-focus";select$4(root).selectAll("."+className+"-hoverSource").classed(className+"-hoverSource",!1),select$4(root).selectAll("."+className+"-hover").remove()},mirrorStrokeTransition:function(_a){var id=_a.id,key=_a.key,attribute=_a.attribute,newValue=_a.newValue,easing=_a.easing,duration=_a.duration,baseId=createId(id,key);["VCL-clip-element-","VCL-buffer-stroke-","VCL-buffer-stroke-"].forEach((function(layer){var target=select$4("#"+layer+baseId);target.size()&&(duration&&(target=target.transition(attribute).duration(duration),easing&&(target=target.ease(easing))),target.attr(attribute,newValue))}))},initializeElementAccess:function(node){select$4(node).attr("tabindex",-1).attr("role","presentation").attr("focusable",!1)},initializeDescriptionRoot:function(_a){var language=_a.language,rootEle=_a.rootEle,title=_a.title,chartTag=_a.chartTag,uniqueID=_a.uniqueID,highestHeadingLevel=_a.highestHeadingLevel,redraw=_a.redraw,disableKeyNav=_a.disableKeyNav,hideDataTable=_a.hideDataTable,level1=findTagLevel(highestHeadingLevel,0),level2=findTagLevel(level1="h1"===level1?"h2":level1,1),level3=findTagLevel(level1,2),level4=findTagLevel(level1,3),instructionsWrapper=select$4(rootEle).select(".vcl-accessibility-instructions");instructionsWrapper.size()&&!redraw||(select$4(rootEle).select(".vcl-main-title").attr("aria-hidden","true"),select$4(rootEle).select(".vcl-sub-title").attr("aria-hidden","true"),instructionsWrapper.size()?instructionsWrapper.selectAll("*").remove():instructionsWrapper=select$4(rootEle).select(".o-layout").insert("div",":first-child").attr("class","vcl-accessibility-instructions").style("position","absolute").style("width","200px"),instructionsWrapper.append(level4).attr("class","screen-reader-info vcl-region-label"),instructionsWrapper.append(level1).attr("class","screen-reader-info vcl-access-title").text(emptyDescriptions["vcl-access-title"]),instructionsWrapper.append(level2).attr("class","screen-reader-info vcl-access-subtitle").text(emptyDescriptions["vcl-access-subtitle"]),instructionsWrapper.append(level2).attr("class","screen-reader-info vcl-access-executive-summary-heading").text(emptyDescriptions.headings),instructionsWrapper.append(level4).attr("class","screen-reader-info vcl-access-executive-summary").attr("data-level",level2).text(emptyDescriptions["vcl-access-executive-summary"]),instructionsWrapper.append(level2).attr("class","screen-reader-info vcl-access-purpose-heading").text(emptyDescriptions.headings),instructionsWrapper.append(level4).attr("class","screen-reader-info vcl-access-purpose").attr("data-level",level2).text(emptyDescriptions["vcl-access-purpose"]),instructionsWrapper.append(level2).attr("class","screen-reader-info vcl-access-long-description-heading").text(emptyDescriptions.headings),instructionsWrapper.append(level4).attr("class","screen-reader-info vcl-access-long-description").attr("data-level",level2).text(emptyDescriptions["vcl-access-long-description"]),instructionsWrapper.append(level4).attr("data-level",level2).attr("class","screen-reader-info vcl-access-context").text(emptyDescriptions["vcl-access-context"]),instructionsWrapper.append(level2).attr("class","screen-reader-info vcl-access-structure-heading").text(""+capitalized(translate("general.keywords.structure",language))),instructionsWrapper.append(level3).attr("class","screen-reader-info vcl-access-statistics-heading").text(emptyDescriptions.headings),instructionsWrapper.append(level4).attr("class","screen-reader-info vcl-access-statistics").attr("data-level",level3).text(emptyDescriptions["vcl-access-statistics"]),instructionsWrapper.append(level3).attr("class","screen-reader-info vcl-access-chart-layout-heading").text(""+translate("accessibilityDescriptions.chartLayoutDescription",language)),instructionsWrapper.append(level4).attr("class","screen-reader-info vcl-access-layout").text(emptyDescriptions["vcl-access-layout"]),instructionsWrapper.append(level4).attr("class","screen-reader-info vcl-access-xAxis").text(emptyDescriptions["vcl-access-xAxis"]),instructionsWrapper.append(level4).attr("class","screen-reader-info vcl-access-yAxis").text(emptyDescriptions["vcl-access-yAxis"]),instructionsWrapper.append(level3).attr("class","screen-reader-info vcl-access-notes-heading").text(emptyDescriptions.headings),instructionsWrapper.append(level4).attr("class","screen-reader-info vcl-access-notes").attr("data-level",level3).attr("data-annotationlevel",level2).text(emptyDescriptions["vcl-access-notes"]),instructionsWrapper.append(level2).attr("class","screen-reader-info vcl-access-annotations-heading").text(emptyDescriptions.headings)),instructionsWrapper.attr("id","chart-instructions-"+uniqueID);var dataTableReachInstructions=hideDataTable?""+translate("accessibilityDescriptions.dataTableFocusOnHideDataTableButtonTrue",language):""+translate("accessibilityDescriptions.dataTableFocusOnDataTableButtonFalse",language),chartTitle=title?", "+capitalized(translate("general.keywords.titled",language))+": "+title:", "+translate("accessibilityDescriptions.withNoTitleProvided",language),fullDescription=capitalized(translate("general.keywords.keyboard",language))+" "+capitalized(translate("general.keywords.interactive",language))+" "+chartTag+chartTitle+". "+translate("accessibilityDescriptions.fullDescription",language)+" "+dataTableReachInstructions,nonInteractive=capitalized(translate("general.keywords.static",language))+" "+chartTag+" "+translate("general.keywords.image",language)+chartTitle+". "+translate("accessibilityDescriptions.nonInteractive",language)+" "+dataTableReachInstructions;instructionsWrapper.select(".vcl-region-label").text(disableKeyNav?nonInteractive:fullDescription)},setElementFocusHandler:function(_a){var chartTag=_a.chartTag,language=_a.language,node=_a.node,geomType=_a.geomType,includeKeyNames=_a.includeKeyNames,dataKeys=_a.dataKeys,dataKeyNames=_a.dataKeyNames,groupKeys=_a.groupKeys,nested=_a.nested,recursive=_a.recursive,groupName=_a.groupName,uniqueID=_a.uniqueID,disableKeyNav=_a.disableKeyNav,normalized=_a.normalized,valueAccessor=_a.valueAccessor;select$4(node).on("focus",disableKeyNav?null:function(_,i,n){var idOfTarget=n[i].id;if(idOfTarget){var rootNode=document.getElementById("chart-area-"+uniqueID),sameGroupCousinKey=select$4(rootNode).attr("data-sgck"),groupAccessor=select$4(rootNode).attr("data-group");prepareControllerNodes({chartTag:chartTag,language:language,rootNode:rootNode,nodeID:idOfTarget,geomType:geomType,includeKeyNames:includeKeyNames,dataKeys:dataKeys,dataKeyNames:dataKeyNames,groupKeys:groupKeys,nested:nested,groupName:groupName,groupAccessor:groupAccessor,valueAccessor:valueAccessor,recursive:recursive,sameGroupCousinKey:sameGroupCousinKey,deleteControllers:!1,normalized:normalized}),hideKeyboardHighlight(n[i])}})},setElementAccessID:function(_a){var node=_a.node,uniqueID=_a.uniqueID;select$4(node).attr("id",(function(){return node.id?node.id:generateRandomStringID(uniqueID)}))},setTooltipAccess:setTooltipAccess,setLegendAccess:setLegendAccess,setHighContrastListener:setHighContrastListener,createLabel:createLabel,createGroupLabel:createGroupLabel,setAccessibilityController:function(_a){var language=_a.language,chartTag=_a.chartTag,node=_a.node,title=_a.title,description=_a.description,uniqueID=_a.uniqueID,geomType=_a.geomType,includeKeyNames=_a.includeKeyNames,dataKeys=_a.dataKeys,dataKeyNames=_a.dataKeyNames,groupKeys=_a.groupKeys,nested=_a.nested,groupName=_a.groupName,groupAccessor=_a.groupAccessor,valueAccessor=_a.valueAccessor,recursive=_a.recursive,disableKeyNav=_a.disableKeyNav,normalized=_a.normalized,svg=select$4(node),sameGroupCousinKey=!groupAccessor||"bar-chart"!==chartTag&&"world-map"!==chartTag?"":groupAccessor;svg.attr("role","presentation").attr("focusable",!1).attr("tabindex",-1).style("overflow","hidden").on("focus",disableKeyNav?null:function(){focusTarget(select$4(parent).select(".VCL-controller").node())});var parent=node.parentNode,controller=select$4(parent).select(".VCL-controller"),getRootAriaLabel=function(){var titleText=title+". ",parsedSubTitle=isObject$4(description)?description.text:description;return titleText+((description?parsedSubTitle+". ":"")+" "+translate("accessibilityController.navigateToTheChartAreaByPressingEnter",language))};controller.size()||(select$4(parent).style("position","relative"),(controller=select$4(parent).insert("div",":first-child")).attr("class","VCL-controller").style("position","absolute").style("top",0).style("left",0).style("opacity",0).style("pointer-events","none"));var bounds=node.getBoundingClientRect();controller.style("width",bounds.width+"px").style("height",bounds.height+"px").attr("id","chart-area-"+uniqueID).attr("data-sgck",sameGroupCousinKey||null).attr("data-group",groupAccessor).attr("aria-label",disableKeyNav?null:getRootAriaLabel()).text(disableKeyNav?"":capitalized(translate("general.keywords.interactive",language))+" "+chartTag+".").attr("role",disableKeyNav?"presentation":"application").attr("tabindex",disableKeyNav?"-1":"0").on("keyup",disableKeyNav?null:function(){fired=!1}).on("focus",disableKeyNav?null:function(_,i,n){select$4(n[i]).selectAll("[tabindex]").attr("tabindex",-1),drawKeyboardFocusClone(n[i],recursive);var bounds=node.getBoundingClientRect();controller.style("width",bounds.width+"px").style("height",bounds.height+"px").attr("aria-label",getRootAriaLabel())}).on("blur",disableKeyNav?null:function(_,i,n){removeKeyboardHighlight(select$4(n[i].parentNode).select("svg :first-child").node(),!0),controller.attr("aria-label",capitalized(translate("general.keywords.interactive",language))+" "+chartTag+".")}).on("keydown",disableKeyNav?null:function(){var e=event$4,keyCode=event$4.keyCode||event$4.which;if(validKeyCode(keyCode)&&!fired){fired=!0,e.stopPropagation();var targetChild=enterChartArea(e);targetChild&&prepareControllerNodes({chartTag:chartTag,language:language,rootNode:controller.node(),nodeID:targetChild.id,geomType:geomType,includeKeyNames:includeKeyNames,dataKeys:dataKeys,dataKeyNames:dataKeyNames,groupKeys:groupKeys,nested:nested,groupName:groupName,groupAccessor:groupAccessor,valueAccessor:valueAccessor,recursive:recursive,sameGroupCousinKey:sameGroupCousinKey,normalized:normalized})}});var controllerChildID=controller.attr("aria-activedescendant");if(controllerChildID&&!disableKeyNav){var child=document.getElementById(controllerChildID.substring(5));child?setActiveChild(child):controller.attr("aria-activedescendant",null)}else controller.attr("aria-activedescendant",null);var rootNode=controller.node();if(disableKeyNav&&rootNode.children&&rootNode.children.length)for(var childrenToRemove=rootNode.children.length;childrenToRemove;)rootNode.removeChild(rootNode.children[0]),childrenToRemove--;setHighContrastListener(node,uniqueID)},hideNonessentialGroups:function(rootNode,exception){var childrenG=rootNode.childNodes.length>1?rootNode.childNodes:rootNode.firstElementChild.childNodes;childrenG&&selectAll$1(childrenG).each((function(_,i,n){n[i]!==exception&&hideNode(n[i])}))},hideNode:hideNode,setAccessTitle:function(language,rootEle,title){select$4(rootEle).select(".vcl-access-title").text(title?capitalized(translate("general.keywords.chart",language))+" "+translate("general.keywords.title",language)+": "+title:emptyDescriptions["vcl-access-title"])},setAccessSubtitle:function(language,rootEle,subtitle){select$4(rootEle).select(".vcl-access-subtitle").text(isObject$4(subtitle)?subtitle.text:subtitle?capitalized(translate("general.keywords.chart",language))+" "+translate("general.keywords.subtitle",language)+": "+isObject$4(subtitle)?subtitle.text:subtitle:emptyDescriptions["vcl-access-subtitle"])},setAccessLongDescription:function(language,rootEle,description){setDescriptionNode(select$4(rootEle).select(".vcl-accessibility-instructions"),description,""+translate("accessibilityDescriptions.longDescription",language),"vcl-access-long-description",description||select$4(rootEle).select(".vcl-access-context").text())},setAccessExecutiveSummary:function(language,rootEle,summary){setDescriptionNode(select$4(rootEle).select(".vcl-accessibility-instructions"),summary,""+translate("accessibilityDescriptions.executiveSummary",language),"vcl-access-executive-summary",!!summary)},setAccessPurpose:function(language,rootEle,purpose){setDescriptionNode(select$4(rootEle).select(".vcl-accessibility-instructions"),purpose,""+capitalized(translate("general.keywords.purpose",language)),"vcl-access-purpose",!!purpose)},setAccessContext:function(language,rootEle,context){setDescriptionNode(select$4(rootEle).select(".vcl-accessibility-instructions"),context,""+translate("accessibilityDescriptions.longDescription",language),"vcl-access-context",context||select$4(rootEle).select(".vcl-access-long-description").text(),"vcl-access-long-description")},setAccessStatistics:function(language,rootEle,statistics){setDescriptionNode(select$4(rootEle).select(".vcl-accessibility-instructions"),statistics,""+capitalized(translate("accessibilityDescriptions.statisticalInformation",language)),"vcl-access-statistics",!!statistics)},setAccessChartCounts:function(_a){var rootEle=_a.rootEle,parentGNode=_a.parentGNode,chartTag=_a.chartTag,geomType=_a.geomType,groupName=_a.groupName,recursive=_a.recursive,primaryG=select$4(parentGNode),countGroup=recursive||primaryG.selectAll("g").size()?primaryG.selectAll("g").size():primaryG.selectAll("*:not(title)").size()-primaryG.selectAll(".vcl-accessibility-focus-highlight").size(),countGeom=recursive?primaryG.selectAll("g").size():primaryG.selectAll("g").size()?primaryG.selectAll("g").selectAll("*:not(title)").size()-primaryG.selectAll("g").selectAll(".vcl-accessibility-focus-highlight").size():primaryG.selectAll("*:not(title)").size()-primaryG.selectAll(".vcl-accessibility-focus-highlight").size();select$4(rootEle).select(".vcl-access-layout").text(capitalized(chartTag)+". "+(groupName?capitalized(groupName)+": "+countGroup+", "+geomType+": "+countGeom+".":geomType+": "+countGeom+"."))},setAccessXAxis:function(_a){var language=_a.language,rootEle=_a.rootEle,hasXAxis=_a.hasXAxis,xAxis=_a.xAxis,xAxisLabel=_a.xAxisLabel,label=emptyDescriptions["vcl-access-xAxis"];if(hasXAxis){var xDomain=xAxis&&xAxis.formattedTicks&&xAxis.formattedTicks[0]?xAxis.formattedTicks:[],xAxisTitle=xAxisLabel?capitalized(translate("general.keywords.title",language))+" "+xAxisLabel+". ":"",xAxisRange=xDomain.length?capitalized(translate("general.keywords.start",language))+" "+translate("general.keywords.value",language)+" "+xDomain[0]+", "+translate("general.keywords.end",language)+" "+translate("general.keywords.value",language)+" "+xDomain[xDomain.length-1]:"";label=translate("accessibilityDescriptions.xAxis",language)+" "+xAxisTitle+" "+xAxisRange+"."}select$4(rootEle).select(".vcl-access-xAxis").text(label)},setAccessYAxis:function(_a){var yAxisTicks,secondaryYAxisTicks,language=_a.language,rootEle=_a.rootEle,hasYAxis=_a.hasYAxis,yAxis=_a.yAxis,secondaryYAxis=_a.secondaryYAxis,yAxisLabel=_a.yAxisLabel,secondaryYAxisLabel=_a.secondaryYAxisLabel,xAxisLabel=_a.xAxisLabel,label=emptyDescriptions["vcl-access-yAxis"];if(yAxis&&yAxis.formattedTicks&&(yAxisTicks=yAxis.formattedTicks),secondaryYAxis&&secondaryYAxis.formattedTicks&&(secondaryYAxisTicks=secondaryYAxis.formattedTicks),hasYAxis)if(secondaryYAxisTicks){var yAxis1Title=yAxisLabel?translate("general.keywords.title",language)+" "+yAxisLabel+". ":"",yAxis1Ticks=yAxisTicks?capitalized(translate("general.keywords.start",language))+" "+translate("general.keywords.value",language)+" "+yAxisTicks[0]+", "+translate("general.keywords.end",language)+" "+translate("general.keywords.value",language)+" "+yAxisTicks[yAxisTicks.length-1]+".":"",yAxis2Title=secondaryYAxisLabel?translate("general.keywords.title",language)+" "+secondaryYAxisLabel+" ":"",yAxis2Ticks=secondaryYAxisTicks?capitalized(translate("general.keywords.start",language))+" "+translate("general.keywords.value",language)+" "+secondaryYAxisTicks[0]+", "+translate("general.keywords.end",language)+" "+translate("general.keywords.value",language)+" "+secondaryYAxisTicks[secondaryYAxisTicks.length-1]+".":"";label=translate("accessibilityController.primaryYAxis",language)+" "+yAxis1Title+yAxis1Ticks+". ",label+=translate("accessibilityController.secondaryYAxis",language)+" "+yAxis2Title+yAxis2Ticks+"."}else if("function"!=typeof yAxis){var yLabels=Object.keys(yAxis),firstYDomain=yAxis[yLabels[0]].y&&yAxis[yLabels[0]].y.formattedTicks&&yAxis[yLabels[0]].y.formattedTicks[0]?yAxis[yLabels[0]].y.formattedTicks:[],y1Range=firstYDomain.length?capitalized(translate("general.keywords.start",language))+" "+translate("general.keywords.value",language)+" "+firstYDomain[0]+", "+translate("general.keywords.end",language)+" "+translate("general.keywords.value",language)+" "+firstYDomain[firstYDomain.length-1]+".":"";if(label=yLabels.length>1?translate("accessibilityDescriptions.multipleYAxisSections",language)+" "+translate("accessibilityDescriptions.numberOfVerticalYAxisSections",language)+" "+yLabels.length+". "+translate("accessibilityDescriptions.usingDifferentScales",language)+" "+(xAxisLabel?" "+translate("accessibilityDescriptions.thisSeriesIsTitled",language)+xAxisLabel:"")+".":translate("accessibilityDescriptions.yAxis",language)+" "+capitalized(translate("general.keywords.title",language))+" "+yLabels[0]+". "+y1Range,yLabels.length>1){var i=0;for(i=0;i<yLabels.length;i++){var labelScale=yAxis[yLabels[i]].y,iYDomain=labelScale&&labelScale.formattedTicks&&labelScale.formattedTicks[0]?labelScale.formattedTicks:[],iYRange=iYDomain.length?capitalized(translate("general.keywords.start",language))+" "+translate("general.keywords.value",language)+" "+iYDomain[0]+", "+translate("general.keywords.end",language)+" "+translate("general.keywords.value",language)+" "+iYDomain[iYDomain.length-1]+".":"";label+=" "+capitalized(translate("general.keywords.y",language))+" "+capitalized(translate("general.keywords.axis",language))+" "+(i+1)+"/"+yLabels.length+". "+capitalized(translate("general.keywords.title",language))+" "+yLabels[i]+". "+iYRange+"."}}}else{var yDomain=yAxis&&yAxis.formattedTicks&&yAxis.formattedTicks[0]?yAxis.formattedTicks:[],yAxisTitle=yAxisLabel?capitalized(translate("general.keywords.title",language))+" "+yAxisLabel+".":"",yAxisRange=yDomain.length?capitalized(translate("general.keywords.start",language))+" "+translate("general.keywords.value",language)+" "+yDomain[0]+", "+translate("general.keywords.end",language)+" "+translate("general.keywords.value",language)+" "+yDomain[yDomain.length-1]+".":"";label=translate("accessibilityDescriptions.primaryYAxis",language)+" "+yAxisTitle+" "+yAxisRange}select$4(rootEle).select(".vcl-access-yAxis").text(label)},setAccessStructure:function(language,rootEle,structure){setDescriptionNode(select$4(rootEle).select(".vcl-accessibility-instructions"),structure,""+translate("accessibilityDescriptions.notesAboutTheChartStructure",language),"vcl-access-notes",!!structure)},setAccessAnnotation:function(language,rootEle,annotations,referenceLines){var parent=select$4(rootEle).select(".vcl-accessibility-instructions"),notesNode=parent.select(".vcl-access-notes").node(),header=parent.select(".vcl-access-annotations-heading"),headerLevel=notesNode.dataset.annotationlevel,level1=findTagLevel(headerLevel,1);parent.selectAll(".vcl-access-annotation").remove();var i=0,k=0;if(annotations&&annotations.length||referenceLines&&referenceLines.length){header.size()||(header=parent.insert(headerLevel,".vcl-interaction-instructions").attr("class","screen-reader-info vcl-access-annotations-heading"));(!isUndefined(annotations)&&isUndefined(referenceLines)?__spreadArrays(annotations):isUndefined(annotations)&&!isUndefined(referenceLines)?__spreadArrays(referenceLines):__spreadArrays(annotations,referenceLines)).forEach((function(item){if(item.accessibilityDecorationOnly);else if(isObject$4(item.note)){i++;var annotationTitle="",annotationLabelText="",annotationAccessibilityDescription="";annotationTitle=item.note.title?capitalized(translate("accessibilityDescriptions.annotationTitle",language))+" "+item.note.title+".":capitalized(translate("general.keywords.annotation",language))+" "+i+":",item.note.label&&(annotationLabelText=""+item.note.label),annotationAccessibilityDescription=item.accessibilityDescription?""+item.accessibilityDescription:"",parent.insert(level1,".vcl-interaction-instructions").attr("class","screen-reader-info vcl-access-annotation").text(annotationTitle+" "+annotationLabelText+" "+annotationAccessibilityDescription)}else{k++;var referenceLineLabel=void 0,referenceLineAccessibilityDescription=void 0;has$1(item,"data")?(referenceLineLabel=item.data.label?capitalized(translate("accessibilityDescriptions.referenceLineTitle",language))+" "+item.data.label+".":capitalized(translate("general.keywords.referenceLine",language))+" "+k+":",referenceLineAccessibilityDescription=item.data.accessibilityDescription?""+item.data.accessibilityDescription:""):(referenceLineLabel=item.label?capitalized(translate("accessibilityDescriptions.referenceLineTitle",language))+" "+item.label+".":capitalized(translate("general.keywords.referenceLine",language))+" "+k+":",referenceLineAccessibilityDescription=item.accessibilityDescription?""+item.accessibilityDescription:""),parent.insert(level1,".vcl-interaction-instructions").attr("class","screen-reader-info vcl-access-annotation").text(referenceLineLabel+" "+referenceLineAccessibilityDescription)}}))}header.text(translate("general.expressions.numberOfReferenceLines",language)+" "+k+". "+translate("general.expressions.numberOfAnnotations",language)+" "+i+".")},retainAccessFocus:function(_a){var parentGNode=_a.parentGNode,focusDidExist=_a.focusDidExist,recursive=_a.recursive,primaryG=select$4(parentGNode);if(primaryG.select(".vcl-accessibility-focus-source").size()){var target=primaryG.select(".vcl-accessibility-focus-source").node(),previouslyHidden=primaryG.select(".vcl-accessibility-focus-indicator").classed("hidden");drawKeyboardFocusClone(target,recursive),previouslyHidden&&hideKeyboardHighlight(target)}else if(focusDidExist){var target_1;if(primaryG.selectAll("[tabindex]").each((function(_,i,n){target_1||null===select$4(n[i]).attr("tabindex")||(target_1=n[i])})),!target_1){var root=findSVGRoot(parentGNode);target_1=select$4(root).select("[tabindex]").node()||root}focusTarget(target_1),drawKeyboardFocusClone(target_1,recursive)}},checkAccessFocus:function(parentGNode){return!!select$4(parentGNode).select(".vcl-accessibility-focus-source").size()},setElementInteractionAccessState:function(node,selected,selectable){var targetID="#node-"+select$4(node).attr("id");select$4(node).attr("data-aria-pressed",selectable?selected:null).attr("data-role",selectable?"button":"img"),select$4(targetID).attr("aria-pressed",selectable?selected:null).attr("role",selectable?"button":"img")},setAccessibilityDescriptionWidth:function(uniqueID,width){select$4("#chart-instructions-"+uniqueID).style("width",(function(){return Math.max(width,200)+"px"}))},annotate:function annotate(_a){var source=_a.source,data=_a.data,xScale=_a.xScale,xAccessor=_a.xAccessor,yScale=_a.yScale,yAccessor=_a.yAccessor,ignoreScales=_a.ignoreScales,width=_a.width,height=_a.height,padding=_a.padding,margin=_a.margin,bitmaps=_a.bitmaps;select$2(source).selectAll(".vcl-annotation-group").remove();var annotations=select$2(source).append("g").attr("class","vcl-annotation-group").attr("data-testid","annotation-group");hideNode(annotations.node());var editable=select$2(source).append("g").attr("class","editable vcl-annotation-group").attr("data-testid","editable-annotation-group");if(hideNode(editable.node()),data&&data.length){var percentX_1=linear$1().range(xScale?xScale.range():[0,100]).domain([0,100]),yRange_1=yScale?yScale.range():[0,100],y0=yRange_1[0]>=yRange_1[1]?100:0,y1=100-y0,percentY_1=linear$1().range(yRange_1).domain([y0,y1]),invertedY_1=function(d){var height=yRange_1[0]>=yRange_1[1]?yRange_1[0]:yRange_1[1];return yScale(d)-height},annotationData_1=[],annotationEditableData_1=[];data.forEach((function(datum,i){var d={};Object.keys(datum).forEach((function(key){"data"!==key&&"subject"!==key&&"connector"!==key&&"note"!==key?datum[key]instanceof Array?d[key]=__spreadArrays(datum[key]):d[key]=datum[key]:(d[key]={},Object.keys(datum[key]).forEach((function(innerKey){datum[key][innerKey]instanceof Array?"points"===innerKey?(d[key][innerKey]=[],datum[key][innerKey].forEach((function(point){var clonedPoint=[];point[0]instanceof Array&&point[1]instanceof Array?(clonedPoint.push(__spreadArrays(point[0])),clonedPoint.push(__spreadArrays(point[1]))):(clonedPoint.push(point[0]),clonedPoint.push(point[1])),d[key][innerKey].push(clonedPoint)}))):d[key][innerKey]=__spreadArrays(datum[key][innerKey]):d[key][innerKey]=datum[key][innerKey]})))}));var yToDate=d.parseAsDates&&(d.parseAsDates.includes("y")||d.parseAsDates.includes(yAccessor)),xToDate=d.parseAsDates&&(d.parseAsDates.includes("x")||d.parseAsDates.includes(xAccessor)),diff=0;if(d.data){var keys=Object.keys(d.data),i_1=0;if(yToDate||xToDate)for(i_1=0;i_1<keys.length;i_1++)"x"===keys[i_1]||keys[i_1]===xAccessor?d.data[keys[i_1]]=checkDate(d.data[keys[i_1]],xToDate):keys[i_1]!==yAccessor&&"y"!==keys[i_1]||(d.data[keys[i_1]]=checkDate(d.data[keys[i_1]],yToDate))}d.x&&(d.x=resolveValue(d.x,xScale,percentX_1,xToDate)),d.y&&(d.y=resolveValue(d.y,yScale,percentY_1,yToDate)),d.dx&&(d.dx instanceof Array&&(diff=d.data&&void 0!==d.data[xAccessor]?xScale(d.data[xAccessor]):d.x?d.x:0),d.dx=resolveValue(d.dx,xScale,percentX_1,xToDate)-diff),d.dy&&(diff=0,d.dy instanceof Array&&(diff=d.data&&void 0!==d.data[yAccessor]?yScale(d.data[yAccessor]):d.y?d.y:0),d.dy=resolveValue(d.dy,yScale,percentY_1,yToDate)-diff),d.subject&&(d.subject.x1&&(d.subject.x1=resolveValue(d.subject.x1,xScale,percentX_1,xToDate)),d.subject.y1&&(d.subject.y1=resolveValue(d.subject.y1,yScale,percentY_1,yToDate)),d.subject.x2&&(d.subject.x2=resolveValue(d.subject.x2,xScale,percentX_1,xToDate)),d.subject.y2&&(d.subject.y2=resolveValue(d.subject.y2,yScale,percentY_1,yToDate)),d.subject.width&&(d.subject.width=resolveValue(d.subject.width,xScale,percentX_1,xToDate)),d.subject.height&&(d.subject.height=resolveValue(d.subject.height,invertedY_1,percentY_1,yToDate))),d.connector&&("string"==typeof d.connector.curve&&(d.connector.curve=d3[d.connector.curve]),d.connector.points instanceof Array&&d.connector.points.forEach((function(point){point[0]=resolveValue(point[0],xScale,percentX_1,xToDate),point[1]=resolveValue(point[1],yScale,percentY_1,yToDate)}))),d.type&&"string"==typeof d.type&&(d.type=types[d.type]),d.editMode?annotationEditableData_1.push(d):annotationData_1.push(d),d.color&&(d.color=visaColorToHex(d.color)||d.color),d.collisionHideOnly&&(d.className?d.className=d.className+" annotation-detect-collision":d.className="annotation-detect-collision")}));var makeAnnotations=annotation().annotations(annotationData_1),makeEditableAnnotations=annotation().editMode(!0).annotations(annotationEditableData_1);ignoreScales||(makeAnnotations=annotation().accessors({x:function(d){return xScale(d[xAccessor])},y:function(d){return yScale(d[yAccessor])}}).annotations(annotationData_1),makeEditableAnnotations=annotation().editMode(!0).accessors({x:function(d){return xScale(d[xAccessor])},y:function(d){return yScale(d[yAccessor])}}).annotations(annotationEditableData_1)),annotations.call(makeAnnotations),editable.call(makeEditableAnnotations),annotationData_1&&annotationData_1.some((function(e){return!0===e.collisionHideOnly}))&&hideOverlappingAnnotations(source,width,height,padding,margin,bitmaps),annotationEditableData_1&&annotationEditableData_1.some((function(e){return!0===e.collisionHideOnly}))&&hideOverlappingAnnotations(source,width,height,padding,margin,bitmaps)}},getTexture:getTexture,convertColorsToTextures:function convertColorsToTextures(_a){var colors=_a.colors,rootSVG=_a.rootSVG,id=_a.id,scheme=_a.scheme,disableTransitions=_a.disableTransitions,output=[],textures=[],i=0,colorArray=colors.range?colors.range():colors;return colorArray.forEach((function(color){var textureId=id+"_texture_"+i,contrastedColors=prepareStrokeColorsFromScheme(color,i,colorArray,scheme),texture=getTexture({scheme:contrastedColors.textureScheme,id:textureId,index:indices[contrastedColors.textureScheme][colors.length][i],fillColor:contrastedColors.fillColor,textureColor:contrastedColors.textureColor});texture.scheme=contrastedColors.textureScheme,texture.index=indices[contrastedColors.textureScheme][colors.length][i],textures.push(texture),output.push(createUrl(textureId)),i++})),function runTextureLifecycle(source,data,transitionDisabled){var parent=select$4(source),defs=parent.select("defs");defs.size()||(defs=parent.append("defs"));var patterns=defs.selectAll(".VCL-texture-pattern").data(data,(function(d){return d.scheme+d.index})),enter=patterns.enter().append("pattern"),update=patterns.merge(enter);update.transition("exit").duration(transitionDisabled?0:750).call(transitionEndAll,(function(){patterns.exit().remove()})),update.each((function(d,i,n){var patternAttributes=Object.keys(d.attributes),me=select$4(n[i]);patternAttributes.forEach((function(attr){me.attr(attr,d.attributes[attr])}))})).attr("patternContentUnits","userSpaceOnUse").attr("x",0).attr("y",0);var children=update.selectAll(".VCL-t-p-e").data((function(d){return d.children}),(function(d,i){return d.name+i}));children.exit().remove();var enterChildren=children.enter().append((function(d){return document.createElementNS("http://www.w3.org/2000/svg",d.name)})).attr("class","VCL-t-p-e");children.merge(enterChildren).each((function(d,i,n){var me=select$4(n[i]);Object.keys(d.attributes).forEach((function(attr){me.attr(attr,d.attributes[attr])}))}))}(rootSVG,textures,disableTransitions),output},prepareStrokeColorsFromScheme:prepareStrokeColorsFromScheme,calculateLuminance:calculateLuminance,calculateRelativeLuminance:calculateRelativeLuminance,getAccessibleStrokes:getAccessibleStrokes,getRecursiveStroke:function getRecursiveStroke(foreground,background){var extents={},foregroundLuminance=calculateLuminance(foreground),backgroundLuminance=calculateLuminance(background),foregroundToWhite=calculateRelativeLuminance(foregroundLuminance,1),backgroundToWhite=calculateRelativeLuminance(backgroundLuminance,1);extents[foreground]={},extents[background]={},extents[foreground].min=foregroundToWhite-3>1?foregroundToWhite-3:1,extents[foreground].max=foregroundToWhite+3<21?foregroundToWhite+3:21,extents[background].min=backgroundToWhite-3>1?backgroundToWhite-3:1,extents[background].max=backgroundToWhite+3<21?backgroundToWhite+3:21;var darkerColor=extents[foreground].max>=extents[background].max?foreground:background,lighterColor=extents[foreground].min<=extents[background].min?foreground:background,lightestValue=extents[lighterColor].min,darkestValue=extents[darkerColor].max,gaps_dark=21-darkestValue>0?21-darkestValue:0,gaps_light=lightestValue-1>0?lightestValue-1:0,foundStroke="",operation="",target="";if(lighterColor===foreground&&extents[foreground].max<extents[background].min?(operation="darken",target=foreground):darkerColor===foreground&&extents[foreground].min>extents[background].max&&(operation="lighten",target=foreground),operation){var colorAttempt=processColor(target,operation,3);foundStroke=calculateRelativeLuminance(backgroundLuminance,calculateLuminance(colorAttempt))>=3?colorAttempt:0}return foundStroke||(darkerColor===foreground&&gaps_dark?(operation="darken",target=foreground):lighterColor===foreground&&gaps_light&&(operation="lighten",target=foreground),foundStroke=operation?processColor(target,operation,3):""),foundStroke||(gaps_dark>gaps_light?(operation="darken",target=background):(operation="lighten",target=background),foundStroke=operation?processColor(target,operation,3):""),foundStroke||(foundStroke=foreground),foundStroke},getContrastingStroke:getContrastingStroke,ensureTextContrast:ensureTextContrast,convertVisaColor:function convertVisaColor(colorArr){return colorArr[0].includes("_")&&colorArr.map((function(c,i){return colorArr[i]=visaColors[c]})),colorArr},circularFind:function(array,index){var remainder=index%array.length;return array[0===remainder?0:remainder]},resolveLabelCollision:resolveLabelCollision,prepareBitmap:prepareBitmap,addToBitmap:addToBitmap,findCollision:function(bbox1,bbox2){return bbox1.x<=bbox2.x+bbox2.width&&bbox2.x<=bbox1.x+bbox1.width&&bbox2.y<=bbox1.y+bbox1.height&&bbox1.y<=bbox2.y+bbox2.height},capitalized:capitalized,chartAccessors:{singleAccessors:["valueAccessor","sizeAccessor","xAccessor","yAccessor","latitudeAccessor","longitudeAccessor","ordinalAccessor","idAccessor","markerAccessor","markerNameAccessor","joinAccessor","joinNameAccessor","nodeAccessor","parentAccessor","groupAccessor","seriesAccessor","sourceAccessor","targetAccessor"],arrayAccessors:["interactionKeys"],nestedAccessors:[{objectName:"tooltipLabel",objectAccessors:["labelAccessor"],formatAccessors:["format"]},{objectName:"accessibility",objectAccessors:["elementDescriptionAccessor"]},{objectName:"dataLabel",objectAccessors:["labelAccessor"],formatAccessors:["format"]},{objectName:"sizeConfig",objectAccessors:["sizeAccessor"],formatAccessors:["format"]}]},checkInteraction:checkInteraction,checkClicked:checkClicked,checkHovered:checkHovered,drawAxis:function(_a){var root=_a.root,height=_a.height,width=_a.width,axisScale=_a.axisScale,left=_a.left,right=_a.right,top=_a.top,wrapLabel=_a.wrapLabel,format=_a.format,dateFormat=_a.dateFormat,tickInterval=_a.tickInterval,label=_a.label,padding=_a.padding,hide=_a.hide,markOffset=_a.markOffset,hidePath=_a.hidePath,ticks=_a.ticks,duration=_a.duration;transitionDuration=duration||0===duration?duration:transitionDuration,scale=axisScale,hideAxisPath=hidePath,tickValues=ticks||null;var opacity=1;if(hide&&(opacity=0),tickWidth=wrapLabel||0,markOffset)if(left){(axisBase=root.selectAll(".axis-mark-y")).empty()&&(transitionDuration=0,axisBase=root.append("g").attr("class","axis-mark-y axis-mark")),tickFormat$1=function(){return null},orient=4,setOrientation();var context=axisBase.attr("data-testid","y-axis-mark");transitionDuration&&(context=context.transition("axis_base").ease(circleIn$1).duration(transitionDuration)),context.attr("transform",markOffset>0?"translate("+markOffset+", 0)":"").attr("opacity",opacity).call(axis$2)}else{var axisBase;(axisBase=root.selectAll(".axis-mark-x")).empty()&&(transitionDuration=0,axisBase=root.append("g")),tickFormat$1=function(){return null},orient=3,setOrientation();context=axisBase.attr("class","axis-mark-x axis-mark").attr("data-testid","x-axis-mark");transitionDuration&&(context=context.transition("axis_base").ease(circleIn$1).duration(transitionDuration)),context.attr("transform",markOffset>0?"translate(0, "+markOffset+")":"").attr("opacity",opacity).call(axis$2)}else if(left){var axisNode=root.selectAll(".axis").filter(".y").filter(".left"),axisLabel=root.selectAll(".axis-label").filter(".y").filter(".left");axisNode.empty()&&(transitionDuration=0,axisNode=root.append("g"),axisLabel=root.append("text")),tickFormat$1=function(data,i){return tickInterval&&i%tickInterval!=0?null:format&&"number"==typeof data?formatStats(data,format):data instanceof Date?timeFormat$2(dateFormat)(data):data},tickSizeInner=0,tickSizeOuter=0,tickPadding=10,tickWidth&&(xOffset=-8,yOffset=.6),orient=4,setOrientation();context=axisNode.attr("class","y axis left").attr("data-testid","y-axis");transitionDuration&&(context=context.transition("axis_node").ease(circleIn$1).duration(transitionDuration)),context.attr("opacity",opacity).call(axis$2);var labelContext=axisLabel.attr("class","y axis-label left").attr("data-testid","y-axis-label").attr("transform","rotate(-90)").text(label);transitionDuration&&(labelContext=labelContext.transition("axis_label").ease(circleIn$1).duration(transitionDuration)),labelContext.attr("y",padding?0-padding.left:-50).attr("x",0-height/2).attr("dy","1em")}else if(right){axisNode=root.selectAll(".axis").filter(".y").filter(".right"),axisLabel=root.selectAll(".axis-label").filter(".y").filter(".right");axisNode.empty()&&(transitionDuration=0,axisNode=root.append("g"),axisLabel=root.append("text")),tickFormat$1=function(data,i){return tickInterval&&i%tickInterval!=0?null:format&&"number"==typeof data?formatStats(data,format):data instanceof Date?timeFormat$2(dateFormat)(data):data},tickSizeInner=0,tickSizeOuter=0,tickPadding=10,tickWidth&&(xOffset=8,yOffset=.6),orient=2,setOrientation();context=axisNode.attr("class","y axis right").attr("data-testid","sec-y-axis");transitionDuration&&(context=context.transition("axis_node").ease(circleIn$1).duration(transitionDuration)),context.attr("transform","translate("+width+",0)").attr("opacity",opacity).call(axis$2);labelContext=axisLabel.attr("class","y axis-label right").attr("data-testid","sec-y-axis-label").attr("transform","rotate(-90)").text(label||"Cumulative Percentage");transitionDuration&&(labelContext=labelContext.transition("axis_label").ease(circleIn$1).duration(transitionDuration)),labelContext.attr("y",padding?width+padding.left+padding.right-50:width-50).attr("x",0-height/2).attr("dy","1em")}else if(top){axisNode=root.selectAll(".axis").filter(".x").filter(".top"),axisLabel=root.selectAll(".axis-label").filter(".x").filter(".top");axisNode.empty()&&(transitionDuration=0,axisNode=root.append("g"),axisLabel=root.append("text")),tickFormat$1=function(data,i){return tickInterval&&i%tickInterval!=0?null:format&&"number"==typeof data?formatStats(data,format):data instanceof Date?timeFormat$2(dateFormat)(data):data},tickSizeInner=0,tickSizeOuter=0,tickPadding=10,tickWidth&&(xOffset=0,yOffset=1),orient=1,setOrientation();context=axisNode.attr("class","x axis top").attr("data-testid","sec-x-axis");transitionDuration&&(context=context.transition("axis_node").ease(circleIn$1).duration(transitionDuration)),context.attr("transform","translate(0, 0)").attr("opacity",opacity).call(axis$2);labelContext=axisLabel.attr("class","x axis-label top").attr("data-testid","sec-x-axis-label").attr("transform","translate(0, 0)").text(format&&"number"==typeof label?formatStats(label,format):label);transitionDuration&&(labelContext=labelContext.transition("axis_label").ease(circleIn$1).duration(transitionDuration)),labelContext.attr("x",width/2).attr("y",padding?-padding.top:-50).attr("dy","1em")}else{axisNode=root.selectAll(".axis").filter(".x").filter(".bottom"),axisLabel=root.selectAll(".axis-label").filter(".x").filter(".bottom");axisNode.empty()&&(transitionDuration=0,axisNode=root.append("g"),axisLabel=root.append("text")),tickFormat$1=function(data,i){return tickInterval&&i%tickInterval!=0?null:format&&"number"==typeof data?formatStats(data,format):data instanceof Date?timeFormat$2(dateFormat)(data):data},tickSizeInner=0,tickSizeOuter=0,tickPadding=10,tickWidth&&(xOffset=0,yOffset=1),orient=3,setOrientation();context=axisNode.attr("class","x axis bottom").attr("data-testid","x-axis");transitionDuration&&(context=context.transition("axis_node").ease(circleIn$1).duration(transitionDuration)),context.attr("transform","translate(0, "+height+")").attr("opacity",opacity).call(axis$2);labelContext=axisLabel.attr("class","x axis-label bottom").attr("data-testid","x-axis-label").attr("transform","translate(0, 0)").text(format&&"number"==typeof label?formatStats(label,format):label);transitionDuration&&(labelContext=labelContext.transition("axis_node").ease(circleIn$1).duration(transitionDuration)),labelContext.attr("x",width/2).attr("y",padding?height+padding.bottom:height)}},wrap:wrap$1,halve:function(val){return val/2},drawGrid:function(root,height,width,axis,left,hide,tickInterval,duration){var transitionDuration=duration||0===duration?duration:750,opacity=1;if(hide&&(opacity=0),left){(grid=root.selectAll(".grid").filter(".left")).node()||(transitionDuration=0,grid=root.append("g").attr("class","grid left").attr("data-testid","grid-left"));var context=grid;transitionDuration&&(context=grid.transition("grid-left-update").duration(transitionDuration).ease(circleIn$1)),context.attr("opacity",opacity).call(function axisLeft$1(scale){return axis$1(left$1,scale)}(axis).tickSize(-width).tickFormat("").tickValues((axis.ticks?axis.ticks():axis.domain()).filter((function(_,i){return!(tickInterval&&i%tickInterval!=0)}))))}else{var grid;(grid=root.selectAll(".grid").filter(".bottom")).node()||(transitionDuration=0,grid=root.append("g").attr("class","grid bottom").attr("data-testid","grid-bottom"));context=grid;transitionDuration&&(context=grid.transition("grid-bottom-update").duration(transitionDuration).ease(circleIn$1)),context.attr("opacity",opacity).call(function axisBottom$1(scale){return axis$1(bottom$1,scale)}(axis).tickSize(height).tickFormat("").tickValues((axis.ticks?axis.ticks():axis.domain()).filter((function(_,i){return!(tickInterval&&i%tickInterval!=0)}))))}},drawLegend:function(_a){var root=_a.root,uniqueID=_a.uniqueID,width=_a.width,height=_a.height,colorArr=_a.colorArr,baseColorArr=_a.baseColorArr,hideStrokes=_a.hideStrokes,dashPatterns=_a.dashPatterns,scale=_a.scale,steps=_a.steps,margin=_a.margin,padding=_a.padding,duration=_a.duration,type=_a.type,secondary=_a.secondary,fontSize=_a.fontSize,data=_a.data,labelKey=_a.labelKey,label=_a.label,symbol=_a.symbol,format=_a.format,hide=_a.hide,hoverHighlight=_a.hoverHighlight,clickHighlight=_a.clickHighlight,groupAccessor=_a.groupAccessor,interactionKeys=_a.interactionKeys,hoverStyle=_a.hoverStyle,clickStyle=_a.clickStyle,hoverOpacity=_a.hoverOpacity,totalWidth=width+padding.left+padding.right+5,leftOffset=padding.left+margin.left,offsetLegend="scatter"===type||"key"===type||"line"===type||"bar"===type,legendWidth=steps?width/steps:0;height=hide?0:height+(offsetLegend?25:5);var opacity=hide?0:1;"parallel"===type&&(type="line"),root.attr("viewBox","0 0 "+totalWidth+" "+height);var paddingWrapper=root.select(".legend-padding-wrapper");root.select(".legend-padding-wrapper").size()||(paddingWrapper=root.append("g").attr("class","legend-padding-wrapper"));var symbolMod=symbol?7:4;paddingWrapper.attr("transform","translate("+((offsetLegend?leftOffset:0)+symbolMod)+","+(offsetLegend?24:4)+")");var filter=createTextStrokeFilter({root:root.node(),id:uniqueID+"-legend",color:"#ffffff"});switch(type){default:root.attr("opacity",opacity).attr("width",totalWidth).attr("height",height).attr("style",hide?"display: none;":null).attr("transform","translate(0, 0)");var defaultLegend=paddingWrapper.selectAll(".legend.default").data([0].concat(colorArr));root.selectAll(".key").remove(),root.selectAll(".gradient").remove(),defaultLegend.enter().append("g").attr("class","legend default").merge(defaultLegend).attr("transform",(function(_,i){return 0===i?"translate("+leftOffset+", 20)":"translate("+((i-1)*legendWidth+leftOffset)+", 20)"})).each((function(d,i,n){var gridLabel=formatStats(0===i?scale.invertExtent(colorArr[0])[0]:scale.invertExtent(d)[1],format),labelPosition=0===i?0:legendWidth,colorGrid=select$4(n[i]).selectAll("rect").data([d]),context=colorGrid.enter().append("rect").attr("opacity",0).merge(colorGrid).attr("width",legendWidth).attr("height",15).attr("x",0).attr("y",0).attr("fill",d),exitContext=colorGrid.exit(),gridText=select$4(n[i]).selectAll("text").data([d]),textContext=gridText.enter().append("text").attr("opacity",0).merge(gridText).attr("dx",labelPosition).attr("dy","2.5em").text(gridLabel),textExit=gridText.exit();duration&&(context=context.transition().duration(duration).ease(circleIn$1),exitContext=exitContext.transition().duration(duration).ease(circleIn$1),textContext=textContext.transition().duration(duration).ease(circleIn$1),textExit=textExit.transition().duration(duration).ease(circleIn$1)),context.attr("opacity",opacity),exitContext.attr("opacity",0).remove(),textContext.attr("opacity",opacity),textExit.attr("opacity",0).remove()})),defaultLegend.exit().remove();break;case"gradient":var gradientId=(new Date).getTime();root.attr("width",totalWidth).attr("height",height).attr("style",hide?"display: none;":null).attr("transform","translate(0, 20)").attr("opacity",opacity),root.selectAll(".key").remove(),root.selectAll(".default").remove();var textDiv=paddingWrapper.selectAll("text.gradient").data([0].concat(colorArr)),textContext=textDiv.enter().append("text").attr("class","legend-text gradient").merge(textDiv).attr("transform",(function(_,i){return 0===i?"translate("+leftOffset+", 0)":"translate("+((i-1)*legendWidth+leftOffset)+", 0)"})).attr("opacity",0).attr("dx",(function(_,i){return 0===i?0:legendWidth})).attr("dy","2.5em").text((function(d,i){return formatStats(0===i?scale.invertExtent(colorArr[0])[0]:scale.invertExtent(d)[1],format)})),textExit=textDiv.exit();duration&&(textContext=textContext.transition().duration(duration).ease(circleIn$1),textExit=textExit.transition().duration(duration).ease(circleIn$1)),textContext.attr("opacity",(function(_,i){return 0===i||i===colorArr.length?opacity:0})),textExit.attr("opacity",0).remove(),paddingWrapper.selectAll(".legend").empty()||paddingWrapper.selectAll(".legend").remove();var gradientDiv=paddingWrapper.append("g").attr("class","legend gradient");gradientDiv.append("defs").append("linearGradient").attr("id","mainGradient-"+gradientId).selectAll("stop").data(colorArr).enter().append("stop").attr("offset",(function(_,i){return 100/colorArr.length*(i+1)+"%"})).attr("stop-color",(function(d){return d})),gradientDiv.append("rect").attr("class","legend-gradient").attr("x",leftOffset).attr("y",0).attr("width",width).attr("height",15).attr("style","fill: url(#mainGradient-"+gradientId+")");break;case"key":var accumWidth_1=0,yPos_1=0;root.attr("width",totalWidth).attr("height",height).attr("opacity",opacity).attr("style",hide?"display: none;":null);var currentKeyLegend=paddingWrapper.selectAll(".legend.key").data(colorArr);root.selectAll(".default").remove(),root.selectAll(".gradient").remove(),currentKeyLegend.enter().append("g").attr("class","legend key").merge(currentKeyLegend).each((function(d,i,n){var prevLabel=0===i?"":label?label[i-1]:formatStats(scale.invertExtent(colorArr[i-1])[0],format)+"-"+formatStats(scale.invertExtent(colorArr[i-1])[1],format);(accumWidth_1=0===i?0:accumWidth_1+getTextWidth(prevLabel,fontSize)+40)+getTextWidth(prevLabel,fontSize)>width&&(accumWidth_1=0,yPos_1+=fontSize+10);var keyLabel=label?label[i]:formatStats(scale.invertExtent(d)[0],format)+"-"+formatStats(scale.invertExtent(d)[1],format),keyDot=select$4(n[i]).selectAll("rect").data([d]),context=keyDot.enter().append("rect").attr("opacity",0).merge(keyDot).attr("fill",d).attr("width",15).attr("height",15),exitContext=keyDot.exit(),keyText=select$4(n[i]).selectAll("text").data([keyLabel]),textContext=keyText.enter().append("text").attr("class","key-text").attr("opacity",0).merge(keyText).attr("dx",".2em").attr("dy",13).text(keyLabel),textExit=keyText.exit();duration&&(context=context.transition().duration(duration).ease(circleIn$1),exitContext=exitContext.transition().duration(duration).ease(circleIn$1),textContext=textContext.transition().duration(duration).ease(circleIn$1),textExit=textExit.transition().duration(duration).ease(circleIn$1)),context.attr("x",accumWidth_1).attr("y",yPos_1).attr("opacity",opacity),exitContext.attr("opacity",0).remove(),textContext.attr("x",accumWidth_1+20).attr("y",yPos_1).attr("opacity",opacity),textExit.attr("opacity",0).remove()})),currentKeyLegend.exit().remove();break;case"line":var accumWidthLine_1=0,yPosLine_1=0,dashIdealSize_1=[28,28,26,28,26];root.attr("width",totalWidth).attr("height",height).attr("opacity",1).attr("style",hide?"display: none;":null);var currentLineLegend=paddingWrapper.selectAll(".legend").data(data);currentLineLegend.enter().append("g").attr("class","legend").merge(currentLineLegend).each((function(d,i,n){var prevLabel=0===i?"":label?label[i-1]:data[i-1].key,keyLabel=label?label[i]:d.key;(accumWidthLine_1=0===i?0:accumWidthLine_1+getTextWidth(prevLabel,fontSize)+60)+getTextWidth(keyLabel,fontSize)>width&&(accumWidthLine_1=0,yPosLine_1+=fontSize+10);var keyDot=select$4(n[i]).selectAll("line").data([d.key]),context=keyDot.enter().append("line").merge(keyDot).style("stroke-width",secondary.includes(d.key)?2:3).style("stroke",colorArr[i]).style("stroke-dasharray",secondary.includes(d.key)?"2,2":dashPatterns&&i<dashPatterns.length?dashPatterns[i]:"").attr("stroke-width",secondary.includes(d.key)?2:3).attr("stroke",colorArr[i]).attr("stroke-dasharray",secondary.includes(d.key)?"2,2":dashPatterns&&i<dashPatterns.length?dashPatterns[i]:"").style("opacity",opacity),exitContext=keyDot.exit(),keyText=select$4(n[i]).selectAll("text").data([d.key]),textContext=keyText.enter().append("text").attr("class","key-text").attr("opacity",0).merge(keyText).attr("dx",".2em").attr("dy",13).text(keyLabel),textExit=keyText.exit();duration&&(context=context.transition().duration(duration).ease(circleIn$1),exitContext=exitContext.transition().duration(duration).ease(circleIn$1),textContext=textContext.transition().duration(duration).ease(circleIn$1),textExit=textExit.transition().duration(duration).ease(circleIn$1)),context.attr("x1",accumWidthLine_1).attr("x2",accumWidthLine_1+(secondary.includes(d.key)?30:dashPatterns&&i<dashPatterns.length?dashIdealSize_1[i]:30)).attr("y1",yPosLine_1+8).attr("y2",yPosLine_1+8),exitContext.attr("opacity",0).remove(),textContext.attr("x",accumWidthLine_1+5+(secondary.includes(d.key)?30:dashPatterns&&i<dashPatterns.length?dashIdealSize_1[i]:30)).attr("y",yPosLine_1).attr("opacity",opacity),textExit.attr("opacity",0).remove()})),currentLineLegend.exit().remove();break;case"bar":var accumWidthBar_1=0,yPosBar_1=0;root.attr("width",totalWidth).attr("height",height).attr("opacity",opacity).attr("style",hide?"display: none;":null);var currentBarLegend=paddingWrapper.selectAll(".legend.bar").data(data);currentBarLegend.enter().append("g").attr("class","legend bar").merge(currentBarLegend).each((function(d,i,n){var prevLabel=0===i?"":label&&label[i-1]?format?formatStats(label[i-1],format):label[i-1]:format?formatStats(data[i-1][labelKey],format):data[i-1][labelKey],keyLabel=label&&label[i]?format?formatStats(label[i],format):label[i]:format?formatStats(d[labelKey],format):d[labelKey];(accumWidthBar_1=0===i?0:accumWidthBar_1+getTextWidth(prevLabel,fontSize)+45)+getTextWidth(keyLabel,fontSize)>width&&(accumWidthBar_1=0,yPosBar_1+=fontSize+10);var keyDot=select$4(n[i]).selectAll("rect").data([d[labelKey]]),context=keyDot.enter().append("rect").attr("class","bar-rect").attr("opacity",0).merge(keyDot).attr("fill",scale?scale(d[labelKey]):colorArr[i]||colorArr(d[labelKey])).attr("width",20).attr("height",20),exitContext=keyDot.exit(),keyText=select$4(n[i]).selectAll("text").data([d[labelKey]]),textContext=keyText.enter().append("text").attr("class","bar-text").attr("opacity",0).merge(keyText).attr("dx",".2em").attr("dy",16).text(keyLabel),textExit=keyText.exit();duration&&(context=context.transition().duration(duration).ease(circleIn$1),exitContext=exitContext.transition().duration(duration).ease(circleIn$1),textContext=textContext.transition().duration(duration).ease(circleIn$1),textExit=textExit.transition().duration(duration).ease(circleIn$1)),context.attr("x",accumWidthBar_1).attr("y",yPosBar_1).attr("opacity",opacity),exitContext.attr("opacity",0).remove(),textContext.attr("x",accumWidthBar_1+25).attr("y",yPosBar_1).attr("opacity",opacity),textExit.attr("opacity",0).remove()})),currentBarLegend.exit().remove();break;case"scatter":var accumWidthScatter_1=0,yPosScatter_1=0;root.attr("width",totalWidth).attr("height",height).attr("opacity",opacity).attr("style",hide?"display: none;":null);var currentScatterLegend=paddingWrapper.selectAll(".legend").data(data);currentScatterLegend.enter().append("g").attr("class","legend").merge(currentScatterLegend).each((function(d,i,n){var prevLabel=0===i?"":label?label[i-1]:data[i-1].key,keyLabel=label?label[i]:d.key;(accumWidthScatter_1=0===i?0:accumWidthScatter_1+getTextWidth(prevLabel,fontSize)+50)+getTextWidth(keyLabel,fontSize)>width&&(accumWidthScatter_1=0,yPosScatter_1+=fontSize+10);var keyDot=select$4(n[i]).selectAll("path").data([d]),context=keyDot.enter().append("path").attr("opacity",0).merge(keyDot).attr("fill",colorArr[i]),exitContext=keyDot.exit(),keyText=select$4(n[i]).selectAll("text").data([d]),textContext=keyText.enter().append("text").attr("class","key-text").attr("opacity",0).merge(keyText).attr("dx",".2em").attr("dy",13).text(keyLabel),textExit=keyText.exit();duration&&(context=context.transition().duration(duration).ease(circleIn$1),exitContext=exitContext.transition().duration(duration).ease(circleIn$1),textContext=textContext.transition().duration(duration).ease(circleIn$1),textExit=textExit.transition().duration(duration).ease(circleIn$1)),context.attr("transform","translate("+(+accumWidthScatter_1+4)+","+(+yPosScatter_1+8)+")  scale(4)").attr("d",symbols$1[symbol[i]||symbol[0]].general).attr("opacity",opacity),exitContext.attr("opacity",0).remove(),textContext.attr("x",accumWidthScatter_1+15).attr("y",yPosScatter_1).attr("opacity",opacity),textExit.attr("opacity",0).remove()})),currentScatterLegend.exit().remove()}if(baseColorArr&&!hideStrokes){var isArray_1=Array.isArray(baseColorArr);root.selectAll(".legend").each((function(d,i,n){var baseColor=isArray_1&&1===baseColorArr.length?baseColorArr[0]:isArray_1?baseColorArr[i]:baseColorArr[i]||baseColorArr(d[labelKey]);if(baseColor){var contrastFriendlyColor=calculateRelativeLuminance(calculateLuminance(baseColor),1)<3?getContrastingStroke(baseColor):baseColor;select$4(n[i].firstElementChild).attr("data-base-color",baseColor),select$4(n[i].firstElementChild).attr("stroke",contrastFriendlyColor),select$4(n[i].firstElementChild).attr("stroke-width",1)}}))}else"line"!==type&&root.selectAll(".legend").selectAll("*").attr("stroke","none").attr("stroke-width",0);root.selectAll("text").attr("filter",filter),root.attr("data-type",type||"default"),root.selectAll(".legend *:first-child").each((function(_,i,n){var me=select$4(n[i]);me.attr("fill")&&me.attr("data-fill",me.attr("fill")),me.attr("stroke")&&me.attr("data-stroke",me.attr("stroke")),me.attr("stroke-width")&&me.attr("data-stroke-width",me.attr("stroke-width"))})),setLegendInteractionState({root:root,uniqueID:uniqueID,interactionKeys:interactionKeys,groupAccessor:groupAccessor,hoverHighlight:hoverHighlight,clickHighlight:clickHighlight,hoverStyle:hoverStyle,clickStyle:clickStyle,hoverOpacity:hoverOpacity}),setLegendAccess(root.node(),uniqueID)},setLegendInteractionState:setLegendInteractionState,drawTooltip:drawTooltip,darkerColor:darkerColor,equalizePath:function equalizePath(element,limit){var l=element.getTotalLength();try{if(l>limit)throw"Path length exceeds supplied limit. Raise limit."}catch(err){console.log(err)}for(var i=0,path="M",point={};i<=l;)i&&(path+="L"),path+=(point=element.getPointAtLength(i)).x+","+point.y,i+=1;for(;i<=limit;)path+=point.x+","+point.y,i+=1;return path+="Z"},formatDataLabel:formatDataLabel,formatStats:formatStats,setNumeralLocale:setNumeralLocale,registerNumeralFormat:function registerNumeralFormat(name,payload,overwrite){void 0===name&&(name="formatName"),numeralRegister("format",name,payload,overwrite)},registerNumeralLocale:registerNumeralLocale,getNumeralInstance:function getNumeralInstance(){return getGlobalInstances().numeral},formatDate:formatDate$1,getColors:function getColors(colorPalette,dataRange){var colorArr=[];colorArr.single_blue=[visaColors.categorical_blue],colorArr.single_brown=[visaColors.categorical_brown],colorArr.single_grey=[visaColors.pri_grey],colorArr.single_secBlue=[visaColors.sec_blue],colorArr.single_secOrange=[visaColors.sec_orange],colorArr.single_compBlue=[visaColors.comp_blue],colorArr.single_compGreen=[visaColors.comp_green],colorArr.single_suppPink=[visaColors.supp_pink],colorArr.single_suppPurple=[visaColors.supp_purple],colorArr.single_suppGreen=[visaColors.supp_green],colorArr.single_ossBlue=[visaColors.oss_blue],colorArr.single_ossLightBlue=[visaColors.oss_light_blue],colorArr.single_ossGrey=[visaColors.oss_dark_grey],colorArr.single_ossLightGrey=[visaColors.oss_light_grey],colorArr.single_categorical_blue=[visaColors.categorical_blue],colorArr.single_categorical_light_blue=[visaColors.categorical_light_blue],colorArr.single_categorical_blue_text=[visaColors.categorical_blue_text],colorArr.single_categorical_purple=[visaColors.categorical_purple],colorArr.single_categorical_light_purple=[visaColors.categorical_light_purple],colorArr.single_categorical_purple_text=[visaColors.categorical_purple_text],colorArr.single_categorical_olive=[visaColors.categorical_olive],colorArr.single_categorical_light_olive=[visaColors.categorical_light_olive],colorArr.single_categorical_olive_text=[visaColors.categorical_olive_text],colorArr.single_categorical_grey=[visaColors.categorical_grey],colorArr.single_categorical_light_grey=[visaColors.categorical_light_grey],colorArr.single_categorical_grey_text=[visaColors.categorical_grey_text],colorArr.single_categorical_rose=[visaColors.categorical_rose],colorArr.single_categorical_light_rose=[visaColors.categorical_light_rose],colorArr.single_categorical_rose_text=[visaColors.categorical_rose_text],colorArr.single_categorical_brown=[visaColors.categorical_brown],colorArr.single_categorical_light_brown=[visaColors.categorical_light_brown],colorArr.single_categorical_brown_text=[visaColors.categorical_brown_text],colorArr.sequential_grey=["#f2f2f2","#d7d7d7","#bdbdbd","#a3a3a3","#898989","#717171","#595959","#434343","#2e2e2e"],colorArr.sequential_secBlue=["#ecf9f9","#c0e0f1","#91c8ea","#57b0e2","#0c96d7","#1778c7","#145bb8","#003da8","#002c76"],colorArr.sequential_secOrange=["#fee9c7","#ffc78d","#faa654","#ef8506","#e36001","#c04e04","#9c3d05","#7b2c05","#5c1c00"],colorArr.sequential_compBlue=["#f3fbfe","#bde3f2","#81cae6","#2ab1d7","#2294b5","#1b7994","#135d74","#0c4557","#062c3a"],colorArr.sequential_compGreen=["#eafed4","#bae7b4","#89cf95","#53b677","#009e5c","#00814b","#00663b","#004b2b","#00321d"],colorArr.sequential_suppPink=["#f8f4f9","#f3cef3","#eca6ed","#e37ce6","#d74adf","#aa45af","#86378a","#632a66","#421b44"],colorArr.sequential_suppPurple=["#f7fcfd","#e3daec","#cebadd","#b59acc","#977ebb","#7367a5","#554f87","#423667","#331d48"],colorArr.sequential_suppGreen=["#ffffe5","#deebc3","#bed6a2","#9ec283","#7fae61","#5e9a48","#448340","#286e3a","#005a32"],colorArr.diverging_RtoB=["#a50026","#c7422a","#df7232","#f3a14b","#ffcf7b","#afdbf1","#7ab7e5","#5390d1","#386bb6","#2d4697"],colorArr.diverging_RtoG=["#972800","#ba4d18","#df7131","#f0a04e","#fecd6e","#bcdeba","#72c1a7","#529f8e","#307e75","#015e5d"],colorArr.diverging_GtoP=["#194f46","#377258","#57976f","#7abb8c","#a6e0b5","#bbd4f9","#aba6ea","#9879d2","#7655b2","#3c3f85"],colorArr.categorical=["#7c99b1","#cacae7","#abb798","#a19491","#e7c0b8","#624c48"],colorArr.categorical_light=["#7c99b1","#cacae7","#abb798","#a19491","#e7c0b8","#624c48"],colorArr.categorical_dark=["#226092","#796aaf","#829e46","#7a6763","#c18174","#43312d"],colorArr.categorical_text=["#164d79","#66589b","#498329","#6e5a55","#954737","#43312d"];var selectedColor="string"==typeof colorPalette?colorArr[colorPalette]:colorPalette;if(Array.isArray(dataRange)){var colorScale=void 0;if("string"==typeof dataRange[0]){var newColorArr_1=[],colorIndex=colorPalette.includes("diverging")?divergingColorIndex:colorPalette.includes("categorical")?categoricalColorIndex:sequentialColorIndex;"string"==typeof colorPalette&&colorIndex[dataRange.length]?colorIndex[dataRange.length].map((function(key){selectedColor[key]?newColorArr_1.push(selectedColor[key]):newColorArr_1.push(selectedColor[0])})):newColorArr_1=selectedColor,colorScale=ordinal$1().domain(dataRange).range(newColorArr_1)}else colorScale=quantize$2().domain(dataRange).range(selectedColor);return colorScale}if(Number.isInteger(dataRange)){var newColorArr_2=[];return(colorIndex=colorPalette.includes("diverging")?divergingColorIndex:colorPalette.includes("categorical")?categoricalColorIndex:sequentialColorIndex)[dataRange]?colorIndex[dataRange].map((function(key){selectedColor[key]?newColorArr_2.push(selectedColor[key]):newColorArr_2.push(selectedColor[0])})):newColorArr_2=selectedColor,newColorArr_2}return selectedColor},getLicenses:getLicenses,generalizePath:function generalizePath(element,targetLength){for(var l=element.getTotalLength(),i=0,increment=l/targetLength,path="M";i<=l;){i&&(path+="L");var point=element.getPointAtLength(i);path+=point.x+","+point.y,i+=increment}return path+="Z"},getDataSymbol:function getDataSymbol(symbolFunc,symbolType){var symbolMap={cross:symbolCross,circle:symbolCircle,square:symbolSquare,star:symbolStar,triangle:symbolTriangle,diamond:symbolDiamond};return symbolMap[symbolType]?symbolFunc.type(symbolMap[symbolType])():symbolFunc.type(symbolCircle)()},getScopedData:getScopedData,getTextWidth:getTextWidth,verifyTextHasSpace:function(_a){var text=_a.text,dimensions=_a.dimensions,fontSize=_a.fontSize,noPadding=_a.noPadding,context=document.createElement("canvas").getContext("2d");context.font=fontSize+"px OpenSans";for(var measurementData=context.measureText(text),padding=noPadding?1:1.1,keys=Object.keys(dimensions),textHasRoom=!0,i=0;textHasRoom&&i<keys.length;)textHasRoom="height"!==keys[i]?measurementData[keys[i]]*padding<=dimensions[keys[i]]:fontSize*padding<=dimensions[keys[i]],i++;return textHasRoom},manuallyWrapText:manuallyWrapText,getPadding:function getPadding(padding){var paddingSetting;if("large"===padding)paddingSetting={top:40,bottom:60,right:100,left:80};else if("small"===padding)paddingSetting={top:10,bottom:20,right:40,left:40};else if(""===padding)paddingSetting={top:20,bottom:50,right:70,left:60};else if("inlineText"===padding)return"3px 6px 3px 6px";return paddingSetting},validationStyle:validationStyle,interactionStyle:function(_a){var data=_a.data,clickHighlight=_a.clickHighlight,hoverHighlight=_a.hoverHighlight,clickStyle=_a.clickStyle,hoverStyle=_a.hoverStyle,interactionKeys=_a.interactionKeys,defaultStroke=_a.defaultStroke,defaultStrokeWidth=_a.defaultStrokeWidth,offset=_a.offset,strokeColor=clickHighlight.length>0&&checkClicked(data,clickHighlight,interactionKeys)||hoverHighlight&&checkHovered(data,hoverHighlight,interactionKeys)?defaultStroke:"none",strokeStyle=checkClicked(data,clickHighlight,interactionKeys)?"solid":"dashed",strokeWidth=checkClicked(data,clickHighlight,interactionKeys)?clickStyle.strokeWidth||defaultStrokeWidth:hoverHighlight&&checkHovered(data,hoverHighlight,interactionKeys)&&hoverStyle.strokeWidth?hoverStyle.strokeWidth||defaultStrokeWidth:0;return"string"==typeof strokeWidth&&strokeWidth.includes("px")&&(strokeWidth=parseInt(strokeWidth.substr(0,strokeWidth.indexOf("p")))),"outline-color:"+strokeColor+";\n        outline-style:"+strokeStyle+";\n        outline-width:"+strokeWidth+"px;\n        outline-offset:-"+(offset?strokeWidth+offset:strokeWidth)+"px;"},initTooltipStyle:function(root){root.style("position","absolute").style("padding","0.5rem").style("opacity",0).style("background-color","#ffffff").style("font-size","14px").style("font-weight","400").style("color","#222222").style("border","1px solid #565656").style("border-radius","3px").style("pointer-events","none").style("min-width","80px").style("max-width","300px").style("z-index",10),root.append("p").style("margin",0)},leastSquares:function leastSquares(xSeries,ySeries){var reduceSumFunc=function(prev,cur){return prev+cur},xBar=1*xSeries.reduce(reduceSumFunc)/xSeries.length,yBar=1*ySeries.reduce(reduceSumFunc)/ySeries.length,ssXX=xSeries.map((function(d){return Math.pow(d-xBar,2)})).reduce(reduceSumFunc),ssYY=ySeries.map((function(d){return Math.pow(d-yBar,2)})).reduce(reduceSumFunc),ssXY=xSeries.map((function(d,i){return(d-xBar)*(ySeries[i]-yBar)})).reduce(reduceSumFunc),slope=ssXY/ssXX;return[slope,yBar-xBar*slope,Math.pow(ssXY,2)/(ssXX*ssYY)]},moveToFront:function moveToFront(selection){return selection.each((function(){this.parentNode.appendChild(this)}))},mapButtons:{alaska:"M0.2,1ZM0,0ZM0.1,0.3ZM0,0.2L8.1,6.9L3.8,7.5L0,0.2ZM0,0.3ZM0.5,1.2L0.5,1.2ZM1.4,2.5L1.4,2.5ZM5.1,6.6L5.1,6.6ZM1,0.7L4,7.2L1,0.7ZM0,0ZM0.6,0.8L5.5,4.1L0.6,0.8ZM2.1,0ZM0.8,0ZM51.5,5.8L60.5,5.3L66.9,10.4L68.9,20.3L70.9,30.2L72.8,40.1L74.8,50L76.8,60L82.9,61.6L89.5,68.2L94.3,62.3L101.8,67.6L108.9,74.6L116.4,77.9L119.6,85.6L114.5,84.3L110.2,81.3L105.5,75.8L98.9,70.1L97.7,69.7L92.3,68.5L92.3,71.8L83.6,67.7L79.2,66.4L69.8,66.2L62.1,64.5L59.9,61.7L56,64L53.2,68.1L47.1,73.4L45.4,70.6L48.6,62.5L45.6,62.8L41.4,70.4L40.4,75.3L34.9,81.6L29.7,87.2L23.9,90.9L18,93.5L11.9,94.7L7.5,97.8L2.3,99.3L5.3,96.9L12.3,92.3L16.4,91.7L23.2,86.2L27.5,77.7L23.2,76L18.8,74.1L14,72.7L11.2,67.6L5.2,62.2L3.5,56.3L8.3,49.6L15.4,46.7L19.5,41.1L16.1,39.7L8.9,38.9L4.8,32.3L9.5,28.7L14.2,29.8L19.4,28.7L20,27.4L15.2,21.7L10.7,14.4L18.3,10.6L24.8,4.6L32.7,0.2L36.9,1.5L43.1,4.9ZM0.9,2.9L0.9,2.9ZM2.6,2.8L7.4,1.5L3.5,6.8L2.6,2.8ZM0.7,0ZM0.6,0ZM1.4,0ZM1.1,0ZM0.4,0ZM0.5,0ZM0,0ZM0.5,0ZM1.2,0.3ZM3.2,0.1L3.2,0.1ZM5.6,0.1L0.1,3.6L5.6,0.1ZM0,1.8L0,1.8ZM0.9,0ZM0.6,0ZM0.6,0ZM0.7,0L6.6,4.9L0.7,0ZM0.6,0ZM0,0ZM2.6,0.6L2.6,0.6ZM1.7,0.8ZM0.8,0ZM0,0ZM1.6,0.8Z",hawaii:"M67.6,57L65.7,56.3L63.8,55.6L62.9,53.9L63.1,51.9L63.3,49.9L62.5,48.1L61.7,46.2L60.9,44.4L61.2,42.7L62.7,41.3L63.6,39.5L64.1,37.7L63.2,36L63.6,34.2L65.4,35.1L67.2,36.1L69.1,36.9L71,37.5L72.9,38.2L74.5,39.4L76.1,40.7L76.4,42.5L77.5,44.1L79.1,45.3L80.7,46.6L80.2,48L78.8,49.5L77.1,50.4L75.1,50.9L73.2,51.5L71.5,52.6L69.8,53.7L68.6,55.3ZM51.8,20.9L53.1,22.6L54.7,22.8L56.6,22.5L58.5,23.5L60.4,24.5L61.1,25.9L60.1,27.6L58.1,28L56,28.5L54.1,28.2L53.9,26.1L52.7,24.9L50.8,24.2L50.3,22.4L51.8,20.9ZM45.3,17.8L43.9,19.4L41.9,19.6L40,19.4L41.1,17.6L43.2,17.7ZM29.4,9.3L30.3,11.3L31.2,13.2L30.5,15.2L28.8,15.9L26.7,16L25.8,14L24.9,12.1L25.7,11.2L27.7,10.5L29.4,9.3ZM4.7,0L6.7,0.4L7.4,2.4L6.9,4.6L5.2,6L3.2,5.4L1.2,4.6L0,3.3L0.6,1.2L2.6,0.6Z",puertoRico:"M37.3,0L35.4,0.7L34.6,2.3L33.8,4.2L32.5,5.6L30.9,6.7L30.2,8.4L31.3,10.1L32.9,11.3L33.7,13.1L33.9,15L33.6,17L33.2,19L32.5,20.9L32.8,22.9L32.1,24.7L32.6,26.5L34.1,26.2L36,26.9L37.8,26.5L39.8,26.2L41.8,26.5L43.7,27L45.7,27.2L47.7,27L49.6,26.5L51.4,25.6L53.2,25.1L55.2,25.4L57.1,25.9L59.1,25.9L61.2,25.9L63.1,25.5L65,25.3L67,25.8L68.6,26.9L70.5,26.3L72.4,26.4L74.4,26.7L76.4,26.8L78.3,26.8L80,27.3L82,26.7L83.9,26.2L85.9,25.8L87.9,25.7L89.9,25.4L91.8,24.8L93.6,23.9L94.6,22.2L95.8,20.6L96.9,19L97.8,17.2L99.5,16.2L101.1,15L103,14.3L104.7,13.4L105.1,12.1L104,10.5L103.7,8.5L104.2,6.6L102.5,6.2L100.5,6.1L98.6,5.5L96.7,4.7L94.9,3.8L93,3.4L91,2.9L89,2.7L87,2.6L85,2.6L83.1,2.1L81.1,2.3L79.1,2.7L77.3,1.9L75.3,1.7L73.3,1.5L71.3,1.3L69.3,1.1L67.3,1.3L65.3,1.6L63.3,1.5L61.3,1.2L59.3,1.1L57.3,1.2L55.3,1.4L53.3,1.4L51.3,1.2L49.3,1.1L47.2,1.2L45.2,1.1L43.3,0.7L41.3,0.3L39.3,0.1L37.3,0ZM105,5.5ZM20.4,5.8ZM106.8,6.1ZM107.8,6.6ZM115.1,6.6ZM105.7,7ZM116.2,7L116.7,9.1L118.3,10.2L120.1,9.8L120.2,8.5L118.3,7.5L116.2,7ZM114,8ZM105.5,8.7ZM104.2,8.9ZM-1,16.4ZM114,16.5L112,16.7L110.1,17.3L108.2,17.8L106.5,18.7L106.8,20.1L108.7,20.4L110.7,20.1L112.6,19.7L114.6,19.3L116.5,18.8L118.3,18L117.9,17L116,16.7ZM2.8,18.2L0.6,18.5L-0.1,20.4L1.9,21.4L3.8,20.2L2.8,18.2ZM58.2,25.9ZM41.3,26.6ZM37,27.8ZM63.5,28.7Z",continentalUS:"M78.9,25.6L79.9,23.8L81.4,27.2L81.4,23.5L82.8,21.8L84.4,18.8L83.3,18.3L86.8,16.4L87.2,14.9L87.2,11.2L90,8.7L89.5,5.7L87.2,3L85.5,6.1L83.4,9.2L79.6,10.2L77.4,13.3L74.4,15L72.2,18L68.9,20.1L68,17.6L66.1,15.3L65.8,12.1L62.8,13L61.6,16.5L61.5,20.2L59.6,17.9L60,14L60,12.1L63.6,10.7L62.9,9.2L59,9.6L57.1,9L53.6,9.7L54.9,7.7L53.1,6.8L49.3,5.9L45.8,5.1L41.8,5.1L37.8,4.9L33.8,4.6L29.8,4.2L25.8,3.7L21.9,3L18,2.2L14,1.4L10.2,0.4L7.6,1.6L4.5,1.1L4.2,5L2.9,8.8L1.2,12.4L0.4,16.2L0.1,20.1L1.2,24L1.8,27.8L2.8,31.5L6,33.8L8.1,37.1L11.8,38.1L15.2,40.2L18.7,42.1L22.7,42.6L26.5,42.1L29.4,44.8L31.4,48.2L34.5,47.1L37.6,49.3L39.6,52.7L42,55.6L43.6,53.8L45.8,50.7L49.1,48.4L52.9,47.9L56,48.7L59.6,48.4L59.3,45.9L63.2,45.6L67,46.3L70.5,46.3L72.3,49.6L74.2,52.8L77,55.3L78,51.8L76.3,48.1L74.3,44.7L74.5,40.8L76.9,37.7L79.2,34.8L81.2,31.9L81.2,28.5L78.9,25.6ZM75.2,56.8ZM76.5,56.3L76.5,56.3ZM82,32.1L82,32.1ZM88.4,16.4ZM87.5,16.5ZM88.6,9.7ZM89.3,9.2ZM80.4,25.4ZM56.6,7.2ZM65.2,10.4ZM6.8,0.2ZM44.1,55.7L44.6,51.7L44.1,55.7ZM3.3,32.7ZM3.5,32.7ZM5.5,34.7ZM5.4,35.5Z"},orderScopedData:orderScopedData,outlineColor:function outlineColor(color){var hexColor=visaColors[color]||color;return hsl$2(hexColor).l>.4?darkerColor(hexColor):function brighterColor(color){var hexColor=visaColors[color]||color,brighterScale=linear$5().domain([0,.45]).range([4,2]);return hsl$2(hexColor).brighter(brighterScale(hsl$2(hexColor).l)).hex()}(hexColor)},overrideTitleTooltip:function(uniqueID,toRemove){var paddingG=select$4("#visa-viz-padding-container-g-"+uniqueID);toRemove?0===paddingG.select("title").size()&&paddingG.append("title").text(""):paddingG.select("title").remove()},placeDataLabels:function(_a){var xPlacement,yPlacement,offset,offset2,textAnchor,root=_a.root,xScale=_a.xScale,yScale=_a.yScale,sizeScale=_a.sizeScale,ordinalAccessor=_a.ordinalAccessor,valueAccessor=_a.valueAccessor,groupAccessor=_a.groupAccessor,sizeAccessor=_a.sizeAccessor,shapeArea=_a.shapeArea,placement=_a.placement,layout=_a.layout,labelOffset=_a.labelOffset,radius=_a.radius,chartType=_a.chartType,normalized=_a.normalized,avoidCollision=_a.avoidCollision;if("bar"===chartType)switch(placement){case"auto":"vertical"===layout?(xPlacement=function(d){return xScale(d[ordinalAccessor])+xScale.bandwidth()/2},yPlacement=function(d){return yScale(Math.max(0,d[valueAccessor]*(labelOffset||1)))},offset2="0.25em",textAnchor="middle"):"horizontal"===layout&&(yPlacement=function(d){return yScale(d[ordinalAccessor])+yScale.bandwidth()/2},xPlacement=function(d){return xScale(Math.max(0,d[valueAccessor]*(labelOffset||1)))},offset2="0.25em",textAnchor="middle");break;case"top":xPlacement=function(d){return xScale(d[ordinalAccessor])+xScale.bandwidth()/2},yPlacement=function(d){return yScale(Math.max(0,d[valueAccessor]*(labelOffset||1)))},offset="-.3em",textAnchor="middle";break;case"bottom":xPlacement=function(d){return xScale(d[ordinalAccessor])+xScale.bandwidth()/2},yPlacement=function(d){return yScale(Math.min(0,d[valueAccessor]*(-labelOffset||1)))},offset="-.3em",textAnchor="middle";break;case"left":yPlacement=function(d){return yScale(d[ordinalAccessor])+yScale.bandwidth()/2},xPlacement=function(d){return xScale(Math.min(0,d[valueAccessor]*(-labelOffset||1)))},offset=".2em",offset2=".3em",textAnchor="start";break;case"right":yPlacement=function(d){return yScale(d[ordinalAccessor])+yScale.bandwidth()/2},xPlacement=function(d){return xScale(Math.max(0,d[valueAccessor]*(labelOffset||1)))},offset=".3em",offset2=".3em",textAnchor="start";break;case"top-left":yPlacement=function(d){return yScale(d[ordinalAccessor])},xPlacement=function(d){return xScale(Math.min(0,d[valueAccessor]*(-labelOffset||1)))},offset=".2em",offset2="-.2em",textAnchor="start";break;case"top-right":yPlacement=function(d){return yScale(d[ordinalAccessor])},xPlacement=function(d){return xScale(Math.max(0,d[valueAccessor]*(labelOffset||1)))},offset="-3em",offset2="-.2em",textAnchor="start";break;case"bottom-left":yPlacement=function(d){return yScale(d[ordinalAccessor])+yScale.bandwidth()},xPlacement=function(d){return xScale(Math.min(0,d[valueAccessor]*(-labelOffset||1)))},offset=".2em",offset2="1em",textAnchor="start";break;case"bottom-right":yPlacement=function(d){return yScale(d[ordinalAccessor])+yScale.bandwidth()},xPlacement=function(d){return xScale(Math.max(0,d[valueAccessor]*(labelOffset||1)))},offset="-3em",offset2="1em",textAnchor="start"}else if("stacked"===chartType){var getMod_1=function(d){return normalized&&0!==d.getSum()?d.getSum():1};if("vertical"===layout)switch(placement){case"auto":xPlacement=function(d){return xScale(d[ordinalAccessor])+xScale.bandwidth()/2},yPlacement=function(d){return(yScale(d.stackStart/getMod_1(d))+yScale(d.stackEnd/getMod_1(d)))/2},offset2="0.25em",textAnchor="middle";break;case"bottom":xPlacement=function(d){return xScale(d[ordinalAccessor])+xScale.bandwidth()/2},yPlacement=function(d){return yScale(d.stackEnd/getMod_1(d))},offset="-.3em",textAnchor="middle";break;case"top":xPlacement=function(d){return xScale(d[ordinalAccessor])+xScale.bandwidth()/2},yPlacement=function(d){return yScale(d.stackStart/getMod_1(d))},offset="1em",textAnchor="middle";break;case"middle":xPlacement=function(d){return xScale(d[ordinalAccessor])+xScale.bandwidth()/2},yPlacement=function(d){return(yScale(d.stackStart/getMod_1(d))+yScale(d.stackEnd/getMod_1(d)))/2},offset=".3em",textAnchor="middle"}else switch(placement){case"auto":case"middle":yPlacement=function(d){return yScale(d[ordinalAccessor])+yScale.bandwidth()/2+4},xPlacement=function(d){return(xScale(d.stackStart)+xScale(d.stackEnd))/2},offset="0em",textAnchor="middle";break;case"base":yPlacement=function(d){return yScale(d[ordinalAccessor])+yScale.bandwidth()/2+4},xPlacement=function(d){return d.stackEnd<0?xScale(d.stackStart/getMod_1(d)):xScale(d.stackEnd/getMod_1(d))},offset=function(d){return d.stackEnd<0?"-.3em":".3em"},textAnchor=function(d){return d.stackEnd<0?"end":"start"};break;case"end":yPlacement=function(d){return yScale(d[ordinalAccessor])+yScale.bandwidth()/2+4},xPlacement=function(d){return d.stackEnd<0?xScale(d.stackEnd/getMod_1(d)):xScale(d.stackStart/getMod_1(d))},offset=function(d){return d.stackEnd<0?".3em":"-.3em"},textAnchor=function(d){return d.stackEnd<0?"start":"end"}}}else if("line"===chartType)switch(placement){case"auto":case"top":xPlacement=function(d){return xScale(d[ordinalAccessor])},yPlacement=function(d){return yScale(d[valueAccessor])},offset2="-0.6em",textAnchor="middle";break;case"bottom":xPlacement=function(d){return xScale(d[ordinalAccessor])},yPlacement=function(d){return yScale(d[valueAccessor])+20},textAnchor="middle";break;case"left":yPlacement=function(d){return yScale(d[ordinalAccessor])},xPlacement=function(d){return xScale(d[valueAccessor])},offset=".2em",textAnchor="start";break;case"right":yPlacement=function(d){return yScale(d[ordinalAccessor])},xPlacement=function(d){return xScale(d[valueAccessor])+4},offset=".2em",textAnchor="start"}else if("parallel"===chartType)switch(placement){case"auto":xPlacement=function(d){return xScale(d[ordinalAccessor])},yPlacement=function(d){return yScale(d)},offset="0em",offset2="0em",textAnchor="middle";break;case"bottom-right":xPlacement=function(d){return xScale(d[ordinalAccessor])},yPlacement=function(d){return yScale(d)},offset="0.45em",offset2="1.1em",textAnchor="start";break;case"top-right":xPlacement=function(d){return xScale(d[ordinalAccessor])},yPlacement=function(d){return yScale(d)},offset="0.45em",offset2="-0.3em",textAnchor="start";break;case"bottom-left":xPlacement=function(d){return xScale(d[ordinalAccessor])},yPlacement=function(d){return yScale(d)},offset="-0.45em",offset2="1.1em",textAnchor="end";break;case"top-left":xPlacement=function(d){return xScale(d[ordinalAccessor])},yPlacement=function(d){return yScale(d)},offset="-0.45em",offset2="-0.3em",textAnchor="end"}else if("dumbbell"===chartType)switch(placement){case"ends":case"auto":xPlacement=function(d){return"vertical"===layout?xScale(d[ordinalAccessor]):xScale(d[valueAccessor])-d.offset},yPlacement=function(d){return"vertical"===layout?yScale(d[valueAccessor])+d.offset:yScale(d[ordinalAccessor])},offset=function(d){return"vertical"===layout&&d.offset>=0?"0.9em":"vertical"===layout||d.offset>=0?"-0.3em":"0.3em"},offset2="vertical"===layout?"0.0em":"0.3em",textAnchor=function(d){return"vertical"===layout?"middle":d.offset>=0?"end":"start"};break;case"top":yPlacement=function(d){return yScale(d[ordinalAccessor])-Math.abs(d.offset)},xPlacement=function(d){return xScale(d[valueAccessor])},offset2="-0.3em",offset="0.0em",textAnchor="middle";break;case"bottom":yPlacement=function(d){return yScale(d[ordinalAccessor])+Math.abs(d.offset)},xPlacement=function(d){return xScale(d[valueAccessor])+4},offset2="0.9em",offset="0.0em",textAnchor="middle";break;case"left":yPlacement=function(d){return yScale(d[valueAccessor])},xPlacement=function(d){return xScale(d[ordinalAccessor])-4-Math.abs(d.offset)},offset2="0.0em",offset="0.3em",textAnchor="end";break;case"right":yPlacement=function(d){return yScale(d[valueAccessor])},xPlacement=function(d){return xScale(d[ordinalAccessor])+4+Math.abs(d.offset)},offset2="0.0em",offset="0.3em",textAnchor="start"}else if("pie"===chartType)switch(placement){case"inside":offset2="0.1em",textAnchor="middle";break;case"outside":textAnchor=function(d,i){return d.endAngle<Math.PI||0===i?"start":"end"},xPlacement=function(d){return(radius+5)*Math.sin((d.startAngle+d.endAngle)/2)},yPlacement=function(d){return-(radius+5)*Math.cos((d.startAngle+d.endAngle)/2)},offset=function(d){return d.endAngle<Math.PI?-labelOffset:labelOffset},offset2=function(d){return d.endAngle<Math.PI?labelOffset:-labelOffset};break;case"edge":xPlacement=function(d){return(radius+10)*Math.sin(d.endAngle)},yPlacement=function(d){return-(radius+10)*Math.cos(d.endAngle)},offset=function(d){return d.endAngle<Math.PI?-labelOffset:labelOffset},offset2=function(d){return d.endAngle<Math.PI?labelOffset:-labelOffset},textAnchor=function(d,i){return d.endAngle<Math.PI||0===i?"start":"end"};break;case"note":textAnchor=function(d,i){return d.endAngle<Math.PI||0===i?"start":"end"},xPlacement=function(d){return(radius+5)*Math.sin((d.startAngle+d.endAngle)/2)},yPlacement=function(d){return-(radius+5)*Math.cos((d.startAngle+d.endAngle)/2)},offset=function(d){return d.endAngle<Math.PI?-labelOffset:labelOffset},offset2=function(d){return d.endAngle<Math.PI?labelOffset+15:15-labelOffset};break;case"note_edge":xPlacement=function(d){return(radius+10)*Math.sin(d.endAngle)},yPlacement=function(d){return-(radius+10)*Math.cos(d.endAngle)},offset=function(d){return d.endAngle<Math.PI?-labelOffset:labelOffset},offset2=function(d){return d.endAngle<Math.PI?labelOffset+15:15-labelOffset},textAnchor=function(d,i){return d.endAngle<Math.PI||0===i?"start":"end"}}else if("scatter"===chartType){var offsetScale_1=sqrt$3().domain([sizeScale.domain()[0],sizeScale.domain()[1]]).range([1,4]),shape_1=function(d){return shapeArea[groupAccessor?d[groupAccessor]:""].shape},shapeOffset_1=function(d){return sizeScale(d[sizeAccessor]*shapeArea[groupAccessor?d[groupAccessor]:""].toCircle)||labelOffset};switch(placement){case"auto":case"middle":xPlacement=function(d){return xScale(d[ordinalAccessor])},yPlacement=function(d){return yScale(d[valueAccessor])},offset2="0.25em",textAnchor="middle";break;case"top":xPlacement=function(d){return xScale(d[ordinalAccessor])},yPlacement=function(d){return yScale(d[valueAccessor])-shapeOffset_1(d)},offset2=function(d){return["diamond","triangle","star"].includes(shape_1(d))&&sizeAccessor?-1*(.35+.35*offsetScale_1(d[sizeAccessor]))+"em":"-0.35em"},textAnchor="middle";break;case"bottom":xPlacement=function(d){return xScale(d[ordinalAccessor])},yPlacement=function(d){return yScale(d[valueAccessor])+shapeOffset_1(d)},offset2=function(d){return"diamond"===shape_1(d)&&sizeAccessor?.75+.5*offsetScale_1(d[sizeAccessor])+"em":"triangle"===shape_1(d)&&sizeAccessor?1.1-.2*offsetScale_1(d[sizeAccessor])+"em":"1.1em"},textAnchor="middle";break;case"left":xPlacement=function(d){return xScale(d[ordinalAccessor])-shapeOffset_1(d)},yPlacement=function(d){return yScale(d[valueAccessor])},offset=function(d){return"diamond"===shape_1(d)&&sizeAccessor?"-.2em":"-.4em"},offset2="0.3em",textAnchor="end";break;case"right":xPlacement=function(d){return xScale(d[ordinalAccessor])+shapeOffset_1(d)},yPlacement=function(d){return yScale(d[valueAccessor])},offset=function(d){return"diamond"===shape_1(d)&&sizeAccessor?".125em":".35em"},offset2="0.3em",textAnchor="start"}}else"heat-map"===chartType?(xPlacement=function(d){return xScale(d[ordinalAccessor])+xScale.bandwidth()/2},yPlacement=function(d){return yScale(d[valueAccessor])+yScale.bandwidth()/2},offset2=".5em",textAnchor="middle"):"world-map"===chartType&&(xPlacement=function(d){return xScale([+d[ordinalAccessor],+d[valueAccessor]])[0]},yPlacement=function(d){return xScale([+d[ordinalAccessor],+d[valueAccessor]])[1]});var autoPlacementIndicator=avoidCollision&&avoidCollision.runOccupancyBitmap&&"auto"===placement,hideNoPlaceIndicator=avoidCollision&&avoidCollision.hideOnly&&!autoPlacementIndicator;if("heat-map"!==chartType&&autoPlacementIndicator&&!hideNoPlaceIndicator){var bitmaps=resolveLabelCollision({bitmaps:avoidCollision.bitmaps,labelSelection:avoidCollision.labelSelection,avoidMarks:avoidCollision.avoidMarks,validPositions:avoidCollision.validPositions,offsets:avoidCollision.offsets,accessors:avoidCollision.accessors,size:avoidCollision.size,boundsScope:avoidCollision.boundsScope,hideOnly:hideNoPlaceIndicator,removeOnly:avoidCollision.removeOnly,suppressMarkDraw:avoidCollision.suppressMarkDraw});return root.filter((function(_,i,n){return"true"!==select$4(n[i]).attr("data-label-moved")&&!select$4(n[i]).classed("collision-added")})).attr("x",xPlacement).attr("y",yPlacement).attr("vertical"===layout?"dy":"dx",offset).attr("vertical"===layout?"dx":"dy",offset2).attr("text-anchor",textAnchor),bitmaps}if("heat-map"!==chartType&&hideNoPlaceIndicator){root.each((function(_,i,n){select$4(n[i]).attr("data-x",xPlacement).attr("data-use-dx",!0).attr("dx","vertical"===layout?offset2:offset).attr("data-y",yPlacement).attr("data-use-dy",!0).attr("dy","vertical"===layout?offset:offset2).attr("text-anchor",textAnchor)}));bitmaps=void 0;return avoidCollision.suppressMarkDraw||(bitmaps=resolveLabelCollision({bitmaps:avoidCollision.bitmaps,labelSelection:select$4(".empty-stuff-vcc-do-not-use"),avoidMarks:avoidCollision.avoidMarks,validPositions:["middle"],offsets:[1],accessors:avoidCollision.accessors,size:avoidCollision.size})),bitmaps=resolveLabelCollision({bitmaps:bitmaps||avoidCollision.bitmaps,labelSelection:root,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:avoidCollision.accessors,size:avoidCollision.size,hideOnly:hideNoPlaceIndicator,removeOnly:avoidCollision.removeOnly,suppressMarkDraw:avoidCollision.suppressMarkDraw}),root.attr("x",xPlacement).attr("y",yPlacement).attr("vertical"===layout?"dy":"dx",offset).attr("vertical"===layout?"dx":"dy",offset2).attr("text-anchor",textAnchor),bitmaps}return root.attr("x",xPlacement).attr("y",yPlacement).attr("vertical"===layout?"dy":"dx",offset).attr("vertical"===layout?"dx":"dy",offset2).attr("text-anchor",textAnchor),null},checkLabelDisplayOnly:function checkLabelDisplayOnly(dataLabelVisibilityVal,dataLabelDisplayOnlyVal,d,selectiveLabelData,interactionKeys){var elementOpacity=0,innerDataLabelDisplayOnlyVal="string"==typeof dataLabelDisplayOnlyVal?[dataLabelDisplayOnlyVal]:Array.isArray(dataLabelDisplayOnlyVal)?dataLabelDisplayOnlyVal:["all"];return dataLabelVisibilityVal?innerDataLabelDisplayOnlyVal.includes("all")?elementOpacity=1:innerDataLabelDisplayOnlyVal.forEach((function(displayOnlyVal){checkClicked(d,selectiveLabelData[displayOnlyVal],interactionKeys)&&(elementOpacity=1)})):elementOpacity=0,elementOpacity},propDefaultValues:propDefaultValues,resolveLines:function resolveLines(left,right,key){var output=[[],[]];if(left.length<1||right.length<1)return[];var leftKeys={},rightKeys={},deltas=[],i=0;for(i=0;i<left.length;i++)leftKeys[left[i][key]]=1;for(i=0,i=0;i<right.length;i++)rightKeys[right[i][key]]=1,leftKeys[right[i][key]]?deltas.push(0):deltas.push(1);i=0;var rightPointer=0,leftPointer=0;function push(change){var leftElement=__assign({},left[leftPointer]),rightElement=__assign({},right[rightPointer]);change&&(leftElement[change]=!0,rightElement[change]=!0),output[0].push(leftElement),output[1].push(rightElement)}function movePointers(leftChange,rightChange){leftPointer+=leftChange,rightPointer+=rightChange}for(var changeCounter=0,end=!1;leftPointer<left.length&&rightPointer<right.length;){var start=0===rightPointer,adding=deltas[rightPointer],removing=(!end||!adding)&&!rightKeys[left[leftPointer][key]],retaining=!end&&!removing;if(removing){var firstMove=start||end?[0,0]:[0,-1],secondMove=start||end?[1,0]:[1,1];movePointers(firstMove[0],firstMove[1]),push("exit"),movePointers(secondMove[0],secondMove[1])}else adding?(push("enter"),movePointers(0,1)):retaining&&(push(!1),movePointers(1,1));!end&&leftPointer===left.length&&rightPointer<right.length?(end=!0,movePointers(-1,0)):!end&&leftPointer<left.length&&rightPointer===right.length&&(end=!0,movePointers(0,-1)),changeCounter+=removing||adding?1:0}return changeCounter?output:[]},roundTo:roundTo,symbols:symbols$1,sankey:function Sankey(compareNodes,showLinks,layout){var py,sort,linkSort,x0=0,y0=0,x1=1,y1=1,dx=24,dy=8,id=defaultId,align=sankeyJustify,nodes=defaultNodes,links=defaultLinks,iterations=6;function sankey(){var graph={nodes:nodes.apply(null,arguments),links:links.apply(null,arguments)};return function computeNodeLinks(_a){var nodes=_a.nodes,links=_a.links;nodes.forEach((function(node,i){node.index=i,node.sourceLinks=[],node.targetLinks=[]}));var nodeById=new Map(nodes.map((function(d,i){return[id(d,i,nodes),d]})));if(links.forEach((function(link,i){link.index=i;var source=link.source,target=link.target;"object"!=typeof source&&(source=link.source=find(nodeById,source)),"object"!=typeof target&&(target=link.target=find(nodeById,target)),source.sourceLinks.push(link),target.targetLinks.push(link)})),null!=linkSort)for(var _b=0,nodes_3=nodes;_b<nodes_3.length;_b++){var _c=nodes_3[_b],sourceLinks=_c.sourceLinks,targetLinks=_c.targetLinks;sourceLinks.sort(linkSort),targetLinks.sort(linkSort)}}(graph),function computeNodeValues(_a){for(var nodes=_a.nodes,_b=0,nodes_4=nodes;_b<nodes_4.length;_b++){var node=nodes_4[_b];node.value=void 0===node.fixedValue?Math.max(sum$3(node.sourceLinks,value),sum$3(node.targetLinks,value)):node.fixedValue}}(graph),function computeNodeDepths(_a){var nodes=_a.nodes,n=nodes.length,current=new Set(nodes),next=new Set,x=0;for(;current.size;){if(current.forEach((function(node){node.depth=x;for(var _a=0,_b=node.sourceLinks;_a<_b.length;_a++){var target=_b[_a].target;next.add(target)}})),++x>n)throw new Error("circular link");current=next,next=new Set}}(graph),function computeNodeHeights(_a){var nodes=_a.nodes,n=nodes.length,current=new Set(nodes),next=new Set,x=0;for(;current.size;){if(current.forEach((function(node){node.height=x;for(var _a=0,_b=node.targetLinks;_a<_b.length;_a++){var source=_b[_a].source;next.add(source)}})),++x>n)throw new Error("circular link");current=next,next=new Set}}(graph),function computeNodeBreadths(graph){var columns=showLinks?function computeNodeLayers(_a){for(var nodes=_a.nodes,x=max$3(nodes,(function(d){return d.depth}))+1,kx=(x1-x0-dx)/(x-1),columns=new Array(x),_b=0,nodes_6=nodes;_b<nodes_6.length;_b++){var node=nodes_6[_b],i=Math.max(0,Math.min(x-1,Math.floor(align.call(null,node,x))));node.layer=i,node.x0=x0+i*kx,node.x1=node.x0+dx,columns[i]?columns[i].push(node):columns[i]=[node]}if(sort)for(var _c=0,columns_2=columns;_c<columns_2.length;_c++){columns_2[_c].sort(sort)}return columns}(graph):function computeNodeLayersWhenLinksHidden(_a){for(var nodes=_a.nodes,x=max$3(nodes,(function(d){return d.depth})),leftPadding=(x1-x*(2*dx))/2,columns=new Array(x+1),_b=0,nodes_5=nodes;_b<nodes_5.length;_b++){var node=nodes_5[_b],i=Math.max(0,Math.min(x,Math.floor(align.call(null,node,x+1))));node.layer=i,node.x0=leftPadding+node.depth*(2*dx),node.x1=node.x0+dx,columns[i]?columns[i].push(node):columns[i]=[node]}if(sort)for(var _c=0,columns_1=columns;_c<columns_1.length;_c++){columns_1[_c].sort(sort)}return columns}(graph);py=Math.min(dy,(y1-y0)/(max$3(columns,(function(c){return c.length}))-1)),compareNodes?function setBottomAlignedNodes(columns){for(var nodeCount=max$3(columns,(function(c){return c.length})),maxValues=[],i=0;i<nodeCount;++i){for(var max_1=0,j=0;j<columns.length;++j)columns[j][i]&&columns[j][i].value&&columns[j][i].value>max_1&&(max_1=columns[j][i].value);maxValues[i]=max_1}for(var ky=(y1-y0-(nodeCount-1)*py)/sum$3(maxValues),_a=0,columns_3=columns;_a<columns_3.length;_a++){var nodes_7=columns_3[_a],y=y0;for(i=0;i<nodes_7.length;++i){nodes_7[i].y1=y+maxValues[i]*ky,nodes_7[i].y0=nodes_7[i].y1-nodes_7[i].value*ky,y=nodes_7[i].y1+py;for(var _b=0,_c=nodes_7[i].sourceLinks;_b<_c.length;_b++){var link=_c[_b];link.width=link.value*ky}}}}(columns):function initializeNodeBreadths(columns){for(var ky=min$2(columns,(function(c){return(y1-y0-(c.length-1)*py)/sum$3(c,value)})),_a=0,columns_4=columns;_a<columns_4.length;_a++){for(var nodes_9=columns_4[_a],y=y0,_b=0,nodes_8=nodes_9;_b<nodes_8.length;_b++){(node=nodes_8[_b]).y0=y,node.y1=y+node.value*ky,y=node.y1+py;for(var _c=0,_d=node.sourceLinks;_c<_d.length;_c++){var link=_d[_c];link.width=link.value*ky}}y=(y1-y+py)/(nodes_9.length+1);for(var i=0;i<nodes_9.length;++i){var node;(node=nodes_9[i]).y0+=y*(i+1),node.y1+=y*(i+1)}reorderLinks(nodes_9)}}(columns);for(var i=0;i<iterations;++i){var alpha=Math.pow(.99,i),beta=Math.max(1-alpha,(i+1)/iterations);compareNodes||(relaxRightToLeft(columns,alpha,beta),relaxLeftToRight(columns,alpha,beta))}}(graph),"vertical"===layout?(!function flipNodesVertical(_a){_a.nodes.map((function(n){return n.oldX0=n.x0,n.oldX1=n.x1,n.oldY0=n.y0,n.oldY1=n.y1,n.y0=n.x0,n.y1=n.x1,n.x0=n.oldY0,n.x1=n.oldY1,n}))}(graph),function computeLinkBreadthsVertical(_a){for(var _b=0,nodes_2=_a.nodes;_b<nodes_2.length;_b++){for(var node=nodes_2[_b],x0=node.x0,x1=x0,_c=0,_d=node.sourceLinks;_c<_d.length;_c++)(link=_d[_c]).x0=x0+link.width/2,x0+=link.width;for(var _e=0,_f=node.targetLinks;_e<_f.length;_e++){var link;(link=_f[_e]).x1=x1+link.width/2,x1+=link.width}}}(graph)):computeLinkBreadths(graph),graph}function relaxLeftToRight(columns,alpha,beta){for(var i=1,n=columns.length;i<n;++i){for(var column=columns[i],_a=0,column_1=column;_a<column_1.length;_a++){for(var target=column_1[_a],y=0,w=0,_b=0,_c=target.targetLinks;_b<_c.length;_b++){var _d=_c[_b],source=_d.source,v=_d.value*(target.layer-source.layer);y+=targetTop(source,target)*v,w+=v}if(w>0){var dy_1=(y/w-target.y0)*alpha;target.y0+=dy_1,target.y1+=dy_1,reorderNodeLinks(target)}}void 0===sort&&column.sort(ascendingBreadth),resolveCollisions(column,beta)}}function relaxRightToLeft(columns,alpha,beta){for(var i=columns.length-2;i>=0;--i){for(var column=columns[i],_a=0,column_2=column;_a<column_2.length;_a++){for(var source=column_2[_a],y=0,w=0,_b=0,_c=source.sourceLinks;_b<_c.length;_b++){var _d=_c[_b],target=_d.target,v=_d.value*(target.layer-source.layer);y+=sourceTop(source,target)*v,w+=v}if(w>0){var dy_2=(y/w-source.y0)*alpha;source.y0+=dy_2,source.y1+=dy_2,reorderNodeLinks(source)}}void 0===sort&&column.sort(ascendingBreadth),resolveCollisions(column,beta)}}function resolveCollisions(nodes,alpha){var i=nodes.length>>1,subject=nodes[i];resolveCollisionsBottomToTop(nodes,subject.y0-py,i-1,alpha),resolveCollisionsTopToBottom(nodes,subject.y1+py,i+1,alpha),resolveCollisionsBottomToTop(nodes,y1,nodes.length-1,alpha),resolveCollisionsTopToBottom(nodes,y0,0,alpha)}function resolveCollisionsTopToBottom(nodes,y,i,alpha){for(;i<nodes.length;++i){var node=nodes[i],dy_3=(y-node.y0)*alpha;dy_3>1e-6&&(node.y0+=dy_3,node.y1+=dy_3),y=node.y1+py}}function resolveCollisionsBottomToTop(nodes,y,i,alpha){for(;i>=0;--i){var node=nodes[i],dy_4=(node.y1-y)*alpha;dy_4>1e-6&&(node.y0-=dy_4,node.y1-=dy_4),y=node.y0-py}}function reorderNodeLinks(_a){var sourceLinks=_a.sourceLinks,targetLinks=_a.targetLinks;if(void 0===linkSort){for(var _b=0,targetLinks_1=targetLinks;_b<targetLinks_1.length;_b++){targetLinks_1[_b].source.sourceLinks.sort(ascendingTargetBreadth)}for(var _c=0,sourceLinks_1=sourceLinks;_c<sourceLinks_1.length;_c++){sourceLinks_1[_c].target.targetLinks.sort(ascendingSourceBreadth)}}}function reorderLinks(nodes){if(void 0===linkSort)for(var _a=0,nodes_10=nodes;_a<nodes_10.length;_a++){var _b=nodes_10[_a],sourceLinks=_b.sourceLinks,targetLinks=_b.targetLinks;sourceLinks.sort(ascendingTargetBreadth),targetLinks.sort(ascendingSourceBreadth)}}function targetTop(source,target){for(var y=source.y0-(source.sourceLinks.length-1)*py/2,_a=0,_b=source.sourceLinks;_a<_b.length;_a++){var _c=_b[_a],node=_c.target,width=_c.width;if(node===target)break;y+=width+py}for(var _d=0,_e=target.targetLinks;_d<_e.length;_d++){var _f=_e[_d];node=_f.source,width=_f.width;if(node===source)break;y-=width}return y}function sourceTop(source,target){for(var y=target.y0-(target.targetLinks.length-1)*py/2,_a=0,_b=target.targetLinks;_a<_b.length;_a++){var _c=_b[_a],node=_c.source,width=_c.width;if(node===source)break;y+=width+py}for(var _d=0,_e=source.sourceLinks;_d<_e.length;_d++){var _f=_e[_d];node=_f.target,width=_f.width;if(node===target)break;y-=width}return y}return sankey.update=function(graph){return computeLinkBreadths(graph),graph},sankey.nodeId=function(_){return arguments.length?(id="function"==typeof _?_:constant(_),sankey):id},sankey.nodeAlign=function(_){return arguments.length?(align="function"==typeof _?_:constant(_),sankey):align},sankey.nodeSort=function(_){return arguments.length?(sort=_,sankey):sort},sankey.nodeWidth=function(_){return arguments.length?(dx=+_,sankey):dx},sankey.nodePadding=function(_){return arguments.length?(dy=py=+_,sankey):dy},sankey.nodes=function(_){return arguments.length?(nodes="function"==typeof _?_:constant(_),sankey):nodes},sankey.links=function(_){return arguments.length?(links="function"==typeof _?_:constant(_),sankey):links},sankey.linkSort=function(_){return arguments.length?(linkSort=_,sankey):linkSort},sankey.size=function(_){return arguments.length?(x0=y0=0,x1=+_[0],y1=+_[1],sankey):[x1-x0,y1-y0]},sankey.extent=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],sankey):[[x0,y0],[x1,y1]]},sankey.iterations=function(_){return arguments.length?(iterations=+_,sankey):iterations},sankey},sankeyCenter:function sankeyCenter(node){return node.targetLinks.length?node.depth:node.sourceLinks.length?min$2(node.sourceLinks,targetDepth)-1:0},sankeyJustify:sankeyJustify,sankeyLeft:function sankeyLeft(node){return node.depth},sankeyLinkHorizontal:function sankeyLinkHorizontal(){return function linkHorizontal$1(){return link$3(curveHorizontal$1)}().source(horizontalSource).target(horizontalTarget)},sankeyLinkVertical:function sankeyLinkVertical(){return function linkVertical$1(){return link$3(curveVertical$1)}().source(verticalSource).target(verticalTarget)},sankeyRight:function sankeyRight(node,n){return n-1-node.height},transitionEndAll:transitionEndAll,transformData:function transformData(data,groupAccessor,ordinalAccessor,valueAccessor){var dataArr=[];return data.forEach((function(obj){var o={};if(dataArr.length)if(o=dataArr.filter((function(d){return d[groupAccessor]===obj[groupAccessor]})).pop()){var idx=dataArr.findIndex((function(d){return d[groupAccessor]===obj[groupAccessor]}));o[obj[ordinalAccessor]]=obj[valueAccessor],dataArr[idx]=o}else(o={})[groupAccessor]=obj[groupAccessor],o[obj[ordinalAccessor]]=obj[valueAccessor],dataArr.push(o);else o[groupAccessor]=obj[groupAccessor],o[obj[ordinalAccessor]]=obj[valueAccessor],dataArr.push(o)})),dataArr},scopeDataKeys:function scopeDataKeys(_this,accessors,chartType,skipSorting){var valueKeyMap={},valueKeyHash={};if(accessors.nestedAccessors&&accessors.nestedAccessors instanceof Array&&accessors.nestedAccessors.forEach((function(accessor){accessor.objectName&&accessor.objectAccessors&&accessor.objectAccessors instanceof Array&&_this[accessor.objectName]&&accessor.objectAccessors.forEach((function(k,i){_this[accessor.objectName][k]instanceof Array?_this[accessor.objectName][k].forEach((function(innerK,j){valueKeyHash[innerK]||(valueKeyMap[innerK]=accessor.formatAccessors&&accessor.formatAccessors instanceof Array&&_this[accessor.objectName][accessor.formatAccessors[i]]?_this[accessor.objectName][accessor.formatAccessors[i]][j]:void 0,valueKeyHash[innerK]=1)})):_this[accessor.objectName][k]&&!valueKeyHash[_this[accessor.objectName][k]]&&(valueKeyMap[_this[accessor.objectName][k]]=accessor.formatAccessors?_this[accessor.objectName][accessor.formatAccessors]:void 0,valueKeyHash[_this[accessor.objectName][k]]=1)}))})),accessors.singleAccessors&&accessors.singleAccessors instanceof Array&&accessors.singleAccessors.forEach((function(accessor){if(_this[accessor]&&!valueKeyHash[_this[accessor]]){var defFormat=function getDefaultFormat(accessor,formats,formatMap,chartType){if(formats[accessor]){if(formats[accessor]instanceof Array){var mappedFormat_1=void 0;return formats[accessor].forEach((function(formatObj){mappedFormat_1=formatObj.charts.indexOf(chartType)>=0?formatMap[formatObj.type]:mappedFormat_1||(mappedFormat_1="")})),mappedFormat_1}return formatMap[formats[accessor]]?formatMap[formats[accessor]]:""}return""}(accessor,accessorFormats,accessorFormatMap,chartType);valueKeyMap[_this[accessor]]=defFormat,valueKeyHash[_this[accessor]]=1}})),accessors.arrayAccessors&&accessors.arrayAccessors instanceof Array&&accessors.arrayAccessors.forEach((function(accessor){_this[accessor]&&_this[accessor].forEach((function(k){valueKeyHash[k]||"xAccessor"===k||"yAccessor"===k||(valueKeyMap[k]=void 0,valueKeyHash[k]=1)}))})),!skipSorting){var newKeyMap_1={};orderScopedData(_this,valueKeyMap,chartType).forEach((function(key){newKeyMap_1[key]=valueKeyMap[key]})),valueKeyMap=newKeyMap_1}return valueKeyMap},visaColors:visaColors,validateAccessibilityProps:function(chartName,accessibilityObject,otherProps){void 0===accessibilityObject&&(accessibilityObject={}),void 0===otherProps&&(otherProps={context:{},data:{},uniqueID:"",annotations:[],misc:{}});var context=otherProps.context,annotations=otherProps.annotations,data=otherProps.data,uniqueID=otherProps.uniqueID,misc=otherProps.misc,optionsWithContext={context:context,abortEarly:!1},accessibilityProps=__assign(__assign(__assign({},accessibilityObject),{annotations:annotations,data:data,uniqueID:uniqueID}),misc);addMethod(StringSchema,"validateBySchemaRefAndCondition",validateBySchemaRefAndCondition),addMethod(StringSchema,"validateBySchema",validateBySchema),addMethod(BooleanSchema,"validateBySchemaRefs",validateBySchemaRefs),addMethod(StringSchema,"validateBySchemaRef",validateBySchemaRef$1),addMethod(BooleanSchema,"validateBySchemaRefBoolean",validateBySchemaRefBoolean$1),validateRecommendations$1(chartName,accessibilityProps,optionsWithContext,validateWarnings$1(chartName,accessibilityProps,optionsWithContext))},validateLocalizationProps:function(chartName,localizationObject){void 0===localizationObject&&(localizationObject={});var localizationProps=__assign({},localizationObject);addMethod(StringSchema,"validateBySchemaRef",validateBySchemaRef),addMethod(BooleanSchema,"validateBySchemaRefBoolean",validateBySchemaRefBoolean),addMethod(ObjectSchema,"validateBySchemaObject",validateBySchemaObject),addMethod(StringSchema,"validateByOverwriteValue",validateByOverwriteValue),validateRecommendations(chartName,localizationProps,validateWarnings(chartName,localizationProps))},fixNestedSparseness:function fixNestedSparseness(data,ordinalAccessor,groupAccessor,valueAccessor,defaultValue){var fullGroup={},currentNest={};data.forEach((function(datum){fullGroup[datum[ordinalAccessor]]=1,currentNest[datum[groupAccessor]]||(currentNest[datum[groupAccessor]]={}),currentNest[datum[groupAccessor]][datum[ordinalAccessor]]=1}));var everyOrdinal=Object.keys(fullGroup);Object.keys(currentNest).forEach((function(groupValue){everyOrdinal.forEach((function(ordinalValue){if(!currentNest[groupValue][ordinalValue]){var missingPiece={};missingPiece[valueAccessor]=defaultValue||0,missingPiece[ordinalAccessor]=ordinalValue,missingPiece[groupAccessor]=groupValue,data.push(missingPiece)}}))}))},prepareRenderChange:function(_a){var selection=_a.selection,duration=_a.duration,namespace=_a.namespace,easing=_a.easing,delay=_a.delay;if(!duration)return selection;var transitionNamespace=namespace||"generic-transition";selection.interrupt(transitionNamespace);var transitionChain=selection.transition(transitionNamespace).duration(duration);return easing&&(transitionChain=transitionChain.ease(easing)),delay&&(transitionChain=transitionChain.delay(delay)),transitionChain}}),index=__assign({},Utils);module.exports=index}).call(this,__webpack_require__(47),__webpack_require__(204)(module))},472:function(module,exports,__webpack_require__){__webpack_require__(473),__webpack_require__(875),__webpack_require__(872),__webpack_require__(874),__webpack_require__(873),__webpack_require__(852),__webpack_require__(871),__webpack_require__(869),module.exports=__webpack_require__(870)},533:function(module,exports){},869:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(115),__webpack_require__(19),__webpack_require__(67),__webpack_require__(388),__webpack_require__(124),__webpack_require__(32),__webpack_require__(27),__webpack_require__(30),__webpack_require__(15),__webpack_require__(55),__webpack_require__(77),__webpack_require__(22),__webpack_require__(59),__webpack_require__(76);var _storybook_core_events__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(4),_storybook_addons__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(44),hasExpanded=!1,initialLoad=!0,initialStoryLoad=!0,firstTab=!0,handleKeyDown=function handleKeyDown(e){(firstTab&&(watchNavTabs(),firstTab=!1),13===e.keyCode||32===e.keyCode)&&(e.target.click(),new RegExp("#storybook-preview-wrapper|^/?path=/story/").test(e.target.getAttribute("href"))&&setTimeout((function(){Array.from(document.querySelectorAll(".os-content div div div > a")).slice(-3).forEach((function(i){return i.setAttribute("tabindex",-1)}))}),500),e.target.getAttribute("data-item-id")&&(document.querySelector("#a11y-status-message-text").textContent="".concat(e.target.getAttribute("data-item-id")," selected, press tab to skip over to canvas")))},makeH1=function makeH1(){if(document.querySelector(".sidebar-header div:first-of-type > a")){var newH1=document.createElement("h1"),oldH1=document.querySelector(".sidebar-header div:first-of-type a");document.querySelector(".sidebar-header div:first-of-type").appendChild(newH1),document.querySelector("h1").appendChild(oldH1),setTimeout((function(){var a11yLive=document.querySelector("#a11y-status-message"),a11yText=document.createElement("p");a11yLive.setAttribute("role","alert"),a11yText.setAttribute("id","a11y-status-message-text"),a11yText.textContent="",a11yLive.appendChild(a11yText)}),3e3)}document.querySelector("#storybook-explorer-tree div div div a").classList.add("level1")},setNavAria=function setNavAria(){var nav=document.querySelector("nav.container");nav.setAttribute("aria-hidden",!1),nav.setAttribute("aria-label","Visa Chart Components vertical navigation, use Tab key to traverse items and Enter key to select."),nav.setAttribute("aria-role","navigation")},removeShortcutDropdown=function removeShortcutDropdown(){document.querySelector(".sidebar-header div:last-child").remove()},removeSearch=function removeSearch(){var searchParent=document.querySelector(".sidebar-header").parentNode;searchParent.querySelector(".search-field").remove(),searchParent.querySelector("label").remove(),document.querySelector("#storybook-explorer-menu").removeAttribute("tabindex"),document.querySelector("#storybook-explorer-menu > div:last-child").remove()},createTree=function createTree(){document.querySelector("#storybook-explorer-tree div").setAttribute("role","table"),document.querySelector("#storybook-explorer-tree div div").setAttribute("role","rowgroup")},setAddonTabs=function setAddonTabs(){var tabParentDiv=document.querySelectorAll(".os-content")[2].querySelector(".tabbutton").parentNode;initialLoad&&(tabParentDiv.querySelectorAll(".tabbutton").forEach((function(i){return i.setAttribute("aria-selected",!1)})),tabParentDiv.querySelectorAll(".tabbutton-active").forEach((function(i){return i.setAttribute("aria-selected",!0)}))),new MutationObserver((function(){(tabParentDiv.querySelectorAll(".tabbutton").forEach((function(i){return i.setAttribute("aria-selected",!1)})),tabParentDiv.querySelectorAll(".tabbutton-active").forEach((function(i){return i.setAttribute("aria-selected",!0)})),tabParentDiv.querySelector(".tabbutton-active").id.includes("controls"))&&(Array.from(document.querySelectorAll("td:first-of-type button")).forEach((function(i){i.click()})),document.querySelectorAll(".os-content")[2].querySelector(".tabbutton-active").getAttribute("id").includes("controls")&&document.querySelector(".docblock-argstable")&&document.querySelectorAll("tr").forEach((function(tr){if(tr.getAttribute("title")&&"Side"===tr.getAttribute("title").substring(0,4)){var newText="Show ".concat(tr.getAttribute("title").substring(4));tr.setAttribute("title",newText),tr.querySelectorAll("button").forEach((function(b){return b.textContent=newText}))}})))})).observe(tabParentDiv,{childList:!0,subtree:!0,attributeFilter:["class"]})},watchNavTabs=function watchNavTabs(){var tabObserver=new MutationObserver((function(mutations){mutations.forEach((function(mutation){Array.from(mutation.addedNodes).forEach((function(n){n.addEventListener("keydown",handleKeyDown)}))}))}));Array.from(document.querySelectorAll("#storybook-explorer-tree div div div")).forEach((function(i){tabObserver.observe(i,{subtree:!0,childList:!0})}))},setRowsAndCells=function setRowsAndCells(){new MutationObserver((function(){Array.from(document.querySelectorAll("#storybook-explorer-tree div div div")).forEach((function(i){i.setAttribute("role","row"),i.querySelector("a:nth-child(2)")&&i.querySelector("a:nth-child(2)").addEventListener("keydown",handleKeyDown)})),Array.from(document.querySelectorAll("#storybook-explorer-tree div div div > a:first-child")).forEach((function(i){i.setAttribute("role","cell"),i.setAttribute("tabindex","0"),i.addEventListener("keydown",handleKeyDown),"Introduction"===i.innerHTML.split("/svg>")[1]?i.setAttribute("aria-label","".concat(i.innerHTML.split("/svg>")[1]," page for Visa Chart Components.\n          Press Enter or Space key to view on canvas")):i.getAttribute("data-parent-id")&&i.setAttribute("aria-label","".concat(i.getAttribute("data-item-id").split("--")[1]," example"," ","\n          ").concat(i.getAttribute("data-parent-id").split("-").join(" ")," component"," ","\n          Press Enter or Space key to view on canvas")),i.querySelector("svg").setAttribute("aria-hidden",!0)})),Array.from(document.querySelectorAll("#storybook-explorer-tree div div > button")).forEach((function(i){return i.classList.add("level1")})),document.querySelector("#storybook-explorer-menu").querySelectorAll("a[data-highlightable=true]").forEach((function(i){return i.setAttribute("data-highlightable",!1)})),document.querySelector("#storybook-explorer-menu").querySelectorAll("button[data-highlightable=true]").forEach((function(i){return i.setAttribute("data-highlightable",!1)})),document.querySelector("#bar-chart--hidden")&&document.querySelector("#bar-chart--hidden").setAttribute("data-highlightable",!0)})).observe(document.querySelector("#storybook-explorer-tree div div"),{childList:!0})};_storybook_addons__WEBPACK_IMPORTED_MODULE_15__.c.register("improve-a11y",(function(api){var emitter=_storybook_addons__WEBPACK_IMPORTED_MODULE_15__.c.getChannel();emitter.on(_storybook_core_events__WEBPACK_IMPORTED_MODULE_14__.DOCS_RENDERED,(function(){hasExpanded||(setTimeout(api.expandAll,1),hasExpanded=!0),initialLoad&&(makeH1(),setNavAria(),setAddonTabs(),removeShortcutDropdown(),removeSearch(),createTree(),setRowsAndCells(),initialLoad=!1)})),emitter.on(_storybook_core_events__WEBPACK_IMPORTED_MODULE_14__.STORY_RENDERED,(function(){(hasExpanded||(setTimeout(api.expandAll,1),hasExpanded=!0),initialLoad&&(makeH1(),setNavAria(),setAddonTabs(),removeShortcutDropdown(),removeSearch(),createTree(),setRowsAndCells(),initialLoad=!1),initialStoryLoad&&(!function watchTableAccordion(){var tableParentElement=document.querySelector("#panel-tab-content");new MutationObserver((function(mutations){mutations.forEach((function(mutation){if(mutation&&mutation.target&&"TR"===mutation.target.nodeName&&"Side"===mutation.target.getAttribute("title").substring(0,4)){var first4="Side"===mutation.target.getAttribute("title").substring(0,4)?"Show":"Hide";mutation.target.setAttribute("title","".concat(first4).concat(mutation.target.getAttribute("title").substring(4))),mutation.target.querySelectorAll("button").forEach((function(b){var oldText=b.textContent;b.textContent="".concat(first4).concat(oldText.substring(4))}))}}))})).observe(tableParentElement,{subtree:!0,attributeFilter:["title"]})}(),Array.from(document.querySelectorAll("td:first-of-type button")).forEach((function(i){i.click()})),initialStoryLoad=!1),document.querySelectorAll(".os-content")[1].querySelectorAll("a").forEach((function(i){return i.setAttribute("tabindex",-1)})),document.querySelectorAll(".os-content")[2].querySelector(".tabbutton-active").getAttribute("id").includes("controls")&&document.querySelector(".docblock-argstable"))&&document.querySelectorAll("tr").forEach((function(tr){if(tr.getAttribute("title")&&"Side"===tr.getAttribute("title").substring(0,4)){var newText="Show ".concat(tr.getAttribute("title").substring(4));tr.setAttribute("title",newText),tr.querySelectorAll("button").forEach((function(b){return b.textContent=newText}))}}))})),emitter.on(_storybook_core_events__WEBPACK_IMPORTED_MODULE_14__.STORY_CHANGED,(function(){initialStoryLoad||Array.from(document.querySelectorAll("td:first-of-type button")).forEach((function(i){i.click()}))}))}))},870:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(59),__webpack_require__(19),__webpack_require__(55),__webpack_require__(124),__webpack_require__(32),__webpack_require__(42),__webpack_require__(115),__webpack_require__(67),__webpack_require__(22),__webpack_require__(239),__webpack_require__(86),__webpack_require__(27),__webpack_require__(60),__webpack_require__(30),__webpack_require__(15),__webpack_require__(177),__webpack_require__(17),__webpack_require__(20),__webpack_require__(11),__webpack_require__(21),__webpack_require__(14),__webpack_require__(18),__webpack_require__(28);var react__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_23__),_storybook_addons__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(44),_storybook_addons__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(105),_storybook_theming__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(1),_storybook_components__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(2),_storybook_api__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(6),_storybook_core_events__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(4);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var PanelWrapper=_storybook_theming__WEBPACK_IMPORTED_MODULE_26__.styled.div((function(_ref){return{background:_ref.theme.background.content,padding:"2rem 20px",minHeight:"20vh",boxSizing:"border-box"}})),PanelInner=_storybook_theming__WEBPACK_IMPORTED_MODULE_26__.styled.div({marginLeft:"auto",marginRight:"auto",padding:"0 40px"}),PANEL_ID="".concat("show-source-code","/panel"),Panel=function Panel(){var _useArgs2=_slicedToArray(Object(_storybook_api__WEBPACK_IMPORTED_MODULE_28__.useArgs)(),3),args=_useArgs2[0],_useState2=(_useArgs2[1],_useArgs2[2],_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_23__.useState)("bar-chart"),2)),storyID=_useState2[0],setStoryID=_useState2[1];function formatter(args,n,src){return[1,2].includes(n)?src="this.props = {":6===n?src="const props = {":3===n?src="<".concat(storyID):5===n&&(src+="import pyvisacharts as vcc\n\nvcc.".concat(storyID.split("-")[0].charAt(0).toUpperCase()+storyID.split("-")[0].substring(1)+storyID.split("-")[1].charAt(0).toUpperCase()+storyID.split("-")[1].substring(1)+(3===storyID.split("-").length?storyID.split("-")[2].charAt(0).toUpperCase()+storyID.split("-")[2].substring(1):""),"(")),Object.keys(args).forEach((function(i,j){!new RegExp("^on|Event$").test(i)&&(args[i].length||Object.keys(args[i]).length||["number","boolean"].includes(typeof args[i]))&&("string"==typeof args[i]?src+="\n".concat("\t".repeat(1)).concat(i.length>1?"".concat(i).concat(3===n?"={":5===n?"=":": "):"",'"').concat(args[i].toLocaleString().replace(/'/g,"\\'"),'"').concat(3===n?"}":""):"number"==typeof args[i]?src+="\n".concat("\t".repeat(1)).concat(i).concat(3===n?"={":5===n?"=":": ").concat(args[i]).concat(3===n?"}":""):"boolean"==typeof args[i]?src+="\n".concat("\t".repeat(1)).concat(i).concat(3===n?"={":5===n?"=":": ").concat(args[i].toLocaleString()).concat(3===n?"}":""):null===args[i]?src+="\n".concat("\t".repeat(1),'"').concat(i,'": null'):"object"==typeof args[i]&&(src+="\n".concat("\t".repeat(1)).concat(args[i].length>0&&![3,5].includes(n)?"".concat(i,": ["):[void 0,0].includes(args[i].length)&&![3,5].includes(n)?"".concat(i,": {"):args[i].length>0&&3===n?"".concat(i,"={["):args[i].length>0&&5===n?"".concat(i,"=["):[void 0,0].includes(args[i].length)&&5===n?"".concat(i,"={"):"".concat(i,"={{")),Object.keys(args[i]).forEach((function(l,m){"string"==typeof args[i][l]?src+="\n".concat("\t".repeat(2)).concat(l.length>1?'"'.concat(l,'": '):"",'"').concat(args[i][l].toLocaleString().replace(/'/g,"\\'"),'"'):"number"==typeof args[i][l]?src+="\n".concat("\t".repeat(2),'"').concat(l,'": ').concat(args[i][l]):"boolean"==typeof args[i][l]?src+="\n".concat("\t".repeat(2),'"').concat(l,'": ').concat(5==n?args[i][l].toLocaleString().charAt(0).toUpperCase()+args[i][l].toLocaleString().slice(1):args[i][l].toLocaleString()):null===args[i][l]?src+="\n".concat("\t".repeat(2),'"').concat(l,'": null'):"object"==typeof args[i][l]&&(src+="\n".concat("\t".repeat(2)).concat(isNaN(l)?'"'+l+'": [':"{"),Object.keys(args[i][l]).forEach((function(a,b){"string"==typeof args[i][l][a]?src+="\n".concat("\t".repeat(3)).concat(a.length>0&&isNaN(a)?'"'.concat(a,'": '):"",'"').concat(args[i][l][a].toLocaleString().replace(/'/g,"\\'"),'"'):"number"==typeof args[i][l][a]?src+="\n".concat("\t".repeat(3),'"').concat(a,'": ').concat(args[i][l][a]):"boolean"==typeof args[i][l][a]?src+="\n".concat("\t".repeat(3),'"').concat(a,'": ').concat(5===n?args[i][l][a].toLocaleString().charAt(0).toUpperCase()+args[i][l][a].toLocaleString().slice(1):args[i][l][a].toLocaleString()):null===args[i][l][a]?src+="\n".concat("\t".repeat(3),'"').concat(a,'": null'):"object"==typeof args[i][l][a]&&null!==args[i][l][a]&&(src+="\n".concat("\t".repeat(3)).concat(isNaN(a)?args[i][l][a].length>0?'"'+a+'": [':'"'+a+'": {':"{"),Object.keys(args[i][l][a]).forEach((function(c,d){"string"==typeof args[i][l][a][c]?src+="\n".concat("\t".repeat(4)).concat(c.length>0&&isNaN(c)?"".concat(c,": "):"",'"').concat(args[i][l][a][c].toLocaleString().replace(/'/g,"\\'"),'"'):"number"==typeof args[i][l][a][c]?src+="\n".concat("\t".repeat(4)).concat(c.length>0&&isNaN(c)?"".concat(c,": "):"").concat(args[i][l][a][c]):"boolean"==typeof args[i][l][a][c]?src+="\n".concat("\t".repeat(4)).concat(c,": ").concat(5===n?args[i][l][a][c].toLocaleString().charAt(0).toUpperCase()+args[i][l][a][c].toLocaleString().slice(1):args[i][l][a][c].toLocaleString()):null===args[i][l][a][cancelIdleCallback]?src+="\n".concat("\t".repeat(4),'"').concat(c,'": null'):"object"==typeof args[i][l][a][c]&&(src+="\n".concat("\t".repeat(4)).concat(isNaN(c)?args[i][l][a][c].length>0?c+": [":c+": {":"{"),Object.keys(args[i][l][a][c]).forEach((function(e,f){"string"==typeof args[i][l][a][c][e]?src+="\n".concat("\t".repeat(5)).concat(e.length>0&&isNaN(e)?"".concat(e,": "):"","'").concat(args[i][l][a][c][e].toLocaleString().replace(/'/g,"\\'"),"'"):"number"==typeof args[i][l][a][c][e]?src+="\n".concat("\t".repeat(5)).concat(e,": ").concat(args[i][l][a][c][e]):"boolean"==typeof args[i][l][a][c][e]&&(src+="\n".concat("\t".repeat(5)).concat(e,": ").concat(5===n?args[i][l][a][c][e].toLocaleString().charAt(0).toUpperCase()+args[i][l][a][c][e].toLocaleString().slice(1):args[i][l][a][c][e].toLocaleString())),f!==Object.keys(args[i][l][a][c]).length-1&&(src+=",")})),src+="\n".concat("\t".repeat(4)).concat(isNaN(c)&&args[i][l][a][c].length>0?"]":"}")),d!==Object.keys(args[i][l][a]).length-1&&(src+=",")})),src+="\n".concat("\t".repeat(3)).concat(isNaN(a)&&args[i][l][a].length>0?"]":"}")),b!==Object.keys(args[i][l]).length-1&&(src+=",")})),src+="\n".concat("\t".repeat(2)).concat(isNaN(l)?"]":"}")),m!==Object.keys(args[i]).length-1&&(src+=",")})),src+="\n".concat("\t".repeat(1)).concat(args[i].length>0?"]":"}").concat(3===n?"}":"")),3!==n&&j!==Object.keys(args).length-1&&(src+=","))})),src=","===src.slice(-1)?src.slice(0,-1):src,1===n?(src+="\n}\n\n",src+="<".concat(storyID.charAt(0).toUpperCase()+storyID.split("-")[0].slice(1)+storyID.split("-")[1].charAt(0).toUpperCase()+storyID.split("-")[1].slice(1)+(3===storyID.split("-").length?storyID.split("-")[2].charAt(0).toUpperCase()+storyID.split("-")[2].slice(1):"")," {...this.props} />")):2===n?(src+="\n}\n\n",src+="<".concat(storyID),Object.keys(args).forEach((function(i){new RegExp("^on|Event$").test(i)||!args[i].length&&!Object.keys(args[i]).length||(src+="\n\t[".concat(i,']="props.').concat(i,'"'))})),src+="\n></".concat(storyID,">")):3===n?src+="\n/>":6===n&&(src+="\n}\n\n",src+="<".concat(storyID.charAt(0).toUpperCase()+storyID.split("-")[0].slice(1)+storyID.split("-")[1].charAt(0).toUpperCase()+storyID.split("-")[1].slice(1)+(3===storyID.split("-").length?storyID.split("-")[2].charAt(0).toUpperCase()+storyID.split("-")[2].slice(1):""),' v-bind="props" />')),src}_storybook_addons__WEBPACK_IMPORTED_MODULE_24__.c.getChannel().on(_storybook_core_events__WEBPACK_IMPORTED_MODULE_29__.STORY_RENDERED,(function(e){e&&setStoryID(e.split("--")[0])}));var src1="";src1+=formatter(args,1,src1);var src2="";src2+=formatter(args,2,src2);var src3="";src3+=formatter(args,3,src3);var src4="library(visachartR)\nlibrary(jsonlite)\nlibrary(dplyr)\n\n";src4+="data <- fromJSON('".concat(JSON.stringify(args.data||args.linkData),"')\n");var exclusions="^on|Event$|accessibility|uniqueID|[a-z].*Accessor|[a-z].*Title|data|[a-z].*Data|height|width|interactionKeys";function listify(key,depth){var z=0;src4+="\n".concat("\t".repeat(depth)).concat(key," = list("),Object.keys(args[key]).forEach((function(i,j){"string"==typeof args[key][i]?src4+="\n".concat("\t".repeat(depth+1)).concat(i.length>1?"".concat(i,"="):"","'").concat(args[key][i].toLocaleString().replace(/'/g,"\\'"),"'"):"number"==typeof args[key][i]||null===args[key][i]?src4+="\n".concat("\t".repeat(depth+1)).concat(i,"=").concat(args[key][i]):"boolean"==typeof args[key][i]?src4+="\n".concat("\t".repeat(depth+1)).concat(i,"=").concat(args[key][i].toLocaleString().toUpperCase()):"object"==typeof args[key][i]&&(src4+="\n".concat("\t".repeat(depth+1)).concat(i.length>1?"".concat(i," = "):"","list("),Object.keys(args[key][i]).forEach((function(l,m){"string"==typeof args[key][i][l]?src4+="\n".concat("\t".repeat(depth+2)).concat(l.length>1?"".concat(l,"="):"","'").concat(args[key][i][l].toLocaleString().replace(/'/g,"\\'"),"'"):"number"==typeof args[key][i][l]||null===args[key][i][l]?src4+="\n".concat("\t".repeat(depth+2)).concat(l,"=").concat(args[key][i][l]):"boolean"==typeof args[key][i][l]?src4+="\n".concat("\t".repeat(depth+2)).concat(l,"=").concat(args[key][i][l].toLocaleString().toUpperCase()):"object"==typeof args[key][i][l]?(src4+="\n".concat("\t".repeat(depth+2)).concat(l," = list("),Object.keys(args[key][i][l]).forEach((function(a,b){"string"==typeof args[key][i][l][a]?src4+="\n".concat("\t".repeat(depth+3)).concat(a.length>0?"".concat(a,"="):"","'").concat(args[key][i][l][a].toLocaleString().replace(/'/g,"\\'"),"'"):"number"==typeof args[key][i][l][a]?src4+="\n".concat("\t".repeat(depth+3)).concat(a,"=").concat(args[key][i][l][a]):"boolean"==typeof args[key][i][l][a]&&(src4+="\n".concat("\t".repeat(depth+3)).concat(a,"=").concat(args[key][i][l][a].toLocaleString().toUpperCase())),b!==Object.keys(args[key][i][l]).length-1&&(src4+=",")})),src4+="\n".concat("\t".repeat(depth+2),")")):"function"==typeof args[key][i][l]&&(src4+="\n".concat("\t".repeat(depth+2)).concat(l.length>1?"".concat(l,"="):"","'").concat(args[key][i][l].toLocaleString().replace(/'/g,"\\'"),"'")),m!==Object.keys(args[key][i]).length-1&&(src4+=",")})),src4+="\n".concat("\t".repeat(depth+1),")")),j!==Object.keys(args[key]).length-1&&(src4+=","),z+=1})),src4+="\n".concat("\t".repeat(depth),")"),z!==Object.keys(args).filter((function(x){return new RegExp(exclusions).test(x)})).length-1&&(src4+=",")}(args.data||args.linkData)&&(listify("accessibility",0),src4=src4.slice(0,-1),src4+="\n\n"),src4+="data %>% \n\t".concat(storyID.split("-")[0],"_").concat(storyID.split("-")[1]+(3===storyID.split("-").length?"_"+storyID.split("-")[2]:""),"("),Object.keys(args).forEach((function(i){new RegExp("[a-z].*Accessor|[a-z].*Title|height|width").test(i)&&("object"==typeof args[i]?listify(i,2):src4+="".concat(i," = '").concat(args[i],"',\n\t\t"))})),src4+="accessibility = accessibility,\n\t\tprops = list(";var len_r=0;Object.keys(args).forEach((function(i){(!new RegExp(exclusions).test(i)&&(args[i].length||Object.keys(args[i]).length)||["number","boolean"].includes(typeof args[i]))&&(len_r+=1,"object"==typeof args[i]?listify(i,3):src4+="\n\t\t\t".concat(i," = '").concat(args[i],"',"))})),0===len_r?(src4=src4.slice(0,-17),src4+="\n\t)"):(src4=src4.slice(0,-1),src4+="\n\t\t)\n\t)");var src5="",pyArgs={},configArgs={};Object.keys(args).forEach((function(i,j){["data","linkData","nodeData","ordinalAccessor","valueAccessor","groupAccessor","seriesAccessor","xAccessor","yAccessor","nodeAccessor","parentAccessor","sizeAccessor","joinAccessor","joinNameAccessor","markerAccessor","markerNameAccessor","latitudeAccessor","longitudeAccessor","sourceAccessor","targetAccessor","nodeIDAccessor","mainTitle","subTitle","accessibility"].includes(i)?pyArgs[i]=args[i]:!new RegExp("^on|Event$").test(i)&&(args[i].length||Object.keys(args[i]).length||["number","boolean"].includes(typeof args[i]))&&(configArgs[i]=args[i])})),src5+=formatter(pyArgs,5,src5),Object.keys(configArgs).length&&(src5+=",\n\tconfig={",Object.keys(configArgs).forEach((function(l,m){"string"==typeof configArgs[l]?src5+="\n".concat("\t".repeat(2)).concat(l.length>1?'"'.concat(l,'": '):"",'"').concat(configArgs[l].toLocaleString().replace(/'/g,"\\'"),'"'):"number"==typeof configArgs[l]?src5+="\n".concat("\t".repeat(2),'"').concat(l,'": ').concat(configArgs[l]):"boolean"==typeof configArgs[l]?src5+="\n".concat("\t".repeat(2),'"').concat(l,'": ').concat(configArgs[l].toLocaleString().charAt(0).toUpperCase()+configArgs[l].toLocaleString().slice(1)):null===configArgs[l]?src5+="\n".concat("\t".repeat(2),'"').concat(l,'": null'):"object"==typeof configArgs[l]&&(src5+="\n".concat("\t".repeat(2)).concat(configArgs[l].length>0?'"'+l+'": [':'"'+l+'": {'),Object.keys(configArgs[l]).forEach((function(a,b){"string"==typeof configArgs[l][a]?src5+="\n".concat("\t".repeat(3)).concat(a.length>0&&isNaN(a)?'"'.concat(a,'": '):"",'"').concat(configArgs[l][a].toLocaleString().replace(/'/g,"\\'"),'"'):"number"==typeof configArgs[l][a]?src5+="\n".concat("\t".repeat(3),'"').concat(a,'": ').concat(configArgs[l][a]):"boolean"==typeof configArgs[l][a]?src5+="\n".concat("\t".repeat(3),'"').concat(a,'": ').concat(configArgs[l][a].toLocaleString().charAt(0).toUpperCase()+configArgs[l][a].toLocaleString().toLocaleString().slice(1)):null===configArgs[l][a]?src5+="\n".concat("\t".repeat(3),'"').concat(a,'": null'):"object"==typeof configArgs[l][a]&&null!==configArgs[l][a]&&(src5+="\n".concat("\t".repeat(3)).concat(isNaN(a)?configArgs[l][a].length>0?'"'+a+'": [':'"'+a+'": {':"{"),Object.keys(configArgs[l][a]).forEach((function(c,d){"string"==typeof configArgs[l][a][c]?src5+="\n".concat("\t".repeat(4)).concat(c.length>0&&isNaN(c)?'"'.concat(c,'": '):"",'"').concat(configArgs[l][a][c].toLocaleString().replace(/'/g,"\\'"),'"'):"number"==typeof configArgs[l][a][c]?src5+="\n".concat("\t".repeat(4)).concat(c.length>0&&isNaN(c)?'"'.concat(c,'": '):"").concat(configArgs[l][a][c]):"boolean"==typeof configArgs[l][a][c]?src5+="\n".concat("\t".repeat(4)).concat(c,": ").concat(configArgs[l][a][c].toLocaleString().charAt(0).toUpperCase()+configArgs[l][a][c].toLocaleString().toLocaleString().slice(1)):null===configArgs[l][a][cancelIdleCallback]?src5+="\n".concat("\t".repeat(4),'"').concat(c,'": null'):"object"==typeof configArgs[l][a][c]&&(src5+="\n".concat("\t".repeat(4)).concat(isNaN(c)?configArgs[l][a][c].length>0?'"'+c+'": [':'"'+c+'": {':"{"),Object.keys(configArgs[l][a][c]).forEach((function(e,f){"string"==typeof configArgs[l][a][c][e]?src5+="\n".concat("\t".repeat(5)).concat(e.length>0&&isNaN(e)?"".concat(e,": "):"","'").concat(configArgs[l][a][c][e].toLocaleString().replace(/'/g,"\\'"),"'"):"number"==typeof configArgs[l][a][c][e]?src5+="\n".concat("\t".repeat(5)).concat(e,": ").concat(configArgs[l][a][c][e]):"boolean"==typeof configArgs[l][a][c][e]&&(src5+="\n".concat("\t".repeat(5)).concat(e,": ").concat(configArgs[l][a][c][e].toLocaleString().charAt(0).toUpperCase()+configArgs[l][a][c][e].toLocaleString().toLocaleString().slice(1))),f!==Object.keys(configArgs[l][a][c]).length-1&&(src5+=",")})),src5+="\n".concat("\t".repeat(4)).concat(isNaN(c)&&configArgs[l][a][c].length>0?"]":"}")),d!==Object.keys(configArgs[l][a]).length-1&&(src5+=",")})),src5+="\n".concat("\t".repeat(3)).concat(isNaN(a)&&configArgs[l][a].length>0?"]":"}")),b!==Object.keys(configArgs[l]).length-1&&(src5+=",")})),src5+="\n".concat("\t".repeat(2)).concat(configArgs[l].length>0?"]":"}")),m!==Object.keys(configArgs).length-1&&(src5+=",")})),src5+="\n".concat("\t".repeat(1)).concat(configArgs.length>0?"]":"}"),src5+="\n)");var src6="";src6+=formatter(args,6,src6);var _useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_23__.useState)(1),2),source=_useState4[0],setSource=_useState4[1];function selectSource(idx){var lis=Array.from(document.querySelectorAll(".sources button"));idx&&(lis.forEach((function(i,j){i.style.backgroundColor=j!==idx-1?"whitesmoke":"rgba(0, 0, 255, .1)"})),setSource(idx))}return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(PanelWrapper,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(PanelInner,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("ul",{className:"sources"},react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("button",{onClick:function onClick(){return selectSource(1)}},"React"),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("button",{onClick:function onClick(){return selectSource(2)}},"Angular"),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("button",{onClick:function onClick(){return selectSource(3)}},"Web Component"),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("button",{onClick:function onClick(){return selectSource(4)}},"R"),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("button",{onClick:function onClick(){return selectSource(5)}},"Python"),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("button",{onClick:function onClick(){return selectSource(6)}},"Vue")),1===source?react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_storybook_components__WEBPACK_IMPORTED_MODULE_27__.W,{code:src1,language:"",format:!1}):2===source?react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_storybook_components__WEBPACK_IMPORTED_MODULE_27__.W,{code:src2,language:"",format:!1}):3===source?react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_storybook_components__WEBPACK_IMPORTED_MODULE_27__.W,{code:src3,language:"",format:!1}):4===source?react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_storybook_components__WEBPACK_IMPORTED_MODULE_27__.W,{code:src4,language:"",format:!1}):5===source?react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_storybook_components__WEBPACK_IMPORTED_MODULE_27__.W,{code:src5,language:"",format:!1}):react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_storybook_components__WEBPACK_IMPORTED_MODULE_27__.W,{code:src6,language:"",format:!1})))};_storybook_addons__WEBPACK_IMPORTED_MODULE_24__.c.register("show-source-code",(function(api){_storybook_addons__WEBPACK_IMPORTED_MODULE_24__.c.add(PANEL_ID,{type:_storybook_addons__WEBPACK_IMPORTED_MODULE_25__.b.PANEL,title:"Code",render:function render(_ref2){var active=_ref2.active,key=_ref2.key;return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_storybook_components__WEBPACK_IMPORTED_MODULE_27__.Cb,{active:active,key:key},react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(Panel,null))}})}))},875:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(388);var esm=__webpack_require__(44),dist_esm=__webpack_require__(1),charts_package=__webpack_require__(449),visa_charts_utils_cjs=__webpack_require__(450),visaColors=__webpack_require__.n(visa_charts_utils_cjs).a.visaColors,theme=Object(dist_esm.create)({base:"light",brandTitle:"Visa Chart Components @".concat(charts_package.a),brandUrl:"https://github.com/visa/visa-chart-components",fontBase:'"Open Sans", sans-serif',colorPrimary:visaColors.categorical_blue,colorSecondary:visaColors.categorical_blue});esm.c.setConfig({theme:theme,enableShortcuts:!1,toolbar:{zoom:{hidden:!0},eject:{hidden:!0},copy:{hidden:!0},fullscreen:{hidden:!0},"storybook/background":{hidden:!0},"storybook/viewport":{hidden:!0}},sidebar:{showRoots:!1},previewTabs:{canvas:"Component Viewer","storybook/docs/panel":{index:-1}}}),setTimeout((function(){esm.c.elements.tab["storybookjs/notes/panel"].title="README"}),10)}},[[472,3,4]]]);