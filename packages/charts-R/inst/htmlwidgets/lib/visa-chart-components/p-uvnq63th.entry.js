/**
 * Copyright (c) 2021 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
import{r as t,c as i,h as s,g as n}from"./p-b0e13577.js";import{U as r}from"./p-3c064bed.js";var e="http://www.w3.org/1999/xhtml";const h={svg:"http://www.w3.org/2000/svg",xhtml:e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),h.hasOwnProperty(i)?{space:h[i],local:t}:t}function o(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===e&&i.documentElement.namespaceURI===e?i.createElement(t):i.createElementNS(s,t)}}function u(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function c(t){var i=a(t);return(i.local?u:o)(i)}function l(){}function f(t){return null==t?l:function(){return this.querySelector(t)}}function d(){return[]}function v(t){return null==t?d:function(){return this.querySelectorAll(t)}}function p(t){return function(){return this.matches(t)}}function y(t){return new Array(t.length)}function w(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function m(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new w(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function g(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new w(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function b(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function M(t){return function(){this.removeAttribute(t)}}function k(t){return function(){this.removeAttributeNS(t.space,t.local)}}function x(t,i){return function(){this.setAttribute(t,i)}}function A(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function N(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function W(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function L(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function S(t){return function(){this.style.removeProperty(t)}}function T(t,i,s){return function(){this.style.setProperty(t,i,s)}}function E(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function D(t,i){return t.style.getPropertyValue(i)||L(t).getComputedStyle(t,null).getPropertyValue(i)}function $(t){return function(){delete this[t]}}function C(t,i){return function(){this[t]=i}}function O(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function I(t){return t.trim().split(/^|\s+/)}function z(t){return t.classList||new _(t)}function _(t){this._node=t,this._names=I(t.getAttribute("class")||"")}function H(t,i){for(var s=z(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function P(t,i){for(var s=z(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function q(t){return function(){H(this,t)}}function R(t){return function(){P(this,t)}}function X(t,i){return function(){(i.apply(this,arguments)?H:P)(this,t)}}function F(){this.textContent=""}function j(t){return function(){this.textContent=t}}function G(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function V(){this.innerHTML=""}function Y(t){return function(){this.innerHTML=t}}function K(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function B(){this.nextSibling&&this.parentNode.appendChild(this)}function U(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Z(){return null}function J(){var t=this.parentNode;t&&t.removeChild(this)}function Q(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function tt(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}w.prototype={constructor:w,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},_.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var it={},st=null;function nt(t,i,s){return t=rt(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function rt(t,i,s){return function(n){var r=st;st=n;try{t.call(this,this.__data__,i,s)}finally{st=r}}}function et(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function ht(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function at(t,i,s){var n=it.hasOwnProperty(t.type)?nt:rt;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function ot(t,i,s){var n=L(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function ut(t,i){return function(){return ot(this,t,i)}}function ct(t,i){return function(){return ot(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(it={mouseenter:"mouseover",mouseleave:"mouseout"}));var lt=[null];function ft(t,i){this._groups=t,this._parents=i}function dt(){return new ft([[document.documentElement]],lt)}function vt(t){return"string"==typeof t?new ft([[document.querySelector(t)]],[document.documentElement]):new ft([[t]],lt)}function pt(t,i){let s;if(void 0===i)for(const n of t)null!=n&&(s<n||void 0===s&&n>=n)&&(s=n);else{let n=-1;for(let r of t)null!=(r=i(r,++n,t))&&(s<r||void 0===s&&r>=r)&&(s=r)}return s}function yt(t,i){let s;if(void 0===i)for(const n of t)null!=n&&(s>n||void 0===s&&n>=n)&&(s=n);else{let n=-1;for(let r of t)null!=(r=i(r,++n,t))&&(s>r||void 0===s&&r>=r)&&(s=r)}return s}ft.prototype=dt.prototype={constructor:ft,select:function(t){"function"!=typeof t&&(t=f(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new ft(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=v(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new ft(n,r)},filter:function(t){"function"!=typeof t&&(t=p(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new ft(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?g:m,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,b,M=0,k=0;M<v;++M)if(w=p[M]){for(M>=k&&(k=M+1);!(b=y[k])&&++k<v;);w._next=b||null}}return(h=new ft(h,n))._enter=a,h._exit=o,h},enter:function(){return new ft(this._enter||this._groups.map(y),this._parents)},exit:function(){return new ft(this._exit||this._groups.map(y),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new ft(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=b);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new ft(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=a(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?k:M:"function"==typeof i?s.local?W:N:s.local?A:x)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?S:"function"==typeof i?E:T)(t,i,null==s?"":s)):D(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?$:"function"==typeof i?O:C)(t,i)):this.node()[t]},classed:function(t,i){var s=I(t+"");if(arguments.length<2){for(var n=z(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?X:i?q:R)(s,i))},text:function(t){return arguments.length?this.each(null==t?F:("function"==typeof t?G:j)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?V:("function"==typeof t?K:Y)(t)):this.node().innerHTML},raise:function(){return this.each(B)},lower:function(){return this.each(U)},append:function(t){var i="function"==typeof t?t:c(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:c(t),n=null==i?Z:"function"==typeof i?i:f(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(J)},clone:function(t){return this.select(t?tt:Q)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=et(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?at:ht,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?ct:ut)(t,i))}};var wt=Math.PI,mt=2*wt,gt=mt-1e-6;function bt(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Mt(){return new bt}function kt(t){return function(){return t}}function xt(t){return t[0]}function At(t){return t[1]}bt.prototype=Mt.prototype={constructor:bt,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,s,n){this._+="Q"+ +t+","+ +i+","+(this._x1=+s)+","+(this._y1=+n)},bezierCurveTo:function(t,i,s,n,r,e){this._+="C"+ +t+","+ +i+","+ +s+","+ +n+","+(this._x1=+r)+","+(this._y1=+e)},arcTo:function(t,i,s,n,r){var e=this._x1,h=this._y1,a=(s=+s)-(t=+t),o=(n=+n)-(i=+i),u=e-t,c=h-i,l=u*u+c*c;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(l>1e-6)if(Math.abs(c*a-o*u)>1e-6&&r){var f=s-e,d=n-h,v=a*a+o*o,p=f*f+d*d,y=Math.sqrt(v),w=Math.sqrt(l),m=r*Math.tan((wt-Math.acos((v+l-p)/(2*y*w)))/2),g=m/w,b=m/y;Math.abs(g-1)>1e-6&&(this._+="L"+(t+g*u)+","+(i+g*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>u*d)+","+(this._x1=t+b*a)+","+(this._y1=i+b*o)}else this._+="L"+(this._x1=t)+","+(this._y1=i)},arc:function(t,i,s,n,r,e){t=+t,i=+i,e=!!e;var h=(s=+s)*Math.cos(n),a=s*Math.sin(n),o=t+h,u=i+a,c=1^e,l=e?n-r:r-n;if(s<0)throw new Error("negative radius: "+s);null===this._x1?this._+="M"+o+","+u:(Math.abs(this._x1-o)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+o+","+u),s&&(l<0&&(l=l%mt+mt),l>gt?this._+="A"+s+","+s+",0,1,"+c+","+(t-h)+","+(i-a)+"A"+s+","+s+",0,1,"+c+","+(this._x1=o)+","+(this._y1=u):l>1e-6&&(this._+="A"+s+","+s+",0,"+ +(l>=wt)+","+c+","+(this._x1=t+s*Math.cos(r))+","+(this._y1=i+s*Math.sin(r))))},rect:function(t,i,s,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +s+"v"+ +n+"h"+-s+"Z"},toString:function(){return this._}};var Nt=Array.prototype.slice;function Wt(t){return t.source}function Lt(t){return t.target}function St(t,i,s,n,r){t.moveTo(i,s),t.bezierCurveTo(i=(i+n)/2,s,i,r,n,r)}function Tt(t){return 1-Math.sqrt(1-t*t)}const{propDefaultValues:Et}=r;class Dt{}Dt.highestHeadingLevel=Et.highestHeadingLevel,Dt.mainTitle="Alluvial Diagram Title",Dt.subTitle="This is the alluvial diagram's subtitle",Dt.height=300,Dt.width=650,Dt.margin={top:3,bottom:3,right:6.5,left:6.5},Dt.padding={top:20,bottom:50,right:50,left:50},Dt.sourceAccessor="source",Dt.targetAccessor="target",Dt.valueAccessor="value",Dt.groupAccessor="group",Dt.labelAccessor="name",Dt.nodeIDAccessor="id",Dt.nodeConfig={fill:!1,width:12,padding:20,alignment:"left",compare:!1},Dt.linkConfig={visible:!0,fillMode:"none",opacity:.3},Dt.accessibility=Et.accessibility,Dt.animationConfig=Et.animationConfig,Dt.colorPalette=Et.colorPaletteCategorical,Dt.dataLabel=Et.dataLabel,Dt.annotations=Et.annotations,Dt.hoverStyle=Et.hoverStyle,Dt.clickStyle=Et.clickStyle,Dt.hoverOpacity=Et.hoverOpacity,Dt.cursor=Et.cursor,Dt.tooltipLabel=Et.tooltipLabel,Dt.showTooltip=Et.showTooltip,Dt.suppressEvents=Et.suppressEvents,Dt.clickHighlight=Et.clickHighlight;var $t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Ct=new Uint8Array(16);function Ot(){if(!$t)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return $t(Ct)}for(var It=[],zt=0;zt<256;++zt)It[zt]=(zt+256).toString(16).substr(1);function _t(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||Ot)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[It[t[i++]],It[t[i++]],It[t[i++]],It[t[i++]],"-",It[t[i++]],It[t[i++]],"-",It[t[i++]],It[t[i++]],"-",It[t[i++]],It[t[i++]],"-",It[t[i++]],It[t[i++]],It[t[i++]],It[t[i++]],It[t[i++]],It[t[i++]]].join("")}(r)}var Ht={value:function(){}};function Pt(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new qt(n)}function qt(t){this._=t}function Rt(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function Xt(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function Ft(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=Ht,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}qt.prototype=Pt.prototype={constructor:qt,on:function(t,i){var s,n=this._,r=Rt(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=Ft(n[s],t.name,i);else if(null==i)for(s in n)n[s]=Ft(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=Xt(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new qt(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var jt,Gt,Vt=0,Yt=0,Kt=0,Bt=0,Ut=0,Zt=0,Jt="object"==typeof performance&&performance.now?performance:Date,Qt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ti(){return Ut||(Qt(ii),Ut=Jt.now()+Zt)}function ii(){Ut=0}function si(){this._call=this._time=this._next=null}function ni(t,i,s){var n=new si;return n.restart(t,i,s),n}function ri(){Ut=(Bt=Jt.now())+Zt,Vt=Yt=0;try{!function(){ti(),++Vt;for(var t,i=jt;i;)(t=Ut-i._time)>=0&&i._call.call(null,t),i=i._next;--Vt}()}finally{Vt=0,function(){for(var t,i,s=jt,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:jt=i);Gt=t,hi(n)}(),Ut=0}}function ei(){var t=Jt.now(),i=t-Bt;i>1e3&&(Zt-=i,Bt=t)}function hi(t){Vt||(Yt&&(Yt=clearTimeout(Yt)),t-Ut>24?(t<1/0&&(Yt=setTimeout(ri,t-Jt.now()-Zt)),Kt&&(Kt=clearInterval(Kt))):(Kt||(Bt=Jt.now(),Kt=setInterval(ei,1e3)),Vt=1,Qt(ri)))}function ai(t,i,s){var n=new si;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}si.prototype=ni.prototype={constructor:si,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?ti():+s)+(null==i?0:+i),this._next||Gt===this||(Gt?Gt._next=this:jt=this,Gt=this),this._call=t,this._time=s,hi()},stop:function(){this._call&&(this._call=null,this._time=1/0,hi())}};var oi=Pt("start","end","interrupt"),ui=[];function ci(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return ai(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(ai((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=ni((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:oi,tween:ui,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function li(t,i){var s=di(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function fi(t,i){var s=di(t,i);if(s.state>2)throw new Error("too late; already started");return s}function di(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function vi(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function pi(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function yi(){}var wi="\\s*([+-]?\\d+)\\s*",mi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",gi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bi=/^#([0-9a-f]{3,8})$/,Mi=new RegExp("^rgb\\("+[wi,wi,wi]+"\\)$"),ki=new RegExp("^rgb\\("+[gi,gi,gi]+"\\)$"),xi=new RegExp("^rgba\\("+[wi,wi,wi,mi]+"\\)$"),Ai=new RegExp("^rgba\\("+[gi,gi,gi,mi]+"\\)$"),Ni=new RegExp("^hsl\\("+[mi,gi,gi]+"\\)$"),Wi=new RegExp("^hsla\\("+[mi,gi,gi,mi]+"\\)$"),Li={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Si(){return this.rgb().formatHex()}function Ti(){return this.rgb().formatRgb()}function Ei(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=bi.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?Di(i):3===s?new Ii(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?$i(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?$i(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Mi.exec(t))?new Ii(i[1],i[2],i[3],1):(i=ki.exec(t))?new Ii(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=xi.exec(t))?$i(i[1],i[2],i[3],i[4]):(i=Ai.exec(t))?$i(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Ni.exec(t))?Pi(i[1],i[2]/100,i[3]/100,1):(i=Wi.exec(t))?Pi(i[1],i[2]/100,i[3]/100,i[4]):Li.hasOwnProperty(t)?Di(Li[t]):"transparent"===t?new Ii(NaN,NaN,NaN,0):null}function Di(t){return new Ii(t>>16&255,t>>8&255,255&t,1)}function $i(t,i,s,n){return n<=0&&(t=i=s=NaN),new Ii(t,i,s,n)}function Ci(t){return t instanceof yi||(t=Ei(t)),t?new Ii((t=t.rgb()).r,t.g,t.b,t.opacity):new Ii}function Oi(t,i,s,n){return 1===arguments.length?Ci(t):new Ii(t,i,s,null==n?1:n)}function Ii(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function zi(){return"#"+Hi(this.r)+Hi(this.g)+Hi(this.b)}function _i(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Hi(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Pi(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new Ri(t,i,s,n)}function qi(t){if(t instanceof Ri)return new Ri(t.h,t.s,t.l,t.opacity);if(t instanceof yi||(t=Ei(t)),!t)return new Ri;if(t instanceof Ri)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new Ri(h,a,o,t.opacity)}function Ri(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function Xi(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function Fi(t){return function(){return t}}function ji(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):Fi(isNaN(t)?i:t)}vi(yi,Ei,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Si,formatHex:Si,formatHsl:function(){return qi(this).formatHsl()},formatRgb:Ti,toString:Ti}),vi(Ii,Oi,pi(yi,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ii(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ii(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zi,formatHex:zi,formatRgb:_i,toString:_i})),vi(Ri,(function(t,i,s,n){return 1===arguments.length?qi(t):new Ri(t,i,s,null==n?1:n)}),pi(yi,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ri(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ri(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new Ii(Xi(t>=240?t-240:t+120,r,n),Xi(t,r,n),Xi(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Gi=function t(i){var s=function(t){return 1==(t=+t)?ji:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):Fi(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=Oi(t)).r,(i=Oi(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=ji(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function Vi(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}var Yi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ki=new RegExp(Yi.source,"g");function Bi(t,i){var s,n,r,e=Yi.lastIndex=Ki.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=Yi.exec(t))&&(n=Ki.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:Vi(s,n)})),e=Ki.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}var Ui,Zi,Ji,Qi,ts=180/Math.PI,is={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ss(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*ts,skewX:Math.atan(o)*ts,scaleX:h,scaleY:a}}function ns(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:Vi(t,r)},{i:o-2,x:Vi(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:Vi(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:Vi(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:Vi(t,s)},{i:a-2,x:Vi(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var rs=ns((function(t){return"none"===t?is:(Ui||(Ui=document.createElement("DIV"),Zi=document.documentElement,Ji=document.defaultView),Ui.style.transform=t,t=Ji.getComputedStyle(Zi.appendChild(Ui),null).getPropertyValue("transform"),Zi.removeChild(Ui),ss(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),es=ns((function(t){return null==t?is:(Qi||(Qi=document.createElementNS("http://www.w3.org/2000/svg","g")),Qi.setAttribute("transform",t),(t=Qi.transform.baseVal.consolidate())?ss((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):is)}),", ",")",")");function hs(t,i){var s,n;return function(){var r=fi(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function as(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=fi(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function os(t,i,s){var n=t._id;return t.each((function(){var t=fi(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return di(t,n).value[i]}}function us(t,i){var s;return("number"==typeof i?Vi:i instanceof Ei?Gi:(s=Ei(i))?(i=s,Gi):Bi)(t,i)}function cs(t){return function(){this.removeAttribute(t)}}function ls(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fs(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function ds(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function vs(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function ps(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function ys(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function ws(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function ms(t,i){return function(){li(this,t).delay=+i.apply(this,arguments)}}function gs(t,i){return i=+i,function(){li(this,t).delay=i}}function bs(t,i){return function(){fi(this,t).duration=+i.apply(this,arguments)}}function Ms(t,i){return i=+i,function(){fi(this,t).duration=i}}function ks(t,i){if("function"!=typeof i)throw new Error;return function(){fi(this,t).ease=i}}function xs(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?li:fi;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var As=dt.prototype.constructor;function Ns(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var Ws=0;function Ls(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function Ss(){return++Ws}var Ts=dt.prototype;Ls.prototype=function(t){return dt().transition(t)}.prototype={constructor:Ls,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=f(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),d=0;d<c;++d)(a=u[d])&&(o=t.call(a,a.__data__,d,u))&&("__data__"in a&&(o.__data__=a.__data__),l[d]=o,ci(l[d],i,s,d,l,di(a,s)));return new Ls(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=v(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),p=di(o,s),y=0,w=d.length;y<w;++y)(f=d[y])&&ci(f,i,s,y,d,p);e.push(d),h.push(o)}return new Ls(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=p(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new Ls(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new Ls(e,this._parents,this._name,this._id)},selection:function(){return new As(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=Ss(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=di(h,i);ci(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ls(n,this._parents,t,s)},call:Ts.call,nodes:Ts.nodes,node:Ts.node,size:Ts.size,empty:Ts.empty,each:Ts.each,on:function(t,i){var s=this._id;return arguments.length<2?di(this.node(),s).on.on(t):this.each(xs(s,t,i))},attr:function(t,i){var s=a(t),n="transform"===s?es:us;return this.attrTween(t,"function"==typeof i?(s.local?ps:vs)(s,n,os(this,"attr."+t,i)):null==i?(s.local?ls:cs)(s):(s.local?ds:fs)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=a(t);return this.tween(s,(n.local?ys:ws)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?rs:us;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=D(this,t),h=(this.style.removeProperty(t),D(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=D(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=D(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,os(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=D(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,Ns(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(os(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=di(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?hs:as)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?ms:gs)(i,t)):di(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?bs:Ms)(i,t)):di(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(ks(i,t)):di(this.node(),i).ease}};var Es={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ds(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return Es.time=ti(),Es;return s}dt.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},dt.prototype.transition=function(t){var i,s;t instanceof Ls?(i=t._id,t=t._name):(i=Ss(),(s=Es).time=ti(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&ci(h,t,i,u,a,s||Ds(h,i));return new Ls(n,this._parents,t,i)};const{initializeDescriptionRoot:$s,setAccessibilityController:Cs,initializeElementAccess:Os,setElementFocusHandler:Is,setElementAccessID:zs,setAccessChartCounts:_s,hideNonessentialGroups:Hs,setAccessTitle:Ps,setAccessSubtitle:qs,setAccessLongDescription:Rs,setAccessExecutiveSummary:Xs,setAccessPurpose:Fs,setAccessContext:js,setAccessStatistics:Gs,setAccessStructure:Vs,setAccessAnnotation:Ys,retainAccessFocus:Ks,checkAccessFocus:Bs,setElementInteractionAccessState:Us,setAccessibilityDescriptionWidth:Zs,roundTo:Js,resolveLabelCollision:Qs,transitionEndAll:tn,annotate:sn,checkClicked:nn,checkInteraction:rn,convertVisaColor:en,createTextStrokeFilter:hn,drawTooltip:an,findTagLevel:on,formatDataLabel:un,getColors:cn,getPadding:ln,initTooltipStyle:fn,overrideTitleTooltip:dn,scopeDataKeys:vn,chartAccessors:pn,sankey:yn,sankeyCenter:wn,sankeyJustify:mn,sankeyLeft:gn,sankeyLinkHorizontal:bn,sankeyRight:Mn,prepareRenderChange:kn}=r,xn=class{constructor(s){t(this,s),this.mainTitle=Dt.mainTitle,this.subTitle=Dt.subTitle,this.height=Dt.height,this.width=Dt.width,this.highestHeadingLevel=Dt.highestHeadingLevel,this.margin=Dt.margin,this.padding=Dt.padding,this.sourceAccessor=Dt.sourceAccessor,this.targetAccessor=Dt.targetAccessor,this.valueAccessor=Dt.valueAccessor,this.groupAccessor=Dt.groupAccessor,this.nodeIDAccessor=Dt.nodeIDAccessor,this.nodeConfig=Dt.nodeConfig,this.linkConfig=Dt.linkConfig,this.colorPalette=Dt.colorPalette,this.hoverStyle=Dt.hoverStyle,this.clickStyle=Dt.clickStyle,this.cursor=Dt.cursor,this.hoverOpacity=Dt.hoverOpacity,this.animationConfig=Dt.animationConfig,this.dataLabel=Dt.dataLabel,this.showTooltip=Dt.showTooltip,this.tooltipLabel=Dt.tooltipLabel,this.accessibility=Dt.accessibility,this.annotations=Dt.annotations,this.suppressEvents=Dt.suppressEvents,this.clickHighlight=Dt.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.innerInteractionKeys=[],this.topLevel="h2",this.bottomLevel="p",this.sourceLinksString="sourceLinks",this.targetLinksString="targetLinks",this.shouldSetDimensions=!1,this.shouldUpdateData=!1,this.shouldSetColors=!1,this.shouldSetTagLevels=!1,this.shouldRedrawWrapper=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetSelectionClass=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetGlobalSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldDrawInteractionState=!1,this.shouldEnterUpdateExit=!1,this.shouldUpdateNodeGeometries=!1,this.shouldUpdateLinkGeometries=!1,this.shouldDrawNodeLabels=!1,this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}linkDataWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}nodeDataWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}idWatcher(t,i){this.chartID=t||"alluvial-diagram-"+_t(),this.alluvialDiagramEl.id=this.chartID}mainTitleWatcher(t,i){}subTitleWatcher(t,i){}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}sourceAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}targetAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}valueAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}groupAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}nodeIDAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}nodeConfigWatcher(t,i){this.shouldEnterUpdateExit=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}linkConfigWatcher(t,i){this.shouldEnterUpdateExit=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}colorPaletteWatcher(t,i){}colorsWatcher(t,i){}clickStyleWatcher(t,i){}hoverStyleWatcher(t,i){}cursorWatcher(t,i){}hoverOpacityWatcher(t,i){}dataLabelWatcher(t,i){this.shouldDrawNodeLabels=!0,this.shouldDrawInteractionState=!0}tooltipLabelWatcher(t,i){}showTooltipWatcher(t,i){}accessibilityWatcher(t,i){(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0)}annotationsWatcher(t,i){this.shouldSetAnnotationAccessibility=!0}clickWatcher(t,i){this.shouldDrawInteractionState=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0}interactionWatcher(t,i){}suppressWatcher(t,i){}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"alluvial-diagram-"+_t(),this.alluvialDiagramEl.id=this.chartID,this.setTagLevels(),this.setDimensions(),this.prepareData(),this.validateIdAccessor(),this.validateLabelText(),this.validateLinkFillMode(),this.validateNodeAlignment(),this.validateInteractionKeys(),this.validateLinkGroups(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTooltipInitialStyle(),this.setNodesDimensions(),this.callSankeyGenerator(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterLinkGeometries(),this.updateLinkGeometries(),this.exitLinkGeometries(),this.enterNodeGeometries(),this.updateNodeGeometries(),this.exitNodeGeometries(),this.enterNodeLabels(),this.updateNodeLabels(),this.exitNodeLabels(),this.drawNodeGeometries(),this.drawLinkGeometries(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.setGroupAccessibilityID(),this.setChartCountAccessibility(),this.setSelectedClass(),this.drawNodeLabels(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.duration=750,this.defaults=!1,Hs(this.root.node(),null),t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.reSetRoot(),this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.setNodesDimensions(),this.callSankeyGenerator(),this.setGlobalSelections(),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldEnterUpdateExit&&(this.enterLinkGeometries(),this.updateLinkGeometries(),this.exitLinkGeometries(),this.enterNodeGeometries(),this.updateNodeGeometries(),this.exitNodeGeometries(),this.enterNodeLabels(),this.updateNodeLabels(),this.exitNodeLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateNodeGeometries&&(this.drawNodeGeometries(),this.shouldUpdateNodeGeometries=!1),this.shouldUpdateLinkGeometries&&(this.drawLinkGeometries(),this.shouldUpdateLinkGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldDrawNodeLabels&&(this.drawNodeLabels(),this.shouldDrawNodeLabels=!1),this.drawAnnotations(),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),t("component did update")})}setDimensions(){this.padding="string"==typeof this.padding?ln(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}prepareData(){this.nodeList=[],this.linkList=[],this.linkData.forEach((t,i)=>{const s={source:t[this.sourceAccessor],target:t[this.targetAccessor],value:t[this.valueAccessor],data:t};s[this.groupAccessor]=t[this.groupAccessor],this.linkList[i]=s}),this.nodeData&&this.nodeData.length>1?this.nodeList=this.nodeData:this.createNodeList()}createNodeList(){this.nodeList=[],this.linkData.map(t=>{this.nodeList.some(i=>i.id===t[this.sourceAccessor])||this.nodeList.push({id:t[this.sourceAccessor]}),this.nodeList.some(i=>i.id===t[this.targetAccessor])||this.nodeList.push({id:t[this.targetAccessor]})})}validateLabelText(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:"value"}validateIdAccessor(){this.innerIDAccessor=this.nodeData&&this.nodeData.length>1&&this.nodeList[0][this.nodeIDAccessor]?this.nodeIDAccessor:"id"}validateLinkFillMode(){this.innerLinkFillMode=this.groupAccessor&&"group"===this.linkConfig.fillMode?"group":"source"===this.linkConfig.fillMode?"source":"target"===this.linkConfig.fillMode?"target":"path"===this.linkConfig.fillMode?"path":"none"}validateNodeAlignment(){this.innerNodeAlignment="right"===this.nodeConfig.alignment?Mn:"center"===this.nodeConfig.alignment?wn:"justify"===this.nodeConfig.alignment?mn:gn}validateInteractionKeys(){this.interactionKeysWithObjs=[],this.innerInteractionKeys=[],this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.sourceAccessor,this.targetAccessor]}validateLinkGroups(){this.groupKeys=[],this.groupAccessor&&(this.groupKeys=this.linkData.map(t=>t[this.groupAccessor]).filter((t,i,s)=>s.indexOf(t)===i))}setNodesDimensions(){this.alluvialProperties=yn(this.nodeConfig.compare,this.linkConfig.visible).nodeId(t=>t[this.innerIDAccessor]).nodeWidth(this.nodeConfig.width).nodePadding(this.nodeConfig.padding).nodeAlign(this.innerNodeAlignment).nodeSort(null).size([this.innerPaddedWidth,this.innerPaddedHeight])}callSankeyGenerator(){this.preppedData=((t,i)=>this.alluvialProperties({nodes:this.nodeList.map(t=>Object.assign({},t)),links:i.map(t=>Object.assign({},t))}))(0,this.linkList),this.nodeCount=pt(this.preppedData.nodes,t=>t.layer)}renderRootElements(){this.svg=vt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").append("svg").attr("width",this.width).attr("height",this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.nodeG=this.rootG.append("g").attr("class","alluvial-node-group"),this.linkG=this.rootG.append("g").attr("class","alluvial-link-group"),this.labelG=this.rootG.append("g").attr("class","alluvial-dataLabel-group"),this.tooltipG=vt(this.alluvialDiagramEl).select(".alluvial-tooltip")}reSetRoot(){kn({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:Tt}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),kn({selection:this.root,duration:this.duration,namespace:"root_reset",easing:Tt}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),kn({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:Tt}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),Zs(this.chartID,this.width)}setGlobalSelections(){this.currentNodeLayers&&(this.previousNodeLayers=this.currentNodeLayers);const t=this.nodeG.selectAll(".node-wrapper").data(this.preppedData.nodes,t=>t[this.innerIDAccessor]);if(this.enterNodes=t.enter().append("g").attr("class","node-wrapper").attr("data-offset-group","true"),this.enterNodes.append("rect").attr("class","alluvial-node"),this.exitNodes=t.exit(),this.updateNodes=t.merge(this.enterNodes),this.updateNodes.selectAll(".alluvial-node").data(t=>[t]),this.currentNodeLayers=this.preppedData.nodes,this.previousNodeLayers){const t=this.currentNodeLayers.filter(t=>this.previousNodeLayers.map(t=>t[this.innerIDAccessor]).includes(t.id));this.previousMaxNodeLayer=pt(t,t=>t.layer),this.previousMinNodeLayer=yt(t,t=>t.layer);const i=this.previousNodeLayers.filter(t=>this.currentNodeLayers.map(t=>t[this.innerIDAccessor]).includes(t.id));this.currentMaxNodeLayer=pt(i,t=>t.layer),this.currentMinNodeLayer=yt(i,t=>t.layer)}if("source"===this.innerLinkFillMode||"target"===this.innerLinkFillMode){this.updateNodes.each((t,i,s)=>{Os(s[i])});const t=this.preppedData.nodes,i=this.linkG.selectAll(".alluvial-link-wrapper").data(t,t=>t[this.innerIDAccessor]);this.enterLinkGroups=i.enter().append("g"),this.exitLinkGroups=i.exit().remove(),this.updateLinkGroups=i.merge(this.enterLinkGroups);const s=this.updateLinkGroups.selectAll(".alluvial-link").data(t=>t.sourceLinks,t=>t.data[this.sourceAccessor]+t.data[this.targetAccessor]);this.enterLinks=s.enter().append("path"),this.exitLinks=s.exit(),this.updateLinks=s.merge(this.enterLinks).attr("data-offset-element",this.innerLinkFillMode)}else{this.updateNodes.attr("tabindex",null);const t=this.linkG.selectAll(".alluvial-link").data(this.preppedData.links,t=>t.data[this.sourceAccessor]+t.data[this.targetAccessor]);this.enterLinks=t.enter().append("path"),this.exitLinks=t.exit(),this.updateLinks=t.merge(this.enterLinks).attr("data-offset-element",null)}const i=this.labelG.selectAll("text").data(this.preppedData.nodes,t=>t[this.innerIDAccessor]);this.enteringLabels=i.enter().append("text"),this.exitingLabels=i.exit(),this.updatingLabels=i.merge(this.enteringLabels)}setTestingAttributes(){this.unitTest?(vt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid","chart-container"),vt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid","main-title"),vt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.updateNodes.attr("data-testid","node").attr("data-id",t=>`node-${t[this.innerIDAccessor]}`),"source"!==this.innerLinkFillMode&&"target"!==this.innerLinkFillMode||this.updateLinkGroups.attr("data-testid","alluvial-link-group").attr("data-id",t=>`link-group-${t[this.innerIDAccessor]}`),this.updateLinks.attr("data-testid","link").attr("data-id",t=>`link-${t.source[this.innerIDAccessor]}-${t.target[this.innerIDAccessor]}`),this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",t=>`dataLabel-${t[this.innerIDAccessor]}`)):(vt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid",null),vt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid",null),vt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.updateNodes.attr("data-testid",null).attr("data-id",null),"source"!==this.innerLinkFillMode&&"target"!==this.innerLinkFillMode||this.updateLinkGroups.attr("data-testid",null).attr("data-id",null),this.updateLinks.attr("data-testid",null).attr("data-id",null),this.updatingLabels.attr("data-testid",null).attr("data-id",null))}newColumnInterpolationPosition(){return function(t){var i=Wt,s=Lt,n=xt,r=At,e=null;function h(){var h,a=Nt.call(arguments),o=i.apply(this,a),u=s.apply(this,a);if(e||(e=h=Mt()),t(e,+n.apply(this,(a[0]=o,a)),+r.apply(this,a),+n.apply(this,(a[0]=u,a)),+r.apply(this,a)),h)return e=null,h+""||null}return h.source=function(t){return arguments.length?(i=t,h):i},h.target=function(t){return arguments.length?(s=t,h):s},h.x=function(t){return arguments.length?(n="function"==typeof t?t:kt(+t),h):n},h.y=function(t){return arguments.length?(r="function"==typeof t?t:kt(+t),h):r},h.context=function(t){return arguments.length?(e=null==t?null:t,h):e},h}(St).source(t=>t.target.layer<=this.previousMinNodeLayer?[t.source.x0,t.y0]:t.source.layer>=this.previousMaxNodeLayer?[t.target.x1,t.y0]:[t.source.x1,t.y0]).target(t=>t.target.layer<=this.previousMinNodeLayer?[t.source.x0,t.y0]:t.source.layer>=this.previousMaxNodeLayer?[t.target.x1,t.y0]:[t.target.x0,t.y1])}enterLinkGeometries(){this.enterLinks.interrupt();const t=this.linkConfig.visible?this.linkConfig.opacity:0;"source"!==this.innerLinkFillMode&&"target"!==this.innerLinkFillMode||this.enterLinkGroups.attr("class","alluvial-link-wrapper"),this.enterLinks.attr("class","alluvial-link").classed("entering",!0).attr("d",this.newColumnInterpolationPosition()),this.enterLinks.attr("cursor",this.suppressEvents?null:this.cursor).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("stroke-dasharray",(t,i,s)=>(t.linelength=s[i].getTotalLength()-2,t.target.layer<=this.previousMinNodeLayer||t.source.layer>=this.previousMaxNodeLayer?"":t.linelength+" "+t.linelength)).attr("stroke-dashoffset",t=>t.target.layer<=this.previousMinNodeLayer||t.source.layer>=this.previousMaxNodeLayer?0:t.linelength).attr("stroke-width",t=>t.target.layer<=this.previousMinNodeLayer||t.source.layer>=this.previousMaxNodeLayer?Math.max(1,t.width):.1).attr("stroke-opacity",t).transition("enter").duration(this.duration).ease(Tt).attr("d",bn()).attr("stroke-width",t=>t.target.layer<=this.previousMinNodeLayer||t.source.layer>=this.previousMaxNodeLayer?Math.max(1,t.width):1).attr("stroke-dashoffset",0)}updateLinkGeometries(){this.updateLinks.interrupt();const t=this.linkConfig.visible?this.linkConfig.opacity:0;this.updateLinks.transition("opacity").ease(Tt).duration(this.duration).attr("stroke-opacity",i=>rn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}exitLinkGeometries(){this.exitLinks.interrupt();const t=this.linkConfig.visible?this.linkConfig.opacity:0;this.exitLinks.attr("stroke-dasharray",(t,i,s)=>(t.linelength=s[i].getTotalLength(),t.target.layer<=this.previousMinNodeLayer||t.source.layer>=this.previousMaxNodeLayer?"":t.linelength+" "+t.linelength)).transition("exit").ease(Tt).duration(this.duration).attr("d",this.newColumnInterpolationPosition()).attr("stroke-opacity",t).attr("stroke-dashoffset",t=>t.linelength).attr("stroke-width",t=>t.target.layer<=this.currentMinNodeLayer||t.source.layer>=this.currentMaxNodeLayer?Math.max(1,t.width):.1).remove()}drawLinkGeometries(){this.removeTemporaryClickedLinks(this.svg.node()),"source"!==this.innerLinkFillMode&&"target"!==this.innerLinkFillMode||this.updateLinkGroups.classed("link-group offset-target",!0),this.updateLinks.attr("stroke",t=>"group"===this.innerLinkFillMode?this.colorArr[this.groupKeys.indexOf(t[this.groupAccessor])]:"none"===this.innerLinkFillMode?this.colorArr[0]||"#E4E4E4":"path"===this.innerLinkFillMode?this.colorArr[t.index]:"source"===this.innerLinkFillMode?this.colorArr[t.source.index]:this.colorArr[t.target.index]).attr("fill","none").transition("update").duration(this.duration).ease(Tt).attr("d",bn()).attr("stroke-width",t=>Math.max(1,t.width)).call(tn,()=>{this.removeTemporaryClickedLinks(this.svg.node()),this.updateLinks.classed("entering",!1).attr("d",bn()).attr("stroke-dasharray",""),this.updateLinks.each((t,i,s)=>{this.clickHighlight&&this.clickHighlight.length>0&&nn(t.data,this.clickHighlight,this.innerInteractionKeys)&&this.drawDuplicateClickedLink(s[i],t)})}),this.updateLinks.transition("accessibilityAfterExit").duration(this.duration).ease(Tt).call(tn,()=>{const t=Bs(this.rootG.node());this.exitLinks.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),Ks({parentGNode:this.rootG.node(),focusDidExist:t})})}drawDuplicateClickedLink(t,i){const s=t.parentNode,n=t.cloneNode();if(vt(n).classed("alluvial-link",!1).classed("vcl-accessibility-focus-highlight vcl-accessibility-focus-hover",!0).classed("duplicated-clicked-link",!0).classed("entering",!1).data([i.data]).attr("focusable",!1).attr("aria-label",null).attr("aria-hidden",!0).attr("role",null).style("pointer-events","none").attr("tabindex",null),"source"===this.innerLinkFillMode||"target"===this.innerLinkFillMode){const t=vt(s.parentNode).selectAll(".link-group")._groups[0];t[t.length-1].appendChild(n)}else s.appendChild(n)}removeTemporaryClickedLinks(t){vt(t).selectAll(".duplicated-clicked-link").remove()}enterNodeGeometries(){this.enterNodes.interrupt(),this.defaults||this.enterNodes.classed("entering",!0),this.enterNodes.select(".alluvial-node").attr("fill",(t,i)=>this.nodeConfig.fill?this.colorArr[i]||this.colorArr[0]:"#E4E4E4").attr("stroke","#717171").attr("stroke-width","1px").attr("x",t=>t.x0).attr("y",t=>t.y0).attr("height",t=>t.y1-t.y0).attr("opacity",0).attr("width",t=>t.x1-t.x0)}updateNodeGeometries(){this.updateNodes.interrupt(),this.updateNodes.select(".alluvial-node").transition("node_opacity").duration((t,i,s)=>vt(s[i].parentNode).classed("entering")?this.duration/3:0).delay((t,i,s)=>vt(s[i].parentNode).classed("entering")?this.duration/1.2:0).ease(Tt).attr("opacity",1)}exitNodeGeometries(){this.exitNodes.interrupt(),this.exitNodes.select(".alluvial-node").transition("exit").ease(Tt).duration(this.duration/3).attr("opacity",0).attr("width",0).select((function(){return this.parentNode})).remove()}drawNodeGeometries(){this.updateNodes.select(".alluvial-node").transition("update_nodes").duration((t,i,s)=>vt(s[i].parentNode).classed("entering")?this.duration/3:this.duration).delay((t,i,s)=>vt(s[i].parentNode).classed("entering")?this.duration/1.2:0).ease(Tt).attr("x",t=>t.x0).attr("y",t=>t.y0).attr("height",t=>t.y1-t.y0).attr("width",t=>t.x1-t.x0).attr("opacity",1).call(tn,()=>{this.updateNodes.classed("entering",!1)})}enterNodeLabels(){this.enteringLabels.interrupt();const t=this.dataLabel.visible?1:0,i=this.dataLabel.visible?Number.EPSILON:0;this.widthAllNodesNoLinks=this.nodeCount*this.nodeConfig.width+this.nodeCount*this.nodeConfig.width,this.noLinksLeftPadding=(this.innerPaddedWidth-this.widthAllNodesNoLinks)/2,this.enteringLabels.attr("class","alluvial-diagram-dataLabel entering").attr("opacity",s=>{if(this.linkConfig.visible){let n=!0;return s[this.sourceLinksString].length&&(n=s[this.sourceLinksString].some(i=>rn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),s[this.targetLinksString].length&&(n=s[this.targetLinksString].some(i=>rn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),n?i:0}return 0===s.layer||s.layer===this.nodeCount?i:0}).attr("x",t=>this.linkConfig.visible?"outside"===this.dataLabel.placement?t.x0<this.innerPaddedWidth/2?t.x0:t.x1:t.x0<this.innerPaddedWidth/2?t.x1:t.x0:t.x0<this.innerPaddedWidth/2?this.noLinksLeftPadding:this.noLinksLeftPadding+this.widthAllNodesNoLinks+this.nodeConfig.width).attr("y",t=>(t.y1+t.y0)/2).attr("dx",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"0.5em":"-0.5em":t.x0<this.innerPaddedWidth/2?"-0.5em":"0.5em").attr("dy","0.4em").attr("text-anchor",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"start":"end":t.x0<this.innerPaddedWidth/2?"end":"start")}updateNodeLabels(){this.updatingLabels.interrupt("label_opacity");const t=this.dataLabel.visible?1:0;this.updatingLabels.transition("label_opacity").ease(Tt).duration((t,i,s)=>vt(s[i]).classed("entering")?this.duration/3:0).delay((t,i,s)=>vt(s[i]).classed("entering")?this.duration/1.2:0).attr("opacity",i=>{if(this.linkConfig.visible){let s=!0;return i[this.sourceLinksString].length&&(s=i[this.sourceLinksString].some(i=>rn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),i[this.targetLinksString].length&&(s=i[this.targetLinksString].some(i=>rn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),s?1:0}return 0===i.layer||i.layer===this.nodeCount?t:0})}exitNodeLabels(){this.exitingLabels.interrupt(),this.exitingLabels.transition("exit_labels").duration(this.duration/3).ease(Tt).attr("opacity",0).remove()}addStrokeUnder(){const t=hn({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.updatingLabels.attr("filter",t)}drawNodeLabels(){const t="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;this.widthAllNodesNoLinks=this.nodeCount*this.nodeConfig.width+this.nodeCount*this.nodeConfig.width,this.noLinksLeftPadding=(this.innerPaddedWidth-this.widthAllNodesNoLinks)/2;const i=this.updatingLabels.text(t=>this.dataLabel.format?un(t,this.innerLabelAccessor,this.dataLabel.format):t[this.innerLabelAccessor]).attr("data-x",t=>this.linkConfig.visible?"outside"===this.dataLabel.placement?t.x0<this.innerPaddedWidth/2?t.x0:t.x1:t.x0<this.innerPaddedWidth/2?t.x1:t.x0:t.x0<this.innerPaddedWidth/2?this.noLinksLeftPadding:this.noLinksLeftPadding+this.widthAllNodesNoLinks+this.nodeConfig.width).attr("data-y",t=>(t.y1+t.y0)/2).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-use-dx",t).attr("data-use-dy",t).attr("dx",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"0.5em":"-0.5em":t.x0<this.innerPaddedWidth/2?"-0.5em":"0.5em").attr("dy","0.4em").transition("update_labels").duration((t,i,s)=>vt(s[i]).classed("entering")?this.duration/3:this.duration).delay((t,i,s)=>vt(s[i]).classed("entering")?this.duration/1.2:0).ease(Tt);if(this.dataLabel.visible&&("auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly)){const s=this.dataLabel&&this.dataLabel.collisionPlacement,n=this.updateNodes.select(".alluvial-node").attr("data-x",t=>t.x0).attr("data-y",t=>t.y0).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-height",t=>t.y1-t.y0).attr("data-width",t=>t.x1-t.x0).each((i,n,r)=>{if(!t){const t=r[n],e=t.parentNode,h="alluvial-node-collision-clone",a=t.cloneNode();vt(a).classed("alluvial-node",!1).classed(h,!0).classed("entering",!1).data([i]).attr("focusable",!1).attr("aria-label",null).attr("aria-hidden",!0).attr("role",null).style("pointer-events","none").style("visibility","hidden").attr("tabindex",null).attr("data-x","all"===s?i.x0:"outside"===s?i.x0<this.innerPaddedWidth/2?i.x0:i.x1:i.x0<this.innerPaddedWidth/2?i.x1:i.x0).attr("data-width","all"===s?i.x1-i.x0:1),e.appendChild(a)}}),r=this.updateNodes.select(".alluvial-node-collision-clone");this.bitmaps=Qs({labelSelection:i,avoidMarks:t?[n]:[n,r],validPositions:t?["middle"]:["left","right"],offsets:t?[1]:[4,4],accessors:[this.innerIDAccessor],size:[Js(this.width,0),Js(this.height,0)],hideOnly:this.dataLabel.visible&&t}),r.remove(),t&&i.attr("text-anchor",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"start":"end":t.x0<this.innerPaddedWidth/2?"end":"start").attr("x",t=>this.linkConfig.visible?"outside"===this.dataLabel.placement?t.x0<this.innerPaddedWidth/2?t.x0:t.x1:t.x0<this.innerPaddedWidth/2?t.x1:t.x0:t.x0<this.innerPaddedWidth/2?this.noLinksLeftPadding:this.noLinksLeftPadding+this.widthAllNodesNoLinks+this.nodeConfig.width).attr("y",t=>(t.y1+t.y0)/2).attr("dx",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"0.5em":"-0.5em":t.x0<this.innerPaddedWidth/2?"-0.5em":"0.5em").attr("dy","0.4em")}else i.attr("text-anchor",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"start":"end":t.x0<this.innerPaddedWidth/2?"end":"start").attr("x",t=>this.linkConfig.visible?"outside"===this.dataLabel.placement?t.x0<this.innerPaddedWidth/2?t.x0:t.x1:t.x0<this.innerPaddedWidth/2?t.x1:t.x0:t.x0<this.innerPaddedWidth/2?this.noLinksLeftPadding:this.noLinksLeftPadding+this.widthAllNodesNoLinks+this.nodeConfig.width).attr("y",t=>(t.y1+t.y0)/2).attr("dx",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"0.5em":"-0.5em":t.x0<this.innerPaddedWidth/2?"-0.5em":"0.5em").attr("dy","0.4em");i.call(tn,()=>{this.updatingLabels.classed("entering",!1),this.addStrokeUnder()})}updateInteractionState(){this.removeTemporaryClickedLinks(this.svg.node()),this.updateLinks.interrupt("opacity"),this.updatingLabels.interrupt("label_opacity");const t=this.linkConfig.visible?this.linkConfig.opacity:0,i=this.dataLabel.visible?1:0,s=this.dataLabel.visible&&("auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly),n="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;if(this.updateLinks.attr("stroke-opacity",i=>rn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)),this.updateLinks.each((t,i,s)=>{this.clickHighlight&&this.clickHighlight.length>0&&nn(t.data,this.clickHighlight,this.innerInteractionKeys)&&this.drawDuplicateClickedLink(s[i],t)}),this.updatingLabels.attr("opacity",(t,n,r)=>{const e=+vt(r[n]).attr("opacity"),h=vt(r[n]).style("visibility");let a;if(this.linkConfig.visible){let s=!0;t[this.sourceLinksString].length&&(s=t[this.sourceLinksString].some(t=>rn(t.data,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),t[this.targetLinksString].length&&(s=t[this.targetLinksString].some(t=>rn(t.data,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),a=s?i:0}else a=0===t.layer||t.layer===this.nodeCount?i:0;return(1===a&&"hidden"===h||e!==a)&&s&&(1===a?vt(r[n]).classed("collision-added",!0).style("visibility",null):vt(r[n]).classed("collision-removed",!0)),a}),s){const t=this.updatingLabels.filter((t,i,s)=>vt(s[i]).classed("collision-added")),i=this.updatingLabels.filter((t,i,s)=>vt(s[i]).classed("collision-removed")).attr("data-use-dx",n).attr("data-use-dy",n);if(i.size()>0&&(this.bitmaps=Qs({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[Js(this.width,0),Js(this.height,0)],hideOnly:!1,removeOnly:!0}),i.classed("collision-removed",!1)),t.size()>0){const i=this.dataLabel&&this.dataLabel.collisionPlacement,s=this.updateNodes.select(".alluvial-node").attr("data-x",t=>t.x0).attr("data-y",t=>t.y0).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-height",t=>t.y1-t.y0).attr("data-width",t=>t.x1-t.x0).each((t,s,r)=>{if(!n){const n=r[s],e=n.parentNode,h="alluvial-node-collision-clone",a=n.cloneNode();vt(a).classed("alluvial-node",!1).classed(h,!0).classed("entering",!1).data([t]).attr("focusable",!1).attr("aria-label",null).attr("aria-hidden",!0).attr("role",null).style("pointer-events","none").style("visibility","hidden").attr("tabindex",null).attr("data-x","all"===i?t.x0:"outside"===i?t.x0<this.innerPaddedWidth/2?t.x0:t.x1:t.x0<this.innerPaddedWidth/2?t.x1:t.x0).attr("data-width","all"===i?t.x1-t.x0:1),e.appendChild(a)}}),r=this.updateNodes.select(".alluvial-node-collision-clone");this.bitmaps=Qs({labelSelection:t,bitmaps:this.bitmaps,avoidMarks:n?[s]:[s,r],validPositions:n?["middle"]:["left","right"],offsets:n?[1]:[4,4],accessors:[this.innerIDAccessor],size:[Js(this.width,0),Js(this.height,0)],hideOnly:this.dataLabel.visible&&n,suppressMarkDraw:!0}),r.remove(),n&&t.attr("text-anchor",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"start":"end":t.x0<this.innerPaddedWidth/2?"end":"start").attr("x",t=>this.linkConfig.visible?"outside"===this.dataLabel.placement?t.x0<this.innerPaddedWidth/2?t.x0:t.x1:t.x0<this.innerPaddedWidth/2?t.x1:t.x0:t.x0<this.innerPaddedWidth/2?this.noLinksLeftPadding:this.noLinksLeftPadding+this.widthAllNodesNoLinks+this.nodeConfig.width).attr("y",t=>(t.y1+t.y0)/2).attr("dx",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"0.5em":"-0.5em":t.x0<this.innerPaddedWidth/2?"-0.5em":"0.5em").attr("dy","0.4em"),t.classed("collision-added",!1)}}}drawAnnotations(){const t=this.preppedData,i=[];this.annotations.forEach(s=>{const n=Object.assign({},s);let r=s.data;if(t&&r)if("node"===n.positionType&&n.data.hasOwnProperty(this.innerIDAccessor)){const i=t.nodes.findIndex(t=>t[this.innerIDAccessor]===n.data[this.innerIDAccessor]);r=t.nodes[i]}else if("source"===n.positionType||"target"===n.positionType&&n.data.hasOwnProperty(this.sourceAccessor)&&n.data.hasOwnProperty(this.targetAccessor)){const i=t.links.findIndex(t=>t.data[this.sourceAccessor]===n.data[this.sourceAccessor]&&t.data[this.targetAccessor]===n.data[this.targetAccessor]);r=t.links[i]}n.positionType&&r&&("target"===n.positionType&&r.target?(n.x=r.target.x0,n.y=r.y1):"source"===n.positionType&&r.source?(n.x=r.source.x1,n.y=r.y0):"node"===n.positionType&&(n.x=r.x1,n.y=(r.y1+r.y0)/2)),delete n.data,i.push(n)}),sn({source:this.rootG.node(),data:i,ignoreScales:!0,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setColors(){this.colorArr=this.colors?en(this.colors):cn(this.colorPalette,this.nodeList.length)}setTagLevels(){this.topLevel=on(this.highestHeadingLevel),this.bottomLevel=on(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){$s({rootEle:this.alluvialDiagramEl,title:this.accessibility.title||this.mainTitle,chartTag:"alluvial-diagram",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){const t=vn(this,pn,"alluvial-diagram");Cs({node:this.svg.node(),chartTag:"alluvial-diagram",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"link",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupAccessor:this.innerIDAccessor,groupKeys:["value"],groupName:"node"})}setGeometryAccessibilityAttributes(){this.updateLinks.each((t,i,s)=>{Os(s[i])})}setGeometryAriaLabels(){const t=vn(this,pn,"alluvial-diagram");this.updateLinks.each((i,s,n)=>{Is({node:n[s],geomType:"link",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"node",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),zs({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateNodes.each((t,i,s)=>{zs({node:s[i],uniqueID:this.chartID})})}setChartCountAccessibility(){_s({rootEle:this.alluvialDiagramEl,parentGNode:this.linkG.node(),chartTag:"alluvial-diagram",geomType:"link",groupName:"node"})}setSelectedClass(){this.updateLinks.classed("highlight",t=>{const i=rn(t.data,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return!(!this.clickHighlight||!this.clickHighlight.length)&&i}).each((t,i,s)=>{let n=rn(t.data,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);n=!(!this.clickHighlight||!this.clickHighlight.length)&&n,Us(s[i],n,this.accessibility.elementsAreInterface)})}setChartAccessibilityTitle(){Ps(this.alluvialDiagramEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){qs(this.alluvialDiagramEl,this.subTitle)}setChartAccessibilityLongDescription(){Rs(this.alluvialDiagramEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){Xs(this.alluvialDiagramEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){Fs(this.alluvialDiagramEl,this.accessibility.purpose)}setChartAccessibilityContext(){js(this.alluvialDiagramEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){Gs(this.alluvialDiagramEl,this.accessibility.statisticalNotes)}setChartAccessibilityStructureNotes(){Vs(this.alluvialDiagramEl,this.accessibility.structureNotes)}setAnnotationAccessibility(){Ys(this.alluvialDiagramEl,this.annotations)}onClickHandler(t){this.clickFunc.emit(t.data)}onHoverHandler(t){dn(this.chartID,!0),this.hoverFunc.emit(t.data),this.showTooltip&&this.eventsTooltip({data:t,evt:st,isToShow:!0})}onMouseOutHandler(){dn(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){fn(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){an({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,groupAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,ordinalAccessor:this.innerIDAccessor,chartType:"alluvial-diagram"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.setDimensions(),this.prepareData(),this.validateIdAccessor(),this.validateLabelText(),this.validateLinkFillMode(),this.validateInteractionKeys(),this.validateLinkGroups(),this.setColors(),s("div",null,s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"alluvial-main-title vcl-main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions alluvial-sub-title vcl-sub-title"},this.subTitle),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"link",groupName:"node",chartTag:"alluvial-diagram",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:"source"===this.innerLinkFillMode||"target"===this.innerLinkFillMode,cousinActionOverride:"on a link",cousinResultOverride:"source"===this.innerLinkFillMode||"target"===this.innerLinkFillMode?"Drill up to link's Source or Target node":"",disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-alluvial-container"}),s("div",{class:"alluvial-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}))))}init(){const t=Object.keys(Dt);let i=0;const s={hoverOpacity:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},linkConfig:Object.assign({exception:!1})};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:Dt[t[i]]}}get alluvialDiagramEl(){return n(this)}static get watchers(){return{linkData:["linkDataWatcher"],nodeData:["nodeDataWatcher"],uniqueID:["idWatcher"],mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],highestHeadingLevel:["headingWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],sourceAccessor:["sourceAccessorWatcher"],targetAccessor:["targetAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],nodeIDAccessor:["nodeIDAccessorWatcher"],nodeConfig:["nodeConfigWatcher"],linkConfig:["linkConfigWatcher"],colorPalette:["colorPaletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],cursor:["cursorWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],annotations:["annotationsWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}alluvial-diagram{cursor:default}alluvial-diagram .annotations{pointer-events:none}alluvial-diagram .annotations .handle{pointer-events:all}alluvial-diagram .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}alluvial-diagram .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}alluvial-diagram .hidden{display:none}alluvial-diagram .node rect{cursor:move}alluvial-diagram .node text{pointer-events:none;text-shadow:0 1px 0 #fff}alluvial-diagram .link{fill:none;stroke:#000;stroke-opacity:0.2}alluvial-diagram .link:hover{stroke-opacity:0.5}"}};var An="http://www.w3.org/1999/xhtml";const Nn={svg:"http://www.w3.org/2000/svg",xhtml:An,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wn(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),Nn.hasOwnProperty(i)?{space:Nn[i],local:t}:t}function Ln(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===An&&i.documentElement.namespaceURI===An?i.createElement(t):i.createElementNS(s,t)}}function Sn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Tn(t){var i=Wn(t);return(i.local?Sn:Ln)(i)}function En(){}function Dn(t){return null==t?En:function(){return this.querySelector(t)}}function $n(){return[]}function Cn(t){return null==t?$n:function(){return this.querySelectorAll(t)}}function On(t){return function(){return this.matches(t)}}function In(t){return new Array(t.length)}function zn(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function _n(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new zn(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function Hn(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new zn(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function Pn(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function qn(t){return function(){this.removeAttribute(t)}}function Rn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xn(t,i){return function(){this.setAttribute(t,i)}}function Fn(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function jn(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function Gn(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function Vn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Yn(t){return function(){this.style.removeProperty(t)}}function Kn(t,i,s){return function(){this.style.setProperty(t,i,s)}}function Bn(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function Un(t,i){return t.style.getPropertyValue(i)||Vn(t).getComputedStyle(t,null).getPropertyValue(i)}function Zn(t){return function(){delete this[t]}}function Jn(t,i){return function(){this[t]=i}}function Qn(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function tr(t){return t.trim().split(/^|\s+/)}function ir(t){return t.classList||new sr(t)}function sr(t){this._node=t,this._names=tr(t.getAttribute("class")||"")}function nr(t,i){for(var s=ir(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function rr(t,i){for(var s=ir(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function er(t){return function(){nr(this,t)}}function hr(t){return function(){rr(this,t)}}function ar(t,i){return function(){(i.apply(this,arguments)?nr:rr)(this,t)}}function or(){this.textContent=""}function ur(t){return function(){this.textContent=t}}function cr(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function lr(){this.innerHTML=""}function fr(t){return function(){this.innerHTML=t}}function dr(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function vr(){this.nextSibling&&this.parentNode.appendChild(this)}function pr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yr(){return null}function wr(){var t=this.parentNode;t&&t.removeChild(this)}function mr(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function gr(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}zn.prototype={constructor:zn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},sr.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var br={},Mr=null;function kr(t,i,s){return t=xr(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function xr(t,i,s){return function(n){var r=Mr;Mr=n;try{t.call(this,this.__data__,i,s)}finally{Mr=r}}}function Ar(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function Nr(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function Wr(t,i,s){var n=br.hasOwnProperty(t.type)?kr:xr;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function Lr(t,i,s){var n=Vn(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function Sr(t,i){return function(){return Lr(this,t,i)}}function Tr(t,i){return function(){return Lr(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(br={mouseenter:"mouseover",mouseleave:"mouseout"}));var Er=[null];function Dr(t,i){this._groups=t,this._parents=i}function $r(){return new Dr([[document.documentElement]],Er)}function Cr(t){return"string"==typeof t?new Dr([[document.querySelector(t)]],[document.documentElement]):new Dr([[t]],Er)}function Or(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}Dr.prototype=$r.prototype={constructor:Dr,select:function(t){"function"!=typeof t&&(t=Dn(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new Dr(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Cn(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new Dr(n,r)},filter:function(t){"function"!=typeof t&&(t=On(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new Dr(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?Hn:_n,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,m,g=0,b=0;g<v;++g)if(w=p[g]){for(g>=b&&(b=g+1);!(m=y[b])&&++b<v;);w._next=m||null}}return(h=new Dr(h,n))._enter=a,h._exit=o,h},enter:function(){return new Dr(this._enter||this._groups.map(In),this._parents)},exit:function(){return new Dr(this._exit||this._groups.map(In),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new Dr(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=Pn);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new Dr(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=Wn(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?Rn:qn:"function"==typeof i?s.local?Gn:jn:s.local?Fn:Xn)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?Yn:"function"==typeof i?Bn:Kn)(t,i,null==s?"":s)):Un(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?Zn:"function"==typeof i?Qn:Jn)(t,i)):this.node()[t]},classed:function(t,i){var s=tr(t+"");if(arguments.length<2){for(var n=ir(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?ar:i?er:hr)(s,i))},text:function(t){return arguments.length?this.each(null==t?or:("function"==typeof t?cr:ur)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?lr:("function"==typeof t?dr:fr)(t)):this.node().innerHTML},raise:function(){return this.each(vr)},lower:function(){return this.each(pr)},append:function(t){var i="function"==typeof t?t:Tn(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:Tn(t),n=null==i?yr:"function"==typeof i?i:Dn(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(wr)},clone:function(t){return this.select(t?gr:mr)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=Ar(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?Wr:Nr,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?Tr:Sr)(t,i))}};var Ir,zr,_r=(1===(Ir=Or).length&&(zr=Ir,Ir=function(t,i){return Or(zr(t),i)}),{left:function(t,i,s,n){for(null==s&&(s=0),null==n&&(n=t.length);s<n;){var r=s+n>>>1;Ir(t[r],i)<0?s=r+1:n=r}return s},right:function(t,i,s,n){for(null==s&&(s=0),null==n&&(n=t.length);s<n;){var r=s+n>>>1;Ir(t[r],i)>0?n=r:s=r+1}return s}}).right;function Hr(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var Pr=Math.sqrt(50),qr=Math.sqrt(10),Rr=Math.sqrt(2);function Xr(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=Pr?10:e>=qr?5:e>=Rr?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=Pr?10:e>=qr?5:e>=Rr?2:1)}function Fr(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&s>n&&(n=s);return n}function jr(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&n>s&&(n=s);return n}function Gr(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function Vr(){}function Yr(t,i){var s=new Vr;if(t instanceof Vr)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}function Kr(){return{}}function Br(t,i,s){t[i]=s}function Ur(){return Yr()}function Zr(t,i,s){t.set(i,s)}Vr.prototype=Yr.prototype={constructor:Vr,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var Jr=Array.prototype,Qr=Jr.map,te=Jr.slice,ie={name:"implicit"};function se(){var t=Yr(),i=[],s=[],n=ie;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==ie)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=Yr();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=te.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return se(i,s).unknown(n)},Gr.apply(r,arguments),r}function ne(){var t,i,s=se().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=Hr(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return ne(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},Gr.apply(c(),arguments)}function re(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function ee(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function he(){}var ae="\\s*([+-]?\\d+)\\s*",oe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ue="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ce=/^#([0-9a-f]{3,8})$/,le=new RegExp("^rgb\\("+[ae,ae,ae]+"\\)$"),fe=new RegExp("^rgb\\("+[ue,ue,ue]+"\\)$"),de=new RegExp("^rgba\\("+[ae,ae,ae,oe]+"\\)$"),ve=new RegExp("^rgba\\("+[ue,ue,ue,oe]+"\\)$"),pe=new RegExp("^hsl\\("+[oe,ue,ue]+"\\)$"),ye=new RegExp("^hsla\\("+[oe,ue,ue,oe]+"\\)$"),we={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function me(){return this.rgb().formatHex()}function ge(){return this.rgb().formatRgb()}function be(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=ce.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?Me(i):3===s?new Ne(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?ke(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?ke(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=le.exec(t))?new Ne(i[1],i[2],i[3],1):(i=fe.exec(t))?new Ne(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=de.exec(t))?ke(i[1],i[2],i[3],i[4]):(i=ve.exec(t))?ke(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=pe.exec(t))?Te(i[1],i[2]/100,i[3]/100,1):(i=ye.exec(t))?Te(i[1],i[2]/100,i[3]/100,i[4]):we.hasOwnProperty(t)?Me(we[t]):"transparent"===t?new Ne(NaN,NaN,NaN,0):null}function Me(t){return new Ne(t>>16&255,t>>8&255,255&t,1)}function ke(t,i,s,n){return n<=0&&(t=i=s=NaN),new Ne(t,i,s,n)}function xe(t){return t instanceof he||(t=be(t)),t?new Ne((t=t.rgb()).r,t.g,t.b,t.opacity):new Ne}function Ae(t,i,s,n){return 1===arguments.length?xe(t):new Ne(t,i,s,null==n?1:n)}function Ne(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function We(){return"#"+Se(this.r)+Se(this.g)+Se(this.b)}function Le(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Se(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Te(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new De(t,i,s,n)}function Ee(t){if(t instanceof De)return new De(t.h,t.s,t.l,t.opacity);if(t instanceof he||(t=be(t)),!t)return new De;if(t instanceof De)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new De(h,a,o,t.opacity)}function De(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function $e(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function Ce(t){return function(){return t}}function Oe(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):Ce(isNaN(t)?i:t)}re(he,be,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:me,formatHex:me,formatHsl:function(){return Ee(this).formatHsl()},formatRgb:ge,toString:ge}),re(Ne,Ae,ee(he,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ne(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ne(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:We,formatHex:We,formatRgb:Le,toString:Le})),re(De,(function(t,i,s,n){return 1===arguments.length?Ee(t):new De(t,i,s,null==n?1:n)}),ee(he,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new De(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new De(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new Ne($e(t>=240?t-240:t+120,r,n),$e(t,r,n),$e(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Ie=function t(i){var s=function(t){return 1==(t=+t)?Oe:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):Ce(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=Ae(t)).r,(i=Ae(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=Oe(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function ze(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function _e(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=je(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function He(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function Pe(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function qe(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=je(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var Re=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xe=new RegExp(Re.source,"g");function Fe(t,i){var s,n,r,e=Re.lastIndex=Xe.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=Re.exec(t))&&(n=Xe.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:Pe(s,n)})),e=Xe.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function je(t,i){var s,n=typeof i;return null==i||"boolean"===n?Ce(i):("number"===n?Pe:"string"===n?(s=be(i))?(i=s,Ie):Fe:i instanceof be?Ie:i instanceof Date?He:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?ze:Array.isArray(i)?_e:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?qe:Pe)(t,i)}function Ge(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var Ve,Ye,Ke,Be,Ue=180/Math.PI,Ze={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Je(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*Ue,skewX:Math.atan(o)*Ue,scaleX:h,scaleY:a}}function Qe(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:Pe(t,r)},{i:o-2,x:Pe(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:Pe(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:Pe(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:Pe(t,s)},{i:a-2,x:Pe(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var th=Qe((function(t){return"none"===t?Ze:(Ve||(Ve=document.createElement("DIV"),Ye=document.documentElement,Ke=document.defaultView),Ve.style.transform=t,t=Ke.getComputedStyle(Ye.appendChild(Ve),null).getPropertyValue("transform"),Ye.removeChild(Ve),Je(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),ih=Qe((function(t){return null==t?Ze:(Be||(Be=document.createElementNS("http://www.w3.org/2000/svg","g")),Be.setAttribute("transform",t),(t=Be.transform.baseVal.consolidate())?Je((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ze)}),", ",")",")");function sh(t){return+t}var nh=[0,1];function rh(t){return t}function eh(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function hh(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function ah(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=eh(r,n),e=s(h,e)):(n=eh(n,r),e=s(e,h)),function(t){return e(n(t))}}function oh(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=eh(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=_r(t,i,1,n)-1;return e[s](r[s](i))}}function uh(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ch(t,i){return function(){var t,i,s,n,r,e,h=nh,a=nh,o=je,u=rh;function c(){return n=Math.min(h.length,a.length)>2?oh:ah,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),Pe)))(s)))},l.domain=function(t){return arguments.length?(h=Qr.call(t,sh),u===rh||(u=hh(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=te.call(t),c()):a.slice()},l.rangeRound=function(t){return a=te.call(t),o=Ge,c()},l.clamp=function(t){return arguments.length?(u=t?hh(h):rh,l):u!==rh},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function lh(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function fh(t){return(t=lh(Math.abs(t)))?t[1]:NaN}var dh,vh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ph(t){if(!(i=vh.exec(t)))throw new Error("invalid format: "+t);var i;return new yh({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function yh(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function wh(t,i){var s=lh(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}ph.prototype=yh.prototype,yh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const mh={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return wh(100*t,i)},r:wh,s:function(t,i){var s=lh(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(dh=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+lh(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function gh(t){return t}var bh,Mh,kh,xh=Array.prototype.map,Ah=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Nh(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=Xr(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=function(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=Pr?r*=10:e>=qr?r*=5:e>=Rr&&(r*=2),i<t?-r:r}(t,i,s);switch((n=ph(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(fh(i)/3)))-fh(Math.abs(t)))}(e,h))||(n.precision=r),kh(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,fh(i)-fh(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-fh(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return Mh(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=Xr(a,o,s))>0?n=Xr(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=Xr(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function Wh(){var t=ch(rh,rh);return t.copy=function(){return uh(t,Wh())},Gr.apply(t,arguments),Nh(t)}function Lh(t){return 1-Math.sqrt(1-t*t)}bh=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?gh:(i=xh.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?gh:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(xh.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=ph(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,m=t.type;"n"===m?(p=!0,m="g"):mh[m]||(void 0===y&&(y=12),w=!0,m="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var g="$"===f?r:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?e:/[%p]/.test(m)?o:"",M=mh[m],k=/[defgprs%]/.test(m);function x(t){var r,e,o,f=g,x=b;if("c"===m)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===m?Ah[8+dh/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var N=f.length+t.length+x.length,W=N<v?new Array(v-N+1).join(i):"";switch(p&&d&&(t=n(W+t,W.length?v-x.length:1/0),W=""),s){case"<":t=f+t+x+W;break;case"=":t=f+W+t+x;break;case"^":t=W.slice(0,N=W.length>>1)+f+t+x+W.slice(N);break;default:t=W+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=ph(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(fh(i)/3))),r=Math.pow(10,-n),e=Ah[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Mh=bh.format,kh=bh.formatPrefix;const{propDefaultValues:Sh}=r;class Th{}Th.mainTitle="Clustered Bar Chart Title",Th.subTitle="This is the clustered bar chart's subtitle",Th.height=250,Th.width=675,Th.margin={top:4,bottom:4,right:4,left:4},Th.padding={top:20,bottom:50,right:50,left:50},Th.ordinalAccessor="label",Th.valueAccessor="value",Th.groupAccessor="category",Th.reverseOrder=!1,Th.layout=Sh.layout,Th.xAxis=Sh.xAxis,Th.yAxis=Sh.yAxis,Th.wrapLabel=Sh.wrapLabel,Th.colorPalette=Sh.colorPaletteCategorical,Th.hoverStyle=Sh.hoverStyle,Th.clickStyle=Sh.clickStyle,Th.referenceStyle=Sh.referenceStyle,Th.cursor=Sh.cursor,Th.roundedCorner=Sh.roundedCorner,Th.barIntervalRatio=Sh.barIntervalRatio,Th.groupIntervalRatio=Sh.barIntervalRatio,Th.hoverOpacity=Sh.hoverOpacity,Th.dataLabel=Sh.dataLabel,Th.legend=Sh.categoryLegend,Th.tooltipLabel=Sh.tooltipLabel,Th.showTooltip=Sh.showTooltip,Th.accessibility=Sh.accessibility,Th.animationConfig=Sh.animationConfig,Th.highestHeadingLevel=Sh.highestHeadingLevel,Th.referenceLines=Sh.referenceLines,Th.annotations=Sh.annotations,Th.clickHighlight=Sh.clickHighlight,Th.suppressEvents=Sh.suppressEvents;var Eh={value:function(){}};function Dh(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new $h(n)}function $h(t){this._=t}function Ch(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function Oh(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function Ih(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=Eh,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}$h.prototype=Dh.prototype={constructor:$h,on:function(t,i){var s,n=this._,r=Ch(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=Ih(n[s],t.name,i);else if(null==i)for(s in n)n[s]=Ih(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=Oh(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new $h(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var zh,_h,Hh=0,Ph=0,qh=0,Rh=0,Xh=0,Fh=0,jh="object"==typeof performance&&performance.now?performance:Date,Gh="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Vh(){return Xh||(Gh(Yh),Xh=jh.now()+Fh)}function Yh(){Xh=0}function Kh(){this._call=this._time=this._next=null}function Bh(t,i,s){var n=new Kh;return n.restart(t,i,s),n}function Uh(){Xh=(Rh=jh.now())+Fh,Hh=Ph=0;try{!function(){Vh(),++Hh;for(var t,i=zh;i;)(t=Xh-i._time)>=0&&i._call.call(null,t),i=i._next;--Hh}()}finally{Hh=0,function(){for(var t,i,s=zh,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:zh=i);_h=t,Jh(n)}(),Xh=0}}function Zh(){var t=jh.now(),i=t-Rh;i>1e3&&(Fh-=i,Rh=t)}function Jh(t){Hh||(Ph&&(Ph=clearTimeout(Ph)),t-Xh>24?(t<1/0&&(Ph=setTimeout(Uh,t-jh.now()-Fh)),qh&&(qh=clearInterval(qh))):(qh||(Rh=jh.now(),qh=setInterval(Zh,1e3)),Hh=1,Gh(Uh)))}function Qh(t,i,s){var n=new Kh;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}Kh.prototype=Bh.prototype={constructor:Kh,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?Vh():+s)+(null==i?0:+i),this._next||_h===this||(_h?_h._next=this:zh=this,_h=this),this._call=t,this._time=s,Jh()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jh())}};var ta=Dh("start","end","interrupt"),ia=[];function sa(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return Qh(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(Qh((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=Bh((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:ta,tween:ia,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function na(t,i){var s=ea(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function ra(t,i){var s=ea(t,i);if(s.state>2)throw new Error("too late; already started");return s}function ea(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function ha(t,i){var s,n;return function(){var r=ra(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function aa(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=ra(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function oa(t,i,s){var n=t._id;return t.each((function(){var t=ra(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return ea(t,n).value[i]}}function ua(t,i){var s;return("number"==typeof i?Pe:i instanceof be?Ie:(s=be(i))?(i=s,Ie):Fe)(t,i)}function ca(t){return function(){this.removeAttribute(t)}}function la(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fa(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function da(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function va(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function pa(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function ya(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function wa(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function ma(t,i){return function(){na(this,t).delay=+i.apply(this,arguments)}}function ga(t,i){return i=+i,function(){na(this,t).delay=i}}function ba(t,i){return function(){ra(this,t).duration=+i.apply(this,arguments)}}function Ma(t,i){return i=+i,function(){ra(this,t).duration=i}}function ka(t,i){if("function"!=typeof i)throw new Error;return function(){ra(this,t).ease=i}}function xa(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?na:ra;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var Aa=$r.prototype.constructor;function Na(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var Wa=0;function La(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function Sa(){return++Wa}var Ta=$r.prototype;La.prototype=function(t){return $r().transition(t)}.prototype={constructor:La,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=Dn(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,sa(l[f],i,s,f,l,ea(a,s)));return new La(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=Cn(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=ea(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&sa(f,i,s,p,d,v);e.push(d),h.push(o)}return new La(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=On(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new La(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new La(e,this._parents,this._name,this._id)},selection:function(){return new Aa(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=Sa(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=ea(h,i);sa(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new La(n,this._parents,t,s)},call:Ta.call,nodes:Ta.nodes,node:Ta.node,size:Ta.size,empty:Ta.empty,each:Ta.each,on:function(t,i){var s=this._id;return arguments.length<2?ea(this.node(),s).on.on(t):this.each(xa(s,t,i))},attr:function(t,i){var s=Wn(t),n="transform"===s?ih:ua;return this.attrTween(t,"function"==typeof i?(s.local?pa:va)(s,n,oa(this,"attr."+t,i)):null==i?(s.local?la:ca)(s):(s.local?da:fa)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=Wn(t);return this.tween(s,(n.local?ya:wa)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?th:ua;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=Un(this,t),h=(this.style.removeProperty(t),Un(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=Un(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=Un(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,oa(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=Un(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,Na(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(oa(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=ea(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?ha:aa)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?ma:ga)(i,t)):ea(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?ba:Ma)(i,t)):ea(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(ka(i,t)):ea(this.node(),i).ease}};var Ea={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Da(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return Ea.time=Vh(),Ea;return s}$r.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},$r.prototype.transition=function(t){var i,s;t instanceof La?(i=t._id,t=t._name):(i=Sa(),(s=Ea).time=Vh(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&sa(h,t,i,u,a,s||Da(h,i));return new La(n,this._parents,t,i)};var $a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Ca=new Uint8Array(16);function Oa(){if(!$a)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return $a(Ca)}for(var Ia=[],za=0;za<256;++za)Ia[za]=(za+256).toString(16).substr(1);function _a(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||Oa)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[Ia[t[i++]],Ia[t[i++]],Ia[t[i++]],Ia[t[i++]],"-",Ia[t[i++]],Ia[t[i++]],"-",Ia[t[i++]],Ia[t[i++]],"-",Ia[t[i++]],Ia[t[i++]],"-",Ia[t[i++]],Ia[t[i++]],Ia[t[i++]],Ia[t[i++]],Ia[t[i++]],Ia[t[i++]]].join("")}(r)}const{verifyTextHasSpace:Ha,checkAttributeTransitions:Pa,createTextStrokeFilter:qa,drawHoverStrokes:Ra,removeHoverStrokes:Xa,buildStrokes:Fa,convertColorsToTextures:ja,initializeDescriptionRoot:Ga,initializeElementAccess:Va,setElementFocusHandler:Ya,setElementAccessID:Ka,setAccessibilityController:Ba,hideNonessentialGroups:Ua,setAccessTitle:Za,setAccessSubtitle:Ja,setAccessLongDescription:Qa,setAccessExecutiveSummary:to,setAccessPurpose:io,setAccessContext:so,setAccessStatistics:no,setAccessChartCounts:ro,setAccessXAxis:eo,setAccessYAxis:ho,setAccessStructure:ao,setAccessAnnotation:oo,retainAccessFocus:uo,checkAccessFocus:co,setElementInteractionAccessState:lo,setAccessibilityDescriptionWidth:fo,autoTextColor:vo,annotate:po,chartAccessors:yo,convertVisaColor:wo,checkInteraction:mo,checkClicked:go,checkHovered:bo,drawAxis:Mo,drawGrid:ko,drawLegend:xo,setLegendInteractionState:Ao,drawTooltip:No,formatDataLabel:Wo,formatDate:Lo,getColors:So,getLicenses:To,getPadding:Eo,getScopedData:Do,initTooltipStyle:$o,overrideTitleTooltip:Co,placeDataLabels:Oo,scopeDataKeys:Io,transitionEndAll:zo,visaColors:_o,validateAccessibilityProps:Ho,findTagLevel:Po,prepareRenderChange:qo,roundTo:Ro,resolveLabelCollision:Xo}=r,Fo=class{constructor(s){t(this,s),this.mainTitle=Th.mainTitle,this.subTitle=Th.subTitle,this.height=Th.height,this.width=Th.width,this.layout=Th.layout,this.margin=Th.margin,this.padding=Th.padding,this.highestHeadingLevel=Th.highestHeadingLevel,this.ordinalAccessor=Th.ordinalAccessor,this.valueAccessor=Th.valueAccessor,this.groupAccessor=Th.groupAccessor,this.reverseOrder=Th.reverseOrder,this.xAxis=Th.xAxis,this.yAxis=Th.yAxis,this.wrapLabel=Th.wrapLabel,this.colorPalette=Th.colorPalette,this.hoverStyle=Th.hoverStyle,this.clickStyle=Th.clickStyle,this.referenceStyle=Th.referenceStyle,this.cursor=Th.cursor,this.roundedCorner=Th.roundedCorner,this.barIntervalRatio=Th.barIntervalRatio,this.groupIntervalRatio=Th.groupIntervalRatio,this.hoverOpacity=Th.hoverOpacity,this.animationConfig=Th.animationConfig,this.dataLabel=Th.dataLabel,this.showTooltip=Th.showTooltip,this.tooltipLabel=Th.tooltipLabel,this.accessibility=Th.accessibility,this.legend=Th.legend,this.annotations=Th.annotations,this.referenceLines=Th.referenceLines,this.suppressEvents=Th.suppressEvents,this.clickHighlight=Th.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.nest=[],this.datakeys=[],this.legendData=[],this.updated=!0,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateScales=!1,this.shouldValidateAxes=!1,this.shouldUpdateAnnotations=!1,this.shouldResetRoot=!1,this.shouldUpdateTableData=!1,this.shouldSetColors=!1,this.shouldValidateLabelPlacement=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldValidateInteractionKeys=!1,this.shouldSetSelectionClass=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYGrid=!1,this.shouldUpdateBaseline=!1,this.shouldCheckValueAxis=!1,this.shouldCheckLabelAxis=!1,this.shouldSetGlobalSelections=!1,this.shouldEnterUpdateExit=!1,this.shouldUpdateGeometries=!1,this.shouldUpdateCorners=!1,this.shouldUpdateLegendData=!1,this.shouldUpdateLegend=!1,this.shouldUpdateLegendInteractivity=!1,this.shouldSetLegendCursor=!1,this.shouldUpdateReferenceLines=!1,this.shouldUpdateCursor=!1,this.shouldDrawInteractionState=!1,this.shouldSetLabelOpacity=!1,this.shouldSetLabelPosition=!1,this.shouldSetLabelContent=!1,this.shouldCheckLabelColor=!1,this.shouldBindInteractivity=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldSetTestingAttributes=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetTextures=!1,this.shouldSetStrokes=!1,this.strokes={},this.topLevel="h2",this.bottomLevel="p",this.textTreatmentHandler=(t,i,s)=>{const n=Cr(s[i]),r=this.clickHighlight&&this.clickHighlight.length>0&&go(t,this.clickHighlight,this.innerInteractionKeys)&&this.clickStyle.color?_o[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&bo(t,this.hoverHighlight,this.innerInteractionKeys)&&this.hoverStyle.color?_o[this.hoverStyle.color]||this.hoverStyle.color:this.preparedColors[i],e="auto"===this.dataLabel.placement&&("vertical"===this.layout?"top"===this.dataLabel.collisionPlacement&&"bottom"!==n.attr("data-baseline")||"middle"===this.dataLabel.collisionPlacement&&"bottom"!==n.attr("data-baseline")||"bottom"===this.dataLabel.collisionPlacement&&"bottom"===n.attr("data-baseline")&&(t[this.valueAccessor]>=0&&this.y(0)-this.y(t[this.valueAccessor])>20||t[this.valueAccessor]<0&&this.y(0)-this.y(t[this.valueAccessor])<-20):"right"===this.dataLabel.collisionPlacement&&"left"!==n.attr("data-align")||"middle"===this.dataLabel.collisionPlacement&&"left"!==n.attr("data-align")||"left"===this.dataLabel.collisionPlacement&&"right"!==n.attr("data-align")),h=e||"bottom"===this.dataLabel.placement||"left"===this.dataLabel.placement?vo(r):_o.dark_text;return n.attr("filter",n.classed("textIsMoving")?null:qa({root:this.svg.node(),id:this.chartID,color:e||"bottom"===this.dataLabel.placement||"left"===this.dataLabel.placement?r:"#ffffff"})),h},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldSetTextures=!0,this.shouldUpdateTableData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldSetLabelContent=!0,this.shouldSetLabelPosition=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateLegendData=!0,this.shouldUpdateScales=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetStrokes=!0}idWatcher(t,i){this.chartID=t||"clustered-bar-chart-"+_a(),this.clusteredBarChartEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldSetLabelPosition=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}layoutWatcher(t,i){this.shouldValidateLabelPlacement=!0,this.shouldUpdateScales=!0,this.shouldValidateAxes=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldSetLabelPosition=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetTestingAttributes=!0}ordinalAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateLegendData=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}valueAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckValueAxis=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldSetLabelContent=!0,this.shouldSetLabelPosition=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}groupAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}reverseOrderWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldSetLabelPosition=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,"vertical"===this.layout?(this.shouldValidateAxes=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0):"horizontal"===this.layout&&(this.shouldValidateAxes=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0)}xAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0)}yAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0)}wrapLabelWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0}cornerWatcher(t,i){this.shouldUpdateCorners=!0}intervalRatioWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldCheckLabelAxis=!0,this.shouldSetLabelPosition=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateAnnotations=!0}groupIntervalRatioWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldSetLabelPosition=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateAnnotations=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0}labelWatcher(t,i){const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement,r=!(!t||!t.collisionPlacement)&&t.collisionPlacement,e=!(!i||!i.collisionPlacement)&&i.collisionPlacement,h=!(!t||!t.labelAccessor)&&t.labelAccessor,a=!(!i||!i.labelAccessor)&&i.labelAccessor,o=!(!t||!t.format)&&t.format,u=!(!i||!i.format)&&i.format,c=!(!t||!t.collisionHideOnly)&&t.collisionHideOnly,l=!(!i||!i.collisionHideOnly)&&i.collisionHideOnly;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),s===n&&r===e&&c===l||(this.shouldValidateLabelPlacement=!0,this.shouldSetLabelPosition=!0,this.shouldCheckLabelColor=!0),h===a&&o===u||(this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateTableData=!0,this.shouldSetLabelContent=!0,this.shouldCheckLabelColor=!0)}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideTextures)&&t.hideTextures)!==(!(!i||!i.hideTextures)&&i.hideTextures)&&(this.shouldSetTextures=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0,this.shouldDrawInteractionState=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldDrawInteractionState=!0)}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateGeometries=!0,this.shouldSetLabelPosition=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}clickWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetSelectionClass=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"clustered-bar-chart-"+_a(),this.clusteredBarChartEl.id=this.chartID,this.setTagLevels(),this.prepareData(),this.prepareLegendData(),this.setDimensions(),this.prepareScales(),this.validateInteractionKeys(),this.validateDataLabelAccessor(),this.validateAxes(),this.validateLabelPlacement(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.shouldValidateAccessibilityProps(),this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTextures(),this.setStrokes(),this.drawXGrid(),this.drawYGrid(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.drawGeometries(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.bindLegendInteractivity(),this.setLabelContent(),this.processLabelPosition(this.updateLabels,!1,!0,!1),this.drawReferenceLines(),this.setSelectedClass(),this.checkLabelColorAgainstBackground(),this.updateCursor(),this.bindInteractivity(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),this.drawBaseline(),this.onChangeHandler(),Ua(this.root.node(),this.barG.node()),this.setGroupAccessibilityID(),this.defaults=!1,this.updateLabels.classed("entering",!1),t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldSetTextures&&(this.setTextures(),this.shouldSetTextures=!1),this.shouldSetStrokes&&(this.setStrokes(),this.shouldSetStrokes=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldEnterUpdateExit&&(this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateGeometries&&(this.drawGeometries(),this.shouldUpdateGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateCorners&&(this.setRoundedCorners(),this.shouldUpdateCorners=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldSetLabelContent&&(this.setLabelContent(),this.shouldSetLabelContent=!1),this.shouldSetLabelPosition&&(this.setLabelPosition(),this.shouldSetLabelPosition=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldCheckLabelColor&&(this.checkLabelColorAgainstBackground(),this.shouldCheckLabelColor=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldUpdateLegendInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateBaseline&&(this.drawBaseline(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),this.updateLabels.classed("entering",!1),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,Ho(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateLabelPlacement(){"vertical"===this.layout?"top"!==this.dataLabel.placement&&"bottom"!==this.dataLabel.placement&&"auto"!==this.dataLabel.placement&&(this.dataLabel.placement="top"):"right"!==this.dataLabel.placement&&"left"!==this.dataLabel.placement&&"auto"!==this.dataLabel.placement&&(this.dataLabel.placement="right")}setDimensions(){this.padding="string"==typeof this.padding?Eo(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}prepareData(){this.data.map(t=>{t[this.valueAccessor]=parseFloat(t[this.valueAccessor]),t[this.groupAccessor]=t[this.groupAccessor]instanceof Date?Lo({date:t[this.groupAccessor],format:"vertical"===this.layout?this.xAxis.format:this.yAxis.format,offsetTimezone:!0}):t[this.groupAccessor]}),this.nest=function(){var t,i,s,n=[],r=[];function e(s,r,h,a){if(r>=n.length)return null!=t&&s.sort(t),null!=i?i(s):s;for(var o,u,c,l=-1,f=s.length,d=n[r++],v=Yr(),p=h();++l<f;)(c=v.get(o=d(u=s[l])+""))?c.push(u):v.set(o,[u]);return v.each((function(t,i){a(p,i,e(t,r,h,a))})),p}return s={object:function(t){return e(t,0,Kr,Br)},map:function(t){return e(t,0,Ur,Zr)},entries:function(t){return function t(s,e){if(++e>n.length)return s;var h,a=r[e-1];return null!=i&&e>=n.length?h=s.entries():(h=[],s.each((function(i,s){h.push({key:s,values:t(i,e)})}))),null!=a?h.sort((function(t,i){return a(t.key,i.key)})):h}(e(t,0,Ur,Zr),0)},key:function(t){return n.push(t),s},sortKeys:function(t){return r[n.length-1]=t,s},sortValues:function(i){return t=i,s},rollup:function(t){return i=t,s}}}().key(t=>t[this.groupAccessor]).entries(this.data),this.datakeys=this.nest.map(t=>t.key)}setTableData(){const t=Io(this,yo,"clustered-bar-chart");this.tableData=Do(this.data,t),this.tableColumns=Object.keys(t)}prepareScales(){const t=this.minValueOverride&&this.minValueOverride<jr(this.data,t=>t[this.valueAccessor])?this.minValueOverride:jr(this.data,t=>t[this.valueAccessor]);"vertical"===this.layout?(this.y=Wh().domain([Math.min(0,t),this.maxValueOverride||Fr(this.data,t=>t[this.valueAccessor])]).range([this.innerPaddedHeight,0]),this.x0=ne().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedWidth,0]:[0,this.innerPaddedWidth]).padding(this.groupIntervalRatio),this.x1=ne().domain(this.nest[0].values.map(t=>t[this.ordinalAccessor])).rangeRound([0,this.x0.bandwidth()]).padding(this.barIntervalRatio)):"horizontal"===this.layout&&(this.x=Wh().domain([Math.min(0,t),this.maxValueOverride||Fr(this.data,t=>t[this.valueAccessor])]).range([0,this.innerPaddedWidth]),this.y0=ne().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedHeight,0]:[0,this.innerPaddedHeight]).padding(this.groupIntervalRatio),this.y1=ne().domain(this.nest[0].values.map(t=>t[this.ordinalAccessor])).rangeRound([0,this.y0.bandwidth()]).padding(this.barIntervalRatio))}validateAxes(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!("vertical"===this.layout)&&this.xAxis.gridVisible}),this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:"vertical"===this.layout&&this.yAxis.gridVisible})}setColors(){this.preparedColors=this.colors?wo(this.colors):So(this.colorPalette,this.nest[0].values.length)}setTextures(){const t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6)this.colorArr=this.preparedColors;else{const i=ja({colors:t,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical",disableTransitions:!this.duration});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}}setStrokes(){this.strokes=Fa({root:this.svg.node(),id:this.chartID,colors:this.preparedColors.range?this.preparedColors.range():this.preparedColors,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle})}renderRootElements(){this.svg=Cr(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.gridG=this.rootG.append("g").attr("class","grid-group"),this.barG=this.rootG.append("g").attr("class","clustered-bar-group"),this.labelG=this.rootG.append("g").attr("class","clustered-bar-dataLabel-group"),this.legendG=Cr(this.clusteredBarChartEl).select(".clustered-bar-legend").append("svg"),this.tooltipG=Cr(this.clusteredBarChartEl).select(".clustered-bar-tooltip"),this.references=this.rootG.append("g").attr("class","clustered-bar-reference-line-group")}setTestingAttributes(){this.unitTest?(Cr(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid","chart-container"),Cr(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid","main-title"),Cr(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.barG.attr("data-testid","clustered-bar-group"),this.updateBarWrappers.attr("data-testid","clustered-bar-wrapper").attr("data-id",t=>`clustered-bar-wrapper-${t.key}`),this.update.attr("data-testid","bar").attr("data-id",t=>`bar-${t[this.groupAccessor]}-${t[this.ordinalAccessor]}`),this.labelG.attr("data-testid","clustered-bar-dataLabel-group"),this.updateLabelWrappers.attr("data-testid","clustered-bar-dataLabel-wrapper").attr("data-id",t=>`clustered-bar-dataLabel-wrapper-${t.key}`),this.updateLabels.attr("data-testid","dataLabel").attr("data-id",t=>`dataLabel-${t[this.groupAccessor]}-${t[this.ordinalAccessor]}`),this.references.attr("data-testid","reference-line-group"),this.svg.select("defs").attr("data-testid","pattern-defs"),this.references.selectAll(".clustered-bar-reference-line").attr("data-testid","reference-line"),this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid","reference-line-label")):(Cr(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid",null),Cr(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid",null),Cr(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.barG.attr("data-testid",null),this.updateBarWrappers.attr("data-testid",null).attr("data-id",null),this.update.attr("data-testid",null).attr("data-id",null),this.labelG.attr("data-testid",null),this.updateLabelWrappers.attr("data-testid",null).attr("data-id",null),this.updateLabels.attr("data-testid",null).attr("data-id",null),this.references.attr("data-testid",null),this.svg.select("defs").attr("data-testid",null),this.references.selectAll(".clustered-bar-reference-line").attr("data-testid",null),this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid",null))}reSetRoot(){qo({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:Lh}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),qo({selection:this.root,duration:this.duration,namespace:"root_reset",easing:Lh}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),qo({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:Lh}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),fo(this.chartID,this.width)}drawXAxis(){Mo({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.x0:this.x,left:!1,wrapLabel:this.wrapLabel&&"vertical"===this.layout?this.x0.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible,duration:this.duration})}drawYAxis(){Mo({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.y:this.y0,left:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible,duration:this.duration})}setXAxisAccessibility(){eo({rootEle:this.clusteredBarChartEl,hasXAxis:!!this.innerXAxis&&this.innerXAxis.visible,xAxis:"vertical"===this.layout?this.x0||!1:this.x||!1,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){ho({rootEle:this.clusteredBarChartEl,hasYAxis:!!this.innerYAxis&&this.innerYAxis.visible,yAxis:"vertical"===this.layout?this.y||!1:this.y0||!1,yAxisLabel:this.yAxis.label?this.yAxis.label:""})}drawBaseline(){Mo({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.x0:this.x,left:!1,padding:this.padding,markOffset:"vertical"===this.layout?this.y(0)||-1:this.y0(0)||-1,hide:!("vertical"===this.layout),duration:this.duration}),Mo({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.y:this.y0,left:!0,padding:this.padding,markOffset:"vertical"===this.layout?this.x0(0)||-1:this.x(0)||-1,hide:"vertical"===this.layout,duration:this.duration})}drawXGrid(){ko(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,"vertical"===this.layout?this.x0:this.x,!1,!this.innerXAxis.gridVisible,this.xAxis.tickInterval,this.duration)}drawYGrid(){ko(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,"vertical"===this.layout?this.y:this.y0,!0,!this.innerYAxis.gridVisible,this.yAxis.tickInterval,this.duration)}setGlobalSelections(){const t=this.barG.selectAll(".clustered-bar-wrapper").data(this.nest,t=>t.key);this.enterBarWrappers=t.enter().append("g"),this.exitBarWrappers=t.exit(),this.updateBarWrappers=t.merge(this.enterBarWrappers);const i=this.updateBarWrappers.selectAll(".clustered-bar").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enter=i.enter().append("rect"),this.exit=i.exit(),this.update=i.merge(this.enter),this.enterSize=this.enter.size(),this.exitSize=this.exit.size();const s=this.labelG.selectAll("g").data(this.nest,t=>t.key);this.enterLabelWrappers=s.enter().append("g"),this.exitLabelWrappers=s.exit(),this.updateLabelWrappers=s.merge(this.enterLabelWrappers);const n=this.updateLabelWrappers.selectAll("text").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enterLabels=n.enter().append("text"),this.exitLabels=n.exit(),this.updateLabels=n.merge(this.enterLabels)}enterGeometries(){this.enter.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"max":"min";this.enterBarWrappers.attr("class","clustered-bar-wrapper").classed("entering",!0).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")").each((t,i,s)=>{Va(s[i])}),this.enter.attr("class","clustered-bar").attr("cursor",this.suppressEvents?null:this.cursor).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).each((t,i,s)=>{Va(s[i])}).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("fill",(t,i)=>{const s=this.clickHighlight&&this.clickHighlight.length>0&&go(t,this.clickHighlight,this.innerInteractionKeys),n=this.hoverHighlight&&bo(t,this.hoverHighlight,this.innerInteractionKeys),r=this.colorArr[i];return s&&this.clickStyle.color?_o[this.clickStyle.color]||this.clickStyle.color:s?r:n&&this.hoverStyle.color?_o[this.hoverStyle.color]||this.hoverStyle.color:r}).attr("opacity",0).attr(s,t=>this[s](Math[r](0,t[this.valueAccessor]))).attr(n,t=>Math.abs("vertical"===this.layout?this[s](0)-this[s](t[this.valueAccessor]):this[s](t[this.valueAccessor])-this[s](0))).attr(t,i=>this[t+"1"](i[this.ordinalAccessor])).attr(i,this[t+"1"].bandwidth()),this.defaults||this.enter.classed("entering",!0).attr(t,(i,s,n)=>{const r=Cr(n[s].parentNode),e=r.classed("entering");let h=e?this[t+"0"](r.datum().key):this[t+"1"](i[this.ordinalAccessor]);const a=e?this[t+"0"].bandwidth()/2:this[t+"1"].bandwidth()/2,o=(h+a)/(this.innerPaddedWidth/2);return h=e?0:h,h+a*o}).attr(i,0),this.enterBarWrappers.order(),this.enter.order()}updateGeometries(){this.update.interrupt(),this.update.transition("opacity").duration((t,i,s)=>Cr(s[i]).classed("entering")?(Cr(s[i]).classed("entering",!1),this.duration):0).ease(Lh).attr("opacity",t=>mo(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}exitGeometries(){this.exitBarWrappers.interrupt(),this.exit.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="innerPadded"+i[0].toUpperCase()+i.substring(1);this.exit.transition("exit").duration(this.duration).ease(Lh).attr("opacity",0).attr(t,(n,r,e)=>{const h=Cr(e[r]);let a=+h.attr(t)+ +h.attr(i)/2;return a=+h.attr(t)+ +h.attr(i)/2*(a/(this[s]/2)),a}).attr(i,0),this.exitSize+=this.exitBarWrappers.selectAll(".clustered-bar").size(),this.exitBarWrappers.selectAll(".clustered-bar").transition("exit_wrappers").duration(.75*this.duration).ease(Lh).attr("opacity",0).attr(t,(i,n,r)=>{const e=r[n].parentNode.transform.baseVal.consolidate().matrix.e,h=this[t+"0"].bandwidth()/2;return h*((e+h)/(this[s]/2))}).attr(i,0),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(Lh).call(zo,()=>{const t=co(this.rootG.node());this.exit.remove(),this.exitBarWrappers.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),uo({parentGNode:this.rootG.node(),focusDidExist:t})})}drawGeometries(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"max":"min";this.updateBarWrappers.transition("update").duration(this.duration).ease(Lh).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")").call(zo,()=>{this.updateBarWrappers.classed("entering",!1)}),this.update.classed("geometryIsMoving",(e,h,a)=>Pa(Cr(a[h]),[{attr:t,numeric:!0,newValue:this[t+"1"](e[this.ordinalAccessor])},{attr:i,numeric:!0,newValue:this[t+"1"].bandwidth()},{attr:s,numeric:!0,newValue:this[s](Math[r](0,e[this.valueAccessor]))},{attr:n,numeric:!0,newValue:Math.abs("vertical"===this.layout?this[s](0)-this[s](e[this.valueAccessor]):this[s](e[this.valueAccessor])-this[s](0))}])).attr(`data-${t}`,i=>this[t+"1"](i[this.ordinalAccessor])).attr("data-translate-x",t=>("vertical"===this.layout?this.x0(t[this.groupAccessor]):0)+this.padding.left+this.margin.left).attr("data-translate-y",t=>("vertical"===this.layout?0:this.y0(t[this.groupAccessor]))+this.padding.top+this.margin.top).attr(`data-${i}`,this[t+"1"].bandwidth()).attr(`data-${s}`,t=>this[s](Math[r](0,t[this.valueAccessor]))).attr(`data-${n}`,t=>Math.abs("vertical"===this.layout?this[s](0)-this[s](t[this.valueAccessor]):this[s](t[this.valueAccessor])-this[s](0))).transition("update").duration((t,i,s)=>Cr(s[i]).classed("entering")?this.duration/2:this.duration).delay((t,i,s)=>Cr(s[i]).classed("entering")?this.duration/2:0).ease(Lh).attr(s,t=>this[s](Math[r](0,t[this.valueAccessor]))).attr(n,t=>Math.abs("vertical"===this.layout?this[s](0)-this[s](t[this.valueAccessor]):this[s](t[this.valueAccessor])-this[s](0))).attr(t,i=>this[t+"1"](i[this.ordinalAccessor])).attr(i,this[t+"1"].bandwidth()).call(zo,()=>{this.update.classed("geometryIsMoving",!1),this.updateInteractionState(),this.checkLabelColorAgainstBackground(),uo({parentGNode:this.rootG.node()})})}updateInteractionState(){Xa(this.svg.node()),this.update.interrupt("opacity"),this.update.attr("opacity",t=>mo(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).attr("fill",(t,i)=>{const s=this.clickHighlight&&this.clickHighlight.length>0&&go(t,this.clickHighlight,this.innerInteractionKeys),n=this.hoverHighlight&&bo(t,this.hoverHighlight,this.innerInteractionKeys),r=this.colorArr[i];return s&&this.clickStyle.color?_o[this.clickStyle.color]||this.clickStyle.color:s?r:n&&this.hoverStyle.color?_o[this.hoverStyle.color]||this.hoverStyle.color:r}).attr("filter",(t,i,s)=>{if(!this.accessibility.hideStrokes&&!Cr(s[i]).classed("geometryIsMoving")){const n=this.clickHighlight&&this.clickHighlight.length>0&&go(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&bo(t,this.hoverHighlight,this.innerInteractionKeys),e=this.preparedColors[i],h=n?"click":r&&!Cr(s[i]).classed("geometryIsMoving")?"hover":"rest",a=n&&this.clickStyle.color?_o[this.clickStyle.color]||this.clickStyle.color:n?e:r&&this.hoverStyle.color?_o[this.hoverStyle.color]||this.hoverStyle.color:e;return"hover"===h&&Ra({inputElement:s[i],id:this.chartID,key:t[this.ordinalAccessor]+t[this.groupAccessor],strokeWidth:this.hoverStyle.strokeWidth,fill:a}),this.strokes[h+a]}return null}),uo({parentGNode:this.rootG.node()}),Ao({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity}),this.updateLabels.interrupt("opacity");const t="auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly,i="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;if(this.processLabelOpacity(this.updateLabels,t),t){const t=this.updateLabels.filter((t,i,s)=>Cr(s[i]).classed("collision-added")),s=this.updateLabels.filter((t,i,s)=>Cr(s[i]).classed("collision-removed")).attr("data-use-dx",i).attr("data-use-dy",i);s.size()>0&&(this.bitmaps=Xo({bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[Ro(this.width,0),Ro(this.height,0)],hideOnly:!1,removeOnly:!0}),s.classed("collision-removed",!1)),t.size()>0&&(this.processLabelPosition(t,!1,!1,!0),t.classed("collision-added",!1))}}setLabelOpacity(){this.processLabelOpacity(this.updateLabels)}processLabelOpacity(t,i){const s=this.dataLabel.visible?1:0,n="vertical"===this.layout?"x":"y",r="vertical"===this.layout?"width":"height",e="vertical"===this.layout?"y":"x",h="vertical"===this.layout?"height":"width",a=this[n+"0"].bandwidth()/this.nest[0].values.length;t.attr("opacity",(t,o,u)=>{const c=+Cr(u[o]).attr("opacity"),l=Cr(u[o]).style("visibility"),f={};f[r]="left"===this.dataLabel.placement||"bottom"===this.dataLabel.placement?this[n+"1"].bandwidth():a,"left"!==this.dataLabel.placement&&"bottom"!==this.dataLabel.placement||(f[h]=Math.abs("vertical"===this.layout?this[e](0)-this[e](t[this.valueAccessor]):this[e](t[this.valueAccessor])-this[e](0)));const d="auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly||this.accessibility.showSmallLabels||Ha({text:Wo(t,this.innerLabelAccessor,this.dataLabel.format),dimensions:f,fontSize:14})?mo(t,s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:0;return(1===d&&"hidden"===l||c!==d)&&i&&(1===d?Cr(u[o]).classed("collision-added",!0).style("visibility",null):Cr(u[o]).classed("collision-removed",!0)),d})}checkLabelColorAgainstBackground(){this.updateLabels.attr("fill",(t,i,s)=>this.textTreatmentHandler(t,i,s))}setRoundedCorners(){this.update.transition("corners").duration(this.duration).ease(Lh).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)}setSelectedClass(){this.update.classed("highlight",(t,i,s)=>{let n=mo(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return n=!(!this.clickHighlight||!this.clickHighlight.length)&&n,lo(s[i],n,this.accessibility.elementsAreInterface),n})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),this.updateLabels.attr("cursor",this.suppressEvents?null:this.cursor)}enterDataLabels(){const t="vertical"===this.layout?"x":"y",i=this.dataLabel.visible?1:0;this.enterLabelWrappers.attr("class","clustered-bar-label-wrapper").classed("entering",!0).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")"),this.enterLabels.attr("class","clustered-bar-dataLabel").classed("entering",!0).classed("clustered-bar-dataLabel-horizontal",!1).classed("clustered-bar-dataLabel-vertical",!1).classed("clustered-bar-dataLabel-"+this.layout,!0).attr("cursor",this.suppressEvents?null:this.cursor).attr("opacity",t=>mo(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON).attr("fill",this.textTreatmentHandler).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.enterLabels.attr(t,(i,s,n)=>{const r=t+"0",e=t+"1",h="x"===t?"innerPaddedWidth":"innerPaddedHeight",a=Cr(n[s].parentNode),o=a.classed("entering");let u=o?this[r](a.datum().key):this[e](i[this.ordinalAccessor]);const c=o?this[r].bandwidth()/2:this[e].bandwidth()/2,l=(u+c)/(this[h]/2);return u=o?0:u,u+c*l})}updateDataLabels(){this.updateLabels.interrupt();const t=this.dataLabel.visible?1:0;this.updateLabels.transition("opacity").duration((t,i,s)=>Cr(s[i]).classed("entering")?this.duration/4:0).delay((t,i,s)=>Cr(s[i]).classed("entering")?this.duration/4*3:0).ease(Lh).attr("opacity",i=>mo(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1).call(zo,()=>{this.updateLabels.classed("entering",!1)})}exitDataLabels(){this.exitLabelWrappers.selectAll("text").transition("exit").ease(Lh).duration(this.duration/3).attr("opacity",0).call(zo,()=>{this.exitLabelWrappers.remove()}),this.exitLabels.transition("exit").ease(Lh).duration(this.duration/3).attr("opacity",0).remove()}setLabelContent(){this.updateLabels.text(t=>Wo(t,this.innerLabelAccessor,this.dataLabel.format))}setLabelPosition(){this.updateLabelWrappers.classed("clustered-bar-dataLabel-horizontal",!1).classed("clustered-bar-dataLabel-vertical",!1).classed("clustered-bar-dataLabel-"+this.layout,!0),qo({selection:this.updateLabelWrappers,duration:this.duration,namespace:"position-label-wrappers",easing:Lh}).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")").call(zo,()=>{this.updateLabelWrappers.classed("entering",!1)});const t=this.enterLabels.filter((t,i,s)=>Cr(s[i]).classed("entering")),i=this.updateLabels.filter((t,i,s)=>!Cr(s[i]).classed("entering"));t.size()>0?(this.processLabelPosition(t,!1,!0,!1),this.processLabelPosition(i,!0,!1,!0)):this.processLabelPosition(i,!0,!0,!1)}processLabelPosition(t,i,s,n){const r="vertical"===this.layout?"x":"y",e="vertical"===this.layout?"width":"height",h="vertical"===this.layout?"y":"x",a="vertical"===this.layout?"height":"width",o="vertical"===this.layout?"max":"min",u="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;let c=15;const l={vertical:{top:{validPositions:["top","bottom"],offsets:[4,1]},middle:{validPositions:["middle","top"],offsets:[1,c/2]},bottom:{validPositions:["middle","top"],offsets:[1,c/2]}},horizontal:{right:{validPositions:["right","left"],offsets:[4,8]},middle:{validPositions:["middle","right"],offsets:[1,15]},left:{validPositions:["left","right"],offsets:[1,20]}}},f=this.dataLabel&&this.dataLabel.collisionPlacement,d=f&&l[this.layout][f]?this.dataLabel.collisionPlacement:"vertical"===this.layout?"top":"right";t.style("visibility",(t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?Cr(s[i]).style("visibility"):null).attr(`data-${r}`,(t,i,s)=>{if(0===i){const t=getComputedStyle(s[i]),n=parseFloat(t.fontSize);c=Math.max(n-1,1)}return this[r+"1"](t[this.ordinalAccessor])}).attr("data-translate-x",t=>("vertical"===this.layout?this.x0(t[this.groupAccessor]):0)+this.padding.left+this.margin.left).attr("data-translate-y",t=>("vertical"===this.layout?0:this.y0(t[this.groupAccessor]))+this.padding.top+this.margin.top).attr(`data-${e}`,this[r+"1"].bandwidth()).attr(`data-${h}`,t=>this[h](Math[o](0,t[this.valueAccessor]))).attr(`data-${a}`,t=>Math.abs("vertical"===this.layout?this[h](0)-this[h](t[this.valueAccessor]):this[h](t[this.valueAccessor])-this[h](0)));const v=qo({selection:t,duration:i?this.duration:0,namespace:"position-labels",easing:Lh});this.bitmaps=Oo({root:v,xScale:"vertical"===this.layout?this.x1:this.x,yScale:"vertical"===this.layout?this.y:this.y1,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"bar",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,bitmaps:s?void 0:this.bitmaps,labelSelection:v,avoidMarks:[this.update],validPositions:u?["middle"]:l[this.layout][d].validPositions,offsets:u?[1]:l[this.layout][d].offsets,accessors:[this.groupAccessor,this.ordinalAccessor,"key"],size:[Ro(this.width,0),Ro(this.height,0)],boundsScope:u?void 0:d,hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly,suppressMarkDraw:n}})}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class","clustered-bar-reference").attr("opacity",1),s=i.append("line");s.attr("class","clustered-bar-reference-line").attr("opacity",0);const n=i.append("text");n.attr("class","clustered-bar-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".clustered-bar-reference-line").data(t=>[t]).transition("merge").ease(Lh).duration(this.duration),h=r.selectAll(".clustered-bar-reference-line-label").data(t=>[t]).transition("merge").ease(Lh).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(Lh).duration(this.duration).attr("opacity",0).remove(),"vertical"===this.layout?(i.attr("transform",t=>"translate(0,"+this.y(t.value)+")"),r.transition("merge").ease(Lh).duration(this.duration).attr("transform",t=>"translate(0,"+this.y(t.value)+")"),s.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),n.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em")):"horizontal"===this.layout&&(i.attr("transform",t=>"translate("+this.x(t.value)+",0)"),r.transition("merge").ease(Lh).duration(this.duration).attr("transform",t=>"translate("+this.x(t.value)+",0)"),s.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),e.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),n.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em"),h.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em")),e.style("stroke",_o[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",_o[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}prepareLegendData(){this.legendData=this.nest[0].values}drawLegendElements(){xo({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){Cr(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:"").on("click",this.legend.interactive&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.legend.interactive&&!this.suppressEvents?t=>this.hoverFunc.emit(t):null).on("mouseout",this.legend.interactive&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}setLegendCursor(){Cr(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:null)}bindInteractivity(){this.update.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateLabels.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler())}drawAnnotations(){po({source:this.rootG.node(),data:this.annotations,xScale:"horizontal"!==this.layout?this.x0:this.x,xAccessor:"horizontal"!==this.layout?this.groupAccessor:this.valueAccessor,yScale:"horizontal"!==this.layout?this.y:this.y0,yAccessor:"horizontal"!==this.layout?this.valueAccessor:this.groupAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){oo(this.clusteredBarChartEl,this.annotations)}setTagLevels(){this.topLevel=Po(this.highestHeadingLevel),this.bottomLevel=Po(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){Ga({rootEle:this.clusteredBarChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"clustered-bar-chart",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){Ba({node:this.svg.node(),chartTag:"clustered-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:Io(this,yo,"clustered-bar-chart"),groupAccessor:this.groupAccessor,groupName:"cluster",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,s)=>{Va(s[i])})}setGeometryAriaLabels(){const t=Io(this,yo,"clustered-bar-chart");this.update.each((i,s,n)=>{Ya({node:n[s],geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"cluster",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),Ka({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateBarWrappers.each((t,i,s)=>{Ka({node:s[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){Za(this.clusteredBarChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){Ja(this.clusteredBarChartEl,this.subTitle)}setChartAccessibilityLongDescription(){Qa(this.clusteredBarChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){to(this.clusteredBarChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){io(this.clusteredBarChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){so(this.clusteredBarChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){no(this.clusteredBarChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){ro({rootEle:this.clusteredBarChartEl,parentGNode:this.barG.node(),chartTag:"clustered-bar-chart",geomType:"bar",groupName:"cluster"})}setChartAccessibilityStructureNotes(){ao(this.clusteredBarChartEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){Co(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&t[this.ordinalAccessor]&&this.eventsTooltip({data:t,evt:Mr,isToShow:!0})}onMouseOutHandler(){Co(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){$o(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){No({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"clustered"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldCheckValueAxis&&("horizontal"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldUpdateXGrid=!0):"vertical"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldUpdateYGrid=!0),this.shouldCheckValueAxis=!1),this.shouldCheckLabelAxis&&("vertical"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldUpdateXGrid=!0,this.shouldSetXAxisAccessibility=!0):"horizontal"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldUpdateYGrid=!0,this.shouldSetYAxisAccessibility=!0),this.shouldCheckLabelAxis=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateLegendData&&(this.prepareLegendData(),this.shouldUpdateLegendData=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldValidateAxes&&(this.validateAxes(),this.shouldValidateAxes=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldValidateLabelPlacement&&(this.validateLabelPlacement(),this.shouldValidateLabelPlacement=!1),s("div",{class:`o-layout is--${this.layout} light`},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"clustered-bar-main-title vcl-main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions clustered-bar-sub-title vcl-sub-title"},this.subTitle),s("div",{class:"clustered-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"bar",groupName:"cluster",chartTag:"clustered-bar-chart",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:!0,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-clustered-bar-container"}),s("div",{class:"clustered-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(Th);let i=0;const s={mainTitle:{exception:""},subTitle:{exception:""},barIntervalRatio:{exception:0},groupIntervalRatio:{exception:0},showTooltip:{exception:!1},wrapLabel:{exception:!1},hoverOpacity:{exception:0}};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:Th[t[i]]}}get clusteredBarChartEl(){return n(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],reverseOrder:["reverseOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],colors:["colorsWatcher"],colorPalette:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],groupIntervalRatio:["groupIntervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}clustered-bar-chart{cursor:default}clustered-bar-chart .annotations{pointer-events:none}clustered-bar-chart .annotations .handle{pointer-events:all}clustered-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}clustered-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}clustered-bar-chart .hidden{display:none}clustered-bar-chart #visa-viz-d3-clustered-bar-container{clear:both}clustered-bar-chart .clustered-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}clustered-bar-chart .clustered-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}clustered-bar-chart .clustered-bar-legend .key-dot{margin:3px 8px}clustered-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}clustered-bar-chart .light .grid path{stroke-width:0}clustered-bar-chart .light .axis{font-size:12px}clustered-bar-chart .light .axis .tick text{fill:#767676}clustered-bar-chart .light .axis .tick line{stroke:#767676}clustered-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .light .y.axis path{stroke:#767676;opacity:0}clustered-bar-chart .light .x.axis path{stroke:#767676}clustered-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}clustered-bar-chart .dark .grid path{stroke-width:0}clustered-bar-chart .dark .axis{font-size:12px}clustered-bar-chart .dark .axis .tick line{stroke:lightgrey}clustered-bar-chart .dark .axis .tick text{fill:grey}clustered-bar-chart .dark .axis path{stroke:black}clustered-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .dark .o-layout--chart svg{background:black}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-vertical{text-anchor:middle}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-horizontal{text-anchor:start}"}};window.VisaChartsLibOSSLicenses=To();var jo="http://www.w3.org/1999/xhtml";const Go={svg:"http://www.w3.org/2000/svg",xhtml:jo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vo(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),Go.hasOwnProperty(i)?{space:Go[i],local:t}:t}function Yo(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===jo&&i.documentElement.namespaceURI===jo?i.createElement(t):i.createElementNS(s,t)}}function Ko(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Bo(t){var i=Vo(t);return(i.local?Ko:Yo)(i)}function Uo(){}function Zo(t){return null==t?Uo:function(){return this.querySelector(t)}}function Jo(){return[]}function Qo(t){return null==t?Jo:function(){return this.querySelectorAll(t)}}function tu(t){return function(){return this.matches(t)}}function iu(t){return new Array(t.length)}function su(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function nu(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new su(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function ru(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new su(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function eu(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function hu(t){return function(){this.removeAttribute(t)}}function au(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ou(t,i){return function(){this.setAttribute(t,i)}}function uu(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function cu(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function lu(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function fu(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function du(t){return function(){this.style.removeProperty(t)}}function vu(t,i,s){return function(){this.style.setProperty(t,i,s)}}function pu(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function yu(t,i){return t.style.getPropertyValue(i)||fu(t).getComputedStyle(t,null).getPropertyValue(i)}function wu(t){return function(){delete this[t]}}function mu(t,i){return function(){this[t]=i}}function gu(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function bu(t){return t.trim().split(/^|\s+/)}function Mu(t){return t.classList||new ku(t)}function ku(t){this._node=t,this._names=bu(t.getAttribute("class")||"")}function xu(t,i){for(var s=Mu(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function Au(t,i){for(var s=Mu(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function Nu(t){return function(){xu(this,t)}}function Wu(t){return function(){Au(this,t)}}function Lu(t,i){return function(){(i.apply(this,arguments)?xu:Au)(this,t)}}function Su(){this.textContent=""}function Tu(t){return function(){this.textContent=t}}function Eu(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function Du(){this.innerHTML=""}function $u(t){return function(){this.innerHTML=t}}function Cu(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function Ou(){this.nextSibling&&this.parentNode.appendChild(this)}function Iu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zu(){return null}function _u(){var t=this.parentNode;t&&t.removeChild(this)}function Hu(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function Pu(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}su.prototype={constructor:su,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},ku.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var qu={},Ru=null;function Xu(t,i,s){return t=Fu(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function Fu(t,i,s){return function(n){var r=Ru;Ru=n;try{t.call(this,this.__data__,i,s)}finally{Ru=r}}}function ju(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function Gu(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function Vu(t,i,s){var n=qu.hasOwnProperty(t.type)?Xu:Fu;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function Yu(t,i,s){var n=fu(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function Ku(t,i){return function(){return Yu(this,t,i)}}function Bu(t,i){return function(){return Yu(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(qu={mouseenter:"mouseover",mouseleave:"mouseout"}));var Uu=[null];function Zu(t,i){this._groups=t,this._parents=i}function Ju(){return new Zu([[document.documentElement]],Uu)}function Qu(t){return"string"==typeof t?new Zu([[document.querySelector(t)]],[document.documentElement]):new Zu([[t]],Uu)}function tc(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function ic(t){return 1===t.length&&(t=function(t){return function(i,s){return tc(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}Zu.prototype=Ju.prototype={constructor:Zu,select:function(t){"function"!=typeof t&&(t=Zo(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new Zu(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Qo(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new Zu(n,r)},filter:function(t){"function"!=typeof t&&(t=tu(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new Zu(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?ru:nu,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,m,g=0,b=0;g<v;++g)if(w=p[g]){for(g>=b&&(b=g+1);!(m=y[b])&&++b<v;);w._next=m||null}}return(h=new Zu(h,n))._enter=a,h._exit=o,h},enter:function(){return new Zu(this._enter||this._groups.map(iu),this._parents)},exit:function(){return new Zu(this._exit||this._groups.map(iu),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new Zu(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=eu);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new Zu(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=Vo(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?au:hu:"function"==typeof i?s.local?lu:cu:s.local?uu:ou)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?du:"function"==typeof i?pu:vu)(t,i,null==s?"":s)):yu(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?wu:"function"==typeof i?gu:mu)(t,i)):this.node()[t]},classed:function(t,i){var s=bu(t+"");if(arguments.length<2){for(var n=Mu(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?Lu:i?Nu:Wu)(s,i))},text:function(t){return arguments.length?this.each(null==t?Su:("function"==typeof t?Eu:Tu)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Du:("function"==typeof t?Cu:$u)(t)):this.node().innerHTML},raise:function(){return this.each(Ou)},lower:function(){return this.each(Iu)},append:function(t){var i="function"==typeof t?t:Bo(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:Bo(t),n=null==i?zu:"function"==typeof i?i:Zo(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(_u)},clone:function(t){return this.select(t?Pu:Hu)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=ju(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?Vu:Gu,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?Bu:Ku)(t,i))}};var sc=ic(tc).right;function nc(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var rc=Math.sqrt(50),ec=Math.sqrt(10),hc=Math.sqrt(2);function ac(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=rc?10:e>=ec?5:e>=hc?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=rc?10:e>=ec?5:e>=hc?2:1)}function oc(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=rc?r*=10:e>=ec?r*=5:e>=hc&&(r*=2),i<t?-r:r}function uc(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&s>n&&(n=s);return n}function cc(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&n>s&&(n=s);return n}var lc=new Date,fc=new Date;function dc(t,i,s,n){function r(i){return t(i=0===arguments.length?new Date:new Date(+i)),i}return r.floor=function(i){return t(i=new Date(+i)),i},r.ceil=function(s){return t(s=new Date(s-1)),i(s,1),t(s),s},r.round=function(t){var i=r(t),s=r.ceil(t);return t-i<s-t?i:s},r.offset=function(t,s){return i(t=new Date(+t),null==s?1:Math.floor(s)),t},r.range=function(s,n,e){var h,a=[];if(s=r.ceil(s),e=null==e?1:Math.floor(e),!(s<n&&e>0))return a;do{a.push(h=new Date(+s)),i(s,e),t(s)}while(h<s&&s<n);return a},r.filter=function(s){return dc((function(i){if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;i(t,-1),!s(t););else for(;--n>=0;)for(;i(t,1),!s(t););}))},s&&(r.count=function(i,n){return lc.setTime(+i),fc.setTime(+n),t(lc),t(fc),Math.floor(s(lc,fc))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(n?function(i){return n(i)%t==0}:function(i){return r.count(0,i)%t==0}):r:null}),r}var vc=dc((function(){}),(function(t,i){t.setTime(+t+i)}),(function(t,i){return i-t}));vc.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?dc((function(i){i.setTime(Math.floor(i/t)*t)}),(function(i,s){i.setTime(+i+s*t)}),(function(i,s){return(s-i)/t})):vc:null};var pc=dc((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,i){t.setTime(+t+1e3*i)}),(function(t,i){return(i-t)/1e3}),(function(t){return t.getUTCSeconds()})),yc=dc((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,i){t.setTime(+t+6e4*i)}),(function(t,i){return(i-t)/6e4}),(function(t){return t.getMinutes()})),wc=dc((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,i){t.setTime(+t+36e5*i)}),(function(t,i){return(i-t)/36e5}),(function(t){return t.getHours()})),mc=dc((function(t){t.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}));function gc(t){return dc((function(i){i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+7*i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var bc=gc(0),Mc=gc(1),kc=(gc(2),gc(3),gc(4)),xc=(gc(5),gc(6),dc((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,i){t.setMonth(t.getMonth()+i)}),(function(t,i){return i.getMonth()-t.getMonth()+12*(i.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),Ac=dc((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,i){t.setFullYear(t.getFullYear()+i)}),(function(t,i){return i.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Ac.every=function(t){return isFinite(t=Math.floor(t))&&t>0?dc((function(i){i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)}),(function(i,s){i.setFullYear(i.getFullYear()+s*t)})):null};var Nc=dc((function(t){t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+i)}),(function(t,i){return(i-t)/864e5}),(function(t){return t.getUTCDate()-1}));function Wc(t){return dc((function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-t)%7),i.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+7*i)}),(function(t,i){return(i-t)/6048e5}))}var Lc=Wc(0),Sc=Wc(1),Tc=(Wc(2),Wc(3),Wc(4)),Ec=(Wc(5),Wc(6),dc((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i)}),(function(t,i){return i.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));function Dc(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function $c(){}function Cc(t,i){var s=new $c;if(t instanceof $c)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}function Oc(){return{}}function Ic(t,i,s){t[i]=s}function zc(){return Cc()}function _c(t,i,s){t.set(i,s)}Ec.every=function(t){return isFinite(t=Math.floor(t))&&t>0?dc((function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/t)*t),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)}),(function(i,s){i.setUTCFullYear(i.getUTCFullYear()+s*t)})):null},$c.prototype=Cc.prototype={constructor:$c,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var Hc=Array.prototype,Pc=Hc.map,qc=Hc.slice,Rc={name:"implicit"};function Xc(){var t=Cc(),i=[],s=[],n=Rc;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==Rc)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=Cc();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=qc.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return Xc(i,s).unknown(n)},Dc.apply(r,arguments),r}function Fc(){var t,i,s=Xc().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=nc(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return Fc(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},Dc.apply(c(),arguments)}function jc(t){var i=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return jc(i())},t}function Gc(){return jc(Fc.apply(null,arguments).paddingInner(1))}function Vc(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function Yc(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function Kc(){}var Bc="\\s*([+-]?\\d+)\\s*",Uc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jc=/^#([0-9a-f]{3,8})$/,Qc=new RegExp("^rgb\\("+[Bc,Bc,Bc]+"\\)$"),tl=new RegExp("^rgb\\("+[Zc,Zc,Zc]+"\\)$"),il=new RegExp("^rgba\\("+[Bc,Bc,Bc,Uc]+"\\)$"),sl=new RegExp("^rgba\\("+[Zc,Zc,Zc,Uc]+"\\)$"),nl=new RegExp("^hsl\\("+[Uc,Zc,Zc]+"\\)$"),rl=new RegExp("^hsla\\("+[Uc,Zc,Zc,Uc]+"\\)$"),el={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hl(){return this.rgb().formatHex()}function al(){return this.rgb().formatRgb()}function ol(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=Jc.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?ul(i):3===s?new dl(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?cl(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?cl(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Qc.exec(t))?new dl(i[1],i[2],i[3],1):(i=tl.exec(t))?new dl(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=il.exec(t))?cl(i[1],i[2],i[3],i[4]):(i=sl.exec(t))?cl(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=nl.exec(t))?wl(i[1],i[2]/100,i[3]/100,1):(i=rl.exec(t))?wl(i[1],i[2]/100,i[3]/100,i[4]):el.hasOwnProperty(t)?ul(el[t]):"transparent"===t?new dl(NaN,NaN,NaN,0):null}function ul(t){return new dl(t>>16&255,t>>8&255,255&t,1)}function cl(t,i,s,n){return n<=0&&(t=i=s=NaN),new dl(t,i,s,n)}function ll(t){return t instanceof Kc||(t=ol(t)),t?new dl((t=t.rgb()).r,t.g,t.b,t.opacity):new dl}function fl(t,i,s,n){return 1===arguments.length?ll(t):new dl(t,i,s,null==n?1:n)}function dl(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function vl(){return"#"+yl(this.r)+yl(this.g)+yl(this.b)}function pl(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function yl(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function wl(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new gl(t,i,s,n)}function ml(t){if(t instanceof gl)return new gl(t.h,t.s,t.l,t.opacity);if(t instanceof Kc||(t=ol(t)),!t)return new gl;if(t instanceof gl)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new gl(h,a,o,t.opacity)}function gl(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function bl(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function Ml(t){return function(){return t}}function kl(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):Ml(isNaN(t)?i:t)}Vc(Kc,ol,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:hl,formatHex:hl,formatHsl:function(){return ml(this).formatHsl()},formatRgb:al,toString:al}),Vc(dl,fl,Yc(Kc,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new dl(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new dl(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vl,formatHex:vl,formatRgb:pl,toString:pl})),Vc(gl,(function(t,i,s,n){return 1===arguments.length?ml(t):new gl(t,i,s,null==n?1:n)}),Yc(Kc,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new gl(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new gl(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new dl(bl(t>=240?t-240:t+120,r,n),bl(t,r,n),bl(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const xl=function t(i){var s=function(t){return 1==(t=+t)?kl:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):Ml(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=fl(t)).r,(i=fl(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=kl(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function Al(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function Nl(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=$l(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function Wl(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function Ll(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function Sl(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=$l(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var Tl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,El=new RegExp(Tl.source,"g");function Dl(t,i){var s,n,r,e=Tl.lastIndex=El.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=Tl.exec(t))&&(n=El.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:Ll(s,n)})),e=El.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function $l(t,i){var s,n=typeof i;return null==i||"boolean"===n?Ml(i):("number"===n?Ll:"string"===n?(s=ol(i))?(i=s,xl):Dl:i instanceof ol?xl:i instanceof Date?Wl:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?Al:Array.isArray(i)?Nl:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?Sl:Ll)(t,i)}function Cl(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var Ol,Il,zl,_l,Hl=180/Math.PI,Pl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ql(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*Hl,skewX:Math.atan(o)*Hl,scaleX:h,scaleY:a}}function Rl(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:Ll(t,r)},{i:o-2,x:Ll(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:Ll(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:Ll(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:Ll(t,s)},{i:a-2,x:Ll(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var Xl=Rl((function(t){return"none"===t?Pl:(Ol||(Ol=document.createElement("DIV"),Il=document.documentElement,zl=document.defaultView),Ol.style.transform=t,t=zl.getComputedStyle(Il.appendChild(Ol),null).getPropertyValue("transform"),Il.removeChild(Ol),ql(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Fl=Rl((function(t){return null==t?Pl:(_l||(_l=document.createElementNS("http://www.w3.org/2000/svg","g")),_l.setAttribute("transform",t),(t=_l.transform.baseVal.consolidate())?ql((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Pl)}),", ",")",")");function jl(t){return+t}var Gl=[0,1];function Vl(t){return t}function Yl(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function Kl(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function Bl(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=Yl(r,n),e=s(h,e)):(n=Yl(n,r),e=s(e,h)),function(t){return e(n(t))}}function Ul(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=Yl(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=sc(t,i,1,n)-1;return e[s](r[s](i))}}function Zl(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Jl(t,i){return function(){var t,i,s,n,r,e,h=Gl,a=Gl,o=$l,u=Vl;function c(){return n=Math.min(h.length,a.length)>2?Ul:Bl,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),Ll)))(s)))},l.domain=function(t){return arguments.length?(h=Pc.call(t,jl),u===Vl||(u=Kl(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=qc.call(t),c()):a.slice()},l.rangeRound=function(t){return a=qc.call(t),o=Cl,c()},l.clamp=function(t){return arguments.length?(u=t?Kl(h):Vl,l):u!==Vl},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function Ql(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function tf(t){return(t=Ql(Math.abs(t)))?t[1]:NaN}var sf,nf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rf(t){if(!(i=nf.exec(t)))throw new Error("invalid format: "+t);var i;return new ef({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function ef(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function hf(t,i){var s=Ql(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}rf.prototype=ef.prototype,ef.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const af={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return hf(100*t,i)},r:hf,s:function(t,i){var s=Ql(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(sf=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+Ql(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function of(t){return t}var uf,cf,lf,ff=Array.prototype.map,df=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vf(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=ac(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=oc(t,i,s);switch((n=rf(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(tf(i)/3)))-tf(Math.abs(t)))}(e,h))||(n.precision=r),lf(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,tf(i)-tf(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-tf(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return cf(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=ac(a,o,s))>0?n=ac(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=ac(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function pf(){var t=Jl(Vl,Vl);return t.copy=function(){return Zl(t,pf())},Dc.apply(t,arguments),vf(t)}function yf(t){if(0<=t.y&&t.y<100){var i=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return i.setFullYear(t.y),i}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wf(t){if(0<=t.y&&t.y<100){var i=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return i.setUTCFullYear(t.y),i}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function mf(t,i,s){return{y:t,m:i,d:s,H:0,M:0,S:0,L:0}}uf=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?of:(i=ff.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?of:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(ff.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=rf(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,m=t.type;"n"===m?(p=!0,m="g"):af[m]||(void 0===y&&(y=12),w=!0,m="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var g="$"===f?r:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?e:/[%p]/.test(m)?o:"",M=af[m],k=/[defgprs%]/.test(m);function x(t){var r,e,o,f=g,x=b;if("c"===m)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===m?df[8+sf/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var N=f.length+t.length+x.length,W=N<v?new Array(v-N+1).join(i):"";switch(p&&d&&(t=n(W+t,W.length?v-x.length:1/0),W=""),s){case"<":t=f+t+x+W;break;case"=":t=f+W+t+x;break;case"^":t=W.slice(0,N=W.length>>1)+f+t+x+W.slice(N);break;default:t=W+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=rf(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(tf(i)/3))),r=Math.pow(10,-n),e=df[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),cf=uf.format,lf=uf.formatPrefix;var gf,bf,Mf={"-":"",_:" ",0:"0"},kf=/^\s*\d+/,xf=/^%/,Af=/[\\^$*+?|[\]().{}]/g;function Nf(t,i,s){var n=t<0?"-":"",r=(n?-t:t)+"",e=r.length;return n+(e<s?new Array(s-e+1).join(i)+r:r)}function Wf(t){return t.replace(Af,"\\$&")}function Lf(t){return new RegExp("^(?:"+t.map(Wf).join("|")+")","i")}function Sf(t){for(var i={},s=-1,n=t.length;++s<n;)i[t[s].toLowerCase()]=s;return i}function Tf(t,i,s){var n=kf.exec(i.slice(s,s+1));return n?(t.w=+n[0],s+n[0].length):-1}function Ef(t,i,s){var n=kf.exec(i.slice(s,s+1));return n?(t.u=+n[0],s+n[0].length):-1}function Df(t,i,s){var n=kf.exec(i.slice(s,s+2));return n?(t.U=+n[0],s+n[0].length):-1}function $f(t,i,s){var n=kf.exec(i.slice(s,s+2));return n?(t.V=+n[0],s+n[0].length):-1}function Cf(t,i,s){var n=kf.exec(i.slice(s,s+2));return n?(t.W=+n[0],s+n[0].length):-1}function Of(t,i,s){var n=kf.exec(i.slice(s,s+4));return n?(t.y=+n[0],s+n[0].length):-1}function If(t,i,s){var n=kf.exec(i.slice(s,s+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),s+n[0].length):-1}function zf(t,i,s){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(s,s+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),s+n[0].length):-1}function _f(t,i,s){var n=kf.exec(i.slice(s,s+1));return n?(t.q=3*n[0]-3,s+n[0].length):-1}function Hf(t,i,s){var n=kf.exec(i.slice(s,s+2));return n?(t.m=n[0]-1,s+n[0].length):-1}function Pf(t,i,s){var n=kf.exec(i.slice(s,s+2));return n?(t.d=+n[0],s+n[0].length):-1}function qf(t,i,s){var n=kf.exec(i.slice(s,s+3));return n?(t.m=0,t.d=+n[0],s+n[0].length):-1}function Rf(t,i,s){var n=kf.exec(i.slice(s,s+2));return n?(t.H=+n[0],s+n[0].length):-1}function Xf(t,i,s){var n=kf.exec(i.slice(s,s+2));return n?(t.M=+n[0],s+n[0].length):-1}function Ff(t,i,s){var n=kf.exec(i.slice(s,s+2));return n?(t.S=+n[0],s+n[0].length):-1}function jf(t,i,s){var n=kf.exec(i.slice(s,s+3));return n?(t.L=+n[0],s+n[0].length):-1}function Gf(t,i,s){var n=kf.exec(i.slice(s,s+6));return n?(t.L=Math.floor(n[0]/1e3),s+n[0].length):-1}function Vf(t,i,s){var n=xf.exec(i.slice(s,s+1));return n?s+n[0].length:-1}function Yf(t,i,s){var n=kf.exec(i.slice(s));return n?(t.Q=+n[0],s+n[0].length):-1}function Kf(t,i,s){var n=kf.exec(i.slice(s));return n?(t.s=+n[0],s+n[0].length):-1}function Bf(t,i){return Nf(t.getDate(),i,2)}function Uf(t,i){return Nf(t.getHours(),i,2)}function Zf(t,i){return Nf(t.getHours()%12||12,i,2)}function Jf(t,i){return Nf(1+mc.count(Ac(t),t),i,3)}function Qf(t,i){return Nf(t.getMilliseconds(),i,3)}function td(t,i){return Qf(t,i)+"000"}function id(t,i){return Nf(t.getMonth()+1,i,2)}function sd(t,i){return Nf(t.getMinutes(),i,2)}function nd(t,i){return Nf(t.getSeconds(),i,2)}function rd(t){var i=t.getDay();return 0===i?7:i}function ed(t,i){return Nf(bc.count(Ac(t)-1,t),i,2)}function hd(t){var i=t.getDay();return i>=4||0===i?kc(t):kc.ceil(t)}function ad(t,i){return t=hd(t),Nf(kc.count(Ac(t),t)+(4===Ac(t).getDay()),i,2)}function od(t){return t.getDay()}function ud(t,i){return Nf(Mc.count(Ac(t)-1,t),i,2)}function cd(t,i){return Nf(t.getFullYear()%100,i,2)}function ld(t,i){return Nf((t=hd(t)).getFullYear()%100,i,2)}function fd(t,i){return Nf(t.getFullYear()%1e4,i,4)}function dd(t,i){var s=t.getDay();return Nf((t=s>=4||0===s?kc(t):kc.ceil(t)).getFullYear()%1e4,i,4)}function vd(t){var i=t.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+Nf(i/60|0,"0",2)+Nf(i%60,"0",2)}function pd(t,i){return Nf(t.getUTCDate(),i,2)}function yd(t,i){return Nf(t.getUTCHours(),i,2)}function wd(t,i){return Nf(t.getUTCHours()%12||12,i,2)}function md(t,i){return Nf(1+Nc.count(Ec(t),t),i,3)}function gd(t,i){return Nf(t.getUTCMilliseconds(),i,3)}function bd(t,i){return gd(t,i)+"000"}function Md(t,i){return Nf(t.getUTCMonth()+1,i,2)}function kd(t,i){return Nf(t.getUTCMinutes(),i,2)}function xd(t,i){return Nf(t.getUTCSeconds(),i,2)}function Ad(t){var i=t.getUTCDay();return 0===i?7:i}function Nd(t,i){return Nf(Lc.count(Ec(t)-1,t),i,2)}function Wd(t){var i=t.getUTCDay();return i>=4||0===i?Tc(t):Tc.ceil(t)}function Ld(t,i){return t=Wd(t),Nf(Tc.count(Ec(t),t)+(4===Ec(t).getUTCDay()),i,2)}function Sd(t){return t.getUTCDay()}function Td(t,i){return Nf(Sc.count(Ec(t)-1,t),i,2)}function Ed(t,i){return Nf(t.getUTCFullYear()%100,i,2)}function Dd(t,i){return Nf((t=Wd(t)).getUTCFullYear()%100,i,2)}function $d(t,i){return Nf(t.getUTCFullYear()%1e4,i,4)}function Cd(t,i){var s=t.getUTCDay();return Nf((t=s>=4||0===s?Tc(t):Tc.ceil(t)).getUTCFullYear()%1e4,i,4)}function Od(){return"+0000"}function Id(){return"%"}function zd(t){return+t}function _d(t){return Math.floor(+t/1e3)}function Hd(t){return new Date(t)}function Pd(t){return t instanceof Date?+t:+new Date(+t)}function qd(t,i,s,n,r,e,h,a,o){var u=Jl(Vl,Vl),c=u.invert,l=u.domain,f=o(".%L"),d=o(":%S"),v=o("%I:%M"),p=o("%I %p"),y=o("%a %d"),w=o("%b %d"),m=o("%B"),g=o("%Y"),b=[[h,1,1e3],[h,5,5e3],[h,15,15e3],[h,30,3e4],[e,1,6e4],[e,5,3e5],[e,15,9e5],[e,30,18e5],[r,1,36e5],[r,3,108e5],[r,6,216e5],[r,12,432e5],[n,1,864e5],[n,2,1728e5],[s,1,6048e5],[i,1,2592e6],[i,3,7776e6],[t,1,31536e6]];function M(a){return(h(a)<a?f:e(a)<a?d:r(a)<a?v:n(a)<a?p:i(a)<a?s(a)<a?y:w:t(a)<a?m:g)(a)}function k(i,s,n,r){if(null==i&&(i=10),"number"==typeof i){var e=Math.abs(n-s)/i,h=ic((function(t){return t[2]})).right(b,e);h===b.length?(r=oc(s/31536e6,n/31536e6,i),i=t):h?(r=(h=b[e/b[h-1][2]<b[h][2]/e?h-1:h])[1],i=h[0]):(r=Math.max(oc(s,n,i),1),i=a)}return null==r?i:i.every(r)}return u.invert=function(t){return new Date(c(t))},u.domain=function(t){return arguments.length?l(Pc.call(t,Pd)):l().map(Hd)},u.ticks=function(t,i){var s,n=l(),r=n[0],e=n[n.length-1],h=e<r;return h&&(s=r,r=e,e=s),s=(s=k(t,r,e,i))?s.range(r,e+1):[],h?s.reverse():s},u.tickFormat=function(t,i){return null==i?M:o(i)},u.nice=function(t,i){var s=l();return(t=k(t,s[0],s[s.length-1],i))?l(function(t,i){var s,n=0,r=(t=t.slice()).length-1,e=t[n],h=t[r];return h<e&&(s=n,n=r,r=s,s=e,e=h,h=s),t[n]=i.floor(e),t[r]=i.ceil(h),t}(s,t)):u},u.copy=function(){return Zl(u,qd(t,i,s,n,r,e,h,a,o))},u}gf=function(t){var i=t.dateTime,s=t.date,n=t.time,r=t.periods,e=t.days,h=t.shortDays,a=t.months,o=t.shortMonths,u=Lf(r),c=Sf(r),l=Lf(e),f=Sf(e),d=Lf(h),v=Sf(h),p=Lf(a),y=Sf(a),w=Lf(o),m=Sf(o),g={a:function(t){return h[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return o[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Bf,e:Bf,f:td,g:ld,G:dd,H:Uf,I:Zf,j:Jf,L:Qf,m:id,M:sd,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:zd,s:_d,S:nd,u:rd,U:ed,V:ad,w:od,W:ud,x:null,X:null,y:cd,Y:fd,Z:vd,"%":Id},b={a:function(t){return h[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return o[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:pd,e:pd,f:bd,g:Dd,G:Cd,H:yd,I:wd,j:md,L:gd,m:Md,M:kd,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:zd,s:_d,S:xd,u:Ad,U:Nd,V:Ld,w:Sd,W:Td,x:null,X:null,y:Ed,Y:$d,Z:Od,"%":Id},M={a:function(t,i,s){var n=d.exec(i.slice(s));return n?(t.w=v[n[0].toLowerCase()],s+n[0].length):-1},A:function(t,i,s){var n=l.exec(i.slice(s));return n?(t.w=f[n[0].toLowerCase()],s+n[0].length):-1},b:function(t,i,s){var n=w.exec(i.slice(s));return n?(t.m=m[n[0].toLowerCase()],s+n[0].length):-1},B:function(t,i,s){var n=p.exec(i.slice(s));return n?(t.m=y[n[0].toLowerCase()],s+n[0].length):-1},c:function(t,s,n){return A(t,i,s,n)},d:Pf,e:Pf,f:Gf,g:If,G:Of,H:Rf,I:Rf,j:qf,L:jf,m:Hf,M:Xf,p:function(t,i,s){var n=u.exec(i.slice(s));return n?(t.p=c[n[0].toLowerCase()],s+n[0].length):-1},q:_f,Q:Yf,s:Kf,S:Ff,u:Ef,U:Df,V:$f,w:Tf,W:Cf,x:function(t,i,n){return A(t,s,i,n)},X:function(t,i,s){return A(t,n,i,s)},y:If,Y:Of,Z:zf,"%":Vf};function k(t,i){return function(s){var n,r,e,h=[],a=-1,o=0,u=t.length;for(s instanceof Date||(s=new Date(+s));++a<u;)37===t.charCodeAt(a)&&(h.push(t.slice(o,a)),null!=(r=Mf[n=t.charAt(++a)])?n=t.charAt(++a):r="e"===n?" ":"0",(e=i[n])&&(n=e(s,r)),h.push(n),o=a+1);return h.push(t.slice(o,a)),h.join("")}}function x(t,i){return function(s){var n,r,e=mf(1900,void 0,1);if(A(e,t,s+="",0)!=s.length)return null;if("Q"in e)return new Date(e.Q);if("s"in e)return new Date(1e3*e.s+("L"in e?e.L:0));if(!i||"Z"in e||(e.Z=0),"p"in e&&(e.H=e.H%12+12*e.p),void 0===e.m&&(e.m="q"in e?e.q:0),"V"in e){if(e.V<1||e.V>53)return null;"w"in e||(e.w=1),"Z"in e?(r=(n=wf(mf(e.y,0,1))).getUTCDay(),n=r>4||0===r?Sc.ceil(n):Sc(n),n=Nc.offset(n,7*(e.V-1)),e.y=n.getUTCFullYear(),e.m=n.getUTCMonth(),e.d=n.getUTCDate()+(e.w+6)%7):(r=(n=yf(mf(e.y,0,1))).getDay(),n=r>4||0===r?Mc.ceil(n):Mc(n),n=mc.offset(n,7*(e.V-1)),e.y=n.getFullYear(),e.m=n.getMonth(),e.d=n.getDate()+(e.w+6)%7)}else("W"in e||"U"in e)&&("w"in e||(e.w="u"in e?e.u%7:"W"in e?1:0),r="Z"in e?wf(mf(e.y,0,1)).getUTCDay():yf(mf(e.y,0,1)).getDay(),e.m=0,e.d="W"in e?(e.w+6)%7+7*e.W-(r+5)%7:e.w+7*e.U-(r+6)%7);return"Z"in e?(e.H+=e.Z/100|0,e.M+=e.Z%100,wf(e)):yf(e)}}function A(t,i,s,n){for(var r,e,h=0,a=i.length,o=s.length;h<a;){if(n>=o)return-1;if(37===(r=i.charCodeAt(h++))){if(r=i.charAt(h++),!(e=M[r in Mf?i.charAt(h++):r])||(n=e(t,s,n))<0)return-1}else if(r!=s.charCodeAt(n++))return-1}return n}return(g.x=k(s,g),g.X=k(n,g),g.c=k(i,g),b.x=k(s,b),b.X=k(n,b),b.c=k(i,b),{format:function(t){var i=k(t+="",g);return i.toString=function(){return t},i},parse:function(t){var i=x(t+="",!1);return i.toString=function(){return t},i},utcFormat:function(t){var i=k(t+="",b);return i.toString=function(){return t},i},utcParse:function(t){var i=x(t+="",!0);return i.toString=function(){return t},i}})}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),bf=gf.format;const{propDefaultValues:Rd}=r;class Xd{}function Fd(t){return 1-Math.sqrt(1-t*t)}Xd.mainTitle="Dumbbell Plot Title",Xd.subTitle="This is the dumbbell plot's subtitle",Xd.height=300,Xd.width=650,Xd.margin={top:3,bottom:3,right:6.5,left:6.5},Xd.padding={top:20,bottom:50,right:50,left:50},Xd.ordinalAccessor="date",Xd.valueAccessor="value",Xd.seriesAccessor="category",Xd.focusMarker={key:"",sizeFromBar:12},Xd.marker={visible:!0,type:"dot",sizeFromBar:8},Xd.barStyle={opacity:1,width:1,colorRule:"default"},Xd.differenceLabel={visible:!1,placement:"left",calculation:"difference",format:"0[.][0][0]a",collisionHideOnly:!1},Xd.layout=Rd.layout,Xd.accessibility=Rd.accessibility,Xd.animationConfig=Rd.animationConfig,Xd.highestHeadingLevel=Rd.highestHeadingLevel,Xd.sortOrder=Rd.sortOrder,Xd.xAxis=Rd.xAxisDate,Xd.yAxis=Rd.yAxis,Xd.showBaselineX=Rd.showBaselineFalse,Xd.showBaselineY=Rd.showBaselineFalse,Xd.wrapLabel=Rd.wrapLabel,Xd.colorPalette=Rd.colorPaletteCategorical,Xd.hoverStyle=Rd.hoverStyle,Xd.clickStyle=Rd.clickStyle,Xd.referenceStyle=Rd.referenceStyle,Xd.cursor=Rd.cursor,Xd.roundedCorner=Rd.roundedCorner,Xd.barIntervalRatio=Rd.barIntervalRatio,Xd.hoverOpacity=Rd.hoverOpacity,Xd.dataLabel=Rd.dataLabelEnds,Xd.legend=Rd.hiddenLegend,Xd.tooltipLabel=Rd.tooltipLabel,Xd.showTooltip=Rd.showTooltip,Xd.suppressEvents=Rd.suppressEvents,Xd.referenceLines=Rd.referenceLines,Xd.annotations=Rd.annotations,Xd.clickHighlight=Rd.clickHighlight,Xd.seriesLabel=Rd.seriesLabel;var jd={value:function(){}};function Gd(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Vd(n)}function Vd(t){this._=t}function Yd(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function Kd(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function Bd(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=jd,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}Vd.prototype=Gd.prototype={constructor:Vd,on:function(t,i){var s,n=this._,r=Yd(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=Bd(n[s],t.name,i);else if(null==i)for(s in n)n[s]=Bd(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=Kd(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new Vd(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var Ud,Zd,Jd=0,Qd=0,tv=0,iv=0,sv=0,nv=0,rv="object"==typeof performance&&performance.now?performance:Date,ev="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function hv(){return sv||(ev(av),sv=rv.now()+nv)}function av(){sv=0}function ov(){this._call=this._time=this._next=null}function uv(t,i,s){var n=new ov;return n.restart(t,i,s),n}function cv(){sv=(iv=rv.now())+nv,Jd=Qd=0;try{!function(){hv(),++Jd;for(var t,i=Ud;i;)(t=sv-i._time)>=0&&i._call.call(null,t),i=i._next;--Jd}()}finally{Jd=0,function(){for(var t,i,s=Ud,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:Ud=i);Zd=t,fv(n)}(),sv=0}}function lv(){var t=rv.now(),i=t-iv;i>1e3&&(nv-=i,iv=t)}function fv(t){Jd||(Qd&&(Qd=clearTimeout(Qd)),t-sv>24?(t<1/0&&(Qd=setTimeout(cv,t-rv.now()-nv)),tv&&(tv=clearInterval(tv))):(tv||(iv=rv.now(),tv=setInterval(lv,1e3)),Jd=1,ev(cv)))}function dv(t,i,s){var n=new ov;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}ov.prototype=uv.prototype={constructor:ov,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?hv():+s)+(null==i?0:+i),this._next||Zd===this||(Zd?Zd._next=this:Ud=this,Zd=this),this._call=t,this._time=s,fv()},stop:function(){this._call&&(this._call=null,this._time=1/0,fv())}};var vv=Gd("start","end","interrupt"),pv=[];function yv(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return dv(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(dv((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=uv((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:vv,tween:pv,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function wv(t,i){var s=gv(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function mv(t,i){var s=gv(t,i);if(s.state>2)throw new Error("too late; already started");return s}function gv(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function bv(t,i){var s,n;return function(){var r=mv(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function Mv(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=mv(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function kv(t,i,s){var n=t._id;return t.each((function(){var t=mv(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return gv(t,n).value[i]}}function xv(t,i){var s;return("number"==typeof i?Ll:i instanceof ol?xl:(s=ol(i))?(i=s,xl):Dl)(t,i)}function Av(t){return function(){this.removeAttribute(t)}}function Nv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wv(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function Lv(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function Sv(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function Tv(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function Ev(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function Dv(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function $v(t,i){return function(){wv(this,t).delay=+i.apply(this,arguments)}}function Cv(t,i){return i=+i,function(){wv(this,t).delay=i}}function Ov(t,i){return function(){mv(this,t).duration=+i.apply(this,arguments)}}function Iv(t,i){return i=+i,function(){mv(this,t).duration=i}}function zv(t,i){if("function"!=typeof i)throw new Error;return function(){mv(this,t).ease=i}}function _v(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?wv:mv;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var Hv=Ju.prototype.constructor;function Pv(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var qv=0;function Rv(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function Xv(){return++qv}var Fv=Ju.prototype;Rv.prototype=function(t){return Ju().transition(t)}.prototype={constructor:Rv,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=Zo(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,yv(l[f],i,s,f,l,gv(a,s)));return new Rv(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=Qo(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=gv(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&yv(f,i,s,p,d,v);e.push(d),h.push(o)}return new Rv(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=tu(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new Rv(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new Rv(e,this._parents,this._name,this._id)},selection:function(){return new Hv(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=Xv(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=gv(h,i);yv(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Rv(n,this._parents,t,s)},call:Fv.call,nodes:Fv.nodes,node:Fv.node,size:Fv.size,empty:Fv.empty,each:Fv.each,on:function(t,i){var s=this._id;return arguments.length<2?gv(this.node(),s).on.on(t):this.each(_v(s,t,i))},attr:function(t,i){var s=Vo(t),n="transform"===s?Fl:xv;return this.attrTween(t,"function"==typeof i?(s.local?Tv:Sv)(s,n,kv(this,"attr."+t,i)):null==i?(s.local?Nv:Av)(s):(s.local?Lv:Wv)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=Vo(t);return this.tween(s,(n.local?Ev:Dv)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?Xl:xv;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=yu(this,t),h=(this.style.removeProperty(t),yu(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=yu(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=yu(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,kv(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=yu(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,Pv(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(kv(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=gv(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?bv:Mv)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?$v:Cv)(i,t)):gv(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?Ov:Iv)(i,t)):gv(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(zv(i,t)):gv(this.node(),i).ease}};var jv={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Gv(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return jv.time=hv(),jv;return s}Ju.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},Ju.prototype.transition=function(t){var i,s;t instanceof Rv?(i=t._id,t=t._name):(i=Xv(),(s=jv).time=hv(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&yv(h,t,i,u,a,s||Gv(h,i));return new Rv(n,this._parents,t,i)};var Vv="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Yv=new Uint8Array(16);function Kv(){if(!Vv)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return Vv(Yv)}for(var Bv=[],Uv=0;Uv<256;++Uv)Bv[Uv]=(Uv+256).toString(16).substr(1);function Zv(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||Kv)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[Bv[t[i++]],Bv[t[i++]],Bv[t[i++]],Bv[t[i++]],"-",Bv[t[i++]],Bv[t[i++]],"-",Bv[t[i++]],Bv[t[i++]],"-",Bv[t[i++]],Bv[t[i++]],"-",Bv[t[i++]],Bv[t[i++]],Bv[t[i++]],Bv[t[i++]],Bv[t[i++]],Bv[t[i++]]].join("")}(r)}const{getAccessibleStrokes:Jv,ensureTextContrast:Qv,createTextStrokeFilter:tp,createUrl:ip,initializeDescriptionRoot:sp,initializeElementAccess:np,setElementFocusHandler:rp,setElementAccessID:ep,setAccessibilityController:hp,hideNonessentialGroups:ap,setAccessTitle:op,setAccessSubtitle:up,setAccessLongDescription:cp,setAccessExecutiveSummary:lp,setAccessPurpose:fp,setAccessContext:dp,setAccessStatistics:vp,setAccessChartCounts:pp,setAccessXAxis:yp,setAccessYAxis:wp,setAccessStructure:mp,setAccessAnnotation:gp,retainAccessFocus:bp,checkAccessFocus:Mp,setElementInteractionAccessState:kp,setAccessibilityDescriptionWidth:xp,drawTooltip:Ap,annotate:Np,chartAccessors:Wp,checkInteraction:Lp,checkClicked:Sp,checkHovered:Tp,convertVisaColor:Ep,drawAxis:Dp,drawGrid:$p,drawLegend:Cp,setLegendInteractionState:Op,formatDataLabel:Ip,getColors:zp,getLicenses:_p,getPadding:Hp,getScopedData:Pp,initTooltipStyle:qp,overrideTitleTooltip:Rp,placeDataLabels:Xp,scopeDataKeys:Fp,visaColors:jp,transitionEndAll:Gp,validateAccessibilityProps:Vp,findTagLevel:Yp,prepareRenderChange:Kp,roundTo:Bp,getTextWidth:Up,resolveLabelCollision:Zp}=r,Jp=class{constructor(s){t(this,s),this.mainTitle=Xd.mainTitle,this.subTitle=Xd.subTitle,this.height=Xd.height,this.width=Xd.width,this.margin=Xd.margin,this.padding=Xd.padding,this.highestHeadingLevel=Xd.highestHeadingLevel,this.ordinalAccessor=Xd.ordinalAccessor,this.valueAccessor=Xd.valueAccessor,this.seriesAccessor=Xd.seriesAccessor,this.sortOrder=Xd.sortOrder,this.xAxis=Xd.xAxis,this.yAxis=Xd.yAxis,this.wrapLabel=Xd.wrapLabel,this.layout=Xd.layout,this.showBaselineX=Xd.showBaselineX,this.showBaselineY=Xd.showBaselineY,this.colorPalette=Xd.colorPalette,this.hoverStyle=Xd.hoverStyle,this.hoverOpacity=Xd.hoverOpacity,this.animationConfig=Xd.animationConfig,this.clickStyle=Xd.clickStyle,this.referenceStyle=Xd.referenceStyle,this.cursor=Xd.cursor,this.focusMarker=Xd.focusMarker,this.marker=Xd.marker,this.barStyle=Xd.barStyle,this.dataLabel=Xd.dataLabel,this.seriesLabel=Xd.seriesLabel,this.differenceLabel=Xd.differenceLabel,this.showTooltip=Xd.showTooltip,this.tooltipLabel=Xd.tooltipLabel,this.accessibility=Xd.accessibility,this.legend=Xd.legend,this.annotations=Xd.annotations,this.referenceLines=Xd.referenceLines,this.suppressEvents=Xd.suppressEvents,this.clickHighlight=Xd.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.updated=!0,this.time={timemillisecond:vc,timesecond:pc,timeminute:yc,timehour:wc,timeday:mc,timeweek:bc,timemonth:xc,timeyear:Ac},this.shouldUpdateLayout=!1,this.shouldValidate=!1,this.shouldUpdateAnnotations=!1,this.shouldUpdateReferenceLines=!1,this.shouldResetRoot=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateYGrid=!1,this.shouldUpdateScales=!1,this.shouldUpdateBaseline=!1,this.shouldCheckValueAxis=!1,this.shouldCheckLabelAxis=!1,this.shouldSetColors=!1,this.shouldUpdateLegend=!1,this.shouldSetGlobalSelections=!1,this.shouldSetSeriesSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldUpdateData=!1,this.shouldEnterUpdateExit=!1,this.shouldEnterUpdateExitMarkers=!1,this.shouldUpdateMarkerOpacity=!1,this.shouldUpdateGeometries=!1,this.shouldUpdateSeriesLabels=!1,this.shouldUpdateDifferenceLabels=!1,this.shouldUpdateLabels=!1,this.shouldValidateInteractionKeys=!1,this.shouldUpdateTableData=!1,this.shouldValidateDataLabelPlacement=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldAddStrokeUnder=!1,this.shouldUpdateBaselineX=!1,this.shouldUpdateBaselineY=!1,this.shouldUpdateLegendData=!1,this.shouldUpdateMarkerIDs=!1,this.shouldValidateLayout=!1,this.shouldValidateSeriesLabelPlacement=!1,this.shouldValidateDiffLabelPlacement=!1,this.shouldBindInteractivity=!1,this.shouldBindLegendInteractivity=!1,this.shouldBindSeriesInteractivity=!1,this.shouldUpdateCursor=!1,this.shouldSetLegendCursor=!1,this.shouldSetSeriesCursor=!1,this.shouldSetLabelOpacity=!1,this.shouldSetSeriesLabelOpacity=!1,this.shouldSetDifferenceLabelOpacity=!1,this.shouldSetSelectionClass=!1,this.shouldDrawInteractionState=!1,this.shouldRenderMarkerGroup=!1,this.shouldUpdateBarStyle=!1,this.shouldUpdateMarkerSize=!1,this.shouldUpdateDiffLabelColor=!1,this.shouldUpdateMarkerStyle=!1,this.shouldDrawMarkerGeometries=!1,this.shouldUpdateMarkerData=!1,this.shouldUpdateSeriesData=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityAttributes=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.topLevel="h2",this.bottomLevel="p",this.strokes={},this.handleMarkerColors=(t,i,s)=>{const n=this.rawColors[t.referenceIndex]||this.rawColors[0],r=i<2&&this.clickHighlight.length?this.clickStyle.color||n:i<4?n:this.hoverStyle.color||n,e=this.colorArr[t.referenceIndex]||this.colorArr[0],h=i<2&&this.clickHighlight.length?this.clickStyle.color||e:i<4?e:this.hoverStyle.color||e;return Qu(s[i]).attr("fill",h),this.accessibility.hideStrokes?h:this.strokes[r.toLowerCase()]},this.handleSeriesLabelColors=(t,i)=>{let s,n;this.seriesInteraction&&(s=Tp(t,this.hoverHighlight,this.innerInteractionKeys),n=Sp(t,this.clickHighlight,this.innerInteractionKeys));const r=this.rawColors[i]||this.rawColors[0];return this.textColors[(this.seriesInteraction?n&&this.clickHighlight.length?this.clickStyle.color||r:s&&this.hoverHighlight&&this.hoverStyle.color||r:r).toLowerCase()]},this.handleLabelColors=(t,i)=>{const s=Tp(t,this.hoverHighlight,this.innerInteractionKeys),n=Sp(t,this.clickHighlight,this.innerInteractionKeys),r=this.rawColors[i]||this.rawColors[0];return this.textColors[(n&&this.clickHighlight.length?this.clickStyle.color||r:s&&this.hoverHighlight&&this.hoverStyle.color||r).toLowerCase()]},this.handleBarColors=(t,i,s)=>{t.focusMarker=!1,t.values[0][this.seriesAccessor]===this.focusMarker.key?t.focusMarker=0:t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1);const n=Sp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&Sp(t.values[1],this.clickHighlight,this.innerInteractionKeys),r=Tp(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&Tp(t.values[1],this.hoverHighlight,this.innerInteractionKeys),e="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.rawColors[t.greaterIndex]:this.rawColors[2]:this.rawColors[t.focusMarker],h=n&&this.clickHighlight.length?this.clickStyle.color||e:r&&this.hoverHighlight&&this.hoverStyle.color||e,a="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.colorArr[t.greaterIndex]:this.colorArr[2]:this.colorArr[t.focusMarker],o=n&&this.clickHighlight.length?this.clickStyle.color||a:r&&this.hoverHighlight&&this.hoverStyle.color||a;return Qu(s[i]).attr("fill",o),this.accessibility.hideStrokes?o:this.strokes[h.toLowerCase()]},this.handleBarOpacity=(t,i,s)=>{const n=Lp(t.values[0],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),r=Lp(t.values[1],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),e=n&&r?this.barStyle.opacity:this.hoverOpacity;return Qu(s[i]).attr("stroke-opacity",e),e},this.setBarSize=(t,i,s)=>{const n=Sp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&Sp(t.values[1],this.clickHighlight,this.innerInteractionKeys),r=Tp(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&Tp(t.values[1],this.hoverHighlight,this.innerInteractionKeys),e=this.dumbbellInteraction?n?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:r&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width,h=this.x(t.values[0][this.xAccessor]),a=this.y(t.values[0][this.yAccessor]),o=this.x(t.values[1][this.xAccessor]),u=this.y(t.values[1][this.yAccessor]),c=this.isVertical?a>u?.001:-.001:0,l=this.isVertical?0:h>o?.001:-.001,f=this.isVertical?e/2:0,d=this.isVertical?0:e/2;return Qu(s[i]).attr("data-barSize",e).attr("data-centerX1",t=>this.x(t.values[0][this.xAccessor])).attr("data-centerY1",t=>this.y(t.values[0][this.yAccessor])).attr("data-centerX2",t=>this.x(t.values[1][this.xAccessor])).attr("data-centerY2",t=>this.y(t.values[1][this.yAccessor])),`M ${h+l} ${a+c} L ${h} ${a} L ${h+f} ${a+d} L ${o+f} ${u+d} L ${o} ${u} L ${o-f} ${u-d} L ${h-f} ${a-d} L ${h} ${a} L ${h+f} ${a+d} L ${o+f} ${u+d} L ${o} ${u} L ${o-l} ${u-c}`},this.setDiffLabelColor=t=>{t.focusMarker=!1,t.values[0][this.seriesAccessor]===this.focusMarker.key?t.focusMarker=0:t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1);const i="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.rawColors[t.greaterIndex]:this.rawColors[2]:this.rawColors[t.focusMarker];let s,n;return this.dumbbellInteraction&&(n=Sp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&Sp(t.values[1],this.clickHighlight,this.innerInteractionKeys),s=Tp(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&Tp(t.values[1],this.hoverHighlight,this.innerInteractionKeys)),this.textColors[(this.dumbbellInteraction?n&&this.clickHighlight.length?this.clickStyle.color||i:s&&this.hoverHighlight&&this.hoverStyle.color||i:i).toLowerCase()]},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}mainTitleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subTitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldUpdateLayout=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateLegendData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateBarStyle=!0,this.shouldSetColors=!0}idWatcher(t,i){this.chartID=t||"dumbbell-plot-"+Zv(),this.dumbbellPlotEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateMarkerIDs=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}ordinalAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateGeometries=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}valueAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldCheckValueAxis=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0}seriesAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateLegendData=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateLegend=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateTableData=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}sortWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0}xAxisWatcher(t,i){const s=!(!t||!t.format)&&t.format,n=!(!i||!i.format)&&i.format,r=!(!t||!t.unit)&&t.unit,e=!(!i||!i.unit)&&i.unit;(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0),s===n&&r===e||(this.shouldUpdateScales=!0,r!==e&&(this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0)),this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0}yAxisWatcher(t,i){(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0),this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0}wrapLabelWatcher(t,i){this.shouldCheckLabelAxis=!0}layoutWatcher(t,i){this.shouldValidateLayout=!0,this.shouldValidateDataLabelPlacement=!0,this.shouldValidateSeriesLabelPlacement=!0,this.shouldUpdateSeriesData=!0,this.shouldValidateDiffLabelPlacement=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0}showBaselineXWatcher(t,i){this.shouldUpdateBaselineX=!0}showBaselineYWatcher(t,i){this.shouldUpdateBaselineY=!0}paletteWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldSetColors=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerStyle=!0,this.shouldUpdateLegend=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDiffLabelColor=!0}hoverStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0}clickStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldSetSeriesCursor=!0}focusMarkerWatcher(t,i){this.shouldDrawMarkerGeometries=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateLabels=!0,(t&&t.sizeFromBar?t.sizeFromBar:0)!==(i&&i.sizeFromBar?i.sizeFromBar:0)&&(this.shouldUpdateMarkerSize=!0),(!(!t||!t.key)&&t.key)!==(!(!i||!i.key)&&i.key)&&(this.shouldUpdateDiffLabelColor=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateBarStyle=!0)}markerWatcher(t,i){(t&&t.visible)!==(i&&i.visible)&&(this.shouldUpdateMarkerOpacity=!0),(!(!t||!t.type)&&t.type)!==(!(!i||!i.type)&&i.type)&&(this.shouldRenderMarkerGroup=!0,this.shouldEnterUpdateExitMarkers=!0),this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateData=!0,this.shouldUpdateLabels=!0,(t&&t.sizeFromBar?t.sizeFromBar:0)!==(i&&i.sizeFromBar?i.sizeFromBar:0)&&(this.shouldUpdateMarkerSize=!0)}barStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateDiffLabelColor=!0,this.shouldDrawInteractionState=!0,(t&&t.width?t.width:0)!==(i&&i.width?i.width:0)&&(this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateSeriesLabels=!0)}dataLabelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0;const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement,r=!(!t||!t.labelAccessor)&&t.labelAccessor,e=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),s!==n&&(this.shouldValidateDataLabelPlacement=!0),r!==e&&(this.shouldValidateDataLabelAccessor=!0)}seriesLabelWatcher(t,i){this.shouldValidateSeriesLabelPlacement=!0,this.shouldUpdateSeriesLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateTableData=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetSeriesLabelOpacity=!0),(!(!t||!t.placement)&&t.placement)!==(!(!i||!i.placement)&&i.placement)&&(this.shouldUpdateSeriesData=!0,this.shouldSetSeriesSelections=!0)}differenceLabelWatcher(t,i){this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateDiffLabelColor=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateTableData=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetDifferenceLabelOpacity=!0),(!(!t||!t.placement)&&t.placement)!==(!(!i||!i.placement)&&i.placement)&&(this.shouldValidateDiffLabelPlacement=!0)}showTooltipWatcher(t,i){this.shouldDrawInteractionState=!0}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerStyle=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateLegend=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldBindLegendInteractivity=!0,this.shouldSetLegendCursor=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldBindLegendInteractivity=!0,this.shouldBindSeriesInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldSetSeriesCursor=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}hoverWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0}clickWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0,(!(!t||1!==t.length)&&t[0]===this.seriesAccessor)!=(!(!i||1!==i.length)&&i[0]===this.seriesAccessor)&&(this.shouldBindSeriesInteractivity=!0,this.shouldSetSeriesCursor=!0,this.shouldBindLegendInteractivity=!0,this.shouldSetLegendCursor=!0)}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.chartID=this.uniqueID||"dumbbell-plot-"+Zv(),this.dumbbellPlotEl.id=this.chartID,this.setTagLevels(),this.checkIfSafari(),this.validateLayout(),this.validateDataLabelPlacement(),this.validateSeriesLabelPlacement(),this.validateDiffLabelPlacement(),this.validateInteractionKeys(),this.prepareData(),this.prepareMarkerData(),this.prepareSeriesData(),this.prepareLegendData(),this.setLayoutData(),this.prepareScales(),this.validateDataLabelAccessor(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.defaults=!0,this.shouldValidateAccessibilityProps(),this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.drawXGrid(),this.drawYGrid(),this.renderMarkerGroup(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterMarkerGeometries(),this.updateMarkerGeometries(),this.exitMarkerGeometries(),this.updateMarkerSize(),this.enterDumbbells(),this.updateDumbbells(),this.exitDumbbells(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterDifferenceLabels(),this.updateDifferenceLabels(),this.exitDifferenceLabels(),this.updateMarkerIds(),this.drawDumbbells(),this.updateInteractionState(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.drawDataLabels(),this.drawSeriesLabels(),this.drawDifferenceLabels(),this.addStrokeUnder(),this.drawReferenceLines(),this.setSelectedClass(),this.setLabelOpacity(),this.bindLegendInteractivity(),this.setLegendCursor(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),this.drawBaselineX(),this.drawBaselineY(),this.onChangeHandler(),ap(this.root.node(),this.dumbbellG.node()),this.setGroupAccessibilityAttributes(),this.setGroupAccessibilityID(),this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldRenderMarkerGroup&&(this.renderMarkerGroup(),this.shouldRenderMarkerGroup=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetSeriesSelections&&(this.setSeriesSelections(),this.shouldSetSeriesSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldEnterUpdateExitMarkers&&(this.enterMarkerGeometries(),this.updateMarkerGeometries(),this.exitMarkerGeometries(),this.shouldEnterUpdateExitMarkers=!1,this.shouldUpdateMarkerOpacity=!1),this.shouldUpdateMarkerOpacity&&(this.updateMarkerGeometries(),this.shouldUpdateMarkerOpacity=!1),this.shouldEnterUpdateExit&&(this.enterDumbbells(),this.updateDumbbells(),this.exitDumbbells(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterDifferenceLabels(),this.updateDifferenceLabels(),this.exitDifferenceLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateMarkerIDs&&(this.updateMarkerIds(),this.shouldUpdateMarkerIDs=!1),this.shouldUpdateGeometries&&(this.drawDumbbells(),this.shouldUpdateGeometries=!1),this.shouldUpdateBarStyle&&(this.updateBarStyle(),this.shouldUpdateBarStyle=!1),this.shouldUpdateMarkerStyle&&(this.updateMarkerStyle(),this.shouldUpdateMarkerStyle=!1),this.shouldUpdateMarkerSize&&(this.updateMarkerSize(),this.shouldUpdateMarkerSize=!1),this.shouldDrawMarkerGeometries&&(this.drawMarkerGeometries(),this.shouldDrawMarkerGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateSeriesLabels&&(this.drawSeriesLabels(),this.shouldUpdateSeriesLabels=!1),this.shouldUpdateDifferenceLabels&&(this.drawDifferenceLabels(),this.shouldUpdateDifferenceLabels=!1),this.shouldAddStrokeUnder&&(this.addStrokeUnder(),this.shouldAddStrokeUnder=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSeriesLabelOpacity&&(this.setSeriesLabelOpacity(),this.shouldSetSeriesLabelOpacity=!1),this.shouldSetDifferenceLabelOpacity&&(this.setDifferenceLabelOpacity(),this.shouldSetDifferenceLabelOpacity=!1),this.shouldUpdateDiffLabelColor&&(this.updateDiffLabelColor(),this.shouldUpdateDiffLabelColor=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldBindLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldBindLegendInteractivity=!1),this.shouldBindSeriesInteractivity&&(this.bindSeriesInteractivity(),this.shouldBindSeriesInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldSetSeriesCursor&&(this.setSeriesCursor(),this.shouldSetSeriesCursor=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateBaselineX&&(this.drawBaselineX(),this.shouldUpdateBaseline=!1),this.shouldUpdateBaselineY&&(this.drawBaselineY(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,Vp(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor],this.seriesInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.seriesAccessor,this.dumbbellInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.ordinalAccessor}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateLayout(){this.layoutOverride=!this.layout||this.data[0][this.ordinalAccessor]instanceof Date?"vertical":this.layout,this.isVertical="vertical"===this.layoutOverride}validateDataLabelPlacement(){this.placement=this.dataLabel.placement,this.isVertical?"left"!==this.placement&&"right"!==this.placement&&"auto"!==this.placement&&(this.placement="ends"):"top"!==this.placement&&"bottom"!==this.placement&&"auto"!==this.placement&&(this.placement="ends")}validateSeriesLabelPlacement(){this.seriesLabelDetails=Object.assign({},this.seriesLabel),this.seriesLabelDetails.placement||(this.seriesLabelDetails.placement=this.isVertical?"right":"top"),this.isVertical&&"right"!==this.seriesLabelDetails.placement&&"left"!==this.seriesLabelDetails.placement&&"auto"!==this.seriesLabelDetails.placement?this.seriesLabelDetails.placement="right":this.isVertical||"top"===this.seriesLabelDetails.placement||"bottom"===this.seriesLabelDetails.placement||"auto"===this.seriesLabelDetails.placement||(this.seriesLabelDetails.placement="top"),this.seriesLabelDetails.label&&this.seriesLabelDetails.label.length||(this.seriesLabelDetails.label="")}validateDiffLabelPlacement(){this.diffLabelDetails=Object.assign({},this.differenceLabel),this.diffLabelDetails.placement||(this.diffLabelDetails.placement=this.isVertical?"left":"top"),this.isVertical&&"right"!==this.diffLabelDetails.placement&&"left"!==this.diffLabelDetails.placement&&"auto"!==this.diffLabelDetails.placement?this.diffLabelDetails.placement="left":this.isVertical||"top"===this.diffLabelDetails.placement||"bottom"===this.diffLabelDetails.placement||"auto"===this.diffLabelDetails.placement||(this.diffLabelDetails.placement="top")}checkIfSafari(){this.url=ip()}setColors(){if(this.colors=this.colors?Ep(this.colors):"",this.rawColors=this.colors||zp(this.colorPalette,3),this.colorArr=this.rawColors,this.textColors={},this.strokes={},this.rawColors.forEach(t=>{if(!this.accessibility.hideStrokes){const i=Jv(t),s=2===i.length?i[1]:i[0];this.strokes[t.toLowerCase()]=s}this.textColors[t.toLowerCase()]=Qv(t,"#ffffff",4.5)}),this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){const t=Jv(this.hoverStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.hoverStyle.color.toLowerCase()]=i}this.textColors[this.hoverStyle.color.toLowerCase()]=Qv(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){const t=Jv(this.clickStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.clickStyle.color.toLowerCase()]=i}this.textColors[this.clickStyle.color.toLowerCase()]=Qv(this.clickStyle.color,"#ffffff",4.5)}}setLayoutData(){this.padding="string"==typeof this.padding?Hp(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}setTableData(){const t=Fp(this,Wp,"dumbbell-plot");this.tableData=Pp(this.data,t),this.tableColumns=Object.keys(t)}prepareData(){const t=function(){var t,i,s,n=[],r=[];function e(s,r,h,a){if(r>=n.length)return null!=t&&s.sort(t),null!=i?i(s):s;for(var o,u,c,l=-1,f=s.length,d=n[r++],v=Cc(),p=h();++l<f;)(c=v.get(o=d(u=s[l])+""))?c.push(u):v.set(o,[u]);return v.each((function(t,i){a(p,i,e(t,r,h,a))})),p}return s={object:function(t){return e(t,0,Oc,Ic)},map:function(t){return e(t,0,zc,_c)},entries:function(t){return function t(s,e){if(++e>n.length)return s;var h,a=r[e-1];return null!=i&&e>=n.length?h=s.entries():(h=[],s.each((function(i,s){h.push({key:s,values:t(i,e)})}))),null!=a?h.sort((function(t,i){return a(t.key,i.key)})):h}(e(t,0,zc,_c),0)},key:function(t){return n.push(t),s},sortKeys:function(t){return r[n.length-1]=t,s},sortValues:function(i){return t=i,s},rollup:function(t){return i=t,s}}}().key(t=>t[this.ordinalAccessor]).entries(this.data);t.forEach(t=>{t.focusMarker=!1,t.greaterIndex=1;let i="marker",s="marker";t.values[0][this.seriesAccessor]===this.focusMarker.key?(t.focusMarker=0,i="focusMarker"):t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1,s="focusMarker");const n=Sp(t.values[0],this.clickHighlight,this.innerInteractionKeys)?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:Tp(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width,r=Sp(t.values[1],this.clickHighlight,this.innerInteractionKeys)?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:Tp(t.values[1],this.hoverHighlight,this.innerInteractionKeys)&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width;t.values[0].offset=0===t.focusMarker||this.marker.visible?"dot"===this.marker.type?this[i].sizeFromBar*(n+1)/2:"stroke"===this.marker.type||t.focusMarker?this[i].sizeFromBar*(n+1)/5:this[i].sizeFromBar*(n+1)/2:1,t.values[1].offset=1===t.focusMarker||this.marker.visible?"dot"===this.marker.type?-this[s].sizeFromBar*(r+1)/2:"stroke"===this.marker.type?-this[s].sizeFromBar*(r+1)/5:t.focusMarker?-this[s].sizeFromBar*(r+1)/2:-this[s].sizeFromBar*(r+1)/5:-1,t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]&&(t.greaterIndex=0,t.values[0].offset=-t.values[0].offset,t.values[1].offset=-t.values[1].offset)});const i=t=>{const i={absoluteDiff:"Absolute Difference ",difference:"Difference "},s=this.differenceLabel&&this.differenceLabel.calculation&&i[this.differenceLabel.calculation]?this.differenceLabel.calculation:"difference";return i[s]+Ip(t,s,this.differenceLabel&&this.differenceLabel.format&&this.differenceLabel.visible?this.differenceLabel.format:this.differenceLabel&&this.dataLabel.format&&this.dataLabel.visible?this.dataLabel.format:"0[.][0][0]a")};this.nest=t.sort((t,s)=>{t.difference=t.values[0][this.valueAccessor]-t.values[1][this.valueAccessor],s.difference=s.values[0][this.valueAccessor]-s.values[1][this.valueAccessor],t.absoluteDiff=Math.abs(t.difference),s.absoluteDiff=Math.abs(s.difference),t.middle=(t.values[0][this.valueAccessor]+t.values[1][this.valueAccessor])/2,s.middle=(s.values[0][this.valueAccessor]+s.values[1][this.valueAccessor])/2,t.message=i(t),s.message=i(s);const n=!1!==t.focusMarker?t.focusMarker:0;return t.values[0][this.ordinalAccessor]instanceof Date?0:"asc"===this.sortOrder||"diffAsc"===this.sortOrder?t.difference-s.difference:"desc"===this.sortOrder||"diffDesc"===this.sortOrder?s.difference-t.difference:"focusAsc"===this.sortOrder?t.values[n][this.valueAccessor]-s.values[n][this.valueAccessor]:"focusDesc"===this.sortOrder?s.values[n][this.valueAccessor]-t.values[n][this.valueAccessor]:"absoluteDiffAsc"===this.sortOrder?t.absoluteDiff-s.absoluteDiff:"absoluteDiffDesc"===this.sortOrder?s.absoluteDiff-t.absoluteDiff:0})}prepareMarkerData(){this.markerData=[];const t={focus:!1,label:this.nest[0].values[0][this.seriesAccessor]},i={focus:!1,label:this.nest[0].values[1][this.seriesAccessor]};this.nest[0].focusMarker?i.focus=!0:0===this.nest[0].focusMarker&&(t.focus=!0);const s=Object.assign(Object.assign({},t),{limitOpacity:!0}),n=Object.assign(Object.assign({},i),{limitOpacity:!0}),r=Object.assign({},t),e=Object.assign({},i);this.markerData.push(t),this.markerData.push(i),this.markerData.push(s),this.markerData.push(n),this.markerData.push(r),this.markerData.push(e);let h=0;this.markerData.forEach(t=>{t.index=h,t.referenceIndex=h<2?h:h<4?h-2:h-4,h++})}prepareSeriesData(){const t=!("auto"!==this.seriesLabelDetails.placement)||this.seriesLabelDetails.placement.includes(this.isVertical?"right":"top");this.seriesData=[{label:this.nest[0].values[0][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[0][this.seriesAccessor],value:t?this.nest[this.nest.length-1].values[0][this.valueAccessor]:this.nest[0].values[0][this.valueAccessor]},{label:this.nest[0].values[1][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[1][this.seriesAccessor],value:t?this.nest[this.nest.length-1].values[1][this.valueAccessor]:this.nest[0].values[1][this.valueAccessor]}]}prepareLegendData(){this.legendData=[{label:this.nest[0].values[0][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[0][this.seriesAccessor]},{label:this.nest[0].values[1][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[1][this.seriesAccessor]}],this.ordinalLabel=this.legendData.map(t=>t.label)}prepareScales(){const t=cc(this.data,t=>parseFloat(t[this.valueAccessor])),i=uc(this.data,t=>parseFloat(t[this.valueAccessor]));if(this.isVertical)if(this.xAccessor=this.ordinalAccessor,this.yAccessor=this.valueAccessor,this.y=pf().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t-.15*(i-t),this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i+.15*(i-t)]).range([this.innerPaddedHeight,0]),this.data[0][this.ordinalAccessor]instanceof Date){const t=uc(this.data,t=>t[this.ordinalAccessor]),i=cc(this.data,t=>t[this.ordinalAccessor]);if(this.x=function(){return Dc.apply(qd(Ac,xc,bc,mc,wc,yc,pc,vc,bf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain([i,t]).range([0,this.innerPaddedWidth]),this.xAxis.unit){const s=this.time["time"+this.xAxis.unit];this.x.domain([s.offset(i,-1),s.offset(t,1)])}}else this.x=Gc().domain(this.nest.map(t=>t.key)).padding(.5).range([0,this.innerPaddedWidth]);else this.isVertical||(this.xAccessor=this.valueAccessor,this.yAccessor=this.ordinalAccessor,this.x=pf().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t-.15*(i-t),this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i+.15*(i-t)]).range([0,this.innerPaddedWidth]),this.y=Gc().domain(this.nest.map(t=>t.key)).padding(.5).range([this.innerPaddedHeight,0]))}addStrokeUnder(){const t=tp({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.seriesLabelWrapper.selectAll("text").attr("filter",this.accessibility.hideStrokes?null:t),this.diffLabelWrapper.attr("filter",this.accessibility.hideStrokes?null:t),this.labels.attr("filter",this.accessibility.hideStrokes?null:t),this.labels.attr("filter",this.accessibility.hideStrokes?null:t),this.dumbbellG.attr("filter",this.accessibility.hideStrokes?null:t)}renderRootElements(){this.svg=Qu(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.defs=this.rootG.append("defs"),this.baselineG=this.rootG.append("g").attr("class","baseline-group"),this.gridG=this.rootG.append("g").attr("class","gridline-group"),this.dumbbellG=this.rootG.append("g").attr("class","dumbbell-group"),this.seriesLabelWrapper=this.rootG.select(".dumbbell-series-wrapper"),this.seriesLabelWrapper=this.rootG.append("g").attr("class","dumbbell-series-wrapper"),this.diffLabelWrapper=this.rootG.select(".dumbbell-diff-label-wrapper"),this.diffLabelWrapper=this.rootG.append("g").attr("class","dumbbell-diff-label-wrapper"),this.legendG=Qu(this.dumbbellPlotEl).select(".dumbbell-legend").append("svg"),this.tooltipG=Qu(this.dumbbellPlotEl).select(".dumbbell-tooltip"),this.labels=this.rootG.append("g").attr("class","dumbbell-dataLabel-group"),this.references=this.rootG.append("g").attr("class","dumbbell-reference-line-group")}renderMarkerGroup(){this.markerG=this.defs.select("."+this.marker.type+"markers"),this.markerG.node()||(this.defs.selectAll("g").remove(),this.markerG=this.defs.append("g").attr("class",this.marker.type+"markers"))}setSeriesSelections(){const t=this.seriesLabelWrapper.selectAll(".dumbbell-series-label").data(this.seriesData,t=>t.label);this.enterSeriesLabel=t.enter().append("text"),this.exitSeriesLabel=t.exit(),this.updateSeriesLabel=t.merge(this.enterSeriesLabel)}setGlobalSelections(){const t=this.dumbbellG.selectAll(".dumbbell-plot").data(this.nest,t=>t.key);this.enter=t.enter().append("path"),this.exit=t.exit(),this.update=t.merge(this.enter),this.exitSize=this.exit.size(),this.enterSize=this.enter.size();const i=this.markerG.selectAll("marker").data(this.markerData,(t,i)=>t.label+i);this.enterMarkers=i.enter().append("marker"),this.exitMarkers=i.exit(),this.updateMarkers=i.merge(this.enterMarkers),this.setSeriesSelections();const s=this.diffLabelWrapper.selectAll(".dumbbell-diff-label").data(this.nest,t=>t.key);this.enterDiffLabel=s.enter().append("text"),this.exitDiffLabel=s.exit(),this.updateDiffLabel=s.merge(this.enterDiffLabel);const n=this.labels.selectAll("g").data(this.nest,t=>t.key);this.enterLabels=n.enter().append("g"),this.exitLabels=n.exit(),this.updateLabels=n.merge(this.enterLabels);const r=this.updateLabels.selectAll(".dumbbell-dataLabel").data(t=>[t.values[0],t.values[1]],t=>t[this.seriesAccessor]);this.enterLabelChildren=r.enter().append("text"),this.exitLabelChildren=r.exit(),this.updateLabelChildren=r.merge(this.enterLabelChildren)}setTestingAttributes(){this.unitTest?(Qu(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid","chart-container"),Qu(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid","main-title"),Qu(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid","sub-title"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.dumbbellG.attr("data-testid","dumbbell-group"),this.baselineG.attr("data-testid","baseline-group"),this.references.attr("data-testid","reference-line-group"),this.updateLabels.attr("data-testid","dataLabel-wrapper"),this.updateLabelChildren.attr("data-testid","dataLabel").attr("data-id",t=>`label-${t[this.ordinalAccessor]}-${t[this.seriesAccessor]}`),this.updateDiffLabel.attr("data-testid","difference-label").attr("data-id",t=>`difference-label-${t.key}`),this.updateSeriesLabel.attr("data-testid","series-label"),this.updateMarkers.attr("data-testid","marker"),this.update.attr("data-testid","line").attr("data-id",t=>`line-${t.key}`)):(Qu(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid",null),Qu(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid",null),Qu(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.dumbbellG.attr("data-testid",null),this.baselineG.attr("data-testid",null),this.references.attr("data-testid",null),this.updateLabels.attr("data-testid",null),this.updateLabelChildren.attr("data-testid",null).attr("data-id",null),this.updateDiffLabel.attr("data-testid",null).attr("data-id",null),this.updateSeriesLabel.attr("data-testid",null),this.updateMarkers.attr("data-testid",null),this.update.attr("data-testid",null).attr("data-id",null))}reSetRoot(){Kp({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:Fd}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),Kp({selection:this.root,duration:this.duration,namespace:"root_reset",easing:Fd}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),Kp({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:Fd}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),xp(this.chartID,this.width)}drawXAxis(){Dp({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel?this.innerPaddedWidth/this.nest.length*.7:"",dateFormat:this.xAxis.format,format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration})}drawYAxis(){Dp({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,wrapLabel:this.wrapLabel?100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.yAxis.visible,duration:this.duration})}setXAxisAccessibility(){yp({rootEle:this.dumbbellPlotEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:!!this.x&&this.x,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){wp({rootEle:this.dumbbellPlotEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:!!this.y&&this.y,yAxisLabel:this.yAxis.label?this.yAxis.label:""})}drawBaselineX(){Dp({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,padding:this.padding,markOffset:this.x(0),hide:!!this.isVertical||!this.showBaselineY,duration:this.duration})}drawBaselineY(){Dp({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0),hide:!this.isVertical||!this.showBaselineX,duration:this.duration})}drawXGrid(){$p(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!this.xAxis.gridVisible,this.xAxis.tickInterval,this.duration)}drawYGrid(){$p(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)}enterMarkerGeometries(){this.enterMarkers.attr("orient","auto").attr("markerUnits","userSpaceOnUse").attr("id",t=>this.generateId(t,t.index)).attr("class","marker-"+this.marker.type).attr("stroke",this.handleMarkerColors),"dot"===this.marker.type?this.enterMarkers.append("circle").attr("r",5):("stroke"===this.marker.type||"arrow"===this.marker.type)&&this.enterMarkers.append("path"),this.updateMarkerSize(this.enterMarkers)}updateMarkerGeometries(){this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1)}updateMarkerStyle(){this.updateMarkers.attr("stroke",this.handleMarkerColors)}exitMarkerGeometries(){this.exitMarkers.transition("exit").duration(this.duration).ease(Fd).remove()}enterDumbbells(){this.enter.interrupt(),this.enter.attr("class","dumbbell-plot").attr("d",t=>{const i=this.x(t.values[0][this.xAccessor]),s=this.y(t.values[0][this.yAccessor]),n=this.x(t.values[1][this.xAccessor]),r=this.y(t.values[1][this.yAccessor]),e=this.isVertical?s>r?.001:-.001:0,h=this.isVertical?0:i>n?.001:-.001;return`M ${i+h} ${s+e} L ${i} ${s} L ${i} ${s} L ${n} ${r} L ${n} ${r} L ${n} ${r} L ${i} ${s} L ${i} ${s} L ${i} ${s} L ${n} ${r} L ${n} ${r} L ${n-h} ${r-e}`}).attr("cursor",this.suppressEvents?null:this.cursor).attr("opacity",0).each((t,i,s)=>{np(s[i])}).on("click",this.suppressEvents?null:(t,i,s)=>{if(t.values){const n=this.findMarkerIndex(t,s[i],Ru);this.onClickHandler(t.values[n])}}).on("mouseover",this.suppressEvents?null:(t,i,s)=>{let n=t;if(t.values){const r=this.findMarkerIndex(t,s[i],Ru);Rp(this.chartID,!0),n=t.values[r],this.hoverFunc.emit(n)}this.showTooltip&&this.eventsTooltip({data:this.tooltipLabel.labelAccessor&&this.tooltipLabel.labelAccessor.length?n:t,evt:Ru,isToShow:!0})}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity),this.update.order()}updateBarStyle(){this.update.attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity)}updateMarkerSize(t){(t||this.updateMarkers).each((t,i,s)=>{const n=Qu(s[i]),r=i<2&&this.clickHighlight.length?parseFloat(this.clickStyle.strokeWidth+""):i<4?this.barStyle.width:parseFloat(this.hoverStyle.strokeWidth+""),e=(t.focus?this.focusMarker.sizeFromBar:this.marker.sizeFromBar)*("dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2)*(r+1),h=e?10/e:0;n.attr("viewBox",`0 0 ${10+h} ${10+h}`).attr("refX",5+h/2).attr("refY",5+h/2).attr("stroke-width",h).attr("markerWidth",e).attr("markerHeight",e),"dot"===this.marker.type?n.select("circle").attr("cx",5+h/2).attr("cy",5+h/2):"stroke"===this.marker.type?n.select("path").attr("d",`M 4.5 ${0+h/2} L 4.5 ${10+h/2} L 6 ${10+h/2} L 6 ${0+h/2} z`):"arrow"===this.marker.type&&n.select("path").attr("transform",t.focus&&this.focusMarker.key&&1===t.referenceIndex?`rotate(180,${5+h/2},${5+h/2})`:null).attr("d",t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?`M ${0+h/2} ${5+h/4} L ${10+h/2} ${0+h/2} L ${10+h/2} ${10+h/2} z`:`M 4.5 ${0+h/2} L 4.5 ${10+h/2} L 6 ${10+h/2} L 6 ${0+h/2} z`)})}drawMarkerGeometries(){this.updateMarkers.selectAll(".marker-"+this.marker.type).data(t=>[t]),"arrow"===this.marker.type&&this.updateMarkers.selectAll("path").attr("d",(t,i,s)=>{const n=i<2&&this.clickHighlight.length?parseFloat(this.clickStyle.strokeWidth+""):i<4?this.barStyle.width:parseFloat(this.hoverStyle.strokeWidth+""),r=(t.focus?this.focusMarker.sizeFromBar:this.marker.sizeFromBar)*("dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2)*(n+1),e=r?10/r:0;return Qu(s[i]).attr("transform",t.focus&&this.focusMarker.key&&1===t.referenceIndex?`rotate(180,${5+e/2},${5+e/2})`:null),t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?`M ${0+e/2} ${5+e/4} L ${10+e/2} ${0+e/2} L ${10+e/2} ${10+e/2} z`:`M 4.5 ${0+e/2} L 4.5 ${10+e/2} L 6 ${10+e/2} L 6 ${0+e/2} z`})}updateDumbbells(){this.update.interrupt(),this.enter.transition("opacity").duration(this.duration).ease(Fd).attr("opacity",1)}exitDumbbells(){this.exit.interrupt(),this.exit.transition("exit").ease(Fd).duration(this.duration/2).attr("opacity",0).attr("d",(t,i,s)=>{const n=Qu(s[i]),r=+n.attr("data-centerX1"),e=+n.attr("data-centerY1"),h=+n.attr("data-centerX2"),a=+n.attr("data-centerY2"),o=this.isVertical?e>a?.001:-.001:0,u=this.isVertical?0:r>h?.001:-.001;return`M ${r+u} ${e+o} L ${r} ${e} L ${r} ${e} L ${h} ${a} L ${h} ${a} L ${h} ${a} L ${r} ${e} L ${r} ${e} L ${r} ${e} L ${h} ${a} L ${h} ${a} L ${h-u} ${a-o}`}),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(Fd).call(Gp,()=>{const t=Mp(this.rootG.node());this.exit.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),bp({parentGNode:this.rootG.node(),focusDidExist:t})})}drawDumbbells(){this.update.classed("moving",(t,i,s)=>{const n=Qu(s[i]),r=Sp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&Sp(t.values[1],this.clickHighlight,this.innerInteractionKeys),e=Tp(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&Tp(t.values[1],this.hoverHighlight,this.innerInteractionKeys),h=this.dumbbellInteraction?r?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:e&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width,a=this.x(t.values[0][this.xAccessor]),o=this.y(t.values[0][this.yAccessor]),u=this.x(t.values[1][this.xAccessor]),c=this.y(t.values[1][this.yAccessor]),l=+n.attr("data-barSize"),f=+n.attr("data-centerX1"),d=+n.attr("data-centerY1"),v=+n.attr("data-centerX2"),p=+n.attr("data-centerY2");return h!==l||a!==f||o!==d||u!==v||c!==p}).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-d",this.setBarSize).transition("update").ease(Fd).duration(this.duration).attr("d",this.setBarSize).call(Gp,()=>{this.update.classed("moving",!1),bp({parentGNode:this.rootG.node()})})}updateMarkerIds(){this.updateMarkers.attr("id",t=>this.generateId(t,t.index)),this.update.attr("marker-start",t=>{const i=Lp(t.values[0],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),s=Tp(t.values[0],this.hoverHighlight,this.innerInteractionKeys),n=Sp(t.values[0],this.clickHighlight,this.innerInteractionKeys);return this.url+(s&&!n?this.updateMarkers._groups[0][4].id:n||i?this.updateMarkers._groups[0][0].id:this.updateMarkers._groups[0][2].id)+")"}).attr("marker-end",t=>{const i=Lp(t.values[1],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),s=Tp(t.values[1],this.hoverHighlight,this.innerInteractionKeys),n=Sp(t.values[1],this.clickHighlight,this.innerInteractionKeys);return this.url+(s&&!n?this.updateMarkers._groups[0][5].id:n||i?this.updateMarkers._groups[0][1].id:this.updateMarkers._groups[0][3].id)+")"})}updateInteractionState(){this.update.interrupt("opacity"),this.updateLabelChildren.interrupt("opacity"),this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1),this.update.attr("opacity",1).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity).each((t,i,s)=>{const n=Qu(s[i]);n.classed("moving")||n.attr("d",this.setBarSize)}),this.drawDataLabels(!0),this.seriesLabelDetails.visible&&("auto"===this.seriesLabelDetails.placement||this.seriesLabelDetails.collisionHideOnly)&&this.drawSeriesLabels(!0),this.diffLabelDetails.visible&&("auto"===this.diffLabelDetails.placement||this.diffLabelDetails.collisionHideOnly)&&this.drawDifferenceLabels(!0),bp({parentGNode:this.rootG.node()}),Op({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}enterSeriesLabels(){this.enterSeriesLabel.interrupt();const t=!("auto"!==this.seriesLabelDetails.placement)||this.seriesLabelDetails.placement.includes(this.isVertical?"right":"top");this.enterSeriesLabel.attr("opacity",t=>{const i=this.seriesLabelDetails.visible?1:0;return this.seriesInteraction?Lp(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON:i}).attr("class","dumbbell-series-label").attr("fill",this.handleSeriesLabelColors).attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>this.onHoverHandler(t,!1):null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null).attr("text-anchor",this.isVertical&&t?"start":this.isVertical?"end":"middle").attr("x",i=>this.isVertical&&t?this.innerPaddedWidth:this.isVertical?0:this.x(i.value)).attr("y",i=>this.isVertical?this.y(i.value):this.isVertical||t?0:this.innerPaddedHeight).attr("dx",this.isVertical&&t?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}updateSeriesLabels(){this.updateSeriesLabel.interrupt(),this.updateSeriesLabel.transition("opacity_series_labels").ease(Fd).duration(this.duration).attr("opacity",t=>{const i=this.seriesLabelDetails.visible?1:0;return this.seriesInteraction?Lp(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}exitSeriesLabels(){this.exitSeriesLabel.transition("exit_series_labels").ease(Fd).duration(this.duration).attr("opacity",0).remove()}drawSeriesLabels(t){const i="auto"===this.seriesLabelDetails.placement,s=!!i||this.seriesLabelDetails.placement.includes(this.isVertical?"right":"top"),n=!i&&this.seriesLabelDetails.collisionHideOnly,r=this.updateSeriesLabel.text((t,i)=>this.seriesLabelDetails.label?this.seriesLabelDetails.label[i]:t.label).style("visibility",(t,s,n)=>i||this.seriesLabelDetails.collisionHideOnly?Qu(n[s]).style("visibility"):null).attr("fill",this.handleSeriesLabelColors).attr("data-x",t=>this.isVertical&&s?this.innerPaddedWidth:this.isVertical?0:this.x(t.value)).attr("data-y",(t,i,n)=>{const r=getComputedStyle(n[i]),e=parseFloat(r.fontSize),h=Math.max(e-1,1);return this.isVertical?this.y(t.value)+.3*h:this.isVertical||s?0:this.innerPaddedHeight}).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",n).attr("data-use-dy",n).attr("data-text-anchor",this.isVertical&&s?"start":this.isVertical?"end":"middle").attr("dx",this.isVertical&&s?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em").transition("update_series_labels").ease(Fd).duration(()=>t?0:this.duration);this.seriesLabelDetails.visible&&("auto"===this.seriesLabelDetails.placement||this.seriesLabelDetails.collisionHideOnly)?(this.bitmaps=Zp({bitmaps:this.bitmaps,labelSelection:r,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:[this.seriesAccessor],size:[Bp(this.width,0),Bp(this.height,0)],hideOnly:this.seriesLabelDetails.visible&&this.seriesLabelDetails.collisionHideOnly&&"auto"!==this.seriesLabelDetails.placement}),n&&r.attr("text-anchor",this.isVertical&&s?"start":this.isVertical?"end":"middle").attr("x",t=>this.isVertical&&s?this.innerPaddedWidth:this.isVertical?0:this.x(t.value)).attr("y",t=>this.isVertical?this.y(t.value):this.isVertical||s?0:this.innerPaddedHeight).attr("dx",this.isVertical&&s?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")):r.attr("text-anchor",this.isVertical&&s?"start":this.isVertical?"end":"middle").attr("x",t=>this.isVertical&&s?this.innerPaddedWidth:this.isVertical?0:this.x(t.value)).attr("y",t=>this.isVertical?this.y(t.value):this.isVertical||s?0:this.innerPaddedHeight).attr("dx",this.isVertical&&s?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}setSeriesLabelOpacity(){this.updateSeriesLabel.interrupt("opacity_series_labels"),this.updateSeriesLabel.attr("opacity",t=>{const i=this.seriesLabelDetails.visible?1:0;return this.seriesInteraction?Lp(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}enterDifferenceLabels(){this.enterDiffLabel.interrupt();const t=this.diffLabelDetails.placement.includes(this.isVertical?"left":"top");this.enterDiffLabel.attr("class","dumbbell-diff-label").attr("opacity",t=>{const i=this.differenceLabel.visible?1:0;return this.dumbbellInteraction?Lp(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON:i}).attr("fill",this.setDiffLabelColor).attr("cursor",!this.suppressEvents&&this.dumbbellInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?()=>this.onMouseOutHandler():null).attr("x",t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle)).attr("y",i=>!this.isVertical&&t?this.y(i.key)-this.barStyle.width/2-4:this.isVertical?this.y(i.middle):this.y(i.key)+this.barStyle.width/2+4).attr("dx",this.isVertical&&t?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&t?"0":this.isVertical?"0.3em":"0.6em")}updateDifferenceLabels(){this.updateDiffLabel.interrupt(),this.updateDiffLabel.transition("opacity_diff_labels").ease(Fd).duration(this.duration).attr("opacity",t=>{const i=this.differenceLabel.visible?1:0;return this.dumbbellInteraction?Lp(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}exitDifferenceLabels(){this.exitDiffLabel.transition("exit_diff_label").ease(Fd).duration(this.duration).attr("opacity",0).remove()}drawDifferenceLabels(t){const i="auto"===this.diffLabelDetails.placement,s=!!i||this.diffLabelDetails.placement.includes(this.isVertical?"left":"top"),n=!i&&this.differenceLabel.collisionHideOnly,r=this.updateDiffLabel.text(t=>Ip(t,this.differenceLabel.calculation,this.differenceLabel.format)).style("visibility",(t,s,n)=>i||this.differenceLabel.collisionHideOnly?Qu(n[s]).style("visibility"):null).attr("data-x",t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle)).attr("data-y",t=>!this.isVertical&&s?this.y(t.key)-this.barStyle.width/2-4:this.isVertical?this.y(t.middle):this.y(t.key)+this.barStyle.width/2+4).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",n).attr("data-use-dy",n).attr("dx",this.isVertical&&s?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&s?"0":this.isVertical?"0.3em":"0.6em").attr("text-anchor",(t,n,r)=>i&&Qu(r[n]).attr("text-anchor")?Qu(r[n]).attr("text-anchor"):this.isVertical&&s?"end":this.isVertical?"start":"middle").transition("update_diff_label").ease(Fd).duration(()=>t?0:this.duration);this.differenceLabel.visible&&("auto"===this.diffLabelDetails.placement||this.differenceLabel.collisionHideOnly)?(this.bitmaps=Zp({bitmaps:this.bitmaps,labelSelection:r,avoidMarks:[this.update],validPositions:n?["middle"]:this.isVertical?["left","right"]:["top","bottom"],offsets:n?[this.barStyle.width/2+4]:[this.barStyle.width/2+4,this.barStyle.width/2+4],accessors:["key"],size:[Bp(this.width,0),Bp(this.height,0)],hideOnly:this.differenceLabel.visible&&this.differenceLabel.collisionHideOnly&&"auto"!==this.diffLabelDetails.placement}),n&&r.attr("x",t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle)).attr("y",t=>!this.isVertical&&s?this.y(t.key)-this.barStyle.width/2-4:this.isVertical?this.y(t.middle):this.y(t.key)+this.barStyle.width/2+4).attr("dx",this.isVertical&&s?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&s?"0":this.isVertical?"0.3em":"0.6em").attr("text-anchor",this.isVertical&&s?"end":this.isVertical?"start":"middle")):r.attr("x",t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle)).attr("y",t=>!this.isVertical&&s?this.y(t.key)-this.barStyle.width/2-4:this.isVertical?this.y(t.middle):this.y(t.key)+this.barStyle.width/2+4).attr("dx",this.isVertical&&s?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&s?"0":this.isVertical?"0.3em":"0.6em").attr("text-anchor",this.isVertical&&s?"end":this.isVertical?"start":"middle")}enterDataLabels(){this.enterLabels.interrupt(),this.enterLabels.attr("class","dumbbell-label-wrapper").attr("opacity",0).attr("fill",this.handleLabelColors),this.enterLabelChildren.attr("class","dumbbell-dataLabel").attr("opacity",t=>Lp(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON).attr("fill",this.handleLabelColors).attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null).on("click",!this.suppressEvents&&this.dataLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null),Xp({root:this.enterLabelChildren,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData})}setDifferenceLabelOpacity(){this.updateDiffLabel.interrupt("opacity_diff_labels"),this.updateDiffLabel.attr("opacity",t=>{const i=this.differenceLabel.visible?1:0;return this.dumbbellInteraction?Lp(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}updateDataLabels(){this.updateLabelChildren.classed("transitioning",!0),this.updateLabels.transition("opacity").ease(Fd).duration(this.duration).attr("opacity",()=>this.dataLabel.visible?1:0).call(Gp,()=>{this.updateLabelChildren.classed("transitioning",!1)})}exitDataLabels(){this.exitLabels.interrupt(),this.exitLabels.selectAll(".dumbbell-dataLabel").transition("exit").ease(Fd).duration(this.duration/2).attr("opacity",0).call(Gp,()=>{this.exitLabels.remove()}),this.exitLabelChildren.transition("exit_dataLabel").ease(Fd).duration(this.duration).attr("opacity",0).remove()}drawDataLabels(t){const i="auto"===this.placement,s="auto"!==this.placement&&this.dataLabel.collisionHideOnly;this.updateLabelChildren.text(t=>Ip(t,this.innerLabelAccessor,this.dataLabel.format));const n=this.updateLabelChildren.attr("fill",this.handleLabelColors).style("visibility",(t,s,n)=>i||this.dataLabel.collisionHideOnly?Qu(n[s]).style("visibility"):null).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",s).attr("data-use-dy",s).attr("dx",t=>this.isVertical?"0.0em":t.offset>=0?"-0.1em":"0.1em").attr("dy",t=>this.isVertical&&t.offset>=0?"0.9em":this.isVertical?"-0.3em":"0.0em").attr("data-y",(t,i,s)=>{const n=s[i],r=getComputedStyle(n),e=parseFloat(r.fontSize),h=Math.max(e-1,1),a=Up(n.textContent,e,!0,r.fontFamily),o="horizontal"!==this.layoutOverride?0:t.offset>=0?-a/2:a/2,u="vertical"!==this.layoutOverride?-h/2:t.offset>=0?h/2:-h/2-h;return Qu(n).attr("data-x",t=>(this.isVertical?this.x(t[this.ordinalAccessor]):this.x(t[this.valueAccessor])-t.offset)+o),this.isVertical?this.y(t[this.valueAccessor])+t.offset+u:this.y(t[this.ordinalAccessor])+u}).attr("data-offset",t=>t.offset).transition("update_dataLabel").ease(Fd).duration(()=>t?0:this.duration);this.bitmaps=Xp({root:n,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.placement,labelSelection:n,avoidMarks:[this.update],validPositions:["middle"],offsets:[1],accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[Bp(this.width,0),Bp(this.height,0)],boundsScope:"centroid",hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})}updateDiffLabelColor(){this.updateDiffLabel.attr("fill",this.setDiffLabelColor)}setLabelOpacity(){this.updateLabels.attr("opacity",this.dataLabel.visible?1:0),this.updateLabelChildren.attr("opacity",t=>Lp(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1)}updateMarkerOpacity(){this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1)}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class",".dumbbell-reference").attr("opacity",1),s=i.append("line");s.attr("class","dumbbell-reference-line").attr("data-testid",this.unitTest?"reference-line":null).attr("opacity",0);const n=i.append("text");n.attr("class","dumbbell-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".dumbbell-reference-line").data(t=>[t]).transition("merge").ease(Fd).duration(this.duration),h=r.selectAll(".dumbbell-reference-line-label").data(t=>[t]).transition("merge").ease(Fd).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(Fd).duration(this.duration).attr("opacity",0).remove(),i.attr("transform",t=>"translate(0,"+this[this.isVertical?"y":"x"](t.value)+")"),r.transition("merge").ease(Fd).duration(this.duration).attr("transform",t=>"translate(0,"+this[this.isVertical?"y":"x"](t.value)+")"),s.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),n.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.style("stroke",jp[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",jp[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}setSelectedClass(){this.update.classed("highlight",(t,i,s)=>{const n=Lp(t.values[0],1,0,{},this.clickHighlight,this.innerInteractionKeys),r=Lp(t.values[1],1,0,{},this.clickHighlight,this.innerInteractionKeys);let e=n||r;return e=!(!this.clickHighlight||!this.clickHighlight.length)&&e,kp(s[i],e,this.accessibility.elementsAreInterface),e})}drawAnnotations(){Np({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:"horizontal"!==this.layoutOverride?this.ordinalAccessor:this.valueAccessor,yScale:this.y,yAccessor:"horizontal"!==this.layoutOverride?this.valueAccessor:this.ordinalAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){gp(this.dumbbellPlotEl,this.annotations)}setTagLevels(){this.topLevel=Yp(this.highestHeadingLevel),this.bottomLevel=Yp(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){sp({rootEle:this.dumbbellPlotEl,title:this.accessibility.title||this.mainTitle,chartTag:"dumbbell-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){const t=Fp(this,Wp,"dumbbell-plot");delete t[this.ordinalAccessor],hp({node:this.svg.node(),chartTag:"dumbbell-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:["message"],nested:"values",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,s)=>{np(s[i])})}setGeometryAriaLabels(){const t=Fp(this,Wp,"dumbbell-plot");delete t[this.ordinalAccessor],this.update.each((i,s,n)=>{rp({node:n[s],geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:["message"],nested:["values"],uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),ep({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityAttributes(){np(this.dumbbellG.node())}setGroupAccessibilityID(){this.dumbbellG.each((t,i,s)=>{ep({node:s[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){op(this.dumbbellPlotEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){up(this.dumbbellPlotEl,this.subTitle)}setChartAccessibilityLongDescription(){cp(this.dumbbellPlotEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){lp(this.dumbbellPlotEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){fp(this.dumbbellPlotEl,this.accessibility.purpose)}setChartAccessibilityContext(){dp(this.dumbbellPlotEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){vp(this.dumbbellPlotEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){pp({rootEle:this.dumbbellPlotEl,parentGNode:this.dumbbellG.node(),chartTag:"dumbbell-plot",geomType:"dumbbell"})}setChartAccessibilityStructureNotes(){mp(this.dumbbellPlotEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t,i){Rp(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&i&&this.eventsTooltip({data:t,evt:Ru,isToShow:!0})}onMouseOutHandler(){Rp(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){qp(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){Ap({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,diffLabelDetails:this.diffLabelDetails,chartType:"dumbbell"})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),this.updateDiffLabel.attr("cursor",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?this.cursor:null),this.updateLabelChildren.attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null)}drawLegendElements(){Cp({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.accessibility.hideStrokes?null:this.rawColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,label:this.legend.labels||this.ordinalLabel,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){Qu(this.dumbbellPlotEl).selectAll(".legend").on("click",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?t=>this.onHoverHandler(t,!1):null).on("mouseout",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}setLegendCursor(){Qu(this.dumbbellPlotEl).selectAll(".legend").style("cursor",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?this.cursor:null)}setSeriesCursor(){this.updateSeriesLabel.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null)}bindSeriesInteractivity(){this.updateSeriesLabel.on("click",!this.suppressEvents&&this.seriesInteraction?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>this.onHoverHandler(t,!1):null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null)}bindInteractivity(){this.update.on("click",this.suppressEvents?null:(t,i,s)=>{if(t.values){const n=this.findMarkerIndex(t,s[i],Ru);this.onClickHandler(t.values[n])}}).on("mouseover",this.suppressEvents?null:(t,i,s)=>{let n=t;if(t.values){const r=this.findMarkerIndex(t,s[i],Ru);Rp(this.chartID,!0),n=t.values[r],this.hoverFunc.emit(n)}this.showTooltip&&this.eventsTooltip({data:this.tooltipLabel.labelAccessor&&this.tooltipLabel.labelAccessor.length?n:t,evt:Ru,isToShow:!0})}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateLabelChildren.on("click",!this.suppressEvents&&this.dataLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null),this.updateDiffLabel.on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?()=>this.onMouseOutHandler():null)}findMarkerIndex(t,i,s){const n=this.isVertical?this.findPosition(i,s)[1]:this.findPosition(i,s)[0],r=this.isVertical?"Y":"X",e=+Qu(i).attr("data-center"+r+"1"),h=+Qu(i).attr("data-center"+r+"2"),a=t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]?0:1;return n<=(h-e)/2+e?0+a:1-a}findPosition(t,i){let s=(t.ownerSVGElement||t).createSVGPoint();return s.x=i.clientX,s.y=i.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}generateId(t,i){let s="dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2;s=t.focus?this.focusMarker.sizeFromBar*s:this.marker.sizeFromBar*s;const n=this.marker.visible||t.focus?1:0,r="#"===this.rawColors[t.referenceIndex][0]?this.rawColors[t.referenceIndex].substring(1):this.rawColors[t.referenceIndex];let e=(i<2&&this.clickHighlight.length?this.clickStyle.strokeWidth:i<4?this.barStyle.width:this.hoverStyle.strokeWidth).toString();return e=""+e,e=e.replace(/\D/g,"n"),"marker-"+this.chartID+i+this.marker.type+s+r+e+n}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldValidateLayout&&this.validateLayout(),this.shouldValidateDataLabelPlacement&&(this.validateDataLabelPlacement(),this.shouldValidateDataLabelPlacement=!1),this.shouldValidateSeriesLabelPlacement&&(this.validateSeriesLabelPlacement(),this.shouldValidateSeriesLabelPlacement=!1),this.shouldValidateDiffLabelPlacement&&(this.validateDiffLabelPlacement(),this.shouldValidateDiffLabelPlacement=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldUpdateLayout&&(this.setLayoutData(),this.shouldUpdateLayout=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateMarkerData&&(this.prepareMarkerData(),this.shouldUpdateMarkerData=!1),this.shouldUpdateSeriesData&&(this.prepareSeriesData(),this.shouldUpdateSeriesData=!1),this.shouldUpdateLegendData&&(this.prepareLegendData(),this.shouldUpdateLegendData=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldCheckValueAxis&&("horizontal"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0):("vertical"===this.layout||this.layoutOverride)&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0),this.shouldCheckValueAxis=!1),this.shouldCheckLabelAxis&&("vertical"===this.layout||this.layoutOverride?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0):"horizontal"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0),this.shouldCheckLabelAxis=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"dumbbell-main-title vcl-main-title","data-testid":"main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions dumbbell-sub-title vcl-sub-title","data-testid":"sub-title"},this.subTitle),s("div",{class:"dumbbell-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"dumbbell",chartTag:"dumbbell-plot",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-dumbbell-container"}),s("div",{class:"dumbbell-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))}init(){const t=Object.keys(Xd);let i=0;const s={wrapLabel:{exception:!1},strokeWidth:{exception:0},showDots:{exception:!1},dotRadius:{exception:0},hoverOpacity:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:!1}};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:Xd[t[i]]}}get dumbbellPlotEl(){return n(this)}static get watchers(){return{mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],seriesAccessor:["seriesAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],layout:["layoutWatcher"],showBaselineX:["showBaselineXWatcher"],showBaselineY:["showBaselineYWatcher"],colorPalette:["paletteWatcher"],colors:["paletteWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],hoverOpacity:["hoverOpacityWatcher"],cursor:["cursorWatcher"],focusMarker:["focusMarkerWatcher"],marker:["markerWatcher"],barStyle:["barStyleWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],differenceLabel:["differenceLabelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],referenceStyle:["referenceWatcher"],referenceLines:["referenceWatcher"],suppressEvents:["suppressWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],interactionKeys:["interactionWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}dumbbell-plot{cursor:default}dumbbell-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}dumbbell-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}dumbbell-plot .hidden{display:none}dumbbell-plot .axis{font-size:12px}dumbbell-plot .axis text{fill:#767676}dumbbell-plot .axis-label{text-anchor:middle;font:1rem sans-serif}dumbbell-plot .axis path{stroke:#767676}dumbbell-plot .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}dumbbell-plot .grid path{stroke-width:0;stroke:#767676}dumbbell-plot .dumbbell-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}dumbbell-plot .dumbbell-group__inactive{opacity:0}dumbbell-plot .dumbbell-group .dot{stroke:#ffffff}dumbbell-plot .dumbbell-group .dumbbell-series-label{font-size:1em}dumbbell-plot .dumbbell-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .dumbbell-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .annotations{pointer-events:none}dumbbell-plot .annotations .handle{pointer-events:all}"}};window.VisaChartsLibOSSLicenses=_p();const{getLicenses:Qp}=r,ty=class{constructor(i){t(this,i),this.chartContent=[],this.selectionMode="multiple",this.onElementUpdate=new Function,this.filterAccessor="label",this.defaultClickElement=[],this.data=[],this.hoverElement="",this.clickElement=[]}componentWillLoad(){}componentWillUpdate(){this.clickElement||(this.clickElement=this.defaultClickElement),this.renderCharts()}onClick(t){this.handleClickElement(t)}handleClickElement(t){if(console.log("handleClickElement",t),"single"===this.selectionMode)this.clickElement=this.clickElement.includes(t)?"":[t];else if("multiple"===this.selectionMode)if(this.clickElement.includes(t))for(let i=this.clickElement.length-1;i>=0;i--)this.clickElement[i]===t&&this.clickElement.splice(i,1);else this.clickElement.push(t);else this.clickElement=[];this.onElementUpdate(this.clickElement)}onHover(t){this.hoverElement=t}onMouseOut(){this.hoverElement=""}drawChart(t){const i=function(t,i){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.indexOf(n)<0&&(s[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)i.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]])}return s}(t,["chartType","width"]),n={onClickFunc:t=>this.onClick(t),onHoverFunc:t=>this.onHover(t),onMouseOutFunc:()=>this.onMouseOut(),clickHighlight:this.clickElement,hoverHighlight:this.hoverElement};switch(t.chartType){case"bar-chart":return s("div",{class:"col--lg-"+t.width},s("bar-chart",Object.assign({width:100*t.width},n,i)));case"pie-chart":return s("div",{class:"col--lg-"+t.width},s("pie-chart",Object.assign({width:100*t.width},n,i)));case"scatter-plot":return s("div",{class:"col--lg-"+t.width},s("scatter-plot",Object.assign({width:100*t.width},n,i)));case"circle-packing":return s("div",{class:"col--lg-"+t.width},s("circle-packing",Object.assign({width:100*t.width},n,i)));case"clustered-force-layout":return s("div",{class:"col--lg-"+t.width},s("clustered-force-layout",Object.assign({width:100*t.width},n,i)));case"line-chart":return s("div",{class:"col--lg-"+t.width},s("line-chart",Object.assign({width:100*t.width},n,i)));case"world-map":return s("div",{class:"col--lg-"+t.width},s("world-map",Object.assign({width:100*t.width},n,i)));case"space":return s("div",{class:"col--lg-"+t.width});default:return}}renderCharts(){return this.chartContent.map(t=>this.drawChart(t))}render(){return s("div",{class:"row"},this.renderCharts())}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}"}};window.VisaChartsLibOSSLicenses=Qp();var iy="http://www.w3.org/1999/xhtml";const sy={svg:"http://www.w3.org/2000/svg",xhtml:iy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ny(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),sy.hasOwnProperty(i)?{space:sy[i],local:t}:t}function ry(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===iy&&i.documentElement.namespaceURI===iy?i.createElement(t):i.createElementNS(s,t)}}function ey(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hy(t){var i=ny(t);return(i.local?ey:ry)(i)}function ay(){}function oy(t){return null==t?ay:function(){return this.querySelector(t)}}function uy(){return[]}function cy(t){return null==t?uy:function(){return this.querySelectorAll(t)}}function ly(t){return function(){return this.matches(t)}}function fy(t){return new Array(t.length)}function dy(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function vy(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new dy(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function py(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new dy(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function yy(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function wy(t){return function(){this.removeAttribute(t)}}function my(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gy(t,i){return function(){this.setAttribute(t,i)}}function by(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function My(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function ky(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function xy(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ay(t){return function(){this.style.removeProperty(t)}}function Ny(t,i,s){return function(){this.style.setProperty(t,i,s)}}function Wy(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function Ly(t,i){return t.style.getPropertyValue(i)||xy(t).getComputedStyle(t,null).getPropertyValue(i)}function Sy(t){return function(){delete this[t]}}function Ty(t,i){return function(){this[t]=i}}function Ey(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function Dy(t){return t.trim().split(/^|\s+/)}function $y(t){return t.classList||new Cy(t)}function Cy(t){this._node=t,this._names=Dy(t.getAttribute("class")||"")}function Oy(t,i){for(var s=$y(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function Iy(t,i){for(var s=$y(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function zy(t){return function(){Oy(this,t)}}function _y(t){return function(){Iy(this,t)}}function Hy(t,i){return function(){(i.apply(this,arguments)?Oy:Iy)(this,t)}}function Py(){this.textContent=""}function qy(t){return function(){this.textContent=t}}function Ry(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function Xy(){this.innerHTML=""}function Fy(t){return function(){this.innerHTML=t}}function jy(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function Gy(){this.nextSibling&&this.parentNode.appendChild(this)}function Vy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yy(){return null}function Ky(){var t=this.parentNode;t&&t.removeChild(this)}function By(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function Uy(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}dy.prototype={constructor:dy,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Cy.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Zy={},Jy=null;function Qy(t,i,s){return t=tw(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function tw(t,i,s){return function(n){var r=Jy;Jy=n;try{t.call(this,this.__data__,i,s)}finally{Jy=r}}}function iw(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function sw(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function nw(t,i,s){var n=Zy.hasOwnProperty(t.type)?Qy:tw;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function rw(t,i,s){var n=xy(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function ew(t,i){return function(){return rw(this,t,i)}}function hw(t,i){return function(){return rw(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Zy={mouseenter:"mouseover",mouseleave:"mouseout"}));var aw=[null];function ow(t,i){this._groups=t,this._parents=i}function uw(){return new ow([[document.documentElement]],aw)}function cw(t){return"string"==typeof t?new ow([[document.querySelector(t)]],[document.documentElement]):new ow([[t]],aw)}function lw(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}ow.prototype=uw.prototype={constructor:ow,select:function(t){"function"!=typeof t&&(t=oy(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new ow(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=cy(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new ow(n,r)},filter:function(t){"function"!=typeof t&&(t=ly(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new ow(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?py:vy,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,m,g=0,b=0;g<v;++g)if(w=p[g]){for(g>=b&&(b=g+1);!(m=y[b])&&++b<v;);w._next=m||null}}return(h=new ow(h,n))._enter=a,h._exit=o,h},enter:function(){return new ow(this._enter||this._groups.map(fy),this._parents)},exit:function(){return new ow(this._exit||this._groups.map(fy),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new ow(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=yy);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new ow(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=ny(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?my:wy:"function"==typeof i?s.local?ky:My:s.local?by:gy)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?Ay:"function"==typeof i?Wy:Ny)(t,i,null==s?"":s)):Ly(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?Sy:"function"==typeof i?Ey:Ty)(t,i)):this.node()[t]},classed:function(t,i){var s=Dy(t+"");if(arguments.length<2){for(var n=$y(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?Hy:i?zy:_y)(s,i))},text:function(t){return arguments.length?this.each(null==t?Py:("function"==typeof t?Ry:qy)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Xy:("function"==typeof t?jy:Fy)(t)):this.node().innerHTML},raise:function(){return this.each(Gy)},lower:function(){return this.each(Vy)},append:function(t){var i="function"==typeof t?t:hy(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:hy(t),n=null==i?Yy:"function"==typeof i?i:oy(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(Ky)},clone:function(t){return this.select(t?Uy:By)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=iw(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?nw:sw,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?hw:ew)(t,i))}};var fw=function(t){return 1===t.length&&(t=function(t){return function(i,s){return lw(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}(lw).right;function dw(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var vw=Math.sqrt(50),pw=Math.sqrt(10),yw=Math.sqrt(2);function ww(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=vw?10:e>=pw?5:e>=yw?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=vw?10:e>=pw?5:e>=yw?2:1)}function mw(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&s>n&&(n=s);return n}function gw(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&n>s&&(n=s);return n}function bw(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function Mw(){}function kw(t,i){var s=new Mw;if(t instanceof Mw)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}function xw(){return{}}function Aw(t,i,s){t[i]=s}function Nw(){return kw()}function Ww(t,i,s){t.set(i,s)}Mw.prototype=kw.prototype={constructor:Mw,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var Lw=Array.prototype.slice,Sw={name:"implicit"};function Tw(){var t=kw(),i=[],s=[],n=Sw;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==Sw)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=kw();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=Lw.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return Tw(i,s).unknown(n)},bw.apply(r,arguments),r}function Ew(){var t,i,s=Tw().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=dw(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return Ew(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},bw.apply(c(),arguments)}function Dw(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function $w(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function Cw(){}var Ow="\\s*([+-]?\\d+)\\s*",Iw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",zw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_w=/^#([0-9a-f]{3,8})$/,Hw=new RegExp("^rgb\\("+[Ow,Ow,Ow]+"\\)$"),Pw=new RegExp("^rgb\\("+[zw,zw,zw]+"\\)$"),qw=new RegExp("^rgba\\("+[Ow,Ow,Ow,Iw]+"\\)$"),Rw=new RegExp("^rgba\\("+[zw,zw,zw,Iw]+"\\)$"),Xw=new RegExp("^hsl\\("+[Iw,zw,zw]+"\\)$"),Fw=new RegExp("^hsla\\("+[Iw,zw,zw,Iw]+"\\)$"),jw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Gw(){return this.rgb().formatHex()}function Vw(){return this.rgb().formatRgb()}function Yw(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=_w.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?Kw(i):3===s?new Jw(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?Bw(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?Bw(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Hw.exec(t))?new Jw(i[1],i[2],i[3],1):(i=Pw.exec(t))?new Jw(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=qw.exec(t))?Bw(i[1],i[2],i[3],i[4]):(i=Rw.exec(t))?Bw(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Xw.exec(t))?sm(i[1],i[2]/100,i[3]/100,1):(i=Fw.exec(t))?sm(i[1],i[2]/100,i[3]/100,i[4]):jw.hasOwnProperty(t)?Kw(jw[t]):"transparent"===t?new Jw(NaN,NaN,NaN,0):null}function Kw(t){return new Jw(t>>16&255,t>>8&255,255&t,1)}function Bw(t,i,s,n){return n<=0&&(t=i=s=NaN),new Jw(t,i,s,n)}function Uw(t){return t instanceof Cw||(t=Yw(t)),t?new Jw((t=t.rgb()).r,t.g,t.b,t.opacity):new Jw}function Zw(t,i,s,n){return 1===arguments.length?Uw(t):new Jw(t,i,s,null==n?1:n)}function Jw(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function Qw(){return"#"+im(this.r)+im(this.g)+im(this.b)}function tm(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function im(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function sm(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new rm(t,i,s,n)}function nm(t){if(t instanceof rm)return new rm(t.h,t.s,t.l,t.opacity);if(t instanceof Cw||(t=Yw(t)),!t)return new rm;if(t instanceof rm)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new rm(h,a,o,t.opacity)}function rm(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function em(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function hm(t){return function(){return t}}function am(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):hm(isNaN(t)?i:t)}Dw(Cw,Yw,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Gw,formatHex:Gw,formatHsl:function(){return nm(this).formatHsl()},formatRgb:Vw,toString:Vw}),Dw(Jw,Zw,$w(Cw,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Jw(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Jw(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qw,formatHex:Qw,formatRgb:tm,toString:tm})),Dw(rm,(function(t,i,s,n){return 1===arguments.length?nm(t):new rm(t,i,s,null==n?1:n)}),$w(Cw,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new rm(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new rm(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new Jw(em(t>=240?t-240:t+120,r,n),em(t,r,n),em(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const om=function t(i){var s=function(t){return 1==(t=+t)?am:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):hm(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=Zw(t)).r,(i=Zw(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=am(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function um(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}var cm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lm=new RegExp(cm.source,"g");function fm(t,i){var s,n,r,e=cm.lastIndex=lm.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=cm.exec(t))&&(n=lm.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:um(s,n)})),e=lm.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}var dm,vm,pm,ym,wm=180/Math.PI,mm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gm(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*wm,skewX:Math.atan(o)*wm,scaleX:h,scaleY:a}}function bm(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:um(t,r)},{i:o-2,x:um(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:um(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:um(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:um(t,s)},{i:a-2,x:um(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var Mm=bm((function(t){return"none"===t?mm:(dm||(dm=document.createElement("DIV"),vm=document.documentElement,pm=document.defaultView),dm.style.transform=t,t=pm.getComputedStyle(vm.appendChild(dm),null).getPropertyValue("transform"),vm.removeChild(dm),gm(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),km=bm((function(t){return null==t?mm:(ym||(ym=document.createElementNS("http://www.w3.org/2000/svg","g")),ym.setAttribute("transform",t),(t=ym.transform.baseVal.consolidate())?gm((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):mm)}),", ",")",")");function xm(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function Am(t){return(t=xm(Math.abs(t)))?t[1]:NaN}var Nm,Wm=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lm(t){if(!(i=Wm.exec(t)))throw new Error("invalid format: "+t);var i;return new Sm({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function Sm(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Tm(t,i){var s=xm(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}Lm.prototype=Sm.prototype,Sm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Em={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return Tm(100*t,i)},r:Tm,s:function(t,i){var s=xm(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(Nm=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+xm(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Dm(t){return t}var $m,Cm,Om,Im=Array.prototype.map,zm=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _m(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=ww(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=function(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=vw?r*=10:e>=pw?r*=5:e>=yw&&(r*=2),i<t?-r:r}(t,i,s);switch((n=Lm(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Am(i)/3)))-Am(Math.abs(t)))}(e,h))||(n.precision=r),Om(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,Am(i)-Am(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-Am(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return Cm(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=ww(a,o,s))>0?n=ww(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=ww(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function Hm(){var t,i=0,s=1,n=1,r=[.5],e=[0,1];function h(i){return i<=i?e[fw(r,i,0,n)]:t}function a(){var t=-1;for(r=new Array(n);++t<n;)r[t]=((t+1)*s-(t-n)*i)/(n+1);return h}return h.domain=function(t){return arguments.length?(i=+t[0],s=+t[1],a()):[i,s]},h.range=function(t){return arguments.length?(n=(e=Lw.call(t)).length-1,a()):e.slice()},h.invertExtent=function(t){var h=e.indexOf(t);return h<0?[NaN,NaN]:h<1?[i,r[0]]:h>=n?[r[n-1],s]:[r[h-1],r[h]]},h.unknown=function(i){return arguments.length?(t=i,h):h},h.thresholds=function(){return r.slice()},h.copy=function(){return Hm().domain([i,s]).range(e).unknown(t)},bw.apply(_m(h),arguments)}function Pm(t){return 1-Math.sqrt(1-t*t)}$m=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?Dm:(i=Im.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Dm:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(Im.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=Lm(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,m=t.type;"n"===m?(p=!0,m="g"):Em[m]||(void 0===y&&(y=12),w=!0,m="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var g="$"===f?r:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?e:/[%p]/.test(m)?o:"",M=Em[m],k=/[defgprs%]/.test(m);function x(t){var r,e,o,f=g,x=b;if("c"===m)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===m?zm[8+Nm/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var N=f.length+t.length+x.length,W=N<v?new Array(v-N+1).join(i):"";switch(p&&d&&(t=n(W+t,W.length?v-x.length:1/0),W=""),s){case"<":t=f+t+x+W;break;case"=":t=f+W+t+x;break;case"^":t=W.slice(0,N=W.length>>1)+f+t+x+W.slice(N);break;default:t=W+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=Lm(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(Am(i)/3))),r=Math.pow(10,-n),e=zm[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Cm=$m.format,Om=$m.formatPrefix;const{propDefaultValues:qm}=r;class Rm{}Rm.mainTitle="Heat Map Title",Rm.subTitle="This is the heat map's subtitle",Rm.height=250,Rm.width=500,Rm.margin={top:2.5,bottom:2.5,right:5,left:5},Rm.padding={top:20,bottom:30,right:60,left:80},Rm.xAccessor="date",Rm.yAccessor="category",Rm.valueAccessor="value",Rm.shape="rect",Rm.hideAxisPath=qm.showBaselineFalse,Rm.accessibility=qm.accessibility,Rm.animationConfig=qm.animationConfig,Rm.highestHeadingLevel=qm.highestHeadingLevel,Rm.xAxis=qm.xAxis,Rm.yAxis=qm.yAxis,Rm.wrapLabel=qm.wrapLabel,Rm.strokeWidth=qm.strokeWidth2,Rm.colorPalette=qm.colorPaletteSequential,Rm.colorSteps=qm.colorSteps5,Rm.hoverStyle=qm.hoverStyle,Rm.clickStyle=qm.clickStyle,Rm.cursor=qm.cursor,Rm.hoverOpacity=qm.hoverOpacity,Rm.dataLabel=qm.dataLabel,Rm.legend=qm.legend,Rm.tooltipLabel=qm.tooltipLabel,Rm.showTooltip=qm.showTooltip,Rm.suppressEvents=qm.suppressEvents,Rm.referenceLines=qm.referenceLines,Rm.annotations=qm.annotations,Rm.clickHighlight=qm.clickHighlight;var Xm={value:function(){}};function Fm(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new jm(n)}function jm(t){this._=t}function Gm(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function Vm(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function Ym(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=Xm,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}jm.prototype=Fm.prototype={constructor:jm,on:function(t,i){var s,n=this._,r=Gm(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=Ym(n[s],t.name,i);else if(null==i)for(s in n)n[s]=Ym(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=Vm(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new jm(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var Km,Bm,Um=0,Zm=0,Jm=0,Qm=0,tg=0,ig=0,sg="object"==typeof performance&&performance.now?performance:Date,ng="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function rg(){return tg||(ng(eg),tg=sg.now()+ig)}function eg(){tg=0}function hg(){this._call=this._time=this._next=null}function ag(t,i,s){var n=new hg;return n.restart(t,i,s),n}function og(){tg=(Qm=sg.now())+ig,Um=Zm=0;try{!function(){rg(),++Um;for(var t,i=Km;i;)(t=tg-i._time)>=0&&i._call.call(null,t),i=i._next;--Um}()}finally{Um=0,function(){for(var t,i,s=Km,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:Km=i);Bm=t,cg(n)}(),tg=0}}function ug(){var t=sg.now(),i=t-Qm;i>1e3&&(ig-=i,Qm=t)}function cg(t){Um||(Zm&&(Zm=clearTimeout(Zm)),t-tg>24?(t<1/0&&(Zm=setTimeout(og,t-sg.now()-ig)),Jm&&(Jm=clearInterval(Jm))):(Jm||(Qm=sg.now(),Jm=setInterval(ug,1e3)),Um=1,ng(og)))}function lg(t,i,s){var n=new hg;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}hg.prototype=ag.prototype={constructor:hg,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?rg():+s)+(null==i?0:+i),this._next||Bm===this||(Bm?Bm._next=this:Km=this,Bm=this),this._call=t,this._time=s,cg()},stop:function(){this._call&&(this._call=null,this._time=1/0,cg())}};var fg=Fm("start","end","interrupt"),dg=[];function vg(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return lg(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(lg((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=ag((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:fg,tween:dg,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function pg(t,i){var s=wg(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function yg(t,i){var s=wg(t,i);if(s.state>2)throw new Error("too late; already started");return s}function wg(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function mg(t,i){var s,n;return function(){var r=yg(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function gg(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=yg(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function bg(t,i,s){var n=t._id;return t.each((function(){var t=yg(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return wg(t,n).value[i]}}function Mg(t,i){var s;return("number"==typeof i?um:i instanceof Yw?om:(s=Yw(i))?(i=s,om):fm)(t,i)}function kg(t){return function(){this.removeAttribute(t)}}function xg(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ag(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function Ng(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function Wg(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function Lg(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function Sg(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function Tg(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function Eg(t,i){return function(){pg(this,t).delay=+i.apply(this,arguments)}}function Dg(t,i){return i=+i,function(){pg(this,t).delay=i}}function $g(t,i){return function(){yg(this,t).duration=+i.apply(this,arguments)}}function Cg(t,i){return i=+i,function(){yg(this,t).duration=i}}function Og(t,i){if("function"!=typeof i)throw new Error;return function(){yg(this,t).ease=i}}function Ig(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?pg:yg;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var zg=uw.prototype.constructor;function _g(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var Hg=0;function Pg(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function qg(){return++Hg}var Rg=uw.prototype;Pg.prototype=function(t){return uw().transition(t)}.prototype={constructor:Pg,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=oy(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,vg(l[f],i,s,f,l,wg(a,s)));return new Pg(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=cy(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=wg(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&vg(f,i,s,p,d,v);e.push(d),h.push(o)}return new Pg(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=ly(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new Pg(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new Pg(e,this._parents,this._name,this._id)},selection:function(){return new zg(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=qg(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=wg(h,i);vg(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Pg(n,this._parents,t,s)},call:Rg.call,nodes:Rg.nodes,node:Rg.node,size:Rg.size,empty:Rg.empty,each:Rg.each,on:function(t,i){var s=this._id;return arguments.length<2?wg(this.node(),s).on.on(t):this.each(Ig(s,t,i))},attr:function(t,i){var s=ny(t),n="transform"===s?km:Mg;return this.attrTween(t,"function"==typeof i?(s.local?Lg:Wg)(s,n,bg(this,"attr."+t,i)):null==i?(s.local?xg:kg)(s):(s.local?Ng:Ag)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=ny(t);return this.tween(s,(n.local?Sg:Tg)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?Mm:Mg;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=Ly(this,t),h=(this.style.removeProperty(t),Ly(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=Ly(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=Ly(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,bg(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=Ly(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,_g(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(bg(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=wg(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?mg:gg)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?Eg:Dg)(i,t)):wg(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?$g:Cg)(i,t)):wg(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(Og(i,t)):wg(this.node(),i).ease}};var Xg={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Fg(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return Xg.time=rg(),Xg;return s}uw.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},uw.prototype.transition=function(t){var i,s;t instanceof Pg?(i=t._id,t=t._name):(i=qg(),(s=Xg).time=rg(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&vg(h,t,i,u,a,s||Fg(h,i));return new Pg(n,this._parents,t,i)};var jg="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Gg=new Uint8Array(16);function Vg(){if(!jg)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return jg(Gg)}for(var Yg=[],Kg=0;Kg<256;++Kg)Yg[Kg]=(Kg+256).toString(16).substr(1);function Bg(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||Vg)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[Yg[t[i++]],Yg[t[i++]],Yg[t[i++]],Yg[t[i++]],"-",Yg[t[i++]],Yg[t[i++]],"-",Yg[t[i++]],Yg[t[i++]],"-",Yg[t[i++]],Yg[t[i++]],"-",Yg[t[i++]],Yg[t[i++]],Yg[t[i++]],Yg[t[i++]],Yg[t[i++]],Yg[t[i++]]].join("")}(r)}const{calculateLuminance:Ug,prepareStrokeColorsFromScheme:Zg,verifyTextHasSpace:Jg,checkAttributeTransitions:Qg,createTextStrokeFilter:tb,drawHoverStrokes:ib,removeHoverStrokes:sb,buildStrokes:nb,convertColorsToTextures:rb,findTagLevel:eb,prepareRenderChange:hb,initializeDescriptionRoot:ab,initializeElementAccess:ob,setElementFocusHandler:ub,setElementAccessID:cb,setAccessibilityController:lb,hideNonessentialGroups:fb,setAccessTitle:db,setAccessSubtitle:vb,setAccessLongDescription:pb,setAccessExecutiveSummary:yb,setAccessPurpose:wb,setAccessContext:mb,setAccessStatistics:gb,setAccessChartCounts:bb,setAccessXAxis:Mb,setAccessYAxis:kb,setAccessStructure:xb,setAccessAnnotation:Ab,retainAccessFocus:Nb,checkAccessFocus:Wb,setElementInteractionAccessState:Lb,setAccessibilityDescriptionWidth:Sb,autoTextColor:Tb,annotate:Eb,chartAccessors:Db,checkInteraction:$b,checkClicked:Cb,checkHovered:Ob,convertVisaColor:Ib,drawAxis:zb,drawLegend:_b,drawTooltip:Hb,formatStats:Pb,formatDate:qb,getColors:Rb,getLicenses:Xb,getPadding:Fb,getScopedData:jb,initTooltipStyle:Gb,overrideTitleTooltip:Vb,placeDataLabels:Yb,scopeDataKeys:Kb,transitionEndAll:Bb,validateAccessibilityProps:Ub}=r,Zb=class{constructor(s){t(this,s),this.mainTitle=Rm.mainTitle,this.subTitle=Rm.subTitle,this.height=Rm.height,this.width=Rm.width,this.highestHeadingLevel=Rm.highestHeadingLevel,this.margin=Rm.margin,this.padding=Rm.padding,this.xAccessor=Rm.xAccessor,this.yAccessor=Rm.yAccessor,this.valueAccessor=Rm.valueAccessor,this.xAxis=Rm.xAxis,this.yAxis=Rm.yAxis,this.wrapLabel=Rm.wrapLabel,this.hideAxisPath=Rm.hideAxisPath,this.colorPalette=Rm.colorPalette,this.colorSteps=Rm.colorSteps,this.hoverStyle=Rm.hoverStyle,this.clickStyle=Rm.clickStyle,this.cursor=Rm.cursor,this.shape=Rm.shape,this.hoverOpacity=Rm.hoverOpacity,this.animationConfig=Rm.animationConfig,this.strokeWidth=Rm.strokeWidth,this.dataLabel=Rm.dataLabel,this.showTooltip=Rm.showTooltip,this.tooltipLabel=Rm.tooltipLabel,this.accessibility=Rm.accessibility,this.legend=Rm.legend,this.annotations=Rm.annotations,this.clickHighlight=Rm.clickHighlight,this.suppressEvents=Rm.suppressEvents,this.shouldValidateAccessibility=!0,this.nest=[],this.datakeys=[],this.updated=!0,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateTableData=!1,this.shouldUpdateScales=!1,this.shouldResetRoot=!1,this.shouldSetColors=!1,this.shouldValidateInteractionKeys=!1,this.shouldFormatClickHighlight=!1,this.shouldFormatHoverHighlight=!1,this.shouldUpdateAnnotations=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldSetGlobalSelections=!1,this.shouldEnterUpdateExit=!1,this.shouldUpdateGeometries=!1,this.shouldSetSelectionClass=!1,this.shouldDrawInteractionState=!1,this.shouldUpdateLegend=!1,this.shouldUpdateCursor=!1,this.shouldBindInteractivity=!1,this.shouldUpdateLabels=!1,this.shouldSetLabelOpacity=!1,this.shouldSwapXAxis=!1,this.shouldSwapYAxis=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetTextures=!1,this.shouldSetStrokes=!1,this.strokes={},this.topLevel="h2",this.bottomLevel="p",this.textTreatmentHandler=(t,i,s)=>{const n=!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors(t.valueAccessor):this.rawHeat(t.valueAccessor),r=Tb(n),e=cw(s[i]);return e.attr("filter",e.classed("textIsMoving")?null:tb({root:this.svg.node(),id:this.chartID,color:n})),r},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateScales=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0,this.shouldSetLabelOpacity=!0}idWatcher(t,i){this.chartID=t,this.heatMapEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldSetTextures=!0,this.shouldDrawInteractionState=!0,this.shouldSetStrokes=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}layoutWatcher(t,i){this.shouldSetDimensions=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetLabelOpacity=!0}xAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0,this.shouldSetLabelOpacity=!0}yAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0,this.shouldSetLabelOpacity=!0}groupAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateTableData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldSetGeometryAriaLabels=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldSetTextures=!0,this.shouldSetStrokes=!0}xKeyOrderWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0}yKeyOrderWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0}xAxisWatcher(t,i){const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement;(!(!t||!t.format)&&t.format)!==(!(!i||!i.format)&&i.format)&&(this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0),s!==n&&(this.shouldSwapXAxis=!0),this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0}yAxisWatcher(t,i){const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement;(!(!t||!t.format)&&t.format)!==(!(!i||!i.format)&&i.format)&&(this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0),s!==n&&(this.shouldSwapYAxis=!0),this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0}wrapLabelWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}hideAxisPathWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}shapeWatcher(t,i){this.shouldUpdateGeometries=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0}strokeWidthWatcher(t,i){this.shouldUpdateGeometries=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldUpdateGeometries=!0,this.shouldSetStrokes=!0}hoverOpacityWatcher(t,i){this.shouldSetLabelOpacity=!0,this.shouldDrawInteractionState=!0}labelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0)}showTooltipWatcher(t,i){}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}legendWatcher(t,i){this.shouldUpdateLegend=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideTextures)&&t.hideTextures)===(!(!i||!i.hideTextures)&&i.hideTextures)&&(!(!t||!t.showExperimentalTextures)&&t.showExperimentalTextures)===(!(!i||!i.showExperimentalTextures)&&i.showExperimentalTextures)||(this.shouldSetTextures=!0,this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0,this.shouldDrawInteractionState=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetTextures=!0}clickWatcher(t,i){this.shouldFormatClickHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0}hoverWatcher(t,i){this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"heat-map-"+Bg(),this.heatMapEl.id=this.chartID,this.setTagLevels(),this.prepareData(),this.setDimensions(),this.setColors(),this.prepareScales(),this.validateInteractionKeys(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.formatClickHighlight(),this.formatHoverHighlight(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTextures(),this.setStrokes(),this.setGlobalSelections(),this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.drawGeometries(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawDataLabels(),this.drawLegendElements(),this.setSelectedClass(),this.updateInteractionState(),this.bindInteractivity(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),fb(this.root.node(),this.map.node()),this.setGroupAccessibilityID(),this.onChangeHandler(),this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldSetTextures&&(this.setTextures(),this.shouldSetTextures=!1),this.shouldSetStrokes&&(this.setStrokes(),this.shouldSetStrokes=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldEnterUpdateExit&&(this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateGeometries&&(this.drawGeometries(),this.shouldUpdateGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldSwapXAxis&&(this.drawXAxis(!0),this.shouldSwapXAxis=!1),this.shouldSwapYAxis&&(this.drawYAxis(!0),this.shouldSwapYAxis=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,Ub(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}formatClickHighlight(){this.clickHighlight&&this.clickHighlight.map(t=>{t.xAccessor&&t.yAccessor||(t.xAccessor=t[this.xAccessor]instanceof Date?qb({date:t[this.xAccessor],format:this.xAxis.format,offsetTimezone:!0}):t[this.xAccessor],t.yAccessor=t[this.yAccessor]instanceof Date?qb({date:t[this.yAccessor],format:this.yAxis.format,offsetTimezone:!0}):t[this.yAccessor])})}formatHoverHighlight(){this.hoverHighlight&&(this.hoverHighlight.xAccessor&&this.hoverHighlight.yAccessor||(this.hoverHighlight.xAccessor=this.hoverHighlight[this.xAccessor]instanceof Date?qb({date:this.hoverHighlight[this.xAccessor],format:this.xAxis.format,offsetTimezone:!0}):this.hoverHighlight[this.xAccessor],this.hoverHighlight.yAccessor=this.hoverHighlight[this.yAccessor]instanceof Date?qb({date:this.hoverHighlight[this.yAccessor],format:this.yAxis.format,offsetTimezone:!0}):this.hoverHighlight[this.yAccessor]))}setDimensions(){this.padding="string"==typeof this.padding?Fb(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}validateInteractionKeys(){if(this.interactionKeys&&this.interactionKeys.length){if(this.interactionKeys.includes(this.xAccessor)||this.interactionKeys.includes(this.yAccessor)){const t=[];this.interactionKeys.map(i=>{t.push(i===this.xAccessor?"xAccessor":i===this.yAccessor?"yAccessor":i)}),this.innerInteractionKeys=t}}else this.innerInteractionKeys=["xAccessor","yAccessor"]}prepareScales(){const t=(this.minValueOverride||0===this.minValueOverride)&&this.minValueOverride<gw(this.preppedData,t=>t.valueAccessor)?this.minValueOverride:gw(this.preppedData,t=>t.valueAccessor),i=(this.maxValueOverride||0===this.maxValueOverride)&&this.maxValueOverride>mw(this.preppedData,t=>t.valueAccessor)?this.maxValueOverride:mw(this.preppedData,t=>t.valueAccessor);this.x=Ew().domain(this.xKeyOrder?this.xKeyOrder:this.preppedData.map(t=>t.xAccessor)).range([0,this.innerPaddedWidth]),this.x.padding(this.strokeWidth?this.strokeWidth/this.x.bandwidth():0),this.y=Ew().domain(this.yKeyOrder?this.yKeyOrder:this.preppedData.map(t=>t.yAccessor)).range([0,this.innerPaddedHeight]),this.y.padding(this.strokeWidth?this.strokeWidth/this.y.bandwidth():0),this.heat=Hm().domain([t,i]);const s=[],n=[];let r=0;const e=Math.ceil(this.preparedColors.length/2),h=this.colorPalette&&this.colorPalette.includes("diverging"),a=this.colorPalette&&this.colorPalette.includes("dark");this.preparedColors.forEach(t=>{const i=Zg(t,r,this.preparedColors,h?"diverging":"sequential");if(h){const t=Ug(i.fillColor),e=Ug(i.textureColor),h=t>e?i.textureColor:i.fillColor,o=t<e?i.textureColor:i.fillColor;this.preparedColors.length%2&&r===(this.preparedColors.length-1)/2?(n.push(a?h:o),s.push(a?o:h)):(s.push(a?h:o),n.push(a?o:h))}else r+1<e?(n.push(this.preparedColors[0]),s.push(this.preparedColors[this.preparedColors.length-1])):(s.push(this.preparedColors[0]),n.push(this.preparedColors[this.preparedColors.length-1]));r++}),this.fillColors=Hm().domain([t,i]).range(n),this.strokeColors=Hm().domain([t,i]).range(s),this.rawHeat=Hm().domain([t,i]).range(this.preparedColors),this.updateCheck=!0}setColors(){this.preparedColors=this.colors?Ib(this.colors):Rb(this.colorPalette,this.colorSteps)}setTextures(){const t=this.colorPalette&&this.colorPalette.includes("diverging")?"diverging":"sequential";if(this.accessibility.hideTextures||this.colorSteps>("diverging"===t?11:9)||!this.accessibility.showExperimentalTextures)this.colorArr=this.preparedColors;else{const i=rb({colors:this.preparedColors,rootSVG:this.svg.node(),id:this.chartID,scheme:t,disableTransitions:!this.duration});this.colorArr=i}this.heat.range(this.colorArr)}setStrokes(){const t=Object.assign(Object.assign({},this.clickStyle),{color:void 0}),i=Object.assign(Object.assign({},this.hoverStyle),{color:void 0});this.strokes=nb({root:this.svg.node(),id:this.chartID,colors:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors.range():this.preparedColors,clickStyle:t,hoverStyle:i,strokeOverride:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.strokeColors.range():void 0})}setTableData(){const t=Kb(this,Db,"heat-map");this.tableData=jb(this.data,t),this.tableColumns=Object.keys(t)}prepareData(){if(this.updateCheck){this.interpolating=this.preppedData;const t=this.x.domain(),i=this.x.range(),s=this.y.domain(),n=this.y.range();this.interpolating.x=Ew().domain(t).range(i),this.interpolating.y=Ew().domain(s).range(n)}this.preppedData=this.data.map(t=>{const i=Object.assign({},t);return i.valueAccessor=parseFloat(t[this.valueAccessor]),i.xAccessor=t[this.xAccessor]instanceof Date?qb({date:t[this.xAccessor],format:this.xAxis.format,offsetTimezone:!0}):t[this.xAccessor],i.yAccessor=t[this.yAccessor]instanceof Date?qb({date:t[this.yAccessor],format:this.yAxis.format,offsetTimezone:!0}):t[this.yAccessor],i}),this.nest=function(){var t,i,s,n=[],r=[];function e(s,r,h,a){if(r>=n.length)return null!=t&&s.sort(t),null!=i?i(s):s;for(var o,u,c,l=-1,f=s.length,d=n[r++],v=kw(),p=h();++l<f;)(c=v.get(o=d(u=s[l])+""))?c.push(u):v.set(o,[u]);return v.each((function(t,i){a(p,i,e(t,r,h,a))})),p}return s={object:function(t){return e(t,0,xw,Aw)},map:function(t){return e(t,0,Nw,Ww)},entries:function(t){return function t(s,e){if(++e>n.length)return s;var h,a=r[e-1];return null!=i&&e>=n.length?h=s.entries():(h=[],s.each((function(i,s){h.push({key:s,values:t(i,e)})}))),null!=a?h.sort((function(t,i){return a(t.key,i.key)})):h}(e(t,0,Nw,Ww),0)},key:function(t){return n.push(t),s},sortKeys:function(t){return r[n.length-1]=t,s},sortValues:function(i){return t=i,s},rollup:function(t){return i=t,s}}}().key(t=>t[this.yAccessor]).entries(this.preppedData),this.datakeys=this.nest.map(t=>t.key)}reSetRoot(){hb({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:Pm}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),hb({selection:this.root,duration:this.duration,namespace:"root_reset",easing:Pm}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),hb({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:Pm}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),Sb(this.chartID,this.width)}drawXAxis(t){zb({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,top:"top"===this.xAxis.placement,wrapLabel:this.wrapLabel?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:t||!this.xAxis.visible,duration:this.duration,hidePath:this.hideAxisPath})}drawYAxis(t){zb({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:"right"!==this.yAxis.placement,right:"right"===this.yAxis.placement,format:this.yAxis.format,wrapLabel:this.wrapLabel?this.padding.left||100:"",tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:t||!this.yAxis.visible,duration:this.duration,hidePath:this.hideAxisPath})}setXAxisAccessibility(){Mb({rootEle:this.heatMapEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:this.x||!1,xAxisLabel:this.xAxis&&this.xAxis.label||""})}setYAxisAccessibility(){kb({rootEle:this.heatMapEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:this.y||!1,yAxisLabel:this.yAxis&&this.yAxis.label||""})}renderRootElements(){this.svg=cw(this.heatMapEl).select(".visa-viz-d3-heat-map-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.map=this.rootG.append("g").attr("class","map-group"),this.labelG=this.rootG.append("g").attr("class","heat-map-dataLabel-group"),this.legendG=cw(this.heatMapEl).select(".heat-map-legend").append("svg"),this.tooltipG=cw(this.heatMapEl).select(".heat-map-tooltip")}setGlobalSelections(){this.xAxisElement=this.rootG.selectAll(".bottom");const t=this.map.selectAll(".row").data(this.nest,t=>t.key);this.enterRowWrappers=t.enter().append("g"),this.exitRowWrappers=t.exit(),this.updateRowWrappers=t.merge(this.enterRowWrappers);const i=this.updateRowWrappers.selectAll(".grid").data(t=>t.values,t=>t.xAccessor+t.yAccessor);this.enter=i.enter().append("rect"),this.exit=i.exit(),this.update=i.merge(this.enter),this.exitSize=this.exit.size(),this.enterSize=this.enter.size(),this.exitSize+=this.exitRowWrappers.selectAll(".grid").size();const s=this.labelG.selectAll("g").data(this.nest,t=>t.key);this.enteringLabelGroups=s.enter().append("g"),this.exitingLabelGroups=s.exit(),this.updatingLabelGroups=s.merge(this.enteringLabelGroups);const n=this.updatingLabelGroups.selectAll("text").data(t=>t.values,t=>t.xAccessor+t.yAccessor);this.enterLabels=n.enter().append("text"),this.exitLabels=n.exit(),this.updateLabels=n.merge(this.enterLabels)}enterGeometries(){this.enter.interrupt(),this.enterRowWrappers.attr("class","row").classed("entering",!0).attr("cursor",this.suppressEvents?null:this.cursor).each((t,i,s)=>{ob(s[i])}),this.enter.attr("class","grid").each((t,i,s)=>{ob(s[i])}).on("click",this.suppressEvents?null:t=>{this.onClickHandler(t)}).on("mouseover",this.suppressEvents?null:t=>{this.onHoverHandler(t)}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("opacity",0).attr("y",t=>{if(this.interpolating&&void 0===this.interpolating.y(t.yAccessor)){let i=this.y(t.yAccessor);return i+=this.y.bandwidth()*(i/this.y(this.y.domain()[0])),i}return this.interpolating?this.interpolating.y(t.yAccessor):this.y(t.yAccessor)}).attr("height",t=>this.interpolating&&void 0===this.interpolating.y(t.yAccessor)?0:this.interpolating?this.interpolating.y.bandwidth():this.y.bandwidth()).attr("x",t=>{if(this.interpolating&&void 0===this.interpolating.x(t.xAccessor)){let i=this.x(t.xAccessor);return i+=this.x.bandwidth()*(i/this.x(this.x.domain()[this.x.domain().length-1])),i}return this.interpolating?this.interpolating.x(t.xAccessor):this.x(t.xAccessor)}).attr("width",t=>this.interpolating&&void 0===this.interpolating.x(t.xAccessor)?0:this.interpolating?this.interpolating.x.bandwidth():this.x.bandwidth()).attr("rx","circle"===this.shape?this.x.bandwidth():0).attr("ry","circle"===this.shape?this.y.bandwidth():0),this.update.order(),this.enterRowWrappers.order()}updateGeometries(){this.update.interrupt(),this.update.transition("opacity").duration((t,i,s)=>cw(s[i]).classed("entering")?(cw(s[i]).classed("entering",!1),this.duration):0).ease(Pm).attr("opacity",t=>$b(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}exitGeometries(){this.exit.interrupt(),this.exit.transition("exit").duration(this.duration).ease(Pm).attr("opacity",0).attr("y",(t,i,s)=>{if(void 0===this.y(t.yAccessor)){const t=cw(s[i]);let n=+t.attr("y");return n+=+t.attr("height")*(n/this.y(this.y.domain()[0])),n}return this.y(t.yAccessor)}).attr("height",t=>void 0===this.y(t.yAccessor)?0:this.y.bandwidth()).attr("x",(t,i,s)=>{if(void 0===this.x(t.xAccessor)){const t=cw(s[i]);let n=+t.attr("x");return n+=+t.attr("width")*(n/this.x(this.x.domain()[this.x.domain().length-1])),n}return this.x(t.xAccessor)}).attr("width",t=>void 0===this.x(t.xAccessor)?0:this.x.bandwidth()),this.exitRowWrappers.selectAll(".grid").transition("exit").duration(this.duration).ease(Pm).attr("opacity",0).attr("y",(t,i,s)=>{const n=cw(s[i]);let r=+n.attr("y");return r+=+n.attr("height")*(r/this.y(this.y.domain()[0])),r}).attr("height",0).attr("x",(t,i,s)=>{if(void 0===this.x(t.xAccessor)){const t=cw(s[i]);let n=+t.attr("x");return n+=+t.attr("width")*(n/this.x(this.x.domain()[this.x.domain().length-1])),n}return this.x(t.xAccessor)}).attr("width",t=>void 0===this.x(t.xAccessor)?0:this.x.bandwidth()),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(Pm).call(Bb,()=>{const t=Wb(this.rootG.node());this.exit.remove(),this.exitRowWrappers.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),Nb({parentGNode:this.rootG.node(),focusDidExist:t})})}drawGeometries(){this.updateRowWrappers.transition("update").duration(this.duration).ease(Pm).call(Bb,()=>{this.updateRowWrappers.classed("entering",!1)});const t=this.update.classed("geometryIsMoving",(t,i,s)=>Qg(cw(s[i]),[{attr:"y",numeric:!0,newValue:this.y(t.yAccessor)},{attr:"height",numeric:!0,newValue:this.y.bandwidth()},{attr:"x",numeric:!0,newValue:this.x(t.xAccessor)},{attr:"width",numeric:!0,newValue:this.x.bandwidth()},{attr:"rx",numeric:!0,newValue:"circle"===this.shape?this.x.bandwidth():0},{attr:"ry",numeric:!0,newValue:"circle"===this.shape?this.y.bandwidth():0}])).transition("update").duration(this.duration).ease(Pm).attr("y",t=>this.y(t.yAccessor)).attr("height",this.y.bandwidth()).attr("x",t=>this.x(t.xAccessor)).attr("width",this.x.bandwidth()).attr("rx","circle"===this.shape?this.x.bandwidth():0).attr("ry","circle"===this.shape?this.y.bandwidth():0);!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures||t.attr("fill",t=>this.heat(t[this.valueAccessor])),t.call(Bb,()=>{this.update.classed("geometryIsMoving",!1),this.updateInteractionState(),Nb({parentGNode:this.rootG.node()})})}updateInteractionState(){sb(this.svg.node()),this.update.attr("fill",t=>this.heat(t[this.valueAccessor])).attr("opacity",t=>$b(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).attr("filter",(t,i,s)=>{if(!this.accessibility.hideStrokes&&!cw(s[i]).classed("geometryIsMoving")){const n=this.clickHighlight&&this.clickHighlight.length>0&&Cb(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&Ob(t,this.hoverHighlight,this.innerInteractionKeys),e=!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors(t[this.valueAccessor]):this.rawHeat(t[this.valueAccessor]),h=!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.strokeColors(t[this.valueAccessor]):void 0,a=n?"click":r&&!cw(s[i]).classed("geometryIsMoving")?"hover":"rest";return"hover"===a&&ib({inputElement:s[i],id:this.chartID,key:t[this.xAccessor]+t[this.yAccessor],strokeWidth:this.hoverStyle.strokeWidth,fill:e,strokeOverride:h}),this.strokes[a+e]}return null}),Nb({parentGNode:this.rootG.node()}),this.updateLabels.attr("fill",this.textTreatmentHandler)}setLabelOpacity(){this.processLabelOpacity(this.updateLabels)}processLabelOpacity(t,i){const s=this.dataLabel.visible?1:0,n={width:this.x.bandwidth(),height:this.y.bandwidth()},r=t=>{let i=this.dataLabel.labelAccessor?t[this.dataLabel.labelAccessor]:t.valueAccessor;return i=i instanceof Date?qb({date:i,format:this.dataLabel.format,offsetTimezone:!0}):Pb(i,this.dataLabel.format),this.accessibility.showSmallLabels||Jg({text:i,dimensions:n,fontSize:14})?$b(t,s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:0};i?t.attr("opacity",r):t.each((t,i,s)=>{cw(s[i]).classed("entering")||cw(s[i]).attr("opacity",()=>r(t))})}setSelectedClass(){this.update.classed("highlight",(t,i,s)=>{let n=$b(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return n=!(!this.clickHighlight||!this.clickHighlight.length)&&n,Lb(s[i],n,this.accessibility.elementsAreInterface),n})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),this.updateLabels.attr("cursor",this.suppressEvents?null:this.cursor)}bindInteractivity(){this.update.on("click",this.suppressEvents?null:t=>{this.onClickHandler(t)}).on("mouseover",this.suppressEvents?null:t=>{this.onHoverHandler(t)}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateLabels.on("click",this.dataLabel.visible&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?t=>this.onHoverHandler(t):null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}enterDataLabels(){this.enteringLabelGroups.attr("class","heat-map-label-wrapper"),this.enterLabels.attr("class","heat-map-dataLabel entering").attr("opacity",0).attr("fill",this.textTreatmentHandler).attr("cursor",this.suppressEvents?null:this.cursor).on("click",this.dataLabel.visible&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?t=>this.onHoverHandler(t):null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?()=>this.onMouseOutHandler():null),Yb({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})}updateDataLabels(){const t=this.updateLabels.transition("opacity").ease(Pm).duration((t,i,s)=>cw(s[i]).classed("entering")?this.duration/2:0).delay((t,i,s)=>cw(s[i]).classed("entering")?this.duration/2:0);this.processLabelOpacity(t,!0),t.call(Bb,()=>{this.updateLabels.classed("entering",!1)})}exitDataLabels(){this.exitLabels.transition("exit").ease(Pm).duration(this.duration/2).attr("opacity",0).remove(),this.exitingLabelGroups.selectAll("text").transition("exit").ease(Pm).duration(this.duration/2).attr("opacity",0).call(Bb,()=>{this.exitingLabelGroups.remove()})}drawDataLabels(){this.updateLabels.attr("fill",this.textTreatmentHandler).text(t=>{const i=this.dataLabel.labelAccessor?t[this.dataLabel.labelAccessor]:t.valueAccessor;return i instanceof Date?qb({date:i,format:this.dataLabel.format,offsetTimezone:!0}):Pb(i,this.dataLabel.format)});const t=this.updateLabels.transition("update").ease(Pm).duration(this.duration);Yb({root:t,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})}drawLegendElements(){_b({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.bottom+60,colorArr:this.legend&&"gradient"!==this.legend.type?this.colorArr:this.preparedColors,baseColorArr:this.colorPalette&&this.colorPalette.includes("diverging")?this.strokeColors.range():[this.preparedColors[this.preparedColors.length-1]],hideStrokes:this.accessibility.hideStrokes,scale:this.heat,steps:this.colorSteps,margin:this.margin,padding:this.padding,duration:this.duration,type:this.legend.type,fontSize:12,label:this.legend.labels,format:this.legend.format,hide:!this.legend.visible})}drawAnnotations(){Eb({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.xAccessor,yScale:this.y,yAccessor:this.yAccessor})}setAnnotationAccessibility(){Ab(this.heatMapEl,this.annotations)}setTagLevels(){this.topLevel=eb(this.highestHeadingLevel),this.bottomLevel=eb(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){ab({rootEle:this.heatMapEl,title:this.accessibility.title||this.mainTitle,chartTag:"heat-map",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){lb({node:this.svg.node(),chartTag:"heat-map",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"cell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:Kb(this,Db,"heat-map"),groupAccessor:this.yAccessor,groupName:"row",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,s)=>{ob(s[i])})}setGeometryAriaLabels(){const t=Kb(this,Db,"heat-map");this.update.each((i,s,n)=>{ub({node:n[s],geomType:"cell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"row",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),cb({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateRowWrappers.each((t,i,s)=>{cb({node:s[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){db(this.heatMapEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){vb(this.heatMapEl,this.subTitle)}setChartAccessibilityLongDescription(){pb(this.heatMapEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){yb(this.heatMapEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){wb(this.heatMapEl,this.accessibility.purpose)}setChartAccessibilityContext(){mb(this.heatMapEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){gb(this.heatMapEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){bb({rootEle:this.heatMapEl,parentGNode:this.map.node(),chartTag:"heat-map",geomType:"cell",groupName:"row"})}setChartAccessibilityStructureNotes(){xb(this.heatMapEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){Vb(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&this.eventsTooltip({data:t,evt:Jy,isToShow:!0})}onMouseOutHandler(){Vb(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){Gb(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){Hb({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor,xAccessor:this.xAccessor,yAccessor:this.yAccessor,chartType:"heat-map"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldFormatClickHighlight&&(this.formatClickHighlight(),this.shouldFormatClickHighlight=!1),this.shouldFormatHoverHighlight&&(this.formatHoverHighlight(),this.shouldFormatHoverHighlight=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s(this.topLevel,{"data-testid":"main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions","data-testid":"sub-title"},this.subTitle),s("div",{class:"heat-map-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"cell",groupName:"row",chartTag:"heat-map",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:!0,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-heat-map-container"}),s("div",{class:"heat-map-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))}init(){const t=Object.keys(Rm);let i=0;const s={strokeWidth:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},wrapLabel:{exception:!1},hoverOpacity:{exception:0}};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:Rm[t[i]]}}get heatMapEl(){return n(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["layoutWatcher"],width:["layoutWatcher"],padding:["layoutWatcher"],margin:["layoutWatcher"],xAccessor:["xAccessorWatcher"],yAccessor:["yAccessorWatcher"],valueAccessor:["groupAccessorWatcher"],xKeyOrder:["xKeyOrderWatcher"],yKeyOrder:["yKeyOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],hideAxisPath:["hideAxisPathWatcher"],colorPalette:["colorsWatcher"],colors:["colorsWatcher"],colorSteps:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],shape:["shapeWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],legend:["legendWatcher"],suppressEvents:["suppressWatcher"],annotations:["annotationsWatcher"],accessibility:["accessibilityWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}heat-map{cursor:default}heat-map .annotations{pointer-events:none}heat-map .annotations .handle{pointer-events:all}heat-map .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}heat-map .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}heat-map .hidden{display:none}heat-map .axis{font-size:12px}heat-map .axis text{fill:#767676}heat-map .axis-label{text-anchor:middle;font:1rem sans-serif}heat-map .axis path{stroke:#767676}heat-map .axis .hidden{visibility:hidden}heat-map .heat-map-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}heat-map .heat-map-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"}};window.VisaChartsLibOSSLicenses=Xb();var Jb="http://www.w3.org/1999/xhtml";const Qb={svg:"http://www.w3.org/2000/svg",xhtml:Jb,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tM(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),Qb.hasOwnProperty(i)?{space:Qb[i],local:t}:t}function iM(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===Jb&&i.documentElement.namespaceURI===Jb?i.createElement(t):i.createElementNS(s,t)}}function sM(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function nM(t){var i=tM(t);return(i.local?sM:iM)(i)}function rM(){}function eM(t){return null==t?rM:function(){return this.querySelector(t)}}function hM(){return[]}function aM(t){return null==t?hM:function(){return this.querySelectorAll(t)}}function oM(t){return function(){return this.matches(t)}}function uM(t){return new Array(t.length)}function cM(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function lM(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new cM(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function fM(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new cM(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function dM(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function vM(t){return function(){this.removeAttribute(t)}}function pM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yM(t,i){return function(){this.setAttribute(t,i)}}function wM(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function mM(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function gM(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function bM(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function MM(t){return function(){this.style.removeProperty(t)}}function kM(t,i,s){return function(){this.style.setProperty(t,i,s)}}function xM(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function AM(t,i){return t.style.getPropertyValue(i)||bM(t).getComputedStyle(t,null).getPropertyValue(i)}function NM(t){return function(){delete this[t]}}function WM(t,i){return function(){this[t]=i}}function LM(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function SM(t){return t.trim().split(/^|\s+/)}function TM(t){return t.classList||new EM(t)}function EM(t){this._node=t,this._names=SM(t.getAttribute("class")||"")}function DM(t,i){for(var s=TM(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function $M(t,i){for(var s=TM(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function CM(t){return function(){DM(this,t)}}function OM(t){return function(){$M(this,t)}}function IM(t,i){return function(){(i.apply(this,arguments)?DM:$M)(this,t)}}function zM(){this.textContent=""}function _M(t){return function(){this.textContent=t}}function HM(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function PM(){this.innerHTML=""}function qM(t){return function(){this.innerHTML=t}}function RM(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function XM(){this.nextSibling&&this.parentNode.appendChild(this)}function FM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jM(){return null}function GM(){var t=this.parentNode;t&&t.removeChild(this)}function VM(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function YM(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}cM.prototype={constructor:cM,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},EM.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var KM={},BM=null;function UM(t,i,s){return t=ZM(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function ZM(t,i,s){return function(n){var r=BM;BM=n;try{t.call(this,this.__data__,i,s)}finally{BM=r}}}function JM(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function QM(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function tk(t,i,s){var n=KM.hasOwnProperty(t.type)?UM:ZM;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function ik(t,i,s){var n=bM(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function sk(t,i){return function(){return ik(this,t,i)}}function nk(t,i){return function(){return ik(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(KM={mouseenter:"mouseover",mouseleave:"mouseout"}));var rk=[null];function ek(t,i){this._groups=t,this._parents=i}function hk(){return new ek([[document.documentElement]],rk)}function ak(t){return"string"==typeof t?new ek([[document.querySelector(t)]],[document.documentElement]):new ek([[t]],rk)}function ok(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}ek.prototype=hk.prototype={constructor:ek,select:function(t){"function"!=typeof t&&(t=eM(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new ek(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=aM(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new ek(n,r)},filter:function(t){"function"!=typeof t&&(t=oM(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new ek(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?fM:lM,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,m,g=0,b=0;g<v;++g)if(w=p[g]){for(g>=b&&(b=g+1);!(m=y[b])&&++b<v;);w._next=m||null}}return(h=new ek(h,n))._enter=a,h._exit=o,h},enter:function(){return new ek(this._enter||this._groups.map(uM),this._parents)},exit:function(){return new ek(this._exit||this._groups.map(uM),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new ek(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=dM);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new ek(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=tM(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?pM:vM:"function"==typeof i?s.local?gM:mM:s.local?wM:yM)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?MM:"function"==typeof i?xM:kM)(t,i,null==s?"":s)):AM(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?NM:"function"==typeof i?LM:WM)(t,i)):this.node()[t]},classed:function(t,i){var s=SM(t+"");if(arguments.length<2){for(var n=TM(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?IM:i?CM:OM)(s,i))},text:function(t){return arguments.length?this.each(null==t?zM:("function"==typeof t?HM:_M)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?PM:("function"==typeof t?RM:qM)(t)):this.node().innerHTML},raise:function(){return this.each(XM)},lower:function(){return this.each(FM)},append:function(t){var i="function"==typeof t?t:nM(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:nM(t),n=null==i?jM:"function"==typeof i?i:eM(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(GM)},clone:function(t){return this.select(t?YM:VM)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=JM(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?tk:QM,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?nk:sk)(t,i))}};var uk=function(t){return 1===t.length&&(t=function(t){return function(i,s){return ok(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}(ok).right;function ck(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var lk=Math.sqrt(50),fk=Math.sqrt(10),dk=Math.sqrt(2);function vk(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=lk?10:e>=fk?5:e>=dk?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=lk?10:e>=fk?5:e>=dk?2:1)}function pk(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function yk(){}function wk(t,i){var s=new yk;if(t instanceof yk)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}yk.prototype=wk.prototype={constructor:yk,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var mk=Array.prototype,gk=mk.map,bk=mk.slice,Mk={name:"implicit"};function kk(){var t=wk(),i=[],s=[],n=Mk;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==Mk)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=wk();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=bk.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return kk(i,s).unknown(n)},pk.apply(r,arguments),r}function xk(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function Ak(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function Nk(){}var Wk="\\s*([+-]?\\d+)\\s*",Lk="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sk="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tk=/^#([0-9a-f]{3,8})$/,Ek=new RegExp("^rgb\\("+[Wk,Wk,Wk]+"\\)$"),Dk=new RegExp("^rgb\\("+[Sk,Sk,Sk]+"\\)$"),$k=new RegExp("^rgba\\("+[Wk,Wk,Wk,Lk]+"\\)$"),Ck=new RegExp("^rgba\\("+[Sk,Sk,Sk,Lk]+"\\)$"),Ok=new RegExp("^hsl\\("+[Lk,Sk,Sk]+"\\)$"),Ik=new RegExp("^hsla\\("+[Lk,Sk,Sk,Lk]+"\\)$"),zk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _k(){return this.rgb().formatHex()}function Hk(){return this.rgb().formatRgb()}function Pk(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=Tk.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?qk(i):3===s?new jk(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?Rk(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?Rk(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Ek.exec(t))?new jk(i[1],i[2],i[3],1):(i=Dk.exec(t))?new jk(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=$k.exec(t))?Rk(i[1],i[2],i[3],i[4]):(i=Ck.exec(t))?Rk(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Ok.exec(t))?Kk(i[1],i[2]/100,i[3]/100,1):(i=Ik.exec(t))?Kk(i[1],i[2]/100,i[3]/100,i[4]):zk.hasOwnProperty(t)?qk(zk[t]):"transparent"===t?new jk(NaN,NaN,NaN,0):null}function qk(t){return new jk(t>>16&255,t>>8&255,255&t,1)}function Rk(t,i,s,n){return n<=0&&(t=i=s=NaN),new jk(t,i,s,n)}function Xk(t){return t instanceof Nk||(t=Pk(t)),t?new jk((t=t.rgb()).r,t.g,t.b,t.opacity):new jk}function Fk(t,i,s,n){return 1===arguments.length?Xk(t):new jk(t,i,s,null==n?1:n)}function jk(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function Gk(){return"#"+Yk(this.r)+Yk(this.g)+Yk(this.b)}function Vk(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Yk(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Kk(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new Uk(t,i,s,n)}function Bk(t){if(t instanceof Uk)return new Uk(t.h,t.s,t.l,t.opacity);if(t instanceof Nk||(t=Pk(t)),!t)return new Uk;if(t instanceof Uk)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new Uk(h,a,o,t.opacity)}function Uk(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function Zk(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function Jk(t){return function(){return t}}function Qk(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):Jk(isNaN(t)?i:t)}xk(Nk,Pk,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:_k,formatHex:_k,formatHsl:function(){return Bk(this).formatHsl()},formatRgb:Hk,toString:Hk}),xk(jk,Fk,Ak(Nk,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new jk(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new jk(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gk,formatHex:Gk,formatRgb:Vk,toString:Vk})),xk(Uk,(function(t,i,s,n){return 1===arguments.length?Bk(t):new Uk(t,i,s,null==n?1:n)}),Ak(Nk,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Uk(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Uk(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new jk(Zk(t>=240?t-240:t+120,r,n),Zk(t,r,n),Zk(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const tx=function t(i){var s=function(t){return 1==(t=+t)?Qk:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):Jk(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=Fk(t)).r,(i=Fk(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=Qk(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function ix(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function sx(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=ux(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function nx(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function rx(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function ex(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=ux(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var hx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ax=new RegExp(hx.source,"g");function ox(t,i){var s,n,r,e=hx.lastIndex=ax.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=hx.exec(t))&&(n=ax.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:rx(s,n)})),e=ax.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function ux(t,i){var s,n=typeof i;return null==i||"boolean"===n?Jk(i):("number"===n?rx:"string"===n?(s=Pk(i))?(i=s,tx):ox:i instanceof Pk?tx:i instanceof Date?nx:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?ix:Array.isArray(i)?sx:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?ex:rx)(t,i)}function cx(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var lx,fx,dx,vx,px=180/Math.PI,yx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wx(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*px,skewX:Math.atan(o)*px,scaleX:h,scaleY:a}}function mx(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:rx(t,r)},{i:o-2,x:rx(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:rx(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:rx(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:rx(t,s)},{i:a-2,x:rx(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var gx=mx((function(t){return"none"===t?yx:(lx||(lx=document.createElement("DIV"),fx=document.documentElement,dx=document.defaultView),lx.style.transform=t,t=dx.getComputedStyle(fx.appendChild(lx),null).getPropertyValue("transform"),fx.removeChild(lx),wx(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),bx=mx((function(t){return null==t?yx:(vx||(vx=document.createElementNS("http://www.w3.org/2000/svg","g")),vx.setAttribute("transform",t),(t=vx.transform.baseVal.consolidate())?wx((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):yx)}),", ",")",")");function Mx(t){return+t}var kx=[0,1];function xx(t){return t}function Ax(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function Nx(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function Wx(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=Ax(r,n),e=s(h,e)):(n=Ax(n,r),e=s(e,h)),function(t){return e(n(t))}}function Lx(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=Ax(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=uk(t,i,1,n)-1;return e[s](r[s](i))}}function Sx(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Tx(t,i){return function(){var t,i,s,n,r,e,h=kx,a=kx,o=ux,u=xx;function c(){return n=Math.min(h.length,a.length)>2?Lx:Wx,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),rx)))(s)))},l.domain=function(t){return arguments.length?(h=gk.call(t,Mx),u===xx||(u=Nx(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=bk.call(t),c()):a.slice()},l.rangeRound=function(t){return a=bk.call(t),o=cx,c()},l.clamp=function(t){return arguments.length?(u=t?Nx(h):xx,l):u!==xx},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function Ex(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function Dx(t){return(t=Ex(Math.abs(t)))?t[1]:NaN}var $x,Cx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ox(t){if(!(i=Cx.exec(t)))throw new Error("invalid format: "+t);var i;return new Ix({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function Ix(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function zx(t,i){var s=Ex(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}Ox.prototype=Ix.prototype,Ix.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const _x={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return zx(100*t,i)},r:zx,s:function(t,i){var s=Ex(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-($x=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+Ex(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Hx(t){return t}var Px,qx,Rx,Xx=Array.prototype.map,Fx=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function jx(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=vk(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=function(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=lk?r*=10:e>=fk?r*=5:e>=dk&&(r*=2),i<t?-r:r}(t,i,s);switch((n=Ox(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Dx(i)/3)))-Dx(Math.abs(t)))}(e,h))||(n.precision=r),Rx(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,Dx(i)-Dx(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-Dx(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return qx(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=vk(a,o,s))>0?n=vk(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=vk(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}Px=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?Hx:(i=Xx.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Hx:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(Xx.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=Ox(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,m=t.type;"n"===m?(p=!0,m="g"):_x[m]||(void 0===y&&(y=12),w=!0,m="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var g="$"===f?r:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?e:/[%p]/.test(m)?o:"",M=_x[m],k=/[defgprs%]/.test(m);function x(t){var r,e,o,f=g,x=b;if("c"===m)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===m?Fx[8+$x/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var N=f.length+t.length+x.length,W=N<v?new Array(v-N+1).join(i):"";switch(p&&d&&(t=n(W+t,W.length?v-x.length:1/0),W=""),s){case"<":t=f+t+x+W;break;case"=":t=f+W+t+x;break;case"^":t=W.slice(0,N=W.length>>1)+f+t+x+W.slice(N);break;default:t=W+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=Ox(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(Dx(i)/3))),r=Math.pow(10,-n),e=Fx[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),qx=Px.format,Rx=Px.formatPrefix;var Gx={value:function(){}};function Vx(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Yx(n)}function Yx(t){this._=t}function Kx(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function Bx(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function Ux(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=Gx,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}Yx.prototype=Vx.prototype={constructor:Yx,on:function(t,i){var s,n=this._,r=Kx(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=Ux(n[s],t.name,i);else if(null==i)for(s in n)n[s]=Ux(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=Bx(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new Yx(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var Zx,Jx,Qx=0,tA=0,iA=0,sA=0,nA=0,rA=0,eA="object"==typeof performance&&performance.now?performance:Date,hA="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function aA(){return nA||(hA(oA),nA=eA.now()+rA)}function oA(){nA=0}function uA(){this._call=this._time=this._next=null}function cA(t,i,s){var n=new uA;return n.restart(t,i,s),n}function lA(){nA=(sA=eA.now())+rA,Qx=tA=0;try{!function(){aA(),++Qx;for(var t,i=Zx;i;)(t=nA-i._time)>=0&&i._call.call(null,t),i=i._next;--Qx}()}finally{Qx=0,function(){for(var t,i,s=Zx,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:Zx=i);Jx=t,dA(n)}(),nA=0}}function fA(){var t=eA.now(),i=t-sA;i>1e3&&(rA-=i,sA=t)}function dA(t){Qx||(tA&&(tA=clearTimeout(tA)),t-nA>24?(t<1/0&&(tA=setTimeout(lA,t-eA.now()-rA)),iA&&(iA=clearInterval(iA))):(iA||(sA=eA.now(),iA=setInterval(fA,1e3)),Qx=1,hA(lA)))}function vA(t,i,s){var n=new uA;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}uA.prototype=cA.prototype={constructor:uA,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?aA():+s)+(null==i?0:+i),this._next||Jx===this||(Jx?Jx._next=this:Zx=this,Jx=this),this._call=t,this._time=s,dA()},stop:function(){this._call&&(this._call=null,this._time=1/0,dA())}};var pA=Vx("start","end","interrupt"),yA=[];function wA(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return vA(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(vA((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=cA((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:pA,tween:yA,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function mA(t,i){var s=bA(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function gA(t,i){var s=bA(t,i);if(s.state>2)throw new Error("too late; already started");return s}function bA(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function MA(t,i){var s,n;return function(){var r=gA(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function kA(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=gA(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function xA(t,i,s){var n=t._id;return t.each((function(){var t=gA(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return bA(t,n).value[i]}}function AA(t,i){var s;return("number"==typeof i?rx:i instanceof Pk?tx:(s=Pk(i))?(i=s,tx):ox)(t,i)}function NA(t){return function(){this.removeAttribute(t)}}function WA(t){return function(){this.removeAttributeNS(t.space,t.local)}}function LA(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function SA(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function TA(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function EA(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function DA(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function $A(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function CA(t,i){return function(){mA(this,t).delay=+i.apply(this,arguments)}}function OA(t,i){return i=+i,function(){mA(this,t).delay=i}}function IA(t,i){return function(){gA(this,t).duration=+i.apply(this,arguments)}}function zA(t,i){return i=+i,function(){gA(this,t).duration=i}}function _A(t,i){if("function"!=typeof i)throw new Error;return function(){gA(this,t).ease=i}}function HA(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?mA:gA;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var PA=hk.prototype.constructor;function qA(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var RA=0;function XA(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function FA(){return++RA}var jA=hk.prototype;XA.prototype=function(t){return hk().transition(t)}.prototype={constructor:XA,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=eM(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,wA(l[f],i,s,f,l,bA(a,s)));return new XA(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=aM(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=bA(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&wA(f,i,s,p,d,v);e.push(d),h.push(o)}return new XA(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=oM(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new XA(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new XA(e,this._parents,this._name,this._id)},selection:function(){return new PA(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=FA(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=bA(h,i);wA(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new XA(n,this._parents,t,s)},call:jA.call,nodes:jA.nodes,node:jA.node,size:jA.size,empty:jA.empty,each:jA.each,on:function(t,i){var s=this._id;return arguments.length<2?bA(this.node(),s).on.on(t):this.each(HA(s,t,i))},attr:function(t,i){var s=tM(t),n="transform"===s?bx:AA;return this.attrTween(t,"function"==typeof i?(s.local?EA:TA)(s,n,xA(this,"attr."+t,i)):null==i?(s.local?WA:NA)(s):(s.local?SA:LA)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=tM(t);return this.tween(s,(n.local?DA:$A)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?gx:AA;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=AM(this,t),h=(this.style.removeProperty(t),AM(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=AM(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=AM(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,xA(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=AM(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,qA(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(xA(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=bA(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?MA:kA)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?CA:OA)(i,t)):bA(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?IA:zA)(i,t)):bA(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(_A(i,t)):bA(this.node(),i).ease}};var GA={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function VA(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return GA.time=aA(),GA;return s}hk.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},hk.prototype.transition=function(t){var i,s;t instanceof XA?(i=t._id,t=t._name):(i=FA(),(s=GA).time=aA(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&wA(h,t,i,u,a,s||VA(h,i));return new XA(n,this._parents,t,i)};const{getLicenses:YA,drawTooltip:KA,initTooltipStyle:BA}=r,UA=class{constructor(s){t(this,s),this.height=100,this.width=60,this.data=[{}],this.ordinalAccessor="label",this.valueAccessor="value",this.showHeader=!0,this.showLabel=!1,this.enableColor=!0,this.dataFormat="0,0.00",this.threshold=.1,this.colors=["#180F58","#B7C9E7","#B7B7B7","#E2AEBC","#D60036"],this.indicatorLabels=["High","Above","Avg.","Below","Poor"],this.defaultColor=["#180F58"],this.wrapLabel=!0,this.alignLabel="center",this.padding={top:.08*this.height,bottom:.25*this.height,right:.01*this.width,left:.01*this.width},this.indicatorWidth=this.height/4,this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}componentWillLoad(){this.innerHeight=this.height-this.padding.top-this.padding.bottom,this.innerWidth=this.width-this.padding.left-this.padding.right}componentWillUpdate(){this.drawChart()}componentDidLoad(){this.drawChart(),this.setTooltipInitialStyle()}drawChart(){this.reSetRoot(),this.y=function t(){var i=Tx(xx,xx);return i.copy=function(){return Sx(i,t())},pk.apply(i,arguments),jx(i)}().domain([-this.threshold,this.threshold]).range([this.innerHeight-this.indicatorWidth/6,0]),this.x=function t(){var i,s,n=kk().unknown(void 0),r=n.domain,e=n.range,h=[0,1],a=!1,o=0,u=0,c=.5;function l(){var t=r().length,n=h[1]<h[0],l=h[n-0],f=h[1-n];i=(f-l)/Math.max(1,t-o+2*u),a&&(i=Math.floor(i)),l+=(f-l-i*(t-o))*c,s=i*(1-o),a&&(l=Math.round(l),s=Math.round(s));var d=ck(t).map((function(t){return l+i*t}));return e(n?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(h=[+t[0],+t[1]],l()):h.slice()},n.rangeRound=function(t){return h=[+t[0],+t[1]],a=!0,l()},n.bandwidth=function(){return s},n.step=function(){return i},n.round=function(t){return arguments.length?(a=!!t,l()):a},n.padding=function(t){return arguments.length?(o=Math.min(1,u=+t),l()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),l()):o},n.paddingOuter=function(t){return arguments.length?(u=+t,l()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.copy=function(){return t(r(),h).round(a).paddingInner(o).paddingOuter(u).align(c)},pk.apply(l(),arguments)}().domain(this.data.map(t=>t[this.ordinalAccessor])).range([0,this.innerWidth]).padding(.2),this.showLabel&&this.drawLabel(),this.drawIndicator()}reSetRoot(){this.svg&&this.svg.remove(),this.svg=ak(this.indicatorChartEl).select("#visa-viz-d3-indicator-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.rootG=this.svg.append("g").attr("id","visa-viz-padding-container-g").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`).attr("class","indicator"),this.tooltipG=ak(this.indicatorChartEl).select(".indicator-tooltip")}drawLabel(){this.rootG.append("g").attr("class","indicator-label").attr("transform",`translate(0, ${this.innerHeight})`).selectAll("text").data(this.data).enter().append("text").attr("dy","1.5em").attr("dx",t=>this.x(t[this.ordinalAccessor])/2).text(t=>this.getLabel(t[this.valueAccessor]))}drawIndicator(){let t=this.rootG.append("g").attr("class","indicator-chart").selectAll("g").data(this.data).enter().append("g");[-2,-1,0,1,2].map(i=>{t.append("rect").attr("x",t=>this.x(t[this.ordinalAccessor])).attr("y",()=>this.y(this.threshold/2*i)-this.indicatorWidth/4).attr("height",this.indicatorWidth/2).attr("width",.8*this.indicatorWidth).attr("fill","#E6E6E6")}),t.append("rect").attr("x",t=>this.x(t[this.ordinalAccessor])-.1*this.indicatorWidth).attr("y",t=>this.y(this.getLevel(t[this.valueAccessor]))-this.indicatorWidth/4).attr("height",this.indicatorWidth/2).attr("width",this.indicatorWidth).attr("fill",t=>this.enableColor?this.getColor(t[this.valueAccessor]):this.defaultColor).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler())}getLevel(t){return t>=this.threshold?this.threshold:t>=this.threshold/2?this.threshold/2:t>-this.threshold/2?0:t>-this.threshold?-this.threshold/2:-this.threshold}getLabel(t){return t>=this.threshold?this.indicatorLabels[0]:t>=this.threshold/2?this.indicatorLabels[1]:t>-this.threshold/2?this.indicatorLabels[2]:t>-this.threshold?this.indicatorLabels[3]:this.indicatorLabels[4]}getColor(t){return t>=this.threshold?this.colors[0]:t>=this.threshold/2?this.colors[1]:t>-this.threshold/2?this.colors[2]:t>-this.threshold?this.colors[3]:this.colors[4]}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){this.hoverFunc.emit(t),this.eventsTooltip({data:t,evt:BM,isToShow:!0})}onMouseOutHandler(){this.mouseOutFunc.emit(),this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){BA(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){KA({root:this.tooltipG,data:t,event:i,isToShow:s,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})}render(){return s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s("div",{class:"visa-ui-text--body",style:{visibility:this.showHeader?"visible":"hidden",width:this.wrapLabel?`${1.5*this.indicatorWidth}`+"px":"auto",textAlign:this.alignLabel}},this.data[0][this.ordinalAccessor]),s("div",{class:"indicator-tooltip vcl-tooltip",style:{display:"block"}}),s("div",{id:"visa-viz-d3-indicator-container"})))}get indicatorChartEl(){return n(this)}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}.indicator .indicator-grid line{stroke:#767676;stroke-opacity:1}.indicator .indicator-grid path{stroke-width:0;stroke:#767676}.indicator .indicator-grid text{fill:#767676}.indicator .indicator-label{font-size:0.8em;fill:#767676;text-anchor:start}.indicator .indicator-chart{stroke:#767676}.indicator .indicator-chart rect{stroke:none}"}};window.VisaChartsLibOSSLicenses=YA();var ZA="http://www.w3.org/1999/xhtml";const JA={svg:"http://www.w3.org/2000/svg",xhtml:ZA,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function QA(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),JA.hasOwnProperty(i)?{space:JA[i],local:t}:t}function tN(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===ZA&&i.documentElement.namespaceURI===ZA?i.createElement(t):i.createElementNS(s,t)}}function iN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function sN(t){var i=QA(t);return(i.local?iN:tN)(i)}function nN(){}function rN(t){return null==t?nN:function(){return this.querySelector(t)}}function eN(){return[]}function hN(t){return null==t?eN:function(){return this.querySelectorAll(t)}}function aN(t){return function(){return this.matches(t)}}function oN(t){return new Array(t.length)}function uN(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function cN(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new uN(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function lN(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new uN(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function fN(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function dN(t){return function(){this.removeAttribute(t)}}function vN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pN(t,i){return function(){this.setAttribute(t,i)}}function yN(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function wN(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function mN(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function gN(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function bN(t){return function(){this.style.removeProperty(t)}}function MN(t,i,s){return function(){this.style.setProperty(t,i,s)}}function kN(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function xN(t,i){return t.style.getPropertyValue(i)||gN(t).getComputedStyle(t,null).getPropertyValue(i)}function AN(t){return function(){delete this[t]}}function NN(t,i){return function(){this[t]=i}}function WN(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function LN(t){return t.trim().split(/^|\s+/)}function SN(t){return t.classList||new TN(t)}function TN(t){this._node=t,this._names=LN(t.getAttribute("class")||"")}function EN(t,i){for(var s=SN(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function DN(t,i){for(var s=SN(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function $N(t){return function(){EN(this,t)}}function CN(t){return function(){DN(this,t)}}function ON(t,i){return function(){(i.apply(this,arguments)?EN:DN)(this,t)}}function IN(){this.textContent=""}function zN(t){return function(){this.textContent=t}}function _N(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function HN(){this.innerHTML=""}function PN(t){return function(){this.innerHTML=t}}function qN(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function RN(){this.nextSibling&&this.parentNode.appendChild(this)}function XN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function FN(){return null}function jN(){var t=this.parentNode;t&&t.removeChild(this)}function GN(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function VN(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}uN.prototype={constructor:uN,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},TN.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var YN={},KN=null;function BN(t,i,s){return t=UN(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function UN(t,i,s){return function(n){var r=KN;KN=n;try{t.call(this,this.__data__,i,s)}finally{KN=r}}}function ZN(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function JN(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function QN(t,i,s){var n=YN.hasOwnProperty(t.type)?BN:UN;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function tW(t,i,s){var n=gN(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function iW(t,i){return function(){return tW(this,t,i)}}function sW(t,i){return function(){return tW(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(YN={mouseenter:"mouseover",mouseleave:"mouseout"}));var nW=[null];function rW(t,i){this._groups=t,this._parents=i}function eW(){return new rW([[document.documentElement]],nW)}function hW(t){return"string"==typeof t?new rW([[document.querySelector(t)]],[document.documentElement]):new rW([[t]],nW)}function aW(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}rW.prototype=eW.prototype={constructor:rW,select:function(t){"function"!=typeof t&&(t=rN(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new rW(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=hN(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new rW(n,r)},filter:function(t){"function"!=typeof t&&(t=aN(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new rW(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?lN:cN,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,m,g=0,b=0;g<v;++g)if(w=p[g]){for(g>=b&&(b=g+1);!(m=y[b])&&++b<v;);w._next=m||null}}return(h=new rW(h,n))._enter=a,h._exit=o,h},enter:function(){return new rW(this._enter||this._groups.map(oN),this._parents)},exit:function(){return new rW(this._exit||this._groups.map(oN),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new rW(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=fN);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new rW(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=QA(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?vN:dN:"function"==typeof i?s.local?mN:wN:s.local?yN:pN)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?bN:"function"==typeof i?kN:MN)(t,i,null==s?"":s)):xN(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?AN:"function"==typeof i?WN:NN)(t,i)):this.node()[t]},classed:function(t,i){var s=LN(t+"");if(arguments.length<2){for(var n=SN(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?ON:i?$N:CN)(s,i))},text:function(t){return arguments.length?this.each(null==t?IN:("function"==typeof t?_N:zN)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?HN:("function"==typeof t?qN:PN)(t)):this.node().innerHTML},raise:function(){return this.each(RN)},lower:function(){return this.each(XN)},append:function(t){var i="function"==typeof t?t:sN(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:sN(t),n=null==i?FN:"function"==typeof i?i:rN(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(jN)},clone:function(t){return this.select(t?VN:GN)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=ZN(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?QN:JN,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?sW:iW)(t,i))}};var oW=function(t){return 1===t.length&&(t=function(t){return function(i,s){return aW(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}(aW).right;function uW(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var cW=Math.sqrt(50),lW=Math.sqrt(10),fW=Math.sqrt(2);function dW(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=cW?10:e>=lW?5:e>=fW?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=cW?10:e>=lW?5:e>=fW?2:1)}var vW=new Date,pW=new Date;function yW(t,i,s,n){function r(i){return t(i=0===arguments.length?new Date:new Date(+i)),i}return r.floor=function(i){return t(i=new Date(+i)),i},r.ceil=function(s){return t(s=new Date(s-1)),i(s,1),t(s),s},r.round=function(t){var i=r(t),s=r.ceil(t);return t-i<s-t?i:s},r.offset=function(t,s){return i(t=new Date(+t),null==s?1:Math.floor(s)),t},r.range=function(s,n,e){var h,a=[];if(s=r.ceil(s),e=null==e?1:Math.floor(e),!(s<n&&e>0))return a;do{a.push(h=new Date(+s)),i(s,e),t(s)}while(h<s&&s<n);return a},r.filter=function(s){return yW((function(i){if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;i(t,-1),!s(t););else for(;--n>=0;)for(;i(t,1),!s(t););}))},s&&(r.count=function(i,n){return vW.setTime(+i),pW.setTime(+n),t(vW),t(pW),Math.floor(s(vW,pW))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(n?function(i){return n(i)%t==0}:function(i){return r.count(0,i)%t==0}):r:null}),r}var wW=yW((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,i){t.setTime(+t+36e5*i)}),(function(t,i){return(i-t)/36e5}),(function(t){return t.getHours()})),mW=yW((function(t){t.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}));function gW(t){return yW((function(i){i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+7*i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var bW=gW(0),MW=(gW(1),gW(2),gW(3),gW(4),gW(5),gW(6),yW((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,i){t.setMonth(t.getMonth()+i)}),(function(t,i){return i.getMonth()-t.getMonth()+12*(i.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),kW=yW((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,i){t.setFullYear(t.getFullYear()+i)}),(function(t,i){return i.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));function xW(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function AW(){}function NW(t,i){var s=new AW;if(t instanceof AW)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}function WW(){var t,i,s,n=[],r=[];function e(s,r,h,a){if(r>=n.length)return null!=t&&s.sort(t),null!=i?i(s):s;for(var o,u,c,l=-1,f=s.length,d=n[r++],v=NW(),p=h();++l<f;)(c=v.get(o=d(u=s[l])+""))?c.push(u):v.set(o,[u]);return v.each((function(t,i){a(p,i,e(t,r,h,a))})),p}return s={object:function(t){return e(t,0,LW,SW)},map:function(t){return e(t,0,TW,EW)},entries:function(t){return function t(s,e){if(++e>n.length)return s;var h,a=r[e-1];return null!=i&&e>=n.length?h=s.entries():(h=[],s.each((function(i,s){h.push({key:s,values:t(i,e)})}))),null!=a?h.sort((function(t,i){return a(t.key,i.key)})):h}(e(t,0,TW,EW),0)},key:function(t){return n.push(t),s},sortKeys:function(t){return r[n.length-1]=t,s},sortValues:function(i){return t=i,s},rollup:function(t){return i=t,s}}}function LW(){return{}}function SW(t,i,s){t[i]=s}function TW(){return NW()}function EW(t,i,s){t.set(i,s)}kW.every=function(t){return isFinite(t=Math.floor(t))&&t>0?yW((function(i){i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)}),(function(i,s){i.setFullYear(i.getFullYear()+s*t)})):null},AW.prototype=NW.prototype={constructor:AW,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var DW=Array.prototype,$W=DW.map,CW=DW.slice,OW={name:"implicit"};function IW(){var t=NW(),i=[],s=[],n=OW;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==OW)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=NW();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=CW.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return IW(i,s).unknown(n)},xW.apply(r,arguments),r}function zW(){var t,i,s=IW().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=uW(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return zW(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},xW.apply(c(),arguments)}function _W(t){var i=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return _W(i())},t}function HW(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function PW(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function qW(){}var RW="\\s*([+-]?\\d+)\\s*",XW="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",FW="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jW=/^#([0-9a-f]{3,8})$/,GW=new RegExp("^rgb\\("+[RW,RW,RW]+"\\)$"),VW=new RegExp("^rgb\\("+[FW,FW,FW]+"\\)$"),YW=new RegExp("^rgba\\("+[RW,RW,RW,XW]+"\\)$"),KW=new RegExp("^rgba\\("+[FW,FW,FW,XW]+"\\)$"),BW=new RegExp("^hsl\\("+[XW,FW,FW]+"\\)$"),UW=new RegExp("^hsla\\("+[XW,FW,FW,XW]+"\\)$"),ZW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function JW(){return this.rgb().formatHex()}function QW(){return this.rgb().formatRgb()}function tL(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=jW.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?iL(i):3===s?new eL(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?sL(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?sL(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=GW.exec(t))?new eL(i[1],i[2],i[3],1):(i=VW.exec(t))?new eL(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=YW.exec(t))?sL(i[1],i[2],i[3],i[4]):(i=KW.exec(t))?sL(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=BW.exec(t))?uL(i[1],i[2]/100,i[3]/100,1):(i=UW.exec(t))?uL(i[1],i[2]/100,i[3]/100,i[4]):ZW.hasOwnProperty(t)?iL(ZW[t]):"transparent"===t?new eL(NaN,NaN,NaN,0):null}function iL(t){return new eL(t>>16&255,t>>8&255,255&t,1)}function sL(t,i,s,n){return n<=0&&(t=i=s=NaN),new eL(t,i,s,n)}function nL(t){return t instanceof qW||(t=tL(t)),t?new eL((t=t.rgb()).r,t.g,t.b,t.opacity):new eL}function rL(t,i,s,n){return 1===arguments.length?nL(t):new eL(t,i,s,null==n?1:n)}function eL(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function hL(){return"#"+oL(this.r)+oL(this.g)+oL(this.b)}function aL(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function oL(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function uL(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new lL(t,i,s,n)}function cL(t){if(t instanceof lL)return new lL(t.h,t.s,t.l,t.opacity);if(t instanceof qW||(t=tL(t)),!t)return new lL;if(t instanceof lL)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new lL(h,a,o,t.opacity)}function lL(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function fL(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function dL(t){return function(){return t}}function vL(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):dL(isNaN(t)?i:t)}HW(qW,tL,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:JW,formatHex:JW,formatHsl:function(){return cL(this).formatHsl()},formatRgb:QW,toString:QW}),HW(eL,rL,PW(qW,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new eL(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new eL(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hL,formatHex:hL,formatRgb:aL,toString:aL})),HW(lL,(function(t,i,s,n){return 1===arguments.length?cL(t):new lL(t,i,s,null==n?1:n)}),PW(qW,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new lL(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new lL(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new eL(fL(t>=240?t-240:t+120,r,n),fL(t,r,n),fL(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const pL=function t(i){var s=function(t){return 1==(t=+t)?vL:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):dL(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=rL(t)).r,(i=rL(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=vL(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function yL(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function wL(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=AL(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function mL(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function gL(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function bL(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=AL(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var ML=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kL=new RegExp(ML.source,"g");function xL(t,i){var s,n,r,e=ML.lastIndex=kL.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=ML.exec(t))&&(n=kL.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:gL(s,n)})),e=kL.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function AL(t,i){var s,n=typeof i;return null==i||"boolean"===n?dL(i):("number"===n?gL:"string"===n?(s=tL(i))?(i=s,pL):xL:i instanceof tL?pL:i instanceof Date?mL:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?yL:Array.isArray(i)?wL:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?bL:gL)(t,i)}function NL(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var WL,LL,SL,TL,EL=180/Math.PI,DL={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $L(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*EL,skewX:Math.atan(o)*EL,scaleX:h,scaleY:a}}function CL(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:gL(t,r)},{i:o-2,x:gL(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:gL(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:gL(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:gL(t,s)},{i:a-2,x:gL(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var OL=CL((function(t){return"none"===t?DL:(WL||(WL=document.createElement("DIV"),LL=document.documentElement,SL=document.defaultView),WL.style.transform=t,t=SL.getComputedStyle(LL.appendChild(WL),null).getPropertyValue("transform"),LL.removeChild(WL),$L(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),IL=CL((function(t){return null==t?DL:(TL||(TL=document.createElementNS("http://www.w3.org/2000/svg","g")),TL.setAttribute("transform",t),(t=TL.transform.baseVal.consolidate())?$L((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):DL)}),", ",")",")");function zL(t){return+t}var _L=[0,1];function HL(t){return t}function PL(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function qL(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function RL(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=PL(r,n),e=s(h,e)):(n=PL(n,r),e=s(e,h)),function(t){return e(n(t))}}function XL(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=PL(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=oW(t,i,1,n)-1;return e[s](r[s](i))}}function FL(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function jL(t,i){return function(){var t,i,s,n,r,e,h=_L,a=_L,o=AL,u=HL;function c(){return n=Math.min(h.length,a.length)>2?XL:RL,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),gL)))(s)))},l.domain=function(t){return arguments.length?(h=$W.call(t,zL),u===HL||(u=qL(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=CW.call(t),c()):a.slice()},l.rangeRound=function(t){return a=CW.call(t),o=NL,c()},l.clamp=function(t){return arguments.length?(u=t?qL(h):HL,l):u!==HL},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function GL(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function VL(t){return(t=GL(Math.abs(t)))?t[1]:NaN}var YL,KL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function BL(t){if(!(i=KL.exec(t)))throw new Error("invalid format: "+t);var i;return new UL({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function UL(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function ZL(t,i){var s=GL(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}BL.prototype=UL.prototype,UL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const JL={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return ZL(100*t,i)},r:ZL,s:function(t,i){var s=GL(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(YL=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+GL(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function QL(t){return t}var tS,iS,sS,nS=Array.prototype.map,rS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function eS(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=dW(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=function(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=cW?r*=10:e>=lW?r*=5:e>=fW&&(r*=2),i<t?-r:r}(t,i,s);switch((n=BL(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(VL(i)/3)))-VL(Math.abs(t)))}(e,h))||(n.precision=r),sS(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,VL(i)-VL(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-VL(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return iS(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=dW(a,o,s))>0?n=dW(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=dW(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function hS(){var t=jL(HL,HL);return t.copy=function(){return FL(t,hS())},xW.apply(t,arguments),eS(t)}tS=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?QL:(i=nS.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?QL:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(nS.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=BL(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,m=t.type;"n"===m?(p=!0,m="g"):JL[m]||(void 0===y&&(y=12),w=!0,m="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var g="$"===f?r:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?e:/[%p]/.test(m)?o:"",M=JL[m],k=/[defgprs%]/.test(m);function x(t){var r,e,o,f=g,x=b;if("c"===m)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===m?rS[8+YL/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var N=f.length+t.length+x.length,W=N<v?new Array(v-N+1).join(i):"";switch(p&&d&&(t=n(W+t,W.length?v-x.length:1/0),W=""),s){case"<":t=f+t+x+W;break;case"=":t=f+W+t+x;break;case"^":t=W.slice(0,N=W.length>>1)+f+t+x+W.slice(N);break;default:t=W+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=BL(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(VL(i)/3))),r=Math.pow(10,-n),e=rS[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),iS=tS.format,sS=tS.formatPrefix;var aS=Math.PI,oS=2*aS,uS=oS-1e-6;function cS(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function lS(){return new cS}function fS(t){return function(){return t}}function dS(t){this._context=t}function vS(t){return new dS(t)}function pS(t){return t[0]}function yS(t){return t[1]}function wS(){var t=pS,i=yS,s=fS(!0),n=null,r=vS,e=null;function h(h){var a,o,u,c=h.length,l=!1;for(null==n&&(e=r(u=lS())),a=0;a<=c;++a)!(a<c&&s(o=h[a],a,h))===l&&((l=!l)?e.lineStart():e.lineEnd()),l&&e.point(+t(o,a,h),+i(o,a,h));if(u)return e=null,u+""||null}return h.x=function(i){return arguments.length?(t="function"==typeof i?i:fS(+i),h):t},h.y=function(t){return arguments.length?(i="function"==typeof t?t:fS(+t),h):i},h.defined=function(t){return arguments.length?(s="function"==typeof t?t:fS(!!t),h):s},h.curve=function(t){return arguments.length?(r=t,null!=n&&(e=r(n)),h):r},h.context=function(t){return arguments.length?(null==t?n=e=null:e=r(n=t),h):n},h}cS.prototype=lS.prototype={constructor:cS,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,s,n){this._+="Q"+ +t+","+ +i+","+(this._x1=+s)+","+(this._y1=+n)},bezierCurveTo:function(t,i,s,n,r,e){this._+="C"+ +t+","+ +i+","+ +s+","+ +n+","+(this._x1=+r)+","+(this._y1=+e)},arcTo:function(t,i,s,n,r){var e=this._x1,h=this._y1,a=(s=+s)-(t=+t),o=(n=+n)-(i=+i),u=e-t,c=h-i,l=u*u+c*c;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(l>1e-6)if(Math.abs(c*a-o*u)>1e-6&&r){var f=s-e,d=n-h,v=a*a+o*o,p=f*f+d*d,y=Math.sqrt(v),w=Math.sqrt(l),m=r*Math.tan((aS-Math.acos((v+l-p)/(2*y*w)))/2),g=m/w,b=m/y;Math.abs(g-1)>1e-6&&(this._+="L"+(t+g*u)+","+(i+g*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>u*d)+","+(this._x1=t+b*a)+","+(this._y1=i+b*o)}else this._+="L"+(this._x1=t)+","+(this._y1=i)},arc:function(t,i,s,n,r,e){t=+t,i=+i,e=!!e;var h=(s=+s)*Math.cos(n),a=s*Math.sin(n),o=t+h,u=i+a,c=1^e,l=e?n-r:r-n;if(s<0)throw new Error("negative radius: "+s);null===this._x1?this._+="M"+o+","+u:(Math.abs(this._x1-o)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+o+","+u),s&&(l<0&&(l=l%oS+oS),l>uS?this._+="A"+s+","+s+",0,1,"+c+","+(t-h)+","+(i-a)+"A"+s+","+s+",0,1,"+c+","+(this._x1=o)+","+(this._y1=u):l>1e-6&&(this._+="A"+s+","+s+",0,"+ +(l>=aS)+","+c+","+(this._x1=t+s*Math.cos(r))+","+(this._y1=i+s*Math.sin(r))))},rect:function(t,i,s,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +s+"v"+ +n+"h"+-s+"Z"},toString:function(){return this._}},dS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}};const{propDefaultValues:mS}=r;class gS{}function bS(t){return 1-Math.sqrt(1-t*t)}gS.mainTitle="Parallel Plot Title",gS.subTitle="This is the parallel plot's subtitle",gS.height=300,gS.width=500,gS.margin={top:3,bottom:3,right:5,left:5},gS.padding={top:20,bottom:50,right:100,left:75},gS.ordinalAccessor="label",gS.valueAccessor="value",gS.seriesAccessor="series",gS.accessibility=mS.accessibility,gS.animationConfig=mS.animationConfig,gS.highestHeadingLevel=mS.highestHeadingLevel,gS.xAxis=mS.xAxis,gS.yAxis=mS.yAxis,gS.showBaselineX=mS.showBaselineFalse,gS.wrapLabel=mS.wrapLabel,gS.colorPalette=mS.colorPaletteCategorical,gS.hoverStyle=mS.hoverStyle,gS.clickStyle=mS.clickStyle,gS.referenceStyle=mS.referenceStyle,gS.strokeWidth=mS.strokeWidth1,gS.showDots=mS.showDots,gS.dotRadius=mS.dotRadius4,gS.hoverOpacity=mS.hoverOpacity,gS.cursor=mS.cursor,gS.dataLabel=mS.dataLabelBottomRight,gS.seriesLabel=mS.seriesLabel,gS.legend=mS.hiddenLegend,gS.tooltipLabel=mS.tooltipLabel,gS.secondaryLines=mS.secondaryLines,gS.showTooltip=mS.showTooltip,gS.suppressEvents=mS.suppressEvents,gS.referenceLines=mS.referenceLines,gS.annotations=mS.annotations,gS.clickHighlight=mS.clickHighlight;var MS={value:function(){}};function kS(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new xS(n)}function xS(t){this._=t}function AS(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function NS(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function WS(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=MS,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}xS.prototype=kS.prototype={constructor:xS,on:function(t,i){var s,n=this._,r=AS(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=WS(n[s],t.name,i);else if(null==i)for(s in n)n[s]=WS(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=NS(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new xS(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var LS,SS,TS=0,ES=0,DS=0,$S=0,CS=0,OS=0,IS="object"==typeof performance&&performance.now?performance:Date,zS="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function _S(){return CS||(zS(HS),CS=IS.now()+OS)}function HS(){CS=0}function PS(){this._call=this._time=this._next=null}function qS(t,i,s){var n=new PS;return n.restart(t,i,s),n}function RS(){CS=($S=IS.now())+OS,TS=ES=0;try{!function(){_S(),++TS;for(var t,i=LS;i;)(t=CS-i._time)>=0&&i._call.call(null,t),i=i._next;--TS}()}finally{TS=0,function(){for(var t,i,s=LS,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:LS=i);SS=t,FS(n)}(),CS=0}}function XS(){var t=IS.now(),i=t-$S;i>1e3&&(OS-=i,$S=t)}function FS(t){TS||(ES&&(ES=clearTimeout(ES)),t-CS>24?(t<1/0&&(ES=setTimeout(RS,t-IS.now()-OS)),DS&&(DS=clearInterval(DS))):(DS||($S=IS.now(),DS=setInterval(XS,1e3)),TS=1,zS(RS)))}function jS(t,i,s){var n=new PS;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}PS.prototype=qS.prototype={constructor:PS,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?_S():+s)+(null==i?0:+i),this._next||SS===this||(SS?SS._next=this:LS=this,SS=this),this._call=t,this._time=s,FS()},stop:function(){this._call&&(this._call=null,this._time=1/0,FS())}};var GS=kS("start","end","interrupt"),VS=[];function YS(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return jS(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(jS((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=qS((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:GS,tween:VS,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function KS(t,i){var s=US(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function BS(t,i){var s=US(t,i);if(s.state>2)throw new Error("too late; already started");return s}function US(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function ZS(t,i){var s,n;return function(){var r=BS(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function JS(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=BS(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function QS(t,i,s){var n=t._id;return t.each((function(){var t=BS(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return US(t,n).value[i]}}function tT(t,i){var s;return("number"==typeof i?gL:i instanceof tL?pL:(s=tL(i))?(i=s,pL):xL)(t,i)}function iT(t){return function(){this.removeAttribute(t)}}function sT(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nT(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function rT(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function eT(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function hT(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function aT(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function oT(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function uT(t,i){return function(){KS(this,t).delay=+i.apply(this,arguments)}}function cT(t,i){return i=+i,function(){KS(this,t).delay=i}}function lT(t,i){return function(){BS(this,t).duration=+i.apply(this,arguments)}}function fT(t,i){return i=+i,function(){BS(this,t).duration=i}}function dT(t,i){if("function"!=typeof i)throw new Error;return function(){BS(this,t).ease=i}}function vT(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?KS:BS;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var pT=eW.prototype.constructor;function yT(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var wT=0;function mT(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function gT(){return++wT}var bT=eW.prototype;mT.prototype=function(t){return eW().transition(t)}.prototype={constructor:mT,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=rN(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,YS(l[f],i,s,f,l,US(a,s)));return new mT(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=hN(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=US(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&YS(f,i,s,p,d,v);e.push(d),h.push(o)}return new mT(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=aN(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new mT(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new mT(e,this._parents,this._name,this._id)},selection:function(){return new pT(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=gT(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=US(h,i);YS(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new mT(n,this._parents,t,s)},call:bT.call,nodes:bT.nodes,node:bT.node,size:bT.size,empty:bT.empty,each:bT.each,on:function(t,i){var s=this._id;return arguments.length<2?US(this.node(),s).on.on(t):this.each(vT(s,t,i))},attr:function(t,i){var s=QA(t),n="transform"===s?IL:tT;return this.attrTween(t,"function"==typeof i?(s.local?hT:eT)(s,n,QS(this,"attr."+t,i)):null==i?(s.local?sT:iT)(s):(s.local?rT:nT)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=QA(t);return this.tween(s,(n.local?aT:oT)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?OL:tT;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=xN(this,t),h=(this.style.removeProperty(t),xN(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=xN(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=xN(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,QS(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=xN(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,yT(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(QS(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=US(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?ZS:JS)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?uT:cT)(i,t)):US(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?lT:fT)(i,t)):US(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(dT(i,t)):US(this.node(),i).ease}};var MT={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function kT(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return MT.time=_S(),MT;return s}eW.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},eW.prototype.transition=function(t){var i,s;t instanceof mT?(i=t._id,t=t._name):(i=gT(),(s=MT).time=_S(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&YS(h,t,i,u,a,s||kT(h,i));return new mT(n,this._parents,t,i)};var xT="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),AT=new Uint8Array(16);function NT(){if(!xT)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return xT(AT)}for(var WT=[],LT=0;LT<256;++LT)WT[LT]=(LT+256).toString(16).substr(1);function ST(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||NT)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[WT[t[i++]],WT[t[i++]],WT[t[i++]],WT[t[i++]],"-",WT[t[i++]],WT[t[i++]],"-",WT[t[i++]],WT[t[i++]],"-",WT[t[i++]],WT[t[i++]],"-",WT[t[i++]],WT[t[i++]],WT[t[i++]],WT[t[i++]],WT[t[i++]],WT[t[i++]]].join("")}(r)}const{getAccessibleStrokes:TT,ensureTextContrast:ET,createTextStrokeFilter:DT,findTagLevel:$T,prepareRenderChange:CT,initializeDescriptionRoot:OT,initializeElementAccess:IT,setElementFocusHandler:zT,setElementAccessID:_T,setAccessibilityController:HT,hideNonessentialGroups:PT,setAccessTitle:qT,setAccessSubtitle:RT,setAccessLongDescription:XT,setAccessExecutiveSummary:FT,setAccessPurpose:jT,setAccessContext:GT,setAccessStatistics:VT,setAccessChartCounts:YT,setAccessXAxis:KT,setAccessYAxis:BT,setAccessStructure:UT,setAccessAnnotation:ZT,retainAccessFocus:JT,checkAccessFocus:QT,setElementInteractionAccessState:tE,setAccessibilityDescriptionWidth:iE,annotate:sE,chartAccessors:nE,checkInteraction:rE,checkClicked:eE,checkHovered:hE,convertVisaColor:aE,drawAxis:oE,drawGrid:uE,drawLegend:cE,setLegendInteractionState:lE,drawTooltip:fE,formatDataLabel:dE,getColors:vE,getLicenses:pE,getPadding:yE,getScopedData:wE,initTooltipStyle:mE,overrideTitleTooltip:gE,placeDataLabels:bE,resolveLines:ME,scopeDataKeys:kE,transitionEndAll:xE,visaColors:AE,validateAccessibilityProps:NE,roundTo:WE,getTextWidth:LE,resolveLabelCollision:SE}=r,TE=class{constructor(s){t(this,s),this.mainTitle=gS.mainTitle,this.subTitle=gS.subTitle,this.height=gS.height,this.width=gS.width,this.highestHeadingLevel=gS.highestHeadingLevel,this.margin=gS.margin,this.padding=gS.padding,this.ordinalAccessor=gS.ordinalAccessor,this.valueAccessor=gS.valueAccessor,this.seriesAccessor=gS.seriesAccessor,this.xAxis=gS.xAxis,this.yAxis=gS.yAxis,this.wrapLabel=gS.wrapLabel,this.showBaselineX=gS.showBaselineX,this.colorPalette=gS.colorPalette,this.hoverStyle=gS.hoverStyle,this.clickStyle=gS.clickStyle,this.referenceStyle=gS.referenceStyle,this.cursor=gS.cursor,this.hoverOpacity=gS.hoverOpacity,this.animationConfig=gS.animationConfig,this.strokeWidth=gS.strokeWidth,this.showDots=gS.showDots,this.dotRadius=gS.dotRadius,this.dataLabel=gS.dataLabel,this.showTooltip=gS.showTooltip,this.tooltipLabel=gS.tooltipLabel,this.accessibility=gS.accessibility,this.legend=gS.legend,this.annotations=gS.annotations,this.seriesLabel=gS.seriesLabel,this.referenceLines=gS.referenceLines,this.secondaryLines=gS.secondaryLines,this.suppressEvents=gS.suppressEvents,this.clickHighlight=gS.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.updated=!0,this.enterSize=0,this.exitSize=0,this.time={timehour:wW,timeday:mW,timeweek:bW,timemonth:MW,timeyear:kW},this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYGrid=!1,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateScales=!1,this.shouldUpdateTableData=!1,this.shouldUpdateLabels=!1,this.shouldUpdateAnnotations=!1,this.shouldDrawInteractionState=!1,this.shouldSetSelectionClass=!1,this.shouldUpdateCursor=!1,this.shouldSetColors=!1,this.shouldUpdateLines=!1,this.shouldUpdatePoints=!1,this.shouldUpdateLegend=!1,this.shouldUpdateReferenceLines=!1,this.shouldBindInteractivity=!1,this.shouldUpdateLegendInteractivity=!1,this.shouldResetRoot=!1,this.shouldUpdateBaseline=!1,this.shouldValidateInteractionKeys=!1,this.shouldEnterUpdateExit=!1,this.shouldSetGlobalSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldSetLabelOpacity=!1,this.shouldSetSeriesLabelOpacity=!1,this.shouldSetLegendCursor=!1,this.shouldAddStrokeUnder=!1,this.shouldValidateSeriesLabels=!1,this.shouldUpdateSeriesLabels=!1,this.shouldUpdateColors=!1,this.shouldUpdateStrokeWidth=!1,this.shouldUpdateInterpolationData=!1,this.shouldSetScaleUsed=!1,this.shouldUpdateDotRadius=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldUpdateDashPatterns=!1,this.shouldValidateDataLabelAccessor=!1,this.topLevel="h2",this.bottomLevel="p",this.strokes={},this.b=",",this.short="2,2",this.med="4,2",this.long="8,2",this.dashPatterns=["",this.long,this.long+this.b+this.med,this.short+this.b+this.long+this.b+this.long,this.short+this.b+this.short+this.b+this.long],this.hiddenHash={},this.collisionSettings={all:{validPositions:["top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:[3,2,4,4,1,1,1,1]},top:{validPositions:["top","top-left","top-right"],offsets:[3,1,1]},middle:{validPositions:["left","right"],offsets:[4,4]},bottom:{validPositions:["bottom","bottom-left","bottom-right"],offsets:[2,1,1]},right:{validPositions:["right","top-right","bottom-right"],offsets:[4,1,1]},left:{validPositions:["left","top-left","bottom-left"],offsets:[4,1,1]}},this.dynamicY=t=>"individual"===this.yAxis.scales?this.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.y(t[this.valueAccessor]),this.interpolateDynamicY=t=>"individual"===this.yAxis.scales?this.interpolating.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.interpolating.y(t[this.valueAccessor]),this.handleDotStroke=(t,i,s)=>{if(!this.accessibility.hideStrokes){const n=this.clickHighlight&&this.clickHighlight.length>0&&eE(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&hE(t,this.hoverHighlight,this.innerInteractionKeys),e=hW(s[i].parentNode).attr("fill"),h=n&&this.clickStyle.color?AE[this.clickStyle.color]||this.clickStyle.color:n?e:r&&this.hoverStyle.color?AE[this.hoverStyle.color]||this.hoverStyle.color:e;return hW(s[i]).attr("stroke-width",this.calculateStrokeWidth(t)),hW(s[i]).attr("fill",h),this.strokes[h.toLowerCase()]}return null},this.handleLineStroke=(t,i)=>{const s=this.colorArr[i]||this.colorArr[0],n=t.values[0],r=eE(n,this.clickHighlight,this.innerInteractionKeys),e=hE(n,this.hoverHighlight,this.innerInteractionKeys);return this.seriesInteraction?r&&this.clickStyle.color?this.strokes[(AE[this.clickStyle.color]||this.clickStyle.color).toLowerCase()]:r?s:e&&this.hoverStyle.color?this.strokes[(AE[this.hoverStyle.color]||this.hoverStyle.color).toLowerCase()]:s:s},this.handleSeriesTextFill=(t,i)=>{const s=this.rawColors[i]||this.rawColors[0],n=t.values[0],r=eE(n,this.clickHighlight,this.innerInteractionKeys),e=hE(n,this.hoverHighlight,this.innerInteractionKeys);return this.textColors[(this.seriesInteraction?r&&this.clickStyle.color?AE[this.clickStyle.color]||this.clickStyle.color:r?s:e&&this.hoverStyle.color?AE[this.hoverStyle.color]||this.hoverStyle.color:s:s).toLowerCase()]},this.handleTextFill=(t,i,s)=>{const n=this.clickHighlight&&this.clickHighlight.length>0&&eE(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&hE(t,this.hoverHighlight,this.innerInteractionKeys),e=hW(s[i].parentNode).attr("fill");return this.textColors[(n&&this.clickStyle.color?AE[this.clickStyle.color]||this.clickStyle.color:n?e:r&&this.hoverStyle.color?AE[this.hoverStyle.color]||this.hoverStyle.color:e).toLowerCase()]},this.calculateStrokeWidth=(t,i)=>{const s=i?t.values[0]:t;return!i||this.seriesInteraction?eE(s,this.clickHighlight,this.innerInteractionKeys)?this.clickStyle.strokeWidth||this.strokeWidth:hE(s,this.hoverHighlight,this.innerInteractionKeys)?this.hoverStyle.strokeWidth||this.strokeWidth:this.secondaryLines.keys.includes(s[this.seriesAccessor])?1:this.strokeWidth:this.secondaryLines.keys.includes(s[this.seriesAccessor])?1:this.strokeWidth},this.handleStrokeDasharray=(t,i)=>this.secondaryLines.keys.includes(t.key)?this.short:this.accessibility.hideTextures?"":this.dashPatterns[i],this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateDotRadius=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldValidate=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0}idWatcher(t,i){this.chartID=t,this.parallelChartEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldUpdateLegend=!0,this.shouldAddStrokeUnder=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldResetRoot=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}seriesAccessorWatcher(t,i){this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldValidate=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateTableData=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldUpdateLabels=!0,this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0}ordinalAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldUpdateTableData=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateStrokeWidth=!0}valueAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldSetGlobalSelections=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGlobalSelections=!0}xAxisWatcher(t,i){this.shouldUpdateXAxis=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0),this.shouldSetXAxisAccessibility=!0}yAxisWatcher(t,i){(!(!t||!t.scales)&&t.scales)!==(!(!i||!i.scales)&&i.scales)&&(this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0),this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0)}wrapLabelWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}showBaselineXWatcher(t,i){this.shouldUpdateBaseline=!0}paletteWatcher(t,i){this.shouldSetColors=!0,this.shouldUpdateColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldUpdateColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldSetColors=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldSetColors=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0}strokeWidthWatcher(t,i){this.shouldUpdateStrokeWidth=!0}showDotsWatcher(t,i){this.shouldDrawInteractionState=!0}dotRadiusWatcher(t,i){this.shouldUpdateDotRadius=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0}dataLabelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0;const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement,r=!(!t||!t.labelAccessor)&&t.labelAccessor,e=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),s!==n&&(this.shouldUpdateSeriesLabels=!0),r!==e&&(this.shouldValidateDataLabelAccessor=!0)}seriesLabelWatcher(t,i){this.shouldUpdateSeriesLabels=!0,this.shouldUpdateTableData=!0,this.shouldValidateSeriesLabels=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetSeriesLabelOpacity=!0)}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}showTooltipWatcher(t,i){}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateStrokeWidth=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.hideTextures)&&t.hideTextures)!==(!(!i||!i.hideTextures)&&i.hideTextures)&&(this.shouldUpdateDashPatterns=!0,this.shouldUpdateLegend=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0}valueOverrideWatcher(t,i){this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}secondaryLinesWatcher(t,i){const s=t&&t.showDataLabel,n=i&&i.showDataLabel,r=t&&t.showSeriesLabel,e=i&&i.showSeriesLabel,h=t&&t.opacity?t.opacity:0,a=i&&i.opacity?i.opacity:0;(!(!t||!t.keys)&&t.keys)!==(!(!i||!i.keys)&&i.keys)&&(this.shouldUpdateLines=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0),s!==n&&(this.shouldSetLabelOpacity=!0),r!==e&&(this.shouldUpdateLabels=!0),h!==a&&(this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0)}clickWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"parallel-plot-"+ST(),this.parallelChartEl.id=this.chartID,this.setTagLevels(),this.setDimensions(),this.setScaleUsed(),this.prepareScales(),this.prepareData(),this.updateInterpolationData(),this.validateInteractionKeys(),this.validateSeriesLabels(),this.validateDataLabelAccessor(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.renderChartRootElemets(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.drawXGrid(),this.drawYGrid(),this.setGlobalSelections(),this.setTestingAttributes(),this.drawXAxis(),this.setXAxisAccessibility(),this.enterYAxis(),this.exitYAxis(),this.drawYAxis(),this.setYAxisAccessibility(),this.enterChartLines(),this.updateChartLines(),this.exitChartLines(),this.enterPoints(),this.updatePoints(),this.exitPoints(),this.drawChartLines(),this.drawPoints(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.drawDataLabels(),this.drawSeriesLabels(),this.addStrokeUnder(),this.drawReferenceLines(),this.setSelectedClass(),this.updateCursor(),this.bindInteractivity(),this.setLegendCursor(),this.bindLegendInteractivity(),this.drawBaseline(),this.drawAnnotations(),this.setAnnotationAccessibility(),PT(this.root.node(),this.dotG.node()),this.setGroupAccessibilityID(),this.onChangeHandler(),this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldEnterUpdateExit&&(this.enterYAxis(),this.exitYAxis(),this.enterChartLines(),this.updateChartLines(),this.exitChartLines(),this.enterPoints(),this.updatePoints(),this.exitPoints(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateLines&&(this.drawChartLines(),this.shouldUpdateLines=!1),this.shouldUpdatePoints&&(this.drawPoints(),this.shouldUpdatePoints=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateColors&&(this.updateColors(),this.shouldUpdateColors=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateSeriesLabels&&(this.drawSeriesLabels(),this.shouldUpdateSeriesLabels=!1),this.addStrokeUnder&&(this.addStrokeUnder(),this.shouldAddStrokeUnder=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldUpdateStrokeWidth&&(this.updateStrokeWidth(),this.shouldUpdateStrokeWidth=!1),this.shouldUpdateDotRadius&&(this.updateDotRadius(),this.shouldUpdateDotRadius=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldUpdateDashPatterns&&(this.updateStrokePattern(),this.shouldUpdateDashPatterns=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSeriesLabelOpacity&&(this.setSeriesLabelOpacity(),this.shouldSetSeriesLabelOpacity=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldUpdateLegendInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateBaseline&&(this.drawBaseline(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,NE(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}setDimensions(){this.padding="string"==typeof this.padding?yE(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.seriesAccessor],this.seriesInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.seriesAccessor}setColors(){this.rawColors=this.colors?aE(this.colors):vE(this.colorPalette,this.nest.length),this.textColors={};let t=this.rawColors;if(this.strokes={},this.accessibility.hideStrokes||(t=[]),this.rawColors.forEach(i=>{if(!this.accessibility.hideStrokes){const s=TT(i),n=2===s.length?s[1]:s[0];this.strokes[i.toLowerCase()]=n,t.push(n)}this.textColors[i.toLowerCase()]=ET(i,"#ffffff",4.5)}),this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){const t=TT(this.hoverStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.hoverStyle.color.toLowerCase()]=i}this.textColors[this.hoverStyle.color.toLowerCase()]=ET(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){const t=TT(this.clickStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.clickStyle.color.toLowerCase()]=i}this.textColors[this.clickStyle.color.toLowerCase()]=ET(this.clickStyle.color,"#ffffff",4.5)}this.colorArr=t}setTableData(){const t=kE(this,nE,"parallel-plot");this.tableData=wE(this.data,t),this.tableColumns=Object.keys(t)}prepareData(){this.multiYScale={},this.data.map(t=>{const i=this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`];!i||"auto"!==this.dataLabel.placement&&!this.dataLabel.collisionHideOnly||t.enter||t.exit||(t.hidden=i["data-label-hidden"],t["auto-x"]=i.x,t["auto-y"]=i.y,t["auto-text-anchor"]=i["text-anchor"])}),this.nest=WW().key(t=>(this.multiYScale[t[this.ordinalAccessor]]||(this.multiYScale[t[this.ordinalAccessor]]={min:1/0,max:0}),this.multiYScale[t[this.ordinalAccessor]].min>t[this.valueAccessor]&&(this.multiYScale[t[this.ordinalAccessor]].min=t[this.valueAccessor]),this.multiYScale[t[this.ordinalAccessor]].max<t[this.valueAccessor]&&(this.multiYScale[t[this.ordinalAccessor]].max=t[this.valueAccessor]),t[this.seriesAccessor])).entries(this.data),this.map=WW().key(t=>t[this.seriesAccessor]).map(this.data),Object.keys(this.multiYScale).forEach(t=>{const i=this.multiYScale[t],s=.05*this.innerPaddedHeight;i.y=hS().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:i.min,this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i.max]).range([this.innerPaddedHeight-s,0+s]),i.ticks=[i.y.invert(this.innerPaddedHeight),i.y.invert(0)]})}updateInterpolationData(){if(this.interpolating){let t=this.nest.length;this.nest.forEach(i=>{i.interpolate={};const s=this.interpolating.map.get(i.key),n=i.values;if(s){const r=ME(s,n,this.ordinalAccessor);r.length?(i.interpolate.start=r[0],i.interpolate.end=r[1]):(i.interpolate.start=s,i.interpolate.end=n,t--)}else i.interpolate.start=n,i.interpolate.end=n}),t||this.nest.length!==this.interpolating.length||(this.interpolating=!1)}}prepareScales(){if(this.nest){this.interpolating=this.nest;const t=this.x.domain(),i=this.x.range(),s=this.y.domain(),n=this.y.range();this.interpolating.scales=this.scalesUsed,this.interpolating.multiYScale=Object.assign({},this.multiYScale),this.interpolating.x=this.x.domain(t).range(i),this.interpolating.y=hS().domain(s).range(n),this.interpolating.line=wS().x(t=>this.interpolating.x(t[this.ordinalAccessor])).y(t=>"individual"===this.interpolating.scales?this.interpolating.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.interpolating.y(t[this.valueAccessor])),this.interpolating.map=this.map}this.extent={},this.extent.minValue=function(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e]))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e]))&&n>s&&(n=s);return n}(this.data,t=>parseFloat(t[this.valueAccessor])),this.extent.maxValue=function(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e]))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e]))&&s>n&&(n=s);return n}(this.data,t=>parseFloat(t[this.valueAccessor]));let t=0+.05*this.innerPaddedHeight,i=this.innerPaddedHeight-.05*this.innerPaddedHeight;"preNormalized"===this.yAxis.scales&&(this.extent.minValue=0,this.extent.maxValue=1,t=0,i=this.innerPaddedHeight),this.extent.minValue=this.minValueOverride||0===this.minValueOverride?this.minValueOverride:this.extent.minValue,this.extent.maxValue=this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:this.extent.maxValue,t=this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t,i=this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i,this.y=hS().domain([this.extent.minValue,this.extent.maxValue]).range([i,t]),this.x=function(){return _W(zW.apply(null,arguments).paddingInner(1))}().domain(this.data.map(t=>t[this.ordinalAccessor])).range([0,this.innerPaddedWidth]),this.line=wS().x(t=>this.x(t[this.ordinalAccessor])).y(t=>"individual"===this.yAxis.scales?this.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.y(t[this.valueAccessor]))}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel&&this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateSeriesLabels(){this.labelDetails=Object.assign({},this.seriesLabel),this.labelDetails.placement||(this.labelDetails.placement=""),this.labelDetails.label&&this.labelDetails.label.length||(this.labelDetails.label=""),this.isRight="left"!==this.labelDetails.placement}setScaleUsed(){this.scalesUsed=this.yAxis.scales}renderRootElements(){this.svg=hW(this.parallelChartEl).select(".visa-viz-d3-parallel-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.gridG=this.rootG.append("g").attr("class","grid-group"),this.references=this.rootG.append("g").attr("class","parallel-reference-line-group")}renderChartRootElemets(){this.yGroup=this.rootG.append("g").attr("class","y-scales-group"),this.parallelLineG=this.rootG.append("g").attr("class","parallel-group parallel-line-group"),this.dotG=this.rootG.append("g").attr("class","parallel-group"),this.seriesLabelG=this.rootG.append("g").attr("class","parallel-series-wrapper"),this.labels=this.rootG.append("g").attr("class","parallel-dataLabel-group"),this.legendG=hW(this.parallelChartEl).select(".parallel-legend").append("svg"),this.tooltipG=hW(this.parallelChartEl).select(".parallel-tooltip"),this.setTooltipInitialStyle()}reSetRoot(){CT({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:bS}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),CT({selection:this.root,duration:this.duration,namespace:"root_reset",easing:bS}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),CT({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:bS}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),iE(this.chartID,this.width)}setGlobalSelections(){const t=Object.keys(this.multiYScale),i=this.yGroup.selectAll(".y-wrapper").data(t,t=>t);this.yEnter=i.enter().append("g"),this.yExit=i.exit(),this.yUpdate=i.merge(this.yEnter);const s=this.parallelLineG.selectAll(".parallel-plot").data(this.nest,t=>t.key);this.enterLines=s.enter().append("path"),this.exitLines=s.exit(),this.updateLines=s.merge(this.enterLines),this.enterSize=this.enterLines.size();const n=this.dotG.selectAll(".parallel-dot-wrapper").data(this.nest,t=>t.key);this.enterDotWrappers=n.enter().append("g"),this.exitDotWrappers=n.exit(),this.updateDotWrappers=n.merge(this.enterDotWrappers);const r=this.seriesLabelG.selectAll(".parallel-series-label").data(this.nest,t=>t.key);this.seriesLabelEnter=r.enter().append("text"),this.seriesLabelExit=r.exit(),this.seriesLabelUpdate=r.merge(this.seriesLabelEnter);const e=this.labels.selectAll("g").data(this.nest,t=>t.key);if(this.enteringLabelGroups=e.enter().append("g"),this.exitingLabelGroups=e.exit(),this.updatingLabelGroups=e.merge(this.enteringLabelGroups),this.interpolating){this.updateDotWrappers.selectAll("circle").remove();const t=this.updateDotWrappers.selectAll("circle").data(t=>t.interpolate.start);this.enterDots=t.enter().append("circle"),this.exitDots=t.exit(),this.updateDots=t.merge(this.enterDots),this.updatingLabelGroups.selectAll(".parallel-dataLabel").remove();const i=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data(t=>t.interpolate.start);this.enteringLabels=i.enter().append("text"),this.updatingLabels=i.merge(this.enteringLabels)}else{const t=this.updateDotWrappers.selectAll("circle").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enterDots=t.enter().append("circle"),this.exitDots=t.exit(),this.updateDots=t.merge(this.enterDots),this.enterSize=this.enterDots.size(),this.exitSize=this.exitDots.size();const i=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enteringLabels=i.enter().append("text"),this.exitingLabels=i.exit(),this.updatingLabels=i.merge(this.enteringLabels)}}setTestingAttributes(){this.unitTest?(hW(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid","chart-container"),hW(this.parallelChartEl).select(".parallel-main-title").attr("data-testid","main-title"),hW(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.gridG.attr("data-testid","grid-group"),this.references.attr("data-testid","reference-line-group"),this.yGroup.attr("data-testid","y-scales-group"),this.yUpdate.attr("data-testid","y-scale-wrapper"),this.parallelLineG.attr("data-testid","parallel-line-group"),this.updateLines.attr("data-testid","parallel-line").attr("data-id",t=>`parallel-line-${t.key}`),this.seriesLabelG.attr("data-testid","parallel-series-label-container"),this.seriesLabelUpdate.attr("data-testid","parallel-series-label").attr("data-id",t=>`parallel-series-label-${t.key}`),this.dotG.attr("data-testid","marker-group"),this.updateDotWrappers.attr("data-testid","marker-series-group").attr("data-id",t=>`marker-series-${t.key}`),this.updateDots.attr("data-testid","marker").attr("data-id",t=>`marker-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`),this.labels.attr("data-testid","dataLabel-group-container"),this.updatingLabelGroups.attr("data-testid","dataLabel-group").attr("data-id",t=>`dataLabel-group-${t.key}`),this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",t=>`dataLabel-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`),this.svg.select("defs").attr("data-testid","pattern-defs")):(hW(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid",null),hW(this.parallelChartEl).select(".parallel-main-title").attr("data-testid",null),hW(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.gridG.attr("data-testid",null),this.references.attr("data-testid",null),this.yGroup.attr("data-testid",null),this.yUpdate.attr("data-testid",null),this.parallelLineG.attr("data-testid",null),this.updateLines.attr("data-testid",null).attr("data-id",null),this.seriesLabelG.attr("data-testid",null),this.seriesLabelUpdate.attr("data-testid",null).attr("data-id",null),this.dotG.attr("data-testid",null),this.updateDotWrappers.attr("data-testid",null).attr("data-id",null),this.updateDots.attr("data-testid",null).attr("data-id",null),this.labels.attr("data-testid",null),this.updatingLabelGroups.attr("data-testid",null).attr("data-id",null),this.updatingLabels.attr("data-testid",null).attr("data-id",null),this.svg.select("defs").attr("data-testid",null))}drawXAxis(){oE({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel?this.innerPaddedWidth/this.nest[0].values.length*.7:"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration,hidePath:!0})}enterYAxis(){this.yEnter.attr("class","y-wrapper").attr("transform",t=>"translate("+this.x(t)+",0)").attr("opacity",0)}exitYAxis(){this.yExit.transition("exit").duration(this.duration).ease(bS).attr("opacity",0).remove()}drawYAxis(){this.yUpdate.each((t,i,s)=>{const n="individual"===this.yAxis.scales?this.multiYScale[t].ticks:this.yAxis.onlyTickExtents?[this.extent.minValue,this.extent.maxValue]:this.yAxis.onlyTickExtents,r=this.multiYScale[t].y.domain(),e=r[0]===r[1]||0!==i&&"individual"!==this.yAxis.scales||!this.yAxis.visible;oE({root:hW(s[i]),height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"individual"===this.yAxis.scales?this.multiYScale[t].y:this.y,left:!0,wrapLabel:this.wrapLabel?this.padding.left:"",format:this.yAxis.format,tickInterval:n?1:this.yAxis.tickInterval,label:"individual"===this.yAxis.scales||e?"":this.yAxis.label,padding:this.padding,hide:e,hidePath:!0,duration:this.duration,ticks:n})}).transition("update").duration(this.duration).ease(bS).attr("transform",t=>"translate("+this.x(t)+",0)").attr("opacity",1)}setXAxisAccessibility(){KT({rootEle:this.parallelChartEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:!!this.x&&this.x,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){BT({rootEle:this.parallelChartEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:!!this.y&&this.y,yAxisLabel:this.yAxis.label?this.yAxis.label:"",xAxisLabel:this.xAxis.label?this.xAxis.label:""})}drawBaseline(){oE({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0),hide:!this.showBaselineX,duration:this.duration})}drawXGrid(){uE(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!1,this.xAxis.tickInterval,this.duration)}drawYGrid(){uE(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)}enterChartLines(){this.enterLines.interrupt(),this.enterLines.attr("class","parallel-plot entering").attr("d",t=>this.line(t.values)).attr("data-d",t=>this.line(t.values)).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top),this.enterLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("stroke-dasharray",(t,i,s)=>(t.linelength=s[i].getTotalLength(),t.linelength+" "+t.linelength)).attr("stroke",this.handleLineStroke).attr("fill","none").attr("stroke-width",.1)}updateChartLines(){this.updateLines.interrupt(),this.updateLines.transition().duration(this.duration).ease(bS).attr("stroke-dashoffset",0).attr("stroke-width",t=>this.calculateStrokeWidth(t,!0)).call(xE,()=>{this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)}),this.updateLines.transition("opacity").ease(bS).duration(this.duration).attr("opacity",t=>{const i=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?rE(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):rE(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i})}exitChartLines(){this.exitLines.interrupt(),this.exitLines.attr("stroke-dasharray",(t,i,s)=>(t.linelength=s[i].getTotalLength(),t.linelength+" "+t.linelength)).transition("exit").ease(bS).duration(this.duration).attr("opacity",0).attr("stroke-dashoffset",t=>t.linelength).attr("stroke-width",.1).remove()}drawChartLines(){this.interpolating&&this.updateLines.attr("d",(t,i,s)=>hW(s[i]).classed("entering")?this.line(t.values):this.interpolating.line(t.interpolate.start)),this.updateLines.attr("stroke-width",t=>this.calculateStrokeWidth(t,!0)).attr("stroke-dashoffset",t=>t.linelength).attr("data-d",t=>this.line(this.interpolating?t.interpolate.end:t.values)).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(bS).duration(this.duration).attr("d",t=>this.line(this.interpolating?t.interpolate.end:t.values)).call(xE,()=>{this.updateLines.classed("entering",!1).attr("data-d",t=>this.line(t.values)).attr("d",t=>this.line(t.values)).attr("stroke-dasharray",this.handleStrokeDasharray)})}enterPoints(){this.enterDots.interrupt(),this.enterDotWrappers.attr("class","parallel-dot-wrapper").attr("opacity",0).attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]).each((t,i,s)=>{IT(s[i])}),this.enterDots.each((t,i,s)=>{IT(s[i])}).attr("stroke",this.handleDotStroke).attr("cursor",this.suppressEvents?null:this.cursor).attr("data-fill",!0).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.interpolating&&(this.enterDots.attr("cx",t=>this.interpolating.x(t[this.ordinalAccessor])).attr("cy",this.interpolateDynamicY).attr("r",t=>t.enter?0:eE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):hE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).attr("stroke-width",t=>this.calculateStrokeWidth(t)),this.enterDotWrappers.selectAll("circle").attr("r",0).attr("cx",t=>this.x(t[this.ordinalAccessor])).attr("cy",this.dynamicY).attr("opacity",0)),this.updateDotWrappers.order(),this.updateDots.order()}updatePoints(){this.updateDots.interrupt();const t=this.showDots?1:0;this.updateDots.attr("tabindex",(t,i)=>0===i?"0":"-1"),this.updateDotWrappers.attr("opacity",i=>this.secondaryLines.keys.includes(i.key)?this.secondaryLines.opacity:t),this.interpolating?(this.updateDots.attr("opacity",t=>(this.exitSize+=t.exit?1:0,this.enterSize+=t.enter?1:0,t.enter?0:1)),this.updateDots=this.updateDotWrappers.selectAll("circle").data(t=>t.interpolate.end).classed("exiting",t=>t.exit),this.enterDotWrappers.selectAll("circle").each(t=>{t.enterWholeGroup=!0}),this.updateDots.transition("opacity").ease(bS).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0).attr("opacity",i=>rE(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))):this.updateDots.transition("opacity").ease(bS).duration(this.duration).attr("opacity",i=>rE(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}exitPoints(){this.exitDots.interrupt(),this.exitDots.transition("exit").ease(bS).duration(this.duration).attr("opacity",0).attr("r",0),this.exitDotWrappers.selectAll("circle").each(t=>{t.exitWholeGroup=!0}).transition("exit").ease(bS).duration(this.duration/2).delay((t,i,s)=>this.duration-this.duration*(i/(s.length-1))).attr("opacity",0).attr("r",0),this.updateDots.transition("accessibilityAfterExit").duration(this.duration/2).delay((t,i,s)=>this.duration-this.duration*(i/(s.length-1))).ease(bS).call(xE,()=>{const t=QT(this.rootG.node());this.exitDots.remove(),this.exitDotWrappers.remove(),this.svg.selectAll(".exiting").remove(),this.updateDots=this.updateDotWrappers.selectAll("circle"),this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel"),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),JT({parentGNode:this.rootG.node(),focusDidExist:t})})}drawPoints(){let t;t=this.interpolating?this.updateDots.attr("data-cx",t=>this.x(t[this.ordinalAccessor])).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",t=>t.exit?0:eE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):hE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).transition("update").ease(bS).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0).attr("r",t=>t.exit?0:eE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):hE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).attr("stroke-width",t=>this.calculateStrokeWidth(t)):this.updateDots.attr("data-cx",t=>this.x(t[this.ordinalAccessor])).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",t=>eE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):hE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).attr("r",t=>eE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):hE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).attr("stroke-width",t=>this.calculateStrokeWidth(t)).transition("update").ease(bS).duration(this.duration),this.updateDots.attr("stroke",this.handleDotStroke),t.attr("cx",t=>this.x(t[this.ordinalAccessor])).attr("cy",this.dynamicY).call(xE,()=>{this.updateDots.each(t=>{t.enterWholeGroup=!1,t.enter=!1}),JT({parentGNode:this.rootG.node()})})}enterSeriesLabels(){this.seriesLabelEnter.interrupt(),this.seriesLabelEnter.attr("class","parallel-series-label").attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onSeriesHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("fill",this.handleSeriesTextFill).attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor])).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.5em").attr("text-anchor",this.isRight?"start":"end").attr("opacity",t=>{const i=this.seriesLabel.visible?this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1:0;return rE(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON})}updateSeriesLabels(){this.seriesLabelUpdate.interrupt(),this.seriesLabelUpdate.transition("opacity").ease(bS).duration(this.duration).attr("opacity",t=>{const i=this.seriesLabel.visible?this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1:0;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?rE(t.values[0],i,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):rE(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i})}exitSeriesLabels(){this.seriesLabelExit.interrupt(),this.seriesLabelExit.transition("update").ease(bS).duration(this.duration).attr("opacity",0).remove()}drawSeriesLabels(){const t="auto"!==this.labelDetails.placement&&this.labelDetails.collisionHideOnly,i=this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill).text((t,i)=>this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showSeriesLabel?"":this.labelDetails.label?this.labelDetails.label[i]:t.key).style("visibility",(t,i,s)=>"auto"===this.labelDetails.placement||this.labelDetails.collisionHideOnly?hW(s[i]).style("visibility"):null).attr("data-x",this.isRight?this.innerPaddedWidth+10:0).attr("data-y",(t,i,s)=>{const n=getComputedStyle(s[i]),r=parseFloat(n.fontSize),e=Math.max(r-1,1);return"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor])+.4*e:this.y(t.values[0][this.valueAccessor])+.4*e}).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.5em").attr("data-use-dx",t).attr("data-use-dy",t).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-text-anchor",this.isRight?"start":"end").transition("update").ease(bS).duration(this.duration);this.labelDetails.visible&&("auto"===this.labelDetails.placement||this.labelDetails.collisionHideOnly)?(this.bitmaps=SE({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[this.updateDots],validPositions:t?["middle"]:["middle","top","bottom"],offsets:t?[1]:[1,4,4],accessors:["key"],size:[WE(this.width,0),WE(this.height,0)],hideOnly:this.labelDetails.visible&&t}),t&&i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor])).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.5em")):i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor])).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.5em")}enterDataLabels(){if(this.enteringLabels.interrupt(),this.enteringLabelGroups.attr("class","parallel-label-wrapper").attr("opacity",0).attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]),this.enteringLabels.attr("opacity",0).attr("fill",this.handleTextFill).attr("class","parallel-dataLabel").attr("cursor",this.suppressEvents?null:this.cursor).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.interpolating){const t=this.enteringLabels.attr("class","parallel-dataLabel").attr("opacity",Number.EPSILON);bE({root:t,xScale:this.interpolating.x,yScale:this.interpolateDynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"}),this.updatingLabels.attr("opacity",t=>t.enter?Number.EPSILON:1);const i=this.enteringLabelGroups.selectAll(".parallel-dataLabel").attr("opacity",Number.EPSILON);bE({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}else{const t=this.enteringLabels.attr("opacity",Number.EPSILON).attr("class","parallel-dataLabel");bE({root:t,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}"auto"===this.dataLabel.placement&&this.updatingLabels.each((t,i,s)=>{t.enter||t.exit||t.hidden||!t["auto-x"]&&0!==t["auto-x"]||!t["auto-y"]&&0!==t["auto-y"]||hW(s[i]).attr("x",+hW(s[i]).attr("x")+(+t["auto-x"]||0)).attr("y",+hW(s[i]).attr("y")+(+t["auto-y"]||0)).attr("text-anchor",t["auto-text-anchor"])})}updateDataLabels(){this.updatingLabelGroups.interrupt(),this.updatingLabelGroups.attr("opacity",t=>this.dataLabel.visible?this.secondaryLines.keys.includes(t.key)&&this.secondaryLines.showDataLabel?this.secondaryLines.opacity:this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showDataLabel?0:1:0),this.interpolating?(this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data(t=>t.interpolate.end).classed("exiting",t=>t.exit),this.enteringLabelGroups.each(t=>t.enterWholeGroup=!0),this.updatingLabels.transition("opacity").ease(bS).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0).attr("opacity",(t,i,s)=>{const n=t.exit||rE(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1,r=+hW(s[i].parentNode).attr("opacity");return hW(s[i]).attr("data-hidden",0===r||0===n?"true":null),n})):this.updatingLabels.attr("opacity",(t,i,s)=>{const n=t.exit||rE(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1,r=+hW(s[i].parentNode).attr("opacity");return hW(s[i]).attr("data-hidden",0===r||0===n?"true":null),n})}exitDataLabels(){this.exitingLabels.interrupt(),this.exitingLabels.transition("exit").ease(bS).duration(this.duration).attr("opacity",0).remove(),this.exitingLabelGroups.selectAll(".parallel-dataLabel").transition("exit").ease(bS).duration(this.duration/2).delay((t,i,s)=>this.duration-this.duration*(i/(s.length-1))).attr("opacity",0).call(xE,()=>{this.exitingLabelGroups.remove()})}drawDataLabels(){const t="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;let i=this.updatingLabels.text(t=>dE(t,this.innerLabelAccessor,this.dataLabel.format));i=this.interpolating?this.updatingLabels.style("visibility",(t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?t.hidden?"hidden":hW(s[i]).style("visibility"):null).attr("data-x",t=>this.interpolating.x(t[this.ordinalAccessor])).attr("data-y",this.interpolateDynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(bS).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0):this.updatingLabels.style("visibility",(t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?t.hidden?"hidden":hW(s[i]).style("visibility"):null).attr("data-x",t=>this.x(t[this.ordinalAccessor])).attr("data-y",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(bS).duration(this.duration);const s=this.gridG.selectAll("line").attr("data-y2",this.innerPaddedHeight).attr("data-y1",0).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-x1",t=>this.x(t)).attr("data-x2",t=>this.x(t)),n=this.yUpdate.selectAll(".y.axis").filter((t,i,s)=>+hW(s[i]).attr("opacity")>=1e-4).selectAll("text").attr("data-fill",!0).attr("data-y",t=>this.y(t)).attr("data-width",(t,i,s)=>{const n=s[i],r=getComputedStyle(n),e=parseFloat(r.fontSize),h=Math.max(e-1,1),a=LE(n.textContent,e,!0,r.fontFamily);return hW(n).attr("data-x",+hW(n).attr("x")).attr("data-translate-x",this.margin.left+this.padding.left-a).attr("data-translate-y",this.margin.top+this.padding.top-h/2).attr("data-height",h),a}),r=this.dataLabel&&this.dataLabel.collisionPlacement;this.bitmaps=bE({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,labelSelection:i,avoidMarks:[n,s,this.updateLines,this.updateDots],validPositions:t?["middle"]:r&&this.collisionSettings[r]?this.collisionSettings[r].validPositions:this.collisionSettings.all.validPositions,offsets:t?[1]:r&&this.collisionSettings[r]?this.collisionSettings[r].offsets:this.collisionSettings.all.offsets,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[WE(this.width,0),WE(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}}),i.call(xE,()=>{this.hiddenHash={},this.updatingLabels.each((t,i,s)=>{this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`]={"data-label-hidden":"true"===hW(s[i]).attr("data-label-hidden"),x:+hW(s[i]).attr("x")-+hW(s[i]).attr("data-x"),y:+hW(s[i]).attr("y")-+hW(s[i]).attr("data-y"),"text-anchor":hW(s[i]).attr("text-anchor")}})})}updateInteractionState(){this.updateLines.interrupt("opacity"),this.updateLines.attr("opacity",t=>{const i=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?rE(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):rE(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i});const t=this.showDots?1:0;this.updateDotWrappers.attr("opacity",i=>this.secondaryLines.keys.includes(i.key)?this.secondaryLines.opacity:t),this.updateDots.each((i,s,n)=>{i.enter||i.enterWholeGroup||i.exit||i.exitWholeGroup||hW(n[s]).attr("opacity",()=>rE(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}),JT({parentGNode:this.rootG.node()}),lE({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}setSeriesLabelOpacity(){const t="auto"!==this.labelDetails.placement&&this.labelDetails.collisionHideOnly,i="auto"===this.labelDetails.placement||t;if(this.seriesLabelUpdate.each((i,s,n)=>{const r=hW(n[s]),e=+r.attr("opacity"),h=r.style("visibility");r.classed("entering")||r.attr("opacity",()=>{const a=(this.seriesLabel.visible?this.secondaryLines.keys.includes(i.key)?this.secondaryLines.opacity:1:0)<1?0:1,o=+hW(n[s].parentNode).attr("opacity");if(r.attr("data-hidden",0===o||0===a?"true":null),this.seriesInteraction){if(this.secondaryLines.keys.includes(i.key)){const r=rE(i.values[0],a,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;return hW(n[s]).attr("data-hidden",0===r?"true":null),(1!==r||"hidden"!==h)&&e===r||"auto"!==this.labelDetails.placement&&!t||(1===r?hW(n[s]).classed("collision-added",!0).style("visibility",null):hW(n[s]).classed("collision-removed",!0)),r}{const r=rE(i.values[0],a,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;return hW(n[s]).attr("data-hidden",0===r?"true":null),(1!==r||"hidden"!==h)&&e===r||"auto"!==this.labelDetails.placement&&!t||(1===r?hW(n[s]).classed("collision-added",!0).style("visibility",null):hW(n[s]).classed("collision-removed",!0)),r}}return hW(n[s]).attr("data-hidden",0===a?"true":null),e===a||"auto"!==this.labelDetails.placement&&!t||(1===a?hW(n[s]).classed("collision-added",!0).style("visibility",null):hW(n[s]).classed("collision-removed",!0)),a})}),i){const i=this.seriesLabelUpdate.filter((t,i,s)=>hW(s[i]).classed("collision-added")).attr("data-text-anchor",(t,i,s)=>hW(s[i]).attr("collision-text-anchor")||hW(s[i]).attr("data-text-anchor")).attr("collision-text-anchor",null),s=this.seriesLabelUpdate.filter((t,i,s)=>hW(s[i]).classed("collision-removed")).attr("data-use-dx",t).attr("data-use-dy",t).attr("keep-data-y",t).attr("collision-text-anchor",(t,i,s)=>hW(s[i]).attr("data-text-anchor")).attr("data-text-anchor",null);s.size()>0&&(this.bitmaps=SE({bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[WE(this.width,0),WE(this.height,0)],hideOnly:!1,removeOnly:!0}),s.classed("collision-removed",!1).attr("keep-data-y",null)),i.size()>0&&(this.bitmaps=SE({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[this.updateDots],validPositions:t?["middle"]:["middle","top","bottom"],offsets:t?[1]:[1,4,4],accessors:["key"],size:[WE(this.width,0),WE(this.height,0)],hideOnly:this.labelDetails.visible&&t}),t&&i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor])).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.5em"),i.classed("collision-added",!1))}}setLabelOpacity(){const t="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly,i="auto"===this.dataLabel.placement||t,s=this.dataLabel&&this.dataLabel.collisionPlacement;if(this.updatingLabelGroups.attr("opacity",t=>(this.dataLabel.visible?this.secondaryLines.keys.includes(t.key)&&this.secondaryLines.showDataLabel?this.secondaryLines.opacity:this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showDataLabel?0:1:0)<1?0:1),this.updatingLabels.each((i,s,n)=>{const r=+hW(n[s]).attr("opacity"),e=hW(n[s]).style("visibility");i.enter||i.enterWholeGroup||i.exit||i.exitWholeGroup||hW(n[s]).attr("opacity",()=>{const h=rE(i,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1,a=+hW(n[s].parentNode).attr("opacity");return hW(n[s]).attr("data-hidden",0===a||0===h?"true":null),(1!==h||"hidden"!==e)&&r===h||"auto"!==this.dataLabel.placement&&!t||(1===h?hW(n[s]).classed("collision-added",!0).style("visibility",null):hW(n[s]).classed("collision-removed",!0)),h})}),i){const i=this.updatingLabels.filter((t,i,s)=>hW(s[i]).classed("collision-added")).transition().duration(0),n=this.updatingLabels.filter((t,i,s)=>hW(s[i]).classed("collision-removed")).attr("data-use-dx",t).attr("data-use-dy",t),r=t?["middle"]:s&&this.collisionSettings[s]?this.collisionSettings[s].validPositions:this.collisionSettings.all.validPositions,e=t?[1]:s&&this.collisionSettings[s]?this.collisionSettings[s].offsets:this.collisionSettings.all.offsets;n.size()>0&&(this.bitmaps=SE({bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[WE(this.width,0),WE(this.height,0)],hideOnly:!1,removeOnly:!0}),n.classed("collision-removed",!1)),i.size()>0&&(this.bitmaps=bE({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[this.updateLines,this.updateDots],validPositions:r,offsets:e,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[WE(this.width,0),WE(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly,suppressMarkDraw:!0}}),i.call(xE,()=>{this.updatingLabels.each((t,i,s)=>{hW(s[i]).classed("collision-added",!1),this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`]={"data-label-hidden":"true"===hW(s[i]).attr("data-label-hidden"),x:+hW(s[i]).attr("x")-+hW(s[i]).attr("data-x"),y:+hW(s[i]).attr("y")-+hW(s[i]).attr("data-y"),"text-anchor":hW(s[i]).attr("text-anchor")}})}))}}bindInteractivity(){this.updateLines.on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateDots.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.seriesLabelUpdate.on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onSeriesHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updatingLabels.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler())}addStrokeUnder(){const t=DT({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.labels.attr("filter",t),this.seriesLabelG.attr("filter",t)}updateColors(){this.updateDotWrappers.attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]),this.updateDots.attr("stroke",this.handleDotStroke),this.updateLines.attr("stroke",this.handleLineStroke),this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill),this.updatingLabelGroups.attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]),this.updatingLabels.attr("fill",this.handleTextFill)}updateCursor(){this.updateLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null),this.updateDots.attr("cursor",this.suppressEvents?null:this.cursor),this.seriesLabelUpdate.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null),this.updatingLabels.attr("cursor",this.suppressEvents?null:this.cursor)}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class",".parallel-reference").attr("opacity",1),s=i.append("line");s.attr("class","line-reference-line").attr("opacity",0);const n=i.append("text");n.attr("class","parallel-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".parallel-reference-line").data(t=>[t]).transition("merge").ease(bS).duration(this.duration),h=r.selectAll(".parallel-reference-line-label").data(t=>[t]).transition("merge").ease(bS).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(bS).duration(this.duration).attr("opacity",0).remove(),i.attr("transform",t=>"translate(0,"+this.y(t.value)+")"),r.transition("merge").ease(bS).duration(this.duration).attr("transform",t=>"translate(0,"+this.y(t.value)+")"),s.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),n.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.style("stroke",AE[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",AE[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}updateStrokeWidth(){this.updateLines.attr("stroke-width",t=>this.calculateStrokeWidth(t,!0)),this.updateDots.attr("stroke",this.handleDotStroke)}updateStrokePattern(){this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)}updateDotRadius(){this.updateDots.each((t,i,s)=>{const n=hW(s[i]);t.enter||t.enterWholeGroup||n.classed("entering")||t.exit||n.attr("r",()=>eE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):hE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)}).attr("stroke",this.handleDotStroke)}setSelectedClass(){this.updateDots.classed("highlight",(t,i,s)=>{let n=rE(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return n=!(!this.clickHighlight||!this.clickHighlight.length)&&n,tE(s[i],n,this.accessibility.elementsAreInterface),n})}drawAnnotations(){sE({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.ordinalAccessor,yScale:this.y,yAccessor:this.valueAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){ZT(this.parallelChartEl,this.annotations)}setTagLevels(){this.topLevel=$T(this.highestHeadingLevel),this.bottomLevel=$T(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){OT({rootEle:this.parallelChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"parallel-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){HT({node:this.svg.node(),chartTag:"parallel-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:kE(this,nE,"parallel-plot"),groupAccessor:this.seriesAccessor,groupName:"line",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.updateDots.each((t,i,s)=>{IT(s[i])})}setGeometryAriaLabels(){const t=kE(this,nE,"parallel-plot");this.updateDots.each((i,s,n)=>{zT({node:n[s],geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"line",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),_T({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateDotWrappers.each((t,i,s)=>{_T({node:s[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){qT(this.parallelChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){RT(this.parallelChartEl,this.subTitle)}setChartAccessibilityLongDescription(){XT(this.parallelChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){FT(this.parallelChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){jT(this.parallelChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){GT(this.parallelChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){VT(this.parallelChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){YT({rootEle:this.parallelChartEl,parentGNode:this.dotG.node(),chartTag:"parallel-plot",geomType:"point",groupName:"line"})}setChartAccessibilityStructureNotes(){UT(this.parallelChartEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.interpolating=!1,this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){gE(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&t[this.ordinalAccessor]&&this.eventsTooltip({data:t,evt:KN,isToShow:!0})}onSeriesHoverHandler(t){this.hoverFunc.emit(t)}onMouseOutHandler(){gE(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){mE(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){fE({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,chartType:"parallel"})}bindLegendInteractivity(){hW(this.parallelChartEl).selectAll(".legend").on("click",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?t=>{t.values&&this.hoverFunc.emit(t.values[0])}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive?()=>this.onMouseOutHandler():null)}setLegendCursor(){hW(this.parallelChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?this.cursor:null)}drawLegendElements(){cE({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,dashPatterns:this.accessibility.hideTextures?null:this.dashPatterns,margin:this.margin,padding:this.padding,duration:this.duration,type:"parallel",secondary:this.secondaryLines.keys,fontSize:16,data:this.nest,label:this.legend.labels,hide:!(this.legend.visible||!this.legend),interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldSetScaleUsed&&(this.setScaleUsed(),this.shouldSetScaleUsed=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateInterpolationData&&(this.updateInterpolationData(),this.shouldUpdateInterpolationData=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldValidateSeriesLabels&&(this.validateSeriesLabels(),this.shouldValidateSeriesLabels=!1),s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"parallel-main-title vcl-main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions parallel-sub-title vcl-sub-title"},this.subTitle),s("div",{class:"parallel-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"point",groupName:"line",chartTag:"parallel-plot",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:!0,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-parallel-container"}),s("div",{class:"parallel-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(gS);let i=0;const s={wrapLabel:{exception:!1},strokeWidth:{exception:0},showDots:{exception:!1},hoverOpacity:{exception:0},dotRadius:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:!1}};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:gS[t[i]]}}get parallelChartEl(){return n(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],seriesAccessor:["seriesAccessorWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],showBaselineX:["showBaselineXWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],showDots:["showDotsWatcher"],dotRadius:["dotRadiusWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],secondaryLines:["secondaryLinesWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}parallel-plot{cursor:default}parallel-plot .annotations{pointer-events:none}parallel-plot .annotations .handle{pointer-events:all}parallel-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}parallel-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}parallel-plot .hidden{display:none}parallel-plot .axis{font-size:12px}parallel-plot .axis text{fill:#767676}parallel-plot .axis-label{text-anchor:middle;font:1rem sans-serif}parallel-plot .axis path{stroke:#767676}parallel-plot .grid line{stroke:#767676;shape-rendering:crispEdges}parallel-plot .grid path{stroke-width:0;stroke:#767676}parallel-plot .grid.left line{stroke-dasharray:4, 4;stroke-opacity:0.6}parallel-plot .parallel-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}parallel-plot .parallel-group__inactive{opacity:0}parallel-plot .parallel-group .parallel-plot{fill:none}parallel-plot .parallel-group .dot{stroke:#ffffff}parallel-plot .parallel-group .parallel-series-label{font-size:1em}parallel-plot .parallel-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}parallel-plot .parallel-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"}};window.VisaChartsLibOSSLicenses=pE();var EE="http://www.w3.org/1999/xhtml";const DE={svg:"http://www.w3.org/2000/svg",xhtml:EE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $E(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),DE.hasOwnProperty(i)?{space:DE[i],local:t}:t}function CE(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===EE&&i.documentElement.namespaceURI===EE?i.createElement(t):i.createElementNS(s,t)}}function OE(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function IE(t){var i=$E(t);return(i.local?OE:CE)(i)}function zE(){}function _E(t){return null==t?zE:function(){return this.querySelector(t)}}function HE(){return[]}function PE(t){return null==t?HE:function(){return this.querySelectorAll(t)}}function qE(t){return function(){return this.matches(t)}}function RE(t){return new Array(t.length)}function XE(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function FE(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new XE(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function jE(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new XE(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function GE(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function VE(t){return function(){this.removeAttribute(t)}}function YE(t){return function(){this.removeAttributeNS(t.space,t.local)}}function KE(t,i){return function(){this.setAttribute(t,i)}}function BE(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function UE(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function ZE(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function JE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function QE(t){return function(){this.style.removeProperty(t)}}function tD(t,i,s){return function(){this.style.setProperty(t,i,s)}}function iD(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function sD(t,i){return t.style.getPropertyValue(i)||JE(t).getComputedStyle(t,null).getPropertyValue(i)}function nD(t){return function(){delete this[t]}}function rD(t,i){return function(){this[t]=i}}function eD(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function hD(t){return t.trim().split(/^|\s+/)}function aD(t){return t.classList||new oD(t)}function oD(t){this._node=t,this._names=hD(t.getAttribute("class")||"")}function uD(t,i){for(var s=aD(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function cD(t,i){for(var s=aD(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function lD(t){return function(){uD(this,t)}}function fD(t){return function(){cD(this,t)}}function dD(t,i){return function(){(i.apply(this,arguments)?uD:cD)(this,t)}}function vD(){this.textContent=""}function pD(t){return function(){this.textContent=t}}function yD(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function wD(){this.innerHTML=""}function mD(t){return function(){this.innerHTML=t}}function gD(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function bD(){this.nextSibling&&this.parentNode.appendChild(this)}function MD(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kD(){return null}function xD(){var t=this.parentNode;t&&t.removeChild(this)}function AD(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function ND(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}XE.prototype={constructor:XE,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},oD.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var WD={},LD=null;function SD(t,i,s){return t=TD(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function TD(t,i,s){return function(n){var r=LD;LD=n;try{t.call(this,this.__data__,i,s)}finally{LD=r}}}function ED(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function DD(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function $D(t,i,s){var n=WD.hasOwnProperty(t.type)?SD:TD;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function CD(t,i,s){var n=JE(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function OD(t,i){return function(){return CD(this,t,i)}}function ID(t,i){return function(){return CD(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(WD={mouseenter:"mouseover",mouseleave:"mouseout"}));var zD=[null];function _D(t,i){this._groups=t,this._parents=i}function HD(){return new _D([[document.documentElement]],zD)}function PD(t){return"string"==typeof t?new _D([[document.querySelector(t)]],[document.documentElement]):new _D([[t]],zD)}function qD(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}_D.prototype=HD.prototype={constructor:_D,select:function(t){"function"!=typeof t&&(t=_E(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new _D(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=PE(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new _D(n,r)},filter:function(t){"function"!=typeof t&&(t=qE(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new _D(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?jE:FE,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,m,g=0,b=0;g<v;++g)if(w=p[g]){for(g>=b&&(b=g+1);!(m=y[b])&&++b<v;);w._next=m||null}}return(h=new _D(h,n))._enter=a,h._exit=o,h},enter:function(){return new _D(this._enter||this._groups.map(RE),this._parents)},exit:function(){return new _D(this._exit||this._groups.map(RE),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new _D(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=GE);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new _D(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=$E(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?YE:VE:"function"==typeof i?s.local?ZE:UE:s.local?BE:KE)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?QE:"function"==typeof i?iD:tD)(t,i,null==s?"":s)):sD(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?nD:"function"==typeof i?eD:rD)(t,i)):this.node()[t]},classed:function(t,i){var s=hD(t+"");if(arguments.length<2){for(var n=aD(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?dD:i?lD:fD)(s,i))},text:function(t){return arguments.length?this.each(null==t?vD:("function"==typeof t?yD:pD)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?wD:("function"==typeof t?gD:mD)(t)):this.node().innerHTML},raise:function(){return this.each(bD)},lower:function(){return this.each(MD)},append:function(t){var i="function"==typeof t?t:IE(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:IE(t),n=null==i?kD:"function"==typeof i?i:_E(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(xD)},clone:function(t){return this.select(t?ND:AD)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=ED(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?$D:DD,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?ID:OD)(t,i))}};var RD=function(t){return 1===t.length&&(t=function(t){return function(i,s){return qD(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}(qD).right;function XD(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var FD=Math.sqrt(50),jD=Math.sqrt(10),GD=Math.sqrt(2);function VD(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=FD?10:e>=jD?5:e>=GD?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=FD?10:e>=jD?5:e>=GD?2:1)}function YD(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&s>n&&(n=s);return n}function KD(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function BD(){}function UD(t,i){var s=new BD;if(t instanceof BD)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}BD.prototype=UD.prototype={constructor:BD,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var ZD=Array.prototype,JD=ZD.map,QD=ZD.slice,t$={name:"implicit"};function i$(){var t=UD(),i=[],s=[],n=t$;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==t$)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=UD();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=QD.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return i$(i,s).unknown(n)},KD.apply(r,arguments),r}function s$(){var t,i,s=i$().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=XD(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return s$(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},KD.apply(c(),arguments)}function n$(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function r$(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function e$(){}var h$="\\s*([+-]?\\d+)\\s*",a$="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",o$="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u$=/^#([0-9a-f]{3,8})$/,c$=new RegExp("^rgb\\("+[h$,h$,h$]+"\\)$"),l$=new RegExp("^rgb\\("+[o$,o$,o$]+"\\)$"),f$=new RegExp("^rgba\\("+[h$,h$,h$,a$]+"\\)$"),d$=new RegExp("^rgba\\("+[o$,o$,o$,a$]+"\\)$"),v$=new RegExp("^hsl\\("+[a$,o$,o$]+"\\)$"),p$=new RegExp("^hsla\\("+[a$,o$,o$,a$]+"\\)$"),y$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function w$(){return this.rgb().formatHex()}function m$(){return this.rgb().formatRgb()}function g$(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=u$.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?b$(i):3===s?new A$(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?M$(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?M$(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=c$.exec(t))?new A$(i[1],i[2],i[3],1):(i=l$.exec(t))?new A$(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=f$.exec(t))?M$(i[1],i[2],i[3],i[4]):(i=d$.exec(t))?M$(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=v$.exec(t))?S$(i[1],i[2]/100,i[3]/100,1):(i=p$.exec(t))?S$(i[1],i[2]/100,i[3]/100,i[4]):y$.hasOwnProperty(t)?b$(y$[t]):"transparent"===t?new A$(NaN,NaN,NaN,0):null}function b$(t){return new A$(t>>16&255,t>>8&255,255&t,1)}function M$(t,i,s,n){return n<=0&&(t=i=s=NaN),new A$(t,i,s,n)}function k$(t){return t instanceof e$||(t=g$(t)),t?new A$((t=t.rgb()).r,t.g,t.b,t.opacity):new A$}function x$(t,i,s,n){return 1===arguments.length?k$(t):new A$(t,i,s,null==n?1:n)}function A$(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function N$(){return"#"+L$(this.r)+L$(this.g)+L$(this.b)}function W$(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function L$(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function S$(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new E$(t,i,s,n)}function T$(t){if(t instanceof E$)return new E$(t.h,t.s,t.l,t.opacity);if(t instanceof e$||(t=g$(t)),!t)return new E$;if(t instanceof E$)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new E$(h,a,o,t.opacity)}function E$(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function D$(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function $$(t){return function(){return t}}function C$(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):$$(isNaN(t)?i:t)}n$(e$,g$,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:w$,formatHex:w$,formatHsl:function(){return T$(this).formatHsl()},formatRgb:m$,toString:m$}),n$(A$,x$,r$(e$,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new A$(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new A$(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N$,formatHex:N$,formatRgb:W$,toString:W$})),n$(E$,(function(t,i,s,n){return 1===arguments.length?T$(t):new E$(t,i,s,null==n?1:n)}),r$(e$,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new E$(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new E$(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new A$(D$(t>=240?t-240:t+120,r,n),D$(t,r,n),D$(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const O$=function t(i){var s=function(t){return 1==(t=+t)?C$:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):$$(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=x$(t)).r,(i=x$(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=C$(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function I$(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function z$(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=F$(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function _$(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function H$(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function P$(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=F$(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var q$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R$=new RegExp(q$.source,"g");function X$(t,i){var s,n,r,e=q$.lastIndex=R$.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=q$.exec(t))&&(n=R$.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:H$(s,n)})),e=R$.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function F$(t,i){var s,n=typeof i;return null==i||"boolean"===n?$$(i):("number"===n?H$:"string"===n?(s=g$(i))?(i=s,O$):X$:i instanceof g$?O$:i instanceof Date?_$:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?I$:Array.isArray(i)?z$:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?P$:H$)(t,i)}function j$(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var G$,V$,Y$,K$,B$=180/Math.PI,U$={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Z$(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*B$,skewX:Math.atan(o)*B$,scaleX:h,scaleY:a}}function J$(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:H$(t,r)},{i:o-2,x:H$(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:H$(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:H$(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:H$(t,s)},{i:a-2,x:H$(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var Q$=J$((function(t){return"none"===t?U$:(G$||(G$=document.createElement("DIV"),V$=document.documentElement,Y$=document.defaultView),G$.style.transform=t,t=Y$.getComputedStyle(V$.appendChild(G$),null).getPropertyValue("transform"),V$.removeChild(G$),Z$(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),tC=J$((function(t){return null==t?U$:(K$||(K$=document.createElementNS("http://www.w3.org/2000/svg","g")),K$.setAttribute("transform",t),(t=K$.transform.baseVal.consolidate())?Z$((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):U$)}),", ",")",")");function iC(t){return+t}var sC=[0,1];function nC(t){return t}function rC(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function eC(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function hC(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=rC(r,n),e=s(h,e)):(n=rC(n,r),e=s(e,h)),function(t){return e(n(t))}}function aC(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=rC(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=RD(t,i,1,n)-1;return e[s](r[s](i))}}function oC(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function uC(t,i){return function(){var t,i,s,n,r,e,h=sC,a=sC,o=F$,u=nC;function c(){return n=Math.min(h.length,a.length)>2?aC:hC,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),H$)))(s)))},l.domain=function(t){return arguments.length?(h=JD.call(t,iC),u===nC||(u=eC(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=QD.call(t),c()):a.slice()},l.rangeRound=function(t){return a=QD.call(t),o=j$,c()},l.clamp=function(t){return arguments.length?(u=t?eC(h):nC,l):u!==nC},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function cC(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function lC(t){return(t=cC(Math.abs(t)))?t[1]:NaN}var fC,dC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vC(t){if(!(i=dC.exec(t)))throw new Error("invalid format: "+t);var i;return new pC({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function pC(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function yC(t,i){var s=cC(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}vC.prototype=pC.prototype,pC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const wC={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return yC(100*t,i)},r:yC,s:function(t,i){var s=cC(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(fC=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+cC(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function mC(t){return t}var gC,bC,MC,kC=Array.prototype.map,xC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function AC(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=VD(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=function(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=FD?r*=10:e>=jD?r*=5:e>=GD&&(r*=2),i<t?-r:r}(t,i,s);switch((n=vC(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(lC(i)/3)))-lC(Math.abs(t)))}(e,h))||(n.precision=r),MC(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,lC(i)-lC(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-lC(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return bC(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=VD(a,o,s))>0?n=VD(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=VD(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function NC(){var t=uC(nC,nC);return t.copy=function(){return oC(t,NC())},KD.apply(t,arguments),AC(t)}gC=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?mC:(i=kC.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?mC:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(kC.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=vC(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,m=t.type;"n"===m?(p=!0,m="g"):wC[m]||(void 0===y&&(y=12),w=!0,m="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var g="$"===f?r:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?e:/[%p]/.test(m)?o:"",M=wC[m],k=/[defgprs%]/.test(m);function x(t){var r,e,o,f=g,x=b;if("c"===m)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===m?xC[8+fC/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var N=f.length+t.length+x.length,W=N<v?new Array(v-N+1).join(i):"";switch(p&&d&&(t=n(W+t,W.length?v-x.length:1/0),W=""),s){case"<":t=f+t+x+W;break;case"=":t=f+W+t+x;break;case"^":t=W.slice(0,N=W.length>>1)+f+t+x+W.slice(N);break;default:t=W+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=vC(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(lC(i)/3))),r=Math.pow(10,-n),e=xC[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),bC=gC.format,MC=gC.formatPrefix;var WC=Math.PI,LC=2*WC,SC=LC-1e-6;function TC(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function EC(){return new TC}function DC(t){return function(){return t}}function $C(t){this._context=t}function CC(t){return new $C(t)}function OC(t){return t[0]}function IC(t){return t[1]}TC.prototype=EC.prototype={constructor:TC,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,s,n){this._+="Q"+ +t+","+ +i+","+(this._x1=+s)+","+(this._y1=+n)},bezierCurveTo:function(t,i,s,n,r,e){this._+="C"+ +t+","+ +i+","+ +s+","+ +n+","+(this._x1=+r)+","+(this._y1=+e)},arcTo:function(t,i,s,n,r){var e=this._x1,h=this._y1,a=(s=+s)-(t=+t),o=(n=+n)-(i=+i),u=e-t,c=h-i,l=u*u+c*c;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(l>1e-6)if(Math.abs(c*a-o*u)>1e-6&&r){var f=s-e,d=n-h,v=a*a+o*o,p=f*f+d*d,y=Math.sqrt(v),w=Math.sqrt(l),m=r*Math.tan((WC-Math.acos((v+l-p)/(2*y*w)))/2),g=m/w,b=m/y;Math.abs(g-1)>1e-6&&(this._+="L"+(t+g*u)+","+(i+g*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>u*d)+","+(this._x1=t+b*a)+","+(this._y1=i+b*o)}else this._+="L"+(this._x1=t)+","+(this._y1=i)},arc:function(t,i,s,n,r,e){t=+t,i=+i,e=!!e;var h=(s=+s)*Math.cos(n),a=s*Math.sin(n),o=t+h,u=i+a,c=1^e,l=e?n-r:r-n;if(s<0)throw new Error("negative radius: "+s);null===this._x1?this._+="M"+o+","+u:(Math.abs(this._x1-o)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+o+","+u),s&&(l<0&&(l=l%LC+LC),l>SC?this._+="A"+s+","+s+",0,1,"+c+","+(t-h)+","+(i-a)+"A"+s+","+s+",0,1,"+c+","+(this._x1=o)+","+(this._y1=u):l>1e-6&&(this._+="A"+s+","+s+",0,"+ +(l>=WC)+","+c+","+(this._x1=t+s*Math.cos(r))+","+(this._y1=i+s*Math.sin(r))))},rect:function(t,i,s,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +s+"v"+ +n+"h"+-s+"Z"},toString:function(){return this._}},$C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}};var zC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),_C=new Uint8Array(16);function HC(){if(!zC)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return zC(_C)}for(var PC=[],qC=0;qC<256;++qC)PC[qC]=(qC+256).toString(16).substr(1);function RC(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||HC)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[PC[t[i++]],PC[t[i++]],PC[t[i++]],PC[t[i++]],"-",PC[t[i++]],PC[t[i++]],"-",PC[t[i++]],PC[t[i++]],"-",PC[t[i++]],PC[t[i++]],"-",PC[t[i++]],PC[t[i++]],PC[t[i++]],PC[t[i++]],PC[t[i++]],PC[t[i++]]].join("")}(r)}var XC={value:function(){}};function FC(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new jC(n)}function jC(t){this._=t}function GC(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function VC(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function YC(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=XC,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}jC.prototype=FC.prototype={constructor:jC,on:function(t,i){var s,n=this._,r=GC(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=YC(n[s],t.name,i);else if(null==i)for(s in n)n[s]=YC(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=VC(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new jC(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var KC,BC,UC=0,ZC=0,JC=0,QC=0,tO=0,iO=0,sO="object"==typeof performance&&performance.now?performance:Date,nO="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function rO(){return tO||(nO(eO),tO=sO.now()+iO)}function eO(){tO=0}function hO(){this._call=this._time=this._next=null}function aO(t,i,s){var n=new hO;return n.restart(t,i,s),n}function oO(){tO=(QC=sO.now())+iO,UC=ZC=0;try{!function(){rO(),++UC;for(var t,i=KC;i;)(t=tO-i._time)>=0&&i._call.call(null,t),i=i._next;--UC}()}finally{UC=0,function(){for(var t,i,s=KC,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:KC=i);BC=t,cO(n)}(),tO=0}}function uO(){var t=sO.now(),i=t-QC;i>1e3&&(iO-=i,QC=t)}function cO(t){UC||(ZC&&(ZC=clearTimeout(ZC)),t-tO>24?(t<1/0&&(ZC=setTimeout(oO,t-sO.now()-iO)),JC&&(JC=clearInterval(JC))):(JC||(QC=sO.now(),JC=setInterval(uO,1e3)),UC=1,nO(oO)))}function lO(t,i,s){var n=new hO;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}hO.prototype=aO.prototype={constructor:hO,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?rO():+s)+(null==i?0:+i),this._next||BC===this||(BC?BC._next=this:KC=this,BC=this),this._call=t,this._time=s,cO()},stop:function(){this._call&&(this._call=null,this._time=1/0,cO())}};var fO=FC("start","end","interrupt"),dO=[];function vO(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return lO(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(lO((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=aO((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:fO,tween:dO,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function pO(t,i){var s=wO(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function yO(t,i){var s=wO(t,i);if(s.state>2)throw new Error("too late; already started");return s}function wO(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function mO(t,i){var s,n;return function(){var r=yO(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function gO(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=yO(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function bO(t,i,s){var n=t._id;return t.each((function(){var t=yO(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return wO(t,n).value[i]}}function MO(t,i){var s;return("number"==typeof i?H$:i instanceof g$?O$:(s=g$(i))?(i=s,O$):X$)(t,i)}function kO(t){return function(){this.removeAttribute(t)}}function xO(t){return function(){this.removeAttributeNS(t.space,t.local)}}function AO(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function NO(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function WO(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function LO(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function SO(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function TO(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function EO(t,i){return function(){pO(this,t).delay=+i.apply(this,arguments)}}function DO(t,i){return i=+i,function(){pO(this,t).delay=i}}function $O(t,i){return function(){yO(this,t).duration=+i.apply(this,arguments)}}function CO(t,i){return i=+i,function(){yO(this,t).duration=i}}function OO(t,i){if("function"!=typeof i)throw new Error;return function(){yO(this,t).ease=i}}function IO(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?pO:yO;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var zO=HD.prototype.constructor;function _O(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var HO=0;function PO(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function qO(){return++HO}var RO=HD.prototype;PO.prototype=function(t){return HD().transition(t)}.prototype={constructor:PO,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=_E(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,vO(l[f],i,s,f,l,wO(a,s)));return new PO(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=PE(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=wO(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&vO(f,i,s,p,d,v);e.push(d),h.push(o)}return new PO(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=qE(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new PO(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new PO(e,this._parents,this._name,this._id)},selection:function(){return new zO(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=qO(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=wO(h,i);vO(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new PO(n,this._parents,t,s)},call:RO.call,nodes:RO.nodes,node:RO.node,size:RO.size,empty:RO.empty,each:RO.each,on:function(t,i){var s=this._id;return arguments.length<2?wO(this.node(),s).on.on(t):this.each(IO(s,t,i))},attr:function(t,i){var s=$E(t),n="transform"===s?tC:MO;return this.attrTween(t,"function"==typeof i?(s.local?LO:WO)(s,n,bO(this,"attr."+t,i)):null==i?(s.local?xO:kO)(s):(s.local?NO:AO)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=$E(t);return this.tween(s,(n.local?SO:TO)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?Q$:MO;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=sD(this,t),h=(this.style.removeProperty(t),sD(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=sD(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=sD(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,bO(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=sD(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,_O(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(bO(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=wO(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?mO:gO)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?EO:DO)(i,t)):wO(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?$O:CO)(i,t)):wO(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(OO(i,t)):wO(this.node(),i).ease}};var XO={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function FO(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return XO.time=rO(),XO;return s}HD.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},HD.prototype.transition=function(t){var i,s;t instanceof PO?(i=t._id,t=t._name):(i=qO(),(s=XO).time=rO(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&vO(h,t,i,u,a,s||FO(h,i));return new PO(n,this._parents,t,i)};const{initTooltipStyle:jO,drawAxis:GO,drawGrid:VO,drawTooltip:YO,formatStats:KO,getLicenses:BO,checkInteraction:UO,checkClicked:ZO,checkHovered:JO,interactionStyle:QO,getColors:tI,outlineColor:iI,visaColors:sI}=r,nI=class{constructor(s){t(this,s),this.height=400,this.width=800,this.showDataLabel=!0,this.ordinalAccessor="label",this.valueAccessor="value",this.showTooltip=!0,this.dataLabel={visible:!0,placement:"top",content:"valueAccessor",format:"0,0.00"},this.referenceLines=[],this.layout="vertical",this.xAxis={visible:!0,gridVisible:!0,tickInterval:1},this.yAxis={visible:!0,gridVisible:!0,tickInterval:1},this.wrapLabel=!1,this.colorPalette="single_blue",this.hoverOpacity=1,this.cursor="default",this.sortOrder="",this.roundedCorner=0,this.margin={top:.01*this.height,bottom:.01*this.height,right:.01*this.width,left:.01*this.width},this.padding={top:20,bottom:60,right:80,left:80},this.hideDataTable=!1,this.paretoStroke="#767676",this.paretoHighlight="#15195A",this.paretoDot=3,this.clickHighlight=[],this.shouldUpdateChart=!1,this.shouldUpdateBarStyle=!1,this.placeDataLabels=(t,i)=>{let s,n,r,e,h="0em";return"vertical"===this.layout?"top"===(this.dataLabel.placement||"top")?(s=this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2,n=this.y(Math.max(0,t[this.valueAccessor])),r="-.3em",e="middle"):"bottom"===(this.dataLabel.placement||"top")&&(s=this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2,n=this.y(0)-5,r="-.2em",e="middle"):"horizontal"===this.layout&&("top"===(this.dataLabel.placement||"top")?(n=this.y(t[this.ordinalAccessor])+this.y.bandwidth()/2+4,s=this.x(t[this.valueAccessor])+4,r=".2em",e="start"):"bottom"===(this.dataLabel.placement||"top")?(n=this.y(t[this.ordinalAccessor])+this.y.bandwidth()/2+4,s=this.x(0),r=".2em",e="start"):"bottomAbove"===(this.dataLabel.placement||"top")?(n=this.y(t[this.ordinalAccessor]),s=this.x(0),r=".2em",h="-.2em",e="start"):"bottomBelow"===(this.dataLabel.placement||"top")&&(n=this.y(t[this.ordinalAccessor])+this.y.bandwidth(),s=this.x(0),r=".2em",h="1em",e="start")),"x"===i?s:"y"===i?n:"em"===i?r:"em2"===i?h:"anchor"===i?e:null},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}idWatcher(t,i){this.chartID=t,this.barChartEl.id=this.chartID}dataWatcher(t,i){this.shouldUpdateChart=!0}highlightWatcher(t,i){this.shouldUpdateBarStyle=!0}componentWillLoad(){this.chartID=this.uniqueID||"bar-chart-"+RC(),this.barChartEl.id=this.chartID,this.updateChartVariable()}componentDidLoad(){this.updateData(),this.drawChart(),this.setTooltipInitialStyle()}componentWillUpdate(){this.updateChartVariable()}componentDidUpdate(){"asc"===this.sortOrder?this.data.sort((t,i)=>Number(t[this.valueAccessor])-Number(i[this.valueAccessor])):"desc"===this.sortOrder&&this.data.sort((t,i)=>Number(i[this.valueAccessor])-Number(t[this.valueAccessor])),this.shouldUpdateBarStyle?(this.shouldUpdateBarStyle=!1,this.updateBarSytle(this.bars)):(this.shouldUpdateChart=!1,this.updateData(),this.drawChart())}updateData(){var t=0;this.data.map((i,s)=>{i[this.valueAccessor]=parseFloat(i[this.valueAccessor]),i[this.valueAccessor]=+i[this.valueAccessor],t+=i[this.valueAccessor],i.CumulativeAmount=0===s?i[this.valueAccessor]:i[this.valueAccessor]+this.data[s-1].CumulativeAmount}),this.data.map(i=>{i.CumulativePercentage=i.CumulativeAmount/t})}updateChartVariable(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!("vertical"===this.layout)&&this.xAxis.gridVisible}),this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:"vertical"===this.layout&&this.yAxis.gridVisible}),this.innerXAxis.visible||(this.padding.bottom=.05*this.height),this.innerYAxis.visible||(this.padding.left=.05*this.width),!this.interactionKeys&&(this.interactionKeys=[this.groupAccessor||this.ordinalAccessor]),this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}updateBarSytle(t){t.attr("fill",t=>this.clickHighlight.length>0&&ZO(t,this.clickHighlight,this.interactionKeys)&&this.clickStyle.color?sI[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&JO(t,this.hoverHighlight,this.interactionKeys)&&this.hoverStyle.color?sI[this.hoverStyle.color]||this.hoverStyle.color:this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])).attr("style",t=>QO({data:t,clickHighlight:this.clickHighlight,hoverHighlight:this.hoverHighlight,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,interactionKeys:this.interactionKeys,defaultStroke:iI(this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])),defaultStrokeWidth:3})).attr("opacity",t=>UO(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.interactionKeys))}drawChart(){if(this.reSetRoot(),"vertical"===this.layout){if(this.y=NC().domain([0,this.maxValueOverride||YD(this.data,t=>t[this.valueAccessor])]).range([this.innerPaddedHeight,0]),1==this.yAxis.gridVisible){var t=Math.ceil(10*YD(this.data,t=>t[this.valueAccessor]))/10;this.y=NC().domain([0,t]).range([this.innerPaddedHeight,0])}this.x=s$().domain(this.data.map(t=>t[this.ordinalAccessor])).range([0,this.innerPaddedWidth]).padding(.2),this.yCum=NC().domain([0,1]).range([this.innerPaddedHeight,0])}else"horizontal"===this.layout&&(this.x=NC().domain([0,this.maxValueOverride||YD(this.data,t=>t[this.valueAccessor])]).range([0,this.innerPaddedWidth]),this.y=s$().domain(this.data.map(t=>t[this.ordinalAccessor])).range([this.innerPaddedHeight,0]).padding(.2));this.line=function(){var t=OC,i=IC,s=DC(!0),n=null,r=CC,e=null;function h(h){var a,o,u,c=h.length,l=!1;for(null==n&&(e=r(u=EC())),a=0;a<=c;++a)!(a<c&&s(o=h[a],a,h))===l&&((l=!l)?e.lineStart():e.lineEnd()),l&&e.point(+t(o,a,h),+i(o,a,h));if(u)return e=null,u+""||null}return h.x=function(i){return arguments.length?(t="function"==typeof i?i:DC(+i),h):t},h.y=function(t){return arguments.length?(i="function"==typeof t?t:DC(+t),h):i},h.defined=function(t){return arguments.length?(s="function"==typeof t?t:DC(!!t),h):s},h.curve=function(t){return arguments.length?(r=t,null!=n&&(e=r(n)),h):r},h.context=function(t){return arguments.length?(null==t?n=e=null:e=r(n=t),h):n},h}().x(t=>this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2).y(t=>this.yCum(t.CumulativePercentage));const i=function(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e]))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e]))&&n>s&&(n=s);return n}(this.data,t=>t[this.valueAccessor]),s=YD(this.data,t=>t[this.valueAccessor]);this.colorArr=tI(this.colors||this.colorPalette,this.groupAccessor?i$().domain(this.data.map(t=>t[this.groupAccessor])).domain():[i,s]),this.hoverStyle=this.hoverStyle?this.hoverStyle:this.colorPalette.includes("single")?{color:"comp_blue",strokeWidth:3}:{strokeWidth:3},this.clickStyle=this.clickStyle?this.clickStyle:this.colorPalette.includes("single")?{color:"supp_purple",strokeWidth:3}:{strokeWidth:3},this.drawGrid(),this.drawAxis(),this.drawBars(),this.line&&this.drawLine(),this.drawDataLabels(),this.drawReferenceLines()}reSetRoot(){this.svg&&this.svg.remove(),this.svg=PD(this.barChartEl).select("#visa-viz-d3-pareto-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),this.tooltipG=PD(this.barChartEl).select(".pareto-tooltip")}drawAxis(){GO({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel&&"vertical"===this.layout?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible}),GO({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible}),GO({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.yCum,right:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.formatCum||"0.0%",hide:!this.innerYAxis.visible})}formatDataLabel(t){return"ordinalAccessor"===this.dataLabel.content?t[this.ordinalAccessor]:this.dataLabel.format?KO(t[this.valueAccessor],this.dataLabel.format):t[this.valueAccessor]}drawDataLabels(){this.dataLabel.visible&&(this.rootG.selectAll("text.dataLabel").remove(),this.rootG.append("g").attr("class","bar-dataLabel-group").attr("id","bar-dataLabel-group").selectAll(".text").data(this.data).enter().append("text").attr("x",t=>this.placeDataLabels(t,"x")).attr("y",t=>this.placeDataLabels(t,"y")).attr("vertical"===this.layout?"dy":"dx",t=>this.placeDataLabels(t,"em")).attr("vertical"===this.layout?"dx":"dy",t=>this.placeDataLabels(t,"em2")).attr("text-anchor",t=>this.placeDataLabels(t,"anchor")).attr("class","bar-dataLabel-"+this.layout).text(t=>this.formatDataLabel(t)).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler()))}drawGrid(){VO(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!this.innerXAxis.gridVisible,this.xAxis.tickInterval),VO(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.innerYAxis.gridVisible,this.yAxis.tickInterval)}drawBars(){"vertical"===this.layout?this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class","bar").attr("tabindex",(t,i)=>0===i?"0":"-1").attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",t=>this.x(t[this.ordinalAccessor])).attr("y",t=>this.y(Math.max(0,t[this.valueAccessor]))).attr("height",t=>Math.abs(this.y(0)-this.y(t[this.valueAccessor]))).attr("width",this.x.bandwidth()).attr("cursor",this.cursor).attr("fill",t=>this.clickHighlight.length>0&&ZO(t,this.clickHighlight,this.interactionKeys)&&this.clickStyle.color?sI[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&JO(t,this.hoverHighlight,this.interactionKeys)&&this.hoverStyle.color?sI[this.hoverStyle.color]||this.hoverStyle.color:this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])).attr("style",t=>QO({data:t,clickHighlight:this.clickHighlight,hoverHighlight:this.hoverHighlight,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,interactionKeys:this.interactionKeys,defaultStroke:iI(this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])),defaultStrokeWidth:3})).attr("opacity",t=>UO(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.interactionKeys)).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler()):"horizontal"===this.layout&&(this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class",t=>this.clickHighlight.includes(t[this.ordinalAccessor])?"bar highlight":"bar").attr("tabindex",(t,i)=>0===i?"0":"-1").attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",t=>this.x(Math.min(0,t[this.valueAccessor]))).attr("y",t=>this.y(t[this.ordinalAccessor])).attr("height",this.y.bandwidth()).attr("width",t=>Math.abs(this.x(t[this.valueAccessor])-this.x(0))).attr("cursor",this.cursor).attr("fill",t=>this.clickHighlight.length>0&&ZO(t,this.clickHighlight,this.interactionKeys)&&this.clickStyle.color?sI[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&JO(t,this.hoverHighlight,this.interactionKeys)&&this.hoverStyle.color?sI[this.hoverStyle.color]||this.hoverStyle.color:this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])).attr("style",t=>QO({data:t,clickHighlight:this.clickHighlight,hoverHighlight:this.hoverHighlight,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,interactionKeys:this.interactionKeys,defaultStroke:iI(this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])),defaultStrokeWidth:3})).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler()))}drawLine(){let t,i=!1;for(let n=0;n<this.data.length;n++)!i&&this.data[n].CumulativePercentage>this.paretoThreshold&&(t=n,i=!0);const s=this.rootG.append("g").attr("class","pareto-line");s.append("path").datum(this.data).attr("d",this.line).attr("class","pareto-line-path").attr("x",this.x.bandwidth()/2).attr("fill","none").attr("stroke",this.paretoStroke).attr("stroke-width",1),s.selectAll(".pareto-background-dot").data([this.data[t]]).enter().append("circle").attr("class","pareto-background-dot").attr("fill","#fff").attr("stroke",this.paretoHighlight).attr("stroke-width","1px").attr("r",this.paretoDot+6).attr("cx",t=>this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2).attr("cy",t=>this.yCum(t.CumulativePercentage)),s.selectAll(".pareto-dot").data(this.data).enter().append("circle").attr("class","pareto-dot").attr("fill",(i,s)=>s===t?this.paretoHighlight:this.paretoStroke).attr("r",(i,s)=>t===s?this.paretoDot+3:this.paretoDot).attr("cx",t=>this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2).attr("cy",t=>this.yCum(t.CumulativePercentage)),s.selectAll("text").data(this.data).enter().append("text").attr("x",t=>this.placeDataLabels(t,"x")).attr("y",t=>this.yCum(t.CumulativePercentage)).attr("dy","-1em").attr("text-anchor","middle").attr("class","pareto-label").attr("fill",this.paretoHighlight).text((i,s)=>t===s?KO(i.CumulativePercentage,"0.0%"):"")}drawReferenceLines(){this.referenceLines.length>0&&("vertical"===this.layout?(this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",t=>t.referenceID).attr("class","bar-reference-line").attr("x1",0).attr("x2",this.innerPaddedWidth).attr("y1",t=>this.y(t.referenceData.referenceValue)).attr("y2",t=>this.y(t.referenceData.referenceValue)).style("stroke",t=>t.referenceData.strokeColor).style("stroke-width",t=>t.referenceData.strokeWidth).style("opacity",t=>t.referenceData.strokeOpacity),this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",t=>t.referenceID+"-label").attr("class","bar-reference-line-label").attr("text-anchor",t=>"right"===(t.referenceData.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.referenceData.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("dx",t=>"right"===(t.referenceData.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("y",t=>this.y(t.referenceData.referenceValue)).attr("dy","0.3em").text(t=>t.referenceData.labelValue).style("fill",t=>t.referenceData.strokeColor)):"horizontal"===this.layout&&(this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",t=>t.referenceID).attr("class","bar-reference-line").attr("y1",0).attr("y2",this.innerPaddedHeight).attr("x1",t=>this.x(t.referenceData.referenceValue)).attr("x2",t=>this.x(t.referenceData.referenceValue)).style("stroke",t=>t.referenceData.strokeColor).style("stroke-width",t=>t.referenceData.strokeWidth).style("opacity",t=>t.referenceData.strokeOpacity),this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",t=>t.referenceID+"-label").attr("class","bar-reference-line-label").attr("text-anchor","middle").attr("x",t=>this.x(t.referenceData.referenceValue)).attr("y",t=>"top"===(t.referenceData.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dy",t=>"top"===(t.referenceData.labelPlacementVertical||"top")?"-0.3em":"1em").text(t=>t.referenceData.labelValue).style("fill",t=>t.referenceData.strokeColor)),this.rootG.exit().remove())}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){this.hoverFunc.emit(t),this.showTooltip&&this.eventsTooltip({data:t,evt:LD,isToShow:!0})}onMouseOutHandler(){this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){jO(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){YO({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:void 0,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})}render(){return s("div",{class:`o-layout is--${this.layout} light`},s("div",{class:"o-layout--chart"},s("h1",{class:"visa-ui-header--4"},this.mainTitle),s("p",{class:"visa-ui-text--instructions"},this.subTitle),s("div",{class:"pareto-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("div",{id:"visa-viz-d3-pareto-container"})))}get barChartEl(){return n(this)}static get watchers(){return{uniqueID:["idWatcher"],data:["dataWatcher"],hoverHighlight:["highlightWatcher"],clickHighlight:["highlightWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}pareto-chart .axis{font-size:12px}pareto-chart .axis text{font:0.65rem;fill:#767676}pareto-chart .axis-label{text-anchor:middle;font:1rem sans-serif}pareto-chart .axis path{stroke:#767676}pareto-chart .patero-line path{stroke:#767676}pareto-chart .patero-line .patero-highlight{fill:black}pareto-chart .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}pareto-chart .grid path{stroke-width:0;stroke:#767676}pareto-chart .y.axis path{stroke:#767676;opacity:0}pareto-chart .x.axis path{stroke:#767676}pareto-chart .o-layout--chart .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}pareto-chart .o-layout--chart .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"}};window.VisaChartsLibOSSLicenses=BO();var rI="http://www.w3.org/1999/xhtml";const eI={svg:"http://www.w3.org/2000/svg",xhtml:rI,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hI(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),eI.hasOwnProperty(i)?{space:eI[i],local:t}:t}function aI(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===rI&&i.documentElement.namespaceURI===rI?i.createElement(t):i.createElementNS(s,t)}}function oI(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function uI(t){var i=hI(t);return(i.local?oI:aI)(i)}function cI(){}function lI(t){return null==t?cI:function(){return this.querySelector(t)}}function fI(){return[]}function dI(t){return null==t?fI:function(){return this.querySelectorAll(t)}}function vI(t){return function(){return this.matches(t)}}function pI(t){return new Array(t.length)}function yI(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function wI(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new yI(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function mI(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new yI(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function gI(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function bI(t){return function(){this.removeAttribute(t)}}function MI(t){return function(){this.removeAttributeNS(t.space,t.local)}}function kI(t,i){return function(){this.setAttribute(t,i)}}function xI(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function AI(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function NI(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function WI(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function LI(t){return function(){this.style.removeProperty(t)}}function SI(t,i,s){return function(){this.style.setProperty(t,i,s)}}function TI(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function EI(t,i){return t.style.getPropertyValue(i)||WI(t).getComputedStyle(t,null).getPropertyValue(i)}function DI(t){return function(){delete this[t]}}function $I(t,i){return function(){this[t]=i}}function CI(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function OI(t){return t.trim().split(/^|\s+/)}function II(t){return t.classList||new zI(t)}function zI(t){this._node=t,this._names=OI(t.getAttribute("class")||"")}function _I(t,i){for(var s=II(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function HI(t,i){for(var s=II(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function PI(t){return function(){_I(this,t)}}function qI(t){return function(){HI(this,t)}}function RI(t,i){return function(){(i.apply(this,arguments)?_I:HI)(this,t)}}function XI(){this.textContent=""}function FI(t){return function(){this.textContent=t}}function jI(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function GI(){this.innerHTML=""}function VI(t){return function(){this.innerHTML=t}}function YI(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function KI(){this.nextSibling&&this.parentNode.appendChild(this)}function BI(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function UI(){return null}function ZI(){var t=this.parentNode;t&&t.removeChild(this)}function JI(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function QI(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}yI.prototype={constructor:yI,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},zI.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var tz={},iz=null;function sz(t,i,s){return t=nz(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function nz(t,i,s){return function(n){var r=iz;iz=n;try{t.call(this,this.__data__,i,s)}finally{iz=r}}}function rz(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function ez(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function hz(t,i,s){var n=tz.hasOwnProperty(t.type)?sz:nz;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function az(t,i,s){var n=WI(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function oz(t,i){return function(){return az(this,t,i)}}function uz(t,i){return function(){return az(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(tz={mouseenter:"mouseover",mouseleave:"mouseout"}));var cz=[null];function lz(t,i){this._groups=t,this._parents=i}function fz(){return new lz([[document.documentElement]],cz)}function dz(t){return"string"==typeof t?new lz([[document.querySelector(t)]],[document.documentElement]):new lz([[t]],cz)}function vz(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function pz(t){return 1===t.length&&(t=function(t){return function(i,s){return vz(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}lz.prototype=fz.prototype={constructor:lz,select:function(t){"function"!=typeof t&&(t=lI(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new lz(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=dI(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new lz(n,r)},filter:function(t){"function"!=typeof t&&(t=vI(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new lz(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?mI:wI,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,m,g=0,b=0;g<v;++g)if(w=p[g]){for(g>=b&&(b=g+1);!(m=y[b])&&++b<v;);w._next=m||null}}return(h=new lz(h,n))._enter=a,h._exit=o,h},enter:function(){return new lz(this._enter||this._groups.map(pI),this._parents)},exit:function(){return new lz(this._exit||this._groups.map(pI),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new lz(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=gI);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new lz(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=hI(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?MI:bI:"function"==typeof i?s.local?NI:AI:s.local?xI:kI)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?LI:"function"==typeof i?TI:SI)(t,i,null==s?"":s)):EI(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?DI:"function"==typeof i?CI:$I)(t,i)):this.node()[t]},classed:function(t,i){var s=OI(t+"");if(arguments.length<2){for(var n=II(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?RI:i?PI:qI)(s,i))},text:function(t){return arguments.length?this.each(null==t?XI:("function"==typeof t?jI:FI)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?GI:("function"==typeof t?YI:VI)(t)):this.node().innerHTML},raise:function(){return this.each(KI)},lower:function(){return this.each(BI)},append:function(t){var i="function"==typeof t?t:uI(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:uI(t),n=null==i?UI:"function"==typeof i?i:lI(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(ZI)},clone:function(t){return this.select(t?QI:JI)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=rz(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?hz:ez,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?uz:oz)(t,i))}};var yz=pz(vz).right;function wz(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var mz=Math.sqrt(50),gz=Math.sqrt(10),bz=Math.sqrt(2);function Mz(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=mz?10:e>=gz?5:e>=bz?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=mz?10:e>=gz?5:e>=bz?2:1)}function kz(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=mz?r*=10:e>=gz?r*=5:e>=bz&&(r*=2),i<t?-r:r}function xz(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function Az(){}function Nz(t,i){var s=new Az;if(t instanceof Az)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}function Wz(){return{}}function Lz(t,i,s){t[i]=s}function Sz(){return Nz()}function Tz(t,i,s){t.set(i,s)}Az.prototype=Nz.prototype={constructor:Az,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var Ez=Array.prototype,Dz=Ez.map,$z=Ez.slice,Cz={name:"implicit"};function Oz(){var t=Nz(),i=[],s=[],n=Cz;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==Cz)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=Nz();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=$z.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return Oz(i,s).unknown(n)},xz.apply(r,arguments),r}function Iz(){var t,i,s=Oz().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=wz(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return Iz(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},xz.apply(c(),arguments)}function zz(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function _z(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function Hz(){}var Pz="\\s*([+-]?\\d+)\\s*",qz="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rz="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xz=/^#([0-9a-f]{3,8})$/,Fz=new RegExp("^rgb\\("+[Pz,Pz,Pz]+"\\)$"),jz=new RegExp("^rgb\\("+[Rz,Rz,Rz]+"\\)$"),Gz=new RegExp("^rgba\\("+[Pz,Pz,Pz,qz]+"\\)$"),Vz=new RegExp("^rgba\\("+[Rz,Rz,Rz,qz]+"\\)$"),Yz=new RegExp("^hsl\\("+[qz,Rz,Rz]+"\\)$"),Kz=new RegExp("^hsla\\("+[qz,Rz,Rz,qz]+"\\)$"),Bz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Uz(){return this.rgb().formatHex()}function Zz(){return this.rgb().formatRgb()}function Jz(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=Xz.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?Qz(i):3===s?new n_(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?t_(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?t_(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Fz.exec(t))?new n_(i[1],i[2],i[3],1):(i=jz.exec(t))?new n_(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=Gz.exec(t))?t_(i[1],i[2],i[3],i[4]):(i=Vz.exec(t))?t_(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Yz.exec(t))?a_(i[1],i[2]/100,i[3]/100,1):(i=Kz.exec(t))?a_(i[1],i[2]/100,i[3]/100,i[4]):Bz.hasOwnProperty(t)?Qz(Bz[t]):"transparent"===t?new n_(NaN,NaN,NaN,0):null}function Qz(t){return new n_(t>>16&255,t>>8&255,255&t,1)}function t_(t,i,s,n){return n<=0&&(t=i=s=NaN),new n_(t,i,s,n)}function i_(t){return t instanceof Hz||(t=Jz(t)),t?new n_((t=t.rgb()).r,t.g,t.b,t.opacity):new n_}function s_(t,i,s,n){return 1===arguments.length?i_(t):new n_(t,i,s,null==n?1:n)}function n_(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function r_(){return"#"+h_(this.r)+h_(this.g)+h_(this.b)}function e_(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function h_(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function a_(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new u_(t,i,s,n)}function o_(t){if(t instanceof u_)return new u_(t.h,t.s,t.l,t.opacity);if(t instanceof Hz||(t=Jz(t)),!t)return new u_;if(t instanceof u_)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new u_(h,a,o,t.opacity)}function u_(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function c_(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function l_(t){return function(){return t}}function f_(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):l_(isNaN(t)?i:t)}zz(Hz,Jz,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Uz,formatHex:Uz,formatHsl:function(){return o_(this).formatHsl()},formatRgb:Zz,toString:Zz}),zz(n_,s_,_z(Hz,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new n_(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new n_(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:r_,formatHex:r_,formatRgb:e_,toString:e_})),zz(u_,(function(t,i,s,n){return 1===arguments.length?o_(t):new u_(t,i,s,null==n?1:n)}),_z(Hz,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new u_(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new u_(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new n_(c_(t>=240?t-240:t+120,r,n),c_(t,r,n),c_(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const d_=function t(i){var s=function(t){return 1==(t=+t)?f_:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):l_(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=s_(t)).r,(i=s_(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=f_(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function v_(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function p_(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=k_(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function y_(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function w_(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function m_(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=k_(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var g_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b_=new RegExp(g_.source,"g");function M_(t,i){var s,n,r,e=g_.lastIndex=b_.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=g_.exec(t))&&(n=b_.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:w_(s,n)})),e=b_.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function k_(t,i){var s,n=typeof i;return null==i||"boolean"===n?l_(i):("number"===n?w_:"string"===n?(s=Jz(i))?(i=s,d_):M_:i instanceof Jz?d_:i instanceof Date?y_:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?v_:Array.isArray(i)?p_:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?m_:w_)(t,i)}function x_(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var A_,N_,W_,L_,S_=180/Math.PI,T_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function E_(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*S_,skewX:Math.atan(o)*S_,scaleX:h,scaleY:a}}function D_(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:w_(t,r)},{i:o-2,x:w_(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:w_(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:w_(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:w_(t,s)},{i:a-2,x:w_(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var $_=D_((function(t){return"none"===t?T_:(A_||(A_=document.createElement("DIV"),N_=document.documentElement,W_=document.defaultView),A_.style.transform=t,t=W_.getComputedStyle(N_.appendChild(A_),null).getPropertyValue("transform"),N_.removeChild(A_),E_(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),C_=D_((function(t){return null==t?T_:(L_||(L_=document.createElementNS("http://www.w3.org/2000/svg","g")),L_.setAttribute("transform",t),(t=L_.transform.baseVal.consolidate())?E_((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):T_)}),", ",")",")");function O_(t){return+t}var I_=[0,1];function z_(t){return t}function __(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function H_(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function P_(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=__(r,n),e=s(h,e)):(n=__(n,r),e=s(e,h)),function(t){return e(n(t))}}function q_(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=__(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=yz(t,i,1,n)-1;return e[s](r[s](i))}}function R_(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function X_(t,i){return function(){var t,i,s,n,r,e,h=I_,a=I_,o=k_,u=z_;function c(){return n=Math.min(h.length,a.length)>2?q_:P_,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),w_)))(s)))},l.domain=function(t){return arguments.length?(h=Dz.call(t,O_),u===z_||(u=H_(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=$z.call(t),c()):a.slice()},l.rangeRound=function(t){return a=$z.call(t),o=x_,c()},l.clamp=function(t){return arguments.length?(u=t?H_(h):z_,l):u!==z_},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function F_(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function j_(t){return(t=F_(Math.abs(t)))?t[1]:NaN}var G_,V_=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Y_(t){if(!(i=V_.exec(t)))throw new Error("invalid format: "+t);var i;return new K_({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function K_(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function B_(t,i){var s=F_(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}Y_.prototype=K_.prototype,K_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const U_={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return B_(100*t,i)},r:B_,s:function(t,i){var s=F_(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(G_=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+F_(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Z_(t){return t}var J_,Q_,tH,iH=Array.prototype.map,sH=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function nH(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=Mz(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=kz(t,i,s);switch((n=Y_(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(j_(i)/3)))-j_(Math.abs(t)))}(e,h))||(n.precision=r),tH(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,j_(i)-j_(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-j_(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return Q_(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=Mz(a,o,s))>0?n=Mz(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=Mz(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function rH(){var t=X_(z_,z_);return t.copy=function(){return R_(t,rH())},xz.apply(t,arguments),nH(t)}J_=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?Z_:(i=iH.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Z_:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(iH.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=Y_(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,m=t.type;"n"===m?(p=!0,m="g"):U_[m]||(void 0===y&&(y=12),w=!0,m="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var g="$"===f?r:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?e:/[%p]/.test(m)?o:"",M=U_[m],k=/[defgprs%]/.test(m);function x(t){var r,e,o,f=g,x=b;if("c"===m)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===m?sH[8+G_/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var N=f.length+t.length+x.length,W=N<v?new Array(v-N+1).join(i):"";switch(p&&d&&(t=n(W+t,W.length?v-x.length:1/0),W=""),s){case"<":t=f+t+x+W;break;case"=":t=f+W+t+x;break;case"^":t=W.slice(0,N=W.length>>1)+f+t+x+W.slice(N);break;default:t=W+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=Y_(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(j_(i)/3))),r=Math.pow(10,-n),e=sH[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Q_=J_.format,tH=J_.formatPrefix;var eH=new Date,hH=new Date;function aH(t,i,s,n){function r(i){return t(i=0===arguments.length?new Date:new Date(+i)),i}return r.floor=function(i){return t(i=new Date(+i)),i},r.ceil=function(s){return t(s=new Date(s-1)),i(s,1),t(s),s},r.round=function(t){var i=r(t),s=r.ceil(t);return t-i<s-t?i:s},r.offset=function(t,s){return i(t=new Date(+t),null==s?1:Math.floor(s)),t},r.range=function(s,n,e){var h,a=[];if(s=r.ceil(s),e=null==e?1:Math.floor(e),!(s<n&&e>0))return a;do{a.push(h=new Date(+s)),i(s,e),t(s)}while(h<s&&s<n);return a},r.filter=function(s){return aH((function(i){if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;i(t,-1),!s(t););else for(;--n>=0;)for(;i(t,1),!s(t););}))},s&&(r.count=function(i,n){return eH.setTime(+i),hH.setTime(+n),t(eH),t(hH),Math.floor(s(eH,hH))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(n?function(i){return n(i)%t==0}:function(i){return r.count(0,i)%t==0}):r:null}),r}var oH=aH((function(){}),(function(t,i){t.setTime(+t+i)}),(function(t,i){return i-t}));oH.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?aH((function(i){i.setTime(Math.floor(i/t)*t)}),(function(i,s){i.setTime(+i+s*t)}),(function(i,s){return(s-i)/t})):oH:null};var uH=aH((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,i){t.setTime(+t+1e3*i)}),(function(t,i){return(i-t)/1e3}),(function(t){return t.getUTCSeconds()})),cH=aH((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,i){t.setTime(+t+6e4*i)}),(function(t,i){return(i-t)/6e4}),(function(t){return t.getMinutes()})),lH=aH((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,i){t.setTime(+t+36e5*i)}),(function(t,i){return(i-t)/36e5}),(function(t){return t.getHours()})),fH=aH((function(t){t.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}));function dH(t){return aH((function(i){i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+7*i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var vH=dH(0),pH=dH(1),yH=(dH(2),dH(3),dH(4)),wH=(dH(5),dH(6),aH((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,i){t.setMonth(t.getMonth()+i)}),(function(t,i){return i.getMonth()-t.getMonth()+12*(i.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),mH=aH((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,i){t.setFullYear(t.getFullYear()+i)}),(function(t,i){return i.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));mH.every=function(t){return isFinite(t=Math.floor(t))&&t>0?aH((function(i){i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)}),(function(i,s){i.setFullYear(i.getFullYear()+s*t)})):null};var gH=aH((function(t){t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+i)}),(function(t,i){return(i-t)/864e5}),(function(t){return t.getUTCDate()-1}));function bH(t){return aH((function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-t)%7),i.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+7*i)}),(function(t,i){return(i-t)/6048e5}))}var MH=bH(0),kH=bH(1),xH=(bH(2),bH(3),bH(4)),AH=(bH(5),bH(6),aH((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i)}),(function(t,i){return i.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));function NH(t){if(0<=t.y&&t.y<100){var i=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return i.setFullYear(t.y),i}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function WH(t){if(0<=t.y&&t.y<100){var i=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return i.setUTCFullYear(t.y),i}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function LH(t,i,s){return{y:t,m:i,d:s,H:0,M:0,S:0,L:0}}AH.every=function(t){return isFinite(t=Math.floor(t))&&t>0?aH((function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/t)*t),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)}),(function(i,s){i.setUTCFullYear(i.getUTCFullYear()+s*t)})):null};var SH,TH,EH={"-":"",_:" ",0:"0"},DH=/^\s*\d+/,$H=/^%/,CH=/[\\^$*+?|[\]().{}]/g;function OH(t,i,s){var n=t<0?"-":"",r=(n?-t:t)+"",e=r.length;return n+(e<s?new Array(s-e+1).join(i)+r:r)}function IH(t){return t.replace(CH,"\\$&")}function zH(t){return new RegExp("^(?:"+t.map(IH).join("|")+")","i")}function _H(t){for(var i={},s=-1,n=t.length;++s<n;)i[t[s].toLowerCase()]=s;return i}function HH(t,i,s){var n=DH.exec(i.slice(s,s+1));return n?(t.w=+n[0],s+n[0].length):-1}function PH(t,i,s){var n=DH.exec(i.slice(s,s+1));return n?(t.u=+n[0],s+n[0].length):-1}function qH(t,i,s){var n=DH.exec(i.slice(s,s+2));return n?(t.U=+n[0],s+n[0].length):-1}function RH(t,i,s){var n=DH.exec(i.slice(s,s+2));return n?(t.V=+n[0],s+n[0].length):-1}function XH(t,i,s){var n=DH.exec(i.slice(s,s+2));return n?(t.W=+n[0],s+n[0].length):-1}function FH(t,i,s){var n=DH.exec(i.slice(s,s+4));return n?(t.y=+n[0],s+n[0].length):-1}function jH(t,i,s){var n=DH.exec(i.slice(s,s+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),s+n[0].length):-1}function GH(t,i,s){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(s,s+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),s+n[0].length):-1}function VH(t,i,s){var n=DH.exec(i.slice(s,s+1));return n?(t.q=3*n[0]-3,s+n[0].length):-1}function YH(t,i,s){var n=DH.exec(i.slice(s,s+2));return n?(t.m=n[0]-1,s+n[0].length):-1}function KH(t,i,s){var n=DH.exec(i.slice(s,s+2));return n?(t.d=+n[0],s+n[0].length):-1}function BH(t,i,s){var n=DH.exec(i.slice(s,s+3));return n?(t.m=0,t.d=+n[0],s+n[0].length):-1}function UH(t,i,s){var n=DH.exec(i.slice(s,s+2));return n?(t.H=+n[0],s+n[0].length):-1}function ZH(t,i,s){var n=DH.exec(i.slice(s,s+2));return n?(t.M=+n[0],s+n[0].length):-1}function JH(t,i,s){var n=DH.exec(i.slice(s,s+2));return n?(t.S=+n[0],s+n[0].length):-1}function QH(t,i,s){var n=DH.exec(i.slice(s,s+3));return n?(t.L=+n[0],s+n[0].length):-1}function tP(t,i,s){var n=DH.exec(i.slice(s,s+6));return n?(t.L=Math.floor(n[0]/1e3),s+n[0].length):-1}function iP(t,i,s){var n=$H.exec(i.slice(s,s+1));return n?s+n[0].length:-1}function sP(t,i,s){var n=DH.exec(i.slice(s));return n?(t.Q=+n[0],s+n[0].length):-1}function nP(t,i,s){var n=DH.exec(i.slice(s));return n?(t.s=+n[0],s+n[0].length):-1}function rP(t,i){return OH(t.getDate(),i,2)}function eP(t,i){return OH(t.getHours(),i,2)}function hP(t,i){return OH(t.getHours()%12||12,i,2)}function aP(t,i){return OH(1+fH.count(mH(t),t),i,3)}function oP(t,i){return OH(t.getMilliseconds(),i,3)}function uP(t,i){return oP(t,i)+"000"}function cP(t,i){return OH(t.getMonth()+1,i,2)}function lP(t,i){return OH(t.getMinutes(),i,2)}function fP(t,i){return OH(t.getSeconds(),i,2)}function dP(t){var i=t.getDay();return 0===i?7:i}function vP(t,i){return OH(vH.count(mH(t)-1,t),i,2)}function pP(t){var i=t.getDay();return i>=4||0===i?yH(t):yH.ceil(t)}function yP(t,i){return t=pP(t),OH(yH.count(mH(t),t)+(4===mH(t).getDay()),i,2)}function wP(t){return t.getDay()}function mP(t,i){return OH(pH.count(mH(t)-1,t),i,2)}function gP(t,i){return OH(t.getFullYear()%100,i,2)}function bP(t,i){return OH((t=pP(t)).getFullYear()%100,i,2)}function MP(t,i){return OH(t.getFullYear()%1e4,i,4)}function kP(t,i){var s=t.getDay();return OH((t=s>=4||0===s?yH(t):yH.ceil(t)).getFullYear()%1e4,i,4)}function xP(t){var i=t.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+OH(i/60|0,"0",2)+OH(i%60,"0",2)}function AP(t,i){return OH(t.getUTCDate(),i,2)}function NP(t,i){return OH(t.getUTCHours(),i,2)}function WP(t,i){return OH(t.getUTCHours()%12||12,i,2)}function LP(t,i){return OH(1+gH.count(AH(t),t),i,3)}function SP(t,i){return OH(t.getUTCMilliseconds(),i,3)}function TP(t,i){return SP(t,i)+"000"}function EP(t,i){return OH(t.getUTCMonth()+1,i,2)}function DP(t,i){return OH(t.getUTCMinutes(),i,2)}function $P(t,i){return OH(t.getUTCSeconds(),i,2)}function CP(t){var i=t.getUTCDay();return 0===i?7:i}function OP(t,i){return OH(MH.count(AH(t)-1,t),i,2)}function IP(t){var i=t.getUTCDay();return i>=4||0===i?xH(t):xH.ceil(t)}function zP(t,i){return t=IP(t),OH(xH.count(AH(t),t)+(4===AH(t).getUTCDay()),i,2)}function _P(t){return t.getUTCDay()}function HP(t,i){return OH(kH.count(AH(t)-1,t),i,2)}function PP(t,i){return OH(t.getUTCFullYear()%100,i,2)}function qP(t,i){return OH((t=IP(t)).getUTCFullYear()%100,i,2)}function RP(t,i){return OH(t.getUTCFullYear()%1e4,i,4)}function XP(t,i){var s=t.getUTCDay();return OH((t=s>=4||0===s?xH(t):xH.ceil(t)).getUTCFullYear()%1e4,i,4)}function FP(){return"+0000"}function jP(){return"%"}function GP(t){return+t}function VP(t){return Math.floor(+t/1e3)}function YP(t){return new Date(t)}function KP(t){return t instanceof Date?+t:+new Date(+t)}function BP(t,i,s,n,r,e,h,a,o){var u=X_(z_,z_),c=u.invert,l=u.domain,f=o(".%L"),d=o(":%S"),v=o("%I:%M"),p=o("%I %p"),y=o("%a %d"),w=o("%b %d"),m=o("%B"),g=o("%Y"),b=[[h,1,1e3],[h,5,5e3],[h,15,15e3],[h,30,3e4],[e,1,6e4],[e,5,3e5],[e,15,9e5],[e,30,18e5],[r,1,36e5],[r,3,108e5],[r,6,216e5],[r,12,432e5],[n,1,864e5],[n,2,1728e5],[s,1,6048e5],[i,1,2592e6],[i,3,7776e6],[t,1,31536e6]];function M(a){return(h(a)<a?f:e(a)<a?d:r(a)<a?v:n(a)<a?p:i(a)<a?s(a)<a?y:w:t(a)<a?m:g)(a)}function k(i,s,n,r){if(null==i&&(i=10),"number"==typeof i){var e=Math.abs(n-s)/i,h=pz((function(t){return t[2]})).right(b,e);h===b.length?(r=kz(s/31536e6,n/31536e6,i),i=t):h?(r=(h=b[e/b[h-1][2]<b[h][2]/e?h-1:h])[1],i=h[0]):(r=Math.max(kz(s,n,i),1),i=a)}return null==r?i:i.every(r)}return u.invert=function(t){return new Date(c(t))},u.domain=function(t){return arguments.length?l(Dz.call(t,KP)):l().map(YP)},u.ticks=function(t,i){var s,n=l(),r=n[0],e=n[n.length-1],h=e<r;return h&&(s=r,r=e,e=s),s=(s=k(t,r,e,i))?s.range(r,e+1):[],h?s.reverse():s},u.tickFormat=function(t,i){return null==i?M:o(i)},u.nice=function(t,i){var s=l();return(t=k(t,s[0],s[s.length-1],i))?l(function(t,i){var s,n=0,r=(t=t.slice()).length-1,e=t[n],h=t[r];return h<e&&(s=n,n=r,r=s,s=e,e=h,h=s),t[n]=i.floor(e),t[r]=i.ceil(h),t}(s,t)):u},u.copy=function(){return R_(u,BP(t,i,s,n,r,e,h,a,o))},u}function UP(t){return 1-Math.sqrt(1-t*t)}SH=function(t){var i=t.dateTime,s=t.date,n=t.time,r=t.periods,e=t.days,h=t.shortDays,a=t.months,o=t.shortMonths,u=zH(r),c=_H(r),l=zH(e),f=_H(e),d=zH(h),v=_H(h),p=zH(a),y=_H(a),w=zH(o),m=_H(o),g={a:function(t){return h[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return o[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:rP,e:rP,f:uP,g:bP,G:kP,H:eP,I:hP,j:aP,L:oP,m:cP,M:lP,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:GP,s:VP,S:fP,u:dP,U:vP,V:yP,w:wP,W:mP,x:null,X:null,y:gP,Y:MP,Z:xP,"%":jP},b={a:function(t){return h[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return o[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:AP,e:AP,f:TP,g:qP,G:XP,H:NP,I:WP,j:LP,L:SP,m:EP,M:DP,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:GP,s:VP,S:$P,u:CP,U:OP,V:zP,w:_P,W:HP,x:null,X:null,y:PP,Y:RP,Z:FP,"%":jP},M={a:function(t,i,s){var n=d.exec(i.slice(s));return n?(t.w=v[n[0].toLowerCase()],s+n[0].length):-1},A:function(t,i,s){var n=l.exec(i.slice(s));return n?(t.w=f[n[0].toLowerCase()],s+n[0].length):-1},b:function(t,i,s){var n=w.exec(i.slice(s));return n?(t.m=m[n[0].toLowerCase()],s+n[0].length):-1},B:function(t,i,s){var n=p.exec(i.slice(s));return n?(t.m=y[n[0].toLowerCase()],s+n[0].length):-1},c:function(t,s,n){return A(t,i,s,n)},d:KH,e:KH,f:tP,g:jH,G:FH,H:UH,I:UH,j:BH,L:QH,m:YH,M:ZH,p:function(t,i,s){var n=u.exec(i.slice(s));return n?(t.p=c[n[0].toLowerCase()],s+n[0].length):-1},q:VH,Q:sP,s:nP,S:JH,u:PH,U:qH,V:RH,w:HH,W:XH,x:function(t,i,n){return A(t,s,i,n)},X:function(t,i,s){return A(t,n,i,s)},y:jH,Y:FH,Z:GH,"%":iP};function k(t,i){return function(s){var n,r,e,h=[],a=-1,o=0,u=t.length;for(s instanceof Date||(s=new Date(+s));++a<u;)37===t.charCodeAt(a)&&(h.push(t.slice(o,a)),null!=(r=EH[n=t.charAt(++a)])?n=t.charAt(++a):r="e"===n?" ":"0",(e=i[n])&&(n=e(s,r)),h.push(n),o=a+1);return h.push(t.slice(o,a)),h.join("")}}function x(t,i){return function(s){var n,r,e=LH(1900,void 0,1);if(A(e,t,s+="",0)!=s.length)return null;if("Q"in e)return new Date(e.Q);if("s"in e)return new Date(1e3*e.s+("L"in e?e.L:0));if(!i||"Z"in e||(e.Z=0),"p"in e&&(e.H=e.H%12+12*e.p),void 0===e.m&&(e.m="q"in e?e.q:0),"V"in e){if(e.V<1||e.V>53)return null;"w"in e||(e.w=1),"Z"in e?(r=(n=WH(LH(e.y,0,1))).getUTCDay(),n=r>4||0===r?kH.ceil(n):kH(n),n=gH.offset(n,7*(e.V-1)),e.y=n.getUTCFullYear(),e.m=n.getUTCMonth(),e.d=n.getUTCDate()+(e.w+6)%7):(r=(n=NH(LH(e.y,0,1))).getDay(),n=r>4||0===r?pH.ceil(n):pH(n),n=fH.offset(n,7*(e.V-1)),e.y=n.getFullYear(),e.m=n.getMonth(),e.d=n.getDate()+(e.w+6)%7)}else("W"in e||"U"in e)&&("w"in e||(e.w="u"in e?e.u%7:"W"in e?1:0),r="Z"in e?WH(LH(e.y,0,1)).getUTCDay():NH(LH(e.y,0,1)).getDay(),e.m=0,e.d="W"in e?(e.w+6)%7+7*e.W-(r+5)%7:e.w+7*e.U-(r+6)%7);return"Z"in e?(e.H+=e.Z/100|0,e.M+=e.Z%100,WH(e)):NH(e)}}function A(t,i,s,n){for(var r,e,h=0,a=i.length,o=s.length;h<a;){if(n>=o)return-1;if(37===(r=i.charCodeAt(h++))){if(r=i.charAt(h++),!(e=M[r in EH?i.charAt(h++):r])||(n=e(t,s,n))<0)return-1}else if(r!=s.charCodeAt(n++))return-1}return n}return(g.x=k(s,g),g.X=k(n,g),g.c=k(i,g),b.x=k(s,b),b.X=k(n,b),b.c=k(i,b),{format:function(t){var i=k(t+="",g);return i.toString=function(){return t},i},parse:function(t){var i=x(t+="",!1);return i.toString=function(){return t},i},utcFormat:function(t){var i=k(t+="",b);return i.toString=function(){return t},i},utcParse:function(t){var i=x(t+="",!0);return i.toString=function(){return t},i}})}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),TH=SH.format;var ZP={value:function(){}};function JP(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new QP(n)}function QP(t){this._=t}function tq(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function iq(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function sq(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=ZP,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}QP.prototype=JP.prototype={constructor:QP,on:function(t,i){var s,n=this._,r=tq(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=sq(n[s],t.name,i);else if(null==i)for(s in n)n[s]=sq(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=iq(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new QP(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var nq,rq,eq=0,hq=0,aq=0,oq=0,uq=0,cq=0,lq="object"==typeof performance&&performance.now?performance:Date,fq="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function dq(){return uq||(fq(vq),uq=lq.now()+cq)}function vq(){uq=0}function pq(){this._call=this._time=this._next=null}function yq(t,i,s){var n=new pq;return n.restart(t,i,s),n}function wq(){uq=(oq=lq.now())+cq,eq=hq=0;try{!function(){dq(),++eq;for(var t,i=nq;i;)(t=uq-i._time)>=0&&i._call.call(null,t),i=i._next;--eq}()}finally{eq=0,function(){for(var t,i,s=nq,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:nq=i);rq=t,gq(n)}(),uq=0}}function mq(){var t=lq.now(),i=t-oq;i>1e3&&(cq-=i,oq=t)}function gq(t){eq||(hq&&(hq=clearTimeout(hq)),t-uq>24?(t<1/0&&(hq=setTimeout(wq,t-lq.now()-cq)),aq&&(aq=clearInterval(aq))):(aq||(oq=lq.now(),aq=setInterval(mq,1e3)),eq=1,fq(wq)))}function bq(t,i,s){var n=new pq;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}pq.prototype=yq.prototype={constructor:pq,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?dq():+s)+(null==i?0:+i),this._next||rq===this||(rq?rq._next=this:nq=this,rq=this),this._call=t,this._time=s,gq()},stop:function(){this._call&&(this._call=null,this._time=1/0,gq())}};var Mq=JP("start","end","interrupt"),kq=[];function xq(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return bq(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(bq((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=yq((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:Mq,tween:kq,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function Aq(t,i){var s=Wq(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function Nq(t,i){var s=Wq(t,i);if(s.state>2)throw new Error("too late; already started");return s}function Wq(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function Lq(t,i){var s,n;return function(){var r=Nq(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function Sq(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=Nq(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function Tq(t,i,s){var n=t._id;return t.each((function(){var t=Nq(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return Wq(t,n).value[i]}}function Eq(t,i){var s;return("number"==typeof i?w_:i instanceof Jz?d_:(s=Jz(i))?(i=s,d_):M_)(t,i)}function Dq(t){return function(){this.removeAttribute(t)}}function $q(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Cq(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function Oq(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function Iq(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function zq(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function _q(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function Hq(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function Pq(t,i){return function(){Aq(this,t).delay=+i.apply(this,arguments)}}function qq(t,i){return i=+i,function(){Aq(this,t).delay=i}}function Rq(t,i){return function(){Nq(this,t).duration=+i.apply(this,arguments)}}function Xq(t,i){return i=+i,function(){Nq(this,t).duration=i}}function Fq(t,i){if("function"!=typeof i)throw new Error;return function(){Nq(this,t).ease=i}}function jq(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?Aq:Nq;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var Gq=fz.prototype.constructor;function Vq(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var Yq=0;function Kq(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function Bq(){return++Yq}var Uq=fz.prototype;Kq.prototype=function(t){return fz().transition(t)}.prototype={constructor:Kq,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=lI(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,xq(l[f],i,s,f,l,Wq(a,s)));return new Kq(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=dI(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=Wq(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&xq(f,i,s,p,d,v);e.push(d),h.push(o)}return new Kq(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=vI(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new Kq(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new Kq(e,this._parents,this._name,this._id)},selection:function(){return new Gq(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=Bq(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=Wq(h,i);xq(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Kq(n,this._parents,t,s)},call:Uq.call,nodes:Uq.nodes,node:Uq.node,size:Uq.size,empty:Uq.empty,each:Uq.each,on:function(t,i){var s=this._id;return arguments.length<2?Wq(this.node(),s).on.on(t):this.each(jq(s,t,i))},attr:function(t,i){var s=hI(t),n="transform"===s?C_:Eq;return this.attrTween(t,"function"==typeof i?(s.local?zq:Iq)(s,n,Tq(this,"attr."+t,i)):null==i?(s.local?$q:Dq)(s):(s.local?Oq:Cq)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=hI(t);return this.tween(s,(n.local?_q:Hq)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?$_:Eq;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=EI(this,t),h=(this.style.removeProperty(t),EI(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=EI(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=EI(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,Tq(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=EI(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,Vq(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(Tq(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=Wq(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?Lq:Sq)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?Pq:qq)(i,t)):Wq(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?Rq:Xq)(i,t)):Wq(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(Fq(i,t)):Wq(this.node(),i).ease}};var Zq={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Jq(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return Zq.time=dq(),Zq;return s}fz.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},fz.prototype.transition=function(t){var i,s;t instanceof Kq?(i=t._id,t=t._name):(i=Bq(),(s=Zq).time=dq(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&xq(h,t,i,u,a,s||Jq(h,i));return new Kq(n,this._parents,t,i)};var Qq="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),tR=new Uint8Array(16);function iR(){if(!Qq)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return Qq(tR)}for(var sR=[],nR=0;nR<256;++nR)sR[nR]=(nR+256).toString(16).substr(1);function rR(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||iR)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[sR[t[i++]],sR[t[i++]],sR[t[i++]],sR[t[i++]],"-",sR[t[i++]],sR[t[i++]],"-",sR[t[i++]],sR[t[i++]],"-",sR[t[i++]],sR[t[i++]],"-",sR[t[i++]],sR[t[i++]],sR[t[i++]],sR[t[i++]],sR[t[i++]],sR[t[i++]]].join("")}(r)}const{propDefaultValues:eR}=r;class hR{}hR.mainTitle="Stacked Bar Chart Title",hR.subTitle="This is the stacked bar chart's subtitle",hR.height=280,hR.width=700,hR.margin={top:4,bottom:4,right:4,left:4},hR.padding={top:20,bottom:50,right:50,left:50},hR.normalized=!1,hR.showTotalValue=!0,hR.showZeroLabels=!1,hR.ordinalAccessor="label",hR.valueAccessor="value",hR.groupAccessor="item",hR.layout=eR.layout,hR.accessibility=eR.accessibility,hR.animationConfig=eR.animationConfig,hR.highestHeadingLevel=eR.highestHeadingLevel,hR.sortOrder=eR.sortOrder,hR.xAxis=eR.xAxis,hR.yAxis=eR.yAxis,hR.wrapLabel=eR.wrapLabel,hR.colorPalette=eR.colorPaletteCategorical,hR.hoverStyle=eR.hoverStyle,hR.clickStyle=eR.clickStyle,hR.referenceStyle=eR.referenceStyle,hR.cursor=eR.cursor,hR.roundedCorner=eR.roundedCorner,hR.barIntervalRatio=eR.barIntervalRatio,hR.hoverOpacity=eR.hoverOpacity,hR.dataLabel=eR.dataLabelMiddle,hR.legend=eR.categoryLegend,hR.tooltipLabel=eR.tooltipLabel,hR.showTooltip=eR.showTooltip,hR.suppressEvents=eR.suppressEvents,hR.referenceLines=eR.referenceLines,hR.annotations=eR.annotations,hR.clickHighlight=eR.clickHighlight;const{getBrowser:aR,verifyTextHasSpace:oR,checkAttributeTransitions:uR,createTextStrokeFilter:cR,drawHoverStrokes:lR,removeHoverStrokes:fR,buildStrokes:dR,convertColorsToTextures:vR,findTagLevel:pR,prepareRenderChange:yR,initializeDescriptionRoot:wR,initializeElementAccess:mR,setElementFocusHandler:gR,setElementAccessID:bR,setAccessibilityController:MR,hideNonessentialGroups:kR,setAccessTitle:xR,setAccessSubtitle:AR,setAccessLongDescription:NR,setAccessExecutiveSummary:WR,setAccessPurpose:LR,setAccessContext:SR,setAccessStatistics:TR,setAccessChartCounts:ER,setAccessXAxis:DR,setAccessYAxis:$R,setAccessStructure:CR,setAccessAnnotation:OR,retainAccessFocus:IR,checkAccessFocus:zR,setElementInteractionAccessState:_R,setAccessibilityDescriptionWidth:HR,autoTextColor:PR,annotate:qR,chartAccessors:RR,checkInteraction:XR,checkClicked:FR,checkHovered:jR,convertVisaColor:GR,drawAxis:VR,drawGrid:YR,drawLegend:KR,setLegendInteractionState:BR,drawTooltip:UR,formatStats:ZR,formatDate:JR,formatDataLabel:QR,getPadding:tX,getColors:iX,getLicenses:sX,getScopedData:nX,initTooltipStyle:rX,overrideTitleTooltip:eX,placeDataLabels:hX,transitionEndAll:aX,scopeDataKeys:oX,visaColors:uX,validateAccessibilityProps:cX,roundTo:lX,resolveLabelCollision:fX}=r,dX=class{constructor(s){t(this,s),this.mainTitle=hR.mainTitle,this.subTitle=hR.subTitle,this.height=hR.height,this.width=hR.width,this.layout=hR.layout,this.highestHeadingLevel=hR.highestHeadingLevel,this.margin=hR.margin,this.padding=hR.padding,this.ordinalAccessor=hR.ordinalAccessor,this.valueAccessor=hR.valueAccessor,this.groupAccessor=hR.groupAccessor,this.sortOrder=hR.sortOrder,this.xAxis=hR.xAxis,this.yAxis=hR.yAxis,this.wrapLabel=hR.wrapLabel,this.normalized=hR.normalized,this.colorPalette=hR.colorPalette,this.hoverStyle=hR.hoverStyle,this.clickStyle=hR.clickStyle,this.referenceStyle=hR.referenceStyle,this.cursor=hR.cursor,this.roundedCorner=hR.roundedCorner,this.barIntervalRatio=hR.barIntervalRatio,this.hoverOpacity=hR.hoverOpacity,this.animationConfig=hR.animationConfig,this.dataLabel=hR.dataLabel,this.showTotalValue=hR.showTotalValue,this.showTooltip=hR.showTooltip,this.tooltipLabel=hR.tooltipLabel,this.accessibility=hR.accessibility,this.legend=hR.legend,this.annotations=hR.annotations,this.showZeroLabels=hR.showZeroLabels,this.referenceLines=hR.referenceLines,this.suppressEvents=hR.suppressEvents,this.clickHighlight=hR.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.series=[],this.extent=[],this.datakeys=[],this.updated=!0,this.shouldValidateInteractionKeys=!1,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateTableData=!1,this.shouldSetColors=!1,this.shouldValidateAxes=!1,this.shouldValidateClickHighlight=!1,this.shouldUpdateScales=!1,this.shouldUpdateAnnotations=!1,this.shouldResetRoot=!1,this.shouldEnterUpdateExit=!1,this.shouldSetGlobalSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldUpdateGeometries=!1,this.shouldCheckValueAxis=!1,this.shouldCheckLabelAxis=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYGrid=!1,this.shouldUpdateBaseline=!1,this.shouldSetSelectionClass=!1,this.shouldUpdateCursor=!1,this.shouldUpdateCorners=!1,this.shouldUpdateLegendData=!1,this.shouldValidateLabelPlacement=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldUpdateLegend=!1,this.shouldUpdateLegendInteractivity=!1,this.shouldUpdateReferenceLines=!1,this.shouldDrawInteractionState=!1,this.shouldBindInteractivity=!1,this.shouldSetLabelOpacity=!1,this.shouldUpdateLabels=!1,this.shouldUpdateTotalLabels=!1,this.shouldCheckLabelColor=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetTextures=!1,this.shouldSetStrokes=!1,this.isSafari="Safari"===aR(),this.strokes={},this.textStrokes={},this.topLevel="h2",this.bottomLevel="p",this.textTreatmentHandler=(t,i,s)=>{const n=dz(s[i]),r=this.clickHighlight&&this.clickHighlight.length>0&&FR(t,this.clickHighlight,this.innerInteractionKeys)&&this.clickStyle.color?uX[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&jR(t,this.hoverHighlight,this.innerInteractionKeys)&&this.hoverStyle.color?uX[this.hoverStyle.color]||this.hoverStyle.color:this.preparedColors[i],e=PR(r);if(n.classed("textIsMoving"))n.attr("filter",null);else{const t=this.textStrokes[r];t!==n.attr("filter")&&(this.isSafari?(n.attr("filter",null),setTimeout(()=>{n.attr("filter",t)},0)):n.attr("filter",t))}return e},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldSetColors=!0,this.shouldSetTextures=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateScales=!0,this.shouldUpdateTableData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLegendData=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateLabels=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetStrokes=!0}idWatcher(t,i){this.chartID=t,this.stackedBarChartEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldSetTextures=!0,this.shouldCheckLabelColor=!0,this.shouldDrawInteractionState=!0,this.shouldSetStrokes=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetLabelOpacity=!0}layoutWatcher(t,i){this.interpolating=!1,this.shouldValidateLabelPlacement=!0,this.shouldUpdateScales=!0,this.shouldValidateAxes=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetLabelOpacity=!0}ordinalAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateLegendData=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.shouldCheckValueAxis=!0}valueAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateTableData=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.shouldSetGlobalSelections=!0,this.shouldCheckValueAxis=!0}groupAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateReferenceLines=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}sortWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldCheckLabelAxis=!0}xAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXAxis=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0)}yAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYAxis=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0)}wrapLabelWatcher(t,i){this.shouldCheckLabelAxis=!0}normalizedWatcher(t,i){this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateTableData=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0}paletteWatcher(t,i){this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetSelectionClass=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0}cornerWatcher(t,i){this.shouldUpdateCorners=!0}intervalRatioWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldSetLabelOpacity=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateAnnotations=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}labelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateTableData=!0;const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement,r=!(!t||!t.labelAccessor)&&t.labelAccessor,e=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),s!==n&&(this.shouldSetLabelOpacity=!0,this.shouldValidateLabelPlacement=!0,this.shouldCheckLabelColor=!0),r!==e&&(this.shouldValidateDataLabelAccessor=!0)}showTotalValueWatcher(t,i){this.shouldUpdateTotalLabels=!0,this.shouldUpdateTableData=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldSetGeometryAriaLabels=!0}showTooltipWatcher(t,i){this.shouldDrawInteractionState=!0}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideTextures)&&t.hideTextures)!==(!(!i||!i.hideTextures)&&i.hideTextures)&&(this.shouldSetTextures=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldSetStrokes=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}showZeroLabelsWatcher(t,i){this.shouldUpdateLabels=!0}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldUpdateLegendInteractivity=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}clickWatcher(t,i){this.shouldValidateClickHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldUpdateLegendInteractivity=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"stacked-bar-chart-"+rR(),this.stackedBarChartEl.id=this.chartID,this.setTagLevels(),this.prepareData(),this.prepareLegendData(),this.setDimensions(),this.prepareScales(),this.validateClickHighlight(),this.validateInteractionKeys(),this.validateDataLabelAccessor(),this.validateAxes(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTextures(),this.setStrokes(),this.drawXGrid(),this.drawYGrid(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.setRoundedCorners(),this.drawGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterTotalDataLabels(),this.updateTotalDataLabels(),this.exitTotalDataLabels(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.bindLegendInteractivity(),this.validateLabelPlacement(),this.drawDataLabels(),this.drawTotalDataLabels(),this.drawReferenceLines(),this.setSelectedClass(),this.checkLabelColorAgainstBackground(),this.updateCursor(),this.bindInteractivity(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),this.drawBaseline(),kR(this.root.node(),this.barG.node()),this.setGroupAccessibilityID(),this.onChangeHandler(),this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldSetTextures&&(this.setTextures(),this.shouldSetTextures=!1),this.shouldSetStrokes&&(this.setStrokes(),this.shouldSetStrokes=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldEnterUpdateExit&&(this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterTotalDataLabels(),this.updateTotalDataLabels(),this.exitTotalDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateCorners&&(this.setRoundedCorners(),this.shouldUpdateCorners=!1),this.shouldUpdateGeometries&&(this.drawGeometries(),this.shouldUpdateGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateTotalLabels&&(this.drawTotalDataLabels(),this.shouldUpdateTotalLabels=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldCheckLabelColor&&(this.checkLabelColorAgainstBackground(),this.shouldCheckLabelColor=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldUpdateLegendInteractivity=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateBaseline&&(this.drawBaseline(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,cX(this.chartID,this.accessibility,{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit,tooltipLabel:this.tooltipLabel,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor},misc:{normalized:this.normalized}}))}validateLabelPlacement(){"vertical"===this.layout?"top"!==this.dataLabel.placement&&"middle"!==this.dataLabel.placement&&"bottom"!==this.dataLabel.placement&&"auto"!==this.dataLabel.placement&&(this.dataLabel.placement="middle"):"end"!==this.dataLabel.placement&&"middle"!==this.dataLabel.placement&&"base"!==this.dataLabel.placement&&"auto"!==this.dataLabel.placement&&(this.dataLabel.placement="middle")}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateAxes(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!("vertical"===this.layout)&&this.xAxis.gridVisible}),this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:"vertical"===this.layout&&this.yAxis.gridVisible})}setDimensions(){this.padding="string"==typeof this.padding?tX(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}prepareData(){this.extent=[0,0];const t=[];this.data.forEach(i=>{const s=Object.keys(i),n={};s.forEach(t=>{n[t]=i[t]instanceof Date?new Date(i[t].getTime()):i[t]}),t.push(n)});const i=function(){var t,i,s,n=[],r=[];function e(s,r,h,a){if(r>=n.length)return null!=t&&s.sort(t),null!=i?i(s):s;for(var o,u,c,l=-1,f=s.length,d=n[r++],v=Nz(),p=h();++l<f;)(c=v.get(o=d(u=s[l])+""))?c.push(u):v.set(o,[u]);return v.each((function(t,i){a(p,i,e(t,r,h,a))})),p}return s={object:function(t){return e(t,0,Wz,Lz)},map:function(t){return e(t,0,Sz,Tz)},entries:function(t){return function t(s,e){if(++e>n.length)return s;var h,a=r[e-1];return null!=i&&e>=n.length?h=s.entries():(h=[],s.each((function(i,s){h.push({key:s,values:t(i,e)})}))),null!=a?h.sort((function(t,i){return a(t.key,i.key)})):h}(e(t,0,Sz,Tz),0)},key:function(t){return n.push(t),s},sortKeys:function(t){return r[n.length-1]=t,s},sortValues:function(i){return t=i,s},rollup:function(t){return i=t,s}}}().key(t=>(t[this.valueAccessor]=parseFloat(t[this.valueAccessor]),t[this.groupAccessor]=t[this.groupAccessor]instanceof Date?JR({date:t[this.groupAccessor],format:"vertical"===this.layout?this.xAxis.format:this.yAxis.format,offsetTimezone:!0}):t[this.groupAccessor],t[this.groupAccessor])).entries(t);this.interpolating=this.series.length?this.series:"",this.interpolating&&(this.interpolating.stackOrder=this.stackOrder);const s={},n=t=>{let i=0;const n=t.length,r=[];for(this.stackOrder={},i=0;i<n;i++){const n=Object.assign({},t[i]);let e=0,h=0,a=0;const o={positive:0,negative:0},u=t[i].values,c=u.length;n.values=[];let l=0;for(e=0;e<c;e++){const t=Object.assign({},u[e]),i=t[this.valueAccessor];i>=0?(t.stackEnd=o.positive,o.positive+=i,t.stackStart=o.positive):(t.stackStart=o.negative,o.negative+=i,t.stackEnd=o.negative);let r=this.stackOrder[t[this.groupAccessor]];if(r||(this.stackOrder[t[this.groupAccessor]]={},r=this.stackOrder[t[this.groupAccessor]]),r[t[this.ordinalAccessor]]||(r[t[this.ordinalAccessor]]={previous:l,value:i,stackStart:t.stackStart,stackEnd:t.stackEnd}),t.enteringStackStart=!1,this.interpolating&&this.interpolating.stackOrder[t[this.groupAccessor]]){const s=this.interpolating.stackOrder[t[this.groupAccessor]],n=t=>{if(0===t)return 0;if(s[t]){if(i>=0&&s[t].value>=0)return s[t].stackStart;if(i<0&&s[t].value<0)return s[t].stackEnd}return n(r[t].previous)};s[t[this.ordinalAccessor]]||(t.enteringStackStart=n(l))}l=t[this.ordinalAccessor],t.getSum=()=>n.sum,h+=i,i>0&&(a+=i),s[t[this.ordinalAccessor]]||(s[t[this.ordinalAccessor]]=1),n.values.push(t)}o.positive>this.extent[1]&&(this.extent[1]=o.positive),o.negative<this.extent[0]&&(this.extent[0]=o.negative),n.sum=h,n.sumMessage="Sum "+h,n.sumAboveZero=a,r.push(n)}return r};n(i),this.datakeys=Object.keys(s),this.series=n(i),"asc"===this.sortOrder?this.series=[...this.series].sort((t,i)=>t.sum-i.sum):"desc"===this.sortOrder&&(this.series=[...this.series].sort((t,i)=>i.sum-t.sum))}prepareLegendData(){this.legendData=this.series[0].values}validateClickHighlight(){this.clickHighlight.map(t=>{t[this.groupAccessor]=t[this.groupAccessor]instanceof Date?JR({date:t[this.groupAccessor],format:"vertical"===this.layout?this.xAxis.format:this.yAxis.format,offsetTimezone:!0}):t[this.groupAccessor]})}setTableData(){const t=[];this.series.forEach(i=>{i.values.forEach(i=>{t.push(i)})});const i=oX(this,RR,"stacked-bar-chart");this.tableData=nX(t,i),this.tableColumns=Object.keys(i)}setColors(){this.preparedColors=this.colors?GR(this.colors):iX(this.colorPalette,this.datakeys.length)}setTextures(){const t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6)this.colorArr=this.preparedColors;else{const i=vR({colors:t,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical",disableTransitions:!this.duration});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}}setStrokes(){const t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;this.strokes=dR({root:this.svg.node(),id:this.chartID,colors:t,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,stacked:!0}),this.textStrokes={},t.forEach(t=>{this.textStrokes[t]=cR({root:this.svg.node(),id:this.chartID,color:t})}),this.clickStyle&&this.clickStyle.color&&(this.textStrokes[this.clickStyle.color]=cR({root:this.svg.node(),id:this.chartID,color:this.clickStyle.color})),this.hoverStyle&&this.hoverStyle.color&&(this.textStrokes[this.hoverStyle.color]=cR({root:this.svg.node(),id:this.chartID,color:this.hoverStyle.color}))}prepareScales(){const t=this.normalized?[0,1]:[this.minValueOverride&&this.minValueOverride<this.extent[0]?this.minValueOverride:this.extent[0],this.maxValueOverride||this.extent[1]];this.interpolating&&(this.interpolating.oldXDomain=this.x.domain(),this.interpolating.oldXRange=this.x.range(),this.interpolating.oldYDomain=this.y.domain(),this.interpolating.oldYRange=this.y.range()),"vertical"===this.layout?(this.interpolating&&(this.interpolating.padding=this.x.padding(),this.interpolating.x=Iz().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange).padding(this.interpolating.padding),this.interpolating.y=rH().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange)),this.y=rH().domain(t).range([this.innerPaddedHeight,0]),this.x=Iz().domain(this.series.map(t=>t.key)).range([0,this.innerPaddedWidth]).padding(this.barIntervalRatio)):"horizontal"===this.layout&&(this.interpolating&&(this.interpolating.padding=this.y.padding(),this.interpolating.x=rH().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange),this.interpolating.y=Iz().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange).padding(this.interpolating.padding)),this.x=rH().domain(t).range([0,this.innerPaddedWidth]),this.y=Iz().domain(this.series.map(t=>t.key)).range([0,this.innerPaddedHeight]).padding(this.barIntervalRatio))}renderRootElements(){this.svg=dz(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.gridG=this.rootG.append("g").attr("class","grid-group"),this.barG=this.rootG.append("g").attr("class","stacked-bar-group"),this.labelG=this.rootG.append("g").attr("class","stacked-bar-dataLabel-group"),this.totalLabels=this.rootG.append("g").attr("class","bar-dataLabel-group"),this.legendG=dz(this.stackedBarChartEl).select(".stacked-bar-legend").append("svg"),this.tooltipG=dz(this.stackedBarChartEl).select(".stacked-bar-tooltip"),this.references=this.rootG.append("g").attr("class","stacked-bar-reference-line-group")}setTestingAttributes(){this.unitTest?(dz(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").attr("data-testid","chart-container"),dz(this.stackedBarChartEl).select(".stacked-bar-main-title").attr("data-testid","main-title"),dz(this.stackedBarChartEl).select(".stacked-bar-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.barG.attr("data-testid","stacked-bar-group"),this.updateBarWrappers.attr("data-testid","stacked-bar-wrapper").attr("data-id",t=>`stacked-bar-wrapper-${t.key}`),this.update.attr("data-testid","bar").attr("data-id",t=>`bar-${t[this.groupAccessor]}-${t[this.ordinalAccessor]}`),this.labelG.attr("data-testid","stacked-bar-dataLabel-group"),this.updateLabelWrappers.attr("data-testid","stacked-bar-dataLabel-wrapper").attr("data-id",t=>`stacked-bar-dataLabel-wrapper-${t.key}`),this.updateLabels.attr("data-testid","dataLabel").attr("data-id",t=>`dataLabel-${t[this.groupAccessor]}-${t[this.ordinalAccessor]}`),this.totalLabels.attr("data-testid","stacked-bar-totalLabel-group"),this.updateTotalLabels.attr("data-testid","totalLabel").attr("data-id",t=>`totalLabel-${t.key}`),this.references.attr("data-testid","reference-line-group"),this.svg.select("defs").attr("data-testid","pattern-defs"),this.references.selectAll(".stacked-bar-reference-line").attr("data-testid","reference-line"),this.references.selectAll(".stacked-bar-reference-line-label").attr("data-testid","reference-line-label")):(dz(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").attr("data-testid",null),dz(this.stackedBarChartEl).select(".stacked-bar-main-title").attr("data-testid",null),dz(this.stackedBarChartEl).select(".stacked-bar-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.barG.attr("data-testid",null),this.updateBarWrappers.attr("data-testid",null).attr("data-id",null),this.update.attr("data-testid",null).attr("data-id",null),this.labelG.attr("data-testid",null),this.updateLabelWrappers.attr("data-testid",null).attr("data-id",null),this.updateLabels.attr("data-testid",null).attr("data-id",null),this.totalLabels.attr("data-testid",null),this.updateTotalLabels.attr("data-testid",null).attr("data-id",null),this.references.attr("data-testid",null),this.svg.select("defs").attr("data-testid",null),this.references.selectAll(".stacked-bar-reference-line").attr("data-testid",null),this.references.selectAll(".stacked-bar-reference-line-label").attr("data-testid",null))}reSetRoot(){yR({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:UP}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),yR({selection:this.root,duration:this.duration,namespace:"root_reset",easing:UP}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),yR({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:UP}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),HR(this.chartID,this.width)}drawXAxis(){VR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel&&"vertical"===this.layout?this.x.bandwidth():"",format:this.xAxis.format,dateFormat:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible,duration:this.duration})}drawYAxis(){VR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,dateFormat:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible,duration:this.duration})}setXAxisAccessibility(){DR({rootEle:this.stackedBarChartEl,hasXAxis:!!this.innerXAxis&&this.innerXAxis.visible,xAxis:"vertical"===this.layout?this.x||!1:this.y||!1,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){$R({rootEle:this.stackedBarChartEl,hasYAxis:!!this.innerYAxis&&this.innerYAxis.visible,yAxis:"vertical"===this.layout?this.y||!1:this.x||!1,yAxisLabel:this.yAxis.label?this.yAxis.label:""})}drawBaseline(){"vertical"===this.layout&&VR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0)||-1,duration:this.duration}),"horizontal"===this.layout&&VR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,padding:this.padding,markOffset:this.x(0)||-1,duration:this.duration})}drawXGrid(){YR(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!this.innerXAxis.gridVisible,this.xAxis.tickInterval,this.duration)}drawYGrid(){YR(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.innerYAxis.gridVisible,this.yAxis.tickInterval,this.duration)}setGlobalSelections(){const t=this.barG.selectAll(".stacked-bar-series").data(this.series,t=>t.key);this.enterBarWrappers=t.enter().append("g"),this.exitBarWrappers=t.exit(),this.updateBarWrappers=t.merge(this.enterBarWrappers);const i=this.updateBarWrappers.selectAll(".stacked-bar").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enter=i.enter().append("rect"),this.exit=i.exit(),this.update=i.merge(this.enter),this.exitSize=this.exit.size(),this.enterSize=this.enter.size();const s=this.labelG.selectAll(".stacked-bar-dataLabel-series").data(this.series,t=>t.key);this.enterLabelWrappers=s.enter().append("g"),this.exitLabelWrappers=s.exit(),this.updateLabelWrappers=s.merge(this.enterLabelWrappers);const n=this.updateLabelWrappers.selectAll(".stacked-bar-dataLabel").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enterLabels=n.enter().append("text"),this.exitLabels=n.exit(),this.updateLabels=n.merge(this.enterLabels);const r=this.totalLabels.selectAll(".bar-dataLabel-group text").data(this.series,t=>t.key);this.enterTotalLabels=r.enter().append("text"),this.exitTotalLabels=r.exit(),this.updateTotalLabels=r.merge(this.enterTotalLabels)}enterGeometries(){this.enter.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"innerPaddedWidth":"innerPaddedHeight";this.enter.attr("class","stacked-bar").attr("cursor",this.suppressEvents?null:this.cursor).each((t,i,s)=>{mR(s[i])}).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("fill",(t,i)=>{const s=this.clickHighlight&&this.clickHighlight.length>0&&FR(t,this.clickHighlight,this.innerInteractionKeys),n=this.hoverHighlight&&jR(t,this.hoverHighlight,this.innerInteractionKeys),r=this.colorArr[i];return s&&this.clickStyle.color?uX[this.clickStyle.color]||this.clickStyle.color:s?r:n&&this.hoverStyle.color?uX[this.hoverStyle.color]||this.hoverStyle.color:r}).attr("opacity",0).attr(s,t=>{let i=this[s];this.interpolating&&(i=this.interpolating[s]);let n=t.stackEnd;return t.stackEnd<0&&(n=t.stackStart),"number"==typeof t.enteringStackStart&&(n=t.enteringStackStart),i(n/(this.normalized?t.getSum():1))}).attr(n,0).attr(t,i=>{let s=this[t];return this.interpolating&&(s=this.interpolating[t]),s(i[this.groupAccessor])}).attr(i,()=>{let i=this[t];return this.interpolating&&(i=this.interpolating[t]),i.bandwidth()}),this.enterBarWrappers.attr("class","stacked-bar-series entering").each((t,i,s)=>{mR(s[i])}).selectAll(".stacked-bar").attr(n,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackEnd/i)-this.y(t.stackStart/i):this.x(t.stackStart/i)-this.x(t.stackEnd/i)}),this.enterBarWrappers.selectAll(".stacked-bar").attr(s,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackStart/i):this.x(t.stackEnd/i)}).attr(t,i=>{let s=this[t](i[this.groupAccessor])+this[t].bandwidth()/2;return s=this[t](i[this.groupAccessor])+this[t].bandwidth()/2*(s/(this[r]/2)),s}).attr(i,0),this.enterBarWrappers.order(),this.enter.order()}updateGeometries(){this.update.interrupt(),this.update.transition("opacity").duration((t,i,s)=>dz(s[i]).classed("entering")?(dz(s[i]).classed("entering",!1),this.duration):0).ease(UP).attr("opacity",t=>XR(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).call(aX,()=>{this.update.classed("entering",!1)})}exitGeometries(){this.exit.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"innerPaddedWidth":"innerPaddedHeight";this.exit.attr("filter",null).transition("exit").duration(this.duration).ease(UP).attr(n,0).attr(s,t=>{let i=t.stackEnd;t.stackEnd<0&&(i=t.stackStart);const n=this.normalized?t.getSum():1;return this[s](i/n)}).attr(t,i=>this[t](i[this.groupAccessor])),this.exitBarWrappers.selectAll(".stacked-bar").attr("filter",null).transition("exit").duration(this.duration).ease(UP).attr("opacity",0).attr(s,(t,i,n)=>dz(n[i]).attr(s)).attr(t,(s,n,e)=>{const h=dz(e[n]);let a=+h.attr(t)+ +h.attr(i)/2;return a=+h.attr(t)+ +h.attr(i)/2*(a/(this[r]/2)),a}).attr(n,(t,i,s)=>dz(s[i]).attr(n)).attr(i,0),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(UP).call(aX,()=>{const t=zR(this.rootG.node());this.exit.remove(),this.exitBarWrappers.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),IR({parentGNode:this.rootG.node(),focusDidExist:t})})}drawGeometries(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"height":"width";this.updateBarWrappers.transition("update").duration(this.duration).ease(UP).call(aX,()=>{this.updateBarWrappers.classed("entering",!1)}),this.update.classed("geometryIsMoving",(r,e,h)=>{const a=this.normalized?r.getSum():1;return uR(dz(h[e]),[{attr:t,numeric:!0,newValue:this[t](r[this.groupAccessor])},{attr:i,numeric:!0,newValue:this[t].bandwidth()},{attr:s,numeric:!0,newValue:"vertical"===this.layout?this.y(r.stackStart/a):this.x(r.stackEnd/a)},{attr:n,numeric:!0,newValue:"vertical"===this.layout?this.y(r.stackEnd/a)-this.y(r.stackStart/a):this.x(r.stackStart/a)-this.x(r.stackEnd/a)}])}).attr(`data-${t}`,i=>this[t](i[this.groupAccessor])).attr(`data-${i}`,this[t].bandwidth()).attr(`data-${s}`,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackStart/i):this.x(t.stackEnd/i)}).attr(`data-${n}`,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackEnd/i)-this.y(t.stackStart/i):this.x(t.stackStart/i)-this.x(t.stackEnd/i)}).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).transition("update").duration(this.duration).ease(UP).attr(s,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackStart/i):this.x(t.stackEnd/i)}).attr(n,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackEnd/i)-this.y(t.stackStart/i):this.x(t.stackStart/i)-this.x(t.stackEnd/i)}).attr(t,i=>this[t](i[this.groupAccessor])).attr(i,this[t].bandwidth()).call(aX,()=>{setTimeout(()=>{this.update.classed("geometryIsMoving",!1),this.updateInteractionState(),this.updateLabels.classed("textIsMoving",!1),this.checkLabelColorAgainstBackground()},0),IR({parentGNode:this.rootG.node()})})}updateInteractionState(){fR(this.svg.node()),this.update.interrupt("opacity"),this.updateLabels.interrupt("opacity"),this.update.attr("opacity",t=>XR(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).attr("fill",(t,i)=>{const s=this.clickHighlight&&this.clickHighlight.length>0&&FR(t,this.clickHighlight,this.innerInteractionKeys),n=this.hoverHighlight&&jR(t,this.hoverHighlight,this.innerInteractionKeys),r=this.colorArr[i];return s&&this.clickStyle.color?uX[this.clickStyle.color]||this.clickStyle.color:s?r:n&&this.hoverStyle.color?uX[this.hoverStyle.color]||this.hoverStyle.color:r}).each((t,i,s)=>{const n=dz(s[i]);if(this.accessibility.hideStrokes||n.classed("geometryIsMoving"))n.attr("filter",null);else{const r=this.clickHighlight&&this.clickHighlight.length>0&&FR(t,this.clickHighlight,this.innerInteractionKeys),e=this.hoverHighlight&&jR(t,this.hoverHighlight,this.innerInteractionKeys),h=this.preparedColors[i],a=r?"click":e?"hover":"rest",o=r&&this.clickStyle.color?uX[this.clickStyle.color]||this.clickStyle.color:r?h:e&&this.hoverStyle.color?uX[this.hoverStyle.color]||this.hoverStyle.color:h;"hover"===a&&lR({inputElement:s[i],id:this.chartID,key:t[this.ordinalAccessor]+t[this.groupAccessor],strokeWidth:this.hoverStyle.strokeWidth,fill:o});const u=this.strokes[a+o];u!==n.attr("filter")&&(this.isSafari?(n.attr("filter",null),setTimeout(()=>{n.attr("filter",u)},0)):n.attr("filter",u))}}),IR({parentGNode:this.rootG.node()}),BR({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}setLabelOpacity(){const t="auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly,i="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;let s=15;if(this.updateLabels.each((t,i,n)=>{if(0===i){const t=getComputedStyle(n[i]),r=parseFloat(t.fontSize);s=Math.max(r-1,1)}}),this.processLabelOpacity(this.updateLabels,t),this.updateTotalLabels.attr("opacity",this.showTotalValue&&!this.normalized?1:0),t){const t=this.updateLabels.filter((t,i,s)=>dz(s[i]).classed("collision-added")),n=this.updateLabels.filter((t,i,s)=>dz(s[i]).classed("collision-removed")).attr("data-use-dx",i).attr("data-use-dy",i),r={vertical:{top:{validPositions:["bottom"],offsets:[5]},middle:{validPositions:["middle"],offsets:[1]},bottom:{validPositions:["top"],offsets:[s/2]}},horizontal:{right:{validPositions:["left"],offsets:[8]},middle:{validPositions:["middle"],offsets:[1]},left:{validPositions:["right"],offsets:[20]}}},e=this.dataLabel&&this.dataLabel.collisionPlacement,h=e&&r[this.layout][e]?this.dataLabel.collisionPlacement:"vertical"===this.layout?"top":"right";n.size()>0&&(this.bitmaps=fX({bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[lX(this.width,0),lX(this.height,0)],hideOnly:!1,removeOnly:!0}),n.classed("collision-removed",!1)),t.size()>0&&(this.bitmaps=hX({root:t,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,bitmaps:this.bitmaps,labelSelection:t,avoidMarks:[this.update],validPositions:i?["middle"]:r[this.layout][h].validPositions,offsets:i?[1]:r[this.layout][h].offsets,accessors:[this.groupAccessor,this.ordinalAccessor,"key"],size:[lX(this.width,0),lX(this.height,0)],boundsScope:i?void 0:h,hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly,suppressMarkDraw:!0}}),t.classed("collision-added",!1))}}processLabelOpacity(t,i){const s=this.dataLabel.visible?1:0,n="vertical"===this.layout?"x":"y",r="vertical"===this.layout?"width":"height",e="vertical"===this.layout?"height":"width";t.attr("opacity",(t,h,a)=>{const o=+dz(a[h]).attr("opacity"),u=dz(a[h]).style("visibility"),c=this.normalized?t.getSum():1,l={};l[r]=this[n].bandwidth(),l[e]="vertical"===this.layout?this.y(t.stackEnd/c)-this.y(t.stackStart/c):this.x(t.stackStart/c)-this.x(t.stackEnd/c);const f="auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly||this.accessibility.showSmallLabels||oR({text:QR(t,this.innerLabelAccessor,this.dataLabel.format,this.normalized),dimensions:l,fontSize:14})?XR(t,s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?i?Number.EPSILON:0:1:0;return(1===f&&"hidden"===u||o!==f)&&i&&(1===f?dz(a[h]).classed("collision-added",!0).style("visibility",null):dz(a[h]).classed("collision-removed",!0)),f})}checkLabelColorAgainstBackground(){this.updateLabels.attr("fill",(t,i,s)=>this.textTreatmentHandler(t,i,s))}bindInteractivity(){this.update.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler())}setRoundedCorners(){this.update.transition("shared_update").duration(this.duration).ease(UP).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)}setSelectedClass(){this.update.classed("highlight",(t,i,s)=>{let n=XR(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return n=!(!this.clickHighlight||!this.clickHighlight.length)&&n,_R(s[i],n,this.accessibility.elementsAreInterface),n})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),dz(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null)}enterDataLabels(){const t=this.dataLabel.visible?1:0;this.enterLabelWrappers.attr("class","stacked-bar-dataLabel-series entering"),this.enterLabels.attr("class","stacked-bar-dataLabel entering").style("pointer-events","none").classed("stacked-bar-dataLabel-"+this.layout,!0).attr("opacity",i=>XR(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON).attr("fill",this.textTreatmentHandler),hX({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized})}updateDataLabels(){this.updateLabels.interrupt(),this.updateLabelWrappers.transition("update").duration(this.duration).ease(UP).call(aX,()=>{this.updateLabelWrappers.classed("entering",!1)});const t=this.updateLabels.transition("opacity").ease(UP).duration((t,i,s)=>dz(s[i]).classed("entering")?(dz(s[i]).classed("entering",!1),this.duration):0);this.processLabelOpacity(t),t.call(aX,()=>{this.updateLabels.classed("entering",!1)})}exitDataLabels(){this.exitLabelWrappers.selectAll("text").attr("filter",null).transition("exit").ease(UP).duration(this.duration/2).attr("opacity",0).call(aX,()=>{this.exitLabelWrappers.remove()}),this.exitLabels.attr("filter",null).transition("exit").ease(UP).duration(this.duration/2).attr("opacity",0).remove()}drawDataLabels(){let t=15;const i="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;this.updateLabels.classed("stacked-bar-dataLabel-horizontal",!1).classed("stacked-bar-dataLabel-vertical",!1).classed("stacked-bar-dataLabel-"+this.layout,!0).text((i,s,n)=>{if(0===i[this.valueAccessor]&&!this.showZeroLabels)return"";if(0===s){const i=getComputedStyle(n[s]),r=parseFloat(i.fontSize);t=Math.max(r-1,1)}return QR(i,this.innerLabelAccessor,this.dataLabel.format,this.normalized)}).style("visibility",(t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?dz(s[i]).style("visibility"):null),this.updateLabelWrappers.transition("update").duration(this.duration).ease(UP).call(aX,()=>{this.updateLabelWrappers.classed("entering",!1)});const s="vertical"===this.layout?"x":"y",n="vertical"===this.layout?"y":"x",r="vertical"===this.layout?"stackStart":"stackEnd",e=this.updateLabels.classed("textIsMoving",t=>{if(!this.interpolating)return!1;const i=this.normalized?t.getSum():1;return this.interpolating[s](t[this.groupAccessor])!==this[s](t[this.groupAccessor])||this.interpolating[n](t[r]/i)!==this[n](t[r]/i)}).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).transition("update").ease(UP).duration(this.duration),h={vertical:{top:{validPositions:["bottom"],offsets:[5]},middle:{validPositions:["middle"],offsets:[1]},bottom:{validPositions:["top"],offsets:[t/2]}},horizontal:{right:{validPositions:["left"],offsets:[8]},middle:{validPositions:["middle"],offsets:[1]},left:{validPositions:["right"],offsets:[20]}}},a=this.dataLabel&&this.dataLabel.collisionPlacement,o=a&&h[this.layout][a]?this.dataLabel.collisionPlacement:"vertical"===this.layout?"top":"right";this.bitmaps=hX({root:e,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,labelSelection:e,avoidMarks:[this.update],validPositions:i?["middle"]:h[this.layout][o].validPositions,offsets:i?[1]:h[this.layout][o].offsets,accessors:[this.groupAccessor,this.ordinalAccessor,"key"],size:[lX(this.width,0),lX(this.height,0)],boundsScope:i?void 0:o,hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})}enterTotalDataLabels(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"y":"x";this.enterTotalLabels.attr("class","bar-dataLabel-"+this.layout).attr("opacity",Number.EPSILON).attr("fill",uX.dark_text).attr(t,i=>this[t](i.key)+this[t].bandwidth()/2).attr(i,t=>this[i](t.sumAboveZero)+4)}updateTotalDataLabels(){const t=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.transition("total_opacity").ease(UP).duration(this.duration).attr("opacity",t)}exitTotalDataLabels(){this.exitTotalLabels.transition("exit").ease(UP).duration(this.duration/2).attr("opacity",0).remove()}drawTotalDataLabels(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"y":"x",s=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.text(t=>ZR(t.sum,this.dataLabel.format)).attr("text-anchor","vertical"===this.layout?"middle":"start");const n=this.updateTotalLabels.classed("bar-dataLabel-horizontal",!1).classed("bar-dataLabel-vertical",!1).classed("bar-dataLabel-"+this.layout,!0).attr(`data-${t}`,i=>this[t](i.key)+this[t].bandwidth()/2).attr(`data-${i}`,t=>this[i](t.sumAboveZero)).attr("data-use-dx",!0).attr("data-use-dy",!0).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("dx","vertical"===this.layout?"0":"0.3em").attr("dy","vertical"===this.layout?"-0.3em":".3em").style("visibility",(t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?dz(s[i]).style("visibility"):null).transition("update").ease(UP).duration(this.duration).attr("opacity",s);this.showTotalValue&&("auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly)?(this.bitmaps=fX({bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[this.update],validPositions:["middle"],offsets:[1],accessors:[this.ordinalAccessor],size:[lX(this.width,0),lX(this.height,0)],hideOnly:!0}),n.attr(t,i=>this[t](i.key)+this[t].bandwidth()/2).attr(i,t=>this[i](t.sumAboveZero))):n.attr(t,i=>this[t](i.key)+this[t].bandwidth()/2).attr(i,t=>this[i](t.sumAboveZero))}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class",".stacked-bar-reference").attr("opacity",1),s=i.append("line");s.attr("class","stacked-bar-reference-line").attr("opacity",0);const n=i.append("text");n.attr("class","stacked-bar-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".stacked-bar-reference-line").data(t=>[t]).transition("merge").ease(UP).duration(this.duration),h=r.selectAll(".stacked-bar-reference-line-label").data(t=>[t]).transition("merge").ease(UP).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(UP).duration(this.duration).attr("opacity",0).remove(),"vertical"===this.layout?(i.attr("transform",t=>"translate(0,"+this.y(t.value)+")"),r.transition("merge").ease(UP).duration(this.duration).attr("transform",t=>"translate(0,"+this.y(t.value)+")"),s.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),n.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em")):"horizontal"===this.layout&&(i.attr("transform",t=>"translate("+this.x(t.value)+",0)"),r.transition("merge").ease(UP).duration(this.duration).attr("transform",t=>"translate("+this.x(t.value)+",0)"),s.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),e.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),n.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em"),h.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em")),e.style("stroke",uX[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",uX[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}drawAnnotations(){let t="horizontal"!==this.layout?this.x:this.y;const i="horizontal"!==this.layout?this.y:this.x;if(this.data[0][this.groupAccessor]instanceof Date){const i=function(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e]))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e]))&&s>n&&(n=s);return n}(this.data,t=>t[this.groupAccessor]),s=function(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e]))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e]))&&n>s&&(n=s);return n}(this.data,t=>t[this.groupAccessor]),n="horizontal"!==this.layout?[0,this.innerPaddedWidth]:[this.innerPaddedHeight,0];t=function(){return xz.apply(BP(mH,wH,vH,fH,lH,cH,uH,oH,TH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain([s,i]).range(n)}qR({source:this.rootG.node(),data:this.annotations,xScale:"horizontal"!==this.layout?t:i,xAccessor:"horizontal"!==this.layout?this.groupAccessor:this.valueAccessor,yScale:"horizontal"!==this.layout?i:t,yAccessor:"horizontal"!==this.layout?this.valueAccessor:this.groupAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){OR(this.stackedBarChartEl,this.annotations)}drawLegendElements(){KR({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){dz(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null).on("click",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?t=>this.hoverFunc.emit(t):null).on("mouseout",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?()=>this.onMouseOutHandler():null)}setTagLevels(){this.topLevel=pR(this.highestHeadingLevel),this.bottomLevel=pR(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){wR({rootEle:this.stackedBarChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"stacked-bar-chart",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){MR({node:this.svg.node(),chartTag:"stacked-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:oX(this,RR,"stacked-bar-chart"),groupAccessor:this.groupAccessor,groupName:"stack",groupKeys:!!this.showTotalValue&&["sumMessage"],disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,s)=>{mR(s[i])})}setGeometryAriaLabels(){const t=oX(this,RR,"stacked-bar-chart");this.update.each((i,s,n)=>{gR({node:n[s],geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:!!this.showTotalValue&&["sumMessage"],groupName:"stack",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),bR({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateBarWrappers.each((t,i,s)=>{bR({node:s[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){xR(this.stackedBarChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){AR(this.stackedBarChartEl,this.subTitle)}setChartAccessibilityLongDescription(){NR(this.stackedBarChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){WR(this.stackedBarChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){LR(this.stackedBarChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){SR(this.stackedBarChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){TR(this.stackedBarChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){ER({rootEle:this.stackedBarChartEl,parentGNode:this.barG.node(),chartTag:"stacked-bar-chart",geomType:"bar",groupName:"stack"})}setChartAccessibilityStructureNotes(){CR(this.stackedBarChartEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){eX(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&t&&this.eventsTooltip({data:t,evt:iz,isToShow:!0})}onMouseOutHandler(){eX(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){rX(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){UR({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,normalized:this.normalized,chartType:"stacked"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldCheckValueAxis&&("horizontal"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0):"vertical"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0),this.shouldCheckValueAxis=!1),this.shouldCheckLabelAxis&&("vertical"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0):"horizontal"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0),this.shouldCheckLabelAxis=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateLegendData&&(this.prepareLegendData(),this.shouldUpdateLegendData=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldValidateClickHighlight&&(this.validateClickHighlight(),this.shouldValidateClickHighlight=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldValidateAxes&&(this.validateAxes(),this.shouldValidateAxes=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldValidateLabelPlacement&&(this.validateLabelPlacement(),this.shouldValidateLabelPlacement=!1),s("div",{class:`o-layout is--${this.layout} light`},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"stacked-bar-main-title vcl-main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions stacked-bar-sub-title vcl-sub-title"},this.subTitle),s("div",{class:"stacked-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"bar",groupName:"stack",chartTag:"stacked-bar-chart",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:!0,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-stacked-bar-container"}),s("div",{class:"stacked-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(hR);let i=0;const s={mainTitle:{exception:""},subTitle:{exception:""},showTooltip:{exception:!1},wrapLabel:{exception:!1},showTotalValue:{exception:!1},barIntervalRatio:{exception:0},hoverOpacity:{exception:0}};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:hR[t[i]]}}get stackedBarChartEl(){return n(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],normalized:["normalizedWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTotalValue:["showTotalValueWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],showZeroLabels:["showZeroLabelsWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],interactionKeys:["interactionWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}stacked-bar-chart{cursor:default}stacked-bar-chart .annotations{pointer-events:none}stacked-bar-chart .annotations .handle{pointer-events:all}stacked-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}stacked-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}stacked-bar-chart .hidden{display:none}stacked-bar-chart #visa-viz-d3-stacked-bar-container{clear:both}stacked-bar-chart .stacked-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}stacked-bar-chart .stacked-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}stacked-bar-chart .stacked-bar-legend .key-dot{margin:3px 8px}stacked-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}stacked-bar-chart .light .grid path{stroke-width:0}stacked-bar-chart .light .axis{font-size:12px}stacked-bar-chart .light .axis .tick text{fill:#767676}stacked-bar-chart .light .axis .tick line{stroke:#767676}stacked-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .light .y.axis path{stroke:#767676;opacity:0}stacked-bar-chart .light .x.axis path{stroke:#767676}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-vertical{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-horizontal{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}stacked-bar-chart .dark .grid path{stroke-width:0}stacked-bar-chart .dark .axis{font-size:12px}stacked-bar-chart .dark .axis .tick line{stroke:lightgrey}stacked-bar-chart .dark .axis .tick text{fill:grey}stacked-bar-chart .dark .axis path{stroke:black}stacked-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .dark .o-layout--chart svg{background:black}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"}};window.VisaChartsLibOSSLicenses=sX();export{xn as alluvial_diagram,Fo as clustered_bar_chart,Jp as dumbbell_plot,ty as group_charts,Zb as heat_map,UA as level_indicator_alternative,TE as parallel_plot,nI as pareto_chart,dX as stacked_bar_chart};