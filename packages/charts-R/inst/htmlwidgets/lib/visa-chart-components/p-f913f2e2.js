/**
 * Copyright (c) 2022 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
import{b as n}from"./p-cbe185fc.js";import{i as t}from"./p-91852fd8.js";import{i as r}from"./p-db18f6c1.js";var i=Math.sqrt(50),u=Math.sqrt(10),a=Math.sqrt(2);function e(n,t,r){var e=(t-n)/Math.max(0,r),o=Math.floor(Math.log(e)/Math.LN10),f=e/Math.pow(10,o);return o>=0?(f>=i?10:f>=u?5:f>=a?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(f>=i?10:f>=u?5:f>=a?2:1)}function o(n,t,r){var e=Math.abs(t-n)/Math.max(0,r),o=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),f=e/o;return f>=i?o*=10:f>=u?o*=5:f>=a&&(o*=2),t<n?-o:o}function f(n,t){return n=+n,t=+t,function(r){return Math.round(n*(1-r)+t*r)}}function c(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n)}return this}function h(){}function s(n,t){var r=new h;if(n instanceof h)n.each((function(n,t){r.set(t,n)}));else if(Array.isArray(n)){var i,u=-1,a=n.length;if(null==t)for(;++u<a;)r.set(u,n[u]);else for(;++u<a;)r.set(t(i=n[u],u,n),i)}else if(n)for(var e in n)r.set(e,n[e]);return r}function v(){var n,t,r,i=[],u=[];function a(r,u,e,o){if(u>=i.length)return null!=n&&r.sort(n),null!=t?t(r):r;for(var f,c,h,v=-1,M=r.length,l=i[u++],d=s(),m=e();++v<M;)(h=d.get(f=l(c=r[v])+""))?h.push(c):d.set(f,[c]);return d.each((function(n,t){o(m,t,a(n,u,e,o))})),m}function e(n,r){if(++r>i.length)return n;var a,o=u[r-1];return null!=t&&r>=i.length?a=n.entries():(a=[],n.each((function(n,t){a.push({key:t,values:e(n,r)})}))),null!=o?a.sort((function(n,t){return o(n.key,t.key)})):a}return r={object:function(n){return a(n,0,M,l)},map:function(n){return a(n,0,d,m)},entries:function(n){return e(a(n,0,d,m),0)},key:function(n){return i.push(n),r},sortKeys:function(n){return u[i.length-1]=n,r},sortValues:function(t){return n=t,r},rollup:function(n){return t=n,r}}}function M(){return{}}function l(n,t,r){n[t]=r}function d(){return s()}function m(n,t,r){n.set(t,r)}h.prototype=s.prototype={constructor:h,has:function(n){return"$"+n in this},get:function(n){return this["$"+n]},set:function(n,t){return this["$"+n]=t,this},remove:function(n){var t="$"+n;return t in this&&delete this[t]},clear:function(){for(var n in this)"$"===n[0]&&delete this[n]},keys:function(){var n=[];for(var t in this)"$"===t[0]&&n.push(t.slice(1));return n},values:function(){var n=[];for(var t in this)"$"===t[0]&&n.push(this[t]);return n},entries:function(){var n=[];for(var t in this)"$"===t[0]&&n.push({key:t.slice(1),value:this[t]});return n},size:function(){var n=0;for(var t in this)"$"===t[0]&&++n;return n},empty:function(){for(var n in this)if("$"===n[0])return!1;return!0},each:function(n){for(var t in this)"$"===t[0]&&n(this[t],t.slice(1),this)}};var y=Array.prototype,p=y.map,b=y.slice,N={name:"implicit"};function w(){var n=s(),t=[],r=[],i=N;function u(u){var a=u+"",e=n.get(a);if(!e){if(i!==N)return i;n.set(a,e=t.push(u))}return r[(e-1)%r.length]}return u.domain=function(r){if(!arguments.length)return t.slice();t=[],n=s();for(var i,a,e=-1,o=r.length;++e<o;)n.has(a=(i=r[e])+"")||n.set(a,t.push(i));return u},u.range=function(n){return arguments.length?(r=b.call(n),u):r.slice()},u.unknown=function(n){return arguments.length?(i=n,u):i},u.copy=function(){return w(t,r).unknown(i)},c.apply(u,arguments),u}function $(n){return+n}var k=[0,1];function g(n){return n}function A(n,t){return(t-=n=+n)?function(r){return(r-n)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function j(n){var t,r=n[0],i=n[n.length-1];return r>i&&(t=r,r=i,i=t),function(n){return Math.max(r,Math.min(i,n))}}function x(n,t,r){var i=n[0],u=n[1],a=t[0],e=t[1];return u<i?(i=A(u,i),a=r(e,a)):(i=A(i,u),a=r(a,e)),function(n){return a(i(n))}}function z(t,r,i){var u=Math.min(t.length,r.length)-1,a=new Array(u),e=new Array(u),o=-1;for(t[u]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++o<u;)a[o]=A(t[o],t[o+1]),e[o]=i(r[o],r[o+1]);return function(r){var i=n(t,r,1,u)-1;return e[i](a[i](r))}}function E(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function P(){var n,i,u,a,e,o,c=k,h=k,s=r,v=g;function M(){return a=Math.min(c.length,h.length)>2?z:x,e=o=null,l}function l(t){return isNaN(t=+t)?u:(e||(e=a(c.map(n),h,s)))(n(v(t)))}return l.invert=function(r){return v(i((o||(o=a(h,c.map(n),t)))(r)))},l.domain=function(n){return arguments.length?(c=p.call(n,$),v===g||(v=j(c)),M()):c.slice()},l.range=function(n){return arguments.length?(h=b.call(n),M()):h.slice()},l.rangeRound=function(n){return h=b.call(n),s=f,M()},l.clamp=function(n){return arguments.length?(v=n?j(c):g,l):v!==g},l.interpolate=function(n){return arguments.length?(s=n,M()):s},l.unknown=function(n){return arguments.length?(u=n,l):u},function(t,r){return n=t,i=r,M()}}function X(n,t){return P()(n,t)}function F(n,t){if((r=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var r,i=n.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+n.slice(r+1)]}function G(n){return(n=F(Math.abs(n)))?n[1]:NaN}var K,S=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(n){if(!(t=S.exec(n)))throw new Error("invalid format: "+n);var t;return new V({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function V(n){this.fill=void 0===n.fill?" ":n.fill+"",this.align=void 0===n.align?">":n.align+"",this.sign=void 0===n.sign?"-":n.sign+"",this.symbol=void 0===n.symbol?"":n.symbol+"",this.zero=!!n.zero,this.width=void 0===n.width?void 0:+n.width,this.comma=!!n.comma,this.precision=void 0===n.precision?void 0:+n.precision,this.trim=!!n.trim,this.type=void 0===n.type?"":n.type+""}function Y(n,t){var r=F(n,t);if(!r)return n+"";var i=r[0],u=r[1];return u<0?"0."+new Array(-u).join("0")+i:i.length>u+1?i.slice(0,u+1)+"."+i.slice(u+1):i+new Array(u-i.length+2).join("0")}T.prototype=V.prototype,V.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Z={"%":function(n,t){return(100*n).toFixed(t)},b:function(n){return Math.round(n).toString(2)},c:function(n){return n+""},d:function(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},g:function(n,t){return n.toPrecision(t)},o:function(n){return Math.round(n).toString(8)},p:function(n,t){return Y(100*n,t)},r:Y,s:function(n,t){var r=F(n,t);if(!r)return n+"";var i=r[0],u=r[1],a=u-(K=3*Math.max(-8,Math.min(8,Math.floor(u/3))))+1,e=i.length;return a===e?i:a>e?i+new Array(a-e+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+F(n,Math.max(0,t+a-1))[0]},X:function(n){return Math.round(n).toString(16).toUpperCase()},x:function(n){return Math.round(n).toString(16)}};function q(n){return n}var B,C,D,H=Array.prototype.map,I=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function J(n){var t=n.domain;return n.ticks=function(n){var r=t();return function(n,t,r){var i,u,a,o,f=-1;if(r=+r,(n=+n)==(t=+t)&&r>0)return[n];if((i=t<n)&&(u=n,n=t,t=u),0===(o=e(n,t,r))||!isFinite(o))return[];if(o>0)for(n=Math.ceil(n/o),t=Math.floor(t/o),a=new Array(u=Math.ceil(t-n+1));++f<u;)a[f]=(n+f)*o;else for(n=Math.floor(n*o),t=Math.ceil(t*o),a=new Array(u=Math.ceil(n-t+1));++f<u;)a[f]=(n-f)/o;return i&&a.reverse(),a}(r[0],r[r.length-1],null==n?10:n)},n.tickFormat=function(n,r){var i=t();return function(n,t,r,i){var u,a=o(n,t,r);switch((i=T(null==i?",f":i)).type){case"s":var e=Math.max(Math.abs(n),Math.abs(t));return null!=i.precision||isNaN(u=function(n,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(G(t)/3)))-G(Math.abs(n)))}(a,e))||(i.precision=u),D(i,e);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(u=function(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,G(t)-G(n))+1}(a,Math.max(Math.abs(n),Math.abs(t))))||(i.precision=u-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(u=function(n){return Math.max(0,-G(Math.abs(n)))}(a))||(i.precision=u-2*("%"===i.type))}return C(i)}(i[0],i[i.length-1],null==n?10:n,r)},n.nice=function(r){null==r&&(r=10);var i,u=t(),a=0,o=u.length-1,f=u[a],c=u[o];return c<f&&(i=f,f=c,c=i,i=a,a=o,o=i),(i=e(f,c,r))>0?i=e(f=Math.floor(f/i)*i,c=Math.ceil(c/i)*i,r):i<0&&(i=e(f=Math.ceil(f*i)/i,c=Math.floor(c*i)/i,r)),i>0?(u[a]=Math.floor(f/i)*i,u[o]=Math.ceil(c/i)*i,t(u)):i<0&&(u[a]=Math.ceil(f*i)/i,u[o]=Math.floor(c*i)/i,t(u)),n},n}function L(){var n=X(g,g);return n.copy=function(){return E(n,L())},c.apply(n,arguments),J(n)}B=function(n){var t,r,i=void 0===n.grouping||void 0===n.thousands?q:(t=H.call(n.grouping,Number),r=n.thousands+"",function(n,i){for(var u=n.length,a=[],e=0,o=t[0],f=0;u>0&&o>0&&(f+o+1>i&&(o=Math.max(1,i-f)),a.push(n.substring(u-=o,u+o)),!((f+=o+1)>i));)o=t[e=(e+1)%t.length];return a.reverse().join(r)}),u=void 0===n.currency?"":n.currency[0]+"",a=void 0===n.currency?"":n.currency[1]+"",e=void 0===n.decimal?".":n.decimal+"",o=void 0===n.numerals?q:function(n){return function(t){return t.replace(/[0-9]/g,(function(t){return n[+t]}))}}(H.call(n.numerals,String)),f=void 0===n.percent?"%":n.percent+"",c=void 0===n.minus?"-":n.minus+"",h=void 0===n.nan?"NaN":n.nan+"";function s(n){var t=(n=T(n)).fill,r=n.align,s=n.sign,v=n.symbol,M=n.zero,l=n.width,d=n.comma,m=n.precision,y=n.trim,p=n.type;"n"===p?(d=!0,p="g"):Z[p]||(void 0===m&&(m=12),y=!0,p="g"),(M||"0"===t&&"="===r)&&(M=!0,t="0",r="=");var b="$"===v?u:"#"===v&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",N="$"===v?a:/[%p]/.test(p)?f:"",w=Z[p],$=/[defgprs%]/.test(p);function k(n){var u,a,f,v=b,k=N;if("c"===p)k=w(n)+k,n="";else{var g=(n=+n)<0||1/n<0;if(n=isNaN(n)?h:w(Math.abs(n),m),y&&(n=function(n){n:for(var t,r=n.length,i=1,u=-1;i<r;++i)switch(n[i]){case".":u=t=i;break;case"0":0===u&&(u=i),t=i;break;default:if(!+n[i])break n;u>0&&(u=0)}return u>0?n.slice(0,u)+n.slice(t+1):n}(n)),g&&0==+n&&"+"!==s&&(g=!1),v=(g?"("===s?s:c:"-"===s||"("===s?"":s)+v,k=("s"===p?I[8+K/3]:"")+k+(g&&"("===s?")":""),$)for(u=-1,a=n.length;++u<a;)if(48>(f=n.charCodeAt(u))||f>57){k=(46===f?e+n.slice(u+1):n.slice(u))+k,n=n.slice(0,u);break}}d&&!M&&(n=i(n,1/0));var A=v.length+n.length+k.length,j=A<l?new Array(l-A+1).join(t):"";switch(d&&M&&(n=i(j+n,j.length?l-k.length:1/0),j=""),r){case"<":n=v+n+k+j;break;case"=":n=v+j+n+k;break;case"^":n=j.slice(0,A=j.length>>1)+v+n+k+j.slice(A);break;default:n=j+v+n+k}return o(n)}return m=void 0===m?6:/[gprs]/.test(p)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),k.toString=function(){return n+""},k}return{format:s,formatPrefix:function(n,t){var r=s(((n=T(n)).type="f",n)),i=3*Math.max(-8,Math.min(8,Math.floor(G(t)/3))),u=Math.pow(10,-i),a=I[8+i/3];return function(n){return r(u*n)+a}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),C=B.format,D=B.formatPrefix;export{g as a,E as b,X as c,J as d,P as e,c as i,L as l,p as m,v as n,w as o,b as s,o as t}