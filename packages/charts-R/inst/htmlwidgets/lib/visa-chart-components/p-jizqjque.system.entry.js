/**
 * Copyright (c) 2021 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
var __spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var r=Array(t),n=0,e=0;e<i;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,n++)r[n]=s[a];return r};System.register(["./p-3a3b8b8a.system.js","./p-ec3018ad.system.js"],(function(t){"use strict";var e,i,r,n,s;return{setters:[function(t){e=t.r;i=t.c;r=t.h;n=t.g},function(t){s=t.U}],execute:function(){var a="http://www.w3.org/1999/xhtml";var o={svg:"http://www.w3.org/2000/svg",xhtml:a,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function l(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return o.hasOwnProperty(e)?{space:o[e],local:t}:t}function u(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===a&&e.documentElement.namespaceURI===a?e.createElement(t):e.createElementNS(i,t)}}function h(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function c(t){var e=l(t);return(e.local?h:u)(e)}function d(){}function f(t){return t==null?d:function(){return this.querySelector(t)}}function p(t){if(typeof t!=="function")t=f(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new Kt(r,this._parents)}function y(){return[]}function v(t){return t==null?y:function(){return this.querySelectorAll(t)}}function g(t){if(typeof t!=="function")t=v(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new Kt(r,n)}function b(t){return function(){return this.matches(t)}}function m(t){if(typeof t!=="function")t=b(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new Kt(r,this._parents)}function A(t){return new Array(t.length)}function w(){return new Kt(this._enter||this._groups.map(A),this._parents)}function x(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}x.prototype={constructor:x,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function S(t){return function(){return t}}var k="$";function L(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new x(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function _(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=k+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=k+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new x(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function C(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?_:L,r=this._parents,n=this._groups;if(typeof t!=="function")t=S(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new Kt(a,r);a._enter=o;a._exit=l;return a}function D(){return new Kt(this._exit||this._groups.map(A),this._parents)}function M(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function U(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new Kt(a,this._parents)}function T(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function E(t){if(!t)t=I;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new Kt(n,this._parents).order()}function I(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function N(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function W(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function H(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function G(){var t=0;this.each((function(){++t}));return t}function P(){return!this.node()}function O(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function V(t){return function(){this.removeAttribute(t)}}function R(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Y(t,e){return function(){this.setAttribute(t,e)}}function z(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function F(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function X(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function B(t,e){var i=l(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?R:V:typeof e==="function"?i.local?X:F:i.local?z:Y)(i,e))}function K(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function q(t){return function(){this.style.removeProperty(t)}}function j(t,e,i){return function(){this.style.setProperty(t,e,i)}}function $(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function Z(t,e,i){return arguments.length>1?this.each((e==null?q:typeof e==="function"?$:j)(t,e,i==null?"":i)):Q(this.node(),t)}function Q(t,e){return t.style.getPropertyValue(e)||K(t).getComputedStyle(t,null).getPropertyValue(e)}function J(t){return function(){delete this[t]}}function tt(t,e){return function(){this[t]=e}}function et(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function it(t,e){return arguments.length>1?this.each((e==null?J:typeof e==="function"?et:tt)(t,e)):this.node()[t]}function rt(t){return t.trim().split(/^|\s+/)}function nt(t){return t.classList||new st(t)}function st(t){this._node=t;this._names=rt(t.getAttribute("class")||"")}st.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function at(t,e){var i=nt(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function ot(t,e){var i=nt(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function lt(t){return function(){at(this,t)}}function ut(t){return function(){ot(this,t)}}function ht(t,e){return function(){(e.apply(this,arguments)?at:ot)(this,t)}}function ct(t,e){var i=rt(t+"");if(arguments.length<2){var r=nt(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?ht:e?lt:ut)(i,e))}function dt(){this.textContent=""}function ft(t){return function(){this.textContent=t}}function pt(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function yt(t){return arguments.length?this.each(t==null?dt:(typeof t==="function"?pt:ft)(t)):this.node().textContent}function vt(){this.innerHTML=""}function gt(t){return function(){this.innerHTML=t}}function bt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function mt(t){return arguments.length?this.each(t==null?vt:(typeof t==="function"?bt:gt)(t)):this.node().innerHTML}function At(){if(this.nextSibling)this.parentNode.appendChild(this)}function wt(){return this.each(At)}function xt(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function St(){return this.each(xt)}function kt(t){var e=typeof t==="function"?t:c(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function Lt(){return null}function _t(t,e){var i=typeof t==="function"?t:c(t),r=e==null?Lt:typeof e==="function"?e:f(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function Ct(){var t=this.parentNode;if(t)t.removeChild(this)}function Dt(){return this.each(Ct)}function Mt(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ut(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Tt(t){return this.select(t?Ut:Mt)}function Et(t){return arguments.length?this.property("__data__",t):this.node().__data__}var It={};var Nt=null;if(typeof document!=="undefined"){var Wt=document.documentElement;if(!("onmouseenter"in Wt)){It={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Ht(t,e,i){t=Gt(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function Gt(t,e,i){return function(r){var n=Nt;Nt=r;try{t.call(this,this.__data__,e,i)}finally{Nt=n}}}function Pt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function Ot(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function Vt(t,e,i){var r=It.hasOwnProperty(t.type)?Ht:Gt;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function Rt(t,e,i){var r=Pt(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?Vt:Ot;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function Yt(t,e,i){var r=K(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function zt(t,e){return function(){return Yt(this,t,e)}}function Ft(t,e){return function(){return Yt(this,t,e.apply(this,arguments))}}function Xt(t,e){return this.each((typeof e==="function"?Ft:zt)(t,e))}var Bt=[null];function Kt(t,e){this._groups=t;this._parents=e}function qt(){return new Kt([[document.documentElement]],Bt)}Kt.prototype=qt.prototype={constructor:Kt,select:p,selectAll:g,filter:m,data:C,enter:w,exit:D,join:M,merge:U,order:T,sort:E,call:N,nodes:W,node:H,size:G,empty:P,each:O,attr:B,style:Z,property:it,classed:ct,text:yt,html:mt,raise:wt,lower:St,append:kt,insert:_t,remove:Dt,clone:Tt,datum:Et,on:Rt,dispatch:Xt};function jt(t){return typeof t==="string"?new Kt([[document.querySelector(t)]],[document.documentElement]):new Kt([[t]],Bt)}function $t(t,e){var i;if(e===undefined){for(var r=0,n=t;r<n.length;r++){var s=n[r];if(s!=null&&(i<s||i===undefined&&s>=s)){i=s}}}else{var a=-1;for(var o=0,l=t;o<l.length;o++){var s=l[o];if((s=e(s,++a,t))!=null&&(i<s||i===undefined&&s>=s)){i=s}}}return i}function Zt(t,e){var i;if(e===undefined){for(var r=0,n=t;r<n.length;r++){var s=n[r];if(s!=null&&(i>s||i===undefined&&s>=s)){i=s}}}else{var a=-1;for(var o=0,l=t;o<l.length;o++){var s=l[o];if((s=e(s,++a,t))!=null&&(i>s||i===undefined&&s>=s)){i=s}}}return i}var Qt=Math.PI,Jt=2*Qt,te=1e-6,ee=Jt-te;function ie(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function re(){return new ie}ie.prototype=re.prototype={constructor:ie,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(t,e,i,r,n,s){this._+="C"+ +t+","+ +e+","+ +i+","+ +r+","+(this._x1=+n)+","+(this._y1=+s)},arcTo:function(t,e,i,r,n){t=+t,e=+e,i=+i,r=+r,n=+n;var s=this._x1,a=this._y1,o=i-t,l=r-e,u=s-t,h=a-e,c=u*u+h*h;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=e)}else if(!(c>te));else if(!(Math.abs(h*o-l*u)>te)||!n){this._+="L"+(this._x1=t)+","+(this._y1=e)}else{var d=i-s,f=r-a,p=o*o+l*l,y=d*d+f*f,v=Math.sqrt(p),g=Math.sqrt(c),b=n*Math.tan((Qt-Math.acos((p+c-y)/(2*v*g)))/2),m=b/g,A=b/v;if(Math.abs(m-1)>te){this._+="L"+(t+m*u)+","+(e+m*h)}this._+="A"+n+","+n+",0,0,"+ +(h*d>u*f)+","+(this._x1=t+A*o)+","+(this._y1=e+A*l)}},arc:function(t,e,i,r,n,s){t=+t,e=+e,i=+i,s=!!s;var a=i*Math.cos(r),o=i*Math.sin(r),l=t+a,u=e+o,h=1^s,c=s?r-n:n-r;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null){this._+="M"+l+","+u}else if(Math.abs(this._x1-l)>te||Math.abs(this._y1-u)>te){this._+="L"+l+","+u}if(!i)return;if(c<0)c=c%Jt+Jt;if(c>ee){this._+="A"+i+","+i+",0,1,"+h+","+(t-a)+","+(e-o)+"A"+i+","+i+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u)}else if(c>te){this._+="A"+i+","+i+",0,"+ +(c>=Qt)+","+h+","+(this._x1=t+i*Math.cos(n))+","+(this._y1=e+i*Math.sin(n))}},rect:function(t,e,i,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};function ne(t){return function e(){return t}}function se(t){return t[0]}function ae(t){return t[1]}var oe=Array.prototype.slice;function le(t){return t.source}function ue(t){return t.target}function he(t){var e=le,i=ue,r=se,n=ae,s=null;function a(){var a,o=oe.call(arguments),l=e.apply(this,o),u=i.apply(this,o);if(!s)s=a=re();t(s,+r.apply(this,(o[0]=l,o)),+n.apply(this,o),+r.apply(this,(o[0]=u,o)),+n.apply(this,o));if(a)return s=null,a+""||null}a.source=function(t){return arguments.length?(e=t,a):e};a.target=function(t){return arguments.length?(i=t,a):i};a.x=function(t){return arguments.length?(r=typeof t==="function"?t:ne(+t),a):r};a.y=function(t){return arguments.length?(n=typeof t==="function"?t:ne(+t),a):n};a.context=function(t){return arguments.length?(s=t==null?null:t,a):s};return a}function ce(t,e,i,r,n){t.moveTo(e,i);t.bezierCurveTo(e=(e+r)/2,i,e,n,r,n)}function de(){return he(ce)}function fe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function pe(t){return 1-Math.sqrt(1-t*t)}var ye=s.propDefaultValues;var ve=function(){function t(){}return t}();ve.highestHeadingLevel=ye.highestHeadingLevel;ve.mainTitle="Alluvial Diagram Title";ve.subTitle="This is the alluvial diagram's subtitle";ve.height=300;ve.width=650;ve.margin={top:300*.01,bottom:300*.01,right:650*.01,left:650*.01};ve.padding={top:20,bottom:50,right:50,left:50};ve.sourceAccessor="source";ve.targetAccessor="target";ve.valueAccessor="value";ve.groupAccessor="group";ve.labelAccessor="name";ve.nodeIDAccessor="id";ve.nodeConfig={fill:false,width:12,padding:20,alignment:"left",compare:false};ve.linkConfig={visible:true,fillMode:"none",opacity:.3};ve.accessibility=ye.accessibility;ve.animationConfig=ye.animationConfig;ve.colorPalette=ye.colorPaletteCategorical;ve.dataLabel=ye.dataLabel;ve.annotations=ye.annotations;ve.hoverStyle=ye.hoverStyle;ve.clickStyle=ye.clickStyle;ve.hoverOpacity=ye.hoverOpacity;ve.cursor=ye.cursor;ve.tooltipLabel=ye.tooltipLabel;ve.showTooltip=ye.showTooltip;ve.suppressEvents=ye.suppressEvents;ve.clickHighlight=ye.clickHighlight;var ge=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var be=new Uint8Array(16);function me(){if(!ge){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return ge(be)}var Ae=[];for(var we=0;we<256;++we){Ae[we]=(we+256).toString(16).substr(1)}function xe(t,e){var i=e||0;var r=Ae;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function Se(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||me)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||xe(n)}var ke={value:function(){}};function Le(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new _e(i)}function _e(t){this._=t}function Ce(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}_e.prototype=Le.prototype={constructor:_e,on:function(t,e){var i=this._,r=Ce(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=De(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=Me(i[n],t.name,e);else if(e==null)for(n in i)i[n]=Me(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new _e(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function De(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function Me(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=ke,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var Ue=0,Te=0,Ee=0,Ie=1e3,Ne,We,He=0,Ge=0,Pe=0,Oe=typeof performance==="object"&&performance.now?performance:Date,Ve=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Re(){return Ge||(Ve(Ye),Ge=Oe.now()+Pe)}function Ye(){Ge=0}function ze(){this._call=this._time=this._next=null}ze.prototype=Fe.prototype={constructor:ze,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?Re():+i)+(e==null?0:+e);if(!this._next&&We!==this){if(We)We._next=this;else Ne=this;We=this}this._call=t;this._time=i;je()},stop:function(){if(this._call){this._call=null;this._time=Infinity;je()}}};function Fe(t,e,i){var r=new ze;r.restart(t,e,i);return r}function Xe(){Re();++Ue;var t=Ne,e;while(t){if((e=Ge-t._time)>=0)t._call.call(null,e);t=t._next}--Ue}function Be(){Ge=(He=Oe.now())+Pe;Ue=Te=0;try{Xe()}finally{Ue=0;qe();Ge=0}}function Ke(){var t=Oe.now(),e=t-He;if(e>Ie)Pe-=e,He=t}function qe(){var t,e=Ne,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:Ne=i}}We=t;je(r)}function je(t){if(Ue)return;if(Te)Te=clearTimeout(Te);var e=t-Ge;if(e>24){if(t<Infinity)Te=setTimeout(Be,t-Oe.now()-Pe);if(Ee)Ee=clearInterval(Ee)}else{if(!Ee)He=Oe.now(),Ee=setInterval(Ke,Ie);Ue=1,Ve(Be)}}function $e(t,e,i){var r=new ze;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var Ze=Le("start","end","interrupt");var Qe=[];var Je=0;var ti=1;var ei=2;var ii=3;var ri=4;var ni=5;var si=6;function ai(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;hi(t,i,{name:e,index:r,group:n,on:Ze,tween:Qe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Je})}function oi(t,e){var i=ui(t,e);if(i.state>Je)throw new Error("too late; already scheduled");return i}function li(t,e){var i=ui(t,e);if(i.state>ei)throw new Error("too late; already started");return i}function ui(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function hi(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=Fe(s,0,i.time);function s(t){i.state=ti;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==ti)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===ii)return $e(a);if(d.state===ri){d.state=si;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=si;d.timer.stop();delete r[u]}}$e((function(){if(i.state===ii){i.state=ri;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=ei;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==ei)return;i.state=ii;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=ni,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===ni){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=si;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function ci(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>ei&&r.state<ni;r.state=si;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function di(t){return this.each((function(){ci(this,t)}))}function fi(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function pi(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function yi(){}var vi=.7;var gi=1/vi;var bi="\\s*([+-]?\\d+)\\s*",mi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ai="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wi=/^#([0-9a-f]{3,8})$/,xi=new RegExp("^rgb\\("+[bi,bi,bi]+"\\)$"),Si=new RegExp("^rgb\\("+[Ai,Ai,Ai]+"\\)$"),ki=new RegExp("^rgba\\("+[bi,bi,bi,mi]+"\\)$"),Li=new RegExp("^rgba\\("+[Ai,Ai,Ai,mi]+"\\)$"),_i=new RegExp("^hsl\\("+[mi,Ai,Ai]+"\\)$"),Ci=new RegExp("^hsla\\("+[mi,Ai,Ai,mi]+"\\)$");var Di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fi(yi,Ei,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Mi,formatHex:Mi,formatHsl:Ui,formatRgb:Ti,toString:Ti});function Mi(){return this.rgb().formatHex()}function Ui(){return Yi(this).formatHsl()}function Ti(){return this.rgb().formatRgb()}function Ei(t){var e,i;t=(t+"").trim().toLowerCase();return(e=wi.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Ii(e):i===3?new Gi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?Ni(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?Ni(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=xi.exec(t))?new Gi(e[1],e[2],e[3],1):(e=Si.exec(t))?new Gi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ki.exec(t))?Ni(e[1],e[2],e[3],e[4]):(e=Li.exec(t))?Ni(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_i.exec(t))?Ri(e[1],e[2]/100,e[3]/100,1):(e=Ci.exec(t))?Ri(e[1],e[2]/100,e[3]/100,e[4]):Di.hasOwnProperty(t)?Ii(Di[t]):t==="transparent"?new Gi(NaN,NaN,NaN,0):null}function Ii(t){return new Gi(t>>16&255,t>>8&255,t&255,1)}function Ni(t,e,i,r){if(r<=0)t=e=i=NaN;return new Gi(t,e,i,r)}function Wi(t){if(!(t instanceof yi))t=Ei(t);if(!t)return new Gi;t=t.rgb();return new Gi(t.r,t.g,t.b,t.opacity)}function Hi(t,e,i,r){return arguments.length===1?Wi(t):new Gi(t,e,i,r==null?1:r)}function Gi(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}fi(Gi,Hi,pi(yi,{brighter:function(t){t=t==null?gi:Math.pow(gi,t);return new Gi(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?vi:Math.pow(vi,t);return new Gi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:Pi,formatHex:Pi,formatRgb:Oi,toString:Oi}));function Pi(){return"#"+Vi(this.r)+Vi(this.g)+Vi(this.b)}function Oi(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Vi(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function Ri(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new Fi(t,e,i,r)}function Yi(t){if(t instanceof Fi)return new Fi(t.h,t.s,t.l,t.opacity);if(!(t instanceof yi))t=Ei(t);if(!t)return new Fi;if(t instanceof Fi)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new Fi(a,o,l,t.opacity)}function zi(t,e,i,r){return arguments.length===1?Yi(t):new Fi(t,e,i,r==null?1:r)}function Fi(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}fi(Fi,zi,pi(yi,{brighter:function(t){t=t==null?gi:Math.pow(gi,t);return new Fi(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?vi:Math.pow(vi,t);return new Fi(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new Gi(Xi(t>=240?t-240:t+120,n,r),Xi(t,n,r),Xi(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Xi(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function Bi(t){return function(){return t}}function Ki(t,e){return function(i){return t+i*e}}function qi(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function ji(t){return(t=+t)===1?$i:function(e,i){return i-e?qi(e,i,t):Bi(isNaN(e)?i:e)}}function $i(t,e){var i=e-t;return i?Ki(t,i):Bi(isNaN(t)?e:t)}var Zi=function t(e){var i=ji(e);function r(t,e){var r=i((t=Hi(t)).r,(e=Hi(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=$i(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function Qi(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}var Ji=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tr=new RegExp(Ji.source,"g");function er(t){return function(){return t}}function ir(t){return function(e){return t(e)+""}}function rr(t,e){var i=Ji.lastIndex=tr.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=Ji.exec(t))&&(n=tr.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:Qi(r,n)})}i=tr.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?ir(l[0].x):er(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}var nr=180/Math.PI;var sr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ar(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*nr,skewX:Math.atan(l)*nr,scaleX:a,scaleY:o}}var or,lr,ur,hr;function cr(t){if(t==="none")return sr;if(!or)or=document.createElement("DIV"),lr=document.documentElement,ur=document.defaultView;or.style.transform=t;t=ur.getComputedStyle(lr.appendChild(or),null).getPropertyValue("transform");lr.removeChild(or);t=t.slice(7,-1).split(",");return ar(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function dr(t){if(t==null)return sr;if(!hr)hr=document.createElementNS("http://www.w3.org/2000/svg","g");hr.setAttribute("transform",t);if(!(t=hr.transform.baseVal.consolidate()))return sr;t=t.matrix;return ar(t.a,t.b,t.c,t.d,t.e,t.f)}function fr(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:Qi(t,n)},{i:l-2,x:Qi(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:Qi(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:Qi(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:Qi(t,i)},{i:o-2,x:Qi(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var pr=fr(cr,"px, ","px)","deg)");var yr=fr(dr,", ",")",")");function vr(t,e){var i,r;return function(){var n=li(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function gr(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=li(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function br(t,e){var i=this._id;t+="";if(arguments.length<2){var r=ui(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?vr:gr)(i,t,e))}function mr(t,e,i){var r=t._id;t.each((function(){var t=li(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return ui(t,r).value[e]}}function Ar(t,e){var i;return(typeof e==="number"?Qi:e instanceof Ei?Zi:(i=Ei(e))?(e=i,Zi):rr)(t,e)}function wr(t){return function(){this.removeAttribute(t)}}function xr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Sr(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function kr(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function Lr(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function _r(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Cr(t,e){var i=l(t),r=i==="transform"?yr:Ar;return this.attrTween(t,typeof e==="function"?(i.local?_r:Lr)(i,r,mr(this,"attr."+t,e)):e==null?(i.local?xr:wr)(i):(i.local?kr:Sr)(i,r,e+""))}function Dr(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function Mr(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function Ur(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=l(t);return this.tween(i,(r.local?Dr:Mr)(r,e))}function Tr(t,e){return function(){oi(this,t).delay=+e.apply(this,arguments)}}function Er(t,e){return e=+e,function(){oi(this,t).delay=e}}function Ir(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Tr:Er)(e,t)):ui(this.node(),e).delay}function Nr(t,e){return function(){li(this,t).duration=+e.apply(this,arguments)}}function Wr(t,e){return e=+e,function(){li(this,t).duration=e}}function Hr(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Nr:Wr)(e,t)):ui(this.node(),e).duration}function Gr(t,e){if(typeof e!=="function")throw new Error;return function(){li(this,t).ease=e}}function Pr(t){var e=this._id;return arguments.length?this.each(Gr(e,t)):ui(this.node(),e).ease}function Or(t){if(typeof t!=="function")t=b(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new un(r,this._parents,this._name,this._id)}function Vr(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new un(a,this._parents,this._name,this._id)}function Rr(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function Yr(t,e,i){var r,n,s=Rr(e)?oi:li;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function zr(t,e){var i=this._id;return arguments.length<2?ui(this.node(),i).on.on(t):this.each(Yr(i,t,e))}function Fr(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function Xr(){return this.on("end.remove",Fr(this._id))}function Br(t){var e=this._name,i=this._id;if(typeof t!=="function")t=f(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;ai(u[d],e,i,d,u,ui(h,i))}}}return new un(s,this._parents,e,i)}function Kr(t){var e=this._name,i=this._id;if(typeof t!=="function")t=v(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=ui(h,i),y=0,g=d.length;y<g;++y){if(f=d[y]){ai(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new un(s,a,e,i)}var qr=qt.prototype.constructor;function jr(){return new qr(this._groups,this._parents)}function $r(t,e){var i,r,n;return function(){var s=Q(this,t),a=(this.style.removeProperty(t),Q(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function Zr(t){return function(){this.style.removeProperty(t)}}function Qr(t,e,i){var r,n;return function(){var s=Q(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function Jr(t,e,i){var r,n,s;return function(){var a=Q(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),Q(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function tn(t,e,i){var r=(t+="")==="transform"?pr:Ar;return e==null?this.styleTween(t,$r(t,r)).on("end.style."+t,Zr(t)):this.styleTween(t,typeof e==="function"?Jr(t,r,mr(this,"style."+t,e)):Qr(t,r,e+""),i)}function en(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function rn(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,en(t,e,i==null?"":i))}function nn(t){return function(){this.textContent=t}}function sn(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function an(t){return this.tween("text",typeof t==="function"?sn(mr(this,"text",t)):nn(t==null?"":t+""))}function on(){var t=this._name,e=this._id,i=cn();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=ui(l,e);ai(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new un(r,this._parents,t,i)}var ln=0;function un(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function hn(t){return qt().transition(t)}function cn(){return++ln}var dn=qt.prototype;un.prototype=hn.prototype={constructor:un,select:Br,selectAll:Kr,filter:Or,merge:Vr,selection:jr,transition:on,call:dn.call,nodes:dn.nodes,node:dn.node,size:dn.size,empty:dn.empty,each:dn.each,on:zr,attr:Cr,attrTween:Ur,style:tn,styleTween:rn,text:an,remove:Xr,tween:br,delay:Ir,duration:Hr,ease:Pr};var fn={time:null,delay:0,duration:250,ease:fe};function pn(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return fn.time=Re(),fn}}return i}function yn(t){var e,i;if(t instanceof un){e=t._id,t=t._name}else{e=cn(),(i=fn).time=Re(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){ai(l,t,e,u,a,i||pn(l,e))}}}return new un(r,this._parents,t,e)}qt.prototype.interrupt=di;qt.prototype.transition=yn;var vn=s.initializeDescriptionRoot,gn=s.setAccessibilityController,bn=s.initializeElementAccess,mn=s.setElementFocusHandler,An=s.setElementAccessID,wn=s.setAccessChartCounts,xn=s.hideNonessentialGroups,Sn=s.setAccessTitle,kn=s.setAccessSubtitle,Ln=s.setAccessLongDescription,_n=s.setAccessExecutiveSummary,Cn=s.setAccessPurpose,Dn=s.setAccessContext,Mn=s.setAccessStatistics,Un=s.setAccessStructure,Tn=s.setAccessAnnotation,En=s.retainAccessFocus,In=s.checkAccessFocus,Nn=s.setElementInteractionAccessState,Wn=s.setAccessibilityDescriptionWidth,Hn=s.roundTo,Gn=s.resolveLabelCollision,Pn=s.transitionEndAll,On=s.annotate,Vn=s.checkClicked,Rn=s.checkInteraction,Yn=s.convertVisaColor,zn=s.drawTooltip,Fn=s.findTagLevel,Xn=s.getColors,Bn=s.getPadding,Kn=s.initTooltipStyle,qn=s.overrideTitleTooltip,jn=s.scopeDataKeys,$n=s.chartAccessors,Zn=s.sankey,Qn=s.sankeyCenter,Jn=s.sankeyJustify,ts=s.sankeyLeft,es=s.sankeyLinkHorizontal,is=s.sankeyRight,rs=s.prepareRenderChange;var ns=t("alluvial_diagram",function(){function t(t){e(this,t);this.mainTitle=ve.mainTitle;this.subTitle=ve.subTitle;this.height=ve.height;this.width=ve.width;this.highestHeadingLevel=ve.highestHeadingLevel;this.margin=ve.margin;this.padding=ve.padding;this.sourceAccessor=ve.sourceAccessor;this.targetAccessor=ve.targetAccessor;this.valueAccessor=ve.valueAccessor;this.groupAccessor=ve.groupAccessor;this.nodeIDAccessor=ve.nodeIDAccessor;this.nodeConfig=ve.nodeConfig;this.linkConfig=ve.linkConfig;this.colorPalette=ve.colorPalette;this.hoverStyle=ve.hoverStyle;this.clickStyle=ve.clickStyle;this.cursor=ve.cursor;this.hoverOpacity=ve.hoverOpacity;this.animationConfig=ve.animationConfig;this.dataLabel=ve.dataLabel;this.showTooltip=ve.showTooltip;this.tooltipLabel=ve.tooltipLabel;this.accessibility=ve.accessibility;this.annotations=ve.annotations;this.suppressEvents=ve.suppressEvents;this.clickHighlight=ve.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.innerInteractionKeys=[];this.topLevel="h2";this.bottomLevel="p";this.sourceLinksString="sourceLinks";this.targetLinksString="targetLinks";this.shouldSetDimensions=false;this.shouldUpdateData=false;this.shouldSetColors=false;this.shouldSetTagLevels=false;this.shouldRedrawWrapper=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetSelectionClass=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetGlobalSelections=false;this.shouldSetTestingAttributes=false;this.shouldDrawInteractionState=false;this.shouldEnterUpdateExit=false;this.shouldUpdateNodeGeometries=false;this.shouldUpdateLinkGeometries=false;this.shouldDrawNodeLabels=false;this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.linkDataWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.nodeDataWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.idWatcher=function(t,e){this.chartID=t||"alluvial-diagram-"+Se();this.alluvialDiagramEl.id=this.chartID};t.prototype.mainTitleWatcher=function(t,e){};t.prototype.subTitleWatcher=function(t,e){};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.sourceAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.targetAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.valueAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.groupAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.nodeIDAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.nodeConfigWatcher=function(t,e){this.shouldEnterUpdateExit=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.linkConfigWatcher=function(t,e){this.shouldEnterUpdateExit=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.colorPaletteWatcher=function(t,e){};t.prototype.colorsWatcher=function(t,e){};t.prototype.clickStyleWatcher=function(t,e){};t.prototype.hoverStyleWatcher=function(t,e){};t.prototype.cursorWatcher=function(t,e){};t.prototype.hoverOpacityWatcher=function(t,e){};t.prototype.dataLabelWatcher=function(t,e){this.shouldDrawNodeLabels=true;this.shouldDrawInteractionState=true};t.prototype.tooltipLabelWatcher=function(t,e){};t.prototype.showTooltipWatcher=function(t,e){};t.prototype.accessibilityWatcher=function(t,e){var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldSetAnnotationAccessibility=true};t.prototype.clickWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.hoverWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.interactionWatcher=function(t,e){};t.prototype.suppressWatcher=function(t,e){};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"alluvial-diagram-"+Se();t.alluvialDiagramEl.id=t.chartID;t.setTagLevels();t.setDimensions();t.prepareData();t.validateIdAccessor();t.validateLabelText();t.validateLinkFillMode();t.validateNodeAlignment();t.validateInteractionKeys();t.validateLinkGroups();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTooltipInitialStyle();t.setNodesDimensions();t.callSankeyGenerator();t.setGlobalSelections();t.setTestingAttributes();t.enterLinkGeometries();t.updateLinkGeometries();t.exitLinkGeometries();t.enterNodeGeometries();t.updateNodeGeometries();t.exitNodeGeometries();t.enterNodeLabels();t.updateNodeLabels();t.exitNodeLabels();t.drawNodeGeometries();t.drawLinkGeometries();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.setGroupAccessibilityID();t.setChartCountAccessibility();t.setSelectedClass();t.drawNodeLabels();t.drawAnnotations();t.setAnnotationAccessibility();t.duration=750;t.defaults=false;xn(t.root.node(),null);e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;t.reSetRoot();if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}t.setNodesDimensions();t.callSankeyGenerator();t.setGlobalSelections();if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldEnterUpdateExit){t.enterLinkGeometries();t.updateLinkGeometries();t.exitLinkGeometries();t.enterNodeGeometries();t.updateNodeGeometries();t.exitNodeGeometries();t.enterNodeLabels();t.updateNodeLabels();t.exitNodeLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateNodeGeometries){t.drawNodeGeometries();t.shouldUpdateNodeGeometries=false}if(t.shouldUpdateLinkGeometries){t.drawLinkGeometries();t.shouldUpdateLinkGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldDrawNodeLabels){t.drawNodeLabels();t.shouldDrawNodeLabels=false}t.drawAnnotations();if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}e("component did update")}))};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?Bn(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.prepareData=function(){var t=this;this.nodeList=[];this.linkList=[];this.linkData.forEach((function(e,i){var r={source:e[t.sourceAccessor],target:e[t.targetAccessor],value:e[t.valueAccessor],data:e};r[t.groupAccessor]=e[t.groupAccessor];t.linkList[i]=r}));this.nodeData&&this.nodeData.length>1?this.nodeList=this.nodeData:this.createNodeList()};t.prototype.createNodeList=function(){var t=this;this.nodeList=[];this.linkData.map((function(e){if(!t.nodeList.some((function(i){return i.id===e[t.sourceAccessor]}))){var i={id:e[t.sourceAccessor]};t.nodeList.push(i)}if(!t.nodeList.some((function(i){return i.id===e[t.targetAccessor]}))){var r={id:e[t.targetAccessor]};t.nodeList.push(r)}}))};t.prototype.validateLabelText=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.innerIDAccessor};t.prototype.validateIdAccessor=function(){this.innerIDAccessor=this.nodeData&&this.nodeData.length>1?this.nodeList[0][this.nodeIDAccessor]?this.nodeIDAccessor:"id":"id"};t.prototype.validateLinkFillMode=function(){this.innerLinkFillMode=this.groupAccessor&&this.linkConfig.fillMode==="group"?"group":this.linkConfig.fillMode==="source"?"source":this.linkConfig.fillMode==="target"?"target":this.linkConfig.fillMode==="path"?"path":"none"};t.prototype.validateNodeAlignment=function(){this.innerNodeAlignment=this.nodeConfig.alignment==="right"?is:this.nodeConfig.alignment==="center"?Qn:this.nodeConfig.alignment==="justify"?Jn:ts};t.prototype.validateInteractionKeys=function(){this.interactionKeysWithObjs=[];this.innerInteractionKeys=[];this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.sourceAccessor,this.targetAccessor]};t.prototype.validateLinkGroups=function(){var t=this;this.groupKeys=[];if(this.groupAccessor){this.groupKeys=this.linkData.map((function(e){return e[t.groupAccessor]})).filter((function(t,e,i){return i.indexOf(t)===e}))}};t.prototype.setNodesDimensions=function(){var t=this;this.alluvialProperties=Zn(this.nodeConfig.compare,this.linkConfig.visible).nodeId((function(e){return e[t.innerIDAccessor]})).nodeWidth(this.nodeConfig.width).nodePadding(this.nodeConfig.padding).nodeAlign(this.innerNodeAlignment).nodeSort(null).size([this.innerPaddedWidth,this.innerPaddedHeight])};t.prototype.callSankeyGenerator=function(){var t=this;var e=function(e,i){return t.alluvialProperties({nodes:e.map((function(t){return Object.assign({},t)})),links:i.map((function(t){return Object.assign({},t)}))})};this.preppedData=e(this.nodeList,this.linkList);this.nodeCount=$t(this.preppedData.nodes,(function(t){return t.layer}))};t.prototype.renderRootElements=function(){this.svg=jt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").append("svg").attr("width",this.width).attr("height",this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.nodeG=this.rootG.append("g").attr("class","alluvial-node-group");this.linkG=this.rootG.append("g").attr("class","alluvial-link-group");this.labelG=this.rootG.append("g").attr("class","alluvial-dataLabel-group");this.tooltipG=jt(this.alluvialDiagramEl).select(".alluvial-tooltip")};t.prototype.reSetRoot=function(){var t=rs({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:pe});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=rs({selection:this.root,duration:this.duration,namespace:"root_reset",easing:pe});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=rs({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:pe});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");Wn(this.chartID,this.width)};t.prototype.setGlobalSelections=function(){var t=this;if(this.currentNodeLayers){this.previousNodeLayers=this.currentNodeLayers}var e=this.nodeG.selectAll(".node-wrapper").data(this.preppedData.nodes,(function(e){return e[t.innerIDAccessor]}));this.enterNodes=e.enter().append("g").attr("class","node-wrapper").attr("data-offset-group","true");this.enterNodes.append("rect").attr("class","alluvial-node");this.exitNodes=e.exit();this.updateNodes=e.merge(this.enterNodes);this.updateNodes.selectAll(".alluvial-node").data((function(t){return[t]}));this.currentNodeLayers=this.preppedData.nodes;if(this.previousNodeLayers){var i=this.currentNodeLayers.filter((function(e){return t.previousNodeLayers.map((function(e){return e[t.innerIDAccessor]})).includes(e.id)}));this.previousMaxNodeLayer=$t(i,(function(t){return t.layer}));this.previousMinNodeLayer=Zt(i,(function(t){return t.layer}));var r=this.previousNodeLayers.filter((function(e){return t.currentNodeLayers.map((function(e){return e[t.innerIDAccessor]})).includes(e.id)}));this.currentMaxNodeLayer=$t(r,(function(t){return t.layer}));this.currentMinNodeLayer=Zt(r,(function(t){return t.layer}))}if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateNodes.each((function(t,e,i){bn(i[e])}));var n=this.preppedData.nodes;var s=this.linkG.selectAll(".alluvial-link-wrapper").data(n,(function(e){return e[t.innerIDAccessor]}));this.enterLinkGroups=s.enter().append("g");this.exitLinkGroups=s.exit().remove();this.updateLinkGroups=s.merge(this.enterLinkGroups);var a=this.updateLinkGroups.selectAll(".alluvial-link").data((function(t){return t.sourceLinks}),(function(e){return e.data[t.sourceAccessor]+e.data[t.targetAccessor]}));this.enterLinks=a.enter().append("path");this.exitLinks=a.exit();this.updateLinks=a.merge(this.enterLinks).attr("data-offset-element",this.innerLinkFillMode)}else{this.updateNodes.attr("tabindex",null);var a=this.linkG.selectAll(".alluvial-link").data(this.preppedData.links,(function(e){return e.data[t.sourceAccessor]+e.data[t.targetAccessor]}));this.enterLinks=a.enter().append("path");this.exitLinks=a.exit();this.updateLinks=a.merge(this.enterLinks).attr("data-offset-element",null)}var o=this.labelG.selectAll("text").data(this.preppedData.nodes,(function(e){return e[t.innerIDAccessor]}));this.enteringLabels=o.enter().append("text");this.exitingLabels=o.exit();this.updatingLabels=o.merge(this.enteringLabels)};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){jt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid","chart-container");jt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid","main-title");jt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.tooltipG.attr("data-testid","tooltip-container");this.updateNodes.attr("data-testid","node").attr("data-id",(function(e){return"node-"+e[t.innerIDAccessor]}));if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateLinkGroups.attr("data-testid","alluvial-link-group").attr("data-id",(function(e){return"link-group-"+e[t.innerIDAccessor]}))}this.updateLinks.attr("data-testid","link").attr("data-id",(function(e){return"link-"+e.source[t.innerIDAccessor]+"-"+e.target[t.innerIDAccessor]}));this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",(function(e){return"dataLabel-"+e[t.innerIDAccessor]}))}else{jt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid",null);jt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid",null);jt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.updateNodes.attr("data-testid",null).attr("data-id",null);if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateLinkGroups.attr("data-testid",null).attr("data-id",null)}this.updateLinks.attr("data-testid",null).attr("data-id",null);this.updatingLabels.attr("data-testid",null).attr("data-id",null)}};t.prototype.newColumnInterpolationPosition=function(){var t=this;return de().source((function(e){return e.target.layer<=t.previousMinNodeLayer?[e.source.x0,e.y0]:e.source.layer>=t.previousMaxNodeLayer?[e.target.x1,e.y0]:[e.source.x1,e.y0]})).target((function(e){return e.target.layer<=t.previousMinNodeLayer?[e.source.x0,e.y0]:e.source.layer>=t.previousMaxNodeLayer?[e.target.x1,e.y0]:[e.target.x0,e.y1]}))};t.prototype.enterLinkGeometries=function(){var t=this;this.enterLinks.interrupt();var e=this.linkConfig.visible?this.linkConfig.opacity:0;if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.enterLinkGroups.attr("class","alluvial-link-wrapper")}this.enterLinks.attr("class","alluvial-link").classed("entering",true).attr("d",this.newColumnInterpolationPosition());this.enterLinks.attr("cursor",!this.suppressEvents?this.cursor:null).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("stroke-dasharray",(function(e,i,r){e.linelength=r[i].getTotalLength()-2;return e.target.layer<=t.previousMinNodeLayer||e.source.layer>=t.previousMaxNodeLayer?"":e.linelength+" "+e.linelength})).attr("stroke-dashoffset",(function(e){return e.target.layer<=t.previousMinNodeLayer||e.source.layer>=t.previousMaxNodeLayer?0:e.linelength})).attr("stroke-width",(function(e){return e.target.layer<=t.previousMinNodeLayer||e.source.layer>=t.previousMaxNodeLayer?Math.max(1,e.width):.1})).attr("stroke-opacity",e).transition("enter").duration(this.duration).ease(pe).attr("d",es()).attr("stroke-width",(function(e){return e.target.layer<=t.previousMinNodeLayer||e.source.layer>=t.previousMaxNodeLayer?Math.max(1,e.width):1})).attr("stroke-dashoffset",0)};t.prototype.updateLinkGeometries=function(){var t=this;this.updateLinks.interrupt();var e=this.linkConfig.visible?this.linkConfig.opacity:0;this.updateLinks.transition("opacity").ease(pe).duration(this.duration).attr("stroke-opacity",(function(i){return Rn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))};t.prototype.exitLinkGeometries=function(){var t=this;this.exitLinks.interrupt();var e=this.linkConfig.visible?this.linkConfig.opacity:0;this.exitLinks.attr("stroke-dasharray",(function(e,i,r){e.linelength=r[i].getTotalLength();return e.target.layer<=t.previousMinNodeLayer||e.source.layer>=t.previousMaxNodeLayer?"":e.linelength+" "+e.linelength})).transition("exit").ease(pe).duration(this.duration).attr("d",this.newColumnInterpolationPosition()).attr("stroke-opacity",e).attr("stroke-dashoffset",(function(t){return t.linelength})).attr("stroke-width",(function(e){return e.target.layer<=t.currentMinNodeLayer||e.source.layer>=t.currentMaxNodeLayer?Math.max(1,e.width):.1})).remove()};t.prototype.drawLinkGeometries=function(){var t=this;this.removeTemporaryClickedLinks(this.svg.node());if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateLinkGroups.classed("link-group offset-target",true)}this.updateLinks.attr("stroke",(function(e){return t.innerLinkFillMode==="group"?t.colorArr[t.groupKeys.indexOf(e[t.groupAccessor])]:t.innerLinkFillMode==="none"?t.colorArr[0]||"#E4E4E4":t.innerLinkFillMode==="path"?t.colorArr[e.index]:t.innerLinkFillMode==="source"?t.colorArr[e.source.index]:t.colorArr[e.target.index]})).attr("fill","none").transition("update").duration(this.duration).ease(pe).attr("d",es()).attr("stroke-width",(function(t){return Math.max(1,t.width)})).call(Pn,(function(){t.removeTemporaryClickedLinks(t.svg.node());t.updateLinks.classed("entering",false).attr("d",es()).attr("stroke-dasharray","");t.updateLinks.each((function(e,i,r){var n=t.clickHighlight&&t.clickHighlight.length>0&&Vn(e.data,t.clickHighlight,t.innerInteractionKeys);if(n){t.drawDuplicateClickedLink(r[i],e)}}))}));this.updateLinks.transition("accessibilityAfterExit").duration(this.duration).ease(pe).call(Pn,(function(){var e=In(t.rootG.node());t.exitLinks.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();En({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawDuplicateClickedLink=function(t,e){var i=t;var r="vcl-accessibility-focus";var n=i.parentNode;var s=i.cloneNode();jt(s).classed("alluvial-link",false).classed(r+"-highlight "+r+"-hover",true).classed("duplicated-clicked-link",true).classed("entering",false).data([e.data]).attr("focusable",false).attr("aria-label",null).attr("aria-hidden",true).attr("role",null).style("pointer-events","none").attr("tabindex",null);if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){var a=n.parentNode;var o=jt(a).selectAll(".link-group")._groups[0];var l=o[o.length-1];l.appendChild(s)}else{n.appendChild(s)}};t.prototype.removeTemporaryClickedLinks=function(t){jt(t).selectAll(".duplicated-clicked-link").remove()};t.prototype.enterNodeGeometries=function(){var t=this;this.enterNodes.interrupt();if(!this.defaults){this.enterNodes.classed("entering",true)}this.enterNodes.select(".alluvial-node").attr("fill",(function(e,i){return t.nodeConfig.fill?t.colorArr[i]||t.colorArr[0]:"#E4E4E4"})).attr("stroke","#717171").attr("stroke-width","1px").attr("x",(function(t){return t.x0})).attr("y",(function(t){return t.y0})).attr("height",(function(t){return t.y1-t.y0})).attr("opacity",0).attr("width",(function(t){return t.x1-t.x0}))};t.prototype.updateNodeGeometries=function(){var t=this;this.updateNodes.interrupt();this.updateNodes.select(".alluvial-node").transition("node_opacity").duration((function(e,i,r){if(jt(r[i].parentNode).classed("entering")){return t.duration/3}return 0})).delay((function(e,i,r){return jt(r[i].parentNode).classed("entering")?t.duration/1.2:0})).ease(pe).attr("opacity",1)};t.prototype.exitNodeGeometries=function(){this.exitNodes.interrupt();this.exitNodes.select(".alluvial-node").transition("exit").ease(pe).duration(this.duration/3).attr("opacity",0).attr("width",0).select((function(){return this.parentNode})).remove()};t.prototype.drawNodeGeometries=function(){var t=this;this.updateNodes.select(".alluvial-node").transition("update_nodes").duration((function(e,i,r){return jt(r[i].parentNode).classed("entering")?t.duration/3:t.duration})).delay((function(e,i,r){return jt(r[i].parentNode).classed("entering")?t.duration/1.2:0})).ease(pe).attr("x",(function(t){return t.x0})).attr("y",(function(t){return t.y0})).attr("height",(function(t){return t.y1-t.y0})).attr("width",(function(t){return t.x1-t.x0})).attr("opacity",1).call(Pn,(function(){t.updateNodes.classed("entering",false)}))};t.prototype.enterNodeLabels=function(){var t=this;this.enteringLabels.interrupt();this.widthAllNodesNoLinks=this.nodeCount*this.nodeConfig.width+this.nodeCount*this.nodeConfig.width;this.noLinksLeftPadding=(this.innerPaddedWidth-this.widthAllNodesNoLinks)/2;this.enteringLabels.attr("class","alluvial-diagram-dataLabel entering").attr("opacity",0).attr("x",(function(e){if(t.linkConfig.visible){return t.dataLabel.placement==="outside"?e.x0<t.innerPaddedWidth/2?e.x0:e.x1:e.x0<t.innerPaddedWidth/2?e.x1:e.x0}else{return e.x0<t.innerPaddedWidth/2?t.noLinksLeftPadding:t.noLinksLeftPadding+t.widthAllNodesNoLinks+t.nodeConfig.width}})).attr("y",(function(t){return(t.y1+t.y0)/2})).attr("dx",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"-0.5em":"0.5em":e.x0<t.innerPaddedWidth/2?"0.5em":"-0.5em"})).attr("dy","0.4em").attr("text-anchor",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"end":"start":e.x0<t.innerPaddedWidth/2?"start":"end"}))};t.prototype.updateNodeLabels=function(){var t=this;this.updatingLabels.interrupt("label_opacity");var e=this.dataLabel.visible?1:0;this.updatingLabels.transition("label_opacity").ease(pe).duration((function(e,i,r){if(jt(r[i]).classed("entering")){return t.duration/3}return 0})).delay((function(e,i,r){return jt(r[i]).classed("entering")?t.duration/1.2:0})).attr("opacity",(function(i){if(t.linkConfig.visible){var r=true;if(i[t.sourceLinksString].length){r=i[t.sourceLinksString].some((function(i){return Rn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}if(i[t.targetLinksString].length){r=i[t.targetLinksString].some((function(i){return Rn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}return r?1:0}else{return i.layer===0?e:i.layer===t.nodeCount?e:0}}))};t.prototype.exitNodeLabels=function(){this.exitingLabels.interrupt();this.exitingLabels.transition("exit_labels").duration(this.duration/3).ease(pe).attr("opacity",0).remove()};t.prototype.drawNodeLabels=function(){var t=this;var e=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;this.widthAllNodesNoLinks=this.nodeCount*this.nodeConfig.width+this.nodeCount*this.nodeConfig.width;this.noLinksLeftPadding=(this.innerPaddedWidth-this.widthAllNodesNoLinks)/2;var i=this.updatingLabels.text((function(e){return e[t.innerLabelAccessor]})).attr("data-x",(function(e){if(t.linkConfig.visible){return t.dataLabel.placement==="outside"?e.x0<t.innerPaddedWidth/2?e.x0:e.x1:e.x0<t.innerPaddedWidth/2?e.x1:e.x0}else{return e.x0<t.innerPaddedWidth/2?t.noLinksLeftPadding:t.noLinksLeftPadding+t.widthAllNodesNoLinks+t.nodeConfig.width}})).attr("data-y",(function(t){return(t.y1+t.y0)/2})).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-use-dx",e).attr("data-use-dy",e).attr("dx",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"-0.5em":"0.5em":e.x0<t.innerPaddedWidth/2?"0.5em":"-0.5em"})).attr("dy","0.4em").transition("update_labels").duration((function(e,i,r){return jt(r[i]).classed("entering")?t.duration/3:t.duration})).delay((function(e,i,r){return jt(r[i]).classed("entering")?t.duration/1.2:0})).ease(pe);if(this.dataLabel.visible&&(this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly)){var r=this.dataLabel&&this.dataLabel.collisionPlacement;var n=this.updateNodes.select(".alluvial-node").attr("data-x",(function(t){return t.x0})).attr("data-y",(function(t){return t.y0})).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-height",(function(t){return t.y1-t.y0})).attr("data-width",(function(t){return t.x1-t.x0})).each((function(i,n,s){if(!e){var a=s[n];var o=a.parentNode;var l="alluvial-node-collision-clone";var u=a.cloneNode();jt(u).classed("alluvial-node",false).classed(l,true).classed("entering",false).data([i]).attr("focusable",false).attr("aria-label",null).attr("aria-hidden",true).attr("role",null).style("pointer-events","none").style("visibility","hidden").attr("tabindex",null).attr("data-x",r==="all"?i.x0:r==="outside"?i.x0<t.innerPaddedWidth/2?i.x0:i.x1:i.x0<t.innerPaddedWidth/2?i.x1:i.x0).attr("data-width",r==="all"?i.x1-i.x0:1);o.appendChild(u)}}));var s=this.updateNodes.select(".alluvial-node-collision-clone");this.bitmaps=Gn({labelSelection:i,avoidMarks:e?[n]:[n,s],validPositions:e?["middle"]:["left","right"],offsets:e?[1]:[4,4],accessors:[this.nodeIDAccessor],size:[Hn(this.width,0),Hn(this.height,0)],hideOnly:this.dataLabel.visible&&e});s.remove();if(e){i.attr("text-anchor",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"end":"start":e.x0<t.innerPaddedWidth/2?"start":"end"})).attr("x",(function(e){if(t.linkConfig.visible){return t.dataLabel.placement==="outside"?e.x0<t.innerPaddedWidth/2?e.x0:e.x1:e.x0<t.innerPaddedWidth/2?e.x1:e.x0}else{return e.x0<t.innerPaddedWidth/2?t.noLinksLeftPadding:t.noLinksLeftPadding+t.widthAllNodesNoLinks+t.nodeConfig.width}})).attr("y",(function(t){return(t.y1+t.y0)/2})).attr("dx",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"-0.5em":"0.5em":e.x0<t.innerPaddedWidth/2?"0.5em":"-0.5em"})).attr("dy","0.4em")}}else{i.attr("text-anchor",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"end":"start":e.x0<t.innerPaddedWidth/2?"start":"end"})).attr("x",(function(e){if(t.linkConfig.visible){return t.dataLabel.placement==="outside"?e.x0<t.innerPaddedWidth/2?e.x0:e.x1:e.x0<t.innerPaddedWidth/2?e.x1:e.x0}else{return e.x0<t.innerPaddedWidth/2?t.noLinksLeftPadding:t.noLinksLeftPadding+t.widthAllNodesNoLinks+t.nodeConfig.width}})).attr("y",(function(t){return(t.y1+t.y0)/2})).attr("dx",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"-0.5em":"0.5em":e.x0<t.innerPaddedWidth/2?"0.5em":"-0.5em"})).attr("dy","0.4em")}i.call(Pn,(function(){t.updatingLabels.classed("entering",false)}))};t.prototype.updateInteractionState=function(){var t=this;this.removeTemporaryClickedLinks(this.svg.node());this.updateLinks.interrupt("opacity");this.updatingLabels.interrupt("label_opacity");var e=this.linkConfig.visible?this.linkConfig.opacity:0;var i=this.dataLabel.visible?1:0;this.updateLinks.attr("stroke-opacity",(function(i){return Rn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}));this.updateLinks.each((function(e,i,r){var n=t.clickHighlight&&t.clickHighlight.length>0&&Vn(e.data,t.clickHighlight,t.innerInteractionKeys);if(n){t.drawDuplicateClickedLink(r[i],e)}}));this.updatingLabels.attr("opacity",(function(e){if(t.linkConfig.visible){var r=true;if(e[t.sourceLinksString].length){r=e[t.sourceLinksString].some((function(e){return Rn(e.data,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}if(e[t.targetLinksString].length){r=e[t.targetLinksString].some((function(e){return Rn(e.data,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}return r?1:0}else{return e.layer===0?i:e.layer===t.nodeCount?i:0}}))};t.prototype.drawAnnotations=function(){var t=this;var e=this.preppedData;var i=[];this.annotations.forEach((function(r){var n=Object.assign({},r);var s=r.data;if(e&&s){if(n.positionType==="node"&&n.data.hasOwnProperty(t.nodeIDAccessor)){var a=e.nodes.findIndex((function(e){return e[t.nodeIDAccessor]===n.data[t.nodeIDAccessor]}));s=e.nodes[a]}else if(n.positionType==="source"||n.positionType==="target"&&n.data.hasOwnProperty(t.sourceAccessor)&&n.data.hasOwnProperty(t.targetAccessor)){var a=e.links.findIndex((function(e){return e.data[t.sourceAccessor]===n.data[t.sourceAccessor]&&e.data[t.targetAccessor]===n.data[t.targetAccessor]}));s=e.links[a]}}if(n.positionType&&s){if(n.positionType==="target"&&s.target){n.x=s.target.x0;n.y=s.y1}else if(n.positionType==="source"&&s.source){n.x=s.source.x1;n.y=s.y0}else if(n.positionType==="node"){n.x=s.x1;n.y=(s.y1+s.y0)/2}}delete n.data;i.push(n)}));On({source:this.rootG.node(),data:i,ignoreScales:true,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})};t.prototype.setColors=function(){this.colorArr=this.colors?Yn(this.colors):Xn(this.colorPalette,this.nodeList.length)};t.prototype.setTagLevels=function(){this.topLevel=Fn(this.highestHeadingLevel);this.bottomLevel=Fn(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){vn({rootEle:this.alluvialDiagramEl,title:this.accessibility.title||this.mainTitle,chartTag:"alluvial-diagram",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){var t=jn(this,$n,"alluvial-diagram");gn({node:this.svg.node(),chartTag:"alluvial-diagram",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"link",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupAccessor:this.innerIDAccessor,groupKeys:["value"],groupName:"node"})};t.prototype.setGeometryAccessibilityAttributes=function(){this.updateLinks.each((function(t,e,i){bn(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=jn(this,$n,"alluvial-diagram");this.updateLinks.each((function(i,r,n){mn({node:n[r],geomType:"link",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"node",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});An({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateNodes.each((function(e,i,r){An({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartCountAccessibility=function(){wn({rootEle:this.alluvialDiagramEl,parentGNode:this.linkG.node(),chartTag:"alluvial-diagram",geomType:"link",groupName:"node"})};t.prototype.setSelectedClass=function(){var t=this;this.updateLinks.classed("highlight",(function(e){var i=Rn(e.data,true,false,"",t.clickHighlight,t.innerInteractionKeys);return t.clickHighlight&&t.clickHighlight.length?i:false})).each((function(e,i,r){var n=Rn(e.data,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;Nn(r[i],n,s)}))};t.prototype.setChartAccessibilityTitle=function(){Sn(this.alluvialDiagramEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){kn(this.alluvialDiagramEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){Ln(this.alluvialDiagramEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){_n(this.alluvialDiagramEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){Cn(this.alluvialDiagramEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){Dn(this.alluvialDiagramEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){Mn(this.alluvialDiagramEl,this.accessibility.statisticalNotes)};t.prototype.setChartAccessibilityStructureNotes=function(){Un(this.alluvialDiagramEl,this.accessibility.structureNotes)};t.prototype.setAnnotationAccessibility=function(){Tn(this.alluvialDiagramEl,this.annotations)};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t.data)};t.prototype.onHoverHandler=function(t){qn(this.chartID,true);this.hoverFunc.emit(t.data);if(this.showTooltip){this.eventsTooltip({data:t,evt:Nt,isToShow:true})}};t.prototype.onMouseOutHandler=function(){qn(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){Kn(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;zn({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,groupAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,ordinalAccessor:this.innerIDAccessor,chartType:"alluvial-diagram"})};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}this.setDimensions();this.prepareData();this.validateIdAccessor();this.validateLabelText();this.validateLinkFillMode();this.validateInteractionKeys();this.validateLinkGroups();this.setColors();return(r("div",null,r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"alluvial-main-title vcl-main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions alluvial-sub-title vcl-sub-title"},this.subTitle),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"link",groupName:"node",chartTag:"alluvial-diagram",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target",cousinActionOverride:"on a link",cousinResultOverride:this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"?"Drill up to link's Source or Target node":"",disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-alluvial-container"}),r("div",{class:"alluvial-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}})))))};t.prototype.init=function(){var t=Object.keys(ve);var e=0;var i={hoverOpacity:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},linkConfig:Object.assign({exception:false})};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:ve[t[e]]}};Object.defineProperty(t.prototype,"alluvialDiagramEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{linkData:["linkDataWatcher"],nodeData:["nodeDataWatcher"],uniqueID:["idWatcher"],mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],highestHeadingLevel:["headingWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],sourceAccessor:["sourceAccessorWatcher"],targetAccessor:["targetAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],nodeIDAccessor:["nodeIDAccessorWatcher"],nodeConfig:["nodeConfigWatcher"],linkConfig:["linkConfigWatcher"],colorPalette:["colorPaletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],cursor:["cursorWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],annotations:["annotationsWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}alluvial-diagram{cursor:default}alluvial-diagram .annotations{pointer-events:none}alluvial-diagram .annotations .handle{pointer-events:all}alluvial-diagram .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}alluvial-diagram .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}alluvial-diagram .hidden{display:none}alluvial-diagram .node rect{cursor:move}alluvial-diagram .node text{pointer-events:none;text-shadow:0 1px 0 #fff}alluvial-diagram .link{fill:none;stroke:#000;stroke-opacity:0.2}alluvial-diagram .link:hover{stroke-opacity:0.5}"},enumerable:true,configurable:true});return t}());var ss="http://www.w3.org/1999/xhtml";var as={svg:"http://www.w3.org/2000/svg",xhtml:ss,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function os(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return as.hasOwnProperty(e)?{space:as[e],local:t}:t}function ls(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===ss&&e.documentElement.namespaceURI===ss?e.createElement(t):e.createElementNS(i,t)}}function us(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hs(t){var e=os(t);return(e.local?us:ls)(e)}function cs(){}function ds(t){return t==null?cs:function(){return this.querySelector(t)}}function fs(t){if(typeof t!=="function")t=ds(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new Ba(r,this._parents)}function ps(){return[]}function ys(t){return t==null?ps:function(){return this.querySelectorAll(t)}}function vs(t){if(typeof t!=="function")t=ys(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new Ba(r,n)}function gs(t){return function(){return this.matches(t)}}function bs(t){if(typeof t!=="function")t=gs(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new Ba(r,this._parents)}function ms(t){return new Array(t.length)}function As(){return new Ba(this._enter||this._groups.map(ms),this._parents)}function ws(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}ws.prototype={constructor:ws,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function xs(t){return function(){return t}}var Ss="$";function ks(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new ws(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function Ls(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=Ss+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=Ss+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new ws(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function _s(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?Ls:ks,r=this._parents,n=this._groups;if(typeof t!=="function")t=xs(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new Ba(a,r);a._enter=o;a._exit=l;return a}function Cs(){return new Ba(this._exit||this._groups.map(ms),this._parents)}function Ds(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function Ms(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new Ba(a,this._parents)}function Us(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function Ts(t){if(!t)t=Es;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new Ba(n,this._parents).order()}function Es(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Is(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function Ns(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function Ws(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function Hs(){var t=0;this.each((function(){++t}));return t}function Gs(){return!this.node()}function Ps(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function Os(t){return function(){this.removeAttribute(t)}}function Vs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rs(t,e){return function(){this.setAttribute(t,e)}}function Ys(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function zs(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function Fs(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function Xs(t,e){var i=os(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?Vs:Os:typeof e==="function"?i.local?Fs:zs:i.local?Ys:Rs)(i,e))}function Bs(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ks(t){return function(){this.style.removeProperty(t)}}function qs(t,e,i){return function(){this.style.setProperty(t,e,i)}}function js(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function $s(t,e,i){return arguments.length>1?this.each((e==null?Ks:typeof e==="function"?js:qs)(t,e,i==null?"":i)):Zs(this.node(),t)}function Zs(t,e){return t.style.getPropertyValue(e)||Bs(t).getComputedStyle(t,null).getPropertyValue(e)}function Qs(t){return function(){delete this[t]}}function Js(t,e){return function(){this[t]=e}}function ta(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function ea(t,e){return arguments.length>1?this.each((e==null?Qs:typeof e==="function"?ta:Js)(t,e)):this.node()[t]}function ia(t){return t.trim().split(/^|\s+/)}function ra(t){return t.classList||new na(t)}function na(t){this._node=t;this._names=ia(t.getAttribute("class")||"")}na.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function sa(t,e){var i=ra(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function aa(t,e){var i=ra(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function oa(t){return function(){sa(this,t)}}function la(t){return function(){aa(this,t)}}function ua(t,e){return function(){(e.apply(this,arguments)?sa:aa)(this,t)}}function ha(t,e){var i=ia(t+"");if(arguments.length<2){var r=ra(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?ua:e?oa:la)(i,e))}function ca(){this.textContent=""}function da(t){return function(){this.textContent=t}}function fa(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function pa(t){return arguments.length?this.each(t==null?ca:(typeof t==="function"?fa:da)(t)):this.node().textContent}function ya(){this.innerHTML=""}function va(t){return function(){this.innerHTML=t}}function ga(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function ba(t){return arguments.length?this.each(t==null?ya:(typeof t==="function"?ga:va)(t)):this.node().innerHTML}function ma(){if(this.nextSibling)this.parentNode.appendChild(this)}function Aa(){return this.each(ma)}function wa(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xa(){return this.each(wa)}function Sa(t){var e=typeof t==="function"?t:hs(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function ka(){return null}function La(t,e){var i=typeof t==="function"?t:hs(t),r=e==null?ka:typeof e==="function"?e:ds(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function _a(){var t=this.parentNode;if(t)t.removeChild(this)}function Ca(){return this.each(_a)}function Da(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ma(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ua(t){return this.select(t?Ma:Da)}function Ta(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Ea={};var Ia=null;if(typeof document!=="undefined"){var Na=document.documentElement;if(!("onmouseenter"in Na)){Ea={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Wa(t,e,i){t=Ha(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function Ha(t,e,i){return function(r){var n=Ia;Ia=r;try{t.call(this,this.__data__,e,i)}finally{Ia=n}}}function Ga(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function Pa(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function Oa(t,e,i){var r=Ea.hasOwnProperty(t.type)?Wa:Ha;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function Va(t,e,i){var r=Ga(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?Oa:Pa;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function Ra(t,e,i){var r=Bs(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function Ya(t,e){return function(){return Ra(this,t,e)}}function za(t,e){return function(){return Ra(this,t,e.apply(this,arguments))}}function Fa(t,e){return this.each((typeof e==="function"?za:Ya)(t,e))}var Xa=[null];function Ba(t,e){this._groups=t;this._parents=e}function Ka(){return new Ba([[document.documentElement]],Xa)}Ba.prototype=Ka.prototype={constructor:Ba,select:fs,selectAll:vs,filter:bs,data:_s,enter:As,exit:Cs,join:Ds,merge:Ms,order:Us,sort:Ts,call:Is,nodes:Ns,node:Ws,size:Hs,empty:Gs,each:Ps,attr:Xs,style:$s,property:ea,classed:ha,text:pa,html:ba,raise:Aa,lower:xa,append:Sa,insert:La,remove:Ca,clone:Ua,datum:Ta,on:Va,dispatch:Fa};function qa(t){return typeof t==="string"?new Ba([[document.querySelector(t)]],[document.documentElement]):new Ba([[t]],Xa)}function ja(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function $a(t){if(t.length===1)t=Za(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function Za(t){return function(e,i){return ja(t(e),i)}}var Qa=$a(ja);var Ja=Qa.right;function to(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var eo=Math.sqrt(50),io=Math.sqrt(10),ro=Math.sqrt(2);function no(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=so(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function so(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=eo?10:s>=io?5:s>=ro?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=eo?10:s>=io?5:s>=ro?2:1)}function ao(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=eo)n*=10;else if(s>=io)n*=5;else if(s>=ro)n*=2;return e<t?-n:n}function oo(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function lo(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function uo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var ho="$";function co(){}co.prototype=fo.prototype={constructor:co,has:function(t){return ho+t in this},get:function(t){return this[ho+t]},set:function(t,e){this[ho+t]=e;return this},remove:function(t){var e=ho+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===ho)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===ho)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===ho)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===ho)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===ho)++t;return t},empty:function(){for(var t in this)if(t[0]===ho)return false;return true},each:function(t){for(var e in this)if(e[0]===ho)t(this[e],e.slice(1),this)}};function fo(t,e){var i=new co;if(t instanceof co)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function po(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=fo(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,yo,vo)},map:function(t){return s(t,0,go,bo)},entries:function(t){return a(s(t,0,go,bo),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function yo(){return{}}function vo(t,e,i){t[e]=i}function go(){return fo()}function bo(t,e,i){t.set(e,i)}var mo=Array.prototype;var Ao=mo.map;var wo=mo.slice;var xo={name:"implicit"};function So(){var t=fo(),e=[],i=[],r=xo;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==xo)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=fo();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=wo.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return So(e,i).unknown(r)};uo.apply(n,arguments);return n}function ko(){var t=So().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=to(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return ko(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return uo.apply(h(),arguments)}function Lo(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function _o(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function Co(){}var Do=.7;var Mo=1/Do;var Uo="\\s*([+-]?\\d+)\\s*",To="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Eo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Io=/^#([0-9a-f]{3,8})$/,No=new RegExp("^rgb\\("+[Uo,Uo,Uo]+"\\)$"),Wo=new RegExp("^rgb\\("+[Eo,Eo,Eo]+"\\)$"),Ho=new RegExp("^rgba\\("+[Uo,Uo,Uo,To]+"\\)$"),Go=new RegExp("^rgba\\("+[Eo,Eo,Eo,To]+"\\)$"),Po=new RegExp("^hsl\\("+[To,Eo,Eo]+"\\)$"),Oo=new RegExp("^hsla\\("+[To,Eo,Eo,To]+"\\)$");var Vo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lo(Co,Fo,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ro,formatHex:Ro,formatHsl:Yo,formatRgb:zo,toString:zo});function Ro(){return this.rgb().formatHex()}function Yo(){return tl(this).formatHsl()}function zo(){return this.rgb().formatRgb()}function Fo(t){var e,i;t=(t+"").trim().toLowerCase();return(e=Io.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Xo(e):i===3?new jo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?Bo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?Bo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=No.exec(t))?new jo(e[1],e[2],e[3],1):(e=Wo.exec(t))?new jo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ho.exec(t))?Bo(e[1],e[2],e[3],e[4]):(e=Go.exec(t))?Bo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Po.exec(t))?Jo(e[1],e[2]/100,e[3]/100,1):(e=Oo.exec(t))?Jo(e[1],e[2]/100,e[3]/100,e[4]):Vo.hasOwnProperty(t)?Xo(Vo[t]):t==="transparent"?new jo(NaN,NaN,NaN,0):null}function Xo(t){return new jo(t>>16&255,t>>8&255,t&255,1)}function Bo(t,e,i,r){if(r<=0)t=e=i=NaN;return new jo(t,e,i,r)}function Ko(t){if(!(t instanceof Co))t=Fo(t);if(!t)return new jo;t=t.rgb();return new jo(t.r,t.g,t.b,t.opacity)}function qo(t,e,i,r){return arguments.length===1?Ko(t):new jo(t,e,i,r==null?1:r)}function jo(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}Lo(jo,qo,_o(Co,{brighter:function(t){t=t==null?Mo:Math.pow(Mo,t);return new jo(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?Do:Math.pow(Do,t);return new jo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:$o,formatHex:$o,formatRgb:Zo,toString:Zo}));function $o(){return"#"+Qo(this.r)+Qo(this.g)+Qo(this.b)}function Zo(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Qo(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function Jo(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new il(t,e,i,r)}function tl(t){if(t instanceof il)return new il(t.h,t.s,t.l,t.opacity);if(!(t instanceof Co))t=Fo(t);if(!t)return new il;if(t instanceof il)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new il(a,o,l,t.opacity)}function el(t,e,i,r){return arguments.length===1?tl(t):new il(t,e,i,r==null?1:r)}function il(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}Lo(il,el,_o(Co,{brighter:function(t){t=t==null?Mo:Math.pow(Mo,t);return new il(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?Do:Math.pow(Do,t);return new il(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new jo(rl(t>=240?t-240:t+120,n,r),rl(t,n,r),rl(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function rl(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function nl(t){return function(){return t}}function sl(t,e){return function(i){return t+i*e}}function al(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function ol(t){return(t=+t)===1?ll:function(e,i){return i-e?al(e,i,t):nl(isNaN(e)?i:e)}}function ll(t,e){var i=e-t;return i?sl(t,i):nl(isNaN(t)?e:t)}var ul=function t(e){var i=ol(e);function r(t,e){var r=i((t=qo(t)).r,(e=qo(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=ll(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function hl(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function cl(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dl(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=wl(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function fl(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function pl(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function yl(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=wl(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var vl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gl=new RegExp(vl.source,"g");function bl(t){return function(){return t}}function ml(t){return function(e){return t(e)+""}}function Al(t,e){var i=vl.lastIndex=gl.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=vl.exec(t))&&(n=gl.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:pl(r,n)})}i=gl.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?ml(l[0].x):bl(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function wl(t,e){var i=typeof e,r;return e==null||i==="boolean"?nl(e):(i==="number"?pl:i==="string"?(r=Fo(e))?(e=r,ul):Al:e instanceof Fo?ul:e instanceof Date?fl:cl(e)?hl:Array.isArray(e)?dl:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?yl:pl)(t,e)}function xl(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var Sl=180/Math.PI;var kl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ll(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*Sl,skewX:Math.atan(l)*Sl,scaleX:a,scaleY:o}}var _l,Cl,Dl,Ml;function Ul(t){if(t==="none")return kl;if(!_l)_l=document.createElement("DIV"),Cl=document.documentElement,Dl=document.defaultView;_l.style.transform=t;t=Dl.getComputedStyle(Cl.appendChild(_l),null).getPropertyValue("transform");Cl.removeChild(_l);t=t.slice(7,-1).split(",");return Ll(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function Tl(t){if(t==null)return kl;if(!Ml)Ml=document.createElementNS("http://www.w3.org/2000/svg","g");Ml.setAttribute("transform",t);if(!(t=Ml.transform.baseVal.consolidate()))return kl;t=t.matrix;return Ll(t.a,t.b,t.c,t.d,t.e,t.f)}function El(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:pl(t,n)},{i:l-2,x:pl(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:pl(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:pl(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:pl(t,i)},{i:o-2,x:pl(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var Il=El(Ul,"px, ","px)","deg)");var Nl=El(Tl,", ",")",")");function Wl(t){return function(){return t}}function Hl(t){return+t}var Gl=[0,1];function Pl(t){return t}function Ol(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:Wl(isNaN(e)?NaN:.5)}function Vl(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function Rl(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=Ol(n,r),s=i(a,s);else r=Ol(r,n),s=i(s,a);return function(t){return s(r(t))}}function Yl(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=Ol(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=Ja(t,e,1,r)-1;return s[i](n[i](e))}}function zl(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Fl(){var t=Gl,e=Gl,i=wl,r,n,s,a=Pl,o,l,u;function h(){o=Math.min(t.length,e.length)>2?Yl:Rl;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),pl)))(i)))};c.domain=function(e){return arguments.length?(t=Ao.call(e,Hl),a===Pl||(a=Vl(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=wo.call(t),h()):e.slice()};c.rangeRound=function(t){return e=wo.call(t),i=xl,h()};c.clamp=function(e){return arguments.length?(a=e?Vl(t):Pl,c):a!==Pl};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function Xl(t,e){return Fl()(t,e)}function Bl(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Kl(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function ql(t){return t=Kl(Math.abs(t)),t?t[1]:NaN}function jl(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function $l(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var Zl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ql(t){if(!(e=Zl.exec(t)))throw new Error("invalid format: "+t);var e;return new Jl({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ql.prototype=Jl.prototype;function Jl(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}Jl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tu(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var eu;function iu(t,e){var i=Kl(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(eu=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Kl(t,Math.max(0,e+s-1))[0]}function ru(t,e){var i=Kl(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var nu={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:Bl,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ru(t*100,e)},r:ru,s:iu,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function su(t){return t}var au=Array.prototype.map,ou=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function lu(t){var e=t.grouping===undefined||t.thousands===undefined?su:jl(au.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?su:$l(au.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=Ql(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!nu[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=nu[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=tu(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?ou[8+eu/3]:"")+r+(k&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=Ql(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(ql(e)/3)))*3,n=Math.pow(10,-r),s=ou[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var uu;var hu;var cu;du({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function du(t){uu=lu(t);hu=uu.format;cu=uu.formatPrefix;return uu}function fu(t){return Math.max(0,-ql(Math.abs(t)))}function pu(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ql(e)/3)))*3-ql(Math.abs(t)))}function yu(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,ql(e)-ql(t))+1}function vu(t,e,i,r){var n=ao(t,e,i),s;r=Ql(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=pu(n,a)))r.precision=s;return cu(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=yu(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=fu(n)))r.precision=s-(r.type==="%")*2;break}}return hu(r)}function gu(t){var e=t.domain;t.ticks=function(t){var i=e();return no(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return vu(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=so(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=so(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=so(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function bu(){var t=Xl(Pl,Pl);t.copy=function(){return zl(t,bu())};uo.apply(t,arguments);return gu(t)}function mu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function Au(t){return 1-Math.sqrt(1-t*t)}var wu=s.propDefaultValues;var xu=function(){function t(){}return t}();xu.mainTitle="Clustered Bar Chart Title";xu.subTitle="This is the clustered bar chart's subtitle";xu.height=250;xu.width=675;xu.margin={top:400*.01,bottom:400*.01,right:400*.01,left:400*.01};xu.padding={top:20,bottom:50,right:50,left:50};xu.ordinalAccessor="label";xu.valueAccessor="value";xu.groupAccessor="category";xu.reverseOrder=false;xu.layout=wu.layout;xu.xAxis=wu.xAxis;xu.yAxis=wu.yAxis;xu.wrapLabel=wu.wrapLabel;xu.colorPalette=wu.colorPaletteCategorical;xu.hoverStyle=wu.hoverStyle;xu.clickStyle=wu.clickStyle;xu.referenceStyle=wu.referenceStyle;xu.cursor=wu.cursor;xu.roundedCorner=wu.roundedCorner;xu.barIntervalRatio=wu.barIntervalRatio;xu.groupIntervalRatio=wu.barIntervalRatio;xu.hoverOpacity=wu.hoverOpacity;xu.dataLabel=wu.dataLabel;xu.legend=wu.categoryLegend;xu.tooltipLabel=wu.tooltipLabel;xu.showTooltip=wu.showTooltip;xu.accessibility=wu.accessibility;xu.animationConfig=wu.animationConfig;xu.highestHeadingLevel=wu.highestHeadingLevel;xu.referenceLines=wu.referenceLines;xu.annotations=wu.annotations;xu.clickHighlight=wu.clickHighlight;xu.suppressEvents=wu.suppressEvents;var Su={value:function(){}};function ku(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new Lu(i)}function Lu(t){this._=t}function _u(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}Lu.prototype=ku.prototype={constructor:Lu,on:function(t,e){var i=this._,r=_u(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=Cu(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=Du(i[n],t.name,e);else if(e==null)for(n in i)i[n]=Du(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new Lu(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function Cu(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function Du(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=Su,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var Mu=0,Uu=0,Tu=0,Eu=1e3,Iu,Nu,Wu=0,Hu=0,Gu=0,Pu=typeof performance==="object"&&performance.now?performance:Date,Ou=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Vu(){return Hu||(Ou(Ru),Hu=Pu.now()+Gu)}function Ru(){Hu=0}function Yu(){this._call=this._time=this._next=null}Yu.prototype=zu.prototype={constructor:Yu,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?Vu():+i)+(e==null?0:+e);if(!this._next&&Nu!==this){if(Nu)Nu._next=this;else Iu=this;Nu=this}this._call=t;this._time=i;qu()},stop:function(){if(this._call){this._call=null;this._time=Infinity;qu()}}};function zu(t,e,i){var r=new Yu;r.restart(t,e,i);return r}function Fu(){Vu();++Mu;var t=Iu,e;while(t){if((e=Hu-t._time)>=0)t._call.call(null,e);t=t._next}--Mu}function Xu(){Hu=(Wu=Pu.now())+Gu;Mu=Uu=0;try{Fu()}finally{Mu=0;Ku();Hu=0}}function Bu(){var t=Pu.now(),e=t-Wu;if(e>Eu)Gu-=e,Wu=t}function Ku(){var t,e=Iu,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:Iu=i}}Nu=t;qu(r)}function qu(t){if(Mu)return;if(Uu)Uu=clearTimeout(Uu);var e=t-Hu;if(e>24){if(t<Infinity)Uu=setTimeout(Xu,t-Pu.now()-Gu);if(Tu)Tu=clearInterval(Tu)}else{if(!Tu)Wu=Pu.now(),Tu=setInterval(Bu,Eu);Mu=1,Ou(Xu)}}function ju(t,e,i){var r=new Yu;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var $u=ku("start","end","interrupt");var Zu=[];var Qu=0;var Ju=1;var th=2;var eh=3;var ih=4;var rh=5;var nh=6;function sh(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;uh(t,i,{name:e,index:r,group:n,on:$u,tween:Zu,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Qu})}function ah(t,e){var i=lh(t,e);if(i.state>Qu)throw new Error("too late; already scheduled");return i}function oh(t,e){var i=lh(t,e);if(i.state>th)throw new Error("too late; already started");return i}function lh(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function uh(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=zu(s,0,i.time);function s(t){i.state=Ju;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==Ju)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===eh)return ju(a);if(d.state===ih){d.state=nh;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=nh;d.timer.stop();delete r[u]}}ju((function(){if(i.state===eh){i.state=ih;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=th;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==th)return;i.state=eh;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=rh,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===rh){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=nh;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function hh(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>th&&r.state<rh;r.state=nh;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function ch(t){return this.each((function(){hh(this,t)}))}function dh(t,e){var i,r;return function(){var n=oh(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function fh(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=oh(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function ph(t,e){var i=this._id;t+="";if(arguments.length<2){var r=lh(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?dh:fh)(i,t,e))}function yh(t,e,i){var r=t._id;t.each((function(){var t=oh(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return lh(t,r).value[e]}}function vh(t,e){var i;return(typeof e==="number"?pl:e instanceof Fo?ul:(i=Fo(e))?(e=i,ul):Al)(t,e)}function gh(t){return function(){this.removeAttribute(t)}}function bh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mh(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function Ah(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function wh(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function xh(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Sh(t,e){var i=os(t),r=i==="transform"?Nl:vh;return this.attrTween(t,typeof e==="function"?(i.local?xh:wh)(i,r,yh(this,"attr."+t,e)):e==null?(i.local?bh:gh)(i):(i.local?Ah:mh)(i,r,e+""))}function kh(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function Lh(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function _h(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=os(t);return this.tween(i,(r.local?kh:Lh)(r,e))}function Ch(t,e){return function(){ah(this,t).delay=+e.apply(this,arguments)}}function Dh(t,e){return e=+e,function(){ah(this,t).delay=e}}function Mh(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Ch:Dh)(e,t)):lh(this.node(),e).delay}function Uh(t,e){return function(){oh(this,t).duration=+e.apply(this,arguments)}}function Th(t,e){return e=+e,function(){oh(this,t).duration=e}}function Eh(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Uh:Th)(e,t)):lh(this.node(),e).duration}function Ih(t,e){if(typeof e!=="function")throw new Error;return function(){oh(this,t).ease=e}}function Nh(t){var e=this._id;return arguments.length?this.each(Ih(e,t)):lh(this.node(),e).ease}function Wh(t){if(typeof t!=="function")t=gs(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new nc(r,this._parents,this._name,this._id)}function Hh(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new nc(a,this._parents,this._name,this._id)}function Gh(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function Ph(t,e,i){var r,n,s=Gh(e)?ah:oh;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function Oh(t,e){var i=this._id;return arguments.length<2?lh(this.node(),i).on.on(t):this.each(Ph(i,t,e))}function Vh(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function Rh(){return this.on("end.remove",Vh(this._id))}function Yh(t){var e=this._name,i=this._id;if(typeof t!=="function")t=ds(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;sh(u[d],e,i,d,u,lh(h,i))}}}return new nc(s,this._parents,e,i)}function zh(t){var e=this._name,i=this._id;if(typeof t!=="function")t=ys(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=lh(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){sh(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new nc(s,a,e,i)}var Fh=Ka.prototype.constructor;function Xh(){return new Fh(this._groups,this._parents)}function Bh(t,e){var i,r,n;return function(){var s=Zs(this,t),a=(this.style.removeProperty(t),Zs(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function Kh(t){return function(){this.style.removeProperty(t)}}function qh(t,e,i){var r,n;return function(){var s=Zs(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function jh(t,e,i){var r,n,s;return function(){var a=Zs(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),Zs(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function $h(t,e,i){var r=(t+="")==="transform"?Il:vh;return e==null?this.styleTween(t,Bh(t,r)).on("end.style."+t,Kh(t)):this.styleTween(t,typeof e==="function"?jh(t,r,yh(this,"style."+t,e)):qh(t,r,e+""),i)}function Zh(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function Qh(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,Zh(t,e,i==null?"":i))}function Jh(t){return function(){this.textContent=t}}function tc(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function ec(t){return this.tween("text",typeof t==="function"?tc(yh(this,"text",t)):Jh(t==null?"":t+""))}function ic(){var t=this._name,e=this._id,i=ac();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=lh(l,e);sh(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new nc(r,this._parents,t,i)}var rc=0;function nc(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function sc(t){return Ka().transition(t)}function ac(){return++rc}var oc=Ka.prototype;nc.prototype=sc.prototype={constructor:nc,select:Yh,selectAll:zh,filter:Wh,merge:Hh,selection:Xh,transition:ic,call:oc.call,nodes:oc.nodes,node:oc.node,size:oc.size,empty:oc.empty,each:oc.each,on:Oh,attr:Sh,attrTween:_h,style:$h,styleTween:Qh,text:ec,remove:Rh,tween:ph,delay:Mh,duration:Eh,ease:Nh};var lc={time:null,delay:0,duration:250,ease:mu};function uc(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return lc.time=Vu(),lc}}return i}function hc(t){var e,i;if(t instanceof nc){e=t._id,t=t._name}else{e=ac(),(i=lc).time=Vu(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){sh(l,t,e,u,a,i||uc(l,e))}}}return new nc(r,this._parents,t,e)}Ka.prototype.interrupt=ch;Ka.prototype.transition=hc;var cc=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var dc=new Uint8Array(16);function fc(){if(!cc){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return cc(dc)}var pc=[];for(var yc=0;yc<256;++yc){pc[yc]=(yc+256).toString(16).substr(1)}function vc(t,e){var i=e||0;var r=pc;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function gc(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||fc)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||vc(n)}var bc=s.verifyTextHasSpace,mc=s.checkAttributeTransitions,Ac=s.createTextStrokeFilter,wc=s.drawHoverStrokes,xc=s.removeHoverStrokes,Sc=s.buildStrokes,kc=s.convertColorsToTextures,Lc=s.initializeDescriptionRoot,_c=s.initializeElementAccess,Cc=s.setElementFocusHandler,Dc=s.setElementAccessID,Mc=s.setAccessibilityController,Uc=s.hideNonessentialGroups,Tc=s.setAccessTitle,Ec=s.setAccessSubtitle,Ic=s.setAccessLongDescription,Nc=s.setAccessExecutiveSummary,Wc=s.setAccessPurpose,Hc=s.setAccessContext,Gc=s.setAccessStatistics,Pc=s.setAccessChartCounts,Oc=s.setAccessXAxis,Vc=s.setAccessYAxis,Rc=s.setAccessStructure,Yc=s.setAccessAnnotation,zc=s.retainAccessFocus,Fc=s.checkAccessFocus,Xc=s.setElementInteractionAccessState,Bc=s.setAccessibilityDescriptionWidth,Kc=s.autoTextColor,qc=s.annotate,jc=s.chartAccessors,$c=s.convertVisaColor,Zc=s.checkInteraction,Qc=s.checkClicked,Jc=s.checkHovered,td=s.drawAxis,ed=s.drawGrid,id=s.drawLegend,rd=s.setLegendInteractionState,nd=s.drawTooltip,sd=s.formatDataLabel,ad=s.formatDate,od=s.getColors,ld=s.getLicenses,ud=s.getPadding,hd=s.getScopedData,cd=s.initTooltipStyle,dd=s.overrideTitleTooltip,fd=s.placeDataLabels,pd=s.scopeDataKeys,yd=s.transitionEndAll,vd=s.visaColors,gd=s.validateAccessibilityProps,bd=s.findTagLevel,md=s.prepareRenderChange,Ad=s.roundTo;var wd=t("clustered_bar_chart",function(){function t(t){var r=this;e(this,t);this.mainTitle=xu.mainTitle;this.subTitle=xu.subTitle;this.height=xu.height;this.width=xu.width;this.layout=xu.layout;this.margin=xu.margin;this.padding=xu.padding;this.highestHeadingLevel=xu.highestHeadingLevel;this.ordinalAccessor=xu.ordinalAccessor;this.valueAccessor=xu.valueAccessor;this.groupAccessor=xu.groupAccessor;this.reverseOrder=xu.reverseOrder;this.xAxis=xu.xAxis;this.yAxis=xu.yAxis;this.wrapLabel=xu.wrapLabel;this.colorPalette=xu.colorPalette;this.hoverStyle=xu.hoverStyle;this.clickStyle=xu.clickStyle;this.referenceStyle=xu.referenceStyle;this.cursor=xu.cursor;this.roundedCorner=xu.roundedCorner;this.barIntervalRatio=xu.barIntervalRatio;this.groupIntervalRatio=xu.groupIntervalRatio;this.hoverOpacity=xu.hoverOpacity;this.animationConfig=xu.animationConfig;this.dataLabel=xu.dataLabel;this.showTooltip=xu.showTooltip;this.tooltipLabel=xu.tooltipLabel;this.accessibility=xu.accessibility;this.legend=xu.legend;this.annotations=xu.annotations;this.referenceLines=xu.referenceLines;this.suppressEvents=xu.suppressEvents;this.clickHighlight=xu.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.nest=[];this.datakeys=[];this.legendData=[];this.updated=true;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateScales=false;this.shouldValidateAxes=false;this.shouldUpdateAnnotations=false;this.shouldResetRoot=false;this.shouldUpdateTableData=false;this.shouldSetColors=false;this.shouldValidateLabelPlacement=false;this.shouldValidateDataLabelAccessor=false;this.shouldValidateInteractionKeys=false;this.shouldSetSelectionClass=false;this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldUpdateBaseline=false;this.shouldCheckValueAxis=false;this.shouldCheckLabelAxis=false;this.shouldSetGlobalSelections=false;this.shouldEnterUpdateExit=false;this.shouldUpdateGeometries=false;this.shouldUpdateCorners=false;this.shouldUpdateLegendData=false;this.shouldUpdateLegend=false;this.shouldUpdateLegendInteractivity=false;this.shouldSetLegendCursor=false;this.shouldUpdateReferenceLines=false;this.shouldUpdateLabels=false;this.shouldUpdateCursor=false;this.shouldDrawInteractionState=false;this.shouldSetLabelOpacity=false;this.shouldCheckLabelColor=false;this.shouldBindInteractivity=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldSetTestingAttributes=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetTextures=false;this.shouldSetStrokes=false;this.strokes={};this.topLevel="h2";this.bottomLevel="p";this.textTreatmentHandler=function(t,e,i){var n=r.clickHighlight&&r.clickHighlight.length>0&&Qc(t,r.clickHighlight,r.innerInteractionKeys)&&r.clickStyle.color?vd[r.clickStyle.color]||r.clickStyle.color:r.hoverHighlight&&Jc(t,r.hoverHighlight,r.innerInteractionKeys)&&r.hoverStyle.color?vd[r.hoverStyle.color]||r.hoverStyle.color:r.preparedColors[e];var s=r.dataLabel.placement==="bottom"||r.dataLabel.placement==="left"?Kc(n):vd.dark_text;var a=qa(i[e]);a.attr("filter",!a.classed("textIsMoving")?Ac({root:r.svg.node(),id:r.chartID,color:r.dataLabel.placement==="bottom"||r.dataLabel.placement==="left"?n:"#ffffff"}):null);return s};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldSetTextures=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldUpdateTableData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateLegendData=true;this.shouldUpdateScales=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetStrokes=true};t.prototype.idWatcher=function(t,e){this.chartID=t||"clustered-bar-chart-"+gc();this.clusteredBarChartEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldSetStrokes=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldSetAnnotationAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetLabelOpacity=true};t.prototype.layoutWatcher=function(t,e){this.shouldValidateLabelPlacement=true;this.shouldUpdateScales=true;this.shouldValidateAxes=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetTestingAttributes=true;this.shouldSetLabelOpacity=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateLegendData=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldCheckValueAxis=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.groupAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldCheckLabelAxis=true;this.shouldUpdateBaseline=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.reverseOrderWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;if(this.layout==="vertical"){this.shouldValidateAxes=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true}else if(this.layout==="horizontal"){this.shouldValidateAxes=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true}};t.prototype.xAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateXGrid=true}};t.prototype.yAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateYGrid=true}};t.prototype.wrapLabelWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.paletteWatcher=function(t,e){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true};t.prototype.cornerWatcher=function(t,e){this.shouldUpdateCorners=true};t.prototype.intervalRatioWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldSetLabelOpacity=true;this.shouldCheckLabelAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateAnnotations=true};t.prototype.groupIntervalRatioWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateAnnotations=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.labelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.placement?t.placement:false;var r=e&&e.placement?e.placement:false;var n=t&&t.visible;var s=e&&e.visible;var a=t&&t.labelAccessor?t.labelAccessor:false;var o=e&&e.labelAccessor?e.labelAccessor:false;if(n!==s){this.shouldSetLabelOpacity=true}if(i!==r){this.shouldSetLabelOpacity=true;this.shouldValidateLabelPlacement=true;this.shouldCheckLabelColor=true}if(a!==o){this.shouldValidateDataLabelAccessor=true}};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideTextures?t.hideTextures:false;var w=e&&e.hideTextures?e.hideTextures:false;if(A!==w){this.shouldSetTextures=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true}var x=t&&t.showSmallLabels?t.showSmallLabels:false;var S=e&&e.showSmallLabels?e.showSmallLabels:false;if(x!==S){this.shouldSetLabelOpacity=true}var k=t&&t.hideStrokes?t.hideStrokes:false;var L=e&&e.hideStrokes?e.hideStrokes:false;if(k!==L){this.shouldUpdateLegend=true;this.shouldSetStrokes=true;this.shouldDrawInteractionState=true}var _=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var C=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var D=t&&t.elementsAreInterface?t.elementsAreInterface:false;var M=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(_!==C||D!==M){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(D!==M){this.shouldDrawInteractionState=true}};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldCheckValueAxis=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.clickWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true};t.prototype.hoverWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"clustered-bar-chart-"+gc();t.clusteredBarChartEl.id=t.chartID;t.setTagLevels();t.prepareData();t.prepareLegendData();t.setDimensions();t.prepareScales();t.validateInteractionKeys();t.validateDataLabelAccessor();t.validateAxes();t.validateLabelPlacement();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.shouldValidateAccessibilityProps();t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTextures();t.setStrokes();t.drawXGrid();t.drawYGrid();t.setGlobalSelections();t.setTestingAttributes();t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.drawGeometries();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawLegendElements();t.bindLegendInteractivity();t.drawDataLabels();t.drawReferenceLines();t.setSelectedClass();t.updateInteractionState();t.setLabelOpacity();t.checkLabelColorAgainstBackground();t.updateCursor();t.bindInteractivity();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();t.drawBaseline();t.onChangeHandler();Uc(t.root.node(),t.barG.node());t.setGroupAccessibilityID();t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldSetTextures){t.setTextures();t.shouldSetTextures=false}if(t.shouldSetStrokes){t.setStrokes();t.shouldSetStrokes=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldEnterUpdateExit){t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateGeometries){t.drawGeometries();t.shouldUpdateGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateCorners){t.setRoundedCorners();t.shouldUpdateCorners=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldCheckLabelColor){t.checkLabelColorAgainstBackground();t.shouldCheckLabelColor=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateLegendInteractivity){t.bindLegendInteractivity();t.shouldUpdateLegendInteractivity=false}if(t.shouldSetLegendCursor){t.setLegendCursor();t.shouldSetLegendCursor=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateBaseline){t.drawBaseline();t.shouldUpdateBaseline=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;gd(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]};t.prototype.validateDataLabelAccessor=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor};t.prototype.validateLabelPlacement=function(){if(this.layout==="vertical"){if(this.dataLabel.placement!=="top"&&this.dataLabel.placement!=="bottom"&&this.dataLabel.placement!=="auto"){this.dataLabel.placement="top"}}else{if(this.dataLabel.placement!=="right"&&this.dataLabel.placement!=="left"&&this.dataLabel.placement!=="auto"){this.dataLabel.placement="right"}}};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?ud(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.prepareData=function(){var t=this;this.data.map((function(e){e[t.valueAccessor]=parseFloat(e[t.valueAccessor]);e[t.groupAccessor]=e[t.groupAccessor]instanceof Date?ad({date:e[t.groupAccessor],format:t.layout==="vertical"?t.xAxis.format:t.yAxis.format,offsetTimezone:true}):e[t.groupAccessor]}));this.nest=po().key((function(e){return e[t.groupAccessor]})).entries(this.data);this.datakeys=this.nest.map((function(t){return t.key}))};t.prototype.setTableData=function(){var t=pd(this,jc,"clustered-bar-chart");this.tableData=hd(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareScales=function(){var t=this;var e=this.minValueOverride&&this.minValueOverride<lo(this.data,(function(e){return e[t.valueAccessor]}))?this.minValueOverride:lo(this.data,(function(e){return e[t.valueAccessor]}));if(this.layout==="vertical"){this.y=bu().domain([Math.min(0,e),this.maxValueOverride||oo(this.data,(function(e){return e[t.valueAccessor]}))]).range([this.innerPaddedHeight,0]);this.x0=ko().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedWidth,0]:[0,this.innerPaddedWidth]).padding(this.groupIntervalRatio);this.x1=ko().domain(this.nest[0].values.map((function(e){return e[t.ordinalAccessor]}))).rangeRound([0,this.x0.bandwidth()]).padding(this.barIntervalRatio)}else if(this.layout==="horizontal"){this.x=bu().domain([Math.min(0,e),this.maxValueOverride||oo(this.data,(function(e){return e[t.valueAccessor]}))]).range([0,this.innerPaddedWidth]);this.y0=ko().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedHeight,0]:[0,this.innerPaddedHeight]).padding(this.groupIntervalRatio);this.y1=ko().domain(this.nest[0].values.map((function(e){return e[t.ordinalAccessor]}))).rangeRound([0,this.y0.bandwidth()]).padding(this.barIntervalRatio)}};t.prototype.validateAxes=function(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!(this.layout==="vertical")&&this.xAxis.gridVisible});this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:this.layout==="vertical"&&this.yAxis.gridVisible})};t.prototype.setColors=function(){this.preparedColors=this.colors?$c(this.colors):od(this.colorPalette,this.nest[0].values.length)};t.prototype.setTextures=function(){var t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6){this.colorArr=this.preparedColors}else{var e=t;var i=kc({colors:e,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical",disableTransitions:!this.duration});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}};t.prototype.setStrokes=function(){this.strokes=Sc({root:this.svg.node(),id:this.chartID,colors:this.preparedColors.range?this.preparedColors.range():this.preparedColors,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle})};t.prototype.renderRootElements=function(){this.svg=qa(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","grid-group");this.barG=this.rootG.append("g").attr("class","clustered-bar-group");this.labelG=this.rootG.append("g").attr("class","clustered-bar-dataLabel-group");this.legendG=qa(this.clusteredBarChartEl).select(".clustered-bar-legend").append("svg");this.tooltipG=qa(this.clusteredBarChartEl).select(".clustered-bar-tooltip");this.references=this.rootG.append("g").attr("class","clustered-bar-reference-line-group")};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){qa(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid","chart-container");qa(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid","main-title");qa(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.barG.attr("data-testid","clustered-bar-group");this.updateBarWrappers.attr("data-testid","clustered-bar-wrapper").attr("data-id",(function(t){return"clustered-bar-wrapper-"+t.key}));this.update.attr("data-testid","bar").attr("data-id",(function(e){return"bar-"+e[t.groupAccessor]+"-"+e[t.ordinalAccessor]}));this.labelG.attr("data-testid","clustered-bar-dataLabel-group");this.updateLabelWrappers.attr("data-testid","clustered-bar-dataLabel-wrapper").attr("data-id",(function(t){return"clustered-bar-dataLabel-wrapper-"+t.key}));this.updateLabels.attr("data-testid","dataLabel").attr("data-id",(function(e){return"dataLabel-"+e[t.groupAccessor]+"-"+e[t.ordinalAccessor]}));this.references.attr("data-testid","reference-line-group");this.svg.select("defs").attr("data-testid","pattern-defs");this.references.selectAll(".clustered-bar-reference-line").attr("data-testid","reference-line");this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid","reference-line-label")}else{qa(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid",null);qa(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid",null);qa(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.barG.attr("data-testid",null);this.updateBarWrappers.attr("data-testid",null).attr("data-id",null);this.update.attr("data-testid",null).attr("data-id",null);this.labelG.attr("data-testid",null);this.updateLabelWrappers.attr("data-testid",null).attr("data-id",null);this.updateLabels.attr("data-testid",null).attr("data-id",null);this.references.attr("data-testid",null);this.svg.select("defs").attr("data-testid",null);this.references.selectAll(".clustered-bar-reference-line").attr("data-testid",null);this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid",null)}};t.prototype.reSetRoot=function(){var t=md({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:Au});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=md({selection:this.root,duration:this.duration,namespace:"root_reset",easing:Au});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=md({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:Au});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");Bc(this.chartID,this.width)};t.prototype.drawXAxis=function(){td({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.x0:this.x,left:false,wrapLabel:this.wrapLabel&&this.layout==="vertical"?this.x0.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible,duration:this.duration})};t.prototype.drawYAxis=function(){td({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.y:this.y0,left:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible,duration:this.duration})};t.prototype.setXAxisAccessibility=function(){Oc({rootEle:this.clusteredBarChartEl,hasXAxis:this.innerXAxis?this.innerXAxis.visible:false,xAxis:this.layout==="vertical"?this.x0||false:this.x||false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){Vc({rootEle:this.clusteredBarChartEl,hasYAxis:this.innerYAxis?this.innerYAxis.visible:false,yAxis:this.layout==="vertical"?this.y||false:this.y0||false,yAxisLabel:this.yAxis.label?this.yAxis.label:""})};t.prototype.drawBaseline=function(){td({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.x0:this.x,left:false,padding:this.padding,markOffset:this.layout==="vertical"?this.y(0)||-1:this.y0(0)||-1,hide:!(this.layout==="vertical"),duration:this.duration});td({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.y:this.y0,left:true,padding:this.padding,markOffset:this.layout==="vertical"?this.x0(0)||-1:this.x(0)||-1,hide:this.layout==="vertical",duration:this.duration})};t.prototype.drawXGrid=function(){ed(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.layout==="vertical"?this.x0:this.x,false,!this.innerXAxis.gridVisible,this.xAxis.tickInterval,this.duration)};t.prototype.drawYGrid=function(){ed(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.layout==="vertical"?this.y:this.y0,true,!this.innerYAxis.gridVisible,this.yAxis.tickInterval,this.duration)};t.prototype.setGlobalSelections=function(){var t=this;var e=this.barG.selectAll(".clustered-bar-wrapper").data(this.nest,(function(t){return t.key}));this.enterBarWrappers=e.enter().append("g");this.exitBarWrappers=e.exit();this.updateBarWrappers=e.merge(this.enterBarWrappers);var i=this.updateBarWrappers.selectAll(".clustered-bar").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enter=i.enter().append("rect");this.exit=i.exit();this.update=i.merge(this.enter);this.enterSize=this.enter.size();this.exitSize=this.exit.size();var r=this.labelG.selectAll("g").data(this.nest,(function(t){return t.key}));this.enterLabelWrappers=r.enter().append("g");this.exitLabelWrappers=r.exit();this.updateLabelWrappers=r.merge(this.enterLabelWrappers);var n=this.updateLabelWrappers.selectAll("text").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enterLabels=n.enter().append("text");this.exitLabels=n.exit();this.updateLabels=n.merge(this.enterLabels)};t.prototype.enterGeometries=function(){var t=this;this.enter.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"max":"min";this.enterBarWrappers.attr("class","clustered-bar-wrapper").classed("entering",true).attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"})).each((function(t,e,i){_c(i[e])}));this.enter.attr("class","clustered-bar").attr("cursor",!this.suppressEvents?this.cursor:null).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).each((function(t,e,i){_c(i[e])})).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr(r,(function(e){return t[r](Math[s](0,e[t.valueAccessor]))})).attr(n,(function(e){return Math.abs(t.layout==="vertical"?t[r](0)-t[r](e[t.valueAccessor]):t[r](e[t.valueAccessor])-t[r](0))})).attr(e,(function(i){return t[e+"1"](i[t.ordinalAccessor])})).attr(i,this[e+"1"].bandwidth());if(this.defaults){this.enter.attr("opacity",(function(e){return Zc(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}else{this.enter.classed("entering",true).attr(e,(function(i,r,n){var s=qa(n[r].parentNode);var a=s.classed("entering");var o=a?t[e+"0"](s.datum().key):t[e+"1"](i[t.ordinalAccessor]);var l=a?t[e+"0"].bandwidth()/2:t[e+"1"].bandwidth()/2;var u=(o+l)/(t.innerPaddedWidth/2);o=a?0:o;var h=o+l*u;return h})).attr(i,0)}this.enterBarWrappers.order();this.enter.order()};t.prototype.updateGeometries=function(){var t=this;this.update.interrupt();this.update.transition("opacity").duration((function(e,i,r){if(qa(r[i]).classed("entering")){qa(r[i]).classed("entering",false);return t.duration}return 0})).ease(Au).attr("opacity",(function(e){return Zc(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))};t.prototype.exitGeometries=function(){var t=this;this.exitBarWrappers.interrupt();this.exit.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r="innerPadded"+i[0].toUpperCase()+i.substring(1);this.exit.transition("exit").duration(this.duration).ease(Au).attr("opacity",0).attr(e,(function(n,s,a){var o=qa(a[s]);var l=+o.attr(e)+ +o.attr(i)/2;l=+o.attr(e)+ +o.attr(i)/2*(l/(t[r]/2));return l})).attr(i,0);this.exitSize+=this.exitBarWrappers.selectAll(".clustered-bar").size();this.exitBarWrappers.selectAll(".clustered-bar").transition("exit_wrappers").duration(this.duration*.75).ease(Au).attr("opacity",0).attr(e,(function(i,n,s){var a=s[n].parentNode;var o=a.transform.baseVal.consolidate().matrix.e;var l=t[e+"0"].bandwidth()/2;var u=(o+l)/(t[r]/2);var h=l*u;return h})).attr(i,0);this.update.transition("accessibilityAfterExit").duration(this.duration).ease(Au).call(yd,(function(){var e=Fc(t.rootG.node());t.exit.remove();t.exitBarWrappers.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();zc({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawGeometries=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"max":"min";this.updateBarWrappers.transition("update").duration(this.duration).ease(Au).attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"})).call(yd,(function(){t.updateBarWrappers.classed("entering",false)}));this.update.classed("geometryIsMoving",(function(a,o,l){var u=mc(qa(l[o]),[{attr:e,numeric:true,newValue:t[e+"1"](a[t.ordinalAccessor])},{attr:i,numeric:true,newValue:t[e+"1"].bandwidth()},{attr:r,numeric:true,newValue:t[r](Math[s](0,a[t.valueAccessor]))},{attr:n,numeric:true,newValue:Math.abs(t.layout==="vertical"?t[r](0)-t[r](a[t.valueAccessor]):t[r](a[t.valueAccessor])-t[r](0))}]);return u})).attr("data-"+e,(function(i){return t.layout==="vertical"?t[e+"1"](i[t.ordinalAccessor]):t[e+"1"](i[t.ordinalAccessor])})).attr("data-translate-x",(function(e){return(t.layout==="vertical"?t.x0(e[t.groupAccessor]):0)+t.padding.left+t.margin.left})).attr("data-translate-y",(function(e){return(t.layout==="vertical"?0:t.y0(e[t.groupAccessor]))+t.padding.top+t.margin.top})).attr("data-"+i,this[e+"1"].bandwidth()).attr("data-"+r,(function(e){return t[r](Math[s](0,e[t.valueAccessor]))})).attr("data-"+n,(function(e){return Math.abs(t.layout==="vertical"?t[r](0)-t[r](e[t.valueAccessor]):t[r](e[t.valueAccessor])-t[r](0))})).transition("update").duration((function(e,i,r){return qa(r[i]).classed("entering")?t.duration/2:t.duration})).delay((function(e,i,r){return qa(r[i]).classed("entering")?t.duration/2:0})).ease(Au).attr(r,(function(e){return t[r](Math[s](0,e[t.valueAccessor]))})).attr(n,(function(e){return Math.abs(t.layout==="vertical"?t[r](0)-t[r](e[t.valueAccessor]):t[r](e[t.valueAccessor])-t[r](0))})).attr(e,(function(i){return t[e+"1"](i[t.ordinalAccessor])})).attr(i,this[e+"1"].bandwidth()).call(yd,(function(){t.update.classed("geometryIsMoving",false);t.updateInteractionState();zc({parentGNode:t.rootG.node()})}))};t.prototype.updateInteractionState=function(){var t=this;xc(this.svg.node());this.update.interrupt("opacity");this.updateLabels.interrupt("opacity");this.update.attr("opacity",(function(e){return Zc(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).attr("fill",(function(e,i){var r=t.clickHighlight&&t.clickHighlight.length>0&&Qc(e,t.clickHighlight,t.innerInteractionKeys);var n=t.hoverHighlight&&Jc(e,t.hoverHighlight,t.innerInteractionKeys);var s=t.colorArr[i];return r&&t.clickStyle.color?vd[t.clickStyle.color]||t.clickStyle.color:r?s:n&&t.hoverStyle.color?vd[t.hoverStyle.color]||t.hoverStyle.color:s})).attr("filter",(function(e,i,r){if(!t.accessibility.hideStrokes&&!qa(r[i]).classed("geometryIsMoving")){var n=t.clickHighlight&&t.clickHighlight.length>0&&Qc(e,t.clickHighlight,t.innerInteractionKeys);var s=t.hoverHighlight&&Jc(e,t.hoverHighlight,t.innerInteractionKeys);var a=t.preparedColors[i];var o=n?"click":s&&!qa(r[i]).classed("geometryIsMoving")?"hover":"rest";var l=n&&t.clickStyle.color?vd[t.clickStyle.color]||t.clickStyle.color:n?a:s&&t.hoverStyle.color?vd[t.hoverStyle.color]||t.hoverStyle.color:a;if(o==="hover"){wc({inputElement:r[i],id:t.chartID,key:e[t.ordinalAccessor]+e[t.groupAccessor],strokeWidth:t.hoverStyle.strokeWidth,fill:l})}return t.strokes[o+l]}return null}));zc({parentGNode:this.rootG.node()});rd({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.setLabelOpacity=function(){this.processLabelOpacity(this.updateLabels)};t.prototype.processLabelOpacity=function(t){var e=this;var i=this.dataLabel.visible?1:0;var r=this.layout==="vertical"?"x":"y";var n=this.layout==="vertical"?"width":"height";var s=this.layout==="vertical"?"y":"x";var a=this.layout==="vertical"?"height":"width";var o=this[r+"0"].bandwidth()/this.nest[0].values.length;t.attr("opacity",(function(t){var l={};l[n]=e.dataLabel.placement==="left"||e.dataLabel.placement==="bottom"?e[r+"1"].bandwidth():o;if(e.dataLabel.placement==="left"||e.dataLabel.placement==="bottom"){l[a]=Math.abs(e.layout==="vertical"?e[s](0)-e[s](t[e.valueAccessor]):e[s](t[e.valueAccessor])-e[s](0))}var u=e.dataLabel.placement==="auto"||e.dataLabel.collisionHideOnly||e.accessibility.showSmallLabels||bc({text:sd(t,e.innerLabelAccessor,e.dataLabel.format),dimensions:l,fontSize:14});return u?Zc(t,i,e.hoverOpacity,e.hoverHighlight,e.clickHighlight,e.innerInteractionKeys)<1?0:1:0}))};t.prototype.checkLabelColorAgainstBackground=function(){var t=this;this.updateLabels.attr("fill",(function(e,i,r){return t.textTreatmentHandler(e,i,r)}))};t.prototype.setRoundedCorners=function(){this.update.transition("corners").duration(this.duration).ease(Au).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=Zc(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;Xc(r[i],n,s);return n}))};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);this.updateLabels.attr("cursor",!this.suppressEvents?this.cursor:null)};t.prototype.enterDataLabels=function(){var t=this;var e=this.layout==="vertical"?"x":"y";this.enterLabelWrappers.attr("class","clustered-bar-label-wrapper").classed("entering",true).attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"}));this.enterLabels.attr("data-"+e,(function(i){return t.layout==="vertical"?t[e+"1"](i[t.ordinalAccessor]):t[e+"1"](i[t.ordinalAccessor])})).attr("opacity",0).attr("class","clustered-bar-dataLabel entering").attr("cursor",!this.suppressEvents?this.cursor:null).classed("clustered-bar-dataLabel-horizontal",false).classed("clustered-bar-dataLabel-vertical",false).classed("clustered-bar-dataLabel-"+this.layout,true).attr("fill",this.textTreatmentHandler).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);fd({root:this.enterLabels,xScale:this.layout==="vertical"?this.x1:this.x,yScale:this.layout==="vertical"?this.y:this.y1,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"bar"});this.enterLabels.attr(e,(function(i,r,n){var s=e+"0";var a=e+"1";var o=e==="x"?"innerPaddedWidth":"innerPaddedHeight";var l=qa(n[r].parentNode);var u=l.classed("entering");var h=u?t[s](l.datum().key):t[a](i[t.ordinalAccessor]);var c=u?t[s].bandwidth()/2:t[a].bandwidth()/2;var d=(h+c)/(t[o]/2);h=u?0:h;var f=h+c*d;return f}))};t.prototype.updateDataLabels=function(){var t=this;this.updateLabels.interrupt();var e=this.dataLabel.visible?1:0;this.updateLabels.transition("opacity").duration((function(e,i,r){if(qa(r[i]).classed("entering")){qa(r[i]).classed("entering",false);return t.duration/2}return 0})).ease(Au).attr("opacity",(function(i){return Zc(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1})).call(yd,(function(){t.updateLabels.classed("entering",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabelWrappers.selectAll("text").transition("exit").ease(Au).duration(this.duration/3).attr("opacity",0).call(yd,(function(){t.exitLabelWrappers.remove()}));this.exitLabels.transition("exit").ease(Au).duration(this.duration/3).attr("opacity",0).remove()};t.prototype.drawDataLabels=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"max":"min";var a=15;var o=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;this.updateLabels.text((function(e,i,r){if(i===0){var n=r[i];var s=getComputedStyle(n);var o=parseFloat(s.fontSize);a=Math.max(o-1,1)}return sd(e,t.innerLabelAccessor,t.dataLabel.format)}));this.updateLabelWrappers.classed("clustered-bar-dataLabel-horizontal",false).classed("clustered-bar-dataLabel-vertical",false).classed("clustered-bar-dataLabel-"+this.layout,true).transition("update").duration(this.duration).ease(Au).attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"})).call(yd,(function(){t.updateLabelWrappers.classed("entering",false)}));var l=this.updateLabels.style("visibility",(function(e,i,r){return t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly?qa(r[i]).style("visibility"):null})).attr("data-"+e,(function(i){return t.layout==="vertical"?t[e+"1"](i[t.ordinalAccessor]):t[e+"1"](i[t.ordinalAccessor])})).attr("data-translate-x",(function(e){return(t.layout==="vertical"?t.x0(e[t.groupAccessor]):0)+t.padding.left+t.margin.left})).attr("data-translate-y",(function(e){return(t.layout==="vertical"?0:t.y0(e[t.groupAccessor]))+t.padding.top+t.margin.top})).attr("data-"+i,this[e+"1"].bandwidth()).attr("data-"+r,(function(e){return t[r](Math[s](0,e[t.valueAccessor]))})).attr("data-"+n,(function(e){return Math.abs(t.layout==="vertical"?t[r](0)-t[r](e[t.valueAccessor]):t[r](e[t.valueAccessor])-t[r](0))})).transition("update").ease(Au).duration(this.duration);var u={vertical:{top:{validPositions:["top","bottom"],offsets:[2,1]},middle:{validPositions:["middle","top"],offsets:[1,a/2]},bottom:{validPositions:["middle","top"],offsets:[1,a/2]}},horizontal:{right:{validPositions:["right","left"],offsets:[4,8]},middle:{validPositions:["middle","right"],offsets:[1,15]},left:{validPositions:["left","right"],offsets:[1,20]}}};var h=this.dataLabel&&this.dataLabel.collisionPlacement;var c=h&&u[this.layout][h]?this.dataLabel.collisionPlacement:this.layout==="vertical"?"top":"right";this.bitmaps=fd({root:l,xScale:this.layout==="vertical"?this.x1:this.x,yScale:this.layout==="vertical"?this.y:this.y1,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"bar",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",labelSelection:l,avoidMarks:[this.update],validPositions:o?["middle"]:u[this.layout][c].validPositions,offsets:o?[1]:u[this.layout][c].offsets,accessors:[this.groupAccessor,this.ordinalAccessor,"key"],size:[Ad(this.width,0),Ad(this.height,0)],boundsScope:o?undefined:c,hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})};t.prototype.drawReferenceLines=function(){var t=this;var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class","clustered-bar-reference").attr("opacity",1);var r=i.append("line");r.attr("class","clustered-bar-reference-line").attr("opacity",0);var n=i.append("text");n.attr("class","clustered-bar-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".clustered-bar-reference-line").data((function(t){return[t]})).transition("merge").ease(Au).duration(this.duration);var o=s.selectAll(".clustered-bar-reference-line-label").data((function(t){return[t]})).transition("merge").ease(Au).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(Au).duration(this.duration).attr("opacity",0).remove();if(this.layout==="vertical"){i.attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));s.transition("merge").ease(Au).duration(this.duration).attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em")}else if(this.layout==="horizontal"){i.attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));s.transition("merge").ease(Au).duration(this.duration).attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));r.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);a.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);n.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}));o.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}))}a.style("stroke",vd[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",vd[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.prepareLegendData=function(){this.legendData=this.nest[0].values};t.prototype.drawLegendElements=function(){id({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.bindLegendInteractivity=function(){var t=this;qa(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:"").on("click",this.legend.interactive&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.legend.interactive&&!this.suppressEvents?function(e){return t.hoverFunc.emit(e)}:null).on("mouseout",this.legend.interactive&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.setLegendCursor=function(){qa(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:null)};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateLabels.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.drawAnnotations=function(){qc({source:this.rootG.node(),data:this.annotations,xScale:this.layout!=="horizontal"?this.x0:this.x,xAccessor:this.layout!=="horizontal"?this.groupAccessor:this.valueAccessor,yScale:this.layout!=="horizontal"?this.y:this.y0,yAccessor:this.layout!=="horizontal"?this.valueAccessor:this.groupAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})};t.prototype.setAnnotationAccessibility=function(){Yc(this.clusteredBarChartEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=bd(this.highestHeadingLevel);this.bottomLevel=bd(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){Lc({rootEle:this.clusteredBarChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"clustered-bar-chart",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){Mc({node:this.svg.node(),chartTag:"clustered-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:pd(this,jc,"clustered-bar-chart"),groupAccessor:this.groupAccessor,groupName:"cluster",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){_c(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=pd(this,jc,"clustered-bar-chart");this.update.each((function(i,r,n){Cc({node:n[r],geomType:"bar",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"cluster",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});Dc({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateBarWrappers.each((function(e,i,r){Dc({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){Tc(this.clusteredBarChartEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){Ec(this.clusteredBarChartEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){Ic(this.clusteredBarChartEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){Nc(this.clusteredBarChartEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){Wc(this.clusteredBarChartEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){Hc(this.clusteredBarChartEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){Gc(this.clusteredBarChartEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){Pc({rootEle:this.clusteredBarChartEl,parentGNode:this.barG.node(),chartTag:"clustered-bar-chart",geomType:"bar",groupName:"cluster"})};t.prototype.setChartAccessibilityStructureNotes=function(){Rc(this.clusteredBarChartEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){dd(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&t[this.ordinalAccessor]){this.eventsTooltip({data:t,evt:Ia,isToShow:true})}};t.prototype.onMouseOutHandler=function(){dd(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){cd(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;nd({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"clustered"})};t.prototype.render=function(){var t="light";this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldCheckValueAxis){if(this.layout==="horizontal"){this.shouldUpdateXAxis=true;this.shouldUpdateXGrid=true}else if(this.layout==="vertical"){this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true}this.shouldCheckValueAxis=false}if(this.shouldCheckLabelAxis){if(this.layout==="vertical"){this.shouldUpdateXAxis=true;this.shouldUpdateXGrid=true;this.shouldSetXAxisAccessibility=true}else if(this.layout==="horizontal"){this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true;this.shouldSetYAxisAccessibility=true}this.shouldCheckLabelAxis=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateLegendData){this.prepareLegendData();this.shouldUpdateLegendData=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldValidateAxes){this.validateAxes();this.shouldValidateAxes=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldValidateLabelPlacement){this.validateLabelPlacement();this.shouldValidateLabelPlacement=false}return r("div",{class:"o-layout is--"+this.layout+" "+t},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"clustered-bar-main-title vcl-main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions clustered-bar-sub-title vcl-sub-title"},this.subTitle),r("div",{class:"clustered-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"bar",groupName:"cluster",chartTag:"clustered-bar-chart",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-clustered-bar-container"}),r("div",{class:"clustered-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))};t.prototype.init=function(){var t=Object.keys(xu);var e=0;var i={mainTitle:{exception:""},subTitle:{exception:""},barIntervalRatio:{exception:0},groupIntervalRatio:{exception:0},showTooltip:{exception:false},wrapLabel:{exception:false},hoverOpacity:{exception:0}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:xu[t[e]]}};Object.defineProperty(t.prototype,"clusteredBarChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],reverseOrder:["reverseOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],groupIntervalRatio:["groupIntervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}clustered-bar-chart{cursor:default}clustered-bar-chart .annotations{pointer-events:none}clustered-bar-chart .annotations .handle{pointer-events:all}clustered-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}clustered-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}clustered-bar-chart .hidden{display:none}clustered-bar-chart #visa-viz-d3-clustered-bar-container{clear:both}clustered-bar-chart .clustered-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}clustered-bar-chart .clustered-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}clustered-bar-chart .clustered-bar-legend .key-dot{margin:3px 8px}clustered-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}clustered-bar-chart .light .grid path{stroke-width:0}clustered-bar-chart .light .axis{font-size:12px}clustered-bar-chart .light .axis .tick text{fill:#767676}clustered-bar-chart .light .axis .tick line{stroke:#767676}clustered-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .light .y.axis path{stroke:#767676;opacity:0}clustered-bar-chart .light .x.axis path{stroke:#767676}clustered-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}clustered-bar-chart .dark .grid path{stroke-width:0}clustered-bar-chart .dark .axis{font-size:12px}clustered-bar-chart .dark .axis .tick line{stroke:lightgrey}clustered-bar-chart .dark .axis .tick text{fill:grey}clustered-bar-chart .dark .axis path{stroke:black}clustered-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .dark .o-layout--chart svg{background:black}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-vertical{text-anchor:middle}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-horizontal{text-anchor:start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=ld();var xd="http://www.w3.org/1999/xhtml";var Sd={svg:"http://www.w3.org/2000/svg",xhtml:xd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kd(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return Sd.hasOwnProperty(e)?{space:Sd[e],local:t}:t}function Ld(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===xd&&e.documentElement.namespaceURI===xd?e.createElement(t):e.createElementNS(i,t)}}function _d(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Cd(t){var e=kd(t);return(e.local?_d:Ld)(e)}function Dd(){}function Md(t){return t==null?Dd:function(){return this.querySelector(t)}}function Ud(t){if(typeof t!=="function")t=Md(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new hp(r,this._parents)}function Td(){return[]}function Ed(t){return t==null?Td:function(){return this.querySelectorAll(t)}}function Id(t){if(typeof t!=="function")t=Ed(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new hp(r,n)}function Nd(t){return function(){return this.matches(t)}}function Wd(t){if(typeof t!=="function")t=Nd(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new hp(r,this._parents)}function Hd(t){return new Array(t.length)}function Gd(){return new hp(this._enter||this._groups.map(Hd),this._parents)}function Pd(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}Pd.prototype={constructor:Pd,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Od(t){return function(){return t}}var Vd="$";function Rd(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new Pd(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function Yd(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=Vd+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=Vd+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new Pd(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function zd(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?Yd:Rd,r=this._parents,n=this._groups;if(typeof t!=="function")t=Od(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new hp(a,r);a._enter=o;a._exit=l;return a}function Fd(){return new hp(this._exit||this._groups.map(Hd),this._parents)}function Xd(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function Bd(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new hp(a,this._parents)}function Kd(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function qd(t){if(!t)t=jd;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new hp(n,this._parents).order()}function jd(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function $d(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function Zd(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function Qd(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function Jd(){var t=0;this.each((function(){++t}));return t}function tf(){return!this.node()}function ef(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function rf(t){return function(){this.removeAttribute(t)}}function nf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sf(t,e){return function(){this.setAttribute(t,e)}}function af(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function of(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function lf(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function uf(t,e){var i=kd(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?nf:rf:typeof e==="function"?i.local?lf:of:i.local?af:sf)(i,e))}function hf(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function cf(t){return function(){this.style.removeProperty(t)}}function df(t,e,i){return function(){this.style.setProperty(t,e,i)}}function ff(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function pf(t,e,i){return arguments.length>1?this.each((e==null?cf:typeof e==="function"?ff:df)(t,e,i==null?"":i)):yf(this.node(),t)}function yf(t,e){return t.style.getPropertyValue(e)||hf(t).getComputedStyle(t,null).getPropertyValue(e)}function vf(t){return function(){delete this[t]}}function gf(t,e){return function(){this[t]=e}}function bf(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function mf(t,e){return arguments.length>1?this.each((e==null?vf:typeof e==="function"?bf:gf)(t,e)):this.node()[t]}function Af(t){return t.trim().split(/^|\s+/)}function wf(t){return t.classList||new xf(t)}function xf(t){this._node=t;this._names=Af(t.getAttribute("class")||"")}xf.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function Sf(t,e){var i=wf(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function kf(t,e){var i=wf(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function Lf(t){return function(){Sf(this,t)}}function _f(t){return function(){kf(this,t)}}function Cf(t,e){return function(){(e.apply(this,arguments)?Sf:kf)(this,t)}}function Df(t,e){var i=Af(t+"");if(arguments.length<2){var r=wf(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?Cf:e?Lf:_f)(i,e))}function Mf(){this.textContent=""}function Uf(t){return function(){this.textContent=t}}function Tf(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Ef(t){return arguments.length?this.each(t==null?Mf:(typeof t==="function"?Tf:Uf)(t)):this.node().textContent}function If(){this.innerHTML=""}function Nf(t){return function(){this.innerHTML=t}}function Wf(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Hf(t){return arguments.length?this.each(t==null?If:(typeof t==="function"?Wf:Nf)(t)):this.node().innerHTML}function Gf(){if(this.nextSibling)this.parentNode.appendChild(this)}function Pf(){return this.each(Gf)}function Of(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vf(){return this.each(Of)}function Rf(t){var e=typeof t==="function"?t:Cd(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function Yf(){return null}function zf(t,e){var i=typeof t==="function"?t:Cd(t),r=e==null?Yf:typeof e==="function"?e:Md(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function Ff(){var t=this.parentNode;if(t)t.removeChild(this)}function Xf(){return this.each(Ff)}function Bf(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Kf(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function qf(t){return this.select(t?Kf:Bf)}function jf(t){return arguments.length?this.property("__data__",t):this.node().__data__}var $f={};var Zf=null;if(typeof document!=="undefined"){var Qf=document.documentElement;if(!("onmouseenter"in Qf)){$f={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Jf(t,e,i){t=tp(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function tp(t,e,i){return function(r){var n=Zf;Zf=r;try{t.call(this,this.__data__,e,i)}finally{Zf=n}}}function ep(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function ip(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function rp(t,e,i){var r=$f.hasOwnProperty(t.type)?Jf:tp;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function np(t,e,i){var r=ep(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?rp:ip;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function sp(t,e,i){var r=hf(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function ap(t,e){return function(){return sp(this,t,e)}}function op(t,e){return function(){return sp(this,t,e.apply(this,arguments))}}function lp(t,e){return this.each((typeof e==="function"?op:ap)(t,e))}var up=[null];function hp(t,e){this._groups=t;this._parents=e}function cp(){return new hp([[document.documentElement]],up)}hp.prototype=cp.prototype={constructor:hp,select:Ud,selectAll:Id,filter:Wd,data:zd,enter:Gd,exit:Fd,join:Xd,merge:Bd,order:Kd,sort:qd,call:$d,nodes:Zd,node:Qd,size:Jd,empty:tf,each:ef,attr:uf,style:pf,property:mf,classed:Df,text:Ef,html:Hf,raise:Pf,lower:Vf,append:Rf,insert:zf,remove:Xf,clone:qf,datum:jf,on:np,dispatch:lp};function dp(t){return typeof t==="string"?new hp([[document.querySelector(t)]],[document.documentElement]):new hp([[t]],up)}function fp(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function pp(t){if(t.length===1)t=yp(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function yp(t){return function(e,i){return fp(t(e),i)}}var vp=pp(fp);var gp=vp.right;function bp(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var mp=Math.sqrt(50),Ap=Math.sqrt(10),wp=Math.sqrt(2);function xp(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=Sp(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function Sp(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=mp?10:s>=Ap?5:s>=wp?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=mp?10:s>=Ap?5:s>=wp?2:1)}function kp(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=mp)n*=10;else if(s>=Ap)n*=5;else if(s>=wp)n*=2;return e<t?-n:n}function Lp(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function _p(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}var Cp=new Date,Dp=new Date;function Mp(t,e,i,r){function n(e){return t(e=arguments.length===0?new Date:new Date(+e)),e}n.floor=function(e){return t(e=new Date(+e)),e};n.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i};n.round=function(t){var e=n(t),i=n.ceil(t);return t-e<i-t?e:i};n.offset=function(t,i){return e(t=new Date(+t),i==null?1:Math.floor(i)),t};n.range=function(i,r,s){var a=[],o;i=n.ceil(i);s=s==null?1:Math.floor(s);if(!(i<r)||!(s>0))return a;do{a.push(o=new Date(+i)),e(i,s),t(i)}while(o<i&&i<r);return a};n.filter=function(i){return Mp((function(e){if(e>=e)while(t(e),!i(e))e.setTime(e-1)}),(function(t,r){if(t>=t){if(r<0)while(++r<=0){while(e(t,-1),!i(t)){}}else while(--r>=0){while(e(t,+1),!i(t)){}}}}))};if(i){n.count=function(e,r){Cp.setTime(+e),Dp.setTime(+r);t(Cp),t(Dp);return Math.floor(i(Cp,Dp))};n.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?n:n.filter(r?function(e){return r(e)%t===0}:function(e){return n.count(0,e)%t===0})}}return n}var Up=Mp((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Up.every=function(t){t=Math.floor(t);if(!isFinite(t)||!(t>0))return null;if(!(t>1))return Up;return Mp((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,i){e.setTime(+e+i*t)}),(function(e,i){return(i-e)/t}))};var Tp=1e3;var Ep=6e4;var Ip=36e5;var Np=864e5;var Wp=6048e5;var Hp=Mp((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Tp)}),(function(t,e){return(e-t)/Tp}),(function(t){return t.getUTCSeconds()}));var Gp=Mp((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Tp)}),(function(t,e){t.setTime(+t+e*Ep)}),(function(t,e){return(e-t)/Ep}),(function(t){return t.getMinutes()}));var Pp=Mp((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Tp-t.getMinutes()*Ep)}),(function(t,e){t.setTime(+t+e*Ip)}),(function(t,e){return(e-t)/Ip}),(function(t){return t.getHours()}));var Op=Mp((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ep)/Np}),(function(t){return t.getDate()-1}));function Vp(t){return Mp((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e*7)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ep)/Wp}))}var Rp=Vp(0);var Yp=Vp(1);var zp=Vp(2);var Fp=Vp(3);var Xp=Vp(4);var Bp=Vp(5);var Kp=Vp(6);var qp=Mp((function(t){t.setDate(1);t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12}),(function(t){return t.getMonth()}));var jp=Mp((function(t){t.setMonth(0,1);t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));jp.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Mp((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t);e.setMonth(0,1);e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)}))};var $p=Mp((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Np}),(function(t){return t.getUTCDate()-1}));function Zp(t){return Mp((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e*7)}),(function(t,e){return(e-t)/Wp}))}var Qp=Zp(0);var Jp=Zp(1);var ty=Zp(2);var ey=Zp(3);var iy=Zp(4);var ry=Zp(5);var ny=Zp(6);var sy=Mp((function(t){t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));sy.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Mp((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)}),(function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i*t)}))};function ay(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var oy="$";function ly(){}ly.prototype=uy.prototype={constructor:ly,has:function(t){return oy+t in this},get:function(t){return this[oy+t]},set:function(t,e){this[oy+t]=e;return this},remove:function(t){var e=oy+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===oy)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===oy)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===oy)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===oy)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===oy)++t;return t},empty:function(){for(var t in this)if(t[0]===oy)return false;return true},each:function(t){for(var e in this)if(e[0]===oy)t(this[e],e.slice(1),this)}};function uy(t,e){var i=new ly;if(t instanceof ly)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function hy(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=uy(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,cy,dy)},map:function(t){return s(t,0,fy,py)},entries:function(t){return a(s(t,0,fy,py),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function cy(){return{}}function dy(t,e,i){t[e]=i}function fy(){return uy()}function py(t,e,i){t.set(e,i)}var yy=Array.prototype;var vy=yy.map;var gy=yy.slice;var by={name:"implicit"};function my(){var t=uy(),e=[],i=[],r=by;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==by)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=uy();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=gy.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return my(e,i).unknown(r)};ay.apply(n,arguments);return n}function Ay(){var t=my().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=bp(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return Ay(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return ay.apply(h(),arguments)}function wy(t){var e=t.copy;t.padding=t.paddingOuter;delete t.paddingInner;delete t.paddingOuter;t.copy=function(){return wy(e())};return t}function xy(){return wy(Ay.apply(null,arguments).paddingInner(1))}function Sy(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function ky(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function Ly(){}var _y=.7;var Cy=1/_y;var Dy="\\s*([+-]?\\d+)\\s*",My="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Uy="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ty=/^#([0-9a-f]{3,8})$/,Ey=new RegExp("^rgb\\("+[Dy,Dy,Dy]+"\\)$"),Iy=new RegExp("^rgb\\("+[Uy,Uy,Uy]+"\\)$"),Ny=new RegExp("^rgba\\("+[Dy,Dy,Dy,My]+"\\)$"),Wy=new RegExp("^rgba\\("+[Uy,Uy,Uy,My]+"\\)$"),Hy=new RegExp("^hsl\\("+[My,Uy,Uy]+"\\)$"),Gy=new RegExp("^hsla\\("+[My,Uy,Uy,My]+"\\)$");var Py={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Sy(Ly,Yy,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Oy,formatHex:Oy,formatHsl:Vy,formatRgb:Ry,toString:Ry});function Oy(){return this.rgb().formatHex()}function Vy(){return Qy(this).formatHsl()}function Ry(){return this.rgb().formatRgb()}function Yy(t){var e,i;t=(t+"").trim().toLowerCase();return(e=Ty.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?zy(e):i===3?new Ky(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?Fy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?Fy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ey.exec(t))?new Ky(e[1],e[2],e[3],1):(e=Iy.exec(t))?new Ky(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ny.exec(t))?Fy(e[1],e[2],e[3],e[4]):(e=Wy.exec(t))?Fy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Hy.exec(t))?Zy(e[1],e[2]/100,e[3]/100,1):(e=Gy.exec(t))?Zy(e[1],e[2]/100,e[3]/100,e[4]):Py.hasOwnProperty(t)?zy(Py[t]):t==="transparent"?new Ky(NaN,NaN,NaN,0):null}function zy(t){return new Ky(t>>16&255,t>>8&255,t&255,1)}function Fy(t,e,i,r){if(r<=0)t=e=i=NaN;return new Ky(t,e,i,r)}function Xy(t){if(!(t instanceof Ly))t=Yy(t);if(!t)return new Ky;t=t.rgb();return new Ky(t.r,t.g,t.b,t.opacity)}function By(t,e,i,r){return arguments.length===1?Xy(t):new Ky(t,e,i,r==null?1:r)}function Ky(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}Sy(Ky,By,ky(Ly,{brighter:function(t){t=t==null?Cy:Math.pow(Cy,t);return new Ky(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?_y:Math.pow(_y,t);return new Ky(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:qy,formatHex:qy,formatRgb:jy,toString:jy}));function qy(){return"#"+$y(this.r)+$y(this.g)+$y(this.b)}function jy(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function $y(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function Zy(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new tv(t,e,i,r)}function Qy(t){if(t instanceof tv)return new tv(t.h,t.s,t.l,t.opacity);if(!(t instanceof Ly))t=Yy(t);if(!t)return new tv;if(t instanceof tv)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new tv(a,o,l,t.opacity)}function Jy(t,e,i,r){return arguments.length===1?Qy(t):new tv(t,e,i,r==null?1:r)}function tv(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}Sy(tv,Jy,ky(Ly,{brighter:function(t){t=t==null?Cy:Math.pow(Cy,t);return new tv(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?_y:Math.pow(_y,t);return new tv(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new Ky(ev(t>=240?t-240:t+120,n,r),ev(t,n,r),ev(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function ev(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function iv(t){return function(){return t}}function rv(t,e){return function(i){return t+i*e}}function nv(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function sv(t){return(t=+t)===1?av:function(e,i){return i-e?nv(e,i,t):iv(isNaN(e)?i:e)}}function av(t,e){var i=e-t;return i?rv(t,i):iv(isNaN(t)?e:t)}var ov=function t(e){var i=sv(e);function r(t,e){var r=i((t=By(t)).r,(e=By(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=av(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function lv(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function uv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hv(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=mv(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function cv(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function dv(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function fv(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=mv(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var pv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yv=new RegExp(pv.source,"g");function vv(t){return function(){return t}}function gv(t){return function(e){return t(e)+""}}function bv(t,e){var i=pv.lastIndex=yv.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=pv.exec(t))&&(n=yv.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:dv(r,n)})}i=yv.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?gv(l[0].x):vv(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function mv(t,e){var i=typeof e,r;return e==null||i==="boolean"?iv(e):(i==="number"?dv:i==="string"?(r=Yy(e))?(e=r,ov):bv:e instanceof Yy?ov:e instanceof Date?cv:uv(e)?lv:Array.isArray(e)?hv:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?fv:dv)(t,e)}function Av(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var wv=180/Math.PI;var xv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sv(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*wv,skewX:Math.atan(l)*wv,scaleX:a,scaleY:o}}var kv,Lv,_v,Cv;function Dv(t){if(t==="none")return xv;if(!kv)kv=document.createElement("DIV"),Lv=document.documentElement,_v=document.defaultView;kv.style.transform=t;t=_v.getComputedStyle(Lv.appendChild(kv),null).getPropertyValue("transform");Lv.removeChild(kv);t=t.slice(7,-1).split(",");return Sv(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function Mv(t){if(t==null)return xv;if(!Cv)Cv=document.createElementNS("http://www.w3.org/2000/svg","g");Cv.setAttribute("transform",t);if(!(t=Cv.transform.baseVal.consolidate()))return xv;t=t.matrix;return Sv(t.a,t.b,t.c,t.d,t.e,t.f)}function Uv(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:dv(t,n)},{i:l-2,x:dv(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:dv(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:dv(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:dv(t,i)},{i:o-2,x:dv(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var Tv=Uv(Dv,"px, ","px)","deg)");var Ev=Uv(Mv,", ",")",")");function Iv(t){return function(){return t}}function Nv(t){return+t}var Wv=[0,1];function Hv(t){return t}function Gv(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:Iv(isNaN(e)?NaN:.5)}function Pv(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function Ov(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=Gv(n,r),s=i(a,s);else r=Gv(r,n),s=i(s,a);return function(t){return s(r(t))}}function Vv(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=Gv(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=gp(t,e,1,r)-1;return s[i](n[i](e))}}function Rv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Yv(){var t=Wv,e=Wv,i=mv,r,n,s,a=Hv,o,l,u;function h(){o=Math.min(t.length,e.length)>2?Vv:Ov;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),dv)))(i)))};c.domain=function(e){return arguments.length?(t=vy.call(e,Nv),a===Hv||(a=Pv(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=gy.call(t),h()):e.slice()};c.rangeRound=function(t){return e=gy.call(t),i=Av,h()};c.clamp=function(e){return arguments.length?(a=e?Pv(t):Hv,c):a!==Hv};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function zv(t,e){return Yv()(t,e)}function Fv(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Xv(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function Bv(t){return t=Xv(Math.abs(t)),t?t[1]:NaN}function Kv(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function qv(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var jv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $v(t){if(!(e=jv.exec(t)))throw new Error("invalid format: "+t);var e;return new Zv({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}$v.prototype=Zv.prototype;function Zv(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}Zv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Qv(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var Jv;function tg(t,e){var i=Xv(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(Jv=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Xv(t,Math.max(0,e+s-1))[0]}function eg(t,e){var i=Xv(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var ig={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:Fv,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return eg(t*100,e)},r:eg,s:tg,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function rg(t){return t}var ng=Array.prototype.map,sg=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ag(t){var e=t.grouping===undefined||t.thousands===undefined?rg:Kv(ng.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?rg:qv(ng.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=$v(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!ig[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=ig[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=Qv(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?sg[8+Jv/3]:"")+r+(k&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=$v(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(Bv(e)/3)))*3,n=Math.pow(10,-r),s=sg[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var og;var lg;var ug;hg({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function hg(t){og=ag(t);lg=og.format;ug=og.formatPrefix;return og}function cg(t){return Math.max(0,-Bv(Math.abs(t)))}function dg(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bv(e)/3)))*3-Bv(Math.abs(t)))}function fg(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,Bv(e)-Bv(t))+1}function pg(t,e,i,r){var n=kp(t,e,i),s;r=$v(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=dg(n,a)))r.precision=s;return ug(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=fg(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=cg(n)))r.precision=s-(r.type==="%")*2;break}}return lg(r)}function yg(t){var e=t.domain;t.ticks=function(t){var i=e();return xp(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return pg(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=Sp(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=Sp(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=Sp(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function vg(){var t=zv(Hv,Hv);t.copy=function(){return Rv(t,vg())};ay.apply(t,arguments);return yg(t)}function gg(t,e){t=t.slice();var i=0,r=t.length-1,n=t[i],s=t[r],a;if(s<n){a=i,i=r,r=a;a=n,n=s,s=a}t[i]=e.floor(n);t[r]=e.ceil(s);return t}function bg(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);e.setFullYear(t.y);return e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function mg(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));e.setUTCFullYear(t.y);return e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ag(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function wg(t){var e=t.dateTime,i=t.date,r=t.time,n=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths;var u=Dg(n),h=Mg(n),c=Dg(s),d=Mg(s),f=Dg(a),p=Mg(a),y=Dg(o),v=Mg(o),g=Dg(l),b=Mg(l);var m={a:I,A:N,b:W,B:H,c:null,d:$g,e:$g,f:eb,g:db,G:pb,H:Zg,I:Qg,j:Jg,L:tb,m:ib,M:rb,p:G,q:P,Q:Gb,s:Pb,S:nb,u:sb,U:ab,V:lb,w:ub,W:hb,x:null,X:null,y:cb,Y:fb,Z:yb,"%":Hb};var A={a:O,A:V,b:R,B:Y,c:null,d:vb,e:vb,f:wb,g:Eb,G:Nb,H:gb,I:bb,j:mb,L:Ab,m:xb,M:Sb,p:z,q:F,Q:Gb,s:Pb,S:kb,u:Lb,U:_b,V:Db,w:Mb,W:Ub,x:null,X:null,y:Tb,Y:Ib,Z:Wb,"%":Hb};var w={a:_,A:C,b:D,B:M,c:U,d:Vg,e:Vg,f:Bg,g:Hg,G:Wg,H:Yg,I:Yg,j:Rg,L:Xg,m:Og,M:zg,p:L,q:Pg,Q:qg,s:jg,S:Fg,u:Tg,U:Eg,V:Ig,w:Ug,W:Ng,x:T,X:E,y:Hg,Y:Wg,Z:Gg,"%":Kg};m.x=x(i,m);m.X=x(r,m);m.c=x(e,m);A.x=x(i,A);A.X=x(r,A);A.c=x(e,A);function x(t,e){return function(i){var r=[],n=-1,s=0,a=t.length,o,l,u;if(!(i instanceof Date))i=new Date(+i);while(++n<a){if(t.charCodeAt(n)===37){r.push(t.slice(s,n));if((l=xg[o=t.charAt(++n)])!=null)o=t.charAt(++n);else l=o==="e"?" ":"0";if(u=e[o])o=u(i,l);r.push(o);s=n+1}}r.push(t.slice(s,n));return r.join("")}}function S(t,e){return function(i){var r=Ag(1900,undefined,1),n=k(r,t,i+="",0),s,a;if(n!=i.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(r.s*1e3+("L"in r?r.L:0));if(e&&!("Z"in r))r.Z=0;if("p"in r)r.H=r.H%12+r.p*12;if(r.m===undefined)r.m="q"in r?r.q:0;if("V"in r){if(r.V<1||r.V>53)return null;if(!("w"in r))r.w=1;if("Z"in r){s=mg(Ag(r.y,0,1)),a=s.getUTCDay();s=a>4||a===0?Jp.ceil(s):Jp(s);s=$p.offset(s,(r.V-1)*7);r.y=s.getUTCFullYear();r.m=s.getUTCMonth();r.d=s.getUTCDate()+(r.w+6)%7}else{s=bg(Ag(r.y,0,1)),a=s.getDay();s=a>4||a===0?Yp.ceil(s):Yp(s);s=Op.offset(s,(r.V-1)*7);r.y=s.getFullYear();r.m=s.getMonth();r.d=s.getDate()+(r.w+6)%7}}else if("W"in r||"U"in r){if(!("w"in r))r.w="u"in r?r.u%7:"W"in r?1:0;a="Z"in r?mg(Ag(r.y,0,1)).getUTCDay():bg(Ag(r.y,0,1)).getDay();r.m=0;r.d="W"in r?(r.w+6)%7+r.W*7-(a+5)%7:r.w+r.U*7-(a+6)%7}if("Z"in r){r.H+=r.Z/100|0;r.M+=r.Z%100;return mg(r)}return bg(r)}}function k(t,e,i,r){var n=0,s=e.length,a=i.length,o,l;while(n<s){if(r>=a)return-1;o=e.charCodeAt(n++);if(o===37){o=e.charAt(n++);l=w[o in xg?e.charAt(n++):o];if(!l||(r=l(t,i,r))<0)return-1}else if(o!=i.charCodeAt(r++)){return-1}}return r}function L(t,e,i){var r=u.exec(e.slice(i));return r?(t.p=h[r[0].toLowerCase()],i+r[0].length):-1}function _(t,e,i){var r=f.exec(e.slice(i));return r?(t.w=p[r[0].toLowerCase()],i+r[0].length):-1}function C(t,e,i){var r=c.exec(e.slice(i));return r?(t.w=d[r[0].toLowerCase()],i+r[0].length):-1}function D(t,e,i){var r=g.exec(e.slice(i));return r?(t.m=b[r[0].toLowerCase()],i+r[0].length):-1}function M(t,e,i){var r=y.exec(e.slice(i));return r?(t.m=v[r[0].toLowerCase()],i+r[0].length):-1}function U(t,i,r){return k(t,e,i,r)}function T(t,e,r){return k(t,i,e,r)}function E(t,e,i){return k(t,r,e,i)}function I(t){return a[t.getDay()]}function N(t){return s[t.getDay()]}function W(t){return l[t.getMonth()]}function H(t){return o[t.getMonth()]}function G(t){return n[+(t.getHours()>=12)]}function P(t){return 1+~~(t.getMonth()/3)}function O(t){return a[t.getUTCDay()]}function V(t){return s[t.getUTCDay()]}function R(t){return l[t.getUTCMonth()]}function Y(t){return o[t.getUTCMonth()]}function z(t){return n[+(t.getUTCHours()>=12)]}function F(t){return 1+~~(t.getUTCMonth()/3)}return{format:function(t){var e=x(t+="",m);e.toString=function(){return t};return e},parse:function(t){var e=S(t+="",false);e.toString=function(){return t};return e},utcFormat:function(t){var e=x(t+="",A);e.toString=function(){return t};return e},utcParse:function(t){var e=S(t+="",true);e.toString=function(){return t};return e}}}var xg={"-":"",_:" ",0:"0"},Sg=/^\s*\d+/,kg=/^%/,Lg=/[\\^$*+?|[\]().{}]/g;function _g(t,e,i){var r=t<0?"-":"",n=(r?-t:t)+"",s=n.length;return r+(s<i?new Array(i-s+1).join(e)+n:n)}function Cg(t){return t.replace(Lg,"\\$&")}function Dg(t){return new RegExp("^(?:"+t.map(Cg).join("|")+")","i")}function Mg(t){var e={},i=-1,r=t.length;while(++i<r)e[t[i].toLowerCase()]=i;return e}function Ug(t,e,i){var r=Sg.exec(e.slice(i,i+1));return r?(t.w=+r[0],i+r[0].length):-1}function Tg(t,e,i){var r=Sg.exec(e.slice(i,i+1));return r?(t.u=+r[0],i+r[0].length):-1}function Eg(t,e,i){var r=Sg.exec(e.slice(i,i+2));return r?(t.U=+r[0],i+r[0].length):-1}function Ig(t,e,i){var r=Sg.exec(e.slice(i,i+2));return r?(t.V=+r[0],i+r[0].length):-1}function Ng(t,e,i){var r=Sg.exec(e.slice(i,i+2));return r?(t.W=+r[0],i+r[0].length):-1}function Wg(t,e,i){var r=Sg.exec(e.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1}function Hg(t,e,i){var r=Sg.exec(e.slice(i,i+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function Gg(t,e,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function Pg(t,e,i){var r=Sg.exec(e.slice(i,i+1));return r?(t.q=r[0]*3-3,i+r[0].length):-1}function Og(t,e,i){var r=Sg.exec(e.slice(i,i+2));return r?(t.m=r[0]-1,i+r[0].length):-1}function Vg(t,e,i){var r=Sg.exec(e.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1}function Rg(t,e,i){var r=Sg.exec(e.slice(i,i+3));return r?(t.m=0,t.d=+r[0],i+r[0].length):-1}function Yg(t,e,i){var r=Sg.exec(e.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1}function zg(t,e,i){var r=Sg.exec(e.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1}function Fg(t,e,i){var r=Sg.exec(e.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1}function Xg(t,e,i){var r=Sg.exec(e.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1}function Bg(t,e,i){var r=Sg.exec(e.slice(i,i+6));return r?(t.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function Kg(t,e,i){var r=kg.exec(e.slice(i,i+1));return r?i+r[0].length:-1}function qg(t,e,i){var r=Sg.exec(e.slice(i));return r?(t.Q=+r[0],i+r[0].length):-1}function jg(t,e,i){var r=Sg.exec(e.slice(i));return r?(t.s=+r[0],i+r[0].length):-1}function $g(t,e){return _g(t.getDate(),e,2)}function Zg(t,e){return _g(t.getHours(),e,2)}function Qg(t,e){return _g(t.getHours()%12||12,e,2)}function Jg(t,e){return _g(1+Op.count(jp(t),t),e,3)}function tb(t,e){return _g(t.getMilliseconds(),e,3)}function eb(t,e){return tb(t,e)+"000"}function ib(t,e){return _g(t.getMonth()+1,e,2)}function rb(t,e){return _g(t.getMinutes(),e,2)}function nb(t,e){return _g(t.getSeconds(),e,2)}function sb(t){var e=t.getDay();return e===0?7:e}function ab(t,e){return _g(Rp.count(jp(t)-1,t),e,2)}function ob(t){var e=t.getDay();return e>=4||e===0?Xp(t):Xp.ceil(t)}function lb(t,e){t=ob(t);return _g(Xp.count(jp(t),t)+(jp(t).getDay()===4),e,2)}function ub(t){return t.getDay()}function hb(t,e){return _g(Yp.count(jp(t)-1,t),e,2)}function cb(t,e){return _g(t.getFullYear()%100,e,2)}function db(t,e){t=ob(t);return _g(t.getFullYear()%100,e,2)}function fb(t,e){return _g(t.getFullYear()%1e4,e,4)}function pb(t,e){var i=t.getDay();t=i>=4||i===0?Xp(t):Xp.ceil(t);return _g(t.getFullYear()%1e4,e,4)}function yb(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+_g(e/60|0,"0",2)+_g(e%60,"0",2)}function vb(t,e){return _g(t.getUTCDate(),e,2)}function gb(t,e){return _g(t.getUTCHours(),e,2)}function bb(t,e){return _g(t.getUTCHours()%12||12,e,2)}function mb(t,e){return _g(1+$p.count(sy(t),t),e,3)}function Ab(t,e){return _g(t.getUTCMilliseconds(),e,3)}function wb(t,e){return Ab(t,e)+"000"}function xb(t,e){return _g(t.getUTCMonth()+1,e,2)}function Sb(t,e){return _g(t.getUTCMinutes(),e,2)}function kb(t,e){return _g(t.getUTCSeconds(),e,2)}function Lb(t){var e=t.getUTCDay();return e===0?7:e}function _b(t,e){return _g(Qp.count(sy(t)-1,t),e,2)}function Cb(t){var e=t.getUTCDay();return e>=4||e===0?iy(t):iy.ceil(t)}function Db(t,e){t=Cb(t);return _g(iy.count(sy(t),t)+(sy(t).getUTCDay()===4),e,2)}function Mb(t){return t.getUTCDay()}function Ub(t,e){return _g(Jp.count(sy(t)-1,t),e,2)}function Tb(t,e){return _g(t.getUTCFullYear()%100,e,2)}function Eb(t,e){t=Cb(t);return _g(t.getUTCFullYear()%100,e,2)}function Ib(t,e){return _g(t.getUTCFullYear()%1e4,e,4)}function Nb(t,e){var i=t.getUTCDay();t=i>=4||i===0?iy(t):iy.ceil(t);return _g(t.getUTCFullYear()%1e4,e,4)}function Wb(){return"+0000"}function Hb(){return"%"}function Gb(t){return+t}function Pb(t){return Math.floor(+t/1e3)}var Ob;var Vb;Rb({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Rb(t){Ob=wg(t);Vb=Ob.format;return Ob}var Yb=1e3,zb=Yb*60,Fb=zb*60,Xb=Fb*24,Bb=Xb*7,Kb=Xb*30,qb=Xb*365;function jb(t){return new Date(t)}function $b(t){return t instanceof Date?+t:+new Date(+t)}function Zb(t,e,i,r,n,s,a,o,l){var u=zv(Hv,Hv),h=u.invert,c=u.domain;var d=l(".%L"),f=l(":%S"),p=l("%I:%M"),y=l("%I %p"),v=l("%a %d"),g=l("%b %d"),b=l("%B"),m=l("%Y");var A=[[a,1,Yb],[a,5,5*Yb],[a,15,15*Yb],[a,30,30*Yb],[s,1,zb],[s,5,5*zb],[s,15,15*zb],[s,30,30*zb],[n,1,Fb],[n,3,3*Fb],[n,6,6*Fb],[n,12,12*Fb],[r,1,Xb],[r,2,2*Xb],[i,1,Bb],[e,1,Kb],[e,3,3*Kb],[t,1,qb]];function w(o){return(a(o)<o?d:s(o)<o?f:n(o)<o?p:r(o)<o?y:e(o)<o?i(o)<o?v:g:t(o)<o?b:m)(o)}function x(e,i,r,n){if(e==null)e=10;if(typeof e==="number"){var s=Math.abs(r-i)/e,a=pp((function(t){return t[2]})).right(A,s);if(a===A.length){n=kp(i/qb,r/qb,e);e=t}else if(a){a=A[s/A[a-1][2]<A[a][2]/s?a-1:a];n=a[1];e=a[0]}else{n=Math.max(kp(i,r,e),1);e=o}}return n==null?e:e.every(n)}u.invert=function(t){return new Date(h(t))};u.domain=function(t){return arguments.length?c(vy.call(t,$b)):c().map(jb)};u.ticks=function(t,e){var i=c(),r=i[0],n=i[i.length-1],s=n<r,a;if(s)a=r,r=n,n=a;a=x(t,r,n,e);a=a?a.range(r,n+1):[];return s?a.reverse():a};u.tickFormat=function(t,e){return e==null?w:l(e)};u.nice=function(t,e){var i=c();return(t=x(t,i[0],i[i.length-1],e))?c(gg(i,t)):u};u.copy=function(){return Rv(u,Zb(t,e,i,r,n,s,a,o,l))};return u}function Qb(){return ay.apply(Zb(jp,qp,Rp,Op,Pp,Gp,Hp,Up,Vb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var Jb=s.propDefaultValues;var tm=function(){function t(){}return t}();tm.mainTitle="Dumbbell Plot Title";tm.subTitle="This is the dumbbell plot's subtitle";tm.height=300;tm.width=650;tm.margin={top:300*.01,bottom:300*.01,right:650*.01,left:650*.01};tm.padding={top:20,bottom:50,right:50,left:50};tm.ordinalAccessor="date";tm.valueAccessor="value";tm.seriesAccessor="category";tm.focusMarker={key:"",sizeFromBar:12};tm.marker={visible:true,type:"dot",sizeFromBar:8};tm.barStyle={opacity:1,width:1,colorRule:"default"};tm.differenceLabel={visible:false,placement:"left",calculation:"difference",format:"0[.][0][0]a",collisionHideOnly:false};tm.layout=Jb.layout;tm.accessibility=Jb.accessibility;tm.animationConfig=Jb.animationConfig;tm.highestHeadingLevel=Jb.highestHeadingLevel;tm.sortOrder=Jb.sortOrder;tm.xAxis=Jb.xAxisDate;tm.yAxis=Jb.yAxis;tm.showBaselineX=Jb.showBaselineFalse;tm.showBaselineY=Jb.showBaselineFalse;tm.wrapLabel=Jb.wrapLabel;tm.colorPalette=Jb.colorPaletteCategorical;tm.hoverStyle=Jb.hoverStyle;tm.clickStyle=Jb.clickStyle;tm.referenceStyle=Jb.referenceStyle;tm.cursor=Jb.cursor;tm.roundedCorner=Jb.roundedCorner;tm.barIntervalRatio=Jb.barIntervalRatio;tm.hoverOpacity=Jb.hoverOpacity;tm.dataLabel=Jb.dataLabelEnds;tm.legend=Jb.hiddenLegend;tm.tooltipLabel=Jb.tooltipLabel;tm.showTooltip=Jb.showTooltip;tm.suppressEvents=Jb.suppressEvents;tm.referenceLines=Jb.referenceLines;tm.annotations=Jb.annotations;tm.clickHighlight=Jb.clickHighlight;tm.seriesLabel=Jb.seriesLabel;function em(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function im(t){return 1-Math.sqrt(1-t*t)}var rm={value:function(){}};function nm(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new sm(i)}function sm(t){this._=t}function am(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}sm.prototype=nm.prototype={constructor:sm,on:function(t,e){var i=this._,r=am(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=om(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=lm(i[n],t.name,e);else if(e==null)for(n in i)i[n]=lm(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new sm(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function om(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function lm(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=rm,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var um=0,hm=0,cm=0,dm=1e3,fm,pm,ym=0,vm=0,gm=0,bm=typeof performance==="object"&&performance.now?performance:Date,mm=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Am(){return vm||(mm(wm),vm=bm.now()+gm)}function wm(){vm=0}function xm(){this._call=this._time=this._next=null}xm.prototype=Sm.prototype={constructor:xm,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?Am():+i)+(e==null?0:+e);if(!this._next&&pm!==this){if(pm)pm._next=this;else fm=this;pm=this}this._call=t;this._time=i;Dm()},stop:function(){if(this._call){this._call=null;this._time=Infinity;Dm()}}};function Sm(t,e,i){var r=new xm;r.restart(t,e,i);return r}function km(){Am();++um;var t=fm,e;while(t){if((e=vm-t._time)>=0)t._call.call(null,e);t=t._next}--um}function Lm(){vm=(ym=bm.now())+gm;um=hm=0;try{km()}finally{um=0;Cm();vm=0}}function _m(){var t=bm.now(),e=t-ym;if(e>dm)gm-=e,ym=t}function Cm(){var t,e=fm,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:fm=i}}pm=t;Dm(r)}function Dm(t){if(um)return;if(hm)hm=clearTimeout(hm);var e=t-vm;if(e>24){if(t<Infinity)hm=setTimeout(Lm,t-bm.now()-gm);if(cm)cm=clearInterval(cm)}else{if(!cm)ym=bm.now(),cm=setInterval(_m,dm);um=1,mm(Lm)}}function Mm(t,e,i){var r=new xm;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var Um=nm("start","end","interrupt");var Tm=[];var Em=0;var Im=1;var Nm=2;var Wm=3;var Hm=4;var Gm=5;var Pm=6;function Om(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;zm(t,i,{name:e,index:r,group:n,on:Um,tween:Tm,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Em})}function Vm(t,e){var i=Ym(t,e);if(i.state>Em)throw new Error("too late; already scheduled");return i}function Rm(t,e){var i=Ym(t,e);if(i.state>Nm)throw new Error("too late; already started");return i}function Ym(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function zm(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=Sm(s,0,i.time);function s(t){i.state=Im;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==Im)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===Wm)return Mm(a);if(d.state===Hm){d.state=Pm;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=Pm;d.timer.stop();delete r[u]}}Mm((function(){if(i.state===Wm){i.state=Hm;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=Nm;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==Nm)return;i.state=Wm;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=Gm,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===Gm){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=Pm;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function Fm(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>Nm&&r.state<Gm;r.state=Pm;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function Xm(t){return this.each((function(){Fm(this,t)}))}function Bm(t,e){var i,r;return function(){var n=Rm(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function Km(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=Rm(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function qm(t,e){var i=this._id;t+="";if(arguments.length<2){var r=Ym(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?Bm:Km)(i,t,e))}function jm(t,e,i){var r=t._id;t.each((function(){var t=Rm(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return Ym(t,r).value[e]}}function $m(t,e){var i;return(typeof e==="number"?dv:e instanceof Yy?ov:(i=Yy(e))?(e=i,ov):bv)(t,e)}function Zm(t){return function(){this.removeAttribute(t)}}function Qm(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Jm(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function tA(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function eA(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function iA(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function rA(t,e){var i=kd(t),r=i==="transform"?Ev:$m;return this.attrTween(t,typeof e==="function"?(i.local?iA:eA)(i,r,jm(this,"attr."+t,e)):e==null?(i.local?Qm:Zm)(i):(i.local?tA:Jm)(i,r,e+""))}function nA(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function sA(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function aA(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=kd(t);return this.tween(i,(r.local?nA:sA)(r,e))}function oA(t,e){return function(){Vm(this,t).delay=+e.apply(this,arguments)}}function lA(t,e){return e=+e,function(){Vm(this,t).delay=e}}function uA(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?oA:lA)(e,t)):Ym(this.node(),e).delay}function hA(t,e){return function(){Rm(this,t).duration=+e.apply(this,arguments)}}function cA(t,e){return e=+e,function(){Rm(this,t).duration=e}}function dA(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?hA:cA)(e,t)):Ym(this.node(),e).duration}function fA(t,e){if(typeof e!=="function")throw new Error;return function(){Rm(this,t).ease=e}}function pA(t){var e=this._id;return arguments.length?this.each(fA(e,t)):Ym(this.node(),e).ease}function yA(t){if(typeof t!=="function")t=Nd(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new PA(r,this._parents,this._name,this._id)}function vA(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new PA(a,this._parents,this._name,this._id)}function gA(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function bA(t,e,i){var r,n,s=gA(e)?Vm:Rm;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function mA(t,e){var i=this._id;return arguments.length<2?Ym(this.node(),i).on.on(t):this.each(bA(i,t,e))}function AA(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function wA(){return this.on("end.remove",AA(this._id))}function xA(t){var e=this._name,i=this._id;if(typeof t!=="function")t=Md(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;Om(u[d],e,i,d,u,Ym(h,i))}}}return new PA(s,this._parents,e,i)}function SA(t){var e=this._name,i=this._id;if(typeof t!=="function")t=Ed(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=Ym(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){Om(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new PA(s,a,e,i)}var kA=cp.prototype.constructor;function LA(){return new kA(this._groups,this._parents)}function _A(t,e){var i,r,n;return function(){var s=yf(this,t),a=(this.style.removeProperty(t),yf(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function CA(t){return function(){this.style.removeProperty(t)}}function DA(t,e,i){var r,n;return function(){var s=yf(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function MA(t,e,i){var r,n,s;return function(){var a=yf(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),yf(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function UA(t,e,i){var r=(t+="")==="transform"?Tv:$m;return e==null?this.styleTween(t,_A(t,r)).on("end.style."+t,CA(t)):this.styleTween(t,typeof e==="function"?MA(t,r,jm(this,"style."+t,e)):DA(t,r,e+""),i)}function TA(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function EA(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,TA(t,e,i==null?"":i))}function IA(t){return function(){this.textContent=t}}function NA(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function WA(t){return this.tween("text",typeof t==="function"?NA(jm(this,"text",t)):IA(t==null?"":t+""))}function HA(){var t=this._name,e=this._id,i=VA();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=Ym(l,e);Om(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new PA(r,this._parents,t,i)}var GA=0;function PA(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function OA(t){return cp().transition(t)}function VA(){return++GA}var RA=cp.prototype;PA.prototype=OA.prototype={constructor:PA,select:xA,selectAll:SA,filter:yA,merge:vA,selection:LA,transition:HA,call:RA.call,nodes:RA.nodes,node:RA.node,size:RA.size,empty:RA.empty,each:RA.each,on:mA,attr:rA,attrTween:aA,style:UA,styleTween:EA,text:WA,remove:wA,tween:qm,delay:uA,duration:dA,ease:pA};var YA={time:null,delay:0,duration:250,ease:em};function zA(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return YA.time=Am(),YA}}return i}function FA(t){var e,i;if(t instanceof PA){e=t._id,t=t._name}else{e=VA(),(i=YA).time=Am(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){Om(l,t,e,u,a,i||zA(l,e))}}}return new PA(r,this._parents,t,e)}cp.prototype.interrupt=Xm;cp.prototype.transition=FA;var XA=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var BA=new Uint8Array(16);function KA(){if(!XA){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return XA(BA)}var qA=[];for(var jA=0;jA<256;++jA){qA[jA]=(jA+256).toString(16).substr(1)}function $A(t,e){var i=e||0;var r=qA;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function ZA(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||KA)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||$A(n)}var QA=s.getAccessibleStrokes,JA=s.ensureTextContrast,tw=s.createTextStrokeFilter,ew=s.createUrl,iw=s.initializeDescriptionRoot,rw=s.initializeElementAccess,nw=s.setElementFocusHandler,sw=s.setElementAccessID,aw=s.setAccessibilityController,ow=s.hideNonessentialGroups,lw=s.setAccessTitle,uw=s.setAccessSubtitle,hw=s.setAccessLongDescription,cw=s.setAccessExecutiveSummary,dw=s.setAccessPurpose,fw=s.setAccessContext,pw=s.setAccessStatistics,yw=s.setAccessChartCounts,vw=s.setAccessXAxis,gw=s.setAccessYAxis,bw=s.setAccessStructure,mw=s.setAccessAnnotation,Aw=s.retainAccessFocus,ww=s.checkAccessFocus,xw=s.setElementInteractionAccessState,Sw=s.setAccessibilityDescriptionWidth,kw=s.drawTooltip,Lw=s.annotate,_w=s.chartAccessors,Cw=s.checkInteraction,Dw=s.checkClicked,Mw=s.checkHovered,Uw=s.convertVisaColor,Tw=s.drawAxis,Ew=s.drawGrid,Iw=s.drawLegend,Nw=s.setLegendInteractionState,Ww=s.formatDataLabel,Hw=s.getColors,Gw=s.getLicenses,Pw=s.getPadding,Ow=s.getScopedData,Vw=s.initTooltipStyle,Rw=s.overrideTitleTooltip,Yw=s.placeDataLabels,zw=s.scopeDataKeys,Fw=s.visaColors,Xw=s.transitionEndAll,Bw=s.validateAccessibilityProps,Kw=s.findTagLevel,qw=s.prepareRenderChange,jw=s.roundTo,$w=s.getTextWidth,Zw=s.resolveLabelCollision;var Qw=t("dumbbell_plot",function(){function t(t){var r=this;e(this,t);this.mainTitle=tm.mainTitle;this.subTitle=tm.subTitle;this.height=tm.height;this.width=tm.width;this.margin=tm.margin;this.padding=tm.padding;this.highestHeadingLevel=tm.highestHeadingLevel;this.ordinalAccessor=tm.ordinalAccessor;this.valueAccessor=tm.valueAccessor;this.seriesAccessor=tm.seriesAccessor;this.sortOrder=tm.sortOrder;this.xAxis=tm.xAxis;this.yAxis=tm.yAxis;this.wrapLabel=tm.wrapLabel;this.layout=tm.layout;this.showBaselineX=tm.showBaselineX;this.showBaselineY=tm.showBaselineY;this.colorPalette=tm.colorPalette;this.hoverStyle=tm.hoverStyle;this.hoverOpacity=tm.hoverOpacity;this.animationConfig=tm.animationConfig;this.clickStyle=tm.clickStyle;this.referenceStyle=tm.referenceStyle;this.cursor=tm.cursor;this.focusMarker=tm.focusMarker;this.marker=tm.marker;this.barStyle=tm.barStyle;this.dataLabel=tm.dataLabel;this.seriesLabel=tm.seriesLabel;this.differenceLabel=tm.differenceLabel;this.showTooltip=tm.showTooltip;this.tooltipLabel=tm.tooltipLabel;this.accessibility=tm.accessibility;this.legend=tm.legend;this.annotations=tm.annotations;this.referenceLines=tm.referenceLines;this.suppressEvents=tm.suppressEvents;this.clickHighlight=tm.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.updated=true;this.time={timemillisecond:Up,timesecond:Hp,timeminute:Gp,timehour:Pp,timeday:Op,timeweek:Rp,timemonth:qp,timeyear:jp};this.shouldUpdateLayout=false;this.shouldValidate=false;this.shouldUpdateAnnotations=false;this.shouldUpdateReferenceLines=false;this.shouldResetRoot=false;this.shouldUpdateXAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYAxis=false;this.shouldUpdateYGrid=false;this.shouldUpdateScales=false;this.shouldUpdateBaseline=false;this.shouldCheckValueAxis=false;this.shouldCheckLabelAxis=false;this.shouldSetColors=false;this.shouldUpdateLegend=false;this.shouldSetGlobalSelections=false;this.shouldSetSeriesSelections=false;this.shouldSetTestingAttributes=false;this.shouldUpdateData=false;this.shouldEnterUpdateExit=false;this.shouldEnterUpdateExitMarkers=false;this.shouldUpdateMarkerOpacity=false;this.shouldUpdateGeometries=false;this.shouldUpdateSeriesLabels=false;this.shouldUpdateDifferenceLabels=false;this.shouldUpdateLabels=false;this.shouldValidateInteractionKeys=false;this.shouldUpdateTableData=false;this.shouldValidateDataLabelPlacement=false;this.shouldValidateDataLabelAccessor=false;this.shouldAddStrokeUnder=false;this.shouldUpdateBaselineX=false;this.shouldUpdateBaselineY=false;this.shouldUpdateLegendData=false;this.shouldUpdateMarkerIDs=false;this.shouldValidateLayout=false;this.shouldValidateSeriesLabelPlacement=false;this.shouldValidateDiffLabelPlacement=false;this.shouldBindInteractivity=false;this.shouldBindLegendInteractivity=false;this.shouldBindSeriesInteractivity=false;this.shouldUpdateCursor=false;this.shouldSetLegendCursor=false;this.shouldSetSeriesCursor=false;this.shouldSetLabelOpacity=false;this.shouldSetSeriesLabelOpacity=false;this.shouldSetDifferenceLabelOpacity=false;this.shouldSetSelectionClass=false;this.shouldDrawInteractionState=false;this.shouldRenderMarkerGroup=false;this.shouldUpdateBarStyle=false;this.shouldUpdateMarkerSize=false;this.shouldUpdateDiffLabelColor=false;this.shouldUpdateMarkerStyle=false;this.shouldDrawMarkerGeometries=false;this.shouldUpdateMarkerData=false;this.shouldUpdateSeriesData=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityAttributes=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.topLevel="h2";this.bottomLevel="p";this.strokes={};this.handleMarkerColors=function(t,e,i){var n=r.rawColors[t.referenceIndex]||r.rawColors[0];var s=e<2&&r.clickHighlight.length?r.clickStyle.color||n:e<4?n:r.hoverStyle.color||n;var a=r.colorArr[t.referenceIndex]||r.colorArr[0];var o=e<2&&r.clickHighlight.length?r.clickStyle.color||a:e<4?a:r.hoverStyle.color||a;dp(i[e]).attr("fill",o);return!r.accessibility.hideStrokes?r.strokes[s.toLowerCase()]:o};this.handleSeriesLabelColors=function(t,e){var i;var n;if(r.seriesInteraction){i=Mw(t,r.hoverHighlight,r.innerInteractionKeys);n=Dw(t,r.clickHighlight,r.innerInteractionKeys)}var s=r.rawColors[e]||r.rawColors[0];var a=r.seriesInteraction?n&&r.clickHighlight.length?r.clickStyle.color||s:i&&r.hoverHighlight?r.hoverStyle.color||s:s:s;return r.textColors[a.toLowerCase()]};this.handleLabelColors=function(t,e){var i=Mw(t,r.hoverHighlight,r.innerInteractionKeys);var n=Dw(t,r.clickHighlight,r.innerInteractionKeys);var s=r.rawColors[e]||r.rawColors[0];var a=n&&r.clickHighlight.length?r.clickStyle.color||s:i&&r.hoverHighlight?r.hoverStyle.color||s:s;return r.textColors[a.toLowerCase()]};this.handleBarColors=function(t,e,i){t.focusMarker=false;if(t.values[0][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=0}else if(t.values[1][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=1}var n=Dw(t.values[0],r.clickHighlight,r.innerInteractionKeys)&&Dw(t.values[1],r.clickHighlight,r.innerInteractionKeys);var s=Mw(t.values[0],r.hoverHighlight,r.innerInteractionKeys)&&Mw(t.values[1],r.hoverHighlight,r.innerInteractionKeys);var a=r.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?r.rawColors[t.focusMarker]:r.barStyle.colorRule==="greaterValue"?r.rawColors[t.greaterIndex]:r.rawColors[2];var o=n&&r.clickHighlight.length?r.clickStyle.color||a:s&&r.hoverHighlight?r.hoverStyle.color||a:a;var l=r.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?r.colorArr[t.focusMarker]:r.barStyle.colorRule==="greaterValue"?r.colorArr[t.greaterIndex]:r.colorArr[2];var u=n&&r.clickHighlight.length?r.clickStyle.color||l:s&&r.hoverHighlight?r.hoverStyle.color||l:l;dp(i[e]).attr("fill",u);return!r.accessibility.hideStrokes?r.strokes[o.toLowerCase()]:u};this.handleBarOpacity=function(t,e,i){var n=Cw(t.values[0],1,0,r.hoverHighlight,r.clickHighlight,r.innerInteractionKeys);var s=Cw(t.values[1],1,0,r.hoverHighlight,r.clickHighlight,r.innerInteractionKeys);var a=n&&s?r.barStyle.opacity:r.hoverOpacity;dp(i[e]).attr("stroke-opacity",a);return a};this.setBarSize=function(t,e,i){var n=Dw(t.values[0],r.clickHighlight,r.innerInteractionKeys)&&Dw(t.values[1],r.clickHighlight,r.innerInteractionKeys);var s=Mw(t.values[0],r.hoverHighlight,r.innerInteractionKeys)&&Mw(t.values[1],r.hoverHighlight,r.innerInteractionKeys);var a=r.dumbbellInteraction?n?parseFloat(r.clickStyle.strokeWidth+"")||r.barStyle.width:s?parseFloat(r.hoverStyle.strokeWidth+"")||r.barStyle.width:r.barStyle.width:r.barStyle.width;var o=r.x(t.values[0][r.xAccessor]);var l=r.y(t.values[0][r.yAccessor]);var u=r.x(t.values[1][r.xAccessor]);var h=r.y(t.values[1][r.yAccessor]);var c=r.isVertical?l>h?.001:-.001:0;var d=!r.isVertical?o>u?.001:-.001:0;var f=r.isVertical?a/2:0;var p=!r.isVertical?a/2:0;dp(i[e]).attr("data-barSize",a).attr("data-centerX1",(function(t){return r.x(t.values[0][r.xAccessor])})).attr("data-centerY1",(function(t){return r.y(t.values[0][r.yAccessor])})).attr("data-centerX2",(function(t){return r.x(t.values[1][r.xAccessor])})).attr("data-centerY2",(function(t){return r.y(t.values[1][r.yAccessor])}));return"M "+(o+d)+" "+(l+c)+" L "+o+" "+l+" L "+(o+f)+" "+(l+p)+" L "+(u+f)+" "+(h+p)+" L "+u+" "+h+" L "+(u-f)+" "+(h-p)+" L "+(o-f)+" "+(l-p)+" L "+o+" "+l+" L "+(o+f)+" "+(l+p)+" L "+(u+f)+" "+(h+p)+" L "+u+" "+h+" L "+(u-d)+" "+(h-c)};this.setDiffLabelColor=function(t){t.focusMarker=false;if(t.values[0][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=0}else if(t.values[1][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=1}var e=r.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?r.rawColors[t.focusMarker]:r.barStyle.colorRule==="greaterValue"?r.rawColors[t.greaterIndex]:r.rawColors[2];var i;var n;if(r.dumbbellInteraction){n=Dw(t.values[0],r.clickHighlight,r.innerInteractionKeys)&&Dw(t.values[1],r.clickHighlight,r.innerInteractionKeys);i=Mw(t.values[0],r.hoverHighlight,r.innerInteractionKeys)&&Mw(t.values[1],r.hoverHighlight,r.innerInteractionKeys)}var s=r.dumbbellInteraction?n&&r.clickHighlight.length?r.clickStyle.color||e:i&&r.hoverHighlight?r.hoverStyle.color||e:e:e;return r.textColors[s.toLowerCase()]};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.mainTitleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subTitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldUpdateLayout=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true};t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateLegendData=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateBarStyle=true;this.shouldSetColors=true};t.prototype.idWatcher=function(t,e){this.chartID=t||"dumbbell-plot-"+ZA();this.dumbbellPlotEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldAddStrokeUnder=true;this.shouldUpdateMarkerIDs=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldSetAnnotationAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldUpdateGeometries=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldCheckLabelAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldCheckValueAxis=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true};t.prototype.seriesAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldSetGlobalSelections=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateLegendData=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateLegend=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateTableData=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.sortWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true};t.prototype.xAxisWatcher=function(t,e){var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;var a=t&&t.format?t.format:false;var o=e&&e.format?e.format:false;var l=t&&t.unit?t.unit:false;var u=e&&e.unit?e.unit:false;if(i!==r||n!==s){this.shouldUpdateXGrid=true}if(a!==o||l!==u){this.shouldUpdateScales=true;if(l!==u){this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true}}this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true};t.prototype.yAxisWatcher=function(t,e){var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateYGrid=true}this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true};t.prototype.wrapLabelWatcher=function(t,e){this.shouldCheckLabelAxis=true};t.prototype.layoutWatcher=function(t,e){this.shouldValidateLayout=true;this.shouldValidateDataLabelPlacement=true;this.shouldValidateSeriesLabelPlacement=true;this.shouldUpdateSeriesData=true;this.shouldValidateDiffLabelPlacement=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true};t.prototype.showBaselineXWatcher=function(t,e){this.shouldUpdateBaselineX=true};t.prototype.showBaselineYWatcher=function(t,e){this.shouldUpdateBaselineY=true};t.prototype.paletteWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldSetColors=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerStyle=true;this.shouldUpdateLegend=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDiffLabelColor=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldSetSeriesCursor=true};t.prototype.focusMarkerWatcher=function(t,e){this.shouldDrawMarkerGeometries=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateLabels=true;var i=t&&t.sizeFromBar?t.sizeFromBar:0;var r=e&&e.sizeFromBar?e.sizeFromBar:0;if(i!==r){this.shouldUpdateMarkerSize=true}var n=t&&t.key?t.key:false;var s=e&&e.key?e.key:false;if(n!==s){this.shouldUpdateDiffLabelColor=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateBarStyle=true}};t.prototype.markerWatcher=function(t,e){var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldUpdateMarkerOpacity=true}var n=t&&t.type?t.type:false;var s=e&&e.type?e.type:false;if(n!==s){this.shouldRenderMarkerGroup=true;this.shouldEnterUpdateExitMarkers=true}this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateData=true;this.shouldUpdateLabels=true;var a=t&&t.sizeFromBar?t.sizeFromBar:0;var o=e&&e.sizeFromBar?e.sizeFromBar:0;if(a!==o){this.shouldUpdateMarkerSize=true}};t.prototype.barStyleWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateDiffLabelColor=true;this.shouldDrawInteractionState=true;var i=t&&t.width?t.width:0;var r=e&&e.width?e.width:0;if(i!==r){this.shouldDrawInteractionState=true;this.shouldUpdateMarkerData=true;this.shouldUpdateData=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateSeriesLabels=true}};t.prototype.dataLabelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.placement?t.placement:false;var r=e&&e.placement?e.placement:false;var n=t&&t.visible;var s=e&&e.visible;var a=t&&t.labelAccessor?t.labelAccessor:false;var o=e&&e.labelAccessor?e.labelAccessor:false;if(n!==s){this.shouldSetLabelOpacity=true}if(i!==r){this.shouldValidateDataLabelPlacement=true}if(a!==o){this.shouldValidateDataLabelAccessor=true}};t.prototype.seriesLabelWatcher=function(t,e){this.shouldValidateSeriesLabelPlacement=true;this.shouldUpdateSeriesLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetSeriesLabelOpacity=true}var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(n!==s){this.shouldUpdateSeriesData=true;this.shouldSetSeriesSelections=true}};t.prototype.differenceLabelWatcher=function(t,e){this.shouldUpdateDifferenceLabels=true;this.shouldUpdateDiffLabelColor=true;this.shouldAddStrokeUnder=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetDifferenceLabelOpacity=true}var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(n!==s){this.shouldValidateDiffLabelPlacement=true}};t.prototype.showTooltipWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideStrokes?t.hideStrokes:false;var w=e&&e.hideStrokes?e.hideStrokes:false;if(A!==w){this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerStyle=true;this.shouldAddStrokeUnder=true;this.shouldUpdateLegend=true}var x=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var S=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var k=t&&t.elementsAreInterface?t.elementsAreInterface:false;var L=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(x!==S||k!==L){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(k!==L){this.shouldSetSelectionClass=true}};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldBindLegendInteractivity=true;this.shouldSetLegendCursor=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldCheckValueAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldBindLegendInteractivity=true;this.shouldBindSeriesInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldSetSeriesCursor=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.hoverWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldUpdateData=true;this.shouldUpdateLabels=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true};t.prototype.clickWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldUpdateData=true;this.shouldUpdateLabels=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldUpdateLabels=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true;var i=t&&t.length===1?t[0]===this.seriesAccessor:false;var r=e&&e.length===1?e[0]===this.seriesAccessor:false;if(i!==r){this.shouldBindSeriesInteractivity=true;this.shouldSetSeriesCursor=true;this.shouldBindLegendInteractivity=true;this.shouldSetLegendCursor=true}};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.chartID=t.uniqueID||"dumbbell-plot-"+ZA();t.dumbbellPlotEl.id=t.chartID;t.setTagLevels();t.checkIfSafari();t.validateLayout();t.validateDataLabelPlacement();t.validateSeriesLabelPlacement();t.validateDiffLabelPlacement();t.validateInteractionKeys();t.prepareData();t.prepareMarkerData();t.prepareSeriesData();t.prepareLegendData();t.setLayoutData();t.prepareScales();t.validateDataLabelAccessor();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.defaults=true;t.shouldValidateAccessibilityProps();t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.drawXGrid();t.drawYGrid();t.renderMarkerGroup();t.setGlobalSelections();t.setTestingAttributes();t.enterMarkerGeometries();t.updateMarkerGeometries();t.exitMarkerGeometries();t.updateMarkerSize();t.enterDumbbells();t.updateDumbbells();t.exitDumbbells();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterDifferenceLabels();t.updateDifferenceLabels();t.exitDifferenceLabels();t.updateMarkerIds();t.drawDumbbells();t.updateInteractionState();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawLegendElements();t.drawDataLabels();t.drawSeriesLabels();t.drawDifferenceLabels();t.addStrokeUnder();t.drawReferenceLines();t.setSelectedClass();t.setLabelOpacity();t.bindLegendInteractivity();t.setLegendCursor();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();t.drawBaselineX();t.drawBaselineY();t.onChangeHandler();ow(t.root.node(),t.dumbbellG.node());t.setGroupAccessibilityAttributes();t.setGroupAccessibilityID();t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldRenderMarkerGroup){t.renderMarkerGroup();t.shouldRenderMarkerGroup=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldSetSeriesSelections){t.setSeriesSelections();t.shouldSetSeriesSelections=false}if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldEnterUpdateExitMarkers){t.enterMarkerGeometries();t.updateMarkerGeometries();t.exitMarkerGeometries();t.shouldEnterUpdateExitMarkers=false;t.shouldUpdateMarkerOpacity=false}if(t.shouldUpdateMarkerOpacity){t.updateMarkerGeometries();t.shouldUpdateMarkerOpacity=false}if(t.shouldEnterUpdateExit){t.enterDumbbells();t.updateDumbbells();t.exitDumbbells();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterDifferenceLabels();t.updateDifferenceLabels();t.exitDifferenceLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateMarkerIDs){t.updateMarkerIds();t.shouldUpdateMarkerIDs=false}if(t.shouldUpdateGeometries){t.drawDumbbells();t.shouldUpdateGeometries=false}if(t.shouldUpdateBarStyle){t.updateBarStyle();t.shouldUpdateBarStyle=false}if(t.shouldUpdateMarkerStyle){t.updateMarkerStyle();t.shouldUpdateMarkerStyle=false}if(t.shouldUpdateMarkerSize){t.updateMarkerSize();t.shouldUpdateMarkerSize=false}if(t.shouldDrawMarkerGeometries){t.drawMarkerGeometries();t.shouldDrawMarkerGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldUpdateSeriesLabels){t.drawSeriesLabels();t.shouldUpdateSeriesLabels=false}if(t.shouldUpdateDifferenceLabels){t.drawDifferenceLabels();t.shouldUpdateDifferenceLabels=false}if(t.shouldAddStrokeUnder){t.addStrokeUnder();t.shouldAddStrokeUnder=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldSetSeriesLabelOpacity){t.setSeriesLabelOpacity();t.shouldSetSeriesLabelOpacity=false}if(t.shouldSetDifferenceLabelOpacity){t.setDifferenceLabelOpacity();t.shouldSetDifferenceLabelOpacity=false}if(t.shouldUpdateDiffLabelColor){t.updateDiffLabelColor();t.shouldUpdateDiffLabelColor=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldBindLegendInteractivity){t.bindLegendInteractivity();t.shouldBindLegendInteractivity=false}if(t.shouldBindSeriesInteractivity){t.bindSeriesInteractivity();t.shouldBindSeriesInteractivity=false}if(t.shouldSetLegendCursor){t.setLegendCursor();t.shouldSetLegendCursor=false}if(t.shouldSetSeriesCursor){t.setSeriesCursor();t.shouldSetSeriesCursor=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateBaselineX){t.drawBaselineX();t.shouldUpdateBaseline=false}if(t.shouldUpdateBaselineY){t.drawBaselineY();t.shouldUpdateBaseline=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;Bw(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor];this.seriesInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.seriesAccessor;this.dumbbellInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.ordinalAccessor};t.prototype.validateDataLabelAccessor=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor};t.prototype.validateLayout=function(){this.layoutOverride=!this.layout||this.data[0][this.ordinalAccessor]instanceof Date?"vertical":this.layout;this.isVertical=this.layoutOverride==="vertical"};t.prototype.validateDataLabelPlacement=function(){this.placement=this.dataLabel.placement;if(this.isVertical){if(this.placement!=="left"&&this.placement!=="right"&&this.placement!=="auto"){this.placement="ends"}}else{if(this.placement!=="top"&&this.placement!=="bottom"&&this.placement!=="auto"){this.placement="ends"}}};t.prototype.validateSeriesLabelPlacement=function(){this.seriesLabelDetails=Object.assign({},this.seriesLabel);if(!this.seriesLabelDetails.placement){this.seriesLabelDetails.placement=this.isVertical?"right":"top"}if(this.isVertical&&(this.seriesLabelDetails.placement!=="right"&&this.seriesLabelDetails.placement!=="left"&&this.seriesLabelDetails.placement!=="auto")){this.seriesLabelDetails.placement="right"}else if(!this.isVertical&&(this.seriesLabelDetails.placement!=="top"&&this.seriesLabelDetails.placement!=="bottom"&&this.seriesLabelDetails.placement!=="auto")){this.seriesLabelDetails.placement="top"}if(!this.seriesLabelDetails.label||!this.seriesLabelDetails.label.length){this.seriesLabelDetails.label=""}};t.prototype.validateDiffLabelPlacement=function(){this.diffLabelDetails=Object.assign({},this.differenceLabel);if(!this.diffLabelDetails.placement){this.diffLabelDetails.placement=this.isVertical?"left":"top"}if(this.isVertical&&(this.diffLabelDetails.placement!=="right"&&this.diffLabelDetails.placement!=="left"&&this.diffLabelDetails.placement!=="auto")){this.diffLabelDetails.placement="left"}else if(!this.isVertical&&(this.diffLabelDetails.placement!=="top"&&this.diffLabelDetails.placement!=="bottom"&&this.diffLabelDetails.placement!=="auto")){this.diffLabelDetails.placement="top"}};t.prototype.checkIfSafari=function(){this.url=ew()};t.prototype.setColors=function(){var t=this;this.colors=this.colors?Uw(this.colors):"";this.rawColors=this.colors||Hw(this.colorPalette,3);this.colorArr=this.rawColors;this.textColors={};this.strokes={};this.rawColors.forEach((function(e){if(!t.accessibility.hideStrokes){var i=QA(e);var r=i.length===2?i[1]:i[0];t.strokes[e.toLowerCase()]=r}t.textColors[e.toLowerCase()]=JA(e,"#ffffff",4.5)}));if(this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){var e=QA(this.hoverStyle.color);var i=e.length===2?e[1]:e[0];this.strokes[this.hoverStyle.color.toLowerCase()]=i}this.textColors[this.hoverStyle.color.toLowerCase()]=JA(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){var e=QA(this.clickStyle.color);var i=e.length===2?e[1]:e[0];this.strokes[this.clickStyle.color.toLowerCase()]=i}this.textColors[this.clickStyle.color.toLowerCase()]=JA(this.clickStyle.color,"#ffffff",4.5)}};t.prototype.setLayoutData=function(){this.padding=typeof this.padding==="string"?Pw(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.setTableData=function(){var t=zw(this,_w,"dumbbell-plot");this.tableData=Ow(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareData=function(){var t=this;var e=hy().key((function(e){return e[t.ordinalAccessor]})).entries(this.data);e.forEach((function(e){e.focusMarker=false;e.greaterIndex=1;var i="marker";var r="marker";if(e.values[0][t.seriesAccessor]===t.focusMarker.key){e.focusMarker=0;i="focusMarker"}else if(e.values[1][t.seriesAccessor]===t.focusMarker.key){e.focusMarker=1;r="focusMarker"}var n=Dw(e.values[0],t.clickHighlight,t.innerInteractionKeys)?parseFloat(t.clickStyle.strokeWidth+"")||t.barStyle.width:Mw(e.values[0],t.hoverHighlight,t.innerInteractionKeys)?parseFloat(t.hoverStyle.strokeWidth+"")||t.barStyle.width:t.barStyle.width;var s=Dw(e.values[1],t.clickHighlight,t.innerInteractionKeys)?parseFloat(t.clickStyle.strokeWidth+"")||t.barStyle.width:Mw(e.values[1],t.hoverHighlight,t.innerInteractionKeys)?parseFloat(t.hoverStyle.strokeWidth+"")||t.barStyle.width:t.barStyle.width;e.values[0].offset=e.focusMarker!==0&&!t.marker.visible?1:t.marker.type==="dot"?t[i].sizeFromBar*(n+1)/2:t.marker.type==="stroke"?t[i].sizeFromBar*(n+1)/5:!e.focusMarker?t[i].sizeFromBar*(n+1)/2:t[i].sizeFromBar*(n+1)/5;e.values[1].offset=e.focusMarker!==1&&!t.marker.visible?-1:t.marker.type==="dot"?-(t[r].sizeFromBar*(s+1))/2:t.marker.type==="stroke"?-(t[r].sizeFromBar*(s+1))/5:e.focusMarker?-(t[r].sizeFromBar*(s+1))/2:-(t[r].sizeFromBar*(s+1))/5;if(e.values[0][t.valueAccessor]>=e.values[1][t.valueAccessor]){e.greaterIndex=0;e.values[0].offset=-e.values[0].offset;e.values[1].offset=-e.values[1].offset}}));var i=function(e){var i={absoluteDiff:"Absolute Difference ",difference:"Difference "};var r=t.differenceLabel&&t.differenceLabel.calculation&&i[t.differenceLabel.calculation]?t.differenceLabel.calculation:"difference";var n=t.differenceLabel&&t.differenceLabel.format&&t.differenceLabel.visible?t.differenceLabel.format:t.differenceLabel&&t.dataLabel.format&&t.dataLabel.visible?t.dataLabel.format:"0[.][0][0]a";return i[r]+Ww(e,r,n)};this.nest=e.sort((function(e,r){e.difference=e.values[0][t.valueAccessor]-e.values[1][t.valueAccessor];r.difference=r.values[0][t.valueAccessor]-r.values[1][t.valueAccessor];e.absoluteDiff=Math.abs(e.difference);r.absoluteDiff=Math.abs(r.difference);e.middle=(e.values[0][t.valueAccessor]+e.values[1][t.valueAccessor])/2;r.middle=(r.values[0][t.valueAccessor]+r.values[1][t.valueAccessor])/2;e.message=i(e);r.message=i(r);var n=e.focusMarker!==false?e.focusMarker:0;return e.values[0][t.ordinalAccessor]instanceof Date?0:t.sortOrder==="asc"||t.sortOrder==="diffAsc"?e.difference-r.difference:t.sortOrder==="desc"||t.sortOrder==="diffDesc"?r.difference-e.difference:t.sortOrder==="focusAsc"?e.values[n][t.valueAccessor]-r.values[n][t.valueAccessor]:t.sortOrder==="focusDesc"?r.values[n][t.valueAccessor]-e.values[n][t.valueAccessor]:t.sortOrder==="absoluteDiffAsc"?e.absoluteDiff-r.absoluteDiff:t.sortOrder==="absoluteDiffDesc"?r.absoluteDiff-e.absoluteDiff:0}))};t.prototype.prepareMarkerData=function(){this.markerData=[];var t={focus:false,label:this.nest[0].values[0][this.seriesAccessor]};var e={focus:false,label:this.nest[0].values[1][this.seriesAccessor]};if(this.nest[0].focusMarker){e.focus=true}else if(this.nest[0].focusMarker===0){t.focus=true}var i=Object.assign(Object.assign({},t),{limitOpacity:true});var r=Object.assign(Object.assign({},e),{limitOpacity:true});var n=Object.assign({},t);var s=Object.assign({},e);this.markerData.push(t);this.markerData.push(e);this.markerData.push(i);this.markerData.push(r);this.markerData.push(n);this.markerData.push(s);var a=0;this.markerData.forEach((function(t){t.index=a;t.referenceIndex=a<2?a:a<4?a-2:a-4;a++}))};t.prototype.prepareSeriesData=function(){var t,e;var i=this.seriesLabelDetails.placement==="auto";var r=this.isVertical?"right":"top";var n=i?true:this.seriesLabelDetails.placement.includes(r);var s=(t={label:this.nest[0].values[0][this.seriesAccessor]},t[this.seriesAccessor]=this.nest[0].values[0][this.seriesAccessor],t.value=n?this.nest[this.nest.length-1].values[0][this.valueAccessor]:this.nest[0].values[0][this.valueAccessor],t);var a=(e={label:this.nest[0].values[1][this.seriesAccessor]},e[this.seriesAccessor]=this.nest[0].values[1][this.seriesAccessor],e.value=n?this.nest[this.nest.length-1].values[1][this.valueAccessor]:this.nest[0].values[1][this.valueAccessor],e);this.seriesData=[s,a]};t.prototype.prepareLegendData=function(){var t,e;var i=(t={label:this.nest[0].values[0][this.seriesAccessor]},t[this.seriesAccessor]=this.nest[0].values[0][this.seriesAccessor],t);var r=(e={label:this.nest[0].values[1][this.seriesAccessor]},e[this.seriesAccessor]=this.nest[0].values[1][this.seriesAccessor],e);this.legendData=[i,r];this.ordinalLabel=this.legendData.map((function(t){return t.label}))};t.prototype.prepareScales=function(){var t=this;var e=_p(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));var i=Lp(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));if(this.isVertical){this.xAccessor=this.ordinalAccessor;this.yAccessor=this.valueAccessor;this.y=vg().domain([this.minValueOverride||this.minValueOverride===0?this.minValueOverride:e-(i-e)*.15,this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:i+(i-e)*.15]).range([this.innerPaddedHeight,0]);if(this.data[0][this.ordinalAccessor]instanceof Date){var r=Lp(this.data,(function(e){return e[t.ordinalAccessor]}));var n=_p(this.data,(function(e){return e[t.ordinalAccessor]}));this.x=Qb().domain([n,r]).range([0,this.innerPaddedWidth]);if(this.xAxis.unit){var s=this.time["time"+this.xAxis.unit];this.x.domain([s.offset(n,-1),s.offset(r,+1)])}}else{this.x=xy().domain(this.nest.map((function(t){return t.key}))).padding(.5).range([0,this.innerPaddedWidth])}}else if(!this.isVertical){this.xAccessor=this.valueAccessor;this.yAccessor=this.ordinalAccessor;this.x=vg().domain([this.minValueOverride||this.minValueOverride===0?this.minValueOverride:e-(i-e)*.15,this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:i+(i-e)*.15]).range([0,this.innerPaddedWidth]);this.y=xy().domain(this.nest.map((function(t){return t.key}))).padding(.5).range([this.innerPaddedHeight,0])}};t.prototype.addStrokeUnder=function(){var t=tw({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.seriesLabelWrapper.selectAll("text").attr("filter",!this.accessibility.hideStrokes?t:null);this.diffLabelWrapper.attr("filter",!this.accessibility.hideStrokes?t:null);this.labels.attr("filter",!this.accessibility.hideStrokes?t:null);this.labels.attr("filter",!this.accessibility.hideStrokes?t:null);this.dumbbellG.attr("filter",!this.accessibility.hideStrokes?t:null)};t.prototype.renderRootElements=function(){this.svg=dp(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.defs=this.rootG.append("defs");this.baselineG=this.rootG.append("g").attr("class","baseline-group");this.gridG=this.rootG.append("g").attr("class","gridline-group");this.dumbbellG=this.rootG.append("g").attr("class","dumbbell-group");this.seriesLabelWrapper=this.rootG.select(".dumbbell-series-wrapper");this.seriesLabelWrapper=this.rootG.append("g").attr("class","dumbbell-series-wrapper");this.diffLabelWrapper=this.rootG.select(".dumbbell-diff-label-wrapper");this.diffLabelWrapper=this.rootG.append("g").attr("class","dumbbell-diff-label-wrapper");this.legendG=dp(this.dumbbellPlotEl).select(".dumbbell-legend").append("svg");this.tooltipG=dp(this.dumbbellPlotEl).select(".dumbbell-tooltip");this.labels=this.rootG.append("g").attr("class","dumbbell-dataLabel-group");this.references=this.rootG.append("g").attr("class","dumbbell-reference-line-group")};t.prototype.renderMarkerGroup=function(){this.markerG=this.defs.select("."+this.marker.type+"markers");if(!this.markerG.node()){this.defs.selectAll("g").remove();this.markerG=this.defs.append("g").attr("class",this.marker.type+"markers")}};t.prototype.setSeriesSelections=function(){var t=this.seriesLabelWrapper.selectAll(".dumbbell-series-label").data(this.seriesData,(function(t){return t.label}));this.enterSeriesLabel=t.enter().append("text");this.exitSeriesLabel=t.exit();this.updateSeriesLabel=t.merge(this.enterSeriesLabel)};t.prototype.setGlobalSelections=function(){var t=this;var e=this.dumbbellG.selectAll(".dumbbell-plot").data(this.nest,(function(t){return t.key}));this.enter=e.enter().append("path");this.exit=e.exit();this.update=e.merge(this.enter);this.exitSize=this.exit.size();this.enterSize=this.enter.size();var i=this.markerG.selectAll("marker").data(this.markerData,(function(t,e){return t.label+e}));this.enterMarkers=i.enter().append("marker");this.exitMarkers=i.exit();this.updateMarkers=i.merge(this.enterMarkers);this.setSeriesSelections();var r=this.diffLabelWrapper.selectAll(".dumbbell-diff-label").data(this.nest,(function(t){return t.key}));this.enterDiffLabel=r.enter().append("text");this.exitDiffLabel=r.exit();this.updateDiffLabel=r.merge(this.enterDiffLabel);var n=this.labels.selectAll("g").data(this.nest,(function(t){return t.key}));this.enterLabels=n.enter().append("g");this.exitLabels=n.exit();this.updateLabels=n.merge(this.enterLabels);var s=this.updateLabels.selectAll(".dumbbell-dataLabel").data((function(t){return[t.values[0],t.values[1]]}),(function(e){return e[t.seriesAccessor]}));this.enterLabelChildren=s.enter().append("text");this.exitLabelChildren=s.exit();this.updateLabelChildren=s.merge(this.enterLabelChildren)};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){dp(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid","chart-container");dp(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid","main-title");dp(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid","sub-title");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.dumbbellG.attr("data-testid","dumbbell-group");this.baselineG.attr("data-testid","baseline-group");this.references.attr("data-testid","reference-line-group");this.updateLabels.attr("data-testid","dataLabel-wrapper");this.updateLabelChildren.attr("data-testid","dataLabel").attr("data-id",(function(e){return"label-"+e[t.ordinalAccessor]+"-"+e[t.seriesAccessor]}));this.updateDiffLabel.attr("data-testid","difference-label").attr("data-id",(function(t){return"difference-label-"+t.key}));this.updateSeriesLabel.attr("data-testid","series-label");this.updateMarkers.attr("data-testid","marker");this.update.attr("data-testid","line").attr("data-id",(function(t){return"line-"+t.key}))}else{dp(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid",null);dp(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid",null);dp(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.dumbbellG.attr("data-testid",null);this.baselineG.attr("data-testid",null);this.references.attr("data-testid",null);this.updateLabels.attr("data-testid",null);this.updateLabelChildren.attr("data-testid",null).attr("data-id",null);this.updateDiffLabel.attr("data-testid",null).attr("data-id",null);this.updateSeriesLabel.attr("data-testid",null);this.updateMarkers.attr("data-testid",null);this.update.attr("data-testid",null).attr("data-id",null)}};t.prototype.reSetRoot=function(){var t=qw({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:im});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=qw({selection:this.root,duration:this.duration,namespace:"root_reset",easing:im});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=qw({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:im});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");Sw(this.chartID,this.width)};t.prototype.drawXAxis=function(){var t=this.innerPaddedWidth/this.nest.length*.7;Tw({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel?t:"",dateFormat:this.xAxis.format,format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration})};t.prototype.drawYAxis=function(){Tw({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,wrapLabel:this.wrapLabel?100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.yAxis.visible,duration:this.duration})};t.prototype.setXAxisAccessibility=function(){vw({rootEle:this.dumbbellPlotEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x?this.x:false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){gw({rootEle:this.dumbbellPlotEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y?this.y:false,yAxisLabel:this.yAxis.label?this.yAxis.label:""})};t.prototype.drawBaselineX=function(){Tw({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,padding:this.padding,markOffset:this.x(0),hide:!this.isVertical?!this.showBaselineY:true,duration:this.duration})};t.prototype.drawBaselineY=function(){Tw({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0),hide:this.isVertical?!this.showBaselineX:true,duration:this.duration})};t.prototype.drawXGrid=function(){Ew(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.xAxis.gridVisible,this.xAxis.tickInterval,this.duration)};t.prototype.drawYGrid=function(){Ew(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)};t.prototype.enterMarkerGeometries=function(){var t=this;this.enterMarkers.attr("orient","auto").attr("markerUnits","userSpaceOnUse").attr("id",(function(e){return t.generateId(e,e.index)})).attr("class","marker-"+this.marker.type).attr("stroke",this.handleMarkerColors);if(this.marker.type==="dot"){this.enterMarkers.append("circle").attr("r",5)}else if(this.marker.type==="stroke"){this.enterMarkers.append("path")}else if(this.marker.type==="arrow"){this.enterMarkers.append("path")}this.updateMarkerSize(this.enterMarkers)};t.prototype.updateMarkerGeometries=function(){var t=this;this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(function(e){return(t.marker.visible||e.focus)&&!e.limitOpacity?1:t.marker.visible||e.focus?t.hoverOpacity:0}))};t.prototype.updateMarkerStyle=function(){this.updateMarkers.attr("stroke",this.handleMarkerColors)};t.prototype.exitMarkerGeometries=function(){this.exitMarkers.transition("exit").duration(this.duration).ease(im).remove()};t.prototype.enterDumbbells=function(){var t=this;this.enter.interrupt();this.enter.attr("class","dumbbell-plot").attr("d",(function(e){var i=t.x(e.values[0][t.xAccessor]);var r=t.y(e.values[0][t.yAccessor]);var n=t.x(e.values[1][t.xAccessor]);var s=t.y(e.values[1][t.yAccessor]);var a=t.isVertical?r>s?.001:-.001:0;var o=!t.isVertical?i>n?.001:-.001:0;return"M "+(i+o)+" "+(r+a)+" L "+i+" "+r+" L "+i+" "+r+" L "+n+" "+s+" L "+n+" "+s+" L "+n+" "+s+" L "+i+" "+r+" L "+i+" "+r+" L "+i+" "+r+" L "+n+" "+s+" L "+n+" "+s+" L "+(n-o)+" "+(s-a)})).attr("cursor",!this.suppressEvents?this.cursor:null).attr("opacity",0).each((function(t,e,i){rw(i[e])})).on("click",!this.suppressEvents?function(e,i,r){if(e.values){var n=r[i];var s=Zf;var a=t.findMarkerIndex(e,n,s);t.onClickHandler(e.values[a])}}:null).on("mouseover",!this.suppressEvents?function(e,i,r){var n=e;if(e.values){var s=r[i];var a=Zf;var o=t.findMarkerIndex(e,s,a);Rw(t.chartID,true);n=e.values[o];t.hoverFunc.emit(n)}t.showTooltip?t.eventsTooltip({data:t.tooltipLabel.labelAccessor&&t.tooltipLabel.labelAccessor.length?n:e,evt:Zf,isToShow:true}):""}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity);this.update.order()};t.prototype.updateBarStyle=function(){this.update.attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity)};t.prototype.updateMarkerSize=function(t){var e=this;var i=t||this.updateMarkers;i.each((function(t,i,r){var n=dp(r[i]);var s=i<2&&e.clickHighlight.length?parseFloat(e.clickStyle.strokeWidth+""):i<4?e.barStyle.width:parseFloat(e.hoverStyle.strokeWidth+"");var a=t.focus?e.focusMarker.sizeFromBar:e.marker.sizeFromBar;var o=e.marker.type==="dot"?1:e.marker.type==="stroke"?2:t.focus&&e.focusMarker.key||!e.focusMarker.key&&t.referenceIndex===0?1:2;var l=a*o*(s+1);var u=l?10/l:0;n.attr("viewBox","0 0 "+(10+u)+" "+(10+u)).attr("refX",5+u/2).attr("refY",5+u/2).attr("stroke-width",u).attr("markerWidth",l).attr("markerHeight",l);if(e.marker.type==="dot"){n.select("circle").attr("cx",5+u/2).attr("cy",5+u/2)}else if(e.marker.type==="stroke"){n.select("path").attr("d","M 4.5 "+(0+u/2)+" L 4.5 "+(10+u/2)+" L 6 "+(10+u/2)+" L 6 "+(0+u/2)+" z")}else if(e.marker.type==="arrow"){n.select("path").attr("transform",t.focus&&e.focusMarker.key&&t.referenceIndex===1?"rotate(180,"+(5+u/2)+","+(5+u/2)+")":null).attr("d",t.focus&&e.focusMarker.key||!e.focusMarker.key&&t.referenceIndex===0?"M "+(0+u/2)+" "+(5+u/4)+" L "+(10+u/2)+" "+(0+u/2)+" L "+(10+u/2)+" "+(10+u/2)+" z":"M 4.5 "+(0+u/2)+" L 4.5 "+(10+u/2)+" L 6 "+(10+u/2)+" L 6 "+(0+u/2)+" z")}}))};t.prototype.drawMarkerGeometries=function(){var t=this;this.updateMarkers.selectAll(".marker-"+this.marker.type).data((function(t){return[t]}));if(this.marker.type==="arrow"){this.updateMarkers.selectAll("path").attr("d",(function(e,i,r){var n=i<2&&t.clickHighlight.length?parseFloat(t.clickStyle.strokeWidth+""):i<4?t.barStyle.width:parseFloat(t.hoverStyle.strokeWidth+"");var s=e.focus?t.focusMarker.sizeFromBar:t.marker.sizeFromBar;var a=t.marker.type==="dot"?1:t.marker.type==="stroke"?2:e.focus&&t.focusMarker.key||!t.focusMarker.key&&e.referenceIndex===0?1:2;var o=s*a*(n+1);var l=o?10/o:0;dp(r[i]).attr("transform",e.focus&&t.focusMarker.key&&e.referenceIndex===1?"rotate(180,"+(5+l/2)+","+(5+l/2)+")":null);return e.focus&&t.focusMarker.key||!t.focusMarker.key&&e.referenceIndex===0?"M "+(0+l/2)+" "+(5+l/4)+" L "+(10+l/2)+" "+(0+l/2)+" L "+(10+l/2)+" "+(10+l/2)+" z":"M 4.5 "+(0+l/2)+" L 4.5 "+(10+l/2)+" L 6 "+(10+l/2)+" L 6 "+(0+l/2)+" z"}))}};t.prototype.updateDumbbells=function(){this.update.interrupt();this.enter.transition("opacity").duration(this.duration).ease(im).attr("opacity",1)};t.prototype.exitDumbbells=function(){var t=this;this.exit.interrupt();this.exit.transition("exit").ease(im).duration(this.duration/2).attr("opacity",0).attr("d",(function(e,i,r){var n=dp(r[i]);var s=+n.attr("data-centerX1");var a=+n.attr("data-centerY1");var o=+n.attr("data-centerX2");var l=+n.attr("data-centerY2");var u=t.isVertical?a>l?.001:-.001:0;var h=!t.isVertical?s>o?.001:-.001:0;return"M "+(s+h)+" "+(a+u)+" L "+s+" "+a+" L "+s+" "+a+" L "+o+" "+l+" L "+o+" "+l+" L "+o+" "+l+" L "+s+" "+a+" L "+s+" "+a+" L "+s+" "+a+" L "+o+" "+l+" L "+o+" "+l+" L "+(o-h)+" "+(l-u)}));this.update.transition("accessibilityAfterExit").duration(this.duration).ease(im).call(Xw,(function(){var e=ww(t.rootG.node());t.exit.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();Aw({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawDumbbells=function(){var t=this;this.update.classed("moving",(function(e,i,r){var n=dp(r[i]);var s=Dw(e.values[0],t.clickHighlight,t.innerInteractionKeys)&&Dw(e.values[1],t.clickHighlight,t.innerInteractionKeys);var a=Mw(e.values[0],t.hoverHighlight,t.innerInteractionKeys)&&Mw(e.values[1],t.hoverHighlight,t.innerInteractionKeys);var o=t.dumbbellInteraction?s?parseFloat(t.clickStyle.strokeWidth+"")||t.barStyle.width:a?parseFloat(t.hoverStyle.strokeWidth+"")||t.barStyle.width:t.barStyle.width:t.barStyle.width;var l=t.x(e.values[0][t.xAccessor]);var u=t.y(e.values[0][t.yAccessor]);var h=t.x(e.values[1][t.xAccessor]);var c=t.y(e.values[1][t.yAccessor]);var d=+n.attr("data-barSize");var f=+n.attr("data-centerX1");var p=+n.attr("data-centerY1");var y=+n.attr("data-centerX2");var v=+n.attr("data-centerY2");return o!==d||l!==f||u!==p||h!==y||c!==v})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-d",this.setBarSize).transition("update").ease(im).duration(this.duration).attr("d",this.setBarSize).call(Xw,(function(){t.update.classed("moving",false);Aw({parentGNode:t.rootG.node()})}))};t.prototype.updateMarkerIds=function(){var t=this;this.updateMarkers.attr("id",(function(e){return t.generateId(e,e.index)}));this.update.attr("marker-start",(function(e){var i=Cw(e.values[0],1,0,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys);var r=Mw(e.values[0],t.hoverHighlight,t.innerInteractionKeys);var n=Dw(e.values[0],t.clickHighlight,t.innerInteractionKeys);var s=r&&!n?t.updateMarkers._groups[0][4].id:n||i?t.updateMarkers._groups[0][0].id:t.updateMarkers._groups[0][2].id;return t.url+s+")"})).attr("marker-end",(function(e){var i=Cw(e.values[1],1,0,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys);var r=Mw(e.values[1],t.hoverHighlight,t.innerInteractionKeys);var n=Dw(e.values[1],t.clickHighlight,t.innerInteractionKeys);var s=r&&!n?t.updateMarkers._groups[0][5].id:n||i?t.updateMarkers._groups[0][1].id:t.updateMarkers._groups[0][3].id;return t.url+s+")"}))};t.prototype.updateInteractionState=function(){var t=this;this.update.interrupt("opacity");this.updateLabelChildren.interrupt("opacity");this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(function(e){return(t.marker.visible||e.focus)&&!e.limitOpacity?1:t.marker.visible||e.focus?t.hoverOpacity:0}));this.update.attr("opacity",1).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity).each((function(e,i,r){var n=dp(r[i]);if(!n.classed("moving")){n.attr("d",t.setBarSize)}}));Aw({parentGNode:this.rootG.node()});Nw({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.enterSeriesLabels=function(){var t=this;this.enterSeriesLabel.interrupt();var e=this.seriesLabelDetails.placement==="auto";var i=this.isVertical?"right":"top";var r=e?true:this.seriesLabelDetails.placement.includes(i);this.enterSeriesLabel.attr("opacity",0).attr("class","dumbbell-series-label").attr("fill",this.handleSeriesLabelColors).attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onHoverHandler(e,false)}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?function(){return t.onMouseOutHandler()}:null).attr("text-anchor",this.isVertical&&r?"start":this.isVertical?"end":"middle").attr("x",(function(e){return t.isVertical&&r?t.innerPaddedWidth:!t.isVertical?t.x(e.value):0})).attr("y",(function(e){return t.isVertical?t.y(e.value):!t.isVertical&&!r?t.innerPaddedHeight:0})).attr("dx",this.isVertical&&r?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")};t.prototype.updateSeriesLabels=function(){var t=this;this.updateSeriesLabel.interrupt();this.updateSeriesLabel.transition("opacity_series_labels").ease(im).duration(this.duration).attr("opacity",(function(e){var i=!t.seriesLabelDetails.visible?0:1;if(!t.seriesInteraction){return i}else{return Cw(e,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.exitSeriesLabels=function(){this.exitSeriesLabel.transition("exit_series_labels").ease(im).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawSeriesLabels=function(){var t=this;var e=this.seriesLabelDetails.placement==="auto";var i=this.isVertical?"right":"top";var r=e?true:this.seriesLabelDetails.placement.includes(i);var n=!e&&this.seriesLabelDetails.collisionHideOnly;var s=this.updateSeriesLabel.text((function(e,i){return t.seriesLabelDetails.label?t.seriesLabelDetails.label[i]:e.label})).style("visibility",(function(i,r,n){return e||t.seriesLabelDetails.collisionHideOnly?dp(n[r]).style("visibility"):null})).attr("fill",this.handleSeriesLabelColors).attr("data-x",(function(e){return t.isVertical&&r?t.innerPaddedWidth:!t.isVertical?t.x(e.value):0})).attr("data-y",(function(e,i,n){var s=n[i];var a=getComputedStyle(s);var o=parseFloat(a.fontSize);var l=Math.max(o-1,1);return t.isVertical?t.y(e.value)+.3*l:!t.isVertical&&!r?t.innerPaddedHeight:0})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",n).attr("data-use-dy",n).attr("data-text-anchor",this.isVertical&&r?"start":this.isVertical?"end":"middle").attr("dx",this.isVertical&&r?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em").transition("update_series_labels").ease(im).duration(this.duration);if(this.seriesLabelDetails.visible&&(this.seriesLabelDetails.placement==="auto"||this.seriesLabelDetails.collisionHideOnly)){this.bitmaps=Zw({bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:[this.seriesAccessor],size:[jw(this.width,0),jw(this.height,0)],hideOnly:this.seriesLabelDetails.visible&&this.seriesLabelDetails.collisionHideOnly&&this.seriesLabelDetails.placement!=="auto"});if(n){s.attr("text-anchor",this.isVertical&&r?"start":this.isVertical?"end":"middle").attr("x",(function(e){return t.isVertical&&r?t.innerPaddedWidth:!t.isVertical?t.x(e.value):0})).attr("y",(function(e){return t.isVertical?t.y(e.value):!t.isVertical&&!r?t.innerPaddedHeight:0})).attr("dx",this.isVertical&&r?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}}else{s.attr("text-anchor",this.isVertical&&r?"start":this.isVertical?"end":"middle").attr("x",(function(e){return t.isVertical&&r?t.innerPaddedWidth:!t.isVertical?t.x(e.value):0})).attr("y",(function(e){return t.isVertical?t.y(e.value):!t.isVertical&&!r?t.innerPaddedHeight:0})).attr("dx",this.isVertical&&r?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}};t.prototype.setSeriesLabelOpacity=function(){var t=this;this.updateSeriesLabel.interrupt("opacity_series_labels");this.updateSeriesLabel.attr("opacity",(function(e){var i=!t.seriesLabelDetails.visible?0:1;if(!t.seriesInteraction){return i}else{return Cw(e,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.enterDifferenceLabels=function(){var t=this;this.enterDiffLabel.interrupt();var e=this.isVertical?"left":"top";var i=this.diffLabelDetails.placement.includes(e);this.enterDiffLabel.attr("class","dumbbell-diff-label").attr("opacity",0).attr("fill",this.setDiffLabelColor).attr("cursor",!this.suppressEvents&&this.dumbbellInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(){return t.onMouseOutHandler()}:null).attr("x",(function(e){return t.isVertical?t.x(e.values[0][t.ordinalAccessor]):t.x(e.middle)})).attr("y",(function(e){return!t.isVertical&&i?t.y(e.key)-t.barStyle.width/2-4:!t.isVertical?t.y(e.key)+t.barStyle.width/2+4:t.y(e.middle)})).attr("dx",this.isVertical&&i?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&i?"0":!this.isVertical?"0.6em":"0.3em")};t.prototype.updateDifferenceLabels=function(){var t=this;this.updateDiffLabel.interrupt();this.updateDiffLabel.transition("opacity_diff_labels").ease(im).duration(this.duration).attr("opacity",(function(e){var i=t.differenceLabel.visible?1:0;if(!t.dumbbellInteraction){return i}else{return Cw(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.exitDifferenceLabels=function(){this.exitDiffLabel.transition("exit_diff_label").ease(im).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawDifferenceLabels=function(){var t=this;var e=this.diffLabelDetails.placement==="auto";var i=this.isVertical?"left":"top";var r=e?true:this.diffLabelDetails.placement.includes(i);var n=!e&&this.differenceLabel.collisionHideOnly;var s=this.updateDiffLabel.text((function(e){return Ww(e,t.differenceLabel.calculation,t.differenceLabel.format)})).style("visibility",(function(i,r,n){return e||t.differenceLabel.collisionHideOnly?dp(n[r]).style("visibility"):null})).attr("data-x",(function(e){return t.isVertical?t.x(e.values[0][t.ordinalAccessor]):t.x(e.middle)})).attr("data-y",(function(e){return!t.isVertical&&r?t.y(e.key)-t.barStyle.width/2-4:!t.isVertical?t.y(e.key)+t.barStyle.width/2+4:t.y(e.middle)})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",n).attr("data-use-dy",n).attr("dx",this.isVertical&&r?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&r?"0":!this.isVertical?"0.6em":"0.3em").attr("text-anchor",(function(i,n,s){return e&&dp(s[n]).attr("text-anchor")?dp(s[n]).attr("text-anchor"):t.isVertical&&r?"end":t.isVertical?"start":"middle"})).transition("update_diff_label").ease(im).duration(this.duration);if(this.differenceLabel.visible&&(this.diffLabelDetails.placement==="auto"||this.differenceLabel.collisionHideOnly)){var a=n?["middle"]:this.isVertical?["left","right"]:["top","bottom"];var o=n?[this.barStyle.width/2+4]:[this.barStyle.width/2+4,this.barStyle.width/2+4];this.bitmaps=Zw({bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[this.update],validPositions:a,offsets:o,accessors:["key"],size:[jw(this.width,0),jw(this.height,0)],hideOnly:this.differenceLabel.visible&&this.differenceLabel.collisionHideOnly&&this.diffLabelDetails.placement!=="auto"});if(n){s.attr("x",(function(e){return t.isVertical?t.x(e.values[0][t.ordinalAccessor]):t.x(e.middle)})).attr("y",(function(e){return!t.isVertical&&r?t.y(e.key)-t.barStyle.width/2-4:!t.isVertical?t.y(e.key)+t.barStyle.width/2+4:t.y(e.middle)})).attr("dx",this.isVertical&&r?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&r?"0":!this.isVertical?"0.6em":"0.3em").attr("text-anchor",this.isVertical&&r?"end":this.isVertical?"start":"middle")}}else{s.attr("x",(function(e){return t.isVertical?t.x(e.values[0][t.ordinalAccessor]):t.x(e.middle)})).attr("y",(function(e){return!t.isVertical&&r?t.y(e.key)-t.barStyle.width/2-4:!t.isVertical?t.y(e.key)+t.barStyle.width/2+4:t.y(e.middle)})).attr("dx",this.isVertical&&r?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&r?"0":!this.isVertical?"0.6em":"0.3em").attr("text-anchor",this.isVertical&&r?"end":this.isVertical?"start":"middle")}};t.prototype.enterDataLabels=function(){var t=this;this.enterLabels.interrupt();this.enterLabels.attr("class","dumbbell-label-wrapper").attr("opacity",0).attr("fill",this.handleLabelColors);this.enterLabelChildren.attr("class","dumbbell-dataLabel").attr("opacity",0).attr("fill",this.handleLabelColors).attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null).on("click",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?function(){return t.onMouseOutHandler()}:null);Yw({root:this.enterLabelChildren,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData})};t.prototype.setDifferenceLabelOpacity=function(){var t=this;this.updateDiffLabel.interrupt("opacity_diff_labels");this.updateDiffLabel.attr("opacity",(function(e){var i=t.differenceLabel.visible?1:0;if(!t.dumbbellInteraction){return i}else{return Cw(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.updateDataLabels=function(){var t=this;this.updateLabelChildren.classed("transitioning",true);this.updateLabels.transition("opacity").ease(im).duration(this.duration).attr("opacity",(function(){var e=!t.dataLabel.visible?0:1;return e})).call(Xw,(function(){t.updateLabelChildren.classed("transitioning",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabels.interrupt();this.exitLabels.selectAll(".dumbbell-dataLabel").transition("exit").ease(im).duration(this.duration/2).attr("opacity",0).call(Xw,(function(){t.exitLabels.remove()}));this.exitLabelChildren.transition("exit_dataLabel").ease(im).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawDataLabels=function(t){var e=this;var i=this.placement==="auto";var r=this.placement!=="auto"&&this.dataLabel.collisionHideOnly;this.updateLabelChildren.text((function(t){return Ww(t,e.innerLabelAccessor,e.dataLabel.format)}));var n=this.updateLabelChildren.attr("fill",this.handleLabelColors).style("visibility",(function(t,r,n){return i||e.dataLabel.collisionHideOnly?dp(n[r]).style("visibility"):null})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",r).attr("data-use-dy",r).attr("dx",(function(t){return e.isVertical?"0.0em":t.offset>=0?"-0.1em":"0.1em"})).attr("dy",(function(t){return e.isVertical&&t.offset>=0?"0.9em":e.isVertical?"-0.3em":"0.0em"})).attr("data-y",(function(t,i,r){var n=r[i];var s=getComputedStyle(n);var a=parseFloat(s.fontSize);var o=Math.max(a-1,1);var l=$w(n.textContent,a,true,s.fontFamily);var u=e.layoutOverride!=="horizontal"?0:t.offset>=0?-l/2:l/2;var h=e.layoutOverride!=="vertical"?-o/2:t.offset>=0?o/2:-o+-o/2;dp(n).attr("data-x",(function(t){return(e.isVertical?e.x(t[e.ordinalAccessor]):e.x(t[e.valueAccessor])-t.offset)+u}));return e.isVertical?e.y(t[e.valueAccessor])+t.offset+h:e.y(t[e.ordinalAccessor])+h})).attr("data-offset",(function(t){return t.offset})).transition("update_dataLabel").ease(im).duration((function(i,r,n){var s=Mw(i,e.hoverHighlight,e.innerInteractionKeys);var a=Dw(i,e.clickHighlight,e.innerInteractionKeys);if((s||a)&&t&&!dp(n[r]).classed("transitioning")){return 0}return e.duration}));this.bitmaps=Yw({root:n,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.placement==="auto",labelSelection:n,avoidMarks:[this.update],validPositions:["middle"],offsets:[1],accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[jw(this.width,0),jw(this.height,0)],boundsScope:"centroid",hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})};t.prototype.updateDiffLabelColor=function(){this.updateDiffLabel.attr("fill",this.setDiffLabelColor)};t.prototype.setLabelOpacity=function(){var t=this;this.updateLabels.attr("opacity",this.dataLabel.visible?1:0);this.updateLabelChildren.attr("opacity",(function(e){return Cw(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}))};t.prototype.updateMarkerOpacity=function(){var t=this;this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(function(e){return(t.marker.visible||e.focus)&&!e.limitOpacity?1:t.marker.visible||e.focus?t.hoverOpacity:0}))};t.prototype.drawReferenceLines=function(){var t=this;var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class",".dumbbell-reference").attr("opacity",1);var r=i.append("line");r.attr("class","dumbbell-reference-line").attr("data-testid",this.unitTest?"reference-line":null).attr("opacity",0);var n=i.append("text");n.attr("class","dumbbell-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".dumbbell-reference-line").data((function(t){return[t]})).transition("merge").ease(im).duration(this.duration);var o=s.selectAll(".dumbbell-reference-line-label").data((function(t){return[t]})).transition("merge").ease(im).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(im).duration(this.duration).attr("opacity",0).remove();i.attr("transform",(function(e){var i=!t.isVertical?"x":"y";return"translate(0,"+t[i](e.value)+")"}));s.transition("merge").ease(im).duration(this.duration).attr("transform",(function(e){var i=!t.isVertical?"x":"y";return"translate(0,"+t[i](e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.style("stroke",Fw[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",Fw[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=Cw(e.values[0],1,0,{},t.clickHighlight,t.innerInteractionKeys);var s=Cw(e.values[1],1,0,{},t.clickHighlight,t.innerInteractionKeys);var a=n||s;a=t.clickHighlight&&t.clickHighlight.length?a:false;var o=t.accessibility.elementsAreInterface;xw(r[i],a,o);return a}))};t.prototype.drawAnnotations=function(){Lw({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.layoutOverride!=="horizontal"?this.ordinalAccessor:this.valueAccessor,yScale:this.y,yAccessor:this.layoutOverride!=="horizontal"?this.valueAccessor:this.ordinalAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})};t.prototype.setAnnotationAccessibility=function(){mw(this.dumbbellPlotEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=Kw(this.highestHeadingLevel);this.bottomLevel=Kw(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){iw({rootEle:this.dumbbellPlotEl,title:this.accessibility.title||this.mainTitle,chartTag:"dumbbell-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){var t=zw(this,_w,"dumbbell-plot");delete t[this.ordinalAccessor];aw({node:this.svg.node(),chartTag:"dumbbell-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:["message"],nested:"values",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){rw(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=zw(this,_w,"dumbbell-plot");delete e[this.ordinalAccessor];this.update.each((function(i,r,n){nw({node:n[r],geomType:"dumbbell",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupKeys:["message"],nested:["values"],uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});sw({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityAttributes=function(){rw(this.dumbbellG.node())};t.prototype.setGroupAccessibilityID=function(){var t=this;this.dumbbellG.each((function(e,i,r){sw({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){lw(this.dumbbellPlotEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){uw(this.dumbbellPlotEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){hw(this.dumbbellPlotEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){cw(this.dumbbellPlotEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){dw(this.dumbbellPlotEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){fw(this.dumbbellPlotEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){pw(this.dumbbellPlotEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){yw({rootEle:this.dumbbellPlotEl,parentGNode:this.dumbbellG.node(),chartTag:"dumbbell-plot",geomType:"dumbbell"})};t.prototype.setChartAccessibilityStructureNotes=function(){bw(this.dumbbellPlotEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t,e){Rw(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&e){this.eventsTooltip({data:t,evt:Zf,isToShow:true})}};t.prototype.onMouseOutHandler=function(){Rw(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){Vw(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;kw({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,diffLabelDetails:this.diffLabelDetails,chartType:"dumbbell"})};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);this.updateDiffLabel.attr("cursor",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?this.cursor:null);this.updateLabelChildren.attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null)};t.prototype.drawLegendElements=function(){Iw({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:!this.accessibility.hideStrokes?this.rawColors:null,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,label:this.legend.labels||this.ordinalLabel,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.bindLegendInteractivity=function(){var t=this;dp(this.dumbbellPlotEl).selectAll(".legend").on("click",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?function(e){return t.onHoverHandler(e,false)}:null).on("mouseout",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.setLegendCursor=function(){dp(this.dumbbellPlotEl).selectAll(".legend").style("cursor",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?this.cursor:null)};t.prototype.setSeriesCursor=function(){this.updateSeriesLabel.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null)};t.prototype.bindSeriesInteractivity=function(){var t=this;this.updateSeriesLabel.on("click",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onHoverHandler(e,false)}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?function(){return t.onMouseOutHandler()}:null)};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e,i,r){if(e.values){var n=r[i];var s=Zf;var a=t.findMarkerIndex(e,n,s);t.onClickHandler(e.values[a])}}:null).on("mouseover",!this.suppressEvents?function(e,i,r){var n=e;if(e.values){var s=r[i];var a=Zf;var o=t.findMarkerIndex(e,s,a);Rw(t.chartID,true);n=e.values[o];t.hoverFunc.emit(n)}t.showTooltip?t.eventsTooltip({data:t.tooltipLabel.labelAccessor&&t.tooltipLabel.labelAccessor.length?n:e,evt:Zf,isToShow:true}):""}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateLabelChildren.on("click",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?function(){return t.onMouseOutHandler()}:null);this.updateDiffLabel.on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(){return t.onMouseOutHandler()}:null)};t.prototype.findMarkerIndex=function(t,e,i){var r=this.isVertical?this.findPosition(e,i)[1]:this.findPosition(e,i)[0];var n=this.isVertical?"Y":"X";var s=+dp(e).attr("data-center"+n+"1");var a=+dp(e).attr("data-center"+n+"2");var o=(a-s)/2+s;var l=t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]?0:1;return r<=o?0+l:1-l};t.prototype.findPosition=function(t,e){var i=t.ownerSVGElement||t;var r=i.createSVGPoint();r.x=e.clientX;r.y=e.clientY;r=r.matrixTransform(t.getScreenCTM().inverse());return[r.x,r.y]};t.prototype.generateId=function(t,e){var i=this.marker.type==="dot"?1:this.marker.type==="stroke"?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&t.referenceIndex===0?1:2;i=t.focus?this.focusMarker.sizeFromBar*i:this.marker.sizeFromBar*i;var r=this.marker.visible||t.focus?1:0;var n=this.rawColors[t.referenceIndex][0]==="#"?this.rawColors[t.referenceIndex].substring(1):this.rawColors[t.referenceIndex];var s=(e<2&&this.clickHighlight.length?this.clickStyle.strokeWidth:e<4?this.barStyle.width:this.hoverStyle.strokeWidth).toString();s=""+s;s=s.replace(/\D/g,"n");var a="marker-"+this.chartID+e+this.marker.type+i+n+s+r;return a};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldValidateLayout){this.validateLayout()}if(this.shouldValidateDataLabelPlacement){this.validateDataLabelPlacement();this.shouldValidateDataLabelPlacement=false}if(this.shouldValidateSeriesLabelPlacement){this.validateSeriesLabelPlacement();this.shouldValidateSeriesLabelPlacement=false}if(this.shouldValidateDiffLabelPlacement){this.validateDiffLabelPlacement();this.shouldValidateDiffLabelPlacement=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldUpdateLayout){this.setLayoutData();this.shouldUpdateLayout=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateMarkerData){this.prepareMarkerData();this.shouldUpdateMarkerData=false}if(this.shouldUpdateSeriesData){this.prepareSeriesData();this.shouldUpdateSeriesData=false}if(this.shouldUpdateLegendData){this.prepareLegendData();this.shouldUpdateLegendData=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldCheckValueAxis){if(this.layout==="horizontal"){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true}else if(this.layout==="vertical"||this.layoutOverride){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true}this.shouldCheckValueAxis=false}if(this.shouldCheckLabelAxis){if(this.layout==="vertical"||this.layoutOverride){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true}else if(this.layout==="horizontal"){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true}this.shouldCheckLabelAxis=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"dumbbell-main-title vcl-main-title","data-testid":"main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions dumbbell-sub-title vcl-sub-title","data-testid":"sub-title"},this.subTitle),r("div",{class:"dumbbell-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"dumbbell",chartTag:"dumbbell-plot",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-dumbbell-container"}),r("div",{class:"dumbbell-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))};t.prototype.init=function(){var t=Object.keys(tm);var e=0;var i={wrapLabel:{exception:false},strokeWidth:{exception:0},showDots:{exception:false},dotRadius:{exception:0},hoverOpacity:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:false}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:tm[t[e]]}};Object.defineProperty(t.prototype,"dumbbellPlotEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],seriesAccessor:["seriesAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],layout:["layoutWatcher"],showBaselineX:["showBaselineXWatcher"],showBaselineY:["showBaselineYWatcher"],colorPalette:["paletteWatcher"],colors:["paletteWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],hoverOpacity:["hoverOpacityWatcher"],cursor:["cursorWatcher"],focusMarker:["focusMarkerWatcher"],marker:["markerWatcher"],barStyle:["barStyleWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],differenceLabel:["differenceLabelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],referenceStyle:["referenceWatcher"],referenceLines:["referenceWatcher"],suppressEvents:["suppressWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],interactionKeys:["interactionWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}dumbbell-plot{cursor:default}dumbbell-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}dumbbell-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}dumbbell-plot .hidden{display:none}dumbbell-plot .axis{font-size:12px}dumbbell-plot .axis text{fill:#767676}dumbbell-plot .axis-label{text-anchor:middle;font:1rem sans-serif}dumbbell-plot .axis path{stroke:#767676}dumbbell-plot .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}dumbbell-plot .grid path{stroke-width:0;stroke:#767676}dumbbell-plot .dumbbell-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}dumbbell-plot .dumbbell-group__inactive{opacity:0}dumbbell-plot .dumbbell-group .dot{stroke:#ffffff}dumbbell-plot .dumbbell-group .dumbbell-series-label{font-size:1em}dumbbell-plot .dumbbell-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .dumbbell-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .annotations{pointer-events:none}dumbbell-plot .annotations .handle{pointer-events:all}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=Gw();var Jw=undefined&&undefined.__rest||function(t,e){var i={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0)i[r]=t[r];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++){if(e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n]))i[r[n]]=t[r[n]]}return i};var tx=s.getLicenses;var ex=t("group_charts",function(){function t(t){e(this,t);this.chartContent=[];this.selectionMode="multiple";this.onElementUpdate=new Function;this.filterAccessor="label";this.defaultClickElement=[];this.data=[];this.hoverElement="";this.clickElement=[]}t.prototype.componentWillLoad=function(){};t.prototype.componentWillUpdate=function(){if(!this.clickElement){this.clickElement=this.defaultClickElement}this.renderCharts()};t.prototype.onClick=function(t){this.handleClickElement(t)};t.prototype.handleClickElement=function(t){console.log("handleClickElement",t);if(this.selectionMode==="single"){this.clickElement.includes(t)?this.clickElement="":this.clickElement=[t]}else if(this.selectionMode==="multiple"){if(!this.clickElement.includes(t)){this.clickElement.push(t)}else{for(var e=this.clickElement.length-1;e>=0;e--){if(this.clickElement[e]===t){this.clickElement.splice(e,1)}}}}else{this.clickElement=[]}this.onElementUpdate(this.clickElement)};t.prototype.onHover=function(t){this.hoverElement=t};t.prototype.onMouseOut=function(){this.hoverElement=""};t.prototype.drawChart=function(t){var e=this;var i=Jw(t,["chartType","width"]);var n={onClickFunc:function(t){return e.onClick(t)},onHoverFunc:function(t){return e.onHover(t)},onMouseOutFunc:function(){return e.onMouseOut()},clickHighlight:this.clickElement,hoverHighlight:this.hoverElement};switch(t.chartType){case"bar-chart":return r("div",{class:"col--lg-"+t.width},r("bar-chart",Object.assign({width:t.width*100},n,i)));case"pie-chart":return r("div",{class:"col--lg-"+t.width},r("pie-chart",Object.assign({width:t.width*100},n,i)));case"scatter-plot":return r("div",{class:"col--lg-"+t.width},r("scatter-plot",Object.assign({width:t.width*100},n,i)));case"circle-packing":return r("div",{class:"col--lg-"+t.width},r("circle-packing",Object.assign({width:t.width*100},n,i)));case"clustered-force-layout":return r("div",{class:"col--lg-"+t.width},r("clustered-force-layout",Object.assign({width:t.width*100},n,i)));case"line-chart":return r("div",{class:"col--lg-"+t.width},r("line-chart",Object.assign({width:t.width*100},n,i)));case"world-map":return r("div",{class:"col--lg-"+t.width},r("world-map",Object.assign({width:t.width*100},n,i)));case"space":return r("div",{class:"col--lg-"+t.width});default:return}};t.prototype.renderCharts=function(){var t=this;return this.chartContent.map((function(e){return t.drawChart(e)}))};t.prototype.render=function(){return r("div",{class:"row"},this.renderCharts())};Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=tx();var ix="http://www.w3.org/1999/xhtml";var rx={svg:"http://www.w3.org/2000/svg",xhtml:ix,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nx(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return rx.hasOwnProperty(e)?{space:rx[e],local:t}:t}function sx(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===ix&&e.documentElement.namespaceURI===ix?e.createElement(t):e.createElementNS(i,t)}}function ax(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ox(t){var e=nx(t);return(e.local?ax:sx)(e)}function lx(){}function ux(t){return t==null?lx:function(){return this.querySelector(t)}}function hx(t){if(typeof t!=="function")t=ux(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new zS(r,this._parents)}function cx(){return[]}function dx(t){return t==null?cx:function(){return this.querySelectorAll(t)}}function fx(t){if(typeof t!=="function")t=dx(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new zS(r,n)}function px(t){return function(){return this.matches(t)}}function yx(t){if(typeof t!=="function")t=px(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new zS(r,this._parents)}function vx(t){return new Array(t.length)}function gx(){return new zS(this._enter||this._groups.map(vx),this._parents)}function bx(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}bx.prototype={constructor:bx,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function mx(t){return function(){return t}}var Ax="$";function wx(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new bx(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function xx(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=Ax+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=Ax+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new bx(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function Sx(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?xx:wx,r=this._parents,n=this._groups;if(typeof t!=="function")t=mx(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new zS(a,r);a._enter=o;a._exit=l;return a}function kx(){return new zS(this._exit||this._groups.map(vx),this._parents)}function Lx(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function _x(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new zS(a,this._parents)}function Cx(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function Dx(t){if(!t)t=Mx;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new zS(n,this._parents).order()}function Mx(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ux(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function Tx(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function Ex(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function Ix(){var t=0;this.each((function(){++t}));return t}function Nx(){return!this.node()}function Wx(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function Hx(t){return function(){this.removeAttribute(t)}}function Gx(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Px(t,e){return function(){this.setAttribute(t,e)}}function Ox(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Vx(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function Rx(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function Yx(t,e){var i=nx(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?Gx:Hx:typeof e==="function"?i.local?Rx:Vx:i.local?Ox:Px)(i,e))}function zx(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Fx(t){return function(){this.style.removeProperty(t)}}function Xx(t,e,i){return function(){this.style.setProperty(t,e,i)}}function Bx(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function Kx(t,e,i){return arguments.length>1?this.each((e==null?Fx:typeof e==="function"?Bx:Xx)(t,e,i==null?"":i)):qx(this.node(),t)}function qx(t,e){return t.style.getPropertyValue(e)||zx(t).getComputedStyle(t,null).getPropertyValue(e)}function jx(t){return function(){delete this[t]}}function $x(t,e){return function(){this[t]=e}}function Zx(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function Qx(t,e){return arguments.length>1?this.each((e==null?jx:typeof e==="function"?Zx:$x)(t,e)):this.node()[t]}function Jx(t){return t.trim().split(/^|\s+/)}function tS(t){return t.classList||new eS(t)}function eS(t){this._node=t;this._names=Jx(t.getAttribute("class")||"")}eS.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function iS(t,e){var i=tS(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function rS(t,e){var i=tS(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function nS(t){return function(){iS(this,t)}}function sS(t){return function(){rS(this,t)}}function aS(t,e){return function(){(e.apply(this,arguments)?iS:rS)(this,t)}}function oS(t,e){var i=Jx(t+"");if(arguments.length<2){var r=tS(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?aS:e?nS:sS)(i,e))}function lS(){this.textContent=""}function uS(t){return function(){this.textContent=t}}function hS(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function cS(t){return arguments.length?this.each(t==null?lS:(typeof t==="function"?hS:uS)(t)):this.node().textContent}function dS(){this.innerHTML=""}function fS(t){return function(){this.innerHTML=t}}function pS(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function yS(t){return arguments.length?this.each(t==null?dS:(typeof t==="function"?pS:fS)(t)):this.node().innerHTML}function vS(){if(this.nextSibling)this.parentNode.appendChild(this)}function gS(){return this.each(vS)}function bS(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mS(){return this.each(bS)}function AS(t){var e=typeof t==="function"?t:ox(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function wS(){return null}function xS(t,e){var i=typeof t==="function"?t:ox(t),r=e==null?wS:typeof e==="function"?e:ux(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function SS(){var t=this.parentNode;if(t)t.removeChild(this)}function kS(){return this.each(SS)}function LS(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _S(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function CS(t){return this.select(t?_S:LS)}function DS(t){return arguments.length?this.property("__data__",t):this.node().__data__}var MS={};var US=null;if(typeof document!=="undefined"){var TS=document.documentElement;if(!("onmouseenter"in TS)){MS={mouseenter:"mouseover",mouseleave:"mouseout"}}}function ES(t,e,i){t=IS(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function IS(t,e,i){return function(r){var n=US;US=r;try{t.call(this,this.__data__,e,i)}finally{US=n}}}function NS(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function WS(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function HS(t,e,i){var r=MS.hasOwnProperty(t.type)?ES:IS;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function GS(t,e,i){var r=NS(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?HS:WS;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function PS(t,e,i){var r=zx(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function OS(t,e){return function(){return PS(this,t,e)}}function VS(t,e){return function(){return PS(this,t,e.apply(this,arguments))}}function RS(t,e){return this.each((typeof e==="function"?VS:OS)(t,e))}var YS=[null];function zS(t,e){this._groups=t;this._parents=e}function FS(){return new zS([[document.documentElement]],YS)}zS.prototype=FS.prototype={constructor:zS,select:hx,selectAll:fx,filter:yx,data:Sx,enter:gx,exit:kx,join:Lx,merge:_x,order:Cx,sort:Dx,call:Ux,nodes:Tx,node:Ex,size:Ix,empty:Nx,each:Wx,attr:Yx,style:Kx,property:Qx,classed:oS,text:cS,html:yS,raise:gS,lower:mS,append:AS,insert:xS,remove:kS,clone:CS,datum:DS,on:GS,dispatch:RS};function XS(t){return typeof t==="string"?new zS([[document.querySelector(t)]],[document.documentElement]):new zS([[t]],YS)}function BS(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function KS(t){if(t.length===1)t=qS(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function qS(t){return function(e,i){return BS(t(e),i)}}var jS=KS(BS);var $S=jS.right;function ZS(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var QS=Math.sqrt(50),JS=Math.sqrt(10),tk=Math.sqrt(2);function ek(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=ik(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function ik(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=QS?10:s>=JS?5:s>=tk?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=QS?10:s>=JS?5:s>=tk?2:1)}function rk(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=QS)n*=10;else if(s>=JS)n*=5;else if(s>=tk)n*=2;return e<t?-n:n}function nk(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function sk(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function ak(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var ok="$";function lk(){}lk.prototype=uk.prototype={constructor:lk,has:function(t){return ok+t in this},get:function(t){return this[ok+t]},set:function(t,e){this[ok+t]=e;return this},remove:function(t){var e=ok+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===ok)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===ok)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===ok)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===ok)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===ok)++t;return t},empty:function(){for(var t in this)if(t[0]===ok)return false;return true},each:function(t){for(var e in this)if(e[0]===ok)t(this[e],e.slice(1),this)}};function uk(t,e){var i=new lk;if(t instanceof lk)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function hk(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=uk(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,ck,dk)},map:function(t){return s(t,0,fk,pk)},entries:function(t){return a(s(t,0,fk,pk),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function ck(){return{}}function dk(t,e,i){t[e]=i}function fk(){return uk()}function pk(t,e,i){t.set(e,i)}var yk=Array.prototype;var vk=yk.slice;var gk={name:"implicit"};function bk(){var t=uk(),e=[],i=[],r=gk;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==gk)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=uk();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=vk.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return bk(e,i).unknown(r)};ak.apply(n,arguments);return n}function mk(){var t=bk().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=ZS(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return mk(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return ak.apply(h(),arguments)}function Ak(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function wk(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function xk(){}var Sk=.7;var kk=1/Sk;var Lk="\\s*([+-]?\\d+)\\s*",_k="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ck="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dk=/^#([0-9a-f]{3,8})$/,Mk=new RegExp("^rgb\\("+[Lk,Lk,Lk]+"\\)$"),Uk=new RegExp("^rgb\\("+[Ck,Ck,Ck]+"\\)$"),Tk=new RegExp("^rgba\\("+[Lk,Lk,Lk,_k]+"\\)$"),Ek=new RegExp("^rgba\\("+[Ck,Ck,Ck,_k]+"\\)$"),Ik=new RegExp("^hsl\\("+[_k,Ck,Ck]+"\\)$"),Nk=new RegExp("^hsla\\("+[_k,Ck,Ck,_k]+"\\)$");var Wk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ak(xk,Ok,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Hk,formatHex:Hk,formatHsl:Gk,formatRgb:Pk,toString:Pk});function Hk(){return this.rgb().formatHex()}function Gk(){return jk(this).formatHsl()}function Pk(){return this.rgb().formatRgb()}function Ok(t){var e,i;t=(t+"").trim().toLowerCase();return(e=Dk.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Vk(e):i===3?new Fk(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?Rk(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?Rk(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Mk.exec(t))?new Fk(e[1],e[2],e[3],1):(e=Uk.exec(t))?new Fk(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Tk.exec(t))?Rk(e[1],e[2],e[3],e[4]):(e=Ek.exec(t))?Rk(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ik.exec(t))?qk(e[1],e[2]/100,e[3]/100,1):(e=Nk.exec(t))?qk(e[1],e[2]/100,e[3]/100,e[4]):Wk.hasOwnProperty(t)?Vk(Wk[t]):t==="transparent"?new Fk(NaN,NaN,NaN,0):null}function Vk(t){return new Fk(t>>16&255,t>>8&255,t&255,1)}function Rk(t,e,i,r){if(r<=0)t=e=i=NaN;return new Fk(t,e,i,r)}function Yk(t){if(!(t instanceof xk))t=Ok(t);if(!t)return new Fk;t=t.rgb();return new Fk(t.r,t.g,t.b,t.opacity)}function zk(t,e,i,r){return arguments.length===1?Yk(t):new Fk(t,e,i,r==null?1:r)}function Fk(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}Ak(Fk,zk,wk(xk,{brighter:function(t){t=t==null?kk:Math.pow(kk,t);return new Fk(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?Sk:Math.pow(Sk,t);return new Fk(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:Xk,formatHex:Xk,formatRgb:Bk,toString:Bk}));function Xk(){return"#"+Kk(this.r)+Kk(this.g)+Kk(this.b)}function Bk(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Kk(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function qk(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new Zk(t,e,i,r)}function jk(t){if(t instanceof Zk)return new Zk(t.h,t.s,t.l,t.opacity);if(!(t instanceof xk))t=Ok(t);if(!t)return new Zk;if(t instanceof Zk)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new Zk(a,o,l,t.opacity)}function $k(t,e,i,r){return arguments.length===1?jk(t):new Zk(t,e,i,r==null?1:r)}function Zk(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}Ak(Zk,$k,wk(xk,{brighter:function(t){t=t==null?kk:Math.pow(kk,t);return new Zk(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?Sk:Math.pow(Sk,t);return new Zk(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new Fk(Qk(t>=240?t-240:t+120,n,r),Qk(t,n,r),Qk(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Qk(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function Jk(t){return function(){return t}}function tL(t,e){return function(i){return t+i*e}}function eL(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function iL(t){return(t=+t)===1?rL:function(e,i){return i-e?eL(e,i,t):Jk(isNaN(e)?i:e)}}function rL(t,e){var i=e-t;return i?tL(t,i):Jk(isNaN(t)?e:t)}var nL=function t(e){var i=iL(e);function r(t,e){var r=i((t=zk(t)).r,(e=zk(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=rL(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function sL(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}var aL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oL=new RegExp(aL.source,"g");function lL(t){return function(){return t}}function uL(t){return function(e){return t(e)+""}}function hL(t,e){var i=aL.lastIndex=oL.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=aL.exec(t))&&(n=oL.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:sL(r,n)})}i=oL.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?uL(l[0].x):lL(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}var cL=180/Math.PI;var dL={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fL(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*cL,skewX:Math.atan(l)*cL,scaleX:a,scaleY:o}}var pL,yL,vL,gL;function bL(t){if(t==="none")return dL;if(!pL)pL=document.createElement("DIV"),yL=document.documentElement,vL=document.defaultView;pL.style.transform=t;t=vL.getComputedStyle(yL.appendChild(pL),null).getPropertyValue("transform");yL.removeChild(pL);t=t.slice(7,-1).split(",");return fL(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function mL(t){if(t==null)return dL;if(!gL)gL=document.createElementNS("http://www.w3.org/2000/svg","g");gL.setAttribute("transform",t);if(!(t=gL.transform.baseVal.consolidate()))return dL;t=t.matrix;return fL(t.a,t.b,t.c,t.d,t.e,t.f)}function AL(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:sL(t,n)},{i:l-2,x:sL(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:sL(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:sL(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:sL(t,i)},{i:o-2,x:sL(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var wL=AL(bL,"px, ","px)","deg)");var xL=AL(mL,", ",")",")");function SL(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function kL(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function LL(t){return t=kL(Math.abs(t)),t?t[1]:NaN}function _L(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function CL(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var DL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ML(t){if(!(e=DL.exec(t)))throw new Error("invalid format: "+t);var e;return new UL({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ML.prototype=UL.prototype;function UL(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}UL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function TL(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var EL;function IL(t,e){var i=kL(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(EL=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+kL(t,Math.max(0,e+s-1))[0]}function NL(t,e){var i=kL(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var WL={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:SL,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return NL(t*100,e)},r:NL,s:IL,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function HL(t){return t}var GL=Array.prototype.map,PL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function OL(t){var e=t.grouping===undefined||t.thousands===undefined?HL:_L(GL.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?HL:CL(GL.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=ML(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!WL[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=WL[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=TL(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?PL[8+EL/3]:"")+r+(k&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=ML(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(LL(e)/3)))*3,n=Math.pow(10,-r),s=PL[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var VL;var RL;var YL;zL({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function zL(t){VL=OL(t);RL=VL.format;YL=VL.formatPrefix;return VL}function FL(t){return Math.max(0,-LL(Math.abs(t)))}function XL(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(LL(e)/3)))*3-LL(Math.abs(t)))}function BL(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,LL(e)-LL(t))+1}function KL(t,e,i,r){var n=rk(t,e,i),s;r=ML(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=XL(n,a)))r.precision=s;return YL(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=BL(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=FL(n)))r.precision=s-(r.type==="%")*2;break}}return RL(r)}function qL(t){var e=t.domain;t.ticks=function(t){var i=e();return ek(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return KL(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=ik(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=ik(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=ik(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function jL(){var t=0,e=1,i=1,r=[.5],n=[0,1],s;function a(t){return t<=t?n[$S(r,t,0,i)]:s}function o(){var n=-1;r=new Array(i);while(++n<i)r[n]=((n+1)*e-(n-i)*t)/(i+1);return a}a.domain=function(i){return arguments.length?(t=+i[0],e=+i[1],o()):[t,e]};a.range=function(t){return arguments.length?(i=(n=vk.call(t)).length-1,o()):n.slice()};a.invertExtent=function(s){var a=n.indexOf(s);return a<0?[NaN,NaN]:a<1?[t,r[0]]:a>=i?[r[i-1],e]:[r[a-1],r[a]]};a.unknown=function(t){return arguments.length?(s=t,a):a};a.thresholds=function(){return r.slice()};a.copy=function(){return jL().domain([t,e]).range(n).unknown(s)};return ak.apply(qL(a),arguments)}function $L(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function ZL(t){return 1-Math.sqrt(1-t*t)}var QL=s.propDefaultValues;var JL=function(){function t(){}return t}();JL.mainTitle="Heat Map Title";JL.subTitle="This is the heat map's subtitle";JL.height=250;JL.width=500;JL.margin={top:250*.01,bottom:250*.01,right:500*.01,left:500*.01};JL.padding={top:20,bottom:30,right:60,left:80};JL.xAccessor="date";JL.yAccessor="category";JL.valueAccessor="value";JL.shape="rect";JL.hideAxisPath=QL.showBaselineFalse;JL.accessibility=QL.accessibility;JL.animationConfig=QL.animationConfig;JL.highestHeadingLevel=QL.highestHeadingLevel;JL.xAxis=QL.xAxis;JL.yAxis=QL.yAxis;JL.wrapLabel=QL.wrapLabel;JL.strokeWidth=QL.strokeWidth2;JL.colorPalette=QL.colorPaletteSequential;JL.colorSteps=QL.colorSteps5;JL.hoverStyle=QL.hoverStyle;JL.clickStyle=QL.clickStyle;JL.cursor=QL.cursor;JL.hoverOpacity=QL.hoverOpacity;JL.dataLabel=QL.dataLabel;JL.legend=QL.legend;JL.tooltipLabel=QL.tooltipLabel;JL.showTooltip=QL.showTooltip;JL.suppressEvents=QL.suppressEvents;JL.referenceLines=QL.referenceLines;JL.annotations=QL.annotations;JL.clickHighlight=QL.clickHighlight;var t_={value:function(){}};function e_(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new i_(i)}function i_(t){this._=t}function r_(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}i_.prototype=e_.prototype={constructor:i_,on:function(t,e){var i=this._,r=r_(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=n_(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=s_(i[n],t.name,e);else if(e==null)for(n in i)i[n]=s_(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new i_(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function n_(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function s_(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=t_,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var a_=0,o_=0,l_=0,u_=1e3,h_,c_,d_=0,f_=0,p_=0,y_=typeof performance==="object"&&performance.now?performance:Date,v_=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function g_(){return f_||(v_(b_),f_=y_.now()+p_)}function b_(){f_=0}function m_(){this._call=this._time=this._next=null}m_.prototype=A_.prototype={constructor:m_,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?g_():+i)+(e==null?0:+e);if(!this._next&&c_!==this){if(c_)c_._next=this;else h_=this;c_=this}this._call=t;this._time=i;L_()},stop:function(){if(this._call){this._call=null;this._time=Infinity;L_()}}};function A_(t,e,i){var r=new m_;r.restart(t,e,i);return r}function w_(){g_();++a_;var t=h_,e;while(t){if((e=f_-t._time)>=0)t._call.call(null,e);t=t._next}--a_}function x_(){f_=(d_=y_.now())+p_;a_=o_=0;try{w_()}finally{a_=0;k_();f_=0}}function S_(){var t=y_.now(),e=t-d_;if(e>u_)p_-=e,d_=t}function k_(){var t,e=h_,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:h_=i}}c_=t;L_(r)}function L_(t){if(a_)return;if(o_)o_=clearTimeout(o_);var e=t-f_;if(e>24){if(t<Infinity)o_=setTimeout(x_,t-y_.now()-p_);if(l_)l_=clearInterval(l_)}else{if(!l_)d_=y_.now(),l_=setInterval(S_,u_);a_=1,v_(x_)}}function __(t,e,i){var r=new m_;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var C_=e_("start","end","interrupt");var D_=[];var M_=0;var U_=1;var T_=2;var E_=3;var I_=4;var N_=5;var W_=6;function H_(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;V_(t,i,{name:e,index:r,group:n,on:C_,tween:D_,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:M_})}function G_(t,e){var i=O_(t,e);if(i.state>M_)throw new Error("too late; already scheduled");return i}function P_(t,e){var i=O_(t,e);if(i.state>T_)throw new Error("too late; already started");return i}function O_(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function V_(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=A_(s,0,i.time);function s(t){i.state=U_;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==U_)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===E_)return __(a);if(d.state===I_){d.state=W_;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=W_;d.timer.stop();delete r[u]}}__((function(){if(i.state===E_){i.state=I_;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=T_;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==T_)return;i.state=E_;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=N_,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===N_){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=W_;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function R_(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>T_&&r.state<N_;r.state=W_;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function Y_(t){return this.each((function(){R_(this,t)}))}function z_(t,e){var i,r;return function(){var n=P_(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function F_(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=P_(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function X_(t,e){var i=this._id;t+="";if(arguments.length<2){var r=O_(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?z_:F_)(i,t,e))}function B_(t,e,i){var r=t._id;t.each((function(){var t=P_(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return O_(t,r).value[e]}}function K_(t,e){var i;return(typeof e==="number"?sL:e instanceof Ok?nL:(i=Ok(e))?(e=i,nL):hL)(t,e)}function q_(t){return function(){this.removeAttribute(t)}}function j_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $_(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function Z_(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function Q_(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function J_(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function tC(t,e){var i=nx(t),r=i==="transform"?xL:K_;return this.attrTween(t,typeof e==="function"?(i.local?J_:Q_)(i,r,B_(this,"attr."+t,e)):e==null?(i.local?j_:q_)(i):(i.local?Z_:$_)(i,r,e+""))}function eC(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function iC(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function rC(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=nx(t);return this.tween(i,(r.local?eC:iC)(r,e))}function nC(t,e){return function(){G_(this,t).delay=+e.apply(this,arguments)}}function sC(t,e){return e=+e,function(){G_(this,t).delay=e}}function aC(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?nC:sC)(e,t)):O_(this.node(),e).delay}function oC(t,e){return function(){P_(this,t).duration=+e.apply(this,arguments)}}function lC(t,e){return e=+e,function(){P_(this,t).duration=e}}function uC(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?oC:lC)(e,t)):O_(this.node(),e).duration}function hC(t,e){if(typeof e!=="function")throw new Error;return function(){P_(this,t).ease=e}}function cC(t){var e=this._id;return arguments.length?this.each(hC(e,t)):O_(this.node(),e).ease}function dC(t){if(typeof t!=="function")t=px(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new WC(r,this._parents,this._name,this._id)}function fC(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new WC(a,this._parents,this._name,this._id)}function pC(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function yC(t,e,i){var r,n,s=pC(e)?G_:P_;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function vC(t,e){var i=this._id;return arguments.length<2?O_(this.node(),i).on.on(t):this.each(yC(i,t,e))}function gC(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function bC(){return this.on("end.remove",gC(this._id))}function mC(t){var e=this._name,i=this._id;if(typeof t!=="function")t=ux(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;H_(u[d],e,i,d,u,O_(h,i))}}}return new WC(s,this._parents,e,i)}function AC(t){var e=this._name,i=this._id;if(typeof t!=="function")t=dx(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=O_(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){H_(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new WC(s,a,e,i)}var wC=FS.prototype.constructor;function xC(){return new wC(this._groups,this._parents)}function SC(t,e){var i,r,n;return function(){var s=qx(this,t),a=(this.style.removeProperty(t),qx(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function kC(t){return function(){this.style.removeProperty(t)}}function LC(t,e,i){var r,n;return function(){var s=qx(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function _C(t,e,i){var r,n,s;return function(){var a=qx(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),qx(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function CC(t,e,i){var r=(t+="")==="transform"?wL:K_;return e==null?this.styleTween(t,SC(t,r)).on("end.style."+t,kC(t)):this.styleTween(t,typeof e==="function"?_C(t,r,B_(this,"style."+t,e)):LC(t,r,e+""),i)}function DC(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function MC(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,DC(t,e,i==null?"":i))}function UC(t){return function(){this.textContent=t}}function TC(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function EC(t){return this.tween("text",typeof t==="function"?TC(B_(this,"text",t)):UC(t==null?"":t+""))}function IC(){var t=this._name,e=this._id,i=GC();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=O_(l,e);H_(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new WC(r,this._parents,t,i)}var NC=0;function WC(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function HC(t){return FS().transition(t)}function GC(){return++NC}var PC=FS.prototype;WC.prototype=HC.prototype={constructor:WC,select:mC,selectAll:AC,filter:dC,merge:fC,selection:xC,transition:IC,call:PC.call,nodes:PC.nodes,node:PC.node,size:PC.size,empty:PC.empty,each:PC.each,on:vC,attr:tC,attrTween:rC,style:CC,styleTween:MC,text:EC,remove:bC,tween:X_,delay:aC,duration:uC,ease:cC};var OC={time:null,delay:0,duration:250,ease:$L};function VC(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return OC.time=g_(),OC}}return i}function RC(t){var e,i;if(t instanceof WC){e=t._id,t=t._name}else{e=GC(),(i=OC).time=g_(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){H_(l,t,e,u,a,i||VC(l,e))}}}return new WC(r,this._parents,t,e)}FS.prototype.interrupt=Y_;FS.prototype.transition=RC;var YC=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var zC=new Uint8Array(16);function FC(){if(!YC){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return YC(zC)}var XC=[];for(var BC=0;BC<256;++BC){XC[BC]=(BC+256).toString(16).substr(1)}function KC(t,e){var i=e||0;var r=XC;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function qC(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||FC)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||KC(n)}var jC=s.calculateLuminance,$C=s.prepareStrokeColorsFromScheme,ZC=s.verifyTextHasSpace,QC=s.checkAttributeTransitions,JC=s.createTextStrokeFilter,tD=s.drawHoverStrokes,eD=s.removeHoverStrokes,iD=s.buildStrokes,rD=s.convertColorsToTextures,nD=s.findTagLevel,sD=s.prepareRenderChange,aD=s.initializeDescriptionRoot,oD=s.initializeElementAccess,lD=s.setElementFocusHandler,uD=s.setElementAccessID,hD=s.setAccessibilityController,cD=s.hideNonessentialGroups,dD=s.setAccessTitle,fD=s.setAccessSubtitle,pD=s.setAccessLongDescription,yD=s.setAccessExecutiveSummary,vD=s.setAccessPurpose,gD=s.setAccessContext,bD=s.setAccessStatistics,mD=s.setAccessChartCounts,AD=s.setAccessXAxis,wD=s.setAccessYAxis,xD=s.setAccessStructure,SD=s.setAccessAnnotation,kD=s.retainAccessFocus,LD=s.checkAccessFocus,_D=s.setElementInteractionAccessState,CD=s.setAccessibilityDescriptionWidth,DD=s.autoTextColor,MD=s.annotate,UD=s.chartAccessors,TD=s.checkInteraction,ED=s.checkClicked,ID=s.checkHovered,ND=s.convertVisaColor,WD=s.drawAxis,HD=s.drawLegend,GD=s.drawTooltip,PD=s.formatStats,OD=s.formatDate,VD=s.getColors,RD=s.getLicenses,YD=s.getPadding,zD=s.getScopedData,FD=s.initTooltipStyle,XD=s.overrideTitleTooltip,BD=s.placeDataLabels,KD=s.scopeDataKeys,qD=s.transitionEndAll,jD=s.validateAccessibilityProps;var $D=t("heat_map",function(){function t(t){var r=this;e(this,t);this.mainTitle=JL.mainTitle;this.subTitle=JL.subTitle;this.height=JL.height;this.width=JL.width;this.highestHeadingLevel=JL.highestHeadingLevel;this.margin=JL.margin;this.padding=JL.padding;this.xAccessor=JL.xAccessor;this.yAccessor=JL.yAccessor;this.valueAccessor=JL.valueAccessor;this.xAxis=JL.xAxis;this.yAxis=JL.yAxis;this.wrapLabel=JL.wrapLabel;this.hideAxisPath=JL.hideAxisPath;this.colorPalette=JL.colorPalette;this.colorSteps=JL.colorSteps;this.hoverStyle=JL.hoverStyle;this.clickStyle=JL.clickStyle;this.cursor=JL.cursor;this.shape=JL.shape;this.hoverOpacity=JL.hoverOpacity;this.animationConfig=JL.animationConfig;this.strokeWidth=JL.strokeWidth;this.dataLabel=JL.dataLabel;this.showTooltip=JL.showTooltip;this.tooltipLabel=JL.tooltipLabel;this.accessibility=JL.accessibility;this.legend=JL.legend;this.annotations=JL.annotations;this.clickHighlight=JL.clickHighlight;this.suppressEvents=JL.suppressEvents;this.shouldValidateAccessibility=true;this.nest=[];this.datakeys=[];this.updated=true;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateTableData=false;this.shouldUpdateScales=false;this.shouldResetRoot=false;this.shouldSetColors=false;this.shouldValidateInteractionKeys=false;this.shouldFormatClickHighlight=false;this.shouldFormatHoverHighlight=false;this.shouldUpdateAnnotations=false;this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldSetGlobalSelections=false;this.shouldEnterUpdateExit=false;this.shouldUpdateGeometries=false;this.shouldSetSelectionClass=false;this.shouldDrawInteractionState=false;this.shouldUpdateLegend=false;this.shouldUpdateCursor=false;this.shouldBindInteractivity=false;this.shouldUpdateLabels=false;this.shouldSetLabelOpacity=false;this.shouldSwapXAxis=false;this.shouldSwapYAxis=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetTextures=false;this.shouldSetStrokes=false;this.strokes={};this.topLevel="h2";this.bottomLevel="p";this.textTreatmentHandler=function(t,e,i){var n=!r.accessibility.hideTextures&&r.accessibility.showExperimentalTextures?r.fillColors(t.valueAccessor):r.rawHeat(t.valueAccessor);var s=DD(n);var a=XS(i[e]);a.attr("filter",!a.classed("textIsMoving")?JC({root:r.svg.node(),id:r.chartID,color:n}):null);return s};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldSetGlobalSelections=true;this.shouldUpdateScales=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetXAxisAccessibility=true;this.shouldSetYAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true;this.shouldSetLabelOpacity=true};t.prototype.idWatcher=function(t,e){this.chartID=t;this.heatMapEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldSetTextures=true;this.shouldDrawInteractionState=true;this.shouldSetStrokes=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.layoutWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetLabelOpacity=true};t.prototype.xAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetXAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true;this.shouldSetLabelOpacity=true};t.prototype.yAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetYAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true;this.shouldSetLabelOpacity=true};t.prototype.groupAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldSetGeometryAriaLabels=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.xKeyOrderWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldDrawInteractionState=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetXAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.yKeyOrderWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldDrawInteractionState=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetYAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.xAxisWatcher=function(t,e){var i=t&&t.format?t.format:false;var r=e&&e.format?e.format:false;var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(i!==r){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true}if(n!==s){this.shouldSwapXAxis=true}this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true};t.prototype.yAxisWatcher=function(t,e){var i=t&&t.format?t.format:false;var r=e&&e.format?e.format:false;var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(i!==r){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true}if(n!==s){this.shouldSwapYAxis=true}this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true};t.prototype.wrapLabelWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.hideAxisPathWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true;this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.shapeWatcher=function(t,e){this.shouldUpdateGeometries=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true};t.prototype.strokeWidthWatcher=function(t,e){this.shouldUpdateGeometries=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldUpdateGeometries=true;this.shouldSetStrokes=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldSetLabelOpacity=true;this.shouldDrawInteractionState=true};t.prototype.labelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetLabelOpacity=true}};t.prototype.showTooltipWatcher=function(t,e){};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideTextures?t.hideTextures:false;var w=e&&e.hideTextures?e.hideTextures:false;var x=t&&t.showExperimentalTextures?t.showExperimentalTextures:false;var S=e&&e.showExperimentalTextures?e.showExperimentalTextures:false;if(A!==w||x!==S){this.shouldSetTextures=true;this.shouldUpdateLegend=true;this.shouldSetStrokes=true;this.shouldDrawInteractionState=true}var k=t&&t.showSmallLabels?t.showSmallLabels:false;var L=e&&e.showSmallLabels?e.showSmallLabels:false;if(k!==L){this.shouldSetLabelOpacity=true}var _=t&&t.hideStrokes?t.hideStrokes:false;var C=e&&e.hideStrokes?e.hideStrokes:false;if(_!==C){this.shouldUpdateLegend=true;this.shouldSetStrokes=true;this.shouldDrawInteractionState=true}var D=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var M=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var U=t&&t.elementsAreInterface?t.elementsAreInterface:false;var T=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(D!==M||U!==T){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(U!==T){this.shouldSetSelectionClass=true}};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetTextures=true};t.prototype.clickWatcher=function(t,e){this.shouldFormatClickHighlight=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true};t.prototype.hoverWatcher=function(t,e){this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"heat-map-"+qC();t.heatMapEl.id=t.chartID;t.setTagLevels();t.prepareData();t.setDimensions();t.setColors();t.prepareScales();t.validateInteractionKeys();t.setTableData();t.shouldValidateAccessibilityProps();t.formatClickHighlight();t.formatHoverHighlight();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTextures();t.setStrokes();t.setGlobalSelections();t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.drawGeometries();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawDataLabels();t.drawLegendElements();t.setSelectedClass();t.updateInteractionState();t.bindInteractivity();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();cD(t.root.node(),t.map.node());t.setGroupAccessibilityID();t.onChangeHandler();t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldSetTextures){t.setTextures();t.shouldSetTextures=false}if(t.shouldSetStrokes){t.setStrokes();t.shouldSetStrokes=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldEnterUpdateExit){t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateGeometries){t.drawGeometries();t.shouldUpdateGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldSwapXAxis){t.drawXAxis(true);t.shouldSwapXAxis=false}if(t.shouldSwapYAxis){t.drawYAxis(true);t.shouldSwapYAxis=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;jD(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.formatClickHighlight=function(){var t=this;if(this.clickHighlight){this.clickHighlight.map((function(e){if(!e["xAccessor"]||!e["yAccessor"]){e["xAccessor"]=e[t.xAccessor]instanceof Date?OD({date:e[t.xAccessor],format:t.xAxis.format,offsetTimezone:true}):e[t.xAccessor];e["yAccessor"]=e[t.yAccessor]instanceof Date?OD({date:e[t.yAccessor],format:t.yAxis.format,offsetTimezone:true}):e[t.yAccessor]}}))}};t.prototype.formatHoverHighlight=function(){if(this.hoverHighlight){if(!this.hoverHighlight["xAccessor"]||!this.hoverHighlight["yAccessor"]){this.hoverHighlight["xAccessor"]=this.hoverHighlight[this.xAccessor]instanceof Date?OD({date:this.hoverHighlight[this.xAccessor],format:this.xAxis.format,offsetTimezone:true}):this.hoverHighlight[this.xAccessor];this.hoverHighlight["yAccessor"]=this.hoverHighlight[this.yAccessor]instanceof Date?OD({date:this.hoverHighlight[this.yAccessor],format:this.yAxis.format,offsetTimezone:true}):this.hoverHighlight[this.yAccessor]}}};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?YD(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.validateInteractionKeys=function(){var t=this;if(this.interactionKeys&&this.interactionKeys.length){if(this.interactionKeys.includes(this.xAccessor)||this.interactionKeys.includes(this.yAccessor)){var e=[];this.interactionKeys.map((function(i){var r=i===t.xAccessor?"xAccessor":i===t.yAccessor?"yAccessor":i;e.push(r)}));this.innerInteractionKeys=e}}else{this.innerInteractionKeys=["xAccessor","yAccessor"]}};t.prototype.prepareScales=function(){var t=this;var e=(this.minValueOverride||this.minValueOverride===0)&&this.minValueOverride<sk(this.preppedData,(function(t){return t.valueAccessor}))?this.minValueOverride:sk(this.preppedData,(function(t){return t.valueAccessor}));var i=(this.maxValueOverride||this.maxValueOverride===0)&&this.maxValueOverride>nk(this.preppedData,(function(t){return t.valueAccessor}))?this.maxValueOverride:nk(this.preppedData,(function(t){return t.valueAccessor}));this.x=mk().domain(this.xKeyOrder?this.xKeyOrder:this.preppedData.map((function(t){return t.xAccessor}))).range([0,this.innerPaddedWidth]);this.x.padding(this.strokeWidth?this.strokeWidth/this.x.bandwidth():0);this.y=mk().domain(this.yKeyOrder?this.yKeyOrder:this.preppedData.map((function(t){return t.yAccessor}))).range([0,this.innerPaddedHeight]);this.y.padding(this.strokeWidth?this.strokeWidth/this.y.bandwidth():0);this.heat=jL().domain([e,i]);var r=[];var n=[];var s=0;var a=Math.ceil(this.preparedColors.length/2);var o=this.colorPalette&&this.colorPalette.includes("diverging");var l=this.colorPalette&&this.colorPalette.includes("dark");this.preparedColors.forEach((function(e){var i=$C(e,s,t.preparedColors,o?"diverging":"sequential");if(o){var u=jC(i.fillColor);var h=jC(i.textureColor);var c=u>h?i.textureColor:i.fillColor;var d=u<h?i.textureColor:i.fillColor;if(t.preparedColors.length%2&&s===(t.preparedColors.length-1)/2){n.push(l?c:d);r.push(l?d:c)}else{r.push(l?c:d);n.push(l?d:c)}}else{if(s+1<a){n.push(t.preparedColors[0]);r.push(t.preparedColors[t.preparedColors.length-1])}else{r.push(t.preparedColors[0]);n.push(t.preparedColors[t.preparedColors.length-1])}}s++}));this.fillColors=jL().domain([e,i]).range(n);this.strokeColors=jL().domain([e,i]).range(r);this.rawHeat=jL().domain([e,i]).range(this.preparedColors);this.updateCheck=true};t.prototype.setColors=function(){this.preparedColors=this.colors?ND(this.colors):VD(this.colorPalette,this.colorSteps)};t.prototype.setTextures=function(){var t=this.colorPalette&&this.colorPalette.includes("diverging")?"diverging":"sequential";var e=t==="diverging"?11:9;if(this.accessibility.hideTextures||this.colorSteps>e||!this.accessibility.showExperimentalTextures){this.colorArr=this.preparedColors}else{var i=rD({colors:this.preparedColors,rootSVG:this.svg.node(),id:this.chartID,scheme:t,disableTransitions:!this.duration});this.colorArr=i}this.heat.range(this.colorArr)};t.prototype.setStrokes=function(){var t=Object.assign(Object.assign({},this.clickStyle),{color:undefined});var e=Object.assign(Object.assign({},this.hoverStyle),{color:undefined});this.strokes=iD({root:this.svg.node(),id:this.chartID,colors:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors.range():this.preparedColors,clickStyle:t,hoverStyle:e,strokeOverride:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.strokeColors.range():undefined})};t.prototype.setTableData=function(){var t=KD(this,UD,"heat-map");this.tableData=zD(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareData=function(){var t=this;if(this.updateCheck){this.interpolating=this.preppedData;var e=this.x.domain();var i=this.x.range();var r=this.y.domain();var n=this.y.range();this.interpolating.x=mk().domain(e).range(i);this.interpolating.y=mk().domain(r).range(n)}this.preppedData=this.data.map((function(e){var i=Object.assign({},e);i["valueAccessor"]=parseFloat(e[t.valueAccessor]);i["xAccessor"]=e[t.xAccessor]instanceof Date?OD({date:e[t.xAccessor],format:t.xAxis.format,offsetTimezone:true}):e[t.xAccessor];i["yAccessor"]=e[t.yAccessor]instanceof Date?OD({date:e[t.yAccessor],format:t.yAxis.format,offsetTimezone:true}):e[t.yAccessor];return i}));this.nest=hk().key((function(e){return e[t.yAccessor]})).entries(this.preppedData);this.datakeys=this.nest.map((function(t){return t.key}))};t.prototype.reSetRoot=function(){var t=sD({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:ZL});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=sD({selection:this.root,duration:this.duration,namespace:"root_reset",easing:ZL});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=sD({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:ZL});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");CD(this.chartID,this.width)};t.prototype.drawXAxis=function(t){WD({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,top:this.xAxis.placement==="top",wrapLabel:this.wrapLabel?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:t||!this.xAxis.visible,duration:this.duration,hidePath:this.hideAxisPath})};t.prototype.drawYAxis=function(t){WD({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:this.yAxis.placement!=="right",right:this.yAxis.placement==="right",format:this.yAxis.format,wrapLabel:this.wrapLabel?this.padding.left||100:"",tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:t||!this.yAxis.visible,duration:this.duration,hidePath:this.hideAxisPath})};t.prototype.setXAxisAccessibility=function(){AD({rootEle:this.heatMapEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x||false,xAxisLabel:this.xAxis?this.xAxis.label||"":""})};t.prototype.setYAxisAccessibility=function(){wD({rootEle:this.heatMapEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y||false,yAxisLabel:this.yAxis?this.yAxis.label||"":""})};t.prototype.renderRootElements=function(){this.svg=XS(this.heatMapEl).select(".visa-viz-d3-heat-map-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.map=this.rootG.append("g").attr("class","map-group");this.labelG=this.rootG.append("g").attr("class","heat-map-dataLabel-group");this.legendG=XS(this.heatMapEl).select(".heat-map-legend").append("svg");this.tooltipG=XS(this.heatMapEl).select(".heat-map-tooltip")};t.prototype.setGlobalSelections=function(){this.xAxisElement=this.rootG.selectAll(".bottom");var t=this.map.selectAll(".row").data(this.nest,(function(t){return t.key}));this.enterRowWrappers=t.enter().append("g");this.exitRowWrappers=t.exit();this.updateRowWrappers=t.merge(this.enterRowWrappers);var e=this.updateRowWrappers.selectAll(".grid").data((function(t){return t.values}),(function(t){return t.xAccessor+t.yAccessor}));this.enter=e.enter().append("rect");this.exit=e.exit();this.update=e.merge(this.enter);this.exitSize=this.exit.size();this.enterSize=this.enter.size();this.exitSize+=this.exitRowWrappers.selectAll(".grid").size();var i=this.labelG.selectAll("g").data(this.nest,(function(t){return t.key}));this.enteringLabelGroups=i.enter().append("g");this.exitingLabelGroups=i.exit();this.updatingLabelGroups=i.merge(this.enteringLabelGroups);var r=this.updatingLabelGroups.selectAll("text").data((function(t){return t.values}),(function(t){return t.xAccessor+t.yAccessor}));this.enterLabels=r.enter().append("text");this.exitLabels=r.exit();this.updateLabels=r.merge(this.enterLabels)};t.prototype.enterGeometries=function(){var t=this;this.enter.interrupt();this.enterRowWrappers.attr("class","row").classed("entering",true).attr("cursor",!this.suppressEvents?this.cursor:null).each((function(t,e,i){oD(i[e])}));this.enter.attr("class","grid").each((function(t,e,i){oD(i[e])})).on("click",!this.suppressEvents?function(e){t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("opacity",0).attr("y",(function(e){if(t.interpolating&&t.interpolating.y(e.yAccessor)===undefined){var i=t.y(e.yAccessor);i=i+t.y.bandwidth()*(i/t.y(t.y.domain()[0]));return i}else if(t.interpolating){return t.interpolating.y(e.yAccessor)}return t.y(e.yAccessor)})).attr("height",(function(e){if(t.interpolating&&t.interpolating.y(e.yAccessor)===undefined){return 0}else if(t.interpolating){return t.interpolating.y.bandwidth()}return t.y.bandwidth()})).attr("x",(function(e){if(t.interpolating&&t.interpolating.x(e.xAccessor)===undefined){var i=t.x(e.xAccessor);i=i+t.x.bandwidth()*(i/t.x(t.x.domain()[t.x.domain().length-1]));return i}else if(t.interpolating){return t.interpolating.x(e.xAccessor)}return t.x(e.xAccessor)})).attr("width",(function(e){if(t.interpolating&&t.interpolating.x(e.xAccessor)===undefined){return 0}else if(t.interpolating){return t.interpolating.x.bandwidth()}return t.x.bandwidth()})).attr("rx",this.shape==="circle"?this.x.bandwidth():0).attr("ry",this.shape==="circle"?this.y.bandwidth():0);this.update.order();this.enterRowWrappers.order()};t.prototype.updateGeometries=function(){var t=this;this.update.interrupt();this.update.transition("opacity").duration((function(e,i,r){if(XS(r[i]).classed("entering")){XS(r[i]).classed("entering",false);return t.duration}return 0})).ease(ZL).attr("opacity",(function(e){return TD(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))};t.prototype.exitGeometries=function(){var t=this;this.exit.interrupt();this.exit.transition("exit").duration(this.duration).ease(ZL).attr("opacity",0).attr("y",(function(e,i,r){if(t.y(e.yAccessor)===undefined){var n=XS(r[i]);var s=+n.attr("y");s=s+ +n.attr("height")*(s/t.y(t.y.domain()[0]));return s}return t.y(e.yAccessor)})).attr("height",(function(e){if(t.y(e.yAccessor)===undefined){return 0}return t.y.bandwidth()})).attr("x",(function(e,i,r){if(t.x(e.xAccessor)===undefined){var n=XS(r[i]);var s=+n.attr("x");s=s+ +n.attr("width")*(s/t.x(t.x.domain()[t.x.domain().length-1]));return s}return t.x(e.xAccessor)})).attr("width",(function(e){if(t.x(e.xAccessor)===undefined){return 0}return t.x.bandwidth()}));this.exitRowWrappers.selectAll(".grid").transition("exit").duration(this.duration).ease(ZL).attr("opacity",0).attr("y",(function(e,i,r){var n=XS(r[i]);var s=+n.attr("y");s=s+ +n.attr("height")*(s/t.y(t.y.domain()[0]));return s})).attr("height",0).attr("x",(function(e,i,r){if(t.x(e.xAccessor)===undefined){var n=XS(r[i]);var s=+n.attr("x");s=s+ +n.attr("width")*(s/t.x(t.x.domain()[t.x.domain().length-1]));return s}return t.x(e.xAccessor)})).attr("width",(function(e){if(t.x(e.xAccessor)===undefined){return 0}return t.x.bandwidth()}));this.update.transition("accessibilityAfterExit").duration(this.duration).ease(ZL).call(qD,(function(){var e=LD(t.rootG.node());t.exit.remove();t.exitRowWrappers.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();kD({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawGeometries=function(){var t=this;this.updateRowWrappers.transition("update").duration(this.duration).ease(ZL).call(qD,(function(){t.updateRowWrappers.classed("entering",false)}));var e=this.update.classed("geometryIsMoving",(function(e,i,r){var n=QC(XS(r[i]),[{attr:"y",numeric:true,newValue:t.y(e.yAccessor)},{attr:"height",numeric:true,newValue:t.y.bandwidth()},{attr:"x",numeric:true,newValue:t.x(e.xAccessor)},{attr:"width",numeric:true,newValue:t.x.bandwidth()},{attr:"rx",numeric:true,newValue:t.shape==="circle"?t.x.bandwidth():0},{attr:"ry",numeric:true,newValue:t.shape==="circle"?t.y.bandwidth():0}]);return n})).transition("update").duration(this.duration).ease(ZL).attr("y",(function(e){return t.y(e.yAccessor)})).attr("height",this.y.bandwidth()).attr("x",(function(e){return t.x(e.xAccessor)})).attr("width",this.x.bandwidth()).attr("rx",this.shape==="circle"?this.x.bandwidth():0).attr("ry",this.shape==="circle"?this.y.bandwidth():0);if(this.accessibility.hideTextures||!this.accessibility.showExperimentalTextures){e.attr("fill",(function(e){return t.heat(e[t.valueAccessor])}))}e.call(qD,(function(){t.update.classed("geometryIsMoving",false);t.updateInteractionState();kD({parentGNode:t.rootG.node()})}))};t.prototype.updateInteractionState=function(){var t=this;eD(this.svg.node());this.update.attr("fill",(function(e){return t.heat(e[t.valueAccessor])})).attr("opacity",(function(e){return TD(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).attr("filter",(function(e,i,r){if(!t.accessibility.hideStrokes&&!XS(r[i]).classed("geometryIsMoving")){var n=t.clickHighlight&&t.clickHighlight.length>0&&ED(e,t.clickHighlight,t.innerInteractionKeys);var s=t.hoverHighlight&&ID(e,t.hoverHighlight,t.innerInteractionKeys);var a=!t.accessibility.hideTextures&&t.accessibility.showExperimentalTextures?t.fillColors(e[t.valueAccessor]):t.rawHeat(e[t.valueAccessor]);var o=!t.accessibility.hideTextures&&t.accessibility.showExperimentalTextures?t.strokeColors(e[t.valueAccessor]):undefined;var l=n?"click":s&&!XS(r[i]).classed("geometryIsMoving")?"hover":"rest";if(l==="hover"){tD({inputElement:r[i],id:t.chartID,key:e[t.xAccessor]+e[t.yAccessor],strokeWidth:t.hoverStyle.strokeWidth,fill:a,strokeOverride:o})}return t.strokes[l+a]}return null}));kD({parentGNode:this.rootG.node()});this.updateLabels.attr("fill",this.textTreatmentHandler)};t.prototype.setLabelOpacity=function(){this.processLabelOpacity(this.updateLabels)};t.prototype.processLabelOpacity=function(t,e){var i=this;var r=this.dataLabel.visible?1:0;var n={width:this.x.bandwidth(),height:this.y.bandwidth()};var s=function(t){var e=i.dataLabel.labelAccessor?t[i.dataLabel.labelAccessor]:t.valueAccessor;e=e instanceof Date?OD({date:e,format:i.dataLabel.format,offsetTimezone:true}):PD(e,i.dataLabel.format);var s=i.accessibility.showSmallLabels||ZC({text:e,dimensions:n,fontSize:14});return s?TD(t,r,i.hoverOpacity,i.hoverHighlight,i.clickHighlight,i.innerInteractionKeys)<1?0:1:0};if(e){t.attr("opacity",s)}else{t.each((function(t,e,i){if(!XS(i[e]).classed("entering")){XS(i[e]).attr("opacity",(function(){return s(t)}))}}))}};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=TD(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;_D(r[i],n,s);return n}))};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);this.updateLabels.attr("cursor",!this.suppressEvents?this.cursor:null)};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e){t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateLabels.on("click",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.enterDataLabels=function(){var t=this;this.enteringLabelGroups.attr("class","heat-map-label-wrapper");this.enterLabels.attr("class","heat-map-dataLabel entering").attr("opacity",0).attr("fill",this.textTreatmentHandler).attr("cursor",!this.suppressEvents?this.cursor:null).on("click",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);BD({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})};t.prototype.updateDataLabels=function(){var t=this;var e=this.updateLabels.transition("opacity").ease(ZL).duration((function(e,i,r){if(XS(r[i]).classed("entering")){return t.duration/2}return 0})).delay((function(e,i,r){if(XS(r[i]).classed("entering")){return t.duration/2}return 0}));this.processLabelOpacity(e,true);e.call(qD,(function(){t.updateLabels.classed("entering",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabels.transition("exit").ease(ZL).duration(this.duration/2).attr("opacity",0).remove();this.exitingLabelGroups.selectAll("text").transition("exit").ease(ZL).duration(this.duration/2).attr("opacity",0).call(qD,(function(){t.exitingLabelGroups.remove()}))};t.prototype.drawDataLabels=function(){var t=this;this.updateLabels.attr("fill",this.textTreatmentHandler).text((function(e){var i=t.dataLabel.labelAccessor?e[t.dataLabel.labelAccessor]:e.valueAccessor;return i instanceof Date?OD({date:i,format:t.dataLabel.format,offsetTimezone:true}):PD(i,t.dataLabel.format)}));var e=this.updateLabels.transition("update").ease(ZL).duration(this.duration);BD({root:e,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})};t.prototype.drawLegendElements=function(){HD({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.bottom+60,colorArr:this.legend&&this.legend.type!=="gradient"?this.colorArr:this.preparedColors,baseColorArr:!(this.colorPalette&&this.colorPalette.includes("diverging"))?[this.preparedColors[this.preparedColors.length-1]]:this.strokeColors.range(),hideStrokes:this.accessibility.hideStrokes,scale:this.heat,steps:this.colorSteps,margin:this.margin,padding:this.padding,duration:this.duration,type:this.legend.type,fontSize:12,label:this.legend.labels,format:this.legend.format,hide:!this.legend.visible})};t.prototype.drawAnnotations=function(){MD({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.xAccessor,yScale:this.y,yAccessor:this.yAccessor})};t.prototype.setAnnotationAccessibility=function(){SD(this.heatMapEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=nD(this.highestHeadingLevel);this.bottomLevel=nD(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){aD({rootEle:this.heatMapEl,title:this.accessibility.title||this.mainTitle,chartTag:"heat-map",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){hD({node:this.svg.node(),chartTag:"heat-map",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"cell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:KD(this,UD,"heat-map"),groupAccessor:this.yAccessor,groupName:"row",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){oD(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=KD(this,UD,"heat-map");this.update.each((function(i,r,n){lD({node:n[r],geomType:"cell",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"row",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});uD({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateRowWrappers.each((function(e,i,r){uD({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){dD(this.heatMapEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){fD(this.heatMapEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){pD(this.heatMapEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){yD(this.heatMapEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){vD(this.heatMapEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){gD(this.heatMapEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){bD(this.heatMapEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){mD({rootEle:this.heatMapEl,parentGNode:this.map.node(),chartTag:"heat-map",geomType:"cell",groupName:"row"})};t.prototype.setChartAccessibilityStructureNotes=function(){xD(this.heatMapEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){XD(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip){this.eventsTooltip({data:t,evt:US,isToShow:true})}};t.prototype.onMouseOutHandler=function(){XD(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){FD(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;GD({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor,xAccessor:this.xAccessor,yAccessor:this.yAccessor,chartType:"heat-map"})};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldFormatClickHighlight){this.formatClickHighlight();this.shouldFormatClickHighlight=false}if(this.shouldFormatHoverHighlight){this.formatHoverHighlight();this.shouldFormatHoverHighlight=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{"data-testid":"main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions","data-testid":"sub-title"},this.subTitle),r("div",{class:"heat-map-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"cell",groupName:"row",chartTag:"heat-map",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-heat-map-container"}),r("div",{class:"heat-map-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))};t.prototype.init=function(){var t=Object.keys(JL);var e=0;var i={strokeWidth:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},wrapLabel:{exception:false},hoverOpacity:{exception:0}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:JL[t[e]]}};Object.defineProperty(t.prototype,"heatMapEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["layoutWatcher"],width:["layoutWatcher"],padding:["layoutWatcher"],margin:["layoutWatcher"],xAccessor:["xAccessorWatcher"],yAccessor:["yAccessorWatcher"],valueAccessor:["groupAccessorWatcher"],xKeyOrder:["xKeyOrderWatcher"],yKeyOrder:["yKeyOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],hideAxisPath:["hideAxisPathWatcher"],colorPalette:["colorsWatcher"],colors:["colorsWatcher"],colorSteps:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],shape:["shapeWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],legend:["legendWatcher"],suppressEvents:["suppressWatcher"],annotations:["annotationsWatcher"],accessibility:["accessibilityWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}heat-map{cursor:default}heat-map .annotations{pointer-events:none}heat-map .annotations .handle{pointer-events:all}heat-map .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}heat-map .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}heat-map .hidden{display:none}heat-map .axis{font-size:12px}heat-map .axis text{fill:#767676}heat-map .axis-label{text-anchor:middle;font:1rem sans-serif}heat-map .axis path{stroke:#767676}heat-map .axis .hidden{visibility:hidden}heat-map .heat-map-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}heat-map .heat-map-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=RD();var ZD="http://www.w3.org/1999/xhtml";var QD={svg:"http://www.w3.org/2000/svg",xhtml:ZD,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function JD(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return QD.hasOwnProperty(e)?{space:QD[e],local:t}:t}function tM(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===ZD&&e.documentElement.namespaceURI===ZD?e.createElement(t):e.createElementNS(i,t)}}function eM(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function iM(t){var e=JD(t);return(e.local?eM:tM)(e)}function rM(){}function nM(t){return t==null?rM:function(){return this.querySelector(t)}}function sM(t){if(typeof t!=="function")t=nM(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new PU(r,this._parents)}function aM(){return[]}function oM(t){return t==null?aM:function(){return this.querySelectorAll(t)}}function lM(t){if(typeof t!=="function")t=oM(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new PU(r,n)}function uM(t){return function(){return this.matches(t)}}function hM(t){if(typeof t!=="function")t=uM(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new PU(r,this._parents)}function cM(t){return new Array(t.length)}function dM(){return new PU(this._enter||this._groups.map(cM),this._parents)}function fM(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}fM.prototype={constructor:fM,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function pM(t){return function(){return t}}var yM="$";function vM(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new fM(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function gM(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=yM+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=yM+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new fM(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function bM(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?gM:vM,r=this._parents,n=this._groups;if(typeof t!=="function")t=pM(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new PU(a,r);a._enter=o;a._exit=l;return a}function mM(){return new PU(this._exit||this._groups.map(cM),this._parents)}function AM(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function wM(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new PU(a,this._parents)}function xM(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function SM(t){if(!t)t=kM;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new PU(n,this._parents).order()}function kM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function LM(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function _M(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function CM(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function DM(){var t=0;this.each((function(){++t}));return t}function MM(){return!this.node()}function UM(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function TM(t){return function(){this.removeAttribute(t)}}function EM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function IM(t,e){return function(){this.setAttribute(t,e)}}function NM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function WM(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function HM(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function GM(t,e){var i=JD(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?EM:TM:typeof e==="function"?i.local?HM:WM:i.local?NM:IM)(i,e))}function PM(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function OM(t){return function(){this.style.removeProperty(t)}}function VM(t,e,i){return function(){this.style.setProperty(t,e,i)}}function RM(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function YM(t,e,i){return arguments.length>1?this.each((e==null?OM:typeof e==="function"?RM:VM)(t,e,i==null?"":i)):zM(this.node(),t)}function zM(t,e){return t.style.getPropertyValue(e)||PM(t).getComputedStyle(t,null).getPropertyValue(e)}function FM(t){return function(){delete this[t]}}function XM(t,e){return function(){this[t]=e}}function BM(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function KM(t,e){return arguments.length>1?this.each((e==null?FM:typeof e==="function"?BM:XM)(t,e)):this.node()[t]}function qM(t){return t.trim().split(/^|\s+/)}function jM(t){return t.classList||new $M(t)}function $M(t){this._node=t;this._names=qM(t.getAttribute("class")||"")}$M.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function ZM(t,e){var i=jM(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function QM(t,e){var i=jM(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function JM(t){return function(){ZM(this,t)}}function tU(t){return function(){QM(this,t)}}function eU(t,e){return function(){(e.apply(this,arguments)?ZM:QM)(this,t)}}function iU(t,e){var i=qM(t+"");if(arguments.length<2){var r=jM(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?eU:e?JM:tU)(i,e))}function rU(){this.textContent=""}function nU(t){return function(){this.textContent=t}}function sU(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function aU(t){return arguments.length?this.each(t==null?rU:(typeof t==="function"?sU:nU)(t)):this.node().textContent}function oU(){this.innerHTML=""}function lU(t){return function(){this.innerHTML=t}}function uU(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function hU(t){return arguments.length?this.each(t==null?oU:(typeof t==="function"?uU:lU)(t)):this.node().innerHTML}function cU(){if(this.nextSibling)this.parentNode.appendChild(this)}function dU(){return this.each(cU)}function fU(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pU(){return this.each(fU)}function yU(t){var e=typeof t==="function"?t:iM(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function vU(){return null}function gU(t,e){var i=typeof t==="function"?t:iM(t),r=e==null?vU:typeof e==="function"?e:nM(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function bU(){var t=this.parentNode;if(t)t.removeChild(this)}function mU(){return this.each(bU)}function AU(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wU(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xU(t){return this.select(t?wU:AU)}function SU(t){return arguments.length?this.property("__data__",t):this.node().__data__}var kU={};var LU=null;if(typeof document!=="undefined"){var _U=document.documentElement;if(!("onmouseenter"in _U)){kU={mouseenter:"mouseover",mouseleave:"mouseout"}}}function CU(t,e,i){t=DU(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function DU(t,e,i){return function(r){var n=LU;LU=r;try{t.call(this,this.__data__,e,i)}finally{LU=n}}}function MU(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function UU(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function TU(t,e,i){var r=kU.hasOwnProperty(t.type)?CU:DU;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function EU(t,e,i){var r=MU(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?TU:UU;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function IU(t,e,i){var r=PM(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function NU(t,e){return function(){return IU(this,t,e)}}function WU(t,e){return function(){return IU(this,t,e.apply(this,arguments))}}function HU(t,e){return this.each((typeof e==="function"?WU:NU)(t,e))}var GU=[null];function PU(t,e){this._groups=t;this._parents=e}function OU(){return new PU([[document.documentElement]],GU)}PU.prototype=OU.prototype={constructor:PU,select:sM,selectAll:lM,filter:hM,data:bM,enter:dM,exit:mM,join:AM,merge:wM,order:xM,sort:SM,call:LM,nodes:_M,node:CM,size:DM,empty:MM,each:UM,attr:GM,style:YM,property:KM,classed:iU,text:aU,html:hU,raise:dU,lower:pU,append:yU,insert:gU,remove:mU,clone:xU,datum:SU,on:EU,dispatch:HU};function VU(t){return typeof t==="string"?new PU([[document.querySelector(t)]],[document.documentElement]):new PU([[t]],GU)}function RU(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function YU(t){if(t.length===1)t=zU(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function zU(t){return function(e,i){return RU(t(e),i)}}var FU=YU(RU);var XU=FU.right;function BU(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var KU=Math.sqrt(50),qU=Math.sqrt(10),jU=Math.sqrt(2);function $U(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=ZU(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function ZU(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=KU?10:s>=qU?5:s>=jU?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=KU?10:s>=qU?5:s>=jU?2:1)}function QU(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=KU)n*=10;else if(s>=qU)n*=5;else if(s>=jU)n*=2;return e<t?-n:n}function JU(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var tT="$";function eT(){}eT.prototype=iT.prototype={constructor:eT,has:function(t){return tT+t in this},get:function(t){return this[tT+t]},set:function(t,e){this[tT+t]=e;return this},remove:function(t){var e=tT+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===tT)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===tT)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===tT)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===tT)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===tT)++t;return t},empty:function(){for(var t in this)if(t[0]===tT)return false;return true},each:function(t){for(var e in this)if(e[0]===tT)t(this[e],e.slice(1),this)}};function iT(t,e){var i=new eT;if(t instanceof eT)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}var rT=Array.prototype;var nT=rT.map;var sT=rT.slice;var aT={name:"implicit"};function oT(){var t=iT(),e=[],i=[],r=aT;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==aT)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=iT();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=sT.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return oT(e,i).unknown(r)};JU.apply(n,arguments);return n}function lT(){var t=oT().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=BU(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return lT(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return JU.apply(h(),arguments)}function uT(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function hT(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function cT(){}var dT=.7;var fT=1/dT;var pT="\\s*([+-]?\\d+)\\s*",yT="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",vT="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gT=/^#([0-9a-f]{3,8})$/,bT=new RegExp("^rgb\\("+[pT,pT,pT]+"\\)$"),mT=new RegExp("^rgb\\("+[vT,vT,vT]+"\\)$"),AT=new RegExp("^rgba\\("+[pT,pT,pT,yT]+"\\)$"),wT=new RegExp("^rgba\\("+[vT,vT,vT,yT]+"\\)$"),xT=new RegExp("^hsl\\("+[yT,vT,vT]+"\\)$"),ST=new RegExp("^hsla\\("+[yT,vT,vT,yT]+"\\)$");var kT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uT(cT,DT,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:LT,formatHex:LT,formatHsl:_T,formatRgb:CT,toString:CT});function LT(){return this.rgb().formatHex()}function _T(){return PT(this).formatHsl()}function CT(){return this.rgb().formatRgb()}function DT(t){var e,i;t=(t+"").trim().toLowerCase();return(e=gT.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?MT(e):i===3?new IT(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?UT(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?UT(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bT.exec(t))?new IT(e[1],e[2],e[3],1):(e=mT.exec(t))?new IT(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=AT.exec(t))?UT(e[1],e[2],e[3],e[4]):(e=wT.exec(t))?UT(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xT.exec(t))?GT(e[1],e[2]/100,e[3]/100,1):(e=ST.exec(t))?GT(e[1],e[2]/100,e[3]/100,e[4]):kT.hasOwnProperty(t)?MT(kT[t]):t==="transparent"?new IT(NaN,NaN,NaN,0):null}function MT(t){return new IT(t>>16&255,t>>8&255,t&255,1)}function UT(t,e,i,r){if(r<=0)t=e=i=NaN;return new IT(t,e,i,r)}function TT(t){if(!(t instanceof cT))t=DT(t);if(!t)return new IT;t=t.rgb();return new IT(t.r,t.g,t.b,t.opacity)}function ET(t,e,i,r){return arguments.length===1?TT(t):new IT(t,e,i,r==null?1:r)}function IT(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}uT(IT,ET,hT(cT,{brighter:function(t){t=t==null?fT:Math.pow(fT,t);return new IT(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?dT:Math.pow(dT,t);return new IT(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:NT,formatHex:NT,formatRgb:WT,toString:WT}));function NT(){return"#"+HT(this.r)+HT(this.g)+HT(this.b)}function WT(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function HT(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function GT(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new VT(t,e,i,r)}function PT(t){if(t instanceof VT)return new VT(t.h,t.s,t.l,t.opacity);if(!(t instanceof cT))t=DT(t);if(!t)return new VT;if(t instanceof VT)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new VT(a,o,l,t.opacity)}function OT(t,e,i,r){return arguments.length===1?PT(t):new VT(t,e,i,r==null?1:r)}function VT(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}uT(VT,OT,hT(cT,{brighter:function(t){t=t==null?fT:Math.pow(fT,t);return new VT(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?dT:Math.pow(dT,t);return new VT(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new IT(RT(t>=240?t-240:t+120,n,r),RT(t,n,r),RT(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function RT(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function YT(t){return function(){return t}}function zT(t,e){return function(i){return t+i*e}}function FT(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function XT(t){return(t=+t)===1?BT:function(e,i){return i-e?FT(e,i,t):YT(isNaN(e)?i:e)}}function BT(t,e){var i=e-t;return i?zT(t,i):YT(isNaN(t)?e:t)}var KT=function t(e){var i=XT(e);function r(t,e){var r=i((t=ET(t)).r,(e=ET(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=BT(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function qT(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function jT(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function $T(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=sE(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function ZT(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function QT(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function JT(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=sE(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var tE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,eE=new RegExp(tE.source,"g");function iE(t){return function(){return t}}function rE(t){return function(e){return t(e)+""}}function nE(t,e){var i=tE.lastIndex=eE.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=tE.exec(t))&&(n=eE.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:QT(r,n)})}i=eE.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?rE(l[0].x):iE(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function sE(t,e){var i=typeof e,r;return e==null||i==="boolean"?YT(e):(i==="number"?QT:i==="string"?(r=DT(e))?(e=r,KT):nE:e instanceof DT?KT:e instanceof Date?ZT:jT(e)?qT:Array.isArray(e)?$T:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?JT:QT)(t,e)}function aE(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var oE=180/Math.PI;var lE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uE(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*oE,skewX:Math.atan(l)*oE,scaleX:a,scaleY:o}}var hE,cE,dE,fE;function pE(t){if(t==="none")return lE;if(!hE)hE=document.createElement("DIV"),cE=document.documentElement,dE=document.defaultView;hE.style.transform=t;t=dE.getComputedStyle(cE.appendChild(hE),null).getPropertyValue("transform");cE.removeChild(hE);t=t.slice(7,-1).split(",");return uE(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function yE(t){if(t==null)return lE;if(!fE)fE=document.createElementNS("http://www.w3.org/2000/svg","g");fE.setAttribute("transform",t);if(!(t=fE.transform.baseVal.consolidate()))return lE;t=t.matrix;return uE(t.a,t.b,t.c,t.d,t.e,t.f)}function vE(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:QT(t,n)},{i:l-2,x:QT(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:QT(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:QT(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:QT(t,i)},{i:o-2,x:QT(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var gE=vE(pE,"px, ","px)","deg)");var bE=vE(yE,", ",")",")");function mE(t){return function(){return t}}function AE(t){return+t}var wE=[0,1];function xE(t){return t}function SE(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:mE(isNaN(e)?NaN:.5)}function kE(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function LE(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=SE(n,r),s=i(a,s);else r=SE(r,n),s=i(s,a);return function(t){return s(r(t))}}function _E(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=SE(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=XU(t,e,1,r)-1;return s[i](n[i](e))}}function CE(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function DE(){var t=wE,e=wE,i=sE,r,n,s,a=xE,o,l,u;function h(){o=Math.min(t.length,e.length)>2?_E:LE;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),QT)))(i)))};c.domain=function(e){return arguments.length?(t=nT.call(e,AE),a===xE||(a=kE(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=sT.call(t),h()):e.slice()};c.rangeRound=function(t){return e=sT.call(t),i=aE,h()};c.clamp=function(e){return arguments.length?(a=e?kE(t):xE,c):a!==xE};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function ME(t,e){return DE()(t,e)}function UE(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function TE(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function EE(t){return t=TE(Math.abs(t)),t?t[1]:NaN}function IE(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function NE(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var WE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function HE(t){if(!(e=WE.exec(t)))throw new Error("invalid format: "+t);var e;return new GE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}HE.prototype=GE.prototype;function GE(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}GE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function PE(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var OE;function VE(t,e){var i=TE(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(OE=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+TE(t,Math.max(0,e+s-1))[0]}function RE(t,e){var i=TE(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var YE={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:UE,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return RE(t*100,e)},r:RE,s:VE,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function zE(t){return t}var FE=Array.prototype.map,XE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function BE(t){var e=t.grouping===undefined||t.thousands===undefined?zE:IE(FE.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?zE:NE(FE.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=HE(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!YE[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=YE[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=PE(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?XE[8+OE/3]:"")+r+(k&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=HE(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(EE(e)/3)))*3,n=Math.pow(10,-r),s=XE[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var KE;var qE;var jE;$E({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function $E(t){KE=BE(t);qE=KE.format;jE=KE.formatPrefix;return KE}function ZE(t){return Math.max(0,-EE(Math.abs(t)))}function QE(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(EE(e)/3)))*3-EE(Math.abs(t)))}function JE(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,EE(e)-EE(t))+1}function tI(t,e,i,r){var n=QU(t,e,i),s;r=HE(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=QE(n,a)))r.precision=s;return jE(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=JE(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=ZE(n)))r.precision=s-(r.type==="%")*2;break}}return qE(r)}function eI(t){var e=t.domain;t.ticks=function(t){var i=e();return $U(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return tI(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=ZU(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=ZU(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=ZU(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function iI(){var t=ME(xE,xE);t.copy=function(){return CE(t,iI())};JU.apply(t,arguments);return eI(t)}var rI={value:function(){}};function nI(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new sI(i)}function sI(t){this._=t}function aI(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}sI.prototype=nI.prototype={constructor:sI,on:function(t,e){var i=this._,r=aI(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=oI(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=lI(i[n],t.name,e);else if(e==null)for(n in i)i[n]=lI(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new sI(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function oI(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function lI(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=rI,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var uI=0,hI=0,cI=0,dI=1e3,fI,pI,yI=0,vI=0,gI=0,bI=typeof performance==="object"&&performance.now?performance:Date,mI=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function AI(){return vI||(mI(wI),vI=bI.now()+gI)}function wI(){vI=0}function xI(){this._call=this._time=this._next=null}xI.prototype=SI.prototype={constructor:xI,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?AI():+i)+(e==null?0:+e);if(!this._next&&pI!==this){if(pI)pI._next=this;else fI=this;pI=this}this._call=t;this._time=i;DI()},stop:function(){if(this._call){this._call=null;this._time=Infinity;DI()}}};function SI(t,e,i){var r=new xI;r.restart(t,e,i);return r}function kI(){AI();++uI;var t=fI,e;while(t){if((e=vI-t._time)>=0)t._call.call(null,e);t=t._next}--uI}function LI(){vI=(yI=bI.now())+gI;uI=hI=0;try{kI()}finally{uI=0;CI();vI=0}}function _I(){var t=bI.now(),e=t-yI;if(e>dI)gI-=e,yI=t}function CI(){var t,e=fI,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:fI=i}}pI=t;DI(r)}function DI(t){if(uI)return;if(hI)hI=clearTimeout(hI);var e=t-vI;if(e>24){if(t<Infinity)hI=setTimeout(LI,t-bI.now()-gI);if(cI)cI=clearInterval(cI)}else{if(!cI)yI=bI.now(),cI=setInterval(_I,dI);uI=1,mI(LI)}}function MI(t,e,i){var r=new xI;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var UI=nI("start","end","interrupt");var TI=[];var EI=0;var II=1;var NI=2;var WI=3;var HI=4;var GI=5;var PI=6;function OI(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;zI(t,i,{name:e,index:r,group:n,on:UI,tween:TI,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:EI})}function VI(t,e){var i=YI(t,e);if(i.state>EI)throw new Error("too late; already scheduled");return i}function RI(t,e){var i=YI(t,e);if(i.state>NI)throw new Error("too late; already started");return i}function YI(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function zI(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=SI(s,0,i.time);function s(t){i.state=II;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==II)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===WI)return MI(a);if(d.state===HI){d.state=PI;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=PI;d.timer.stop();delete r[u]}}MI((function(){if(i.state===WI){i.state=HI;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=NI;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==NI)return;i.state=WI;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=GI,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===GI){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=PI;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function FI(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>NI&&r.state<GI;r.state=PI;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function XI(t){return this.each((function(){FI(this,t)}))}function BI(t,e){var i,r;return function(){var n=RI(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function KI(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=RI(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function qI(t,e){var i=this._id;t+="";if(arguments.length<2){var r=YI(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?BI:KI)(i,t,e))}function jI(t,e,i){var r=t._id;t.each((function(){var t=RI(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return YI(t,r).value[e]}}function $I(t,e){var i;return(typeof e==="number"?QT:e instanceof DT?KT:(i=DT(e))?(e=i,KT):nE)(t,e)}function ZI(t){return function(){this.removeAttribute(t)}}function QI(t){return function(){this.removeAttributeNS(t.space,t.local)}}function JI(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function tN(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function eN(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function iN(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function rN(t,e){var i=JD(t),r=i==="transform"?bE:$I;return this.attrTween(t,typeof e==="function"?(i.local?iN:eN)(i,r,jI(this,"attr."+t,e)):e==null?(i.local?QI:ZI)(i):(i.local?tN:JI)(i,r,e+""))}function nN(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function sN(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function aN(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=JD(t);return this.tween(i,(r.local?nN:sN)(r,e))}function oN(t,e){return function(){VI(this,t).delay=+e.apply(this,arguments)}}function lN(t,e){return e=+e,function(){VI(this,t).delay=e}}function uN(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?oN:lN)(e,t)):YI(this.node(),e).delay}function hN(t,e){return function(){RI(this,t).duration=+e.apply(this,arguments)}}function cN(t,e){return e=+e,function(){RI(this,t).duration=e}}function dN(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?hN:cN)(e,t)):YI(this.node(),e).duration}function fN(t,e){if(typeof e!=="function")throw new Error;return function(){RI(this,t).ease=e}}function pN(t){var e=this._id;return arguments.length?this.each(fN(e,t)):YI(this.node(),e).ease}function yN(t){if(typeof t!=="function")t=uM(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new PN(r,this._parents,this._name,this._id)}function vN(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new PN(a,this._parents,this._name,this._id)}function gN(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function bN(t,e,i){var r,n,s=gN(e)?VI:RI;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function mN(t,e){var i=this._id;return arguments.length<2?YI(this.node(),i).on.on(t):this.each(bN(i,t,e))}function AN(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function wN(){return this.on("end.remove",AN(this._id))}function xN(t){var e=this._name,i=this._id;if(typeof t!=="function")t=nM(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;OI(u[d],e,i,d,u,YI(h,i))}}}return new PN(s,this._parents,e,i)}function SN(t){var e=this._name,i=this._id;if(typeof t!=="function")t=oM(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=YI(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){OI(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new PN(s,a,e,i)}var kN=OU.prototype.constructor;function LN(){return new kN(this._groups,this._parents)}function _N(t,e){var i,r,n;return function(){var s=zM(this,t),a=(this.style.removeProperty(t),zM(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function CN(t){return function(){this.style.removeProperty(t)}}function DN(t,e,i){var r,n;return function(){var s=zM(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function MN(t,e,i){var r,n,s;return function(){var a=zM(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),zM(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function UN(t,e,i){var r=(t+="")==="transform"?gE:$I;return e==null?this.styleTween(t,_N(t,r)).on("end.style."+t,CN(t)):this.styleTween(t,typeof e==="function"?MN(t,r,jI(this,"style."+t,e)):DN(t,r,e+""),i)}function TN(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function EN(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,TN(t,e,i==null?"":i))}function IN(t){return function(){this.textContent=t}}function NN(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function WN(t){return this.tween("text",typeof t==="function"?NN(jI(this,"text",t)):IN(t==null?"":t+""))}function HN(){var t=this._name,e=this._id,i=VN();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=YI(l,e);OI(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new PN(r,this._parents,t,i)}var GN=0;function PN(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function ON(t){return OU().transition(t)}function VN(){return++GN}var RN=OU.prototype;PN.prototype=ON.prototype={constructor:PN,select:xN,selectAll:SN,filter:yN,merge:vN,selection:LN,transition:HN,call:RN.call,nodes:RN.nodes,node:RN.node,size:RN.size,empty:RN.empty,each:RN.each,on:mN,attr:rN,attrTween:aN,style:UN,styleTween:EN,text:WN,remove:wN,tween:qI,delay:uN,duration:dN,ease:pN};function YN(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var zN={time:null,delay:0,duration:250,ease:YN};function FN(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return zN.time=AI(),zN}}return i}function XN(t){var e,i;if(t instanceof PN){e=t._id,t=t._name}else{e=VN(),(i=zN).time=AI(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){OI(l,t,e,u,a,i||FN(l,e))}}}return new PN(r,this._parents,t,e)}OU.prototype.interrupt=XI;OU.prototype.transition=XN;var BN=s.getLicenses,KN=s.drawTooltip,qN=s.initTooltipStyle;var jN=t("level_indicator_alternative",function(){function t(t){e(this,t);this.height=100;this.width=60;this.data=[{}];this.ordinalAccessor="label";this.valueAccessor="value";this.showHeader=true;this.showLabel=false;this.enableColor=true;this.dataFormat="0,0.00";this.threshold=.1;this.colors=["#180F58","#B7C9E7","#B7B7B7","#E2AEBC","#D60036"];this.indicatorLabels=["High","Above","Avg.","Below","Poor"];this.defaultColor=["#180F58"];this.wrapLabel=true;this.alignLabel="center";this.padding={top:this.height*.08,bottom:this.height*.25,right:this.width*.01,left:this.width*.01};this.indicatorWidth=this.height/4;this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.componentWillLoad=function(){this.innerHeight=this.height-this.padding.top-this.padding.bottom;this.innerWidth=this.width-this.padding.left-this.padding.right};t.prototype.componentWillUpdate=function(){this.drawChart()};t.prototype.componentDidLoad=function(){this.drawChart();this.setTooltipInitialStyle()};t.prototype.drawChart=function(){var t=this;this.reSetRoot();this.y=iI().domain([-this.threshold,this.threshold]).range([this.innerHeight-this.indicatorWidth/6,0]);this.x=lT().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([0,this.innerWidth]).padding(.2);if(this.showLabel){this.drawLabel()}this.drawIndicator()};t.prototype.reSetRoot=function(){if(this.svg){this.svg.remove()}this.svg=VU(this.indicatorChartEl).select("#visa-viz-d3-indicator-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.rootG=this.svg.append("g").attr("id","visa-viz-padding-container-g").attr("transform","translate("+this.padding.left+", "+this.padding.top+")").attr("class","indicator");this.tooltipG=VU(this.indicatorChartEl).select(".indicator-tooltip")};t.prototype.drawLabel=function(){var t=this;this.rootG.append("g").attr("class","indicator-label").attr("transform","translate(0, "+this.innerHeight+")").selectAll("text").data(this.data).enter().append("text").attr("dy","1.5em").attr("dx",(function(e){return t.x(e[t.ordinalAccessor])/2})).text((function(e){return t.getLabel(e[t.valueAccessor])}))};t.prototype.drawIndicator=function(){var t=this;var e=this.rootG.append("g").attr("class","indicator-chart").selectAll("g").data(this.data).enter().append("g");var i=[-2,-1,0,1,2];i.map((function(i){e.append("rect").attr("x",(function(e){return t.x(e[t.ordinalAccessor])})).attr("y",(function(){return t.y(t.threshold/2*i)-t.indicatorWidth/4})).attr("height",t.indicatorWidth/2).attr("width",t.indicatorWidth*.8).attr("fill","#E6E6E6")}));e.append("rect").attr("x",(function(e){return t.x(e[t.ordinalAccessor])-t.indicatorWidth*.1})).attr("y",(function(e){return t.y(t.getLevel(e[t.valueAccessor]))-t.indicatorWidth/4})).attr("height",this.indicatorWidth/2).attr("width",this.indicatorWidth).attr("fill",(function(e){return t.enableColor?t.getColor(e[t.valueAccessor]):t.defaultColor})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))};t.prototype.getLevel=function(t){if(t>=this.threshold){return this.threshold}else if(t>=this.threshold/2){return this.threshold/2}else if(t>-this.threshold/2){return 0}else if(t>-this.threshold){return-this.threshold/2}else{return-this.threshold}};t.prototype.getLabel=function(t){if(t>=this.threshold){return this.indicatorLabels[0]}else if(t>=this.threshold/2){return this.indicatorLabels[1]}else if(t>-this.threshold/2){return this.indicatorLabels[2]}else if(t>-this.threshold){return this.indicatorLabels[3]}else{return this.indicatorLabels[4]}};t.prototype.getColor=function(t){if(t>=this.threshold){return this.colors[0]}else if(t>=this.threshold/2){return this.colors[1]}else if(t>-this.threshold/2){return this.colors[2]}else if(t>-this.threshold){return this.colors[3]}else{return this.colors[4]}};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){this.hoverFunc.emit(t);this.eventsTooltip({data:t,evt:LU,isToShow:true})};t.prototype.onMouseOutHandler=function(){this.mouseOutFunc.emit();this.eventsTooltip({isToShow:false})};t.prototype.setTooltipInitialStyle=function(){qN(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;KN({root:this.tooltipG,data:e,event:i,isToShow:r,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})};t.prototype.render=function(){return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r("div",{class:"visa-ui-text--body",style:{visibility:this.showHeader?"visible":"hidden",width:this.wrapLabel?""+this.indicatorWidth*1.5+"px":"auto",textAlign:this.alignLabel}},this.data[0][this.ordinalAccessor]),r("div",{class:"indicator-tooltip vcl-tooltip",style:{display:"block"}}),r("div",{id:"visa-viz-d3-indicator-container"})))};Object.defineProperty(t.prototype,"indicatorChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}.indicator .indicator-grid line{stroke:#767676;stroke-opacity:1}.indicator .indicator-grid path{stroke-width:0;stroke:#767676}.indicator .indicator-grid text{fill:#767676}.indicator .indicator-label{font-size:0.8em;fill:#767676;text-anchor:start}.indicator .indicator-chart{stroke:#767676}.indicator .indicator-chart rect{stroke:none}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=BN();var $N="http://www.w3.org/1999/xhtml";var ZN={svg:"http://www.w3.org/2000/svg",xhtml:$N,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function QN(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return ZN.hasOwnProperty(e)?{space:ZN[e],local:t}:t}function JN(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===$N&&e.documentElement.namespaceURI===$N?e.createElement(t):e.createElementNS(i,t)}}function tW(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function eW(t){var e=QN(t);return(e.local?tW:JN)(e)}function iW(){}function rW(t){return t==null?iW:function(){return this.querySelector(t)}}function nW(t){if(typeof t!=="function")t=rW(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new GH(r,this._parents)}function sW(){return[]}function aW(t){return t==null?sW:function(){return this.querySelectorAll(t)}}function oW(t){if(typeof t!=="function")t=aW(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new GH(r,n)}function lW(t){return function(){return this.matches(t)}}function uW(t){if(typeof t!=="function")t=lW(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new GH(r,this._parents)}function hW(t){return new Array(t.length)}function cW(){return new GH(this._enter||this._groups.map(hW),this._parents)}function dW(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}dW.prototype={constructor:dW,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function fW(t){return function(){return t}}var pW="$";function yW(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new dW(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function vW(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=pW+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=pW+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new dW(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function gW(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?vW:yW,r=this._parents,n=this._groups;if(typeof t!=="function")t=fW(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new GH(a,r);a._enter=o;a._exit=l;return a}function bW(){return new GH(this._exit||this._groups.map(hW),this._parents)}function mW(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function AW(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new GH(a,this._parents)}function wW(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function xW(t){if(!t)t=SW;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new GH(n,this._parents).order()}function SW(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function kW(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function LW(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function _W(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function CW(){var t=0;this.each((function(){++t}));return t}function DW(){return!this.node()}function MW(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function UW(t){return function(){this.removeAttribute(t)}}function TW(t){return function(){this.removeAttributeNS(t.space,t.local)}}function EW(t,e){return function(){this.setAttribute(t,e)}}function IW(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function NW(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function WW(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function HW(t,e){var i=QN(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?TW:UW:typeof e==="function"?i.local?WW:NW:i.local?IW:EW)(i,e))}function GW(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function PW(t){return function(){this.style.removeProperty(t)}}function OW(t,e,i){return function(){this.style.setProperty(t,e,i)}}function VW(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function RW(t,e,i){return arguments.length>1?this.each((e==null?PW:typeof e==="function"?VW:OW)(t,e,i==null?"":i)):YW(this.node(),t)}function YW(t,e){return t.style.getPropertyValue(e)||GW(t).getComputedStyle(t,null).getPropertyValue(e)}function zW(t){return function(){delete this[t]}}function FW(t,e){return function(){this[t]=e}}function XW(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function BW(t,e){return arguments.length>1?this.each((e==null?zW:typeof e==="function"?XW:FW)(t,e)):this.node()[t]}function KW(t){return t.trim().split(/^|\s+/)}function qW(t){return t.classList||new jW(t)}function jW(t){this._node=t;this._names=KW(t.getAttribute("class")||"")}jW.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function $W(t,e){var i=qW(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function ZW(t,e){var i=qW(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function QW(t){return function(){$W(this,t)}}function JW(t){return function(){ZW(this,t)}}function tH(t,e){return function(){(e.apply(this,arguments)?$W:ZW)(this,t)}}function eH(t,e){var i=KW(t+"");if(arguments.length<2){var r=qW(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?tH:e?QW:JW)(i,e))}function iH(){this.textContent=""}function rH(t){return function(){this.textContent=t}}function nH(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function sH(t){return arguments.length?this.each(t==null?iH:(typeof t==="function"?nH:rH)(t)):this.node().textContent}function aH(){this.innerHTML=""}function oH(t){return function(){this.innerHTML=t}}function lH(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function uH(t){return arguments.length?this.each(t==null?aH:(typeof t==="function"?lH:oH)(t)):this.node().innerHTML}function hH(){if(this.nextSibling)this.parentNode.appendChild(this)}function cH(){return this.each(hH)}function dH(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fH(){return this.each(dH)}function pH(t){var e=typeof t==="function"?t:eW(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function yH(){return null}function vH(t,e){var i=typeof t==="function"?t:eW(t),r=e==null?yH:typeof e==="function"?e:rW(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function gH(){var t=this.parentNode;if(t)t.removeChild(this)}function bH(){return this.each(gH)}function mH(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function AH(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wH(t){return this.select(t?AH:mH)}function xH(t){return arguments.length?this.property("__data__",t):this.node().__data__}var SH={};var kH=null;if(typeof document!=="undefined"){var LH=document.documentElement;if(!("onmouseenter"in LH)){SH={mouseenter:"mouseover",mouseleave:"mouseout"}}}function _H(t,e,i){t=CH(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function CH(t,e,i){return function(r){var n=kH;kH=r;try{t.call(this,this.__data__,e,i)}finally{kH=n}}}function DH(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function MH(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function UH(t,e,i){var r=SH.hasOwnProperty(t.type)?_H:CH;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function TH(t,e,i){var r=DH(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?UH:MH;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function EH(t,e,i){var r=GW(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function IH(t,e){return function(){return EH(this,t,e)}}function NH(t,e){return function(){return EH(this,t,e.apply(this,arguments))}}function WH(t,e){return this.each((typeof e==="function"?NH:IH)(t,e))}var HH=[null];function GH(t,e){this._groups=t;this._parents=e}function PH(){return new GH([[document.documentElement]],HH)}GH.prototype=PH.prototype={constructor:GH,select:nW,selectAll:oW,filter:uW,data:gW,enter:cW,exit:bW,join:mW,merge:AW,order:wW,sort:xW,call:kW,nodes:LW,node:_W,size:CW,empty:DW,each:MW,attr:HW,style:RW,property:BW,classed:eH,text:sH,html:uH,raise:cH,lower:fH,append:pH,insert:vH,remove:bH,clone:wH,datum:xH,on:TH,dispatch:WH};function OH(t){return typeof t==="string"?new GH([[document.querySelector(t)]],[document.documentElement]):new GH([[t]],HH)}function VH(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function RH(t){if(t.length===1)t=YH(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function YH(t){return function(e,i){return VH(t(e),i)}}var zH=RH(VH);var FH=zH.right;function XH(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var BH=Math.sqrt(50),KH=Math.sqrt(10),qH=Math.sqrt(2);function jH(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=$H(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function $H(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=BH?10:s>=KH?5:s>=qH?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=BH?10:s>=KH?5:s>=qH?2:1)}function ZH(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=BH)n*=10;else if(s>=KH)n*=5;else if(s>=qH)n*=2;return e<t?-n:n}function QH(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function JH(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}var tG=new Date,eG=new Date;function iG(t,e,i,r){function n(e){return t(e=arguments.length===0?new Date:new Date(+e)),e}n.floor=function(e){return t(e=new Date(+e)),e};n.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i};n.round=function(t){var e=n(t),i=n.ceil(t);return t-e<i-t?e:i};n.offset=function(t,i){return e(t=new Date(+t),i==null?1:Math.floor(i)),t};n.range=function(i,r,s){var a=[],o;i=n.ceil(i);s=s==null?1:Math.floor(s);if(!(i<r)||!(s>0))return a;do{a.push(o=new Date(+i)),e(i,s),t(i)}while(o<i&&i<r);return a};n.filter=function(i){return iG((function(e){if(e>=e)while(t(e),!i(e))e.setTime(e-1)}),(function(t,r){if(t>=t){if(r<0)while(++r<=0){while(e(t,-1),!i(t)){}}else while(--r>=0){while(e(t,+1),!i(t)){}}}}))};if(i){n.count=function(e,r){tG.setTime(+e),eG.setTime(+r);t(tG),t(eG);return Math.floor(i(tG,eG))};n.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?n:n.filter(r?function(e){return r(e)%t===0}:function(e){return n.count(0,e)%t===0})}}return n}var rG=1e3;var nG=6e4;var sG=36e5;var aG=864e5;var oG=6048e5;var lG=iG((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*rG-t.getMinutes()*nG)}),(function(t,e){t.setTime(+t+e*sG)}),(function(t,e){return(e-t)/sG}),(function(t){return t.getHours()}));var uG=iG((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*nG)/aG}),(function(t){return t.getDate()-1}));function hG(t){return iG((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e*7)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*nG)/oG}))}var cG=hG(0);var dG=hG(1);var fG=hG(2);var pG=hG(3);var yG=hG(4);var vG=hG(5);var gG=hG(6);var bG=iG((function(t){t.setDate(1);t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12}),(function(t){return t.getMonth()}));var mG=iG((function(t){t.setMonth(0,1);t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));mG.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:iG((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t);e.setMonth(0,1);e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)}))};function AG(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var wG="$";function xG(){}xG.prototype=SG.prototype={constructor:xG,has:function(t){return wG+t in this},get:function(t){return this[wG+t]},set:function(t,e){this[wG+t]=e;return this},remove:function(t){var e=wG+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===wG)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===wG)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===wG)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===wG)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===wG)++t;return t},empty:function(){for(var t in this)if(t[0]===wG)return false;return true},each:function(t){for(var e in this)if(e[0]===wG)t(this[e],e.slice(1),this)}};function SG(t,e){var i=new xG;if(t instanceof xG)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function kG(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=SG(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,LG,_G)},map:function(t){return s(t,0,CG,DG)},entries:function(t){return a(s(t,0,CG,DG),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function LG(){return{}}function _G(t,e,i){t[e]=i}function CG(){return SG()}function DG(t,e,i){t.set(e,i)}var MG=Array.prototype;var UG=MG.map;var TG=MG.slice;var EG={name:"implicit"};function IG(){var t=SG(),e=[],i=[],r=EG;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==EG)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=SG();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=TG.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return IG(e,i).unknown(r)};AG.apply(n,arguments);return n}function NG(){var t=IG().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=XH(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return NG(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return AG.apply(h(),arguments)}function WG(t){var e=t.copy;t.padding=t.paddingOuter;delete t.paddingInner;delete t.paddingOuter;t.copy=function(){return WG(e())};return t}function HG(){return WG(NG.apply(null,arguments).paddingInner(1))}function GG(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function PG(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function OG(){}var VG=.7;var RG=1/VG;var YG="\\s*([+-]?\\d+)\\s*",zG="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",FG="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XG=/^#([0-9a-f]{3,8})$/,BG=new RegExp("^rgb\\("+[YG,YG,YG]+"\\)$"),KG=new RegExp("^rgb\\("+[FG,FG,FG]+"\\)$"),qG=new RegExp("^rgba\\("+[YG,YG,YG,zG]+"\\)$"),jG=new RegExp("^rgba\\("+[FG,FG,FG,zG]+"\\)$"),$G=new RegExp("^hsl\\("+[zG,FG,FG]+"\\)$"),ZG=new RegExp("^hsla\\("+[zG,FG,FG,zG]+"\\)$");var QG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};GG(OG,iP,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:JG,formatHex:JG,formatHsl:tP,formatRgb:eP,toString:eP});function JG(){return this.rgb().formatHex()}function tP(){return dP(this).formatHsl()}function eP(){return this.rgb().formatRgb()}function iP(t){var e,i;t=(t+"").trim().toLowerCase();return(e=XG.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?rP(e):i===3?new oP(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?nP(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?nP(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=BG.exec(t))?new oP(e[1],e[2],e[3],1):(e=KG.exec(t))?new oP(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=qG.exec(t))?nP(e[1],e[2],e[3],e[4]):(e=jG.exec(t))?nP(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$G.exec(t))?cP(e[1],e[2]/100,e[3]/100,1):(e=ZG.exec(t))?cP(e[1],e[2]/100,e[3]/100,e[4]):QG.hasOwnProperty(t)?rP(QG[t]):t==="transparent"?new oP(NaN,NaN,NaN,0):null}function rP(t){return new oP(t>>16&255,t>>8&255,t&255,1)}function nP(t,e,i,r){if(r<=0)t=e=i=NaN;return new oP(t,e,i,r)}function sP(t){if(!(t instanceof OG))t=iP(t);if(!t)return new oP;t=t.rgb();return new oP(t.r,t.g,t.b,t.opacity)}function aP(t,e,i,r){return arguments.length===1?sP(t):new oP(t,e,i,r==null?1:r)}function oP(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}GG(oP,aP,PG(OG,{brighter:function(t){t=t==null?RG:Math.pow(RG,t);return new oP(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?VG:Math.pow(VG,t);return new oP(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:lP,formatHex:lP,formatRgb:uP,toString:uP}));function lP(){return"#"+hP(this.r)+hP(this.g)+hP(this.b)}function uP(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function hP(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function cP(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new pP(t,e,i,r)}function dP(t){if(t instanceof pP)return new pP(t.h,t.s,t.l,t.opacity);if(!(t instanceof OG))t=iP(t);if(!t)return new pP;if(t instanceof pP)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new pP(a,o,l,t.opacity)}function fP(t,e,i,r){return arguments.length===1?dP(t):new pP(t,e,i,r==null?1:r)}function pP(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}GG(pP,fP,PG(OG,{brighter:function(t){t=t==null?RG:Math.pow(RG,t);return new pP(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?VG:Math.pow(VG,t);return new pP(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new oP(yP(t>=240?t-240:t+120,n,r),yP(t,n,r),yP(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function yP(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function vP(t){return function(){return t}}function gP(t,e){return function(i){return t+i*e}}function bP(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function mP(t){return(t=+t)===1?AP:function(e,i){return i-e?bP(e,i,t):vP(isNaN(e)?i:e)}}function AP(t,e){var i=e-t;return i?gP(t,i):vP(isNaN(t)?e:t)}var wP=function t(e){var i=mP(e);function r(t,e){var r=i((t=aP(t)).r,(e=aP(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=AP(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function xP(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function SP(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kP(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=IP(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function LP(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function _P(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function CP(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=IP(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var DP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,MP=new RegExp(DP.source,"g");function UP(t){return function(){return t}}function TP(t){return function(e){return t(e)+""}}function EP(t,e){var i=DP.lastIndex=MP.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=DP.exec(t))&&(n=MP.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:_P(r,n)})}i=MP.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?TP(l[0].x):UP(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function IP(t,e){var i=typeof e,r;return e==null||i==="boolean"?vP(e):(i==="number"?_P:i==="string"?(r=iP(e))?(e=r,wP):EP:e instanceof iP?wP:e instanceof Date?LP:SP(e)?xP:Array.isArray(e)?kP:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?CP:_P)(t,e)}function NP(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var WP=180/Math.PI;var HP={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function GP(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*WP,skewX:Math.atan(l)*WP,scaleX:a,scaleY:o}}var PP,OP,VP,RP;function YP(t){if(t==="none")return HP;if(!PP)PP=document.createElement("DIV"),OP=document.documentElement,VP=document.defaultView;PP.style.transform=t;t=VP.getComputedStyle(OP.appendChild(PP),null).getPropertyValue("transform");OP.removeChild(PP);t=t.slice(7,-1).split(",");return GP(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function zP(t){if(t==null)return HP;if(!RP)RP=document.createElementNS("http://www.w3.org/2000/svg","g");RP.setAttribute("transform",t);if(!(t=RP.transform.baseVal.consolidate()))return HP;t=t.matrix;return GP(t.a,t.b,t.c,t.d,t.e,t.f)}function FP(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:_P(t,n)},{i:l-2,x:_P(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:_P(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:_P(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:_P(t,i)},{i:o-2,x:_P(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var XP=FP(YP,"px, ","px)","deg)");var BP=FP(zP,", ",")",")");function KP(t){return function(){return t}}function qP(t){return+t}var jP=[0,1];function $P(t){return t}function ZP(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:KP(isNaN(e)?NaN:.5)}function QP(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function JP(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=ZP(n,r),s=i(a,s);else r=ZP(r,n),s=i(s,a);return function(t){return s(r(t))}}function tO(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=ZP(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=FH(t,e,1,r)-1;return s[i](n[i](e))}}function eO(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function iO(){var t=jP,e=jP,i=IP,r,n,s,a=$P,o,l,u;function h(){o=Math.min(t.length,e.length)>2?tO:JP;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),_P)))(i)))};c.domain=function(e){return arguments.length?(t=UG.call(e,qP),a===$P||(a=QP(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=TG.call(t),h()):e.slice()};c.rangeRound=function(t){return e=TG.call(t),i=NP,h()};c.clamp=function(e){return arguments.length?(a=e?QP(t):$P,c):a!==$P};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function rO(t,e){return iO()(t,e)}function nO(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function sO(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function aO(t){return t=sO(Math.abs(t)),t?t[1]:NaN}function oO(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function lO(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var uO=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hO(t){if(!(e=uO.exec(t)))throw new Error("invalid format: "+t);var e;return new cO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}hO.prototype=cO.prototype;function cO(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}cO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dO(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var fO;function pO(t,e){var i=sO(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(fO=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+sO(t,Math.max(0,e+s-1))[0]}function yO(t,e){var i=sO(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var vO={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:nO,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return yO(t*100,e)},r:yO,s:pO,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function gO(t){return t}var bO=Array.prototype.map,mO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function AO(t){var e=t.grouping===undefined||t.thousands===undefined?gO:oO(bO.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?gO:lO(bO.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=hO(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!vO[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=vO[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=dO(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?mO[8+fO/3]:"")+r+(k&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=hO(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(aO(e)/3)))*3,n=Math.pow(10,-r),s=mO[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var wO;var xO;var SO;kO({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function kO(t){wO=AO(t);xO=wO.format;SO=wO.formatPrefix;return wO}function LO(t){return Math.max(0,-aO(Math.abs(t)))}function _O(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(aO(e)/3)))*3-aO(Math.abs(t)))}function CO(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,aO(e)-aO(t))+1}function DO(t,e,i,r){var n=ZH(t,e,i),s;r=hO(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=_O(n,a)))r.precision=s;return SO(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=CO(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=LO(n)))r.precision=s-(r.type==="%")*2;break}}return xO(r)}function MO(t){var e=t.domain;t.ticks=function(t){var i=e();return jH(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return DO(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=$H(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=$H(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=$H(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function UO(){var t=rO($P,$P);t.copy=function(){return eO(t,UO())};AG.apply(t,arguments);return MO(t)}var TO=Math.PI,EO=2*TO,IO=1e-6,NO=EO-IO;function WO(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function HO(){return new WO}WO.prototype=HO.prototype={constructor:WO,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(t,e,i,r,n,s){this._+="C"+ +t+","+ +e+","+ +i+","+ +r+","+(this._x1=+n)+","+(this._y1=+s)},arcTo:function(t,e,i,r,n){t=+t,e=+e,i=+i,r=+r,n=+n;var s=this._x1,a=this._y1,o=i-t,l=r-e,u=s-t,h=a-e,c=u*u+h*h;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=e)}else if(!(c>IO));else if(!(Math.abs(h*o-l*u)>IO)||!n){this._+="L"+(this._x1=t)+","+(this._y1=e)}else{var d=i-s,f=r-a,p=o*o+l*l,y=d*d+f*f,v=Math.sqrt(p),g=Math.sqrt(c),b=n*Math.tan((TO-Math.acos((p+c-y)/(2*v*g)))/2),m=b/g,A=b/v;if(Math.abs(m-1)>IO){this._+="L"+(t+m*u)+","+(e+m*h)}this._+="A"+n+","+n+",0,0,"+ +(h*d>u*f)+","+(this._x1=t+A*o)+","+(this._y1=e+A*l)}},arc:function(t,e,i,r,n,s){t=+t,e=+e,i=+i,s=!!s;var a=i*Math.cos(r),o=i*Math.sin(r),l=t+a,u=e+o,h=1^s,c=s?r-n:n-r;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null){this._+="M"+l+","+u}else if(Math.abs(this._x1-l)>IO||Math.abs(this._y1-u)>IO){this._+="L"+l+","+u}if(!i)return;if(c<0)c=c%EO+EO;if(c>NO){this._+="A"+i+","+i+",0,1,"+h+","+(t-a)+","+(e-o)+"A"+i+","+i+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u)}else if(c>IO){this._+="A"+i+","+i+",0,"+ +(c>=TO)+","+h+","+(this._x1=t+i*Math.cos(n))+","+(this._y1=e+i*Math.sin(n))}},rect:function(t,e,i,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};function GO(t){return function e(){return t}}function PO(t){this._context=t}PO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function OO(t){return new PO(t)}function VO(t){return t[0]}function RO(t){return t[1]}function YO(){var t=VO,e=RO,i=GO(true),r=null,n=OO,s=null;function a(a){var o,l=a.length,u,h=false,c;if(r==null)s=n(c=HO());for(o=0;o<=l;++o){if(!(o<l&&i(u=a[o],o,a))===h){if(h=!h)s.lineStart();else s.lineEnd()}if(h)s.point(+t(u,o,a),+e(u,o,a))}if(c)return s=null,c+""||null}a.x=function(e){return arguments.length?(t=typeof e==="function"?e:GO(+e),a):t};a.y=function(t){return arguments.length?(e=typeof t==="function"?t:GO(+t),a):e};a.defined=function(t){return arguments.length?(i=typeof t==="function"?t:GO(!!t),a):i};a.curve=function(t){return arguments.length?(n=t,r!=null&&(s=n(r)),a):n};a.context=function(t){return arguments.length?(t==null?r=s=null:s=n(r=t),a):r};return a}var zO=s.propDefaultValues;var FO=function(){function t(){}return t}();FO.mainTitle="Parallel Plot Title";FO.subTitle="This is the parallel plot's subtitle";FO.height=300;FO.width=500;FO.margin={top:300*.01,bottom:300*.01,right:500*.01,left:500*.01};FO.padding={top:20,bottom:50,right:100,left:75};FO.ordinalAccessor="label";FO.valueAccessor="value";FO.seriesAccessor="series";FO.accessibility=zO.accessibility;FO.animationConfig=zO.animationConfig;FO.highestHeadingLevel=zO.highestHeadingLevel;FO.xAxis=zO.xAxis;FO.yAxis=zO.yAxis;FO.showBaselineX=zO.showBaselineFalse;FO.wrapLabel=zO.wrapLabel;FO.colorPalette=zO.colorPaletteCategorical;FO.hoverStyle=zO.hoverStyle;FO.clickStyle=zO.clickStyle;FO.referenceStyle=zO.referenceStyle;FO.strokeWidth=zO.strokeWidth1;FO.showDots=zO.showDots;FO.dotRadius=zO.dotRadius4;FO.hoverOpacity=zO.hoverOpacity;FO.cursor=zO.cursor;FO.dataLabel=zO.dataLabelBottomRight;FO.seriesLabel=zO.seriesLabel;FO.legend=zO.hiddenLegend;FO.tooltipLabel=zO.tooltipLabel;FO.secondaryLines=zO.secondaryLines;FO.showTooltip=zO.showTooltip;FO.suppressEvents=zO.suppressEvents;FO.referenceLines=zO.referenceLines;FO.annotations=zO.annotations;FO.clickHighlight=zO.clickHighlight;function XO(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function BO(t){return 1-Math.sqrt(1-t*t)}var KO={value:function(){}};function qO(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new jO(i)}function jO(t){this._=t}function $O(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}jO.prototype=qO.prototype={constructor:jO,on:function(t,e){var i=this._,r=$O(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=ZO(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=QO(i[n],t.name,e);else if(e==null)for(n in i)i[n]=QO(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new jO(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function ZO(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function QO(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=KO,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var JO=0,tV=0,eV=0,iV=1e3,rV,nV,sV=0,aV=0,oV=0,lV=typeof performance==="object"&&performance.now?performance:Date,uV=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function hV(){return aV||(uV(cV),aV=lV.now()+oV)}function cV(){aV=0}function dV(){this._call=this._time=this._next=null}dV.prototype=fV.prototype={constructor:dV,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?hV():+i)+(e==null?0:+e);if(!this._next&&nV!==this){if(nV)nV._next=this;else rV=this;nV=this}this._call=t;this._time=i;bV()},stop:function(){if(this._call){this._call=null;this._time=Infinity;bV()}}};function fV(t,e,i){var r=new dV;r.restart(t,e,i);return r}function pV(){hV();++JO;var t=rV,e;while(t){if((e=aV-t._time)>=0)t._call.call(null,e);t=t._next}--JO}function yV(){aV=(sV=lV.now())+oV;JO=tV=0;try{pV()}finally{JO=0;gV();aV=0}}function vV(){var t=lV.now(),e=t-sV;if(e>iV)oV-=e,sV=t}function gV(){var t,e=rV,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:rV=i}}nV=t;bV(r)}function bV(t){if(JO)return;if(tV)tV=clearTimeout(tV);var e=t-aV;if(e>24){if(t<Infinity)tV=setTimeout(yV,t-lV.now()-oV);if(eV)eV=clearInterval(eV)}else{if(!eV)sV=lV.now(),eV=setInterval(vV,iV);JO=1,uV(yV)}}function mV(t,e,i){var r=new dV;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var AV=qO("start","end","interrupt");var wV=[];var xV=0;var SV=1;var kV=2;var LV=3;var _V=4;var CV=5;var DV=6;function MV(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;IV(t,i,{name:e,index:r,group:n,on:AV,tween:wV,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:xV})}function UV(t,e){var i=EV(t,e);if(i.state>xV)throw new Error("too late; already scheduled");return i}function TV(t,e){var i=EV(t,e);if(i.state>kV)throw new Error("too late; already started");return i}function EV(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function IV(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=fV(s,0,i.time);function s(t){i.state=SV;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==SV)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===LV)return mV(a);if(d.state===_V){d.state=DV;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=DV;d.timer.stop();delete r[u]}}mV((function(){if(i.state===LV){i.state=_V;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=kV;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==kV)return;i.state=LV;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=CV,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===CV){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=DV;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function NV(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>kV&&r.state<CV;r.state=DV;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function WV(t){return this.each((function(){NV(this,t)}))}function HV(t,e){var i,r;return function(){var n=TV(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function GV(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=TV(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function PV(t,e){var i=this._id;t+="";if(arguments.length<2){var r=EV(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?HV:GV)(i,t,e))}function OV(t,e,i){var r=t._id;t.each((function(){var t=TV(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return EV(t,r).value[e]}}function VV(t,e){var i;return(typeof e==="number"?_P:e instanceof iP?wP:(i=iP(e))?(e=i,wP):EP)(t,e)}function RV(t){return function(){this.removeAttribute(t)}}function YV(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zV(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function FV(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function XV(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function BV(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function KV(t,e){var i=QN(t),r=i==="transform"?BP:VV;return this.attrTween(t,typeof e==="function"?(i.local?BV:XV)(i,r,OV(this,"attr."+t,e)):e==null?(i.local?YV:RV)(i):(i.local?FV:zV)(i,r,e+""))}function qV(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function jV(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function $V(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=QN(t);return this.tween(i,(r.local?qV:jV)(r,e))}function ZV(t,e){return function(){UV(this,t).delay=+e.apply(this,arguments)}}function QV(t,e){return e=+e,function(){UV(this,t).delay=e}}function JV(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?ZV:QV)(e,t)):EV(this.node(),e).delay}function tR(t,e){return function(){TV(this,t).duration=+e.apply(this,arguments)}}function eR(t,e){return e=+e,function(){TV(this,t).duration=e}}function iR(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?tR:eR)(e,t)):EV(this.node(),e).duration}function rR(t,e){if(typeof e!=="function")throw new Error;return function(){TV(this,t).ease=e}}function nR(t){var e=this._id;return arguments.length?this.each(rR(e,t)):EV(this.node(),e).ease}function sR(t){if(typeof t!=="function")t=lW(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new DR(r,this._parents,this._name,this._id)}function aR(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new DR(a,this._parents,this._name,this._id)}function oR(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function lR(t,e,i){var r,n,s=oR(e)?UV:TV;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function uR(t,e){var i=this._id;return arguments.length<2?EV(this.node(),i).on.on(t):this.each(lR(i,t,e))}function hR(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function cR(){return this.on("end.remove",hR(this._id))}function dR(t){var e=this._name,i=this._id;if(typeof t!=="function")t=rW(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;MV(u[d],e,i,d,u,EV(h,i))}}}return new DR(s,this._parents,e,i)}function fR(t){var e=this._name,i=this._id;if(typeof t!=="function")t=aW(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=EV(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){MV(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new DR(s,a,e,i)}var pR=PH.prototype.constructor;function yR(){return new pR(this._groups,this._parents)}function vR(t,e){var i,r,n;return function(){var s=YW(this,t),a=(this.style.removeProperty(t),YW(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function gR(t){return function(){this.style.removeProperty(t)}}function bR(t,e,i){var r,n;return function(){var s=YW(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function mR(t,e,i){var r,n,s;return function(){var a=YW(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),YW(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function AR(t,e,i){var r=(t+="")==="transform"?XP:VV;return e==null?this.styleTween(t,vR(t,r)).on("end.style."+t,gR(t)):this.styleTween(t,typeof e==="function"?mR(t,r,OV(this,"style."+t,e)):bR(t,r,e+""),i)}function wR(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function xR(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,wR(t,e,i==null?"":i))}function SR(t){return function(){this.textContent=t}}function kR(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function LR(t){return this.tween("text",typeof t==="function"?kR(OV(this,"text",t)):SR(t==null?"":t+""))}function _R(){var t=this._name,e=this._id,i=UR();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=EV(l,e);MV(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new DR(r,this._parents,t,i)}var CR=0;function DR(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function MR(t){return PH().transition(t)}function UR(){return++CR}var TR=PH.prototype;DR.prototype=MR.prototype={constructor:DR,select:dR,selectAll:fR,filter:sR,merge:aR,selection:yR,transition:_R,call:TR.call,nodes:TR.nodes,node:TR.node,size:TR.size,empty:TR.empty,each:TR.each,on:uR,attr:KV,attrTween:$V,style:AR,styleTween:xR,text:LR,remove:cR,tween:PV,delay:JV,duration:iR,ease:nR};var ER={time:null,delay:0,duration:250,ease:XO};function IR(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return ER.time=hV(),ER}}return i}function NR(t){var e,i;if(t instanceof DR){e=t._id,t=t._name}else{e=UR(),(i=ER).time=hV(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){MV(l,t,e,u,a,i||IR(l,e))}}}return new DR(r,this._parents,t,e)}PH.prototype.interrupt=WV;PH.prototype.transition=NR;var WR=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var HR=new Uint8Array(16);function GR(){if(!WR){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return WR(HR)}var PR=[];for(var OR=0;OR<256;++OR){PR[OR]=(OR+256).toString(16).substr(1)}function VR(t,e){var i=e||0;var r=PR;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function RR(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||GR)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||VR(n)}var YR=s.getAccessibleStrokes,zR=s.ensureTextContrast,FR=s.createTextStrokeFilter,XR=s.findTagLevel,BR=s.prepareRenderChange,KR=s.initializeDescriptionRoot,qR=s.initializeElementAccess,jR=s.setElementFocusHandler,$R=s.setElementAccessID,ZR=s.setAccessibilityController,QR=s.hideNonessentialGroups,JR=s.setAccessTitle,tY=s.setAccessSubtitle,eY=s.setAccessLongDescription,iY=s.setAccessExecutiveSummary,rY=s.setAccessPurpose,nY=s.setAccessContext,sY=s.setAccessStatistics,aY=s.setAccessChartCounts,oY=s.setAccessXAxis,lY=s.setAccessYAxis,uY=s.setAccessStructure,hY=s.setAccessAnnotation,cY=s.retainAccessFocus,dY=s.checkAccessFocus,fY=s.setElementInteractionAccessState,pY=s.setAccessibilityDescriptionWidth,yY=s.annotate,vY=s.chartAccessors,gY=s.checkInteraction,bY=s.checkClicked,mY=s.checkHovered,AY=s.convertVisaColor,wY=s.drawAxis,xY=s.drawGrid,SY=s.drawLegend,kY=s.setLegendInteractionState,LY=s.drawTooltip,_Y=s.formatDataLabel,CY=s.getColors,DY=s.getLicenses,MY=s.getPadding,UY=s.getScopedData,TY=s.initTooltipStyle,EY=s.overrideTitleTooltip,IY=s.placeDataLabels,NY=s.resolveLines,WY=s.scopeDataKeys,HY=s.transitionEndAll,GY=s.visaColors,PY=s.validateAccessibilityProps,OY=s.roundTo,VY=s.getTextWidth,RY=s.resolveLabelCollision;var YY=t("parallel_plot",function(){function t(t){var r=this;e(this,t);this.mainTitle=FO.mainTitle;this.subTitle=FO.subTitle;this.height=FO.height;this.width=FO.width;this.highestHeadingLevel=FO.highestHeadingLevel;this.margin=FO.margin;this.padding=FO.padding;this.ordinalAccessor=FO.ordinalAccessor;this.valueAccessor=FO.valueAccessor;this.seriesAccessor=FO.seriesAccessor;this.xAxis=FO.xAxis;this.yAxis=FO.yAxis;this.wrapLabel=FO.wrapLabel;this.showBaselineX=FO.showBaselineX;this.colorPalette=FO.colorPalette;this.hoverStyle=FO.hoverStyle;this.clickStyle=FO.clickStyle;this.referenceStyle=FO.referenceStyle;this.cursor=FO.cursor;this.hoverOpacity=FO.hoverOpacity;this.animationConfig=FO.animationConfig;this.strokeWidth=FO.strokeWidth;this.showDots=FO.showDots;this.dotRadius=FO.dotRadius;this.dataLabel=FO.dataLabel;this.showTooltip=FO.showTooltip;this.tooltipLabel=FO.tooltipLabel;this.accessibility=FO.accessibility;this.legend=FO.legend;this.annotations=FO.annotations;this.seriesLabel=FO.seriesLabel;this.referenceLines=FO.referenceLines;this.secondaryLines=FO.secondaryLines;this.suppressEvents=FO.suppressEvents;this.clickHighlight=FO.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.updated=true;this.enterSize=0;this.exitSize=0;this.time={timehour:lG,timeday:uG,timeweek:cG,timemonth:bG,timeyear:mG};this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateScales=false;this.shouldUpdateTableData=false;this.shouldUpdateLabels=false;this.shouldUpdateAnnotations=false;this.shouldDrawInteractionState=false;this.shouldSetSelectionClass=false;this.shouldUpdateCursor=false;this.shouldSetColors=false;this.shouldUpdateLines=false;this.shouldUpdatePoints=false;this.shouldUpdateLegend=false;this.shouldUpdateReferenceLines=false;this.shouldBindInteractivity=false;this.shouldUpdateLegendInteractivity=false;this.shouldResetRoot=false;this.shouldUpdateBaseline=false;this.shouldValidateInteractionKeys=false;this.shouldEnterUpdateExit=false;this.shouldSetGlobalSelections=false;this.shouldSetTestingAttributes=false;this.shouldSetLabelOpacity=false;this.shouldSetSeriesLabelOpacity=false;this.shouldSetLegendCursor=false;this.shouldAddStrokeUnder=false;this.shouldValidateSeriesLabels=false;this.shouldUpdateSeriesLabels=false;this.shouldUpdateColors=false;this.shouldUpdateStrokeWidth=false;this.shouldUpdateInterpolationData=false;this.shouldSetScaleUsed=false;this.shouldUpdateDotRadius=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldUpdateDashPatterns=false;this.shouldValidateDataLabelAccessor=false;this.topLevel="h2";this.bottomLevel="p";this.strokes={};this.b=",";this.short="2,2";this.med="4,2";this.long="8,2";this.dashPatterns=["",this.long,this.long+this.b+this.med,this.short+this.b+this.long+this.b+this.long,this.short+this.b+this.short+this.b+this.long];this.hiddenHash={};this.dynamicY=function(t){if(r.yAxis.scales==="individual"){return r.multiYScale[t[r.ordinalAccessor]].y(t[r.valueAccessor])}return r.y(t[r.valueAccessor])};this.interpolateDynamicY=function(t){if(r.yAxis.scales==="individual"){return r.interpolating.multiYScale[t[r.ordinalAccessor]].y(t[r.valueAccessor])}return r.interpolating.y(t[r.valueAccessor])};this.handleDotStroke=function(t,e,i){if(!r.accessibility.hideStrokes){var n=r.clickHighlight&&r.clickHighlight.length>0&&bY(t,r.clickHighlight,r.innerInteractionKeys);var s=r.hoverHighlight&&mY(t,r.hoverHighlight,r.innerInteractionKeys);var a=OH(i[e].parentNode).attr("fill");var o=n&&r.clickStyle.color?GY[r.clickStyle.color]||r.clickStyle.color:n?a:s&&r.hoverStyle.color?GY[r.hoverStyle.color]||r.hoverStyle.color:a;OH(i[e]).attr("stroke-width",r.calculateStrokeWidth(t));OH(i[e]).attr("fill",o);return r.strokes[o.toLowerCase()]}return null};this.handleLineStroke=function(t,e){var i=r.colorArr[e]||r.colorArr[0];var n=t.values[0];var s=bY(n,r.clickHighlight,r.innerInteractionKeys);var a=mY(n,r.hoverHighlight,r.innerInteractionKeys);return r.seriesInteraction?s&&r.clickStyle.color?r.strokes[(GY[r.clickStyle.color]||r.clickStyle.color).toLowerCase()]:s?i:a&&r.hoverStyle.color?r.strokes[(GY[r.hoverStyle.color]||r.hoverStyle.color).toLowerCase()]:i:i};this.handleSeriesTextFill=function(t,e){var i=r.rawColors[e]||r.rawColors[0];var n=t.values[0];var s=bY(n,r.clickHighlight,r.innerInteractionKeys);var a=mY(n,r.hoverHighlight,r.innerInteractionKeys);var o=r.seriesInteraction?s&&r.clickStyle.color?GY[r.clickStyle.color]||r.clickStyle.color:s?i:a&&r.hoverStyle.color?GY[r.hoverStyle.color]||r.hoverStyle.color:i:i;return r.textColors[o.toLowerCase()]};this.handleTextFill=function(t,e,i){var n=r.clickHighlight&&r.clickHighlight.length>0&&bY(t,r.clickHighlight,r.innerInteractionKeys);var s=r.hoverHighlight&&mY(t,r.hoverHighlight,r.innerInteractionKeys);var a=OH(i[e].parentNode).attr("fill");var o=n&&r.clickStyle.color?GY[r.clickStyle.color]||r.clickStyle.color:n?a:s&&r.hoverStyle.color?GY[r.hoverStyle.color]||r.hoverStyle.color:a;return r.textColors[o.toLowerCase()]};this.calculateStrokeWidth=function(t,e){var i=!e?t:t.values[0];return!e||r.seriesInteraction?bY(i,r.clickHighlight,r.innerInteractionKeys)?r.clickStyle.strokeWidth||r.strokeWidth:mY(i,r.hoverHighlight,r.innerInteractionKeys)?r.hoverStyle.strokeWidth||r.strokeWidth:!r.secondaryLines.keys.includes(i[r.seriesAccessor])?r.strokeWidth:1:!r.secondaryLines.keys.includes(i[r.seriesAccessor])?r.strokeWidth:1};this.handleStrokeDasharray=function(t,e){return r.secondaryLines.keys.includes(t.key)?r.short:!r.accessibility.hideTextures?r.dashPatterns[e]:""};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldUpdateDotRadius=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldValidate=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true};t.prototype.idWatcher=function(t,e){this.chartID=t;this.parallelChartEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldUpdateLegend=true;this.shouldAddStrokeUnder=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldResetRoot=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.seriesAccessorWatcher=function(t,e){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldValidate=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateTableData=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldUpdateLabels=true;this.shouldBindInteractivity=true;this.shouldUpdateCursor=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldUpdateTableData=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetGeometryAriaLabels=true;this.shouldUpdateStrokeWidth=true};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldSetGlobalSelections=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGlobalSelections=true};t.prototype.xAxisWatcher=function(t,e){this.shouldUpdateXAxis=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateXGrid=true}this.shouldSetXAxisAccessibility=true};t.prototype.yAxisWatcher=function(t,e){var i=t&&t.scales?t.scales:false;var r=e&&e.scales?e.scales:false;if(i!==r){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true}this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;var n=t&&t.gridVisible;var s=e&&e.gridVisible;var a=t&&t.tickInterval?t.tickInterval:0;var o=e&&e.tickInterval?e.tickInterval:0;if(n!==s||a!==o){this.shouldUpdateYGrid=true}};t.prototype.wrapLabelWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.showBaselineXWatcher=function(t,e){this.shouldUpdateBaseline=true};t.prototype.paletteWatcher=function(t,e){this.shouldSetColors=true;this.shouldUpdateColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldUpdateColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldSetColors=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldSetColors=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true};t.prototype.strokeWidthWatcher=function(t,e){this.shouldUpdateStrokeWidth=true};t.prototype.showDotsWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.dotRadiusWatcher=function(t,e){this.shouldUpdateDotRadius=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true};t.prototype.dataLabelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;var a=t&&t.labelAccessor?t.labelAccessor:false;var o=e&&e.labelAccessor?e.labelAccessor:false;if(i!==r){this.shouldSetLabelOpacity=true}if(n!==s){this.shouldUpdateSeriesLabels=true}if(a!==o){this.shouldValidateDataLabelAccessor=true}};t.prototype.seriesLabelWatcher=function(t,e){this.shouldUpdateSeriesLabels=true;this.shouldUpdateTableData=true;this.shouldValidateSeriesLabels=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetSeriesLabelOpacity=true}};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.showTooltipWatcher=function(t,e){};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.showSmallLabels?t.showSmallLabels:false;var w=e&&e.showSmallLabels?e.showSmallLabels:false;if(A!==w){this.shouldSetLabelOpacity=true}var x=t&&t.hideStrokes?t.hideStrokes:false;var S=e&&e.hideStrokes?e.hideStrokes:false;if(x!==S){this.shouldUpdateStrokeWidth=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true}var k=t&&t.hideTextures?t.hideTextures:false;var L=e&&e.hideTextures?e.hideTextures:false;if(k!==L){this.shouldUpdateDashPatterns=true;this.shouldUpdateLegend=true}var _=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var C=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var D=t&&t.elementsAreInterface?t.elementsAreInterface:false;var M=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(_!==C||D!==M){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(D!==M){this.shouldSetSelectionClass=true}};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.secondaryLinesWatcher=function(t,e){var i=t&&t.showDataLabel;var r=e&&e.showDataLabel;var n=t&&t.showSeriesLabel;var s=e&&e.showSeriesLabel;var a=t&&t.keys?t.keys:false;var o=e&&e.keys?e.keys:false;var l=t&&t.opacity?t.opacity:0;var u=e&&e.opacity?e.opacity:0;if(a!==o){this.shouldUpdateLines=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true}if(i!==r){this.shouldSetLabelOpacity=true}if(n!==s){this.shouldUpdateLabels=true}if(l!==u){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true}};t.prototype.clickWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true};t.prototype.hoverWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldBindInteractivity=true;this.shouldUpdateCursor=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"parallel-plot-"+RR();t.parallelChartEl.id=t.chartID;t.setTagLevels();t.setDimensions();t.setScaleUsed();t.prepareScales();t.prepareData();t.updateInterpolationData();t.validateInteractionKeys();t.validateSeriesLabels();t.validateDataLabelAccessor();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.renderChartRootElemets();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.drawXGrid();t.drawYGrid();t.setGlobalSelections();t.setTestingAttributes();t.drawXAxis();t.setXAxisAccessibility();t.enterYAxis();t.exitYAxis();t.drawYAxis();t.setYAxisAccessibility();t.enterChartLines();t.updateChartLines();t.exitChartLines();t.enterPoints();t.updatePoints();t.exitPoints();t.drawChartLines();t.drawPoints();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawLegendElements();t.drawDataLabels();t.drawSeriesLabels();t.addStrokeUnder();t.drawReferenceLines();t.setSelectedClass();t.updateInteractionState();t.setLabelOpacity();t.setSeriesLabelOpacity();t.updateCursor();t.bindInteractivity();t.setLegendCursor();t.bindLegendInteractivity();t.drawBaseline();t.drawAnnotations();t.setAnnotationAccessibility();QR(t.root.node(),t.dotG.node());t.setGroupAccessibilityID();t.onChangeHandler();t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldEnterUpdateExit){t.enterYAxis();t.exitYAxis();t.enterChartLines();t.updateChartLines();t.exitChartLines();t.enterPoints();t.updatePoints();t.exitPoints();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateLines){t.drawChartLines();t.shouldUpdateLines=false}if(t.shouldUpdatePoints){t.drawPoints();t.shouldUpdatePoints=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateColors){t.updateColors();t.shouldUpdateColors=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldUpdateSeriesLabels){t.drawSeriesLabels();t.shouldUpdateSeriesLabels=false}if(t.addStrokeUnder){t.addStrokeUnder();t.shouldAddStrokeUnder=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldUpdateStrokeWidth){t.updateStrokeWidth();t.shouldUpdateStrokeWidth=false}if(t.shouldUpdateDotRadius){t.updateDotRadius();t.shouldUpdateDotRadius=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldUpdateDashPatterns){t.updateStrokePattern();t.shouldUpdateDashPatterns=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldSetSeriesLabelOpacity){t.setSeriesLabelOpacity();t.shouldSetSeriesLabelOpacity=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateLegendInteractivity){t.bindLegendInteractivity();t.shouldUpdateLegendInteractivity=false}if(t.shouldSetLegendCursor){t.setLegendCursor();t.shouldSetLegendCursor=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateBaseline){t.drawBaseline();t.shouldUpdateBaseline=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;PY(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?MY(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.seriesAccessor];this.seriesInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.seriesAccessor};t.prototype.setColors=function(){var t=this;this.rawColors=this.colors?AY(this.colors):CY(this.colorPalette,this.nest.length);this.textColors={};var e=this.rawColors;this.strokes={};if(!this.accessibility.hideStrokes){e=[]}this.rawColors.forEach((function(i){if(!t.accessibility.hideStrokes){var r=YR(i);var n=r.length===2?r[1]:r[0];t.strokes[i.toLowerCase()]=n;e.push(n)}t.textColors[i.toLowerCase()]=zR(i,"#ffffff",4.5)}));if(this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){var i=YR(this.hoverStyle.color);var r=i.length===2?i[1]:i[0];this.strokes[this.hoverStyle.color.toLowerCase()]=r}this.textColors[this.hoverStyle.color.toLowerCase()]=zR(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){var i=YR(this.clickStyle.color);var r=i.length===2?i[1]:i[0];this.strokes[this.clickStyle.color.toLowerCase()]=r}this.textColors[this.clickStyle.color.toLowerCase()]=zR(this.clickStyle.color,"#ffffff",4.5)}this.colorArr=e};t.prototype.setTableData=function(){var t=WY(this,vY,"parallel-plot");this.tableData=UY(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareData=function(){var t=this;this.multiYScale={};this.data.map((function(e){var i=t.hiddenHash[e[t.ordinalAccessor]+"-"+(e[t.seriesAccessor]||"b")];if(i&&(t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly)&&!e["enter"]&&!e["exit"]){e["hidden"]=i["data-label-hidden"];e["auto-x"]=i.x;e["auto-y"]=i.y;e["auto-text-anchor"]=i["text-anchor"]}}));this.nest=kG().key((function(e){if(!t.multiYScale[e[t.ordinalAccessor]]){t.multiYScale[e[t.ordinalAccessor]]={min:Infinity,max:0}}if(t.multiYScale[e[t.ordinalAccessor]].min>e[t.valueAccessor]){t.multiYScale[e[t.ordinalAccessor]].min=e[t.valueAccessor]}if(t.multiYScale[e[t.ordinalAccessor]].max<e[t.valueAccessor]){t.multiYScale[e[t.ordinalAccessor]].max=e[t.valueAccessor]}return e[t.seriesAccessor]})).entries(this.data);this.map=kG().key((function(e){return e[t.seriesAccessor]})).map(this.data);var e=Object.keys(this.multiYScale);e.forEach((function(e){var i=t.multiYScale[e];var r=t.innerPaddedHeight*.05;i.y=UO().domain([t.minValueOverride||t.minValueOverride===0?t.minValueOverride:i.min,t.maxValueOverride||t.maxValueOverride===0?t.maxValueOverride:i.max]).range([t.innerPaddedHeight-r,0+r]);i.ticks=[i.y.invert(t.innerPaddedHeight),i.y.invert(0)]}))};t.prototype.updateInterpolationData=function(){var t=this;if(this.interpolating){var e=this.nest.length;this.nest.forEach((function(i){i.interpolate={};var r=t.interpolating.map.get(i.key);var n=i.values;if(!r){i.interpolate.start=n;i.interpolate.end=n}else{var s=NY(r,n,t.ordinalAccessor);if(!s.length){i.interpolate.start=r;i.interpolate.end=n;e--}else{i.interpolate.start=s[0];i.interpolate.end=s[1]}}}));if(!e&&this.nest.length===this.interpolating.length){this.interpolating=false}}};t.prototype.prepareScales=function(){var t=this;if(this.nest){this.interpolating=this.nest;var e=this.x.domain();var i=this.x.range();var r=this.y.domain();var n=this.y.range();this.interpolating.scales=this.scalesUsed;this.interpolating.multiYScale=Object.assign({},this.multiYScale);this.interpolating.x=this.x.domain(e).range(i);this.interpolating.y=UO().domain(r).range(n);this.interpolating.line=YO().x((function(e){return t.interpolating.x(e[t.ordinalAccessor])})).y((function(e){if(t.interpolating.scales==="individual"){return t.interpolating.multiYScale[e[t.ordinalAccessor]].y(e[t.valueAccessor])}return t.interpolating.y(e[t.valueAccessor])}));this.interpolating.map=this.map}this.extent={};this.extent.minValue=JH(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));this.extent.maxValue=QH(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));var s=0+this.innerPaddedHeight*.05;var a=this.innerPaddedHeight-this.innerPaddedHeight*.05;if(this.yAxis.scales==="preNormalized"){this.extent.minValue=0;this.extent.maxValue=1;s=0;a=this.innerPaddedHeight}this.extent.minValue=this.minValueOverride||this.minValueOverride===0?this.minValueOverride:this.extent.minValue;this.extent.maxValue=this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:this.extent.maxValue;s=this.minValueOverride||this.minValueOverride===0?this.minValueOverride:s;a=this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:a;this.y=UO().domain([this.extent.minValue,this.extent.maxValue]).range([a,s]);this.x=HG().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([0,this.innerPaddedWidth]);this.line=YO().x((function(e){return t.x(e[t.ordinalAccessor])})).y((function(e){if(t.yAxis.scales==="individual"){return t.multiYScale[e[t.ordinalAccessor]].y(e[t.valueAccessor])}return t.y(e[t.valueAccessor])}))};t.prototype.validateDataLabelAccessor=function(){this.innerLabelAccessor=this.dataLabel&&this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor};t.prototype.validateSeriesLabels=function(){this.labelDetails=Object.assign({},this.seriesLabel);if(!this.labelDetails.placement){this.labelDetails.placement=""}if(!this.labelDetails.label||!this.labelDetails.label.length){this.labelDetails.label=""}this.isRight=this.labelDetails.placement!=="left"};t.prototype.setScaleUsed=function(){this.scalesUsed=this.yAxis.scales};t.prototype.renderRootElements=function(){this.svg=OH(this.parallelChartEl).select(".visa-viz-d3-parallel-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","grid-group");this.references=this.rootG.append("g").attr("class","parallel-reference-line-group")};t.prototype.renderChartRootElemets=function(){this.yGroup=this.rootG.append("g").attr("class","y-scales-group");this.parallelLineG=this.rootG.append("g").attr("class","parallel-group parallel-line-group");this.dotG=this.rootG.append("g").attr("class","parallel-group");this.seriesLabelG=this.rootG.append("g").attr("class","parallel-series-wrapper");this.labels=this.rootG.append("g").attr("class","parallel-dataLabel-group");this.legendG=OH(this.parallelChartEl).select(".parallel-legend").append("svg");this.tooltipG=OH(this.parallelChartEl).select(".parallel-tooltip");this.setTooltipInitialStyle()};t.prototype.reSetRoot=function(){var t=BR({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:BO});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=BR({selection:this.root,duration:this.duration,namespace:"root_reset",easing:BO});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=BR({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:BO});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");pY(this.chartID,this.width)};t.prototype.setGlobalSelections=function(){var t=this;var e=Object.keys(this.multiYScale);var i=this.yGroup.selectAll(".y-wrapper").data(e,(function(t){return t}));this.yEnter=i.enter().append("g");this.yExit=i.exit();this.yUpdate=i.merge(this.yEnter);var r=this.parallelLineG.selectAll(".parallel-plot").data(this.nest,(function(t){return t.key}));this.enterLines=r.enter().append("path");this.exitLines=r.exit();this.updateLines=r.merge(this.enterLines);this.enterSize=this.enterLines.size();var n=this.dotG.selectAll(".parallel-dot-wrapper").data(this.nest,(function(t){return t.key}));this.enterDotWrappers=n.enter().append("g");this.exitDotWrappers=n.exit();this.updateDotWrappers=n.merge(this.enterDotWrappers);var s=this.seriesLabelG.selectAll(".parallel-series-label").data(this.nest,(function(t){return t.key}));this.seriesLabelEnter=s.enter().append("text");this.seriesLabelExit=s.exit();this.seriesLabelUpdate=s.merge(this.seriesLabelEnter);var a=this.labels.selectAll("g").data(this.nest,(function(t){return t.key}));this.enteringLabelGroups=a.enter().append("g");this.exitingLabelGroups=a.exit();this.updatingLabelGroups=a.merge(this.enteringLabelGroups);if(this.interpolating){this.updateDotWrappers.selectAll("circle").remove();var o=this.updateDotWrappers.selectAll("circle").data((function(t){return t.interpolate.start}));this.enterDots=o.enter().append("circle");this.exitDots=o.exit();this.updateDots=o.merge(this.enterDots);this.updatingLabelGroups.selectAll(".parallel-dataLabel").remove();var l=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((function(t){return t.interpolate.start}));this.enteringLabels=l.enter().append("text");this.updatingLabels=l.merge(this.enteringLabels)}else{var o=this.updateDotWrappers.selectAll("circle").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enterDots=o.enter().append("circle");this.exitDots=o.exit();this.updateDots=o.merge(this.enterDots);this.enterSize=this.enterDots.size();this.exitSize=this.exitDots.size();var l=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enteringLabels=l.enter().append("text");this.exitingLabels=l.exit();this.updatingLabels=l.merge(this.enteringLabels)}};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){OH(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid","chart-container");OH(this.parallelChartEl).select(".parallel-main-title").attr("data-testid","main-title");OH(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.gridG.attr("data-testid","grid-group");this.references.attr("data-testid","reference-line-group");this.yGroup.attr("data-testid","y-scales-group");this.yUpdate.attr("data-testid","y-scale-wrapper");this.parallelLineG.attr("data-testid","parallel-line-group");this.updateLines.attr("data-testid","parallel-line").attr("data-id",(function(t){return"parallel-line-"+t.key}));this.seriesLabelG.attr("data-testid","parallel-series-label-container");this.seriesLabelUpdate.attr("data-testid","parallel-series-label").attr("data-id",(function(t){return"parallel-series-label-"+t.key}));this.dotG.attr("data-testid","marker-group");this.updateDotWrappers.attr("data-testid","marker-series-group").attr("data-id",(function(t){return"marker-series-"+t.key}));this.updateDots.attr("data-testid","marker").attr("data-id",(function(e){return"marker-"+e[t.seriesAccessor]+"-"+e[t.ordinalAccessor]}));this.labels.attr("data-testid","dataLabel-group-container");this.updatingLabelGroups.attr("data-testid","dataLabel-group").attr("data-id",(function(t){return"dataLabel-group-"+t.key}));this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",(function(e){return"dataLabel-"+e[t.seriesAccessor]+"-"+e[t.ordinalAccessor]}));this.svg.select("defs").attr("data-testid","pattern-defs")}else{OH(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid",null);OH(this.parallelChartEl).select(".parallel-main-title").attr("data-testid",null);OH(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.gridG.attr("data-testid",null);this.references.attr("data-testid",null);this.yGroup.attr("data-testid",null);this.yUpdate.attr("data-testid",null);this.parallelLineG.attr("data-testid",null);this.updateLines.attr("data-testid",null).attr("data-id",null);this.seriesLabelG.attr("data-testid",null);this.seriesLabelUpdate.attr("data-testid",null).attr("data-id",null);this.dotG.attr("data-testid",null);this.updateDotWrappers.attr("data-testid",null).attr("data-id",null);this.updateDots.attr("data-testid",null).attr("data-id",null);this.labels.attr("data-testid",null);this.updatingLabelGroups.attr("data-testid",null).attr("data-id",null);this.updatingLabels.attr("data-testid",null).attr("data-id",null);this.svg.select("defs").attr("data-testid",null)}};t.prototype.drawXAxis=function(){var t=this.innerPaddedWidth/this.nest[0].values.length*.7;wY({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel?t:"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration,hidePath:true})};t.prototype.enterYAxis=function(){var t=this;this.yEnter.attr("class","y-wrapper").attr("transform",(function(e){return"translate("+t.x(e)+",0)"})).attr("opacity",0)};t.prototype.exitYAxis=function(){this.yExit.transition("exit").duration(this.duration).ease(BO).attr("opacity",0).remove()};t.prototype.drawYAxis=function(){var t=this;this.yUpdate.each((function(e,i,r){var n=t.yAxis.scales==="individual"?t.multiYScale[e].ticks:!t.yAxis.onlyTickExtents?t.yAxis.onlyTickExtents:[t.extent.minValue,t.extent.maxValue];var s=t.multiYScale[e].y.domain();var a=s[0]===s[1]?true:i===0||t.yAxis.scales==="individual"?!t.yAxis.visible:true;wY({root:OH(r[i]),height:t.innerPaddedHeight,width:t.innerPaddedWidth,axisScale:t.yAxis.scales==="individual"?t.multiYScale[e].y:t.y,left:true,wrapLabel:t.wrapLabel?t.padding.left:"",format:t.yAxis.format,tickInterval:n?1:t.yAxis.tickInterval,label:t.yAxis.scales==="individual"||a?"":t.yAxis.label,padding:t.padding,hide:a,hidePath:true,duration:t.duration,ticks:n})})).transition("update").duration(this.duration).ease(BO).attr("transform",(function(e){return"translate("+t.x(e)+",0)"})).attr("opacity",1)};t.prototype.setXAxisAccessibility=function(){oY({rootEle:this.parallelChartEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x?this.x:false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){lY({rootEle:this.parallelChartEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y?this.y:false,yAxisLabel:this.yAxis.label?this.yAxis.label:"",xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.drawBaseline=function(){wY({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0),hide:!this.showBaselineX,duration:this.duration})};t.prototype.drawXGrid=function(){xY(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,false,this.xAxis.tickInterval,this.duration)};t.prototype.drawYGrid=function(){xY(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)};t.prototype.enterChartLines=function(){var t=this;this.enterLines.interrupt();this.enterLines.attr("class","parallel-plot entering").attr("d",(function(e){return t.line(e.values)})).attr("data-d",(function(e){return t.line(e.values)})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top);this.enterLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("stroke-dasharray",(function(t,e,i){t.linelength=i[e].getTotalLength();return t.linelength+" "+t.linelength})).attr("stroke",this.handleLineStroke).attr("fill","none").attr("stroke-width",.1)};t.prototype.updateChartLines=function(){var t=this;this.updateLines.interrupt();this.updateLines.transition().duration(this.duration).ease(BO).attr("stroke-dashoffset",0).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e,true)})).call(HY,(function(){t.updateLines.attr("stroke-dasharray",t.handleStrokeDasharray)}));this.updateLines.transition("opacity").ease(BO).duration(this.duration).attr("opacity",(function(e){var i=t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1;if(!t.seriesInteraction){return i}else if(t.secondaryLines.keys.includes(e.key)){return gY(e.values[0],t.secondaryLines.opacity,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}else{return gY(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}}))};t.prototype.exitChartLines=function(){this.exitLines.interrupt();this.exitLines.attr("stroke-dasharray",(function(t,e,i){t.linelength=i[e].getTotalLength();return t.linelength+" "+t.linelength})).transition("exit").ease(BO).duration(this.duration).attr("opacity",0).attr("stroke-dashoffset",(function(t){return t.linelength})).attr("stroke-width",.1).remove()};t.prototype.drawChartLines=function(){var t=this;if(this.interpolating){this.updateLines.attr("d",(function(e,i,r){if(OH(r[i]).classed("entering")){return t.line(e.values)}return t.interpolating.line(e.interpolate.start)}))}this.updateLines.attr("stroke-width",(function(e){return t.calculateStrokeWidth(e,true)})).attr("stroke-dashoffset",(function(t){return t.linelength})).attr("data-d",(function(e){return t.interpolating?t.line(e.interpolate.end):t.line(e.values)})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(BO).duration(this.duration).attr("d",(function(e){return t.interpolating?t.line(e.interpolate.end):t.line(e.values)})).call(HY,(function(){t.updateLines.classed("entering",false).attr("data-d",(function(e){return t.line(e.values)})).attr("d",(function(e){return t.line(e.values)})).attr("stroke-dasharray",t.handleStrokeDasharray)}))};t.prototype.enterPoints=function(){var t=this;this.enterDots.interrupt();this.enterDotWrappers.attr("class","parallel-dot-wrapper").attr("opacity",0).attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]})).each((function(t,e,i){qR(i[e])}));this.enterDots.each((function(t,e,i){qR(i[e])})).attr("stroke",this.handleDotStroke).attr("cursor",!this.suppressEvents?this.cursor:null).attr("data-fill",true).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);if(this.interpolating){this.enterDots.attr("cx",(function(e){return t.interpolating.x(e[t.ordinalAccessor])})).attr("cy",this.interpolateDynamicY).attr("r",(function(e){return e.enter?0:bY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):mY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e)}));this.enterDotWrappers.selectAll("circle").attr("r",0).attr("cx",(function(e){return t.x(e[t.ordinalAccessor])})).attr("cy",this.dynamicY).attr("opacity",0)}this.updateDotWrappers.order();this.updateDots.order()};t.prototype.updatePoints=function(){var t=this;this.updateDots.interrupt();var e=this.showDots?1:0;this.updateDots.attr("tabindex",(function(t,e){return e===0?"0":"-1"}));this.updateDotWrappers.attr("opacity",(function(i){var r=t.secondaryLines.keys.includes(i.key)?t.secondaryLines.opacity:e;return r}));if(this.interpolating){this.updateDots.attr("opacity",(function(e){t.exitSize+=e.exit?1:0;t.enterSize+=e.enter?1:0;return e.enter?0:1}));this.updateDots=this.updateDotWrappers.selectAll("circle").data((function(t){return t.interpolate.end})).classed("exiting",(function(t){return t.exit}));this.enterDotWrappers.selectAll("circle").each((function(t){t.enterWholeGroup=true}));this.updateDots.transition("opacity").ease(BO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0})).attr("opacity",(function(i){return gY(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}else{this.updateDots.transition("opacity").ease(BO).duration(this.duration).attr("opacity",(function(i){return gY(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}};t.prototype.exitPoints=function(){var t=this;this.exitDots.interrupt();this.exitDots.transition("exit").ease(BO).duration(this.duration).attr("opacity",0).attr("r",0);this.exitDotWrappers.selectAll("circle").each((function(t){t.exitWholeGroup=true})).transition("exit").ease(BO).duration(this.duration/2).delay((function(e,i,r){return t.duration-t.duration*(i/(r.length-1))})).attr("opacity",0).attr("r",0);this.updateDots.transition("accessibilityAfterExit").duration(this.duration/2).delay((function(e,i,r){return t.duration-t.duration*(i/(r.length-1))})).ease(BO).call(HY,(function(){var e=dY(t.rootG.node());t.exitDots.remove();t.exitDotWrappers.remove();t.svg.selectAll(".exiting").remove();t.updateDots=t.updateDotWrappers.selectAll("circle");t.updatingLabels=t.updatingLabelGroups.selectAll(".parallel-dataLabel");t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();cY({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawPoints=function(){var t=this;var e;if(this.interpolating){e=this.updateDots.attr("data-cx",(function(e){return t.x(e[t.ordinalAccessor])})).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",(function(e){return e.exit?0:bY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):mY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).transition("update").ease(BO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0})).attr("r",(function(e){return e.exit?0:bY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):mY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e)}))}else{e=this.updateDots.attr("data-cx",(function(e){return t.x(e[t.ordinalAccessor])})).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",(function(e){return bY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):mY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).attr("r",(function(e){return bY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):mY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e)})).transition("update").ease(BO).duration(this.duration)}this.updateDots.attr("stroke",this.handleDotStroke);e.attr("cx",(function(e){return t.x(e[t.ordinalAccessor])})).attr("cy",this.dynamicY).call(HY,(function(){t.updateDots.each((function(t){t.enterWholeGroup=false;t.enter=false}));cY({parentGNode:t.rootG.node()})}))};t.prototype.enterSeriesLabels=function(){var t=this;this.seriesLabelEnter.interrupt();this.seriesLabelEnter.attr("class","parallel-series-label").attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onSeriesHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("fill",this.handleSeriesTextFill).attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(function(e){if(t.yAxis.scales==="individual"){return t.isRight?t.multiYScale[e.values[e.values.length-1][t.ordinalAccessor]].y(e.values[e.values.length-1][t.valueAccessor]):t.multiYScale[e.values[0][t.ordinalAccessor]].y(e.values[0][t.valueAccessor])}return t.isRight?t.y(e.values[e.values.length-1][t.valueAccessor]):t.y(e.values[0][t.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.1em").attr("text-anchor",this.isRight?"start":"end").attr("opacity",0)};t.prototype.updateSeriesLabels=function(){var t=this;this.seriesLabelUpdate.interrupt();this.seriesLabelUpdate.transition("opacity").ease(BO).duration(this.duration).attr("opacity",(function(e){var i=!t.seriesLabel.visible?0:t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1;if(!t.seriesInteraction){return i}else if(t.secondaryLines.keys.includes(e.key)){return gY(e.values[0],i,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}else{return gY(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}}))};t.prototype.exitSeriesLabels=function(){this.seriesLabelExit.interrupt();this.seriesLabelExit.transition("update").ease(BO).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawSeriesLabels=function(){var t=this;var e=this.labelDetails.placement!=="auto"&&this.labelDetails.collisionHideOnly;var i=this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill).text((function(e,i){return t.secondaryLines.keys.includes(e.key)&&!t.secondaryLines.showSeriesLabel?"":t.labelDetails.label?t.labelDetails.label[i]:e.key})).style("visibility",(function(e,i,r){return t.labelDetails.placement==="auto"||t.labelDetails.collisionHideOnly?OH(r[i]).style("visibility"):null})).attr("data-x",this.isRight?this.innerPaddedWidth+10:0).attr("data-y",(function(e,i,r){var n=r[i];var s=getComputedStyle(n);var a=parseFloat(s.fontSize);var o=Math.max(a-1,1);if(t.yAxis.scales==="individual"){return t.isRight?t.multiYScale[e.values[e.values.length-1][t.ordinalAccessor]].y(e.values[e.values.length-1][t.valueAccessor]):t.multiYScale[e.values[0][t.ordinalAccessor]].y(e.values[0][t.valueAccessor])}return t.isRight?t.y(e.values[e.values.length-1][t.valueAccessor])+.4*o:t.y(e.values[0][t.valueAccessor])+.4*o})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.1em").attr("data-use-dx",e).attr("data-use-dy",e).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-text-anchor",this.isRight?"start":"end").transition("update").ease(BO).duration(this.duration);if(this.labelDetails.visible&&(this.labelDetails.placement==="auto"||this.labelDetails.collisionHideOnly)){this.bitmaps=RY({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[this.updateDots],validPositions:e?["middle"]:["middle","top","bottom"],offsets:e?[1]:[1,4,4],accessors:["key"],size:[OY(this.width,0),OY(this.height,0)],hideOnly:this.labelDetails.visible&&e});if(e){i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(function(e){if(t.yAxis.scales==="individual"){return t.isRight?t.multiYScale[e.values[e.values.length-1][t.ordinalAccessor]].y(e.values[e.values.length-1][t.valueAccessor]):t.multiYScale[e.values[0][t.ordinalAccessor]].y(e.values[0][t.valueAccessor])}return t.isRight?t.y(e.values[e.values.length-1][t.valueAccessor]):t.y(e.values[0][t.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.1em")}}else{i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(function(e){if(t.yAxis.scales==="individual"){return t.isRight?t.multiYScale[e.values[e.values.length-1][t.ordinalAccessor]].y(e.values[e.values.length-1][t.valueAccessor]):t.multiYScale[e.values[0][t.ordinalAccessor]].y(e.values[0][t.valueAccessor])}return t.isRight?t.y(e.values[e.values.length-1][t.valueAccessor]):t.y(e.values[0][t.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.1em")}};t.prototype.enterDataLabels=function(){var t=this;this.enteringLabels.interrupt();this.enteringLabelGroups.attr("class","parallel-label-wrapper").attr("opacity",0).attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]}));this.enteringLabels.attr("opacity",0).attr("fill",this.handleTextFill).attr("class","parallel-dataLabel").attr("cursor",!this.suppressEvents?this.cursor:null).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);if(this.interpolating){var e=this.enteringLabels.attr("class","parallel-dataLabel").attr("opacity",0);IY({root:e,xScale:this.interpolating.x,yScale:this.interpolateDynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"});this.updatingLabels.attr("opacity",(function(t){return t.enter?0:1}));var i=this.enteringLabelGroups.selectAll(".parallel-dataLabel").attr("opacity",0);IY({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}else{var e=this.enteringLabels.attr("opacity",0).attr("class","parallel-dataLabel");IY({root:e,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}if(this.dataLabel.placement==="auto"){this.updatingLabels.each((function(t,e,i){if(!t.enter&&!t.exit&&!t.hidden&&(t["auto-x"]||t["auto-x"]===0)&&(t["auto-y"]||t["auto-y"]===0)){OH(i[e]).attr("x",+OH(i[e]).attr("x")+(+t["auto-x"]||0)).attr("y",+OH(i[e]).attr("y")+(+t["auto-y"]||0)).attr("text-anchor",t["auto-text-anchor"])}}))}};t.prototype.updateDataLabels=function(){var t=this;this.updatingLabelGroups.interrupt();this.updatingLabelGroups.attr("opacity",(function(e){var i=!t.dataLabel.visible?0:t.secondaryLines.keys.includes(e.key)&&t.secondaryLines.showDataLabel?t.secondaryLines.opacity:t.secondaryLines.keys.includes(e.key)&&!t.secondaryLines.showDataLabel?0:1;return i}));if(this.interpolating){this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((function(t){return t.interpolate.end})).classed("exiting",(function(t){return t.exit}));this.enteringLabelGroups.each((function(t){return t.enterWholeGroup=true}));this.updatingLabels.transition("opacity").ease(BO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0})).attr("opacity",(function(e,i,r){var n=e.exit?0:gY(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1;var s=+OH(r[i].parentNode).attr("opacity");OH(r[i]).attr("data-hidden",s===0||n===0?"true":null);return n}))}else{this.updatingLabels.attr("opacity",(function(e,i,r){var n=e.exit?0:gY(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1;var s=+OH(r[i].parentNode).attr("opacity");OH(r[i]).attr("data-hidden",s===0||n===0?"true":null);return n}))}};t.prototype.exitDataLabels=function(){var t=this;this.exitingLabels.interrupt();this.exitingLabels.transition("exit").ease(BO).duration(this.duration).attr("opacity",0).remove();this.exitingLabelGroups.selectAll(".parallel-dataLabel").transition("exit").ease(BO).duration(this.duration/2).delay((function(e,i,r){return t.duration-t.duration*(i/(r.length-1))})).attr("opacity",0).call(HY,(function(){t.exitingLabelGroups.remove()}))};t.prototype.drawDataLabels=function(){var t=this;var e=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;var i=this.updatingLabels.text((function(e){return _Y(e,t.innerLabelAccessor,t.dataLabel.format)}));if(this.interpolating){i=this.updatingLabels.style("visibility",(function(e,i,r){return t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly?e.hidden?"hidden":OH(r[i]).style("visibility"):null})).attr("data-x",(function(e){return t.interpolating.x(e[t.ordinalAccessor])})).attr("data-y",this.interpolateDynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(BO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0}))}else{i=this.updatingLabels.style("visibility",(function(e,i,r){return t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly?e.hidden?"hidden":OH(r[i]).style("visibility"):null})).attr("data-x",(function(e){return t.x(e[t.ordinalAccessor])})).attr("data-y",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(BO).duration(this.duration)}var r=this.gridG.selectAll("line").attr("data-y2",this.innerPaddedHeight).attr("data-y1",0).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-x1",(function(e){return t.x(e)})).attr("data-x2",(function(e){return t.x(e)}));var n=this.yUpdate.selectAll(".y.axis").filter((function(t,e,i){return+OH(i[e]).attr("opacity")>=1e-4})).selectAll("text").attr("data-fill",true).attr("data-y",(function(e){return t.y(e)})).attr("data-width",(function(e,i,r){var n=r[i];var s=getComputedStyle(n);var a=parseFloat(s.fontSize);var o=Math.max(a-1,1);var l=VY(n.textContent,a,true,s.fontFamily);OH(n).attr("data-x",+OH(n).attr("x")).attr("data-translate-x",t.margin.left+t.padding.left-l).attr("data-translate-y",t.margin.top+t.padding.top-o/2).attr("data-height",o);return l}));var s={all:{validPositions:["top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:[3,2,4,4,1,1,1,1]},top:{validPositions:["top","top-left","top-right"],offsets:[3,1,1]},middle:{validPositions:["left","right"],offsets:[4,4]},bottom:{validPositions:["bottom","bottom-left","bottom-right"],offsets:[2,1,1]},right:{validPositions:["right","top-right","bottom-right"],offsets:[4,1,1]},left:{validPositions:["left","top-left","bottom-left"],offsets:[4,1,1]}};var a=this.dataLabel&&this.dataLabel.collisionPlacement;var o=e?["middle"]:a&&s[a]?s[a].validPositions:s["all"].validPositions;var l=e?[1]:a&&s[a]?s[a].offsets:s["all"].offsets;this.bitmaps=IY({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",labelSelection:i,avoidMarks:[n,r,this.updateLines,this.updateDots],validPositions:o,offsets:l,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[OY(this.width,0),OY(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}});i.call(HY,(function(){t.hiddenHash={};t.updatingLabels.each((function(e,i,r){t.hiddenHash[e[t.ordinalAccessor]+"-"+(e[t.seriesAccessor]||"b")]={"data-label-hidden":OH(r[i]).attr("data-label-hidden")==="true",x:+OH(r[i]).attr("x")-+OH(r[i]).attr("data-x"),y:+OH(r[i]).attr("y")-+OH(r[i]).attr("data-y"),"text-anchor":OH(r[i]).attr("text-anchor")}}))}))};t.prototype.updateInteractionState=function(){var t=this;this.updateLines.interrupt("opacity");this.updateLines.attr("opacity",(function(e){var i=t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1;if(!t.seriesInteraction){return i}else if(t.secondaryLines.keys.includes(e.key)){return gY(e.values[0],t.secondaryLines.opacity,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}else{return gY(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}}));var e=this.showDots?1:0;this.updateDotWrappers.attr("opacity",(function(i){var r=t.secondaryLines.keys.includes(i.key)?t.secondaryLines.opacity:e;return r}));this.updateDots.each((function(i,r,n){if(!i.enter&&!i.enterWholeGroup&&!i.exit&&!i.exitWholeGroup){OH(n[r]).attr("opacity",(function(){return gY(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}}));cY({parentGNode:this.rootG.node()});kY({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.setSeriesLabelOpacity=function(){var t=this;this.seriesLabelUpdate.each((function(e,i,r){var n=OH(r[i]);if(!n.classed("entering")){n.attr("opacity",(function(){var s=(!t.seriesLabel.visible?0:t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1)<1?0:1;var a=+OH(r[i].parentNode).attr("opacity");n.attr("data-hidden",a===0||s===0?"true":null);if(!t.seriesInteraction){OH(r[i]).attr("data-hidden",s===0?"true":null);return s}else if(t.secondaryLines.keys.includes(e.key)){var o=gY(e.values[0],s,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1;OH(r[i]).attr("data-hidden",o===0?"true":null);return o}else{var o=gY(e.values[0],s,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1;OH(r[i]).attr("data-hidden",o===0?"true":null);return o}}))}}))};t.prototype.setLabelOpacity=function(){var t=this;this.updatingLabelGroups.attr("opacity",(function(e){return(!t.dataLabel.visible?0:t.secondaryLines.keys.includes(e.key)&&t.secondaryLines.showDataLabel?t.secondaryLines.opacity:t.secondaryLines.keys.includes(e.key)&&!t.secondaryLines.showDataLabel?0:1)<1?0:1}));this.updatingLabels.each((function(e,i,r){if(!e.enter&&!e.enterWholeGroup&&!e.exit&&!e.exitWholeGroup){OH(r[i]).attr("opacity",(function(){var n=gY(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1;var s=+OH(r[i].parentNode).attr("opacity");OH(r[i]).attr("data-hidden",s===0||n===0?"true":null);return n}))}}))};t.prototype.bindInteractivity=function(){var t=this;this.updateLines.on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateDots.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.seriesLabelUpdate.on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onSeriesHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updatingLabels.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.addStrokeUnder=function(){var t=FR({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.labels.attr("filter",t);this.seriesLabelG.attr("filter",t)};t.prototype.updateColors=function(){var t=this;this.updateDotWrappers.attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]}));this.updateDots.attr("stroke",this.handleDotStroke);this.updateLines.attr("stroke",this.handleLineStroke);this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill);this.updatingLabelGroups.attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]}));this.updatingLabels.attr("fill",this.handleTextFill)};t.prototype.updateCursor=function(){this.updateLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null);this.updateDots.attr("cursor",!this.suppressEvents?this.cursor:null);this.seriesLabelUpdate.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null);this.updatingLabels.attr("cursor",!this.suppressEvents?this.cursor:null)};t.prototype.drawReferenceLines=function(){var t=this;var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class",".parallel-reference").attr("opacity",1);var r=i.append("line");r.attr("class","line-reference-line").attr("opacity",0);var n=i.append("text");n.attr("class","parallel-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".parallel-reference-line").data((function(t){return[t]})).transition("merge").ease(BO).duration(this.duration);var o=s.selectAll(".parallel-reference-line-label").data((function(t){return[t]})).transition("merge").ease(BO).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(BO).duration(this.duration).attr("opacity",0).remove();i.attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));s.transition("merge").ease(BO).duration(this.duration).attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.style("stroke",GY[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",GY[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.updateStrokeWidth=function(){var t=this;this.updateLines.attr("stroke-width",(function(e){return t.calculateStrokeWidth(e,true)}));this.updateDots.attr("stroke",this.handleDotStroke)};t.prototype.updateStrokePattern=function(){this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)};t.prototype.updateDotRadius=function(){var t=this;this.updateDots.each((function(e,i,r){var n=OH(r[i]);if(!e.enter&&!e.enterWholeGroup&&!n.classed("entering")&&!e.exit){n.attr("r",(function(){return bY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):mY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2}))}})).attr("stroke",this.handleDotStroke)};t.prototype.setSelectedClass=function(){var t=this;this.updateDots.classed("highlight",(function(e,i,r){var n=gY(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;fY(r[i],n,s);return n}))};t.prototype.drawAnnotations=function(){yY({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.ordinalAccessor,yScale:this.y,yAccessor:this.valueAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})};t.prototype.setAnnotationAccessibility=function(){hY(this.parallelChartEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=XR(this.highestHeadingLevel);this.bottomLevel=XR(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){KR({rootEle:this.parallelChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"parallel-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){ZR({node:this.svg.node(),chartTag:"parallel-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:WY(this,vY,"parallel-plot"),groupAccessor:this.seriesAccessor,groupName:"line",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.updateDots.each((function(t,e,i){qR(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=WY(this,vY,"parallel-plot");this.updateDots.each((function(i,r,n){jR({node:n[r],geomType:"point",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"line",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});$R({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateDotWrappers.each((function(e,i,r){$R({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){JR(this.parallelChartEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){tY(this.parallelChartEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){eY(this.parallelChartEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){iY(this.parallelChartEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){rY(this.parallelChartEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){nY(this.parallelChartEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){sY(this.parallelChartEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){aY({rootEle:this.parallelChartEl,parentGNode:this.dotG.node(),chartTag:"parallel-plot",geomType:"point",groupName:"line"})};t.prototype.setChartAccessibilityStructureNotes=function(){uY(this.parallelChartEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.interpolating=false;this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){EY(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&t[this.ordinalAccessor]){this.eventsTooltip({data:t,evt:kH,isToShow:true})}};t.prototype.onSeriesHoverHandler=function(t){this.hoverFunc.emit(t)};t.prototype.onMouseOutHandler=function(){EY(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){TY(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;LY({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,chartType:"parallel"})};t.prototype.bindLegendInteractivity=function(){var t=this;OH(this.parallelChartEl).selectAll(".legend").on("click",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?function(e){if(e.values){t.hoverFunc.emit(e.values[0])}}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive?function(){return t.onMouseOutHandler()}:null)};t.prototype.setLegendCursor=function(){OH(this.parallelChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?this.cursor:null)};t.prototype.drawLegendElements=function(){SY({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,dashPatterns:!this.accessibility.hideTextures?this.dashPatterns:null,margin:this.margin,padding:this.padding,duration:this.duration,type:"parallel",secondary:this.secondaryLines.keys,fontSize:16,data:this.nest,label:this.legend.labels,hide:!(this.legend.visible||!this.legend),interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldSetScaleUsed){this.setScaleUsed();this.shouldSetScaleUsed=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateInterpolationData){this.updateInterpolationData();this.shouldUpdateInterpolationData=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldValidateSeriesLabels){this.validateSeriesLabels();this.shouldValidateSeriesLabels=false}return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"parallel-main-title vcl-main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions parallel-sub-title vcl-sub-title"},this.subTitle),r("div",{class:"parallel-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"point",groupName:"line",chartTag:"parallel-plot",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-parallel-container"}),r("div",{class:"parallel-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))};t.prototype.init=function(){var t=Object.keys(FO);var e=0;var i={wrapLabel:{exception:false},strokeWidth:{exception:0},showDots:{exception:false},hoverOpacity:{exception:0},dotRadius:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:false}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:FO[t[e]]}};Object.defineProperty(t.prototype,"parallelChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],seriesAccessor:["seriesAccessorWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],showBaselineX:["showBaselineXWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],showDots:["showDotsWatcher"],dotRadius:["dotRadiusWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],secondaryLines:["secondaryLinesWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}parallel-plot{cursor:default}parallel-plot .annotations{pointer-events:none}parallel-plot .annotations .handle{pointer-events:all}parallel-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}parallel-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}parallel-plot .hidden{display:none}parallel-plot .axis{font-size:12px}parallel-plot .axis text{fill:#767676}parallel-plot .axis-label{text-anchor:middle;font:1rem sans-serif}parallel-plot .axis path{stroke:#767676}parallel-plot .grid line{stroke:#767676;shape-rendering:crispEdges}parallel-plot .grid path{stroke-width:0;stroke:#767676}parallel-plot .grid.left line{stroke-dasharray:4, 4;stroke-opacity:0.6}parallel-plot .parallel-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}parallel-plot .parallel-group__inactive{opacity:0}parallel-plot .parallel-group .parallel-plot{fill:none}parallel-plot .parallel-group .dot{stroke:#ffffff}parallel-plot .parallel-group .parallel-series-label{font-size:1em}parallel-plot .parallel-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}parallel-plot .parallel-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=DY();var zY="http://www.w3.org/1999/xhtml";var FY={svg:"http://www.w3.org/2000/svg",xhtml:zY,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function XY(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return FY.hasOwnProperty(e)?{space:FY[e],local:t}:t}function BY(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===zY&&e.documentElement.namespaceURI===zY?e.createElement(t):e.createElementNS(i,t)}}function KY(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function qY(t){var e=XY(t);return(e.local?KY:BY)(e)}function jY(){}function $Y(t){return t==null?jY:function(){return this.querySelector(t)}}function ZY(t){if(typeof t!=="function")t=$Y(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new UF(r,this._parents)}function QY(){return[]}function JY(t){return t==null?QY:function(){return this.querySelectorAll(t)}}function tz(t){if(typeof t!=="function")t=JY(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new UF(r,n)}function ez(t){return function(){return this.matches(t)}}function iz(t){if(typeof t!=="function")t=ez(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new UF(r,this._parents)}function rz(t){return new Array(t.length)}function nz(){return new UF(this._enter||this._groups.map(rz),this._parents)}function sz(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}sz.prototype={constructor:sz,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function az(t){return function(){return t}}var oz="$";function lz(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new sz(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function uz(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=oz+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=oz+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new sz(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function hz(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?uz:lz,r=this._parents,n=this._groups;if(typeof t!=="function")t=az(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new UF(a,r);a._enter=o;a._exit=l;return a}function cz(){return new UF(this._exit||this._groups.map(rz),this._parents)}function dz(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function fz(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new UF(a,this._parents)}function pz(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function yz(t){if(!t)t=vz;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new UF(n,this._parents).order()}function vz(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function gz(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function bz(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function mz(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function Az(){var t=0;this.each((function(){++t}));return t}function wz(){return!this.node()}function xz(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function Sz(t){return function(){this.removeAttribute(t)}}function kz(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Lz(t,e){return function(){this.setAttribute(t,e)}}function _z(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Cz(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function Dz(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function Mz(t,e){var i=XY(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?kz:Sz:typeof e==="function"?i.local?Dz:Cz:i.local?_z:Lz)(i,e))}function Uz(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Tz(t){return function(){this.style.removeProperty(t)}}function Ez(t,e,i){return function(){this.style.setProperty(t,e,i)}}function Iz(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function Nz(t,e,i){return arguments.length>1?this.each((e==null?Tz:typeof e==="function"?Iz:Ez)(t,e,i==null?"":i)):Wz(this.node(),t)}function Wz(t,e){return t.style.getPropertyValue(e)||Uz(t).getComputedStyle(t,null).getPropertyValue(e)}function Hz(t){return function(){delete this[t]}}function Gz(t,e){return function(){this[t]=e}}function Pz(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function Oz(t,e){return arguments.length>1?this.each((e==null?Hz:typeof e==="function"?Pz:Gz)(t,e)):this.node()[t]}function Vz(t){return t.trim().split(/^|\s+/)}function Rz(t){return t.classList||new Yz(t)}function Yz(t){this._node=t;this._names=Vz(t.getAttribute("class")||"")}Yz.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function zz(t,e){var i=Rz(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function Fz(t,e){var i=Rz(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function Xz(t){return function(){zz(this,t)}}function Bz(t){return function(){Fz(this,t)}}function Kz(t,e){return function(){(e.apply(this,arguments)?zz:Fz)(this,t)}}function qz(t,e){var i=Vz(t+"");if(arguments.length<2){var r=Rz(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?Kz:e?Xz:Bz)(i,e))}function jz(){this.textContent=""}function $z(t){return function(){this.textContent=t}}function Zz(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Qz(t){return arguments.length?this.each(t==null?jz:(typeof t==="function"?Zz:$z)(t)):this.node().textContent}function Jz(){this.innerHTML=""}function tF(t){return function(){this.innerHTML=t}}function eF(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function iF(t){return arguments.length?this.each(t==null?Jz:(typeof t==="function"?eF:tF)(t)):this.node().innerHTML}function rF(){if(this.nextSibling)this.parentNode.appendChild(this)}function nF(){return this.each(rF)}function sF(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aF(){return this.each(sF)}function oF(t){var e=typeof t==="function"?t:qY(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function lF(){return null}function uF(t,e){var i=typeof t==="function"?t:qY(t),r=e==null?lF:typeof e==="function"?e:$Y(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function hF(){var t=this.parentNode;if(t)t.removeChild(this)}function cF(){return this.each(hF)}function dF(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fF(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pF(t){return this.select(t?fF:dF)}function yF(t){return arguments.length?this.property("__data__",t):this.node().__data__}var vF={};var gF=null;if(typeof document!=="undefined"){var bF=document.documentElement;if(!("onmouseenter"in bF)){vF={mouseenter:"mouseover",mouseleave:"mouseout"}}}function mF(t,e,i){t=AF(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function AF(t,e,i){return function(r){var n=gF;gF=r;try{t.call(this,this.__data__,e,i)}finally{gF=n}}}function wF(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function xF(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function SF(t,e,i){var r=vF.hasOwnProperty(t.type)?mF:AF;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function kF(t,e,i){var r=wF(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?SF:xF;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function LF(t,e,i){var r=Uz(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function _F(t,e){return function(){return LF(this,t,e)}}function CF(t,e){return function(){return LF(this,t,e.apply(this,arguments))}}function DF(t,e){return this.each((typeof e==="function"?CF:_F)(t,e))}var MF=[null];function UF(t,e){this._groups=t;this._parents=e}function TF(){return new UF([[document.documentElement]],MF)}UF.prototype=TF.prototype={constructor:UF,select:ZY,selectAll:tz,filter:iz,data:hz,enter:nz,exit:cz,join:dz,merge:fz,order:pz,sort:yz,call:gz,nodes:bz,node:mz,size:Az,empty:wz,each:xz,attr:Mz,style:Nz,property:Oz,classed:qz,text:Qz,html:iF,raise:nF,lower:aF,append:oF,insert:uF,remove:cF,clone:pF,datum:yF,on:kF,dispatch:DF};function EF(t){return typeof t==="string"?new UF([[document.querySelector(t)]],[document.documentElement]):new UF([[t]],MF)}function IF(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function NF(t){if(t.length===1)t=WF(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function WF(t){return function(e,i){return IF(t(e),i)}}var HF=NF(IF);var GF=HF.right;function PF(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var OF=Math.sqrt(50),VF=Math.sqrt(10),RF=Math.sqrt(2);function YF(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=zF(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function zF(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=OF?10:s>=VF?5:s>=RF?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=OF?10:s>=VF?5:s>=RF?2:1)}function FF(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=OF)n*=10;else if(s>=VF)n*=5;else if(s>=RF)n*=2;return e<t?-n:n}function XF(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function BF(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function KF(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var qF="$";function jF(){}jF.prototype=$F.prototype={constructor:jF,has:function(t){return qF+t in this},get:function(t){return this[qF+t]},set:function(t,e){this[qF+t]=e;return this},remove:function(t){var e=qF+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===qF)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===qF)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===qF)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===qF)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===qF)++t;return t},empty:function(){for(var t in this)if(t[0]===qF)return false;return true},each:function(t){for(var e in this)if(e[0]===qF)t(this[e],e.slice(1),this)}};function $F(t,e){var i=new jF;if(t instanceof jF)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}var ZF=Array.prototype;var QF=ZF.map;var JF=ZF.slice;var tX={name:"implicit"};function eX(){var t=$F(),e=[],i=[],r=tX;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==tX)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=$F();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=JF.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return eX(e,i).unknown(r)};KF.apply(n,arguments);return n}function iX(){var t=eX().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=PF(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return iX(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return KF.apply(h(),arguments)}function rX(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function nX(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function sX(){}var aX=.7;var oX=1/aX;var lX="\\s*([+-]?\\d+)\\s*",uX="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",hX="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cX=/^#([0-9a-f]{3,8})$/,dX=new RegExp("^rgb\\("+[lX,lX,lX]+"\\)$"),fX=new RegExp("^rgb\\("+[hX,hX,hX]+"\\)$"),pX=new RegExp("^rgba\\("+[lX,lX,lX,uX]+"\\)$"),yX=new RegExp("^rgba\\("+[hX,hX,hX,uX]+"\\)$"),vX=new RegExp("^hsl\\("+[uX,hX,hX]+"\\)$"),gX=new RegExp("^hsla\\("+[uX,hX,hX,uX]+"\\)$");var bX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rX(sX,xX,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:mX,formatHex:mX,formatHsl:AX,formatRgb:wX,toString:wX});function mX(){return this.rgb().formatHex()}function AX(){return EX(this).formatHsl()}function wX(){return this.rgb().formatRgb()}function xX(t){var e,i;t=(t+"").trim().toLowerCase();return(e=cX.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?SX(e):i===3?new CX(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?kX(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?kX(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=dX.exec(t))?new CX(e[1],e[2],e[3],1):(e=fX.exec(t))?new CX(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=pX.exec(t))?kX(e[1],e[2],e[3],e[4]):(e=yX.exec(t))?kX(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vX.exec(t))?TX(e[1],e[2]/100,e[3]/100,1):(e=gX.exec(t))?TX(e[1],e[2]/100,e[3]/100,e[4]):bX.hasOwnProperty(t)?SX(bX[t]):t==="transparent"?new CX(NaN,NaN,NaN,0):null}function SX(t){return new CX(t>>16&255,t>>8&255,t&255,1)}function kX(t,e,i,r){if(r<=0)t=e=i=NaN;return new CX(t,e,i,r)}function LX(t){if(!(t instanceof sX))t=xX(t);if(!t)return new CX;t=t.rgb();return new CX(t.r,t.g,t.b,t.opacity)}function _X(t,e,i,r){return arguments.length===1?LX(t):new CX(t,e,i,r==null?1:r)}function CX(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}rX(CX,_X,nX(sX,{brighter:function(t){t=t==null?oX:Math.pow(oX,t);return new CX(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?aX:Math.pow(aX,t);return new CX(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:DX,formatHex:DX,formatRgb:MX,toString:MX}));function DX(){return"#"+UX(this.r)+UX(this.g)+UX(this.b)}function MX(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function UX(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function TX(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new NX(t,e,i,r)}function EX(t){if(t instanceof NX)return new NX(t.h,t.s,t.l,t.opacity);if(!(t instanceof sX))t=xX(t);if(!t)return new NX;if(t instanceof NX)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new NX(a,o,l,t.opacity)}function IX(t,e,i,r){return arguments.length===1?EX(t):new NX(t,e,i,r==null?1:r)}function NX(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}rX(NX,IX,nX(sX,{brighter:function(t){t=t==null?oX:Math.pow(oX,t);return new NX(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?aX:Math.pow(aX,t);return new NX(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new CX(WX(t>=240?t-240:t+120,n,r),WX(t,n,r),WX(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function WX(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function HX(t){return function(){return t}}function GX(t,e){return function(i){return t+i*e}}function PX(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function OX(t){return(t=+t)===1?VX:function(e,i){return i-e?PX(e,i,t):HX(isNaN(e)?i:e)}}function VX(t,e){var i=e-t;return i?GX(t,i):HX(isNaN(t)?e:t)}var RX=function t(e){var i=OX(e);function r(t,e){var r=i((t=_X(t)).r,(e=_X(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=VX(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function YX(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function zX(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function FX(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=JX(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function XX(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function BX(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function KX(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=JX(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var qX=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jX=new RegExp(qX.source,"g");function $X(t){return function(){return t}}function ZX(t){return function(e){return t(e)+""}}function QX(t,e){var i=qX.lastIndex=jX.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=qX.exec(t))&&(n=jX.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:BX(r,n)})}i=jX.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?ZX(l[0].x):$X(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function JX(t,e){var i=typeof e,r;return e==null||i==="boolean"?HX(e):(i==="number"?BX:i==="string"?(r=xX(e))?(e=r,RX):QX:e instanceof xX?RX:e instanceof Date?XX:zX(e)?YX:Array.isArray(e)?FX:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?KX:BX)(t,e)}function tB(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var eB=180/Math.PI;var iB={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rB(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*eB,skewX:Math.atan(l)*eB,scaleX:a,scaleY:o}}var nB,sB,aB,oB;function lB(t){if(t==="none")return iB;if(!nB)nB=document.createElement("DIV"),sB=document.documentElement,aB=document.defaultView;nB.style.transform=t;t=aB.getComputedStyle(sB.appendChild(nB),null).getPropertyValue("transform");sB.removeChild(nB);t=t.slice(7,-1).split(",");return rB(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function uB(t){if(t==null)return iB;if(!oB)oB=document.createElementNS("http://www.w3.org/2000/svg","g");oB.setAttribute("transform",t);if(!(t=oB.transform.baseVal.consolidate()))return iB;t=t.matrix;return rB(t.a,t.b,t.c,t.d,t.e,t.f)}function hB(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:BX(t,n)},{i:l-2,x:BX(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:BX(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:BX(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:BX(t,i)},{i:o-2,x:BX(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var cB=hB(lB,"px, ","px)","deg)");var dB=hB(uB,", ",")",")");function fB(t){return function(){return t}}function pB(t){return+t}var yB=[0,1];function vB(t){return t}function gB(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:fB(isNaN(e)?NaN:.5)}function bB(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function mB(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=gB(n,r),s=i(a,s);else r=gB(r,n),s=i(s,a);return function(t){return s(r(t))}}function AB(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=gB(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=GF(t,e,1,r)-1;return s[i](n[i](e))}}function wB(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function xB(){var t=yB,e=yB,i=JX,r,n,s,a=vB,o,l,u;function h(){o=Math.min(t.length,e.length)>2?AB:mB;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),BX)))(i)))};c.domain=function(e){return arguments.length?(t=QF.call(e,pB),a===vB||(a=bB(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=JF.call(t),h()):e.slice()};c.rangeRound=function(t){return e=JF.call(t),i=tB,h()};c.clamp=function(e){return arguments.length?(a=e?bB(t):vB,c):a!==vB};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function SB(t,e){return xB()(t,e)}function kB(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function LB(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function _B(t){return t=LB(Math.abs(t)),t?t[1]:NaN}function CB(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function DB(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var MB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function UB(t){if(!(e=MB.exec(t)))throw new Error("invalid format: "+t);var e;return new TB({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}UB.prototype=TB.prototype;function TB(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}TB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function EB(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var IB;function NB(t,e){var i=LB(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(IB=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+LB(t,Math.max(0,e+s-1))[0]}function WB(t,e){var i=LB(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var HB={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:kB,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return WB(t*100,e)},r:WB,s:NB,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function GB(t){return t}var PB=Array.prototype.map,OB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function VB(t){var e=t.grouping===undefined||t.thousands===undefined?GB:CB(PB.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?GB:DB(PB.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=UB(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!HB[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=HB[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=EB(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?OB[8+IB/3]:"")+r+(k&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=UB(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(_B(e)/3)))*3,n=Math.pow(10,-r),s=OB[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var RB;var YB;var zB;FB({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function FB(t){RB=VB(t);YB=RB.format;zB=RB.formatPrefix;return RB}function XB(t){return Math.max(0,-_B(Math.abs(t)))}function BB(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_B(e)/3)))*3-_B(Math.abs(t)))}function KB(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,_B(e)-_B(t))+1}function qB(t,e,i,r){var n=FF(t,e,i),s;r=UB(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=BB(n,a)))r.precision=s;return zB(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=KB(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=XB(n)))r.precision=s-(r.type==="%")*2;break}}return YB(r)}function jB(t){var e=t.domain;t.ticks=function(t){var i=e();return YF(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return qB(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=zF(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=zF(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=zF(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function $B(){var t=SB(vB,vB);t.copy=function(){return wB(t,$B())};KF.apply(t,arguments);return jB(t)}var ZB=Math.PI,QB=2*ZB,JB=1e-6,tK=QB-JB;function eK(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function iK(){return new eK}eK.prototype=iK.prototype={constructor:eK,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(t,e,i,r,n,s){this._+="C"+ +t+","+ +e+","+ +i+","+ +r+","+(this._x1=+n)+","+(this._y1=+s)},arcTo:function(t,e,i,r,n){t=+t,e=+e,i=+i,r=+r,n=+n;var s=this._x1,a=this._y1,o=i-t,l=r-e,u=s-t,h=a-e,c=u*u+h*h;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=e)}else if(!(c>JB));else if(!(Math.abs(h*o-l*u)>JB)||!n){this._+="L"+(this._x1=t)+","+(this._y1=e)}else{var d=i-s,f=r-a,p=o*o+l*l,y=d*d+f*f,v=Math.sqrt(p),g=Math.sqrt(c),b=n*Math.tan((ZB-Math.acos((p+c-y)/(2*v*g)))/2),m=b/g,A=b/v;if(Math.abs(m-1)>JB){this._+="L"+(t+m*u)+","+(e+m*h)}this._+="A"+n+","+n+",0,0,"+ +(h*d>u*f)+","+(this._x1=t+A*o)+","+(this._y1=e+A*l)}},arc:function(t,e,i,r,n,s){t=+t,e=+e,i=+i,s=!!s;var a=i*Math.cos(r),o=i*Math.sin(r),l=t+a,u=e+o,h=1^s,c=s?r-n:n-r;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null){this._+="M"+l+","+u}else if(Math.abs(this._x1-l)>JB||Math.abs(this._y1-u)>JB){this._+="L"+l+","+u}if(!i)return;if(c<0)c=c%QB+QB;if(c>tK){this._+="A"+i+","+i+",0,1,"+h+","+(t-a)+","+(e-o)+"A"+i+","+i+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u)}else if(c>JB){this._+="A"+i+","+i+",0,"+ +(c>=ZB)+","+h+","+(this._x1=t+i*Math.cos(n))+","+(this._y1=e+i*Math.sin(n))}},rect:function(t,e,i,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};function rK(t){return function e(){return t}}function nK(t){this._context=t}nK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function sK(t){return new nK(t)}function aK(t){return t[0]}function oK(t){return t[1]}function lK(){var t=aK,e=oK,i=rK(true),r=null,n=sK,s=null;function a(a){var o,l=a.length,u,h=false,c;if(r==null)s=n(c=iK());for(o=0;o<=l;++o){if(!(o<l&&i(u=a[o],o,a))===h){if(h=!h)s.lineStart();else s.lineEnd()}if(h)s.point(+t(u,o,a),+e(u,o,a))}if(c)return s=null,c+""||null}a.x=function(e){return arguments.length?(t=typeof e==="function"?e:rK(+e),a):t};a.y=function(t){return arguments.length?(e=typeof t==="function"?t:rK(+t),a):e};a.defined=function(t){return arguments.length?(i=typeof t==="function"?t:rK(!!t),a):i};a.curve=function(t){return arguments.length?(n=t,r!=null&&(s=n(r)),a):n};a.context=function(t){return arguments.length?(t==null?r=s=null:s=n(r=t),a):r};return a}var uK=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var hK=new Uint8Array(16);function cK(){if(!uK){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return uK(hK)}var dK=[];for(var fK=0;fK<256;++fK){dK[fK]=(fK+256).toString(16).substr(1)}function pK(t,e){var i=e||0;var r=dK;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function yK(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||cK)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||pK(n)}var vK={value:function(){}};function gK(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new bK(i)}function bK(t){this._=t}function mK(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}bK.prototype=gK.prototype={constructor:bK,on:function(t,e){var i=this._,r=mK(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=AK(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=wK(i[n],t.name,e);else if(e==null)for(n in i)i[n]=wK(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new bK(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function AK(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function wK(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=vK,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var xK=0,SK=0,kK=0,LK=1e3,_K,CK,DK=0,MK=0,UK=0,TK=typeof performance==="object"&&performance.now?performance:Date,EK=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function IK(){return MK||(EK(NK),MK=TK.now()+UK)}function NK(){MK=0}function WK(){this._call=this._time=this._next=null}WK.prototype=HK.prototype={constructor:WK,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?IK():+i)+(e==null?0:+e);if(!this._next&&CK!==this){if(CK)CK._next=this;else _K=this;CK=this}this._call=t;this._time=i;RK()},stop:function(){if(this._call){this._call=null;this._time=Infinity;RK()}}};function HK(t,e,i){var r=new WK;r.restart(t,e,i);return r}function GK(){IK();++xK;var t=_K,e;while(t){if((e=MK-t._time)>=0)t._call.call(null,e);t=t._next}--xK}function PK(){MK=(DK=TK.now())+UK;xK=SK=0;try{GK()}finally{xK=0;VK();MK=0}}function OK(){var t=TK.now(),e=t-DK;if(e>LK)UK-=e,DK=t}function VK(){var t,e=_K,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:_K=i}}CK=t;RK(r)}function RK(t){if(xK)return;if(SK)SK=clearTimeout(SK);var e=t-MK;if(e>24){if(t<Infinity)SK=setTimeout(PK,t-TK.now()-UK);if(kK)kK=clearInterval(kK)}else{if(!kK)DK=TK.now(),kK=setInterval(OK,LK);xK=1,EK(PK)}}function YK(t,e,i){var r=new WK;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var zK=gK("start","end","interrupt");var FK=[];var XK=0;var BK=1;var KK=2;var qK=3;var jK=4;var $K=5;var ZK=6;function QK(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;iq(t,i,{name:e,index:r,group:n,on:zK,tween:FK,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:XK})}function JK(t,e){var i=eq(t,e);if(i.state>XK)throw new Error("too late; already scheduled");return i}function tq(t,e){var i=eq(t,e);if(i.state>KK)throw new Error("too late; already started");return i}function eq(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function iq(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=HK(s,0,i.time);function s(t){i.state=BK;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==BK)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===qK)return YK(a);if(d.state===jK){d.state=ZK;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=ZK;d.timer.stop();delete r[u]}}YK((function(){if(i.state===qK){i.state=jK;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=KK;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==KK)return;i.state=qK;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=$K,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===$K){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=ZK;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function rq(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>KK&&r.state<$K;r.state=ZK;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function nq(t){return this.each((function(){rq(this,t)}))}function sq(t,e){var i,r;return function(){var n=tq(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function aq(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=tq(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function oq(t,e){var i=this._id;t+="";if(arguments.length<2){var r=eq(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?sq:aq)(i,t,e))}function lq(t,e,i){var r=t._id;t.each((function(){var t=tq(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return eq(t,r).value[e]}}function uq(t,e){var i;return(typeof e==="number"?BX:e instanceof xX?RX:(i=xX(e))?(e=i,RX):QX)(t,e)}function hq(t){return function(){this.removeAttribute(t)}}function cq(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dq(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function fq(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function pq(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function yq(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function vq(t,e){var i=XY(t),r=i==="transform"?dB:uq;return this.attrTween(t,typeof e==="function"?(i.local?yq:pq)(i,r,lq(this,"attr."+t,e)):e==null?(i.local?cq:hq)(i):(i.local?fq:dq)(i,r,e+""))}function gq(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function bq(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function mq(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=XY(t);return this.tween(i,(r.local?gq:bq)(r,e))}function Aq(t,e){return function(){JK(this,t).delay=+e.apply(this,arguments)}}function wq(t,e){return e=+e,function(){JK(this,t).delay=e}}function xq(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Aq:wq)(e,t)):eq(this.node(),e).delay}function Sq(t,e){return function(){tq(this,t).duration=+e.apply(this,arguments)}}function kq(t,e){return e=+e,function(){tq(this,t).duration=e}}function Lq(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Sq:kq)(e,t)):eq(this.node(),e).duration}function _q(t,e){if(typeof e!=="function")throw new Error;return function(){tq(this,t).ease=e}}function Cq(t){var e=this._id;return arguments.length?this.each(_q(e,t)):eq(this.node(),e).ease}function Dq(t){if(typeof t!=="function")t=ez(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new Zq(r,this._parents,this._name,this._id)}function Mq(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new Zq(a,this._parents,this._name,this._id)}function Uq(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function Tq(t,e,i){var r,n,s=Uq(e)?JK:tq;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function Eq(t,e){var i=this._id;return arguments.length<2?eq(this.node(),i).on.on(t):this.each(Tq(i,t,e))}function Iq(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function Nq(){return this.on("end.remove",Iq(this._id))}function Wq(t){var e=this._name,i=this._id;if(typeof t!=="function")t=$Y(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;QK(u[d],e,i,d,u,eq(h,i))}}}return new Zq(s,this._parents,e,i)}function Hq(t){var e=this._name,i=this._id;if(typeof t!=="function")t=JY(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=eq(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){QK(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new Zq(s,a,e,i)}var Gq=TF.prototype.constructor;function Pq(){return new Gq(this._groups,this._parents)}function Oq(t,e){var i,r,n;return function(){var s=Wz(this,t),a=(this.style.removeProperty(t),Wz(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function Vq(t){return function(){this.style.removeProperty(t)}}function Rq(t,e,i){var r,n;return function(){var s=Wz(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function Yq(t,e,i){var r,n,s;return function(){var a=Wz(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),Wz(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function zq(t,e,i){var r=(t+="")==="transform"?cB:uq;return e==null?this.styleTween(t,Oq(t,r)).on("end.style."+t,Vq(t)):this.styleTween(t,typeof e==="function"?Yq(t,r,lq(this,"style."+t,e)):Rq(t,r,e+""),i)}function Fq(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function Xq(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,Fq(t,e,i==null?"":i))}function Bq(t){return function(){this.textContent=t}}function Kq(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function qq(t){return this.tween("text",typeof t==="function"?Kq(lq(this,"text",t)):Bq(t==null?"":t+""))}function jq(){var t=this._name,e=this._id,i=Jq();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=eq(l,e);QK(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new Zq(r,this._parents,t,i)}var $q=0;function Zq(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function Qq(t){return TF().transition(t)}function Jq(){return++$q}var tj=TF.prototype;Zq.prototype=Qq.prototype={constructor:Zq,select:Wq,selectAll:Hq,filter:Dq,merge:Mq,selection:Pq,transition:jq,call:tj.call,nodes:tj.nodes,node:tj.node,size:tj.size,empty:tj.empty,each:tj.each,on:Eq,attr:vq,attrTween:mq,style:zq,styleTween:Xq,text:qq,remove:Nq,tween:oq,delay:xq,duration:Lq,ease:Cq};function ej(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ij={time:null,delay:0,duration:250,ease:ej};function rj(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return ij.time=IK(),ij}}return i}function nj(t){var e,i;if(t instanceof Zq){e=t._id,t=t._name}else{e=Jq(),(i=ij).time=IK(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){QK(l,t,e,u,a,i||rj(l,e))}}}return new Zq(r,this._parents,t,e)}TF.prototype.interrupt=nq;TF.prototype.transition=nj;var sj=s.initTooltipStyle,aj=s.drawAxis,oj=s.drawGrid,lj=s.drawTooltip,uj=s.formatStats,hj=s.getLicenses,cj=s.checkInteraction,dj=s.checkClicked,fj=s.checkHovered,pj=s.interactionStyle,yj=s.getColors,vj=s.outlineColor,gj=s.visaColors;var bj=t("pareto_chart",function(){function t(t){var r=this;e(this,t);this.height=400;this.width=800;this.showDataLabel=true;this.ordinalAccessor="label";this.valueAccessor="value";this.showTooltip=true;this.dataLabel={visible:true,placement:"top",content:"valueAccessor",format:"0,0.00"};this.referenceLines=[];this.layout="vertical";this.xAxis={visible:true,gridVisible:true,tickInterval:1};this.yAxis={visible:true,gridVisible:true,tickInterval:1};this.wrapLabel=false;this.colorPalette="single_blue";this.hoverOpacity=1;this.cursor="default";this.sortOrder="";this.roundedCorner=0;this.margin={top:this.height*.01,bottom:this.height*.01,right:this.width*.01,left:this.width*.01};this.padding={top:20,bottom:60,right:80,left:80};this.hideDataTable=false;this.paretoStroke="#767676";this.paretoHighlight="#15195A";this.paretoDot=3;this.clickHighlight=[];this.shouldUpdateChart=false;this.shouldUpdateBarStyle=false;this.placeDataLabels=function(t,e){var i;var n;var s;var a="0em";var o;if(r.layout==="vertical"){if((r.dataLabel.placement||"top")==="top"){i=r.x(t[r.ordinalAccessor])+r.x.bandwidth()/2;n=r.y(Math.max(0,t[r.valueAccessor]));s="-.3em";o="middle"}else if((r.dataLabel.placement||"top")==="bottom"){i=r.x(t[r.ordinalAccessor])+r.x.bandwidth()/2;n=r.y(0)-5;s="-.2em";o="middle"}}else if(r.layout==="horizontal"){if((r.dataLabel.placement||"top")==="top"){n=r.y(t[r.ordinalAccessor])+r.y.bandwidth()/2+4;i=r.x(t[r.valueAccessor])+4;s=".2em";o="start"}else if((r.dataLabel.placement||"top")==="bottom"){n=r.y(t[r.ordinalAccessor])+r.y.bandwidth()/2+4;i=r.x(0);s=".2em";o="start"}else if((r.dataLabel.placement||"top")==="bottomAbove"){n=r.y(t[r.ordinalAccessor]);i=r.x(0);s=".2em";a="-.2em";o="start"}else if((r.dataLabel.placement||"top")==="bottomBelow"){n=r.y(t[r.ordinalAccessor])+r.y.bandwidth();i=r.x(0);s=".2em";a="1em";o="start"}}if(e==="x"){return i}else if(e==="y"){return n}else if(e==="em"){return s}else if(e==="em2"){return a}else if(e==="anchor"){return o}else{return null}};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.idWatcher=function(t,e){this.chartID=t;this.barChartEl.id=this.chartID};t.prototype.dataWatcher=function(t,e){this.shouldUpdateChart=true};t.prototype.highlightWatcher=function(t,e){this.shouldUpdateBarStyle=true};t.prototype.componentWillLoad=function(){this.chartID=this.uniqueID||"bar-chart-"+yK();this.barChartEl.id=this.chartID;this.updateChartVariable()};t.prototype.componentDidLoad=function(){this.updateData();this.drawChart();this.setTooltipInitialStyle()};t.prototype.componentWillUpdate=function(){this.updateChartVariable()};t.prototype.componentDidUpdate=function(){var t=this;if(this.sortOrder==="asc"){this.data.sort((function(e,i){return Number(e[t.valueAccessor])-Number(i[t.valueAccessor])}))}else if(this.sortOrder==="desc"){this.data.sort((function(e,i){return Number(i[t.valueAccessor])-Number(e[t.valueAccessor])}))}if(this.shouldUpdateBarStyle){this.shouldUpdateBarStyle=false;this.updateBarSytle(this.bars)}else{this.shouldUpdateChart=false;this.updateData();this.drawChart()}};t.prototype.updateData=function(){var t=this;var e=0;this.data.map((function(i,r){i[t.valueAccessor]=parseFloat(i[t.valueAccessor]);i[t.valueAccessor]=+i[t.valueAccessor];e+=i[t.valueAccessor];i.CumulativeAmount=r===0?i[t.valueAccessor]:i[t.valueAccessor]+t.data[r-1].CumulativeAmount}));this.data.map((function(t){t.CumulativePercentage=t.CumulativeAmount/e}))};t.prototype.updateChartVariable=function(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!(this.layout==="vertical")&&this.xAxis.gridVisible});this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:this.layout==="vertical"&&this.yAxis.gridVisible});if(!this.innerXAxis.visible){this.padding.bottom=this.height*.05}if(!this.innerYAxis.visible){this.padding.left=this.width*.05}this.interactionKeys?"":this.interactionKeys=[this.groupAccessor||this.ordinalAccessor];this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.updateBarSytle=function(t){var e=this;t.attr("fill",(function(t){return e.clickHighlight.length>0&&dj(t,e.clickHighlight,e.interactionKeys)&&e.clickStyle.color?gj[e.clickStyle.color]||e.clickStyle.color:e.hoverHighlight&&fj(t,e.hoverHighlight,e.interactionKeys)&&e.hoverStyle.color?gj[e.hoverStyle.color]||e.hoverStyle.color:e.groupAccessor?e.colorArr(t[e.groupAccessor]):e.colorArr(t[e.valueAccessor])})).attr("style",(function(t){return pj({data:t,clickHighlight:e.clickHighlight,hoverHighlight:e.hoverHighlight,clickStyle:e.clickStyle,hoverStyle:e.hoverStyle,interactionKeys:e.interactionKeys,defaultStroke:vj(e.groupAccessor?e.colorArr(t[e.groupAccessor]):e.colorArr(t[e.valueAccessor])),defaultStrokeWidth:3})})).attr("opacity",(function(t){return cj(t,1,e.hoverOpacity,e.hoverHighlight,e.clickHighlight,e.interactionKeys)}))};t.prototype.drawChart=function(){var t=this;this.reSetRoot();if(this.layout==="vertical"){this.y=$B().domain([0,this.maxValueOverride||XF(this.data,(function(e){return e[t.valueAccessor]}))]).range([this.innerPaddedHeight,0]);if(this.yAxis.gridVisible==true){var e=Math.ceil(XF(this.data,(function(e){return e[t.valueAccessor]}))*10)/10;this.y=$B().domain([0,e]).range([this.innerPaddedHeight,0])}this.x=iX().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([0,this.innerPaddedWidth]).padding(.2);this.yCum=$B().domain([0,1]).range([this.innerPaddedHeight,0])}else if(this.layout==="horizontal"){this.x=$B().domain([0,this.maxValueOverride||XF(this.data,(function(e){return e[t.valueAccessor]}))]).range([0,this.innerPaddedWidth]);this.y=iX().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([this.innerPaddedHeight,0]).padding(.2)}this.line=lK().x((function(e){return t.x(e[t.ordinalAccessor])+t.x.bandwidth()/2})).y((function(e){return t.yCum(e.CumulativePercentage)}));var i=BF(this.data,(function(e){return e[t.valueAccessor]}));var r=XF(this.data,(function(e){return e[t.valueAccessor]}));this.colorArr=this.groupAccessor?yj(this.colors||this.colorPalette,eX().domain(this.data.map((function(e){return e[t.groupAccessor]}))).domain()):yj(this.colors||this.colorPalette,[i,r]);this.hoverStyle=this.hoverStyle?this.hoverStyle:this.colorPalette.includes("single")?{color:"comp_blue",strokeWidth:3}:{strokeWidth:3};this.clickStyle=this.clickStyle?this.clickStyle:this.colorPalette.includes("single")?{color:"supp_purple",strokeWidth:3}:{strokeWidth:3};this.drawGrid();this.drawAxis();this.drawBars();if(this.line){this.drawLine()}this.drawDataLabels();this.drawReferenceLines()};t.prototype.reSetRoot=function(){if(this.svg){this.svg.remove()}this.svg=EF(this.barChartEl).select("#visa-viz-d3-pareto-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g").attr("transform","translate("+this.margin.left+", "+this.margin.top+")");this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g").attr("transform","translate("+this.padding.left+", "+this.padding.top+")");this.tooltipG=EF(this.barChartEl).select(".pareto-tooltip")};t.prototype.drawAxis=function(){aj({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel&&this.layout==="vertical"?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible});aj({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible});aj({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.yCum,right:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.formatCum||"0.0%",hide:!this.innerYAxis.visible})};t.prototype.formatDataLabel=function(t){if(this.dataLabel.content==="ordinalAccessor"){return t[this.ordinalAccessor]}else{if(this.dataLabel.format){return uj(t[this.valueAccessor],this.dataLabel.format)}else{return t[this.valueAccessor]}}};t.prototype.drawDataLabels=function(){var t=this;if(this.dataLabel.visible){this.rootG.selectAll("text.dataLabel").remove();this.rootG.append("g").attr("class","bar-dataLabel-group").attr("id","bar-dataLabel-group").selectAll(".text").data(this.data).enter().append("text").attr("x",(function(e){return t.placeDataLabels(e,"x")})).attr("y",(function(e){return t.placeDataLabels(e,"y")})).attr(this.layout==="vertical"?"dy":"dx",(function(e){return t.placeDataLabels(e,"em")})).attr(this.layout==="vertical"?"dx":"dy",(function(e){return t.placeDataLabels(e,"em2")})).attr("text-anchor",(function(e){return t.placeDataLabels(e,"anchor")})).attr("class","bar-dataLabel-"+this.layout).text((function(e){return t.formatDataLabel(e)})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))}};t.prototype.drawGrid=function(){oj(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.innerXAxis.gridVisible,this.xAxis.tickInterval);oj(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.innerYAxis.gridVisible,this.yAxis.tickInterval)};t.prototype.drawBars=function(){var t=this;if(this.layout==="vertical"){this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class","bar").attr("tabindex",(function(t,e){return e===0?"0":"-1"})).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",(function(e){return t.x(e[t.ordinalAccessor])})).attr("y",(function(e){return t.y(Math.max(0,e[t.valueAccessor]))})).attr("height",(function(e){return Math.abs(t.y(0)-t.y(e[t.valueAccessor]))})).attr("width",this.x.bandwidth()).attr("cursor",this.cursor).attr("fill",(function(e){return t.clickHighlight.length>0&&dj(e,t.clickHighlight,t.interactionKeys)&&t.clickStyle.color?gj[t.clickStyle.color]||t.clickStyle.color:t.hoverHighlight&&fj(e,t.hoverHighlight,t.interactionKeys)&&t.hoverStyle.color?gj[t.hoverStyle.color]||t.hoverStyle.color:t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])})).attr("style",(function(e){return pj({data:e,clickHighlight:t.clickHighlight,hoverHighlight:t.hoverHighlight,clickStyle:t.clickStyle,hoverStyle:t.hoverStyle,interactionKeys:t.interactionKeys,defaultStroke:vj(t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])),defaultStrokeWidth:3})})).attr("opacity",(function(e){return cj(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.interactionKeys)})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))}else if(this.layout==="horizontal"){this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class",(function(e){return t.clickHighlight.includes(e[t.ordinalAccessor])?"bar highlight":"bar"})).attr("tabindex",(function(t,e){return e===0?"0":"-1"})).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",(function(e){return t.x(Math.min(0,e[t.valueAccessor]))})).attr("y",(function(e){return t.y(e[t.ordinalAccessor])})).attr("height",this.y.bandwidth()).attr("width",(function(e){return Math.abs(t.x(e[t.valueAccessor])-t.x(0))})).attr("cursor",this.cursor).attr("fill",(function(e){return t.clickHighlight.length>0&&dj(e,t.clickHighlight,t.interactionKeys)&&t.clickStyle.color?gj[t.clickStyle.color]||t.clickStyle.color:t.hoverHighlight&&fj(e,t.hoverHighlight,t.interactionKeys)&&t.hoverStyle.color?gj[t.hoverStyle.color]||t.hoverStyle.color:t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])})).attr("style",(function(e){return pj({data:e,clickHighlight:t.clickHighlight,hoverHighlight:t.hoverHighlight,clickStyle:t.clickStyle,hoverStyle:t.hoverStyle,interactionKeys:t.interactionKeys,defaultStroke:vj(t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])),defaultStrokeWidth:3})})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))}};t.prototype.drawLine=function(){var t=this;var e=false;var i;for(var r=0;r<this.data.length;r++){if(!e&&this.data[r].CumulativePercentage>this.paretoThreshold){i=r;e=true}}var n=this.rootG.append("g").attr("class","pareto-line");n.append("path").datum(this.data).attr("d",this.line).attr("class","pareto-line-path").attr("x",this.x.bandwidth()/2).attr("fill","none").attr("stroke",this.paretoStroke).attr("stroke-width",1);n.selectAll(".pareto-background-dot").data([this.data[i]]).enter().append("circle").attr("class","pareto-background-dot").attr("fill","#fff").attr("stroke",this.paretoHighlight).attr("stroke-width","1px").attr("r",this.paretoDot+6).attr("cx",(function(e){return t.x(e[t.ordinalAccessor])+t.x.bandwidth()/2})).attr("cy",(function(e){return t.yCum(e.CumulativePercentage)}));n.selectAll(".pareto-dot").data(this.data).enter().append("circle").attr("class","pareto-dot").attr("fill",(function(e,r){if(r===i){return t.paretoHighlight}else{return t.paretoStroke}})).attr("r",(function(e,r){return i===r?t.paretoDot+3:t.paretoDot})).attr("cx",(function(e){return t.x(e[t.ordinalAccessor])+t.x.bandwidth()/2})).attr("cy",(function(e){return t.yCum(e.CumulativePercentage)}));n.selectAll("text").data(this.data).enter().append("text").attr("x",(function(e){return t.placeDataLabels(e,"x")})).attr("y",(function(e){return t.yCum(e.CumulativePercentage)})).attr("dy","-1em").attr("text-anchor","middle").attr("class","pareto-label").attr("fill",this.paretoHighlight).text((function(t,e){return i===e?uj(t.CumulativePercentage,"0.0%"):""}))};t.prototype.drawReferenceLines=function(){var t=this;if(this.referenceLines.length>0){if(this.layout==="vertical"){this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",(function(t){return t.referenceID})).attr("class","bar-reference-line").attr("x1",0).attr("x2",this.innerPaddedWidth).attr("y1",(function(e){return t.y(e.referenceData.referenceValue)})).attr("y2",(function(e){return t.y(e.referenceData.referenceValue)})).style("stroke",(function(t){return t.referenceData.strokeColor})).style("stroke-width",(function(t){return t.referenceData.strokeWidth})).style("opacity",(function(t){return t.referenceData.strokeOpacity}));this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",(function(t){return t.referenceID+"-label"})).attr("class","bar-reference-line-label").attr("text-anchor",(function(t){return(t.referenceData.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.referenceData.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("dx",(function(t){return(t.referenceData.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("y",(function(e){return t.y(e.referenceData.referenceValue)})).attr("dy","0.3em").text((function(t){return t.referenceData.labelValue})).style("fill",(function(t){return t.referenceData.strokeColor}))}else if(this.layout==="horizontal"){this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",(function(t){return t.referenceID})).attr("class","bar-reference-line").attr("y1",0).attr("y2",this.innerPaddedHeight).attr("x1",(function(e){return t.x(e.referenceData.referenceValue)})).attr("x2",(function(e){return t.x(e.referenceData.referenceValue)})).style("stroke",(function(t){return t.referenceData.strokeColor})).style("stroke-width",(function(t){return t.referenceData.strokeWidth})).style("opacity",(function(t){return t.referenceData.strokeOpacity}));this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",(function(t){return t.referenceID+"-label"})).attr("class","bar-reference-line-label").attr("text-anchor","middle").attr("x",(function(e){return t.x(e.referenceData.referenceValue)})).attr("y",(function(e){return(e.referenceData.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dy",(function(t){return(t.referenceData.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"})).text((function(t){return t.referenceData.labelValue})).style("fill",(function(t){return t.referenceData.strokeColor}))}this.rootG.exit().remove()}};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){this.hoverFunc.emit(t);if(this.showTooltip){this.eventsTooltip({data:t,evt:gF,isToShow:true})}};t.prototype.onMouseOutHandler=function(){this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){sj(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;lj({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:undefined,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})};t.prototype.render=function(){var t="light";return r("div",{class:"o-layout is--"+this.layout+" "+t},r("div",{class:"o-layout--chart"},r("h1",{class:"visa-ui-header--4"},this.mainTitle),r("p",{class:"visa-ui-text--instructions"},this.subTitle),r("div",{class:"pareto-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("div",{id:"visa-viz-d3-pareto-container"})))};Object.defineProperty(t.prototype,"barChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{uniqueID:["idWatcher"],data:["dataWatcher"],hoverHighlight:["highlightWatcher"],clickHighlight:["highlightWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}pareto-chart .axis{font-size:12px}pareto-chart .axis text{font:0.65rem;fill:#767676}pareto-chart .axis-label{text-anchor:middle;font:1rem sans-serif}pareto-chart .axis path{stroke:#767676}pareto-chart .patero-line path{stroke:#767676}pareto-chart .patero-line .patero-highlight{fill:black}pareto-chart .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}pareto-chart .grid path{stroke-width:0;stroke:#767676}pareto-chart .y.axis path{stroke:#767676;opacity:0}pareto-chart .x.axis path{stroke:#767676}pareto-chart .o-layout--chart .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}pareto-chart .o-layout--chart .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=hj();var mj="http://www.w3.org/1999/xhtml";var Aj={svg:"http://www.w3.org/2000/svg",xhtml:mj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wj(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return Aj.hasOwnProperty(e)?{space:Aj[e],local:t}:t}function xj(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===mj&&e.documentElement.namespaceURI===mj?e.createElement(t):e.createElementNS(i,t)}}function Sj(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function kj(t){var e=wj(t);return(e.local?Sj:xj)(e)}function Lj(){}function _j(t){return t==null?Lj:function(){return this.querySelector(t)}}function Cj(t){if(typeof t!=="function")t=_j(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new aZ(r,this._parents)}function Dj(){return[]}function Mj(t){return t==null?Dj:function(){return this.querySelectorAll(t)}}function Uj(t){if(typeof t!=="function")t=Mj(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new aZ(r,n)}function Tj(t){return function(){return this.matches(t)}}function Ej(t){if(typeof t!=="function")t=Tj(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new aZ(r,this._parents)}function Ij(t){return new Array(t.length)}function Nj(){return new aZ(this._enter||this._groups.map(Ij),this._parents)}function Wj(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}Wj.prototype={constructor:Wj,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Hj(t){return function(){return t}}var Gj="$";function Pj(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new Wj(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function Oj(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=Gj+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=Gj+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new Wj(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function Vj(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?Oj:Pj,r=this._parents,n=this._groups;if(typeof t!=="function")t=Hj(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new aZ(a,r);a._enter=o;a._exit=l;return a}function Rj(){return new aZ(this._exit||this._groups.map(Ij),this._parents)}function Yj(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function zj(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new aZ(a,this._parents)}function Fj(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function Xj(t){if(!t)t=Bj;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new aZ(n,this._parents).order()}function Bj(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Kj(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function qj(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function jj(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function $j(){var t=0;this.each((function(){++t}));return t}function Zj(){return!this.node()}function Qj(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function Jj(t){return function(){this.removeAttribute(t)}}function t$(t){return function(){this.removeAttributeNS(t.space,t.local)}}function e$(t,e){return function(){this.setAttribute(t,e)}}function i$(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function r$(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function n$(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function s$(t,e){var i=wj(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?t$:Jj:typeof e==="function"?i.local?n$:r$:i.local?i$:e$)(i,e))}function a$(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function o$(t){return function(){this.style.removeProperty(t)}}function l$(t,e,i){return function(){this.style.setProperty(t,e,i)}}function u$(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function h$(t,e,i){return arguments.length>1?this.each((e==null?o$:typeof e==="function"?u$:l$)(t,e,i==null?"":i)):c$(this.node(),t)}function c$(t,e){return t.style.getPropertyValue(e)||a$(t).getComputedStyle(t,null).getPropertyValue(e)}function d$(t){return function(){delete this[t]}}function f$(t,e){return function(){this[t]=e}}function p$(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function y$(t,e){return arguments.length>1?this.each((e==null?d$:typeof e==="function"?p$:f$)(t,e)):this.node()[t]}function v$(t){return t.trim().split(/^|\s+/)}function g$(t){return t.classList||new b$(t)}function b$(t){this._node=t;this._names=v$(t.getAttribute("class")||"")}b$.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function m$(t,e){var i=g$(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function A$(t,e){var i=g$(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function w$(t){return function(){m$(this,t)}}function x$(t){return function(){A$(this,t)}}function S$(t,e){return function(){(e.apply(this,arguments)?m$:A$)(this,t)}}function k$(t,e){var i=v$(t+"");if(arguments.length<2){var r=g$(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?S$:e?w$:x$)(i,e))}function L$(){this.textContent=""}function _$(t){return function(){this.textContent=t}}function C$(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function D$(t){return arguments.length?this.each(t==null?L$:(typeof t==="function"?C$:_$)(t)):this.node().textContent}function M$(){this.innerHTML=""}function U$(t){return function(){this.innerHTML=t}}function T$(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function E$(t){return arguments.length?this.each(t==null?M$:(typeof t==="function"?T$:U$)(t)):this.node().innerHTML}function I$(){if(this.nextSibling)this.parentNode.appendChild(this)}function N$(){return this.each(I$)}function W$(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function H$(){return this.each(W$)}function G$(t){var e=typeof t==="function"?t:kj(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function P$(){return null}function O$(t,e){var i=typeof t==="function"?t:kj(t),r=e==null?P$:typeof e==="function"?e:_j(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function V$(){var t=this.parentNode;if(t)t.removeChild(this)}function R$(){return this.each(V$)}function Y$(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function z$(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function F$(t){return this.select(t?z$:Y$)}function X$(t){return arguments.length?this.property("__data__",t):this.node().__data__}var B$={};var K$=null;if(typeof document!=="undefined"){var q$=document.documentElement;if(!("onmouseenter"in q$)){B$={mouseenter:"mouseover",mouseleave:"mouseout"}}}function j$(t,e,i){t=$$(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function $$(t,e,i){return function(r){var n=K$;K$=r;try{t.call(this,this.__data__,e,i)}finally{K$=n}}}function Z$(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function Q$(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function J$(t,e,i){var r=B$.hasOwnProperty(t.type)?j$:$$;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function tZ(t,e,i){var r=Z$(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?J$:Q$;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function eZ(t,e,i){var r=a$(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function iZ(t,e){return function(){return eZ(this,t,e)}}function rZ(t,e){return function(){return eZ(this,t,e.apply(this,arguments))}}function nZ(t,e){return this.each((typeof e==="function"?rZ:iZ)(t,e))}var sZ=[null];function aZ(t,e){this._groups=t;this._parents=e}function oZ(){return new aZ([[document.documentElement]],sZ)}aZ.prototype=oZ.prototype={constructor:aZ,select:Cj,selectAll:Uj,filter:Ej,data:Vj,enter:Nj,exit:Rj,join:Yj,merge:zj,order:Fj,sort:Xj,call:Kj,nodes:qj,node:jj,size:$j,empty:Zj,each:Qj,attr:s$,style:h$,property:y$,classed:k$,text:D$,html:E$,raise:N$,lower:H$,append:G$,insert:O$,remove:R$,clone:F$,datum:X$,on:tZ,dispatch:nZ};function lZ(t){return typeof t==="string"?new aZ([[document.querySelector(t)]],[document.documentElement]):new aZ([[t]],sZ)}function uZ(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function hZ(t){if(t.length===1)t=cZ(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function cZ(t){return function(e,i){return uZ(t(e),i)}}var dZ=hZ(uZ);var fZ=dZ.right;function pZ(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var yZ=Math.sqrt(50),vZ=Math.sqrt(10),gZ=Math.sqrt(2);function bZ(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=mZ(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function mZ(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=yZ?10:s>=vZ?5:s>=gZ?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=yZ?10:s>=vZ?5:s>=gZ?2:1)}function AZ(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=yZ)n*=10;else if(s>=vZ)n*=5;else if(s>=gZ)n*=2;return e<t?-n:n}function wZ(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function xZ(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function SZ(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var kZ="$";function LZ(){}LZ.prototype=_Z.prototype={constructor:LZ,has:function(t){return kZ+t in this},get:function(t){return this[kZ+t]},set:function(t,e){this[kZ+t]=e;return this},remove:function(t){var e=kZ+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===kZ)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===kZ)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===kZ)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===kZ)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===kZ)++t;return t},empty:function(){for(var t in this)if(t[0]===kZ)return false;return true},each:function(t){for(var e in this)if(e[0]===kZ)t(this[e],e.slice(1),this)}};function _Z(t,e){var i=new LZ;if(t instanceof LZ)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function CZ(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=_Z(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,DZ,MZ)},map:function(t){return s(t,0,UZ,TZ)},entries:function(t){return a(s(t,0,UZ,TZ),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function DZ(){return{}}function MZ(t,e,i){t[e]=i}function UZ(){return _Z()}function TZ(t,e,i){t.set(e,i)}var EZ=Array.prototype;var IZ=EZ.map;var NZ=EZ.slice;var WZ={name:"implicit"};function HZ(){var t=_Z(),e=[],i=[],r=WZ;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==WZ)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=_Z();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=NZ.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return HZ(e,i).unknown(r)};SZ.apply(n,arguments);return n}function GZ(){var t=HZ().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=pZ(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return GZ(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return SZ.apply(h(),arguments)}function PZ(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function OZ(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function VZ(){}var RZ=.7;var YZ=1/RZ;var zZ="\\s*([+-]?\\d+)\\s*",FZ="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",XZ="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BZ=/^#([0-9a-f]{3,8})$/,KZ=new RegExp("^rgb\\("+[zZ,zZ,zZ]+"\\)$"),qZ=new RegExp("^rgb\\("+[XZ,XZ,XZ]+"\\)$"),jZ=new RegExp("^rgba\\("+[zZ,zZ,zZ,FZ]+"\\)$"),$Z=new RegExp("^rgba\\("+[XZ,XZ,XZ,FZ]+"\\)$"),ZZ=new RegExp("^hsl\\("+[FZ,XZ,XZ]+"\\)$"),QZ=new RegExp("^hsla\\("+[FZ,XZ,XZ,FZ]+"\\)$");var JZ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};PZ(VZ,rQ,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:tQ,formatHex:tQ,formatHsl:eQ,formatRgb:iQ,toString:iQ});function tQ(){return this.rgb().formatHex()}function eQ(){return fQ(this).formatHsl()}function iQ(){return this.rgb().formatRgb()}function rQ(t){var e,i;t=(t+"").trim().toLowerCase();return(e=BZ.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?nQ(e):i===3?new lQ(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?sQ(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?sQ(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=KZ.exec(t))?new lQ(e[1],e[2],e[3],1):(e=qZ.exec(t))?new lQ(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=jZ.exec(t))?sQ(e[1],e[2],e[3],e[4]):(e=$Z.exec(t))?sQ(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ZZ.exec(t))?dQ(e[1],e[2]/100,e[3]/100,1):(e=QZ.exec(t))?dQ(e[1],e[2]/100,e[3]/100,e[4]):JZ.hasOwnProperty(t)?nQ(JZ[t]):t==="transparent"?new lQ(NaN,NaN,NaN,0):null}function nQ(t){return new lQ(t>>16&255,t>>8&255,t&255,1)}function sQ(t,e,i,r){if(r<=0)t=e=i=NaN;return new lQ(t,e,i,r)}function aQ(t){if(!(t instanceof VZ))t=rQ(t);if(!t)return new lQ;t=t.rgb();return new lQ(t.r,t.g,t.b,t.opacity)}function oQ(t,e,i,r){return arguments.length===1?aQ(t):new lQ(t,e,i,r==null?1:r)}function lQ(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}PZ(lQ,oQ,OZ(VZ,{brighter:function(t){t=t==null?YZ:Math.pow(YZ,t);return new lQ(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?RZ:Math.pow(RZ,t);return new lQ(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:uQ,formatHex:uQ,formatRgb:hQ,toString:hQ}));function uQ(){return"#"+cQ(this.r)+cQ(this.g)+cQ(this.b)}function hQ(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function cQ(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function dQ(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new yQ(t,e,i,r)}function fQ(t){if(t instanceof yQ)return new yQ(t.h,t.s,t.l,t.opacity);if(!(t instanceof VZ))t=rQ(t);if(!t)return new yQ;if(t instanceof yQ)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new yQ(a,o,l,t.opacity)}function pQ(t,e,i,r){return arguments.length===1?fQ(t):new yQ(t,e,i,r==null?1:r)}function yQ(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}PZ(yQ,pQ,OZ(VZ,{brighter:function(t){t=t==null?YZ:Math.pow(YZ,t);return new yQ(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?RZ:Math.pow(RZ,t);return new yQ(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new lQ(vQ(t>=240?t-240:t+120,n,r),vQ(t,n,r),vQ(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function vQ(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function gQ(t){return function(){return t}}function bQ(t,e){return function(i){return t+i*e}}function mQ(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function AQ(t){return(t=+t)===1?wQ:function(e,i){return i-e?mQ(e,i,t):gQ(isNaN(e)?i:e)}}function wQ(t,e){var i=e-t;return i?bQ(t,i):gQ(isNaN(t)?e:t)}var xQ=function t(e){var i=AQ(e);function r(t,e){var r=i((t=oQ(t)).r,(e=oQ(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=wQ(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function SQ(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function kQ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function LQ(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=NQ(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function _Q(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function CQ(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function DQ(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=NQ(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var MQ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,UQ=new RegExp(MQ.source,"g");function TQ(t){return function(){return t}}function EQ(t){return function(e){return t(e)+""}}function IQ(t,e){var i=MQ.lastIndex=UQ.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=MQ.exec(t))&&(n=UQ.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:CQ(r,n)})}i=UQ.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?EQ(l[0].x):TQ(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function NQ(t,e){var i=typeof e,r;return e==null||i==="boolean"?gQ(e):(i==="number"?CQ:i==="string"?(r=rQ(e))?(e=r,xQ):IQ:e instanceof rQ?xQ:e instanceof Date?_Q:kQ(e)?SQ:Array.isArray(e)?LQ:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?DQ:CQ)(t,e)}function WQ(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var HQ=180/Math.PI;var GQ={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function PQ(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*HQ,skewX:Math.atan(l)*HQ,scaleX:a,scaleY:o}}var OQ,VQ,RQ,YQ;function zQ(t){if(t==="none")return GQ;if(!OQ)OQ=document.createElement("DIV"),VQ=document.documentElement,RQ=document.defaultView;OQ.style.transform=t;t=RQ.getComputedStyle(VQ.appendChild(OQ),null).getPropertyValue("transform");VQ.removeChild(OQ);t=t.slice(7,-1).split(",");return PQ(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function FQ(t){if(t==null)return GQ;if(!YQ)YQ=document.createElementNS("http://www.w3.org/2000/svg","g");YQ.setAttribute("transform",t);if(!(t=YQ.transform.baseVal.consolidate()))return GQ;t=t.matrix;return PQ(t.a,t.b,t.c,t.d,t.e,t.f)}function XQ(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:CQ(t,n)},{i:l-2,x:CQ(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:CQ(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:CQ(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:CQ(t,i)},{i:o-2,x:CQ(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var BQ=XQ(zQ,"px, ","px)","deg)");var KQ=XQ(FQ,", ",")",")");function qQ(t){return function(){return t}}function jQ(t){return+t}var $Q=[0,1];function ZQ(t){return t}function QQ(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:qQ(isNaN(e)?NaN:.5)}function JQ(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function tJ(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=QQ(n,r),s=i(a,s);else r=QQ(r,n),s=i(s,a);return function(t){return s(r(t))}}function eJ(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=QQ(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=fZ(t,e,1,r)-1;return s[i](n[i](e))}}function iJ(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rJ(){var t=$Q,e=$Q,i=NQ,r,n,s,a=ZQ,o,l,u;function h(){o=Math.min(t.length,e.length)>2?eJ:tJ;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),CQ)))(i)))};c.domain=function(e){return arguments.length?(t=IZ.call(e,jQ),a===ZQ||(a=JQ(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=NZ.call(t),h()):e.slice()};c.rangeRound=function(t){return e=NZ.call(t),i=WQ,h()};c.clamp=function(e){return arguments.length?(a=e?JQ(t):ZQ,c):a!==ZQ};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function nJ(t,e){return rJ()(t,e)}function sJ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function aJ(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function oJ(t){return t=aJ(Math.abs(t)),t?t[1]:NaN}function lJ(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function uJ(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var hJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cJ(t){if(!(e=hJ.exec(t)))throw new Error("invalid format: "+t);var e;return new dJ({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}cJ.prototype=dJ.prototype;function dJ(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}dJ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fJ(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var pJ;function yJ(t,e){var i=aJ(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(pJ=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+aJ(t,Math.max(0,e+s-1))[0]}function vJ(t,e){var i=aJ(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var gJ={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:sJ,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return vJ(t*100,e)},r:vJ,s:yJ,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function bJ(t){return t}var mJ=Array.prototype.map,AJ=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wJ(t){var e=t.grouping===undefined||t.thousands===undefined?bJ:lJ(mJ.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?bJ:uJ(mJ.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=cJ(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!gJ[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=gJ[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=fJ(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?AJ[8+pJ/3]:"")+r+(k&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=cJ(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(oJ(e)/3)))*3,n=Math.pow(10,-r),s=AJ[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var xJ;var SJ;var kJ;LJ({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function LJ(t){xJ=wJ(t);SJ=xJ.format;kJ=xJ.formatPrefix;return xJ}function _J(t){return Math.max(0,-oJ(Math.abs(t)))}function CJ(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(oJ(e)/3)))*3-oJ(Math.abs(t)))}function DJ(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,oJ(e)-oJ(t))+1}function MJ(t,e,i,r){var n=AZ(t,e,i),s;r=cJ(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=CJ(n,a)))r.precision=s;return kJ(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=DJ(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=_J(n)))r.precision=s-(r.type==="%")*2;break}}return SJ(r)}function UJ(t){var e=t.domain;t.ticks=function(t){var i=e();return bZ(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return MJ(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=mZ(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=mZ(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=mZ(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function TJ(){var t=nJ(ZQ,ZQ);t.copy=function(){return iJ(t,TJ())};SZ.apply(t,arguments);return UJ(t)}function EJ(t,e){t=t.slice();var i=0,r=t.length-1,n=t[i],s=t[r],a;if(s<n){a=i,i=r,r=a;a=n,n=s,s=a}t[i]=e.floor(n);t[r]=e.ceil(s);return t}var IJ=new Date,NJ=new Date;function WJ(t,e,i,r){function n(e){return t(e=arguments.length===0?new Date:new Date(+e)),e}n.floor=function(e){return t(e=new Date(+e)),e};n.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i};n.round=function(t){var e=n(t),i=n.ceil(t);return t-e<i-t?e:i};n.offset=function(t,i){return e(t=new Date(+t),i==null?1:Math.floor(i)),t};n.range=function(i,r,s){var a=[],o;i=n.ceil(i);s=s==null?1:Math.floor(s);if(!(i<r)||!(s>0))return a;do{a.push(o=new Date(+i)),e(i,s),t(i)}while(o<i&&i<r);return a};n.filter=function(i){return WJ((function(e){if(e>=e)while(t(e),!i(e))e.setTime(e-1)}),(function(t,r){if(t>=t){if(r<0)while(++r<=0){while(e(t,-1),!i(t)){}}else while(--r>=0){while(e(t,+1),!i(t)){}}}}))};if(i){n.count=function(e,r){IJ.setTime(+e),NJ.setTime(+r);t(IJ),t(NJ);return Math.floor(i(IJ,NJ))};n.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?n:n.filter(r?function(e){return r(e)%t===0}:function(e){return n.count(0,e)%t===0})}}return n}var HJ=WJ((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));HJ.every=function(t){t=Math.floor(t);if(!isFinite(t)||!(t>0))return null;if(!(t>1))return HJ;return WJ((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,i){e.setTime(+e+i*t)}),(function(e,i){return(i-e)/t}))};var GJ=1e3;var PJ=6e4;var OJ=36e5;var VJ=864e5;var RJ=6048e5;var YJ=WJ((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*GJ)}),(function(t,e){return(e-t)/GJ}),(function(t){return t.getUTCSeconds()}));var zJ=WJ((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*GJ)}),(function(t,e){t.setTime(+t+e*PJ)}),(function(t,e){return(e-t)/PJ}),(function(t){return t.getMinutes()}));var FJ=WJ((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*GJ-t.getMinutes()*PJ)}),(function(t,e){t.setTime(+t+e*OJ)}),(function(t,e){return(e-t)/OJ}),(function(t){return t.getHours()}));var XJ=WJ((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*PJ)/VJ}),(function(t){return t.getDate()-1}));function BJ(t){return WJ((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e*7)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*PJ)/RJ}))}var KJ=BJ(0);var qJ=BJ(1);var jJ=BJ(2);var $J=BJ(3);var ZJ=BJ(4);var QJ=BJ(5);var JJ=BJ(6);var t0=WJ((function(t){t.setDate(1);t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12}),(function(t){return t.getMonth()}));var e0=WJ((function(t){t.setMonth(0,1);t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));e0.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:WJ((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t);e.setMonth(0,1);e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)}))};var i0=WJ((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/VJ}),(function(t){return t.getUTCDate()-1}));function r0(t){return WJ((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e*7)}),(function(t,e){return(e-t)/RJ}))}var n0=r0(0);var s0=r0(1);var a0=r0(2);var o0=r0(3);var l0=r0(4);var u0=r0(5);var h0=r0(6);var c0=WJ((function(t){t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));c0.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:WJ((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)}),(function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i*t)}))};function d0(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);e.setFullYear(t.y);return e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function f0(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));e.setUTCFullYear(t.y);return e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function p0(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function y0(t){var e=t.dateTime,i=t.date,r=t.time,n=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths;var u=x0(n),h=S0(n),c=x0(s),d=S0(s),f=x0(a),p=S0(a),y=x0(o),v=S0(o),g=x0(l),b=S0(l);var m={a:I,A:N,b:W,B:H,c:null,d:F0,e:F0,f:j0,g:a1,G:l1,H:X0,I:B0,j:K0,L:q0,m:$0,M:Z0,p:G,q:P,Q:T1,s:E1,S:Q0,u:J0,U:t1,V:i1,w:r1,W:n1,x:null,X:null,y:s1,Y:o1,Z:u1,"%":U1};var A={a:O,A:V,b:R,B:Y,c:null,d:h1,e:h1,f:y1,g:_1,G:D1,H:c1,I:d1,j:f1,L:p1,m:v1,M:g1,p:z,q:F,Q:T1,s:E1,S:b1,u:m1,U:A1,V:x1,w:S1,W:k1,x:null,X:null,y:L1,Y:C1,Z:M1,"%":U1};var w={a:_,A:C,b:D,B:M,c:U,d:N0,e:N0,f:V0,g:U0,G:M0,H:H0,I:H0,j:W0,L:O0,m:I0,M:G0,p:L,q:E0,Q:Y0,s:z0,S:P0,u:L0,U:_0,V:C0,w:k0,W:D0,x:T,X:E,y:U0,Y:M0,Z:T0,"%":R0};m.x=x(i,m);m.X=x(r,m);m.c=x(e,m);A.x=x(i,A);A.X=x(r,A);A.c=x(e,A);function x(t,e){return function(i){var r=[],n=-1,s=0,a=t.length,o,l,u;if(!(i instanceof Date))i=new Date(+i);while(++n<a){if(t.charCodeAt(n)===37){r.push(t.slice(s,n));if((l=v0[o=t.charAt(++n)])!=null)o=t.charAt(++n);else l=o==="e"?" ":"0";if(u=e[o])o=u(i,l);r.push(o);s=n+1}}r.push(t.slice(s,n));return r.join("")}}function S(t,e){return function(i){var r=p0(1900,undefined,1),n=k(r,t,i+="",0),s,a;if(n!=i.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(r.s*1e3+("L"in r?r.L:0));if(e&&!("Z"in r))r.Z=0;if("p"in r)r.H=r.H%12+r.p*12;if(r.m===undefined)r.m="q"in r?r.q:0;if("V"in r){if(r.V<1||r.V>53)return null;if(!("w"in r))r.w=1;if("Z"in r){s=f0(p0(r.y,0,1)),a=s.getUTCDay();s=a>4||a===0?s0.ceil(s):s0(s);s=i0.offset(s,(r.V-1)*7);r.y=s.getUTCFullYear();r.m=s.getUTCMonth();r.d=s.getUTCDate()+(r.w+6)%7}else{s=d0(p0(r.y,0,1)),a=s.getDay();s=a>4||a===0?qJ.ceil(s):qJ(s);s=XJ.offset(s,(r.V-1)*7);r.y=s.getFullYear();r.m=s.getMonth();r.d=s.getDate()+(r.w+6)%7}}else if("W"in r||"U"in r){if(!("w"in r))r.w="u"in r?r.u%7:"W"in r?1:0;a="Z"in r?f0(p0(r.y,0,1)).getUTCDay():d0(p0(r.y,0,1)).getDay();r.m=0;r.d="W"in r?(r.w+6)%7+r.W*7-(a+5)%7:r.w+r.U*7-(a+6)%7}if("Z"in r){r.H+=r.Z/100|0;r.M+=r.Z%100;return f0(r)}return d0(r)}}function k(t,e,i,r){var n=0,s=e.length,a=i.length,o,l;while(n<s){if(r>=a)return-1;o=e.charCodeAt(n++);if(o===37){o=e.charAt(n++);l=w[o in v0?e.charAt(n++):o];if(!l||(r=l(t,i,r))<0)return-1}else if(o!=i.charCodeAt(r++)){return-1}}return r}function L(t,e,i){var r=u.exec(e.slice(i));return r?(t.p=h[r[0].toLowerCase()],i+r[0].length):-1}function _(t,e,i){var r=f.exec(e.slice(i));return r?(t.w=p[r[0].toLowerCase()],i+r[0].length):-1}function C(t,e,i){var r=c.exec(e.slice(i));return r?(t.w=d[r[0].toLowerCase()],i+r[0].length):-1}function D(t,e,i){var r=g.exec(e.slice(i));return r?(t.m=b[r[0].toLowerCase()],i+r[0].length):-1}function M(t,e,i){var r=y.exec(e.slice(i));return r?(t.m=v[r[0].toLowerCase()],i+r[0].length):-1}function U(t,i,r){return k(t,e,i,r)}function T(t,e,r){return k(t,i,e,r)}function E(t,e,i){return k(t,r,e,i)}function I(t){return a[t.getDay()]}function N(t){return s[t.getDay()]}function W(t){return l[t.getMonth()]}function H(t){return o[t.getMonth()]}function G(t){return n[+(t.getHours()>=12)]}function P(t){return 1+~~(t.getMonth()/3)}function O(t){return a[t.getUTCDay()]}function V(t){return s[t.getUTCDay()]}function R(t){return l[t.getUTCMonth()]}function Y(t){return o[t.getUTCMonth()]}function z(t){return n[+(t.getUTCHours()>=12)]}function F(t){return 1+~~(t.getUTCMonth()/3)}return{format:function(t){var e=x(t+="",m);e.toString=function(){return t};return e},parse:function(t){var e=S(t+="",false);e.toString=function(){return t};return e},utcFormat:function(t){var e=x(t+="",A);e.toString=function(){return t};return e},utcParse:function(t){var e=S(t+="",true);e.toString=function(){return t};return e}}}var v0={"-":"",_:" ",0:"0"},g0=/^\s*\d+/,b0=/^%/,m0=/[\\^$*+?|[\]().{}]/g;function A0(t,e,i){var r=t<0?"-":"",n=(r?-t:t)+"",s=n.length;return r+(s<i?new Array(i-s+1).join(e)+n:n)}function w0(t){return t.replace(m0,"\\$&")}function x0(t){return new RegExp("^(?:"+t.map(w0).join("|")+")","i")}function S0(t){var e={},i=-1,r=t.length;while(++i<r)e[t[i].toLowerCase()]=i;return e}function k0(t,e,i){var r=g0.exec(e.slice(i,i+1));return r?(t.w=+r[0],i+r[0].length):-1}function L0(t,e,i){var r=g0.exec(e.slice(i,i+1));return r?(t.u=+r[0],i+r[0].length):-1}function _0(t,e,i){var r=g0.exec(e.slice(i,i+2));return r?(t.U=+r[0],i+r[0].length):-1}function C0(t,e,i){var r=g0.exec(e.slice(i,i+2));return r?(t.V=+r[0],i+r[0].length):-1}function D0(t,e,i){var r=g0.exec(e.slice(i,i+2));return r?(t.W=+r[0],i+r[0].length):-1}function M0(t,e,i){var r=g0.exec(e.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1}function U0(t,e,i){var r=g0.exec(e.slice(i,i+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function T0(t,e,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function E0(t,e,i){var r=g0.exec(e.slice(i,i+1));return r?(t.q=r[0]*3-3,i+r[0].length):-1}function I0(t,e,i){var r=g0.exec(e.slice(i,i+2));return r?(t.m=r[0]-1,i+r[0].length):-1}function N0(t,e,i){var r=g0.exec(e.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1}function W0(t,e,i){var r=g0.exec(e.slice(i,i+3));return r?(t.m=0,t.d=+r[0],i+r[0].length):-1}function H0(t,e,i){var r=g0.exec(e.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1}function G0(t,e,i){var r=g0.exec(e.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1}function P0(t,e,i){var r=g0.exec(e.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1}function O0(t,e,i){var r=g0.exec(e.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1}function V0(t,e,i){var r=g0.exec(e.slice(i,i+6));return r?(t.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function R0(t,e,i){var r=b0.exec(e.slice(i,i+1));return r?i+r[0].length:-1}function Y0(t,e,i){var r=g0.exec(e.slice(i));return r?(t.Q=+r[0],i+r[0].length):-1}function z0(t,e,i){var r=g0.exec(e.slice(i));return r?(t.s=+r[0],i+r[0].length):-1}function F0(t,e){return A0(t.getDate(),e,2)}function X0(t,e){return A0(t.getHours(),e,2)}function B0(t,e){return A0(t.getHours()%12||12,e,2)}function K0(t,e){return A0(1+XJ.count(e0(t),t),e,3)}function q0(t,e){return A0(t.getMilliseconds(),e,3)}function j0(t,e){return q0(t,e)+"000"}function $0(t,e){return A0(t.getMonth()+1,e,2)}function Z0(t,e){return A0(t.getMinutes(),e,2)}function Q0(t,e){return A0(t.getSeconds(),e,2)}function J0(t){var e=t.getDay();return e===0?7:e}function t1(t,e){return A0(KJ.count(e0(t)-1,t),e,2)}function e1(t){var e=t.getDay();return e>=4||e===0?ZJ(t):ZJ.ceil(t)}function i1(t,e){t=e1(t);return A0(ZJ.count(e0(t),t)+(e0(t).getDay()===4),e,2)}function r1(t){return t.getDay()}function n1(t,e){return A0(qJ.count(e0(t)-1,t),e,2)}function s1(t,e){return A0(t.getFullYear()%100,e,2)}function a1(t,e){t=e1(t);return A0(t.getFullYear()%100,e,2)}function o1(t,e){return A0(t.getFullYear()%1e4,e,4)}function l1(t,e){var i=t.getDay();t=i>=4||i===0?ZJ(t):ZJ.ceil(t);return A0(t.getFullYear()%1e4,e,4)}function u1(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+A0(e/60|0,"0",2)+A0(e%60,"0",2)}function h1(t,e){return A0(t.getUTCDate(),e,2)}function c1(t,e){return A0(t.getUTCHours(),e,2)}function d1(t,e){return A0(t.getUTCHours()%12||12,e,2)}function f1(t,e){return A0(1+i0.count(c0(t),t),e,3)}function p1(t,e){return A0(t.getUTCMilliseconds(),e,3)}function y1(t,e){return p1(t,e)+"000"}function v1(t,e){return A0(t.getUTCMonth()+1,e,2)}function g1(t,e){return A0(t.getUTCMinutes(),e,2)}function b1(t,e){return A0(t.getUTCSeconds(),e,2)}function m1(t){var e=t.getUTCDay();return e===0?7:e}function A1(t,e){return A0(n0.count(c0(t)-1,t),e,2)}function w1(t){var e=t.getUTCDay();return e>=4||e===0?l0(t):l0.ceil(t)}function x1(t,e){t=w1(t);return A0(l0.count(c0(t),t)+(c0(t).getUTCDay()===4),e,2)}function S1(t){return t.getUTCDay()}function k1(t,e){return A0(s0.count(c0(t)-1,t),e,2)}function L1(t,e){return A0(t.getUTCFullYear()%100,e,2)}function _1(t,e){t=w1(t);return A0(t.getUTCFullYear()%100,e,2)}function C1(t,e){return A0(t.getUTCFullYear()%1e4,e,4)}function D1(t,e){var i=t.getUTCDay();t=i>=4||i===0?l0(t):l0.ceil(t);return A0(t.getUTCFullYear()%1e4,e,4)}function M1(){return"+0000"}function U1(){return"%"}function T1(t){return+t}function E1(t){return Math.floor(+t/1e3)}var I1;var N1;W1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function W1(t){I1=y0(t);N1=I1.format;return I1}var H1=1e3,G1=H1*60,P1=G1*60,O1=P1*24,V1=O1*7,R1=O1*30,Y1=O1*365;function z1(t){return new Date(t)}function F1(t){return t instanceof Date?+t:+new Date(+t)}function X1(t,e,i,r,n,s,a,o,l){var u=nJ(ZQ,ZQ),h=u.invert,c=u.domain;var d=l(".%L"),f=l(":%S"),p=l("%I:%M"),y=l("%I %p"),v=l("%a %d"),g=l("%b %d"),b=l("%B"),m=l("%Y");var A=[[a,1,H1],[a,5,5*H1],[a,15,15*H1],[a,30,30*H1],[s,1,G1],[s,5,5*G1],[s,15,15*G1],[s,30,30*G1],[n,1,P1],[n,3,3*P1],[n,6,6*P1],[n,12,12*P1],[r,1,O1],[r,2,2*O1],[i,1,V1],[e,1,R1],[e,3,3*R1],[t,1,Y1]];function w(o){return(a(o)<o?d:s(o)<o?f:n(o)<o?p:r(o)<o?y:e(o)<o?i(o)<o?v:g:t(o)<o?b:m)(o)}function x(e,i,r,n){if(e==null)e=10;if(typeof e==="number"){var s=Math.abs(r-i)/e,a=hZ((function(t){return t[2]})).right(A,s);if(a===A.length){n=AZ(i/Y1,r/Y1,e);e=t}else if(a){a=A[s/A[a-1][2]<A[a][2]/s?a-1:a];n=a[1];e=a[0]}else{n=Math.max(AZ(i,r,e),1);e=o}}return n==null?e:e.every(n)}u.invert=function(t){return new Date(h(t))};u.domain=function(t){return arguments.length?c(IZ.call(t,F1)):c().map(z1)};u.ticks=function(t,e){var i=c(),r=i[0],n=i[i.length-1],s=n<r,a;if(s)a=r,r=n,n=a;a=x(t,r,n,e);a=a?a.range(r,n+1):[];return s?a.reverse():a};u.tickFormat=function(t,e){return e==null?w:l(e)};u.nice=function(t,e){var i=c();return(t=x(t,i[0],i[i.length-1],e))?c(EJ(i,t)):u};u.copy=function(){return iJ(u,X1(t,e,i,r,n,s,a,o,l))};return u}function B1(){return SZ.apply(X1(e0,t0,KJ,XJ,FJ,zJ,YJ,HJ,N1).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function K1(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function q1(t){return 1-Math.sqrt(1-t*t)}var j1={value:function(){}};function $1(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new Z1(i)}function Z1(t){this._=t}function Q1(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}Z1.prototype=$1.prototype={constructor:Z1,on:function(t,e){var i=this._,r=Q1(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=J1(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=t2(i[n],t.name,e);else if(e==null)for(n in i)i[n]=t2(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new Z1(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function J1(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function t2(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=j1,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var e2=0,i2=0,r2=0,n2=1e3,s2,a2,o2=0,l2=0,u2=0,h2=typeof performance==="object"&&performance.now?performance:Date,c2=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function d2(){return l2||(c2(f2),l2=h2.now()+u2)}function f2(){l2=0}function p2(){this._call=this._time=this._next=null}p2.prototype=y2.prototype={constructor:p2,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?d2():+i)+(e==null?0:+e);if(!this._next&&a2!==this){if(a2)a2._next=this;else s2=this;a2=this}this._call=t;this._time=i;A2()},stop:function(){if(this._call){this._call=null;this._time=Infinity;A2()}}};function y2(t,e,i){var r=new p2;r.restart(t,e,i);return r}function v2(){d2();++e2;var t=s2,e;while(t){if((e=l2-t._time)>=0)t._call.call(null,e);t=t._next}--e2}function g2(){l2=(o2=h2.now())+u2;e2=i2=0;try{v2()}finally{e2=0;m2();l2=0}}function b2(){var t=h2.now(),e=t-o2;if(e>n2)u2-=e,o2=t}function m2(){var t,e=s2,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:s2=i}}a2=t;A2(r)}function A2(t){if(e2)return;if(i2)i2=clearTimeout(i2);var e=t-l2;if(e>24){if(t<Infinity)i2=setTimeout(g2,t-h2.now()-u2);if(r2)r2=clearInterval(r2)}else{if(!r2)o2=h2.now(),r2=setInterval(b2,n2);e2=1,c2(g2)}}function w2(t,e,i){var r=new p2;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var x2=$1("start","end","interrupt");var S2=[];var k2=0;var L2=1;var _2=2;var C2=3;var D2=4;var M2=5;var U2=6;function T2(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;W2(t,i,{name:e,index:r,group:n,on:x2,tween:S2,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:k2})}function E2(t,e){var i=N2(t,e);if(i.state>k2)throw new Error("too late; already scheduled");return i}function I2(t,e){var i=N2(t,e);if(i.state>_2)throw new Error("too late; already started");return i}function N2(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function W2(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=y2(s,0,i.time);function s(t){i.state=L2;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==L2)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===C2)return w2(a);if(d.state===D2){d.state=U2;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=U2;d.timer.stop();delete r[u]}}w2((function(){if(i.state===C2){i.state=D2;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=_2;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==_2)return;i.state=C2;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=M2,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===M2){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=U2;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function H2(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>_2&&r.state<M2;r.state=U2;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function G2(t){return this.each((function(){H2(this,t)}))}function P2(t,e){var i,r;return function(){var n=I2(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function O2(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=I2(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function V2(t,e){var i=this._id;t+="";if(arguments.length<2){var r=N2(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?P2:O2)(i,t,e))}function R2(t,e,i){var r=t._id;t.each((function(){var t=I2(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return N2(t,r).value[e]}}function Y2(t,e){var i;return(typeof e==="number"?CQ:e instanceof rQ?xQ:(i=rQ(e))?(e=i,xQ):IQ)(t,e)}function z2(t){return function(){this.removeAttribute(t)}}function F2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function X2(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function B2(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function K2(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function q2(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function j2(t,e){var i=wj(t),r=i==="transform"?KQ:Y2;return this.attrTween(t,typeof e==="function"?(i.local?q2:K2)(i,r,R2(this,"attr."+t,e)):e==null?(i.local?F2:z2)(i):(i.local?B2:X2)(i,r,e+""))}function $2(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function Z2(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function Q2(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=wj(t);return this.tween(i,(r.local?$2:Z2)(r,e))}function J2(t,e){return function(){E2(this,t).delay=+e.apply(this,arguments)}}function t5(t,e){return e=+e,function(){E2(this,t).delay=e}}function e5(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?J2:t5)(e,t)):N2(this.node(),e).delay}function i5(t,e){return function(){I2(this,t).duration=+e.apply(this,arguments)}}function r5(t,e){return e=+e,function(){I2(this,t).duration=e}}function n5(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?i5:r5)(e,t)):N2(this.node(),e).duration}function s5(t,e){if(typeof e!=="function")throw new Error;return function(){I2(this,t).ease=e}}function a5(t){var e=this._id;return arguments.length?this.each(s5(e,t)):N2(this.node(),e).ease}function o5(t){if(typeof t!=="function")t=Tj(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new U5(r,this._parents,this._name,this._id)}function l5(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new U5(a,this._parents,this._name,this._id)}function u5(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function h5(t,e,i){var r,n,s=u5(e)?E2:I2;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function c5(t,e){var i=this._id;return arguments.length<2?N2(this.node(),i).on.on(t):this.each(h5(i,t,e))}function d5(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function f5(){return this.on("end.remove",d5(this._id))}function p5(t){var e=this._name,i=this._id;if(typeof t!=="function")t=_j(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;T2(u[d],e,i,d,u,N2(h,i))}}}return new U5(s,this._parents,e,i)}function y5(t){var e=this._name,i=this._id;if(typeof t!=="function")t=Mj(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=N2(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){T2(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new U5(s,a,e,i)}var v5=oZ.prototype.constructor;function g5(){return new v5(this._groups,this._parents)}function b5(t,e){var i,r,n;return function(){var s=c$(this,t),a=(this.style.removeProperty(t),c$(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function m5(t){return function(){this.style.removeProperty(t)}}function A5(t,e,i){var r,n;return function(){var s=c$(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function w5(t,e,i){var r,n,s;return function(){var a=c$(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),c$(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function x5(t,e,i){var r=(t+="")==="transform"?BQ:Y2;return e==null?this.styleTween(t,b5(t,r)).on("end.style."+t,m5(t)):this.styleTween(t,typeof e==="function"?w5(t,r,R2(this,"style."+t,e)):A5(t,r,e+""),i)}function S5(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function k5(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,S5(t,e,i==null?"":i))}function L5(t){return function(){this.textContent=t}}function _5(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function C5(t){return this.tween("text",typeof t==="function"?_5(R2(this,"text",t)):L5(t==null?"":t+""))}function D5(){var t=this._name,e=this._id,i=E5();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=N2(l,e);T2(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new U5(r,this._parents,t,i)}var M5=0;function U5(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function T5(t){return oZ().transition(t)}function E5(){return++M5}var I5=oZ.prototype;U5.prototype=T5.prototype={constructor:U5,select:p5,selectAll:y5,filter:o5,merge:l5,selection:g5,transition:D5,call:I5.call,nodes:I5.nodes,node:I5.node,size:I5.size,empty:I5.empty,each:I5.each,on:c5,attr:j2,attrTween:Q2,style:x5,styleTween:k5,text:C5,remove:f5,tween:V2,delay:e5,duration:n5,ease:a5};var N5={time:null,delay:0,duration:250,ease:K1};function W5(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return N5.time=d2(),N5}}return i}function H5(t){var e,i;if(t instanceof U5){e=t._id,t=t._name}else{e=E5(),(i=N5).time=d2(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){T2(l,t,e,u,a,i||W5(l,e))}}}return new U5(r,this._parents,t,e)}oZ.prototype.interrupt=G2;oZ.prototype.transition=H5;var G5=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var P5=new Uint8Array(16);function O5(){if(!G5){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return G5(P5)}var V5=[];for(var R5=0;R5<256;++R5){V5[R5]=(R5+256).toString(16).substr(1)}function Y5(t,e){var i=e||0;var r=V5;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function z5(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||O5)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||Y5(n)}var F5=s.propDefaultValues;var X5=function(){function t(){}return t}();X5.mainTitle="Stacked Bar Chart Title";X5.subTitle="This is the stacked bar chart's subtitle";X5.height=280;X5.width=700;X5.margin={top:400*.01,bottom:400*.01,right:400*.01,left:400*.01};X5.padding={top:20,bottom:50,right:50,left:50};X5.normalized=false;X5.showTotalValue=true;X5.showZeroLabels=false;X5.ordinalAccessor="label";X5.valueAccessor="value";X5.groupAccessor="item";X5.layout=F5.layout;X5.accessibility=F5.accessibility;X5.animationConfig=F5.animationConfig;X5.highestHeadingLevel=F5.highestHeadingLevel;X5.sortOrder=F5.sortOrder;X5.xAxis=F5.xAxis;X5.yAxis=F5.yAxis;X5.wrapLabel=F5.wrapLabel;X5.colorPalette=F5.colorPaletteCategorical;X5.hoverStyle=F5.hoverStyle;X5.clickStyle=F5.clickStyle;X5.referenceStyle=F5.referenceStyle;X5.cursor=F5.cursor;X5.roundedCorner=F5.roundedCorner;X5.barIntervalRatio=F5.barIntervalRatio;X5.hoverOpacity=F5.hoverOpacity;X5.dataLabel=F5.dataLabelMiddle;X5.legend=F5.categoryLegend;X5.tooltipLabel=F5.tooltipLabel;X5.showTooltip=F5.showTooltip;X5.suppressEvents=F5.suppressEvents;X5.referenceLines=F5.referenceLines;X5.annotations=F5.annotations;X5.clickHighlight=F5.clickHighlight;var B5=s.getBrowser,K5=s.verifyTextHasSpace,q5=s.checkAttributeTransitions,j5=s.createTextStrokeFilter,$5=s.drawHoverStrokes,Z5=s.removeHoverStrokes,Q5=s.buildStrokes,J5=s.convertColorsToTextures,t6=s.findTagLevel,e6=s.prepareRenderChange,i6=s.initializeDescriptionRoot,r6=s.initializeElementAccess,n6=s.setElementFocusHandler,s6=s.setElementAccessID,a6=s.setAccessibilityController,o6=s.hideNonessentialGroups,l6=s.setAccessTitle,u6=s.setAccessSubtitle,h6=s.setAccessLongDescription,c6=s.setAccessExecutiveSummary,d6=s.setAccessPurpose,f6=s.setAccessContext,p6=s.setAccessStatistics,y6=s.setAccessChartCounts,v6=s.setAccessXAxis,g6=s.setAccessYAxis,b6=s.setAccessStructure,m6=s.setAccessAnnotation,A6=s.retainAccessFocus,w6=s.checkAccessFocus,x6=s.setElementInteractionAccessState,S6=s.setAccessibilityDescriptionWidth,k6=s.autoTextColor,L6=s.annotate,_6=s.chartAccessors,C6=s.checkInteraction,D6=s.checkClicked,M6=s.checkHovered,U6=s.convertVisaColor,T6=s.drawAxis,E6=s.drawGrid,I6=s.drawLegend,N6=s.setLegendInteractionState,W6=s.drawTooltip,H6=s.formatStats,G6=s.formatDate,P6=s.formatDataLabel,O6=s.getPadding,V6=s.getColors,R6=s.getLicenses,Y6=s.getScopedData,z6=s.initTooltipStyle,F6=s.overrideTitleTooltip,X6=s.placeDataLabels,B6=s.transitionEndAll,K6=s.scopeDataKeys,q6=s.visaColors,j6=s.validateAccessibilityProps,$6=s.roundTo,Z6=s.resolveLabelCollision;var Q6=t("stacked_bar_chart",function(){function t(t){var r=this;e(this,t);this.mainTitle=X5.mainTitle;this.subTitle=X5.subTitle;this.height=X5.height;this.width=X5.width;this.layout=X5.layout;this.highestHeadingLevel=X5.highestHeadingLevel;this.margin=X5.margin;this.padding=X5.padding;this.ordinalAccessor=X5.ordinalAccessor;this.valueAccessor=X5.valueAccessor;this.groupAccessor=X5.groupAccessor;this.sortOrder=X5.sortOrder;this.xAxis=X5.xAxis;this.yAxis=X5.yAxis;this.wrapLabel=X5.wrapLabel;this.normalized=X5.normalized;this.colorPalette=X5.colorPalette;this.hoverStyle=X5.hoverStyle;this.clickStyle=X5.clickStyle;this.referenceStyle=X5.referenceStyle;this.cursor=X5.cursor;this.roundedCorner=X5.roundedCorner;this.barIntervalRatio=X5.barIntervalRatio;this.hoverOpacity=X5.hoverOpacity;this.animationConfig=X5.animationConfig;this.dataLabel=X5.dataLabel;this.showTotalValue=X5.showTotalValue;this.showTooltip=X5.showTooltip;this.tooltipLabel=X5.tooltipLabel;this.accessibility=X5.accessibility;this.legend=X5.legend;this.annotations=X5.annotations;this.showZeroLabels=X5.showZeroLabels;this.referenceLines=X5.referenceLines;this.suppressEvents=X5.suppressEvents;this.clickHighlight=X5.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.series=[];this.extent=[];this.datakeys=[];this.updated=true;this.shouldValidateInteractionKeys=false;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateTableData=false;this.shouldSetColors=false;this.shouldValidateAxes=false;this.shouldValidateClickHighlight=false;this.shouldUpdateScales=false;this.shouldUpdateAnnotations=false;this.shouldResetRoot=false;this.shouldEnterUpdateExit=false;this.shouldSetGlobalSelections=false;this.shouldSetTestingAttributes=false;this.shouldUpdateGeometries=false;this.shouldCheckValueAxis=false;this.shouldCheckLabelAxis=false;this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldUpdateBaseline=false;this.shouldSetSelectionClass=false;this.shouldUpdateCursor=false;this.shouldUpdateCorners=false;this.shouldUpdateLegendData=false;this.shouldValidateLabelPlacement=false;this.shouldValidateDataLabelAccessor=false;this.shouldUpdateLegend=false;this.shouldUpdateLegendInteractivity=false;this.shouldUpdateReferenceLines=false;this.shouldDrawInteractionState=false;this.shouldBindInteractivity=false;this.shouldSetLabelOpacity=false;this.shouldUpdateLabels=false;this.shouldUpdateTotalLabels=false;this.shouldCheckLabelColor=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetTextures=false;this.shouldSetStrokes=false;this.isSafari=B5()==="Safari";this.strokes={};this.textStrokes={};this.topLevel="h2";this.bottomLevel="p";this.textTreatmentHandler=function(t,e,i){var n=lZ(i[e]);var s=r.clickHighlight&&r.clickHighlight.length>0&&D6(t,r.clickHighlight,r.innerInteractionKeys)&&r.clickStyle.color?q6[r.clickStyle.color]||r.clickStyle.color:r.hoverHighlight&&M6(t,r.hoverHighlight,r.innerInteractionKeys)&&r.hoverStyle.color?q6[r.hoverStyle.color]||r.hoverStyle.color:r.preparedColors[e];var a=k6(s);if(!n.classed("textIsMoving")){var o=r.textStrokes[s];if(o!==n.attr("filter")){if(r.isSafari){n.attr("filter",null);setTimeout((function(){n.attr("filter",o)}),0)}else{n.attr("filter",o)}}}else{n.attr("filter",null)}return a};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldSetColors=true;this.shouldSetTextures=true;this.shouldDrawInteractionState=true;this.shouldUpdateScales=true;this.shouldUpdateTableData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLegendData=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateLabels=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetStrokes=true};t.prototype.idWatcher=function(t,e){this.chartID=t;this.stackedBarChartEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldSetTextures=true;this.shouldCheckLabelColor=true;this.shouldDrawInteractionState=true;this.shouldSetStrokes=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetLabelOpacity=true};t.prototype.layoutWatcher=function(t,e){this.interpolating=false;this.shouldValidateLabelPlacement=true;this.shouldUpdateScales=true;this.shouldValidateAxes=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetLabelOpacity=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldUpdateLegendData=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;this.shouldCheckValueAxis=true};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateTableData=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;this.shouldSetGlobalSelections=true;this.shouldCheckValueAxis=true};t.prototype.groupAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldCheckLabelAxis=true;this.shouldUpdateBaseline=true;this.shouldUpdateReferenceLines=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.sortWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldCheckLabelAxis=true};t.prototype.xAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXAxis=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateXGrid=true}};t.prototype.yAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYAxis=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateYGrid=true}};t.prototype.wrapLabelWatcher=function(t,e){this.shouldCheckLabelAxis=true};t.prototype.normalizedWatcher=function(t,e){this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldCheckValueAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateTableData=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true};t.prototype.paletteWatcher=function(t,e){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetSelectionClass=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true};t.prototype.cornerWatcher=function(t,e){this.shouldUpdateCorners=true};t.prototype.intervalRatioWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldSetLabelOpacity=true;this.shouldCheckLabelAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateAnnotations=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.labelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateGeometries=true;this.shouldUpdateTableData=true;var i=t&&t.placement?t.placement:false;var r=e&&e.placement?e.placement:false;var n=t&&t.visible;var s=e&&e.visible;var a=t&&t.labelAccessor?t.labelAccessor:false;var o=e&&e.labelAccessor?e.labelAccessor:false;if(n!==s){this.shouldSetLabelOpacity=true}if(i!==r){this.shouldSetLabelOpacity=true;this.shouldValidateLabelPlacement=true;this.shouldCheckLabelColor=true}if(a!==o){this.shouldValidateDataLabelAccessor=true}};t.prototype.showTotalValueWatcher=function(t,e){this.shouldUpdateTotalLabels=true;this.shouldUpdateTableData=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGeometryAriaLabels=true};t.prototype.showTooltipWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideTextures?t.hideTextures:false;var w=e&&e.hideTextures?e.hideTextures:false;if(A!==w){this.shouldSetTextures=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true}var x=t&&t.showSmallLabels?t.showSmallLabels:false;var S=e&&e.showSmallLabels?e.showSmallLabels:false;if(x!==S){this.shouldSetLabelOpacity=true}var k=t&&t.hideStrokes?t.hideStrokes:false;var L=e&&e.hideStrokes?e.hideStrokes:false;if(k!==L){this.shouldSetStrokes=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true}var _=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var C=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var D=t&&t.elementsAreInterface?t.elementsAreInterface:false;var M=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(_!==C||D!==M){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(D!==M){this.shouldSetSelectionClass=true}};t.prototype.showZeroLabelsWatcher=function(t,e){this.shouldUpdateLabels=true};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldUpdateLegendInteractivity=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldCheckValueAxis=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true};t.prototype.hoverWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.clickWatcher=function(t,e){this.shouldValidateClickHighlight=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"stacked-bar-chart-"+z5();t.stackedBarChartEl.id=t.chartID;t.setTagLevels();t.prepareData();t.prepareLegendData();t.setDimensions();t.prepareScales();t.validateClickHighlight();t.validateInteractionKeys();t.validateDataLabelAccessor();t.validateAxes();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTextures();t.setStrokes();t.drawXGrid();t.drawYGrid();t.setGlobalSelections();t.setTestingAttributes();t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterTotalDataLabels();t.updateTotalDataLabels();t.exitTotalDataLabels();t.setRoundedCorners();t.drawGeometries();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawLegendElements();t.bindLegendInteractivity();t.validateLabelPlacement();t.drawDataLabels();t.drawTotalDataLabels();t.drawReferenceLines();t.setSelectedClass();t.updateInteractionState();t.setLabelOpacity();t.checkLabelColorAgainstBackground();t.updateCursor();t.bindInteractivity();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();t.drawBaseline();o6(t.root.node(),t.barG.node());t.setGroupAccessibilityID();t.onChangeHandler();t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldSetTextures){t.setTextures();t.shouldSetTextures=false}if(t.shouldSetStrokes){t.setStrokes();t.shouldSetStrokes=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldEnterUpdateExit){t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterTotalDataLabels();t.updateTotalDataLabels();t.exitTotalDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateGeometries){t.drawGeometries();t.shouldUpdateGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateCorners){t.setRoundedCorners();t.shouldUpdateCorners=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldUpdateTotalLabels){t.drawTotalDataLabels();t.shouldUpdateTotalLabels=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldCheckLabelColor){t.checkLabelColorAgainstBackground();t.shouldCheckLabelColor=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateLegendInteractivity){t.bindLegendInteractivity();t.shouldUpdateLegendInteractivity=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateBaseline){t.drawBaseline();t.shouldUpdateBaseline=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;j6(this.chartID,this.accessibility,{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined,tooltipLabel:this.tooltipLabel,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor},misc:{normalized:this.normalized}})}};t.prototype.validateLabelPlacement=function(){if(this.layout==="vertical"){if(!(this.dataLabel.placement==="top"||this.dataLabel.placement==="middle"||this.dataLabel.placement==="bottom"||this.dataLabel.placement==="auto")){this.dataLabel.placement="middle"}}else{if(!(this.dataLabel.placement==="end"||this.dataLabel.placement==="middle"||this.dataLabel.placement==="base"||this.dataLabel.placement==="auto")){this.dataLabel.placement="middle"}}};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]};t.prototype.validateDataLabelAccessor=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor};t.prototype.validateAxes=function(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!(this.layout==="vertical")&&this.xAxis.gridVisible});this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:this.layout==="vertical"&&this.yAxis.gridVisible})};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?O6(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.prepareData=function(){var t=this;this.extent=[0,0];var e=[];this.data.forEach((function(t){var i=Object.keys(t);var r={};i.forEach((function(e){r[e]=!(t[e]instanceof Date)?t[e]:new Date(t[e].getTime())}));e.push(r)}));var i=CZ().key((function(e){e[t.valueAccessor]=parseFloat(e[t.valueAccessor]);e[t.groupAccessor]=e[t.groupAccessor]instanceof Date?G6({date:e[t.groupAccessor],format:t.layout==="vertical"?t.xAxis.format:t.yAxis.format,offsetTimezone:true}):e[t.groupAccessor];return e[t.groupAccessor]})).entries(e);this.interpolating=this.series.length?this.series:"";if(this.interpolating){this.interpolating.stackOrder=this.stackOrder}var r={};var n=function(e){var i=0;var n=e.length;var s=[];t.stackOrder={};var a=function(){var n=Object.assign({},e[i]);var a=0;var o=0;var l=0;var u={positive:0,negative:0};var h=e[i].values;var c=h.length;n.values=[];var d=0;var f=function(){var e=Object.assign({},h[a]);var i=e[t.valueAccessor];if(i>=0){e.stackEnd=u.positive;u.positive+=i;e.stackStart=u.positive}else{e.stackStart=u.negative;u.negative+=i;e.stackEnd=u.negative}var s=t.stackOrder[e[t.groupAccessor]];if(!s){t.stackOrder[e[t.groupAccessor]]={};s=t.stackOrder[e[t.groupAccessor]]}if(!s[e[t.ordinalAccessor]]){s[e[t.ordinalAccessor]]={previous:d,value:i,stackStart:e.stackStart,stackEnd:e.stackEnd}}e.enteringStackStart=false;if(t.interpolating&&t.interpolating.stackOrder[e[t.groupAccessor]]){var c=t.interpolating.stackOrder[e[t.groupAccessor]];var f=function(t){if(t===0){return 0}else if(c[t]){if(i>=0&&c[t].value>=0){return c[t].stackStart}else if(i<0&&c[t].value<0){return c[t].stackEnd}}var e=s[t].previous;return f(e)};if(!c[e[t.ordinalAccessor]]){e.enteringStackStart=f(d)}}d=e[t.ordinalAccessor];e.getSum=function(){return n.sum};o+=i;if(i>0){l+=i}if(!r[e[t.ordinalAccessor]]){r[e[t.ordinalAccessor]]=1}n.values.push(e)};for(a=0;a<c;a++){f()}if(u.positive>t.extent[1]){t.extent[1]=u.positive}if(u.negative<t.extent[0]){t.extent[0]=u.negative}n.sum=o;n.sumMessage="Sum "+o;n.sumAboveZero=l;s.push(n)};for(i=0;i<n;i++){a()}return s};n(i);this.datakeys=Object.keys(r);this.series=n(i);if(this.sortOrder==="asc"){this.series=__spreadArrays(this.series).sort((function(t,e){return t.sum-e.sum}))}else if(this.sortOrder==="desc"){this.series=__spreadArrays(this.series).sort((function(t,e){return e.sum-t.sum}))}};t.prototype.prepareLegendData=function(){this.legendData=this.series[0].values};t.prototype.validateClickHighlight=function(){var t=this;this.clickHighlight.map((function(e){e[t.groupAccessor]=e[t.groupAccessor]instanceof Date?G6({date:e[t.groupAccessor],format:t.layout==="vertical"?t.xAxis.format:t.yAxis.format,offsetTimezone:true}):e[t.groupAccessor]}))};t.prototype.setTableData=function(){var t=[];this.series.forEach((function(e){e.values.forEach((function(e){t.push(e)}))}));var e=K6(this,_6,"stacked-bar-chart");this.tableData=Y6(t,e);this.tableColumns=Object.keys(e)};t.prototype.setColors=function(){this.preparedColors=this.colors?U6(this.colors):V6(this.colorPalette,this.datakeys.length)};t.prototype.setTextures=function(){var t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6){this.colorArr=this.preparedColors}else{var e=t;var i=J5({colors:e,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical",disableTransitions:!this.duration});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}};t.prototype.setStrokes=function(){var t=this;var e=this.preparedColors.range?this.preparedColors.range():this.preparedColors;this.strokes=Q5({root:this.svg.node(),id:this.chartID,colors:e,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,stacked:true});this.textStrokes={};e.forEach((function(e){t.textStrokes[e]=j5({root:t.svg.node(),id:t.chartID,color:e})}));if(this.clickStyle&&this.clickStyle.color){this.textStrokes[this.clickStyle.color]=j5({root:this.svg.node(),id:this.chartID,color:this.clickStyle.color})}if(this.hoverStyle&&this.hoverStyle.color){this.textStrokes[this.hoverStyle.color]=j5({root:this.svg.node(),id:this.chartID,color:this.hoverStyle.color})}};t.prototype.prepareScales=function(){var t=this.minValueOverride&&this.minValueOverride<this.extent[0]?this.minValueOverride:this.extent[0];var e=this.maxValueOverride||this.extent[1];var i=this.normalized?[0,1]:[t,e];if(this.interpolating){this.interpolating.oldXDomain=this.x.domain();this.interpolating.oldXRange=this.x.range();this.interpolating.oldYDomain=this.y.domain();this.interpolating.oldYRange=this.y.range()}if(this.layout==="vertical"){if(this.interpolating){this.interpolating.padding=this.x.padding();this.interpolating.x=GZ().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange).padding(this.interpolating.padding);this.interpolating.y=TJ().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange)}this.y=TJ().domain(i).range([this.innerPaddedHeight,0]);this.x=GZ().domain(this.series.map((function(t){return t.key}))).range([0,this.innerPaddedWidth]).padding(this.barIntervalRatio)}else if(this.layout==="horizontal"){if(this.interpolating){this.interpolating.padding=this.y.padding();this.interpolating.x=TJ().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange);this.interpolating.y=GZ().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange).padding(this.interpolating.padding)}this.x=TJ().domain(i).range([0,this.innerPaddedWidth]);this.y=GZ().domain(this.series.map((function(t){return t.key}))).range([0,this.innerPaddedHeight]).padding(this.barIntervalRatio)}};t.prototype.renderRootElements=function(){this.svg=lZ(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","grid-group");this.barG=this.rootG.append("g").attr("class","stacked-bar-group");this.labelG=this.rootG.append("g").attr("class","stacked-bar-dataLabel-group");this.totalLabels=this.rootG.append("g").attr("class","bar-dataLabel-group");this.legendG=lZ(this.stackedBarChartEl).select(".stacked-bar-legend").append("svg");this.tooltipG=lZ(this.stackedBarChartEl).select(".stacked-bar-tooltip");this.references=this.rootG.append("g").attr("class","stacked-bar-reference-line-group")};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){lZ(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").attr("data-testid","chart-container");lZ(this.stackedBarChartEl).select(".stacked-bar-main-title").attr("data-testid","main-title");lZ(this.stackedBarChartEl).select(".stacked-bar-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.barG.attr("data-testid","stacked-bar-group");this.updateBarWrappers.attr("data-testid","stacked-bar-wrapper").attr("data-id",(function(t){return"stacked-bar-wrapper-"+t.key}));this.update.attr("data-testid","bar").attr("data-id",(function(e){return"bar-"+e[t.groupAccessor]+"-"+e[t.ordinalAccessor]}));this.labelG.attr("data-testid","stacked-bar-dataLabel-group");this.updateLabelWrappers.attr("data-testid","stacked-bar-dataLabel-wrapper").attr("data-id",(function(t){return"stacked-bar-dataLabel-wrapper-"+t.key}));this.updateLabels.attr("data-testid","dataLabel").attr("data-id",(function(e){return"dataLabel-"+e[t.groupAccessor]+"-"+e[t.ordinalAccessor]}));this.totalLabels.attr("data-testid","stacked-bar-totalLabel-group");this.updateTotalLabels.attr("data-testid","totalLabel").attr("data-id",(function(t){return"totalLabel-"+t.key}));this.references.attr("data-testid","reference-line-group");this.svg.select("defs").attr("data-testid","pattern-defs");this.references.selectAll(".stacked-bar-reference-line").attr("data-testid","reference-line");this.references.selectAll(".stacked-bar-reference-line-label").attr("data-testid","reference-line-label")}else{lZ(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").attr("data-testid",null);lZ(this.stackedBarChartEl).select(".stacked-bar-main-title").attr("data-testid",null);lZ(this.stackedBarChartEl).select(".stacked-bar-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.barG.attr("data-testid",null);this.updateBarWrappers.attr("data-testid",null).attr("data-id",null);this.update.attr("data-testid",null).attr("data-id",null);this.labelG.attr("data-testid",null);this.updateLabelWrappers.attr("data-testid",null).attr("data-id",null);this.updateLabels.attr("data-testid",null).attr("data-id",null);this.totalLabels.attr("data-testid",null);this.updateTotalLabels.attr("data-testid",null).attr("data-id",null);this.references.attr("data-testid",null);this.svg.select("defs").attr("data-testid",null);this.references.selectAll(".stacked-bar-reference-line").attr("data-testid",null);this.references.selectAll(".stacked-bar-reference-line-label").attr("data-testid",null)}};t.prototype.reSetRoot=function(){var t=e6({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:q1});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=e6({selection:this.root,duration:this.duration,namespace:"root_reset",easing:q1});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=e6({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:q1});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");S6(this.chartID,this.width)};t.prototype.drawXAxis=function(){T6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel&&this.layout==="vertical"?this.x.bandwidth():"",format:this.xAxis.format,dateFormat:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible,duration:this.duration})};t.prototype.drawYAxis=function(){T6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,dateFormat:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible,duration:this.duration})};t.prototype.setXAxisAccessibility=function(){v6({rootEle:this.stackedBarChartEl,hasXAxis:this.innerXAxis?this.innerXAxis.visible:false,xAxis:this.layout==="vertical"?this.x||false:this.y||false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){g6({rootEle:this.stackedBarChartEl,hasYAxis:this.innerYAxis?this.innerYAxis.visible:false,yAxis:this.layout==="vertical"?this.y||false:this.x||false,yAxisLabel:this.yAxis.label?this.yAxis.label:""})};t.prototype.drawBaseline=function(){if(this.layout==="vertical"){T6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0)||-1,duration:this.duration})}if(this.layout==="horizontal"){T6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,padding:this.padding,markOffset:this.x(0)||-1,duration:this.duration})}};t.prototype.drawXGrid=function(){E6(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.innerXAxis.gridVisible,this.xAxis.tickInterval,this.duration)};t.prototype.drawYGrid=function(){E6(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.innerYAxis.gridVisible,this.yAxis.tickInterval,this.duration)};t.prototype.setGlobalSelections=function(){var t=this;var e=this.barG.selectAll(".stacked-bar-series").data(this.series,(function(t){return t.key}));this.enterBarWrappers=e.enter().append("g");this.exitBarWrappers=e.exit();this.updateBarWrappers=e.merge(this.enterBarWrappers);var i=this.updateBarWrappers.selectAll(".stacked-bar").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enter=i.enter().append("rect");this.exit=i.exit();this.update=i.merge(this.enter);this.exitSize=this.exit.size();this.enterSize=this.enter.size();var r=this.labelG.selectAll(".stacked-bar-dataLabel-series").data(this.series,(function(t){return t.key}));this.enterLabelWrappers=r.enter().append("g");this.exitLabelWrappers=r.exit();this.updateLabelWrappers=r.merge(this.enterLabelWrappers);var n=this.updateLabelWrappers.selectAll(".stacked-bar-dataLabel").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enterLabels=n.enter().append("text");this.exitLabels=n.exit();this.updateLabels=n.merge(this.enterLabels);var s=this.totalLabels.selectAll(".bar-dataLabel-group text").data(this.series,(function(t){return t.key}));this.enterTotalLabels=s.enter().append("text");this.exitTotalLabels=s.exit();this.updateTotalLabels=s.merge(this.enterTotalLabels)};t.prototype.enterGeometries=function(){var t=this;this.enter.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"innerPaddedWidth":"innerPaddedHeight";this.enter.attr("class","stacked-bar").attr("cursor",!this.suppressEvents?this.cursor:null).each((function(t,e,i){r6(i[e])})).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr(r,(function(e){var i=t[r];if(t.interpolating){i=t.interpolating[r]}var n=e.stackEnd;if(e.stackEnd<0){n=e.stackStart}if(typeof e.enteringStackStart==="number"){n=e.enteringStackStart}var s=!t.normalized?1:e.getSum();return i(n/s)})).attr(n,0).attr(e,(function(i){var r=t[e];if(t.interpolating){r=t.interpolating[e]}return r(i[t.groupAccessor])})).attr(i,(function(){var i=t[e];if(t.interpolating){i=t.interpolating[e]}return i.bandwidth()}));this.enterBarWrappers.attr("class","stacked-bar-series entering").each((function(t,e,i){r6(i[e])})).selectAll(".stacked-bar").attr(n,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackEnd/i)-t.y(e.stackStart/i):t.x(e.stackStart/i)-t.x(e.stackEnd/i)}));if(this.defaults){this.enter.attr("opacity",(function(e){return C6(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}else{this.enter.attr("opacity",0);this.enterBarWrappers.selectAll(".stacked-bar").attr(r,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackStart/i):t.x(e.stackEnd/i)})).attr(e,(function(i){var r=t[e](i[t.groupAccessor])+t[e].bandwidth()/2;r=t[e](i[t.groupAccessor])+t[e].bandwidth()/2*(r/(t[s]/2));return r})).attr(i,0)}this.enterBarWrappers.order();this.enter.order()};t.prototype.updateGeometries=function(){var t=this;this.update.interrupt();this.update.transition("opacity").duration((function(e,i,r){if(lZ(r[i]).classed("entering")){lZ(r[i]).classed("entering",false);return t.duration}return 0})).ease(q1).attr("opacity",(function(e){return C6(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).call(B6,(function(){t.update.classed("entering",false)}))};t.prototype.exitGeometries=function(){var t=this;this.exit.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"innerPaddedWidth":"innerPaddedHeight";this.exit.attr("filter",null).transition("exit").duration(this.duration).ease(q1).attr(n,0).attr(r,(function(e){var i=e.stackEnd;if(e.stackEnd<0){i=e.stackStart}var n=!t.normalized?1:e.getSum();return t[r](i/n)})).attr(e,(function(i){return t[e](i[t.groupAccessor])}));this.exitBarWrappers.selectAll(".stacked-bar").attr("filter",null).transition("exit").duration(this.duration).ease(q1).attr("opacity",0).attr(r,(function(t,e,i){return lZ(i[e]).attr(r)})).attr(e,(function(r,n,a){var o=lZ(a[n]);var l=+o.attr(e)+ +o.attr(i)/2;l=+o.attr(e)+ +o.attr(i)/2*(l/(t[s]/2));return l})).attr(n,(function(t,e,i){return lZ(i[e]).attr(n)})).attr(i,0);this.update.transition("accessibilityAfterExit").duration(this.duration).ease(q1).call(B6,(function(){var e=w6(t.rootG.node());t.exit.remove();t.exitBarWrappers.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();A6({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawGeometries=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";this.updateBarWrappers.transition("update").duration(this.duration).ease(q1).call(B6,(function(){t.updateBarWrappers.classed("entering",false)}));this.update.classed("geometryIsMoving",(function(s,a,o){var l=!t.normalized?1:s.getSum();var u=q5(lZ(o[a]),[{attr:e,numeric:true,newValue:t[e](s[t.groupAccessor])},{attr:i,numeric:true,newValue:t[e].bandwidth()},{attr:r,numeric:true,newValue:t.layout==="vertical"?t.y(s.stackStart/l):t.x(s.stackEnd/l)},{attr:n,numeric:true,newValue:t.layout==="vertical"?t.y(s.stackEnd/l)-t.y(s.stackStart/l):t.x(s.stackStart/l)-t.x(s.stackEnd/l)}]);return u})).attr("data-"+e,(function(i){return t[e](i[t.groupAccessor])})).attr("data-"+i,this[e].bandwidth()).attr("data-"+r,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackStart/i):t.x(e.stackEnd/i)})).attr("data-"+n,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackEnd/i)-t.y(e.stackStart/i):t.x(e.stackStart/i)-t.x(e.stackEnd/i)})).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).transition("update").duration(this.duration).ease(q1).attr(r,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackStart/i):t.x(e.stackEnd/i)})).attr(n,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackEnd/i)-t.y(e.stackStart/i):t.x(e.stackStart/i)-t.x(e.stackEnd/i)})).attr(e,(function(i){return t[e](i[t.groupAccessor])})).attr(i,this[e].bandwidth()).call(B6,(function(){setTimeout((function(){t.update.classed("geometryIsMoving",false);t.updateInteractionState();t.updateLabels.classed("textIsMoving",false);t.checkLabelColorAgainstBackground()}),0);A6({parentGNode:t.rootG.node()})}))};t.prototype.updateInteractionState=function(){var t=this;Z5(this.svg.node());this.update.interrupt("opacity");this.updateLabels.interrupt("opacity");this.update.attr("opacity",(function(e){return C6(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).attr("fill",(function(e,i){var r=t.clickHighlight&&t.clickHighlight.length>0&&D6(e,t.clickHighlight,t.innerInteractionKeys);var n=t.hoverHighlight&&M6(e,t.hoverHighlight,t.innerInteractionKeys);var s=t.colorArr[i];return r&&t.clickStyle.color?q6[t.clickStyle.color]||t.clickStyle.color:r?s:n&&t.hoverStyle.color?q6[t.hoverStyle.color]||t.hoverStyle.color:s})).each((function(e,i,r){var n=lZ(r[i]);if(!t.accessibility.hideStrokes&&!n.classed("geometryIsMoving")){var s=t.clickHighlight&&t.clickHighlight.length>0&&D6(e,t.clickHighlight,t.innerInteractionKeys);var a=t.hoverHighlight&&M6(e,t.hoverHighlight,t.innerInteractionKeys);var o=t.preparedColors[i];var l=s?"click":a?"hover":"rest";var u=s&&t.clickStyle.color?q6[t.clickStyle.color]||t.clickStyle.color:s?o:a&&t.hoverStyle.color?q6[t.hoverStyle.color]||t.hoverStyle.color:o;if(l==="hover"){$5({inputElement:r[i],id:t.chartID,key:e[t.ordinalAccessor]+e[t.groupAccessor],strokeWidth:t.hoverStyle.strokeWidth,fill:u})}var h=t.strokes[l+u];if(h!==n.attr("filter")){if(t.isSafari){n.attr("filter",null);setTimeout((function(){n.attr("filter",h)}),0)}else{n.attr("filter",h)}}}else{n.attr("filter",null)}}));A6({parentGNode:this.rootG.node()});N6({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.setLabelOpacity=function(){this.processLabelOpacity(this.updateLabels);this.updateTotalLabels.attr("opacity",this.showTotalValue&&!this.normalized?1:0)};t.prototype.processLabelOpacity=function(t){var e=this;var i=this.dataLabel.visible?1:0;var r=this.layout==="vertical"?"x":"y";var n=this.layout==="vertical"?"width":"height";var s=this.layout==="vertical"?"height":"width";t.attr("opacity",(function(t){var a=!e.normalized?1:t.getSum();var o={};o[n]=e[r].bandwidth();o[s]=e.layout==="vertical"?e.y(t.stackEnd/a)-e.y(t.stackStart/a):e.x(t.stackStart/a)-e.x(t.stackEnd/a);var l=e.dataLabel.placement==="auto"||e.dataLabel.collisionHideOnly||e.accessibility.showSmallLabels||K5({text:P6(t,e.innerLabelAccessor,e.dataLabel.format,e.normalized),dimensions:o,fontSize:14});return l?C6(t,i,e.hoverOpacity,e.hoverHighlight,e.clickHighlight,e.innerInteractionKeys)<1?0:1:0}))};t.prototype.checkLabelColorAgainstBackground=function(){var t=this;this.updateLabels.attr("fill",(function(e,i,r){return t.textTreatmentHandler(e,i,r)}))};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.setRoundedCorners=function(){this.update.transition("shared_update").duration(this.duration).ease(q1).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=C6(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;x6(r[i],n,s);return n}))};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);lZ(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null)};t.prototype.enterDataLabels=function(){this.enterLabelWrappers.attr("class","stacked-bar-dataLabel-series entering");this.enterLabels.attr("class","stacked-bar-dataLabel entering").style("pointer-events","none").classed("stacked-bar-dataLabel-"+this.layout,true).attr("opacity",0).attr("fill",this.textTreatmentHandler);X6({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized})};t.prototype.updateDataLabels=function(){var t=this;this.updateLabels.interrupt();var e=this.dataLabel.visible?1:0;this.updateLabelWrappers.transition("update").duration(this.duration).ease(q1).call(B6,(function(){t.updateLabelWrappers.classed("entering",false)}));this.updateLabels.transition("opacity").ease(q1).duration((function(e,i,r){if(lZ(r[i]).classed("entering")){lZ(r[i]).classed("entering",false);return t.duration}return 0})).attr("opacity",(function(i){return C6(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1})).call(B6,(function(){t.updateLabels.classed("entering",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabelWrappers.selectAll("text").attr("filter",null).transition("exit").ease(q1).duration(this.duration/2).attr("opacity",0).call(B6,(function(){t.exitLabelWrappers.remove()}));this.exitLabels.attr("filter",null).transition("exit").ease(q1).duration(this.duration/2).attr("opacity",0).remove()};t.prototype.drawDataLabels=function(){var t=this;var e=15;var i=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;this.updateLabels.classed("stacked-bar-dataLabel-horizontal",false).classed("stacked-bar-dataLabel-vertical",false).classed("stacked-bar-dataLabel-"+this.layout,true).text((function(i,r,n){if(i[t.valueAccessor]===0&&!t.showZeroLabels){return""}if(r===0){var s=n[r];var a=getComputedStyle(s);var o=parseFloat(a.fontSize);e=Math.max(o-1,1)}return P6(i,t.innerLabelAccessor,t.dataLabel.format,t.normalized)})).style("visibility",(function(e,i,r){return t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly?lZ(r[i]).style("visibility"):null}));this.updateLabelWrappers.transition("update").duration(this.duration).ease(q1).call(B6,(function(){t.updateLabelWrappers.classed("entering",false)}));var r=this.layout==="vertical"?"x":"y";var n=this.layout==="vertical"?"y":"x";var s=this.layout==="vertical"?"stackStart":"stackEnd";var a=this.updateLabels.classed("textIsMoving",(function(e){if(!t.interpolating){return false}var i=!t.normalized?1:e.getSum();var a=t.interpolating[r](e[t.groupAccessor])!==t[r](e[t.groupAccessor])||t.interpolating[n](e[s]/i)!==t[n](e[s]/i);return a})).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).transition("update").ease(q1).duration(this.duration);var o={vertical:{top:{validPositions:["bottom"],offsets:[5]},middle:{validPositions:["middle"],offsets:[1]},bottom:{validPositions:["top"],offsets:[e/2]}},horizontal:{right:{validPositions:["left"],offsets:[8]},middle:{validPositions:["middle"],offsets:[1]},left:{validPositions:["right"],offsets:[20]}}};var l=this.dataLabel&&this.dataLabel.collisionPlacement;var u=l&&o[this.layout][l]?this.dataLabel.collisionPlacement:this.layout==="vertical"?"top":"right";this.bitmaps=X6({root:a,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",labelSelection:a,avoidMarks:[this.update],validPositions:i?["middle"]:o[this.layout][u].validPositions,offsets:i?[1]:o[this.layout][u].offsets,accessors:[this.groupAccessor,this.ordinalAccessor,"key"],size:[$6(this.width,0),$6(this.height,0)],boundsScope:i?undefined:u,hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})};t.prototype.enterTotalDataLabels=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"y":"x";this.enterTotalLabels.attr("class","bar-dataLabel-"+this.layout).attr("opacity",0).attr("fill",q6.dark_text).attr(e,(function(i){return t[e](i.key)+t[e].bandwidth()/2})).attr(i,(function(e){return t[i](e.sumAboveZero)+4}))};t.prototype.updateTotalDataLabels=function(){var t=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.transition("total_opacity").ease(q1).duration(this.duration).attr("opacity",t)};t.prototype.exitTotalDataLabels=function(){this.exitTotalLabels.transition("exit").ease(q1).duration(this.duration/2).attr("opacity",0).remove()};t.prototype.drawTotalDataLabels=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"y":"x";var r=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.text((function(e){return H6(e.sum,t.dataLabel.format)})).attr("text-anchor",this.layout==="vertical"?"middle":"start");var n=this.updateTotalLabels.classed("bar-dataLabel-horizontal",false).classed("bar-dataLabel-vertical",false).classed("bar-dataLabel-"+this.layout,true).attr("data-"+e,(function(i){return t[e](i.key)+t[e].bandwidth()/2})).attr("data-"+i,(function(e){return t[i](e.sumAboveZero)})).attr("data-use-dx",true).attr("data-use-dy",true).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("dx",this.layout==="vertical"?"0":"0.3em").attr("dy",this.layout==="vertical"?"-0.3em":".3em").style("visibility",(function(e,i,r){return t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly?lZ(r[i]).style("visibility"):null})).transition("update").ease(q1).duration(this.duration).attr("opacity",r);if(this.showTotalValue&&(this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly)){this.bitmaps=Z6({bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[this.update],validPositions:["middle"],offsets:[1],accessors:[this.ordinalAccessor],size:[$6(this.width,0),$6(this.height,0)],hideOnly:true});n.attr(e,(function(i){return t[e](i.key)+t[e].bandwidth()/2})).attr(i,(function(e){return t[i](e.sumAboveZero)}))}else{n.attr(e,(function(i){return t[e](i.key)+t[e].bandwidth()/2})).attr(i,(function(e){return t[i](e.sumAboveZero)}))}};t.prototype.drawReferenceLines=function(){var t=this;var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class",".stacked-bar-reference").attr("opacity",1);var r=i.append("line");r.attr("class","stacked-bar-reference-line").attr("opacity",0);var n=i.append("text");n.attr("class","stacked-bar-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".stacked-bar-reference-line").data((function(t){return[t]})).transition("merge").ease(q1).duration(this.duration);var o=s.selectAll(".stacked-bar-reference-line-label").data((function(t){return[t]})).transition("merge").ease(q1).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(q1).duration(this.duration).attr("opacity",0).remove();if(this.layout==="vertical"){i.attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));s.transition("merge").ease(q1).duration(this.duration).attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em")}else if(this.layout==="horizontal"){i.attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));s.transition("merge").ease(q1).duration(this.duration).attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));r.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);a.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);n.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}));o.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}))}a.style("stroke",q6[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",q6[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.drawAnnotations=function(){var t=this;var e=this.layout!=="horizontal"?this.x:this.y;var i=this.layout!=="horizontal"?this.y:this.x;if(this.data[0][this.groupAccessor]instanceof Date){var r=wZ(this.data,(function(e){return e[t.groupAccessor]}));var n=xZ(this.data,(function(e){return e[t.groupAccessor]}));var s=this.layout!=="horizontal"?[0,this.innerPaddedWidth]:[this.innerPaddedHeight,0];e=B1().domain([n,r]).range(s)}L6({source:this.rootG.node(),data:this.annotations,xScale:this.layout!=="horizontal"?e:i,xAccessor:this.layout!=="horizontal"?this.groupAccessor:this.valueAccessor,yScale:this.layout!=="horizontal"?i:e,yAccessor:this.layout!=="horizontal"?this.valueAccessor:this.groupAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})};t.prototype.setAnnotationAccessibility=function(){m6(this.stackedBarChartEl,this.annotations)};t.prototype.drawLegendElements=function(){I6({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.bindLegendInteractivity=function(){var t=this;lZ(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null).on("click",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?function(e){return t.hoverFunc.emit(e)}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?function(){return t.onMouseOutHandler()}:null)};t.prototype.setTagLevels=function(){this.topLevel=t6(this.highestHeadingLevel);this.bottomLevel=t6(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){i6({rootEle:this.stackedBarChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"stacked-bar-chart",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){a6({node:this.svg.node(),chartTag:"stacked-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:K6(this,_6,"stacked-bar-chart"),groupAccessor:this.groupAccessor,groupName:"stack",groupKeys:this.showTotalValue?["sumMessage"]:false,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){r6(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=K6(this,_6,"stacked-bar-chart");this.update.each((function(i,r,n){n6({node:n[r],geomType:"bar",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupKeys:t.showTotalValue?["sumMessage"]:false,groupName:"stack",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});s6({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateBarWrappers.each((function(e,i,r){s6({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){l6(this.stackedBarChartEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){u6(this.stackedBarChartEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){h6(this.stackedBarChartEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){c6(this.stackedBarChartEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){d6(this.stackedBarChartEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){f6(this.stackedBarChartEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){p6(this.stackedBarChartEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){y6({rootEle:this.stackedBarChartEl,parentGNode:this.barG.node(),chartTag:"stacked-bar-chart",geomType:"bar",groupName:"stack"})};t.prototype.setChartAccessibilityStructureNotes=function(){b6(this.stackedBarChartEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){F6(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&t){this.eventsTooltip({data:t,evt:K$,isToShow:true})}};t.prototype.onMouseOutHandler=function(){F6(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){z6(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;W6({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,normalized:this.normalized,chartType:"stacked"})};t.prototype.render=function(){var t="light";this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldCheckValueAxis){if(this.layout==="horizontal"){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true}else if(this.layout==="vertical"){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true}this.shouldCheckValueAxis=false}if(this.shouldCheckLabelAxis){if(this.layout==="vertical"){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true}else if(this.layout==="horizontal"){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true}this.shouldCheckLabelAxis=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateLegendData){this.prepareLegendData();this.shouldUpdateLegendData=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldValidateClickHighlight){this.validateClickHighlight();this.shouldValidateClickHighlight=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldValidateAxes){this.validateAxes();this.shouldValidateAxes=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldValidateLabelPlacement){this.validateLabelPlacement();this.shouldValidateLabelPlacement=false}return r("div",{class:"o-layout is--"+this.layout+" "+t},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"stacked-bar-main-title vcl-main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions stacked-bar-sub-title vcl-sub-title"},this.subTitle),r("div",{class:"stacked-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"bar",groupName:"stack",chartTag:"stacked-bar-chart",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-stacked-bar-container"}),r("div",{class:"stacked-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))};t.prototype.init=function(){var t=Object.keys(X5);var e=0;var i={mainTitle:{exception:""},subTitle:{exception:""},showTooltip:{exception:false},wrapLabel:{exception:false},showTotalValue:{exception:false},barIntervalRatio:{exception:0},hoverOpacity:{exception:0}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:X5[t[e]]}};Object.defineProperty(t.prototype,"stackedBarChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],normalized:["normalizedWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTotalValue:["showTotalValueWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],showZeroLabels:["showZeroLabelsWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],interactionKeys:["interactionWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}stacked-bar-chart{cursor:default}stacked-bar-chart .annotations{pointer-events:none}stacked-bar-chart .annotations .handle{pointer-events:all}stacked-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}stacked-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}stacked-bar-chart .hidden{display:none}stacked-bar-chart #visa-viz-d3-stacked-bar-container{clear:both}stacked-bar-chart .stacked-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}stacked-bar-chart .stacked-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}stacked-bar-chart .stacked-bar-legend .key-dot{margin:3px 8px}stacked-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}stacked-bar-chart .light .grid path{stroke-width:0}stacked-bar-chart .light .axis{font-size:12px}stacked-bar-chart .light .axis .tick text{fill:#767676}stacked-bar-chart .light .axis .tick line{stroke:#767676}stacked-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .light .y.axis path{stroke:#767676;opacity:0}stacked-bar-chart .light .x.axis path{stroke:#767676}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-vertical{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-horizontal{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}stacked-bar-chart .dark .grid path{stroke-width:0}stacked-bar-chart .dark .axis{font-size:12px}stacked-bar-chart .dark .axis .tick line{stroke:lightgrey}stacked-bar-chart .dark .axis .tick text{fill:grey}stacked-bar-chart .dark .axis path{stroke:black}stacked-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .dark .o-layout--chart svg{background:black}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=R6()}}}));