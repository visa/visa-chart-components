/**
 * Copyright (c) 2021 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
import{r as t,c as i,h as s,g as n}from"./p-b0e13577.js";import{U as r}from"./p-aa4275e2.js";var e="http://www.w3.org/1999/xhtml";const h={svg:"http://www.w3.org/2000/svg",xhtml:e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),h.hasOwnProperty(i)?{space:h[i],local:t}:t}function o(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===e&&i.documentElement.namespaceURI===e?i.createElement(t):i.createElementNS(s,t)}}function u(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function c(t){var i=a(t);return(i.local?u:o)(i)}function l(){}function f(t){return null==t?l:function(){return this.querySelector(t)}}function d(){return[]}function v(t){return null==t?d:function(){return this.querySelectorAll(t)}}function p(t){return function(){return this.matches(t)}}function y(t){return new Array(t.length)}function w(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function g(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new w(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function m(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new w(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function b(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function M(t){return function(){this.removeAttribute(t)}}function k(t){return function(){this.removeAttributeNS(t.space,t.local)}}function x(t,i){return function(){this.setAttribute(t,i)}}function A(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function W(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function N(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function L(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function S(t){return function(){this.style.removeProperty(t)}}function T(t,i,s){return function(){this.style.setProperty(t,i,s)}}function E(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function D(t,i){return t.style.getPropertyValue(i)||L(t).getComputedStyle(t,null).getPropertyValue(i)}function $(t){return function(){delete this[t]}}function C(t,i){return function(){this[t]=i}}function I(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function O(t){return t.trim().split(/^|\s+/)}function z(t){return t.classList||new _(t)}function _(t){this._node=t,this._names=O(t.getAttribute("class")||"")}function H(t,i){for(var s=z(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function q(t,i){for(var s=z(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function P(t){return function(){H(this,t)}}function R(t){return function(){q(this,t)}}function X(t,i){return function(){(i.apply(this,arguments)?H:q)(this,t)}}function j(){this.textContent=""}function F(t){return function(){this.textContent=t}}function G(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function V(){this.innerHTML=""}function Y(t){return function(){this.innerHTML=t}}function K(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function B(){this.nextSibling&&this.parentNode.appendChild(this)}function U(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Z(){return null}function J(){var t=this.parentNode;t&&t.removeChild(this)}function Q(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function tt(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}w.prototype={constructor:w,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},_.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var it={},st=null;function nt(t,i,s){return t=rt(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function rt(t,i,s){return function(n){var r=st;st=n;try{t.call(this,this.__data__,i,s)}finally{st=r}}}function et(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function ht(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function at(t,i,s){var n=it.hasOwnProperty(t.type)?nt:rt;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function ot(t,i,s){var n=L(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function ut(t,i){return function(){return ot(this,t,i)}}function ct(t,i){return function(){return ot(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(it={mouseenter:"mouseover",mouseleave:"mouseout"}));var lt=[null];function ft(t,i){this._groups=t,this._parents=i}function dt(){return new ft([[document.documentElement]],lt)}function vt(t){return"string"==typeof t?new ft([[document.querySelector(t)]],[document.documentElement]):new ft([[t]],lt)}function pt(t,i){let s;if(void 0===i)for(const n of t)null!=n&&(s<n||void 0===s&&n>=n)&&(s=n);else{let n=-1;for(let r of t)null!=(r=i(r,++n,t))&&(s<r||void 0===s&&r>=r)&&(s=r)}return s}function yt(t,i){let s;if(void 0===i)for(const n of t)null!=n&&(s>n||void 0===s&&n>=n)&&(s=n);else{let n=-1;for(let r of t)null!=(r=i(r,++n,t))&&(s>r||void 0===s&&r>=r)&&(s=r)}return s}ft.prototype=dt.prototype={constructor:ft,select:function(t){"function"!=typeof t&&(t=f(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new ft(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=v(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new ft(n,r)},filter:function(t){"function"!=typeof t&&(t=p(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new ft(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?m:g,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,b,M=0,k=0;M<v;++M)if(w=p[M]){for(M>=k&&(k=M+1);!(b=y[k])&&++k<v;);w._next=b||null}}return(h=new ft(h,n))._enter=a,h._exit=o,h},enter:function(){return new ft(this._enter||this._groups.map(y),this._parents)},exit:function(){return new ft(this._exit||this._groups.map(y),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new ft(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=b);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new ft(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=a(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?k:M:"function"==typeof i?s.local?N:W:s.local?A:x)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?S:"function"==typeof i?E:T)(t,i,null==s?"":s)):D(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?$:"function"==typeof i?I:C)(t,i)):this.node()[t]},classed:function(t,i){var s=O(t+"");if(arguments.length<2){for(var n=z(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?X:i?P:R)(s,i))},text:function(t){return arguments.length?this.each(null==t?j:("function"==typeof t?G:F)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?V:("function"==typeof t?K:Y)(t)):this.node().innerHTML},raise:function(){return this.each(B)},lower:function(){return this.each(U)},append:function(t){var i="function"==typeof t?t:c(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:c(t),n=null==i?Z:"function"==typeof i?i:f(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(J)},clone:function(t){return this.select(t?tt:Q)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=et(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?at:ht,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?ct:ut)(t,i))}};var wt=Math.PI,gt=2*wt,mt=gt-1e-6;function bt(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Mt(){return new bt}function kt(t){return function(){return t}}function xt(t){return t[0]}function At(t){return t[1]}bt.prototype=Mt.prototype={constructor:bt,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,s,n){this._+="Q"+ +t+","+ +i+","+(this._x1=+s)+","+(this._y1=+n)},bezierCurveTo:function(t,i,s,n,r,e){this._+="C"+ +t+","+ +i+","+ +s+","+ +n+","+(this._x1=+r)+","+(this._y1=+e)},arcTo:function(t,i,s,n,r){var e=this._x1,h=this._y1,a=(s=+s)-(t=+t),o=(n=+n)-(i=+i),u=e-t,c=h-i,l=u*u+c*c;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(l>1e-6)if(Math.abs(c*a-o*u)>1e-6&&r){var f=s-e,d=n-h,v=a*a+o*o,p=f*f+d*d,y=Math.sqrt(v),w=Math.sqrt(l),g=r*Math.tan((wt-Math.acos((v+l-p)/(2*y*w)))/2),m=g/w,b=g/y;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*u)+","+(i+m*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>u*d)+","+(this._x1=t+b*a)+","+(this._y1=i+b*o)}else this._+="L"+(this._x1=t)+","+(this._y1=i)},arc:function(t,i,s,n,r,e){t=+t,i=+i,e=!!e;var h=(s=+s)*Math.cos(n),a=s*Math.sin(n),o=t+h,u=i+a,c=1^e,l=e?n-r:r-n;if(s<0)throw new Error("negative radius: "+s);null===this._x1?this._+="M"+o+","+u:(Math.abs(this._x1-o)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+o+","+u),s&&(l<0&&(l=l%gt+gt),l>mt?this._+="A"+s+","+s+",0,1,"+c+","+(t-h)+","+(i-a)+"A"+s+","+s+",0,1,"+c+","+(this._x1=o)+","+(this._y1=u):l>1e-6&&(this._+="A"+s+","+s+",0,"+ +(l>=wt)+","+c+","+(this._x1=t+s*Math.cos(r))+","+(this._y1=i+s*Math.sin(r))))},rect:function(t,i,s,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +s+"v"+ +n+"h"+-s+"Z"},toString:function(){return this._}};var Wt=Array.prototype.slice;function Nt(t){return t.source}function Lt(t){return t.target}function St(t,i,s,n,r){t.moveTo(i,s),t.bezierCurveTo(i=(i+n)/2,s,i,r,n,r)}function Tt(t){return 1-Math.sqrt(1-t*t)}const{propDefaultValues:Et}=r;class Dt{}Dt.highestHeadingLevel=Et.highestHeadingLevel,Dt.mainTitle="Alluvial Diagram Title",Dt.subTitle="This is the alluvial diagram's subtitle",Dt.height=300,Dt.width=650,Dt.margin={top:3,bottom:3,right:6.5,left:6.5},Dt.padding={top:20,bottom:50,right:50,left:50},Dt.sourceAccessor="source",Dt.targetAccessor="target",Dt.valueAccessor="value",Dt.groupAccessor="group",Dt.labelAccessor="name",Dt.nodeIDAccessor="id",Dt.nodeConfig={fill:!1,width:12,padding:20,alignment:"left",compare:!1},Dt.linkConfig={visible:!0,fillMode:"none",opacity:.3},Dt.accessibility=Et.accessibility,Dt.animationConfig=Et.animationConfig,Dt.colorPalette=Et.colorPaletteCategorical,Dt.dataLabel=Et.dataLabel,Dt.annotations=Et.annotations,Dt.hoverStyle=Et.hoverStyle,Dt.clickStyle=Et.clickStyle,Dt.hoverOpacity=Et.hoverOpacity,Dt.cursor=Et.cursor,Dt.tooltipLabel=Et.tooltipLabel,Dt.showTooltip=Et.showTooltip,Dt.suppressEvents=Et.suppressEvents,Dt.clickHighlight=Et.clickHighlight;var $t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Ct=new Uint8Array(16);function It(){if(!$t)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return $t(Ct)}for(var Ot=[],zt=0;zt<256;++zt)Ot[zt]=(zt+256).toString(16).substr(1);function _t(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||It)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[Ot[t[i++]],Ot[t[i++]],Ot[t[i++]],Ot[t[i++]],"-",Ot[t[i++]],Ot[t[i++]],"-",Ot[t[i++]],Ot[t[i++]],"-",Ot[t[i++]],Ot[t[i++]],"-",Ot[t[i++]],Ot[t[i++]],Ot[t[i++]],Ot[t[i++]],Ot[t[i++]],Ot[t[i++]]].join("")}(r)}var Ht={value:function(){}};function qt(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Pt(n)}function Pt(t){this._=t}function Rt(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function Xt(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function jt(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=Ht,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}Pt.prototype=qt.prototype={constructor:Pt,on:function(t,i){var s,n=this._,r=Rt(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=jt(n[s],t.name,i);else if(null==i)for(s in n)n[s]=jt(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=Xt(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new Pt(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var Ft,Gt,Vt=0,Yt=0,Kt=0,Bt=0,Ut=0,Zt=0,Jt="object"==typeof performance&&performance.now?performance:Date,Qt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ti(){return Ut||(Qt(ii),Ut=Jt.now()+Zt)}function ii(){Ut=0}function si(){this._call=this._time=this._next=null}function ni(t,i,s){var n=new si;return n.restart(t,i,s),n}function ri(){Ut=(Bt=Jt.now())+Zt,Vt=Yt=0;try{!function(){ti(),++Vt;for(var t,i=Ft;i;)(t=Ut-i._time)>=0&&i._call.call(null,t),i=i._next;--Vt}()}finally{Vt=0,function(){for(var t,i,s=Ft,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:Ft=i);Gt=t,hi(n)}(),Ut=0}}function ei(){var t=Jt.now(),i=t-Bt;i>1e3&&(Zt-=i,Bt=t)}function hi(t){Vt||(Yt&&(Yt=clearTimeout(Yt)),t-Ut>24?(t<1/0&&(Yt=setTimeout(ri,t-Jt.now()-Zt)),Kt&&(Kt=clearInterval(Kt))):(Kt||(Bt=Jt.now(),Kt=setInterval(ei,1e3)),Vt=1,Qt(ri)))}function ai(t,i,s){var n=new si;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}si.prototype=ni.prototype={constructor:si,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?ti():+s)+(null==i?0:+i),this._next||Gt===this||(Gt?Gt._next=this:Ft=this,Gt=this),this._call=t,this._time=s,hi()},stop:function(){this._call&&(this._call=null,this._time=1/0,hi())}};var oi=qt("start","end","interrupt"),ui=[];function ci(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return ai(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(ai((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=ni((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:oi,tween:ui,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function li(t,i){var s=di(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function fi(t,i){var s=di(t,i);if(s.state>2)throw new Error("too late; already started");return s}function di(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function vi(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function pi(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function yi(){}var wi="\\s*([+-]?\\d+)\\s*",gi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bi=/^#([0-9a-f]{3,8})$/,Mi=new RegExp("^rgb\\("+[wi,wi,wi]+"\\)$"),ki=new RegExp("^rgb\\("+[mi,mi,mi]+"\\)$"),xi=new RegExp("^rgba\\("+[wi,wi,wi,gi]+"\\)$"),Ai=new RegExp("^rgba\\("+[mi,mi,mi,gi]+"\\)$"),Wi=new RegExp("^hsl\\("+[gi,mi,mi]+"\\)$"),Ni=new RegExp("^hsla\\("+[gi,mi,mi,gi]+"\\)$"),Li={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Si(){return this.rgb().formatHex()}function Ti(){return this.rgb().formatRgb()}function Ei(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=bi.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?Di(i):3===s?new Oi(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?$i(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?$i(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Mi.exec(t))?new Oi(i[1],i[2],i[3],1):(i=ki.exec(t))?new Oi(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=xi.exec(t))?$i(i[1],i[2],i[3],i[4]):(i=Ai.exec(t))?$i(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Wi.exec(t))?qi(i[1],i[2]/100,i[3]/100,1):(i=Ni.exec(t))?qi(i[1],i[2]/100,i[3]/100,i[4]):Li.hasOwnProperty(t)?Di(Li[t]):"transparent"===t?new Oi(NaN,NaN,NaN,0):null}function Di(t){return new Oi(t>>16&255,t>>8&255,255&t,1)}function $i(t,i,s,n){return n<=0&&(t=i=s=NaN),new Oi(t,i,s,n)}function Ci(t){return t instanceof yi||(t=Ei(t)),t?new Oi((t=t.rgb()).r,t.g,t.b,t.opacity):new Oi}function Ii(t,i,s,n){return 1===arguments.length?Ci(t):new Oi(t,i,s,null==n?1:n)}function Oi(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function zi(){return"#"+Hi(this.r)+Hi(this.g)+Hi(this.b)}function _i(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Hi(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function qi(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new Ri(t,i,s,n)}function Pi(t){if(t instanceof Ri)return new Ri(t.h,t.s,t.l,t.opacity);if(t instanceof yi||(t=Ei(t)),!t)return new Ri;if(t instanceof Ri)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new Ri(h,a,o,t.opacity)}function Ri(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function Xi(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function ji(t){return function(){return t}}function Fi(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):ji(isNaN(t)?i:t)}vi(yi,Ei,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Si,formatHex:Si,formatHsl:function(){return Pi(this).formatHsl()},formatRgb:Ti,toString:Ti}),vi(Oi,Ii,pi(yi,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Oi(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Oi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zi,formatHex:zi,formatRgb:_i,toString:_i})),vi(Ri,(function(t,i,s,n){return 1===arguments.length?Pi(t):new Ri(t,i,s,null==n?1:n)}),pi(yi,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ri(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ri(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new Oi(Xi(t>=240?t-240:t+120,r,n),Xi(t,r,n),Xi(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Gi=function t(i){var s=function(t){return 1==(t=+t)?Fi:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):ji(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=Ii(t)).r,(i=Ii(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=Fi(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function Vi(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}var Yi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ki=new RegExp(Yi.source,"g");function Bi(t,i){var s,n,r,e=Yi.lastIndex=Ki.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=Yi.exec(t))&&(n=Ki.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:Vi(s,n)})),e=Ki.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}var Ui,Zi,Ji,Qi,ts=180/Math.PI,is={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ss(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*ts,skewX:Math.atan(o)*ts,scaleX:h,scaleY:a}}function ns(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:Vi(t,r)},{i:o-2,x:Vi(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:Vi(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:Vi(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:Vi(t,s)},{i:a-2,x:Vi(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var rs=ns((function(t){return"none"===t?is:(Ui||(Ui=document.createElement("DIV"),Zi=document.documentElement,Ji=document.defaultView),Ui.style.transform=t,t=Ji.getComputedStyle(Zi.appendChild(Ui),null).getPropertyValue("transform"),Zi.removeChild(Ui),ss(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),es=ns((function(t){return null==t?is:(Qi||(Qi=document.createElementNS("http://www.w3.org/2000/svg","g")),Qi.setAttribute("transform",t),(t=Qi.transform.baseVal.consolidate())?ss((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):is)}),", ",")",")");function hs(t,i){var s,n;return function(){var r=fi(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function as(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=fi(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function os(t,i,s){var n=t._id;return t.each((function(){var t=fi(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return di(t,n).value[i]}}function us(t,i){var s;return("number"==typeof i?Vi:i instanceof Ei?Gi:(s=Ei(i))?(i=s,Gi):Bi)(t,i)}function cs(t){return function(){this.removeAttribute(t)}}function ls(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fs(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function ds(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function vs(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function ps(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function ys(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function ws(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function gs(t,i){return function(){li(this,t).delay=+i.apply(this,arguments)}}function ms(t,i){return i=+i,function(){li(this,t).delay=i}}function bs(t,i){return function(){fi(this,t).duration=+i.apply(this,arguments)}}function Ms(t,i){return i=+i,function(){fi(this,t).duration=i}}function ks(t,i){if("function"!=typeof i)throw new Error;return function(){fi(this,t).ease=i}}function xs(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?li:fi;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var As=dt.prototype.constructor;function Ws(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var Ns=0;function Ls(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function Ss(){return++Ns}var Ts=dt.prototype;Ls.prototype=function(t){return dt().transition(t)}.prototype={constructor:Ls,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=f(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),d=0;d<c;++d)(a=u[d])&&(o=t.call(a,a.__data__,d,u))&&("__data__"in a&&(o.__data__=a.__data__),l[d]=o,ci(l[d],i,s,d,l,di(a,s)));return new Ls(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=v(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),p=di(o,s),y=0,w=d.length;y<w;++y)(f=d[y])&&ci(f,i,s,y,d,p);e.push(d),h.push(o)}return new Ls(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=p(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new Ls(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new Ls(e,this._parents,this._name,this._id)},selection:function(){return new As(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=Ss(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=di(h,i);ci(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ls(n,this._parents,t,s)},call:Ts.call,nodes:Ts.nodes,node:Ts.node,size:Ts.size,empty:Ts.empty,each:Ts.each,on:function(t,i){var s=this._id;return arguments.length<2?di(this.node(),s).on.on(t):this.each(xs(s,t,i))},attr:function(t,i){var s=a(t),n="transform"===s?es:us;return this.attrTween(t,"function"==typeof i?(s.local?ps:vs)(s,n,os(this,"attr."+t,i)):null==i?(s.local?ls:cs)(s):(s.local?ds:fs)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=a(t);return this.tween(s,(n.local?ys:ws)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?rs:us;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=D(this,t),h=(this.style.removeProperty(t),D(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=D(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=D(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,os(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=D(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,Ws(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(os(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=di(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?hs:as)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?gs:ms)(i,t)):di(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?bs:Ms)(i,t)):di(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(ks(i,t)):di(this.node(),i).ease}};var Es={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ds(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return Es.time=ti(),Es;return s}dt.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},dt.prototype.transition=function(t){var i,s;t instanceof Ls?(i=t._id,t=t._name):(i=Ss(),(s=Es).time=ti(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&ci(h,t,i,u,a,s||Ds(h,i));return new Ls(n,this._parents,t,i)};const{initializeDescriptionRoot:$s,setAccessibilityController:Cs,initializeElementAccess:Is,setElementFocusHandler:Os,setElementAccessID:zs,setAccessChartCounts:_s,hideNonessentialGroups:Hs,setAccessTitle:qs,setAccessSubtitle:Ps,setAccessLongDescription:Rs,setAccessExecutiveSummary:Xs,setAccessPurpose:js,setAccessContext:Fs,setAccessStatistics:Gs,setAccessStructure:Vs,setAccessAnnotation:Ys,retainAccessFocus:Ks,checkAccessFocus:Bs,setElementInteractionAccessState:Us,setAccessibilityDescriptionWidth:Zs,roundTo:Js,resolveLabelCollision:Qs,transitionEndAll:tn,annotate:sn,checkClicked:nn,checkInteraction:rn,convertVisaColor:en,drawTooltip:hn,findTagLevel:an,getColors:on,getPadding:un,initTooltipStyle:cn,overrideTitleTooltip:ln,scopeDataKeys:fn,chartAccessors:dn,sankey:vn,sankeyCenter:pn,sankeyJustify:yn,sankeyLeft:wn,sankeyLinkHorizontal:gn,sankeyRight:mn,prepareRenderChange:bn}=r,Mn=class{constructor(s){t(this,s),this.mainTitle=Dt.mainTitle,this.subTitle=Dt.subTitle,this.height=Dt.height,this.width=Dt.width,this.highestHeadingLevel=Dt.highestHeadingLevel,this.margin=Dt.margin,this.padding=Dt.padding,this.sourceAccessor=Dt.sourceAccessor,this.targetAccessor=Dt.targetAccessor,this.valueAccessor=Dt.valueAccessor,this.groupAccessor=Dt.groupAccessor,this.nodeIDAccessor=Dt.nodeIDAccessor,this.nodeConfig=Dt.nodeConfig,this.linkConfig=Dt.linkConfig,this.colorPalette=Dt.colorPalette,this.hoverStyle=Dt.hoverStyle,this.clickStyle=Dt.clickStyle,this.cursor=Dt.cursor,this.hoverOpacity=Dt.hoverOpacity,this.animationConfig=Dt.animationConfig,this.dataLabel=Dt.dataLabel,this.showTooltip=Dt.showTooltip,this.tooltipLabel=Dt.tooltipLabel,this.accessibility=Dt.accessibility,this.annotations=Dt.annotations,this.suppressEvents=Dt.suppressEvents,this.clickHighlight=Dt.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.innerInteractionKeys=[],this.topLevel="h2",this.bottomLevel="p",this.sourceLinksString="sourceLinks",this.targetLinksString="targetLinks",this.shouldSetDimensions=!1,this.shouldUpdateData=!1,this.shouldSetColors=!1,this.shouldSetTagLevels=!1,this.shouldRedrawWrapper=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetSelectionClass=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetGlobalSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldDrawInteractionState=!1,this.shouldEnterUpdateExit=!1,this.shouldUpdateNodeGeometries=!1,this.shouldUpdateLinkGeometries=!1,this.shouldDrawNodeLabels=!1,this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}linkDataWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}nodeDataWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}idWatcher(t,i){this.chartID=t||"alluvial-diagram-"+_t(),this.alluvialDiagramEl.id=this.chartID}mainTitleWatcher(t,i){}subTitleWatcher(t,i){}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}sourceAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}targetAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}valueAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}groupAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}nodeIDAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}nodeConfigWatcher(t,i){this.shouldEnterUpdateExit=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}linkConfigWatcher(t,i){this.shouldEnterUpdateExit=!0,this.shouldUpdateNodeGeometries=!0,this.shouldUpdateLinkGeometries=!0,this.shouldDrawNodeLabels=!0}colorPaletteWatcher(t,i){}colorsWatcher(t,i){}clickStyleWatcher(t,i){}hoverStyleWatcher(t,i){}cursorWatcher(t,i){}hoverOpacityWatcher(t,i){}dataLabelWatcher(t,i){this.shouldDrawNodeLabels=!0,this.shouldDrawInteractionState=!0}tooltipLabelWatcher(t,i){}showTooltipWatcher(t,i){}accessibilityWatcher(t,i){(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0)}annotationsWatcher(t,i){this.shouldSetAnnotationAccessibility=!0}clickWatcher(t,i){this.shouldDrawInteractionState=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0}interactionWatcher(t,i){}suppressWatcher(t,i){}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"alluvial-diagram-"+_t(),this.alluvialDiagramEl.id=this.chartID,this.setTagLevels(),this.setDimensions(),this.prepareData(),this.validateIdAccessor(),this.validateLabelText(),this.validateLinkFillMode(),this.validateNodeAlignment(),this.validateInteractionKeys(),this.validateLinkGroups(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTooltipInitialStyle(),this.setNodesDimensions(),this.callSankeyGenerator(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterLinkGeometries(),this.updateLinkGeometries(),this.exitLinkGeometries(),this.enterNodeGeometries(),this.updateNodeGeometries(),this.exitNodeGeometries(),this.enterNodeLabels(),this.updateNodeLabels(),this.exitNodeLabels(),this.drawNodeGeometries(),this.drawLinkGeometries(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.setGroupAccessibilityID(),this.setChartCountAccessibility(),this.setSelectedClass(),this.drawNodeLabels(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.duration=750,this.defaults=!1,Hs(this.root.node(),null),t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.reSetRoot(),this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.setNodesDimensions(),this.callSankeyGenerator(),this.setGlobalSelections(),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldEnterUpdateExit&&(this.enterLinkGeometries(),this.updateLinkGeometries(),this.exitLinkGeometries(),this.enterNodeGeometries(),this.updateNodeGeometries(),this.exitNodeGeometries(),this.enterNodeLabels(),this.updateNodeLabels(),this.exitNodeLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateNodeGeometries&&(this.drawNodeGeometries(),this.shouldUpdateNodeGeometries=!1),this.shouldUpdateLinkGeometries&&(this.drawLinkGeometries(),this.shouldUpdateLinkGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldDrawNodeLabels&&(this.drawNodeLabels(),this.shouldDrawNodeLabels=!1),this.drawAnnotations(),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),t("component did update")})}setDimensions(){this.padding="string"==typeof this.padding?un(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}prepareData(){this.nodeList=[],this.linkList=[],this.linkData.forEach((t,i)=>{const s={source:t[this.sourceAccessor],target:t[this.targetAccessor],value:t[this.valueAccessor],data:t};s[this.groupAccessor]=t[this.groupAccessor],this.linkList[i]=s}),this.nodeData&&this.nodeData.length>1?this.nodeList=this.nodeData:this.createNodeList()}createNodeList(){this.nodeList=[],this.linkData.map(t=>{this.nodeList.some(i=>i.id===t[this.sourceAccessor])||this.nodeList.push({id:t[this.sourceAccessor]}),this.nodeList.some(i=>i.id===t[this.targetAccessor])||this.nodeList.push({id:t[this.targetAccessor]})})}validateLabelText(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.innerIDAccessor}validateIdAccessor(){this.innerIDAccessor=this.nodeData&&this.nodeData.length>1&&this.nodeList[0][this.nodeIDAccessor]?this.nodeIDAccessor:"id"}validateLinkFillMode(){this.innerLinkFillMode=this.groupAccessor&&"group"===this.linkConfig.fillMode?"group":"source"===this.linkConfig.fillMode?"source":"target"===this.linkConfig.fillMode?"target":"path"===this.linkConfig.fillMode?"path":"none"}validateNodeAlignment(){this.innerNodeAlignment="right"===this.nodeConfig.alignment?mn:"center"===this.nodeConfig.alignment?pn:"justify"===this.nodeConfig.alignment?yn:wn}validateInteractionKeys(){this.interactionKeysWithObjs=[],this.innerInteractionKeys=[],this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.sourceAccessor,this.targetAccessor]}validateLinkGroups(){this.groupKeys=[],this.groupAccessor&&(this.groupKeys=this.linkData.map(t=>t[this.groupAccessor]).filter((t,i,s)=>s.indexOf(t)===i))}setNodesDimensions(){this.alluvialProperties=vn(this.nodeConfig.compare,this.linkConfig.visible).nodeId(t=>t[this.innerIDAccessor]).nodeWidth(this.nodeConfig.width).nodePadding(this.nodeConfig.padding).nodeAlign(this.innerNodeAlignment).nodeSort(null).size([this.innerPaddedWidth,this.innerPaddedHeight])}callSankeyGenerator(){this.preppedData=((t,i)=>this.alluvialProperties({nodes:this.nodeList.map(t=>Object.assign({},t)),links:i.map(t=>Object.assign({},t))}))(0,this.linkList),this.nodeCount=pt(this.preppedData.nodes,t=>t.layer)}renderRootElements(){this.svg=vt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").append("svg").attr("width",this.width).attr("height",this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.nodeG=this.rootG.append("g").attr("class","alluvial-node-group"),this.linkG=this.rootG.append("g").attr("class","alluvial-link-group"),this.labelG=this.rootG.append("g").attr("class","alluvial-dataLabel-group"),this.tooltipG=vt(this.alluvialDiagramEl).select(".alluvial-tooltip")}reSetRoot(){bn({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:Tt}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),bn({selection:this.root,duration:this.duration,namespace:"root_reset",easing:Tt}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),bn({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:Tt}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),Zs(this.chartID,this.width)}setGlobalSelections(){this.currentNodeLayers&&(this.previousNodeLayers=this.currentNodeLayers);const t=this.nodeG.selectAll(".node-wrapper").data(this.preppedData.nodes,t=>t[this.innerIDAccessor]);if(this.enterNodes=t.enter().append("g").attr("class","node-wrapper").attr("data-offset-group","true"),this.enterNodes.append("rect").attr("class","alluvial-node"),this.exitNodes=t.exit(),this.updateNodes=t.merge(this.enterNodes),this.updateNodes.selectAll(".alluvial-node").data(t=>[t]),this.currentNodeLayers=this.preppedData.nodes,this.previousNodeLayers){const t=this.currentNodeLayers.filter(t=>this.previousNodeLayers.map(t=>t[this.innerIDAccessor]).includes(t.id));this.previousMaxNodeLayer=pt(t,t=>t.layer),this.previousMinNodeLayer=yt(t,t=>t.layer);const i=this.previousNodeLayers.filter(t=>this.currentNodeLayers.map(t=>t[this.innerIDAccessor]).includes(t.id));this.currentMaxNodeLayer=pt(i,t=>t.layer),this.currentMinNodeLayer=yt(i,t=>t.layer)}if("source"===this.innerLinkFillMode||"target"===this.innerLinkFillMode){this.updateNodes.each((t,i,s)=>{Is(s[i])});const t=this.preppedData.nodes,i=this.linkG.selectAll(".alluvial-link-wrapper").data(t,t=>t[this.innerIDAccessor]);this.enterLinkGroups=i.enter().append("g"),this.exitLinkGroups=i.exit().remove(),this.updateLinkGroups=i.merge(this.enterLinkGroups);const s=this.updateLinkGroups.selectAll(".alluvial-link").data(t=>t.sourceLinks,t=>t.data[this.sourceAccessor]+t.data[this.targetAccessor]);this.enterLinks=s.enter().append("path"),this.exitLinks=s.exit(),this.updateLinks=s.merge(this.enterLinks).attr("data-offset-element",this.innerLinkFillMode)}else{this.updateNodes.attr("tabindex",null);const t=this.linkG.selectAll(".alluvial-link").data(this.preppedData.links,t=>t.data[this.sourceAccessor]+t.data[this.targetAccessor]);this.enterLinks=t.enter().append("path"),this.exitLinks=t.exit(),this.updateLinks=t.merge(this.enterLinks).attr("data-offset-element",null)}const i=this.labelG.selectAll("text").data(this.preppedData.nodes,t=>t[this.innerIDAccessor]);this.enteringLabels=i.enter().append("text"),this.exitingLabels=i.exit(),this.updatingLabels=i.merge(this.enteringLabels)}setTestingAttributes(){this.unitTest?(vt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid","chart-container"),vt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid","main-title"),vt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.updateNodes.attr("data-testid","node").attr("data-id",t=>`node-${t[this.innerIDAccessor]}`),"source"!==this.innerLinkFillMode&&"target"!==this.innerLinkFillMode||this.updateLinkGroups.attr("data-testid","alluvial-link-group").attr("data-id",t=>`link-group-${t[this.innerIDAccessor]}`),this.updateLinks.attr("data-testid","link").attr("data-id",t=>`link-${t.source[this.innerIDAccessor]}-${t.target[this.innerIDAccessor]}`),this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",t=>`dataLabel-${t[this.innerIDAccessor]}`)):(vt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid",null),vt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid",null),vt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.updateNodes.attr("data-testid",null).attr("data-id",null),"source"!==this.innerLinkFillMode&&"target"!==this.innerLinkFillMode||this.updateLinkGroups.attr("data-testid",null).attr("data-id",null),this.updateLinks.attr("data-testid",null).attr("data-id",null),this.updatingLabels.attr("data-testid",null).attr("data-id",null))}newColumnInterpolationPosition(){return function(t){var i=Nt,s=Lt,n=xt,r=At,e=null;function h(){var h,a=Wt.call(arguments),o=i.apply(this,a),u=s.apply(this,a);if(e||(e=h=Mt()),t(e,+n.apply(this,(a[0]=o,a)),+r.apply(this,a),+n.apply(this,(a[0]=u,a)),+r.apply(this,a)),h)return e=null,h+""||null}return h.source=function(t){return arguments.length?(i=t,h):i},h.target=function(t){return arguments.length?(s=t,h):s},h.x=function(t){return arguments.length?(n="function"==typeof t?t:kt(+t),h):n},h.y=function(t){return arguments.length?(r="function"==typeof t?t:kt(+t),h):r},h.context=function(t){return arguments.length?(e=null==t?null:t,h):e},h}(St).source(t=>t.target.layer<=this.previousMinNodeLayer?[t.source.x0,t.y0]:t.source.layer>=this.previousMaxNodeLayer?[t.target.x1,t.y0]:[t.source.x1,t.y0]).target(t=>t.target.layer<=this.previousMinNodeLayer?[t.source.x0,t.y0]:t.source.layer>=this.previousMaxNodeLayer?[t.target.x1,t.y0]:[t.target.x0,t.y1])}enterLinkGeometries(){this.enterLinks.interrupt();const t=this.linkConfig.visible?this.linkConfig.opacity:0;"source"!==this.innerLinkFillMode&&"target"!==this.innerLinkFillMode||this.enterLinkGroups.attr("class","alluvial-link-wrapper"),this.enterLinks.attr("class","alluvial-link").classed("entering",!0).attr("d",this.newColumnInterpolationPosition()),this.enterLinks.attr("cursor",this.suppressEvents?null:this.cursor).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("stroke-dasharray",(t,i,s)=>(t.linelength=s[i].getTotalLength()-2,t.target.layer<=this.previousMinNodeLayer||t.source.layer>=this.previousMaxNodeLayer?"":t.linelength+" "+t.linelength)).attr("stroke-dashoffset",t=>t.target.layer<=this.previousMinNodeLayer||t.source.layer>=this.previousMaxNodeLayer?0:t.linelength).attr("stroke-width",t=>t.target.layer<=this.previousMinNodeLayer||t.source.layer>=this.previousMaxNodeLayer?Math.max(1,t.width):.1).attr("stroke-opacity",t).transition("enter").duration(this.duration).ease(Tt).attr("d",gn()).attr("stroke-width",t=>t.target.layer<=this.previousMinNodeLayer||t.source.layer>=this.previousMaxNodeLayer?Math.max(1,t.width):1).attr("stroke-dashoffset",0)}updateLinkGeometries(){this.updateLinks.interrupt();const t=this.linkConfig.visible?this.linkConfig.opacity:0;this.updateLinks.transition("opacity").ease(Tt).duration(this.duration).attr("stroke-opacity",i=>rn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}exitLinkGeometries(){this.exitLinks.interrupt();const t=this.linkConfig.visible?this.linkConfig.opacity:0;this.exitLinks.attr("stroke-dasharray",(t,i,s)=>(t.linelength=s[i].getTotalLength(),t.target.layer<=this.previousMinNodeLayer||t.source.layer>=this.previousMaxNodeLayer?"":t.linelength+" "+t.linelength)).transition("exit").ease(Tt).duration(this.duration).attr("d",this.newColumnInterpolationPosition()).attr("stroke-opacity",t).attr("stroke-dashoffset",t=>t.linelength).attr("stroke-width",t=>t.target.layer<=this.currentMinNodeLayer||t.source.layer>=this.currentMaxNodeLayer?Math.max(1,t.width):.1).remove()}drawLinkGeometries(){this.removeTemporaryClickedLinks(this.svg.node()),"source"!==this.innerLinkFillMode&&"target"!==this.innerLinkFillMode||this.updateLinkGroups.classed("link-group offset-target",!0),this.updateLinks.attr("stroke",t=>"group"===this.innerLinkFillMode?this.colorArr[this.groupKeys.indexOf(t[this.groupAccessor])]:"none"===this.innerLinkFillMode?this.colorArr[0]||"#E4E4E4":"path"===this.innerLinkFillMode?this.colorArr[t.index]:"source"===this.innerLinkFillMode?this.colorArr[t.source.index]:this.colorArr[t.target.index]).attr("fill","none").transition("update").duration(this.duration).ease(Tt).attr("d",gn()).attr("stroke-width",t=>Math.max(1,t.width)).call(tn,()=>{this.removeTemporaryClickedLinks(this.svg.node()),this.updateLinks.classed("entering",!1).attr("d",gn()).attr("stroke-dasharray",""),this.updateLinks.each((t,i,s)=>{this.clickHighlight&&this.clickHighlight.length>0&&nn(t.data,this.clickHighlight,this.innerInteractionKeys)&&this.drawDuplicateClickedLink(s[i],t)})}),this.updateLinks.transition("accessibilityAfterExit").duration(this.duration).ease(Tt).call(tn,()=>{const t=Bs(this.rootG.node());this.exitLinks.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),Ks({parentGNode:this.rootG.node(),focusDidExist:t})})}drawDuplicateClickedLink(t,i){const s=t.parentNode,n=t.cloneNode();if(vt(n).classed("alluvial-link",!1).classed("vcl-accessibility-focus-highlight vcl-accessibility-focus-hover",!0).classed("duplicated-clicked-link",!0).classed("entering",!1).data([i.data]).attr("focusable",!1).attr("aria-label",null).attr("aria-hidden",!0).attr("role",null).style("pointer-events","none").attr("tabindex",null),"source"===this.innerLinkFillMode||"target"===this.innerLinkFillMode){const t=vt(s.parentNode).selectAll(".link-group")._groups[0];t[t.length-1].appendChild(n)}else s.appendChild(n)}removeTemporaryClickedLinks(t){vt(t).selectAll(".duplicated-clicked-link").remove()}enterNodeGeometries(){this.enterNodes.interrupt(),this.defaults||this.enterNodes.classed("entering",!0),this.enterNodes.select(".alluvial-node").attr("fill",(t,i)=>this.nodeConfig.fill?this.colorArr[i]||this.colorArr[0]:"#E4E4E4").attr("stroke","#717171").attr("stroke-width","1px").attr("x",t=>t.x0).attr("y",t=>t.y0).attr("height",t=>t.y1-t.y0).attr("opacity",0).attr("width",t=>t.x1-t.x0)}updateNodeGeometries(){this.updateNodes.interrupt(),this.updateNodes.select(".alluvial-node").transition("node_opacity").duration((t,i,s)=>vt(s[i].parentNode).classed("entering")?this.duration/3:0).delay((t,i,s)=>vt(s[i].parentNode).classed("entering")?this.duration/1.2:0).ease(Tt).attr("opacity",1)}exitNodeGeometries(){this.exitNodes.interrupt(),this.exitNodes.select(".alluvial-node").transition("exit").ease(Tt).duration(this.duration/3).attr("opacity",0).attr("width",0).select((function(){return this.parentNode})).remove()}drawNodeGeometries(){this.updateNodes.select(".alluvial-node").transition("update_nodes").duration((t,i,s)=>vt(s[i].parentNode).classed("entering")?this.duration/3:this.duration).delay((t,i,s)=>vt(s[i].parentNode).classed("entering")?this.duration/1.2:0).ease(Tt).attr("x",t=>t.x0).attr("y",t=>t.y0).attr("height",t=>t.y1-t.y0).attr("width",t=>t.x1-t.x0).attr("opacity",1).call(tn,()=>{this.updateNodes.classed("entering",!1)})}enterNodeLabels(){this.enteringLabels.interrupt(),this.widthAllNodesNoLinks=this.nodeCount*this.nodeConfig.width+this.nodeCount*this.nodeConfig.width,this.noLinksLeftPadding=(this.innerPaddedWidth-this.widthAllNodesNoLinks)/2,this.enteringLabels.attr("class","alluvial-diagram-dataLabel entering").attr("opacity",0).attr("x",t=>this.linkConfig.visible?"outside"===this.dataLabel.placement?t.x0<this.innerPaddedWidth/2?t.x0:t.x1:t.x0<this.innerPaddedWidth/2?t.x1:t.x0:t.x0<this.innerPaddedWidth/2?this.noLinksLeftPadding:this.noLinksLeftPadding+this.widthAllNodesNoLinks+this.nodeConfig.width).attr("y",t=>(t.y1+t.y0)/2).attr("dx",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"0.5em":"-0.5em":t.x0<this.innerPaddedWidth/2?"-0.5em":"0.5em").attr("dy","0.4em").attr("text-anchor",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"start":"end":t.x0<this.innerPaddedWidth/2?"end":"start")}updateNodeLabels(){this.updatingLabels.interrupt("label_opacity");const t=this.dataLabel.visible?1:0;this.updatingLabels.transition("label_opacity").ease(Tt).duration((t,i,s)=>vt(s[i]).classed("entering")?this.duration/3:0).delay((t,i,s)=>vt(s[i]).classed("entering")?this.duration/1.2:0).attr("opacity",i=>{if(this.linkConfig.visible){let s=!0;return i[this.sourceLinksString].length&&(s=i[this.sourceLinksString].some(i=>rn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),i[this.targetLinksString].length&&(s=i[this.targetLinksString].some(i=>rn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),s?1:0}return 0===i.layer||i.layer===this.nodeCount?t:0})}exitNodeLabels(){this.exitingLabels.interrupt(),this.exitingLabels.transition("exit_labels").duration(this.duration/3).ease(Tt).attr("opacity",0).remove()}drawNodeLabels(){const t="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;this.widthAllNodesNoLinks=this.nodeCount*this.nodeConfig.width+this.nodeCount*this.nodeConfig.width,this.noLinksLeftPadding=(this.innerPaddedWidth-this.widthAllNodesNoLinks)/2;const i=this.updatingLabels.text(t=>t[this.innerLabelAccessor]).attr("data-x",t=>this.linkConfig.visible?"outside"===this.dataLabel.placement?t.x0<this.innerPaddedWidth/2?t.x0:t.x1:t.x0<this.innerPaddedWidth/2?t.x1:t.x0:t.x0<this.innerPaddedWidth/2?this.noLinksLeftPadding:this.noLinksLeftPadding+this.widthAllNodesNoLinks+this.nodeConfig.width).attr("data-y",t=>(t.y1+t.y0)/2).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-use-dx",t).attr("data-use-dy",t).attr("dx",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"0.5em":"-0.5em":t.x0<this.innerPaddedWidth/2?"-0.5em":"0.5em").attr("dy","0.4em").transition("update_labels").duration((t,i,s)=>vt(s[i]).classed("entering")?this.duration/3:this.duration).delay((t,i,s)=>vt(s[i]).classed("entering")?this.duration/1.2:0).ease(Tt);if(this.dataLabel.visible&&("auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly)){const s=this.dataLabel&&this.dataLabel.collisionPlacement,n=this.updateNodes.select(".alluvial-node").attr("data-x",t=>t.x0).attr("data-y",t=>t.y0).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-height",t=>t.y1-t.y0).attr("data-width",t=>t.x1-t.x0).each((i,n,r)=>{if(!t){const t=r[n],e=t.parentNode,h="alluvial-node-collision-clone",a=t.cloneNode();vt(a).classed("alluvial-node",!1).classed(h,!0).classed("entering",!1).data([i]).attr("focusable",!1).attr("aria-label",null).attr("aria-hidden",!0).attr("role",null).style("pointer-events","none").style("visibility","hidden").attr("tabindex",null).attr("data-x","all"===s?i.x0:"outside"===s?i.x0<this.innerPaddedWidth/2?i.x0:i.x1:i.x0<this.innerPaddedWidth/2?i.x1:i.x0).attr("data-width","all"===s?i.x1-i.x0:1),e.appendChild(a)}}),r=this.updateNodes.select(".alluvial-node-collision-clone");this.bitmaps=Qs({labelSelection:i,avoidMarks:t?[n]:[n,r],validPositions:t?["middle"]:["left","right"],offsets:t?[1]:[4,4],accessors:[this.nodeIDAccessor],size:[Js(this.width,0),Js(this.height,0)],hideOnly:this.dataLabel.visible&&t}),r.remove(),t&&i.attr("text-anchor",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"start":"end":t.x0<this.innerPaddedWidth/2?"end":"start").attr("x",t=>this.linkConfig.visible?"outside"===this.dataLabel.placement?t.x0<this.innerPaddedWidth/2?t.x0:t.x1:t.x0<this.innerPaddedWidth/2?t.x1:t.x0:t.x0<this.innerPaddedWidth/2?this.noLinksLeftPadding:this.noLinksLeftPadding+this.widthAllNodesNoLinks+this.nodeConfig.width).attr("y",t=>(t.y1+t.y0)/2).attr("dx",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"0.5em":"-0.5em":t.x0<this.innerPaddedWidth/2?"-0.5em":"0.5em").attr("dy","0.4em")}else i.attr("text-anchor",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"start":"end":t.x0<this.innerPaddedWidth/2?"end":"start").attr("x",t=>this.linkConfig.visible?"outside"===this.dataLabel.placement?t.x0<this.innerPaddedWidth/2?t.x0:t.x1:t.x0<this.innerPaddedWidth/2?t.x1:t.x0:t.x0<this.innerPaddedWidth/2?this.noLinksLeftPadding:this.noLinksLeftPadding+this.widthAllNodesNoLinks+this.nodeConfig.width).attr("y",t=>(t.y1+t.y0)/2).attr("dx",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"0.5em":"-0.5em":t.x0<this.innerPaddedWidth/2?"-0.5em":"0.5em").attr("dy","0.4em");i.call(tn,()=>{this.updatingLabels.classed("entering",!1)})}updateInteractionState(){this.removeTemporaryClickedLinks(this.svg.node()),this.updateLinks.interrupt("opacity"),this.updatingLabels.interrupt("label_opacity");const t=this.linkConfig.visible?this.linkConfig.opacity:0,i=this.dataLabel.visible?1:0;this.updateLinks.attr("stroke-opacity",i=>rn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)),this.updateLinks.each((t,i,s)=>{this.clickHighlight&&this.clickHighlight.length>0&&nn(t.data,this.clickHighlight,this.innerInteractionKeys)&&this.drawDuplicateClickedLink(s[i],t)}),this.updatingLabels.attr("opacity",t=>{if(this.linkConfig.visible){let s=!0;return t[this.sourceLinksString].length&&(s=t[this.sourceLinksString].some(t=>rn(t.data,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),t[this.targetLinksString].length&&(s=t[this.targetLinksString].some(t=>rn(t.data,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),s?1:0}return 0===t.layer||t.layer===this.nodeCount?i:0})}drawAnnotations(){const t=this.preppedData,i=[];this.annotations.forEach(s=>{const n=Object.assign({},s);let r=s.data;if(t&&r)if("node"===n.positionType&&n.data.hasOwnProperty(this.nodeIDAccessor)){const i=t.nodes.findIndex(t=>t[this.nodeIDAccessor]===n.data[this.nodeIDAccessor]);r=t.nodes[i]}else if("source"===n.positionType||"target"===n.positionType&&n.data.hasOwnProperty(this.sourceAccessor)&&n.data.hasOwnProperty(this.targetAccessor)){const i=t.links.findIndex(t=>t.data[this.sourceAccessor]===n.data[this.sourceAccessor]&&t.data[this.targetAccessor]===n.data[this.targetAccessor]);r=t.links[i]}n.positionType&&r&&("target"===n.positionType&&r.target?(n.x=r.target.x0,n.y=r.y1):"source"===n.positionType&&r.source?(n.x=r.source.x1,n.y=r.y0):"node"===n.positionType&&(n.x=r.x1,n.y=(r.y1+r.y0)/2)),delete n.data,i.push(n)}),sn({source:this.rootG.node(),data:i,ignoreScales:!0,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setColors(){this.colorArr=this.colors?en(this.colors):on(this.colorPalette,this.nodeList.length)}setTagLevels(){this.topLevel=an(this.highestHeadingLevel),this.bottomLevel=an(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){$s({rootEle:this.alluvialDiagramEl,title:this.accessibility.title||this.mainTitle,chartTag:"alluvial-diagram",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){const t=fn(this,dn,"alluvial-diagram");Cs({node:this.svg.node(),chartTag:"alluvial-diagram",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"link",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupAccessor:this.innerIDAccessor,groupKeys:["value"],groupName:"node"})}setGeometryAccessibilityAttributes(){this.updateLinks.each((t,i,s)=>{Is(s[i])})}setGeometryAriaLabels(){const t=fn(this,dn,"alluvial-diagram");this.updateLinks.each((i,s,n)=>{Os({node:n[s],geomType:"link",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"node",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),zs({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateNodes.each((t,i,s)=>{zs({node:s[i],uniqueID:this.chartID})})}setChartCountAccessibility(){_s({rootEle:this.alluvialDiagramEl,parentGNode:this.linkG.node(),chartTag:"alluvial-diagram",geomType:"link",groupName:"node"})}setSelectedClass(){this.updateLinks.classed("highlight",t=>{const i=rn(t.data,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return!(!this.clickHighlight||!this.clickHighlight.length)&&i}).each((t,i,s)=>{let n=rn(t.data,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);n=!(!this.clickHighlight||!this.clickHighlight.length)&&n,Us(s[i],n,this.accessibility.elementsAreInterface)})}setChartAccessibilityTitle(){qs(this.alluvialDiagramEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){Ps(this.alluvialDiagramEl,this.subTitle)}setChartAccessibilityLongDescription(){Rs(this.alluvialDiagramEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){Xs(this.alluvialDiagramEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){js(this.alluvialDiagramEl,this.accessibility.purpose)}setChartAccessibilityContext(){Fs(this.alluvialDiagramEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){Gs(this.alluvialDiagramEl,this.accessibility.statisticalNotes)}setChartAccessibilityStructureNotes(){Vs(this.alluvialDiagramEl,this.accessibility.structureNotes)}setAnnotationAccessibility(){Ys(this.alluvialDiagramEl,this.annotations)}onClickHandler(t){this.clickFunc.emit(t.data)}onHoverHandler(t){ln(this.chartID,!0),this.hoverFunc.emit(t.data),this.showTooltip&&this.eventsTooltip({data:t,evt:st,isToShow:!0})}onMouseOutHandler(){ln(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){cn(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){hn({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,groupAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,ordinalAccessor:this.innerIDAccessor,chartType:"alluvial-diagram"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.setDimensions(),this.prepareData(),this.validateIdAccessor(),this.validateLabelText(),this.validateLinkFillMode(),this.validateInteractionKeys(),this.validateLinkGroups(),this.setColors(),s("div",null,s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"alluvial-main-title vcl-main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions alluvial-sub-title vcl-sub-title"},this.subTitle),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"link",groupName:"node",chartTag:"alluvial-diagram",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:"source"===this.innerLinkFillMode||"target"===this.innerLinkFillMode,cousinActionOverride:"on a link",cousinResultOverride:"source"===this.innerLinkFillMode||"target"===this.innerLinkFillMode?"Drill up to link's Source or Target node":"",disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-alluvial-container"}),s("div",{class:"alluvial-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}))))}init(){const t=Object.keys(Dt);let i=0;const s={hoverOpacity:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},linkConfig:Object.assign({exception:!1})};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:Dt[t[i]]}}get alluvialDiagramEl(){return n(this)}static get watchers(){return{linkData:["linkDataWatcher"],nodeData:["nodeDataWatcher"],uniqueID:["idWatcher"],mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],highestHeadingLevel:["headingWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],sourceAccessor:["sourceAccessorWatcher"],targetAccessor:["targetAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],nodeIDAccessor:["nodeIDAccessorWatcher"],nodeConfig:["nodeConfigWatcher"],linkConfig:["linkConfigWatcher"],colorPalette:["colorPaletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],cursor:["cursorWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],annotations:["annotationsWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}alluvial-diagram{cursor:default}alluvial-diagram .annotations{pointer-events:none}alluvial-diagram .annotations .handle{pointer-events:all}alluvial-diagram .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}alluvial-diagram .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}alluvial-diagram .hidden{display:none}alluvial-diagram .node rect{cursor:move}alluvial-diagram .node text{pointer-events:none;text-shadow:0 1px 0 #fff}alluvial-diagram .link{fill:none;stroke:#000;stroke-opacity:0.2}alluvial-diagram .link:hover{stroke-opacity:0.5}"}};var kn="http://www.w3.org/1999/xhtml";const xn={svg:"http://www.w3.org/2000/svg",xhtml:kn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function An(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),xn.hasOwnProperty(i)?{space:xn[i],local:t}:t}function Wn(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===kn&&i.documentElement.namespaceURI===kn?i.createElement(t):i.createElementNS(s,t)}}function Nn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ln(t){var i=An(t);return(i.local?Nn:Wn)(i)}function Sn(){}function Tn(t){return null==t?Sn:function(){return this.querySelector(t)}}function En(){return[]}function Dn(t){return null==t?En:function(){return this.querySelectorAll(t)}}function $n(t){return function(){return this.matches(t)}}function Cn(t){return new Array(t.length)}function In(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function On(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new In(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function zn(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new In(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function _n(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function Hn(t){return function(){this.removeAttribute(t)}}function qn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pn(t,i){return function(){this.setAttribute(t,i)}}function Rn(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function Xn(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function jn(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function Fn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Gn(t){return function(){this.style.removeProperty(t)}}function Vn(t,i,s){return function(){this.style.setProperty(t,i,s)}}function Yn(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function Kn(t,i){return t.style.getPropertyValue(i)||Fn(t).getComputedStyle(t,null).getPropertyValue(i)}function Bn(t){return function(){delete this[t]}}function Un(t,i){return function(){this[t]=i}}function Zn(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function Jn(t){return t.trim().split(/^|\s+/)}function Qn(t){return t.classList||new tr(t)}function tr(t){this._node=t,this._names=Jn(t.getAttribute("class")||"")}function ir(t,i){for(var s=Qn(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function sr(t,i){for(var s=Qn(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function nr(t){return function(){ir(this,t)}}function rr(t){return function(){sr(this,t)}}function er(t,i){return function(){(i.apply(this,arguments)?ir:sr)(this,t)}}function hr(){this.textContent=""}function ar(t){return function(){this.textContent=t}}function or(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function ur(){this.innerHTML=""}function cr(t){return function(){this.innerHTML=t}}function lr(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function fr(){this.nextSibling&&this.parentNode.appendChild(this)}function dr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vr(){return null}function pr(){var t=this.parentNode;t&&t.removeChild(this)}function yr(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function wr(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}In.prototype={constructor:In,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},tr.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var gr={},mr=null;function br(t,i,s){return t=Mr(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function Mr(t,i,s){return function(n){var r=mr;mr=n;try{t.call(this,this.__data__,i,s)}finally{mr=r}}}function kr(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function xr(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function Ar(t,i,s){var n=gr.hasOwnProperty(t.type)?br:Mr;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function Wr(t,i,s){var n=Fn(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function Nr(t,i){return function(){return Wr(this,t,i)}}function Lr(t,i){return function(){return Wr(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(gr={mouseenter:"mouseover",mouseleave:"mouseout"}));var Sr=[null];function Tr(t,i){this._groups=t,this._parents=i}function Er(){return new Tr([[document.documentElement]],Sr)}function Dr(t){return"string"==typeof t?new Tr([[document.querySelector(t)]],[document.documentElement]):new Tr([[t]],Sr)}function $r(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}Tr.prototype=Er.prototype={constructor:Tr,select:function(t){"function"!=typeof t&&(t=Tn(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new Tr(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Dn(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new Tr(n,r)},filter:function(t){"function"!=typeof t&&(t=$n(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new Tr(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?zn:On,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new Tr(h,n))._enter=a,h._exit=o,h},enter:function(){return new Tr(this._enter||this._groups.map(Cn),this._parents)},exit:function(){return new Tr(this._exit||this._groups.map(Cn),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new Tr(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=_n);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new Tr(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=An(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?qn:Hn:"function"==typeof i?s.local?jn:Xn:s.local?Rn:Pn)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?Gn:"function"==typeof i?Yn:Vn)(t,i,null==s?"":s)):Kn(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?Bn:"function"==typeof i?Zn:Un)(t,i)):this.node()[t]},classed:function(t,i){var s=Jn(t+"");if(arguments.length<2){for(var n=Qn(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?er:i?nr:rr)(s,i))},text:function(t){return arguments.length?this.each(null==t?hr:("function"==typeof t?or:ar)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ur:("function"==typeof t?lr:cr)(t)):this.node().innerHTML},raise:function(){return this.each(fr)},lower:function(){return this.each(dr)},append:function(t){var i="function"==typeof t?t:Ln(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:Ln(t),n=null==i?vr:"function"==typeof i?i:Tn(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(pr)},clone:function(t){return this.select(t?wr:yr)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=kr(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?Ar:xr,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?Lr:Nr)(t,i))}};var Cr,Ir,Or=(1===(Cr=$r).length&&(Ir=Cr,Cr=function(t,i){return $r(Ir(t),i)}),{left:function(t,i,s,n){for(null==s&&(s=0),null==n&&(n=t.length);s<n;){var r=s+n>>>1;Cr(t[r],i)<0?s=r+1:n=r}return s},right:function(t,i,s,n){for(null==s&&(s=0),null==n&&(n=t.length);s<n;){var r=s+n>>>1;Cr(t[r],i)>0?n=r:s=r+1}return s}}).right;function zr(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var _r=Math.sqrt(50),Hr=Math.sqrt(10),qr=Math.sqrt(2);function Pr(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=_r?10:e>=Hr?5:e>=qr?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=_r?10:e>=Hr?5:e>=qr?2:1)}function Rr(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&s>n&&(n=s);return n}function Xr(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&n>s&&(n=s);return n}function jr(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function Fr(){}function Gr(t,i){var s=new Fr;if(t instanceof Fr)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}function Vr(){return{}}function Yr(t,i,s){t[i]=s}function Kr(){return Gr()}function Br(t,i,s){t.set(i,s)}Fr.prototype=Gr.prototype={constructor:Fr,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var Ur=Array.prototype,Zr=Ur.map,Jr=Ur.slice,Qr={name:"implicit"};function te(){var t=Gr(),i=[],s=[],n=Qr;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==Qr)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=Gr();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=Jr.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return te(i,s).unknown(n)},jr.apply(r,arguments),r}function ie(){var t,i,s=te().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=zr(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return ie(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},jr.apply(c(),arguments)}function se(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function ne(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function re(){}var ee="\\s*([+-]?\\d+)\\s*",he="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ae="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oe=/^#([0-9a-f]{3,8})$/,ue=new RegExp("^rgb\\("+[ee,ee,ee]+"\\)$"),ce=new RegExp("^rgb\\("+[ae,ae,ae]+"\\)$"),le=new RegExp("^rgba\\("+[ee,ee,ee,he]+"\\)$"),fe=new RegExp("^rgba\\("+[ae,ae,ae,he]+"\\)$"),de=new RegExp("^hsl\\("+[he,ae,ae]+"\\)$"),ve=new RegExp("^hsla\\("+[he,ae,ae,he]+"\\)$"),pe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ye(){return this.rgb().formatHex()}function we(){return this.rgb().formatRgb()}function ge(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=oe.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?me(i):3===s?new xe(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?be(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?be(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=ue.exec(t))?new xe(i[1],i[2],i[3],1):(i=ce.exec(t))?new xe(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=le.exec(t))?be(i[1],i[2],i[3],i[4]):(i=fe.exec(t))?be(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=de.exec(t))?Le(i[1],i[2]/100,i[3]/100,1):(i=ve.exec(t))?Le(i[1],i[2]/100,i[3]/100,i[4]):pe.hasOwnProperty(t)?me(pe[t]):"transparent"===t?new xe(NaN,NaN,NaN,0):null}function me(t){return new xe(t>>16&255,t>>8&255,255&t,1)}function be(t,i,s,n){return n<=0&&(t=i=s=NaN),new xe(t,i,s,n)}function Me(t){return t instanceof re||(t=ge(t)),t?new xe((t=t.rgb()).r,t.g,t.b,t.opacity):new xe}function ke(t,i,s,n){return 1===arguments.length?Me(t):new xe(t,i,s,null==n?1:n)}function xe(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function Ae(){return"#"+Ne(this.r)+Ne(this.g)+Ne(this.b)}function We(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ne(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Le(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new Te(t,i,s,n)}function Se(t){if(t instanceof Te)return new Te(t.h,t.s,t.l,t.opacity);if(t instanceof re||(t=ge(t)),!t)return new Te;if(t instanceof Te)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new Te(h,a,o,t.opacity)}function Te(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function Ee(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function De(t){return function(){return t}}function $e(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):De(isNaN(t)?i:t)}se(re,ge,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ye,formatHex:ye,formatHsl:function(){return Se(this).formatHsl()},formatRgb:we,toString:we}),se(xe,ke,ne(re,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new xe(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new xe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ae,formatHex:Ae,formatRgb:We,toString:We})),se(Te,(function(t,i,s,n){return 1===arguments.length?Se(t):new Te(t,i,s,null==n?1:n)}),ne(re,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Te(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Te(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new xe(Ee(t>=240?t-240:t+120,r,n),Ee(t,r,n),Ee(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Ce=function t(i){var s=function(t){return 1==(t=+t)?$e:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):De(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=ke(t)).r,(i=ke(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=$e(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function Ie(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function Oe(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=Xe(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function ze(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function _e(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function He(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=Xe(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var qe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pe=new RegExp(qe.source,"g");function Re(t,i){var s,n,r,e=qe.lastIndex=Pe.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=qe.exec(t))&&(n=Pe.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:_e(s,n)})),e=Pe.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function Xe(t,i){var s,n=typeof i;return null==i||"boolean"===n?De(i):("number"===n?_e:"string"===n?(s=ge(i))?(i=s,Ce):Re:i instanceof ge?Ce:i instanceof Date?ze:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?Ie:Array.isArray(i)?Oe:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?He:_e)(t,i)}function je(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var Fe,Ge,Ve,Ye,Ke=180/Math.PI,Be={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ue(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*Ke,skewX:Math.atan(o)*Ke,scaleX:h,scaleY:a}}function Ze(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:_e(t,r)},{i:o-2,x:_e(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:_e(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:_e(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:_e(t,s)},{i:a-2,x:_e(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var Je=Ze((function(t){return"none"===t?Be:(Fe||(Fe=document.createElement("DIV"),Ge=document.documentElement,Ve=document.defaultView),Fe.style.transform=t,t=Ve.getComputedStyle(Ge.appendChild(Fe),null).getPropertyValue("transform"),Ge.removeChild(Fe),Ue(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Qe=Ze((function(t){return null==t?Be:(Ye||(Ye=document.createElementNS("http://www.w3.org/2000/svg","g")),Ye.setAttribute("transform",t),(t=Ye.transform.baseVal.consolidate())?Ue((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Be)}),", ",")",")");function th(t){return+t}var ih=[0,1];function sh(t){return t}function nh(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function rh(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function eh(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=nh(r,n),e=s(h,e)):(n=nh(n,r),e=s(e,h)),function(t){return e(n(t))}}function hh(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=nh(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=Or(t,i,1,n)-1;return e[s](r[s](i))}}function ah(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function oh(t,i){return function(){var t,i,s,n,r,e,h=ih,a=ih,o=Xe,u=sh;function c(){return n=Math.min(h.length,a.length)>2?hh:eh,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),_e)))(s)))},l.domain=function(t){return arguments.length?(h=Zr.call(t,th),u===sh||(u=rh(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=Jr.call(t),c()):a.slice()},l.rangeRound=function(t){return a=Jr.call(t),o=je,c()},l.clamp=function(t){return arguments.length?(u=t?rh(h):sh,l):u!==sh},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function uh(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function ch(t){return(t=uh(Math.abs(t)))?t[1]:NaN}var lh,fh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dh(t){if(!(i=fh.exec(t)))throw new Error("invalid format: "+t);var i;return new vh({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function vh(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function ph(t,i){var s=uh(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}dh.prototype=vh.prototype,vh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const yh={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return ph(100*t,i)},r:ph,s:function(t,i){var s=uh(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(lh=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+uh(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function wh(t){return t}var gh,mh,bh,Mh=Array.prototype.map,kh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function xh(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=Pr(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=function(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=_r?r*=10:e>=Hr?r*=5:e>=qr&&(r*=2),i<t?-r:r}(t,i,s);switch((n=dh(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ch(i)/3)))-ch(Math.abs(t)))}(e,h))||(n.precision=r),bh(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,ch(i)-ch(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-ch(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return mh(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=Pr(a,o,s))>0?n=Pr(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=Pr(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function Ah(){var t=oh(sh,sh);return t.copy=function(){return ah(t,Ah())},jr.apply(t,arguments),xh(t)}function Wh(t){return 1-Math.sqrt(1-t*t)}gh=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?wh:(i=Mh.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?wh:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(Mh.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=dh(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):yh[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?o:"",M=yh[g],k=/[defgprs%]/.test(g);function x(t){var r,e,o,f=m,x=b;if("c"===g)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===g?kh[8+lh/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var W=f.length+t.length+x.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=n(N+t,N.length?v-x.length:1/0),N=""),s){case"<":t=f+t+x+N;break;case"=":t=f+N+t+x;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+x+N.slice(W);break;default:t=N+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=dh(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(ch(i)/3))),r=Math.pow(10,-n),e=kh[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),mh=gh.format,bh=gh.formatPrefix;const{propDefaultValues:Nh}=r;class Lh{}Lh.mainTitle="Clustered Bar Chart Title",Lh.subTitle="This is the clustered bar chart's subtitle",Lh.height=250,Lh.width=675,Lh.margin={top:4,bottom:4,right:4,left:4},Lh.padding={top:20,bottom:50,right:50,left:50},Lh.ordinalAccessor="label",Lh.valueAccessor="value",Lh.groupAccessor="category",Lh.reverseOrder=!1,Lh.layout=Nh.layout,Lh.xAxis=Nh.xAxis,Lh.yAxis=Nh.yAxis,Lh.wrapLabel=Nh.wrapLabel,Lh.colorPalette=Nh.colorPaletteCategorical,Lh.hoverStyle=Nh.hoverStyle,Lh.clickStyle=Nh.clickStyle,Lh.referenceStyle=Nh.referenceStyle,Lh.cursor=Nh.cursor,Lh.roundedCorner=Nh.roundedCorner,Lh.barIntervalRatio=Nh.barIntervalRatio,Lh.groupIntervalRatio=Nh.barIntervalRatio,Lh.hoverOpacity=Nh.hoverOpacity,Lh.dataLabel=Nh.dataLabel,Lh.legend=Nh.categoryLegend,Lh.tooltipLabel=Nh.tooltipLabel,Lh.showTooltip=Nh.showTooltip,Lh.accessibility=Nh.accessibility,Lh.animationConfig=Nh.animationConfig,Lh.highestHeadingLevel=Nh.highestHeadingLevel,Lh.referenceLines=Nh.referenceLines,Lh.annotations=Nh.annotations,Lh.clickHighlight=Nh.clickHighlight,Lh.suppressEvents=Nh.suppressEvents;var Sh={value:function(){}};function Th(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Eh(n)}function Eh(t){this._=t}function Dh(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function $h(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function Ch(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=Sh,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}Eh.prototype=Th.prototype={constructor:Eh,on:function(t,i){var s,n=this._,r=Dh(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=Ch(n[s],t.name,i);else if(null==i)for(s in n)n[s]=Ch(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=$h(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new Eh(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var Ih,Oh,zh=0,_h=0,Hh=0,qh=0,Ph=0,Rh=0,Xh="object"==typeof performance&&performance.now?performance:Date,jh="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Fh(){return Ph||(jh(Gh),Ph=Xh.now()+Rh)}function Gh(){Ph=0}function Vh(){this._call=this._time=this._next=null}function Yh(t,i,s){var n=new Vh;return n.restart(t,i,s),n}function Kh(){Ph=(qh=Xh.now())+Rh,zh=_h=0;try{!function(){Fh(),++zh;for(var t,i=Ih;i;)(t=Ph-i._time)>=0&&i._call.call(null,t),i=i._next;--zh}()}finally{zh=0,function(){for(var t,i,s=Ih,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:Ih=i);Oh=t,Uh(n)}(),Ph=0}}function Bh(){var t=Xh.now(),i=t-qh;i>1e3&&(Rh-=i,qh=t)}function Uh(t){zh||(_h&&(_h=clearTimeout(_h)),t-Ph>24?(t<1/0&&(_h=setTimeout(Kh,t-Xh.now()-Rh)),Hh&&(Hh=clearInterval(Hh))):(Hh||(qh=Xh.now(),Hh=setInterval(Bh,1e3)),zh=1,jh(Kh)))}function Zh(t,i,s){var n=new Vh;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}Vh.prototype=Yh.prototype={constructor:Vh,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?Fh():+s)+(null==i?0:+i),this._next||Oh===this||(Oh?Oh._next=this:Ih=this,Oh=this),this._call=t,this._time=s,Uh()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uh())}};var Jh=Th("start","end","interrupt"),Qh=[];function ta(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return Zh(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(Zh((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=Yh((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:Jh,tween:Qh,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function ia(t,i){var s=na(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function sa(t,i){var s=na(t,i);if(s.state>2)throw new Error("too late; already started");return s}function na(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function ra(t,i){var s,n;return function(){var r=sa(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function ea(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=sa(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function ha(t,i,s){var n=t._id;return t.each((function(){var t=sa(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return na(t,n).value[i]}}function aa(t,i){var s;return("number"==typeof i?_e:i instanceof ge?Ce:(s=ge(i))?(i=s,Ce):Re)(t,i)}function oa(t){return function(){this.removeAttribute(t)}}function ua(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ca(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function la(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function fa(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function da(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function va(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function pa(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function ya(t,i){return function(){ia(this,t).delay=+i.apply(this,arguments)}}function wa(t,i){return i=+i,function(){ia(this,t).delay=i}}function ga(t,i){return function(){sa(this,t).duration=+i.apply(this,arguments)}}function ma(t,i){return i=+i,function(){sa(this,t).duration=i}}function ba(t,i){if("function"!=typeof i)throw new Error;return function(){sa(this,t).ease=i}}function Ma(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?ia:sa;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var ka=Er.prototype.constructor;function xa(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var Aa=0;function Wa(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function Na(){return++Aa}var La=Er.prototype;Wa.prototype=function(t){return Er().transition(t)}.prototype={constructor:Wa,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=Tn(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,ta(l[f],i,s,f,l,na(a,s)));return new Wa(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=Dn(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=na(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&ta(f,i,s,p,d,v);e.push(d),h.push(o)}return new Wa(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=$n(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new Wa(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new Wa(e,this._parents,this._name,this._id)},selection:function(){return new ka(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=Na(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=na(h,i);ta(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Wa(n,this._parents,t,s)},call:La.call,nodes:La.nodes,node:La.node,size:La.size,empty:La.empty,each:La.each,on:function(t,i){var s=this._id;return arguments.length<2?na(this.node(),s).on.on(t):this.each(Ma(s,t,i))},attr:function(t,i){var s=An(t),n="transform"===s?Qe:aa;return this.attrTween(t,"function"==typeof i?(s.local?da:fa)(s,n,ha(this,"attr."+t,i)):null==i?(s.local?ua:oa)(s):(s.local?la:ca)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=An(t);return this.tween(s,(n.local?va:pa)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?Je:aa;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=Kn(this,t),h=(this.style.removeProperty(t),Kn(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=Kn(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=Kn(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,ha(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=Kn(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,xa(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(ha(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=na(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?ra:ea)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?ya:wa)(i,t)):na(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?ga:ma)(i,t)):na(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(ba(i,t)):na(this.node(),i).ease}};var Sa={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ta(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return Sa.time=Fh(),Sa;return s}Er.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},Er.prototype.transition=function(t){var i,s;t instanceof Wa?(i=t._id,t=t._name):(i=Na(),(s=Sa).time=Fh(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&ta(h,t,i,u,a,s||Ta(h,i));return new Wa(n,this._parents,t,i)};var Ea="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Da=new Uint8Array(16);function $a(){if(!Ea)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return Ea(Da)}for(var Ca=[],Ia=0;Ia<256;++Ia)Ca[Ia]=(Ia+256).toString(16).substr(1);function Oa(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||$a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[Ca[t[i++]],Ca[t[i++]],Ca[t[i++]],Ca[t[i++]],"-",Ca[t[i++]],Ca[t[i++]],"-",Ca[t[i++]],Ca[t[i++]],"-",Ca[t[i++]],Ca[t[i++]],"-",Ca[t[i++]],Ca[t[i++]],Ca[t[i++]],Ca[t[i++]],Ca[t[i++]],Ca[t[i++]]].join("")}(r)}const{verifyTextHasSpace:za,checkAttributeTransitions:_a,createTextStrokeFilter:Ha,drawHoverStrokes:qa,removeHoverStrokes:Pa,buildStrokes:Ra,convertColorsToTextures:Xa,initializeDescriptionRoot:ja,initializeElementAccess:Fa,setElementFocusHandler:Ga,setElementAccessID:Va,setAccessibilityController:Ya,hideNonessentialGroups:Ka,setAccessTitle:Ba,setAccessSubtitle:Ua,setAccessLongDescription:Za,setAccessExecutiveSummary:Ja,setAccessPurpose:Qa,setAccessContext:to,setAccessStatistics:io,setAccessChartCounts:so,setAccessXAxis:no,setAccessYAxis:ro,setAccessStructure:eo,setAccessAnnotation:ho,retainAccessFocus:ao,checkAccessFocus:oo,setElementInteractionAccessState:uo,setAccessibilityDescriptionWidth:co,autoTextColor:lo,annotate:fo,chartAccessors:vo,convertVisaColor:po,checkInteraction:yo,checkClicked:wo,checkHovered:go,drawAxis:mo,drawGrid:bo,drawLegend:Mo,setLegendInteractionState:ko,drawTooltip:xo,formatDataLabel:Ao,formatDate:Wo,getColors:No,getLicenses:Lo,getPadding:So,getScopedData:To,initTooltipStyle:Eo,overrideTitleTooltip:Do,placeDataLabels:$o,scopeDataKeys:Co,transitionEndAll:Io,visaColors:Oo,validateAccessibilityProps:zo,findTagLevel:_o,prepareRenderChange:Ho,roundTo:qo}=r,Po=class{constructor(s){t(this,s),this.mainTitle=Lh.mainTitle,this.subTitle=Lh.subTitle,this.height=Lh.height,this.width=Lh.width,this.layout=Lh.layout,this.margin=Lh.margin,this.padding=Lh.padding,this.highestHeadingLevel=Lh.highestHeadingLevel,this.ordinalAccessor=Lh.ordinalAccessor,this.valueAccessor=Lh.valueAccessor,this.groupAccessor=Lh.groupAccessor,this.reverseOrder=Lh.reverseOrder,this.xAxis=Lh.xAxis,this.yAxis=Lh.yAxis,this.wrapLabel=Lh.wrapLabel,this.colorPalette=Lh.colorPalette,this.hoverStyle=Lh.hoverStyle,this.clickStyle=Lh.clickStyle,this.referenceStyle=Lh.referenceStyle,this.cursor=Lh.cursor,this.roundedCorner=Lh.roundedCorner,this.barIntervalRatio=Lh.barIntervalRatio,this.groupIntervalRatio=Lh.groupIntervalRatio,this.hoverOpacity=Lh.hoverOpacity,this.animationConfig=Lh.animationConfig,this.dataLabel=Lh.dataLabel,this.showTooltip=Lh.showTooltip,this.tooltipLabel=Lh.tooltipLabel,this.accessibility=Lh.accessibility,this.legend=Lh.legend,this.annotations=Lh.annotations,this.referenceLines=Lh.referenceLines,this.suppressEvents=Lh.suppressEvents,this.clickHighlight=Lh.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.nest=[],this.datakeys=[],this.legendData=[],this.updated=!0,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateScales=!1,this.shouldValidateAxes=!1,this.shouldUpdateAnnotations=!1,this.shouldResetRoot=!1,this.shouldUpdateTableData=!1,this.shouldSetColors=!1,this.shouldValidateLabelPlacement=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldValidateInteractionKeys=!1,this.shouldSetSelectionClass=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYGrid=!1,this.shouldUpdateBaseline=!1,this.shouldCheckValueAxis=!1,this.shouldCheckLabelAxis=!1,this.shouldSetGlobalSelections=!1,this.shouldEnterUpdateExit=!1,this.shouldUpdateGeometries=!1,this.shouldUpdateCorners=!1,this.shouldUpdateLegendData=!1,this.shouldUpdateLegend=!1,this.shouldUpdateLegendInteractivity=!1,this.shouldSetLegendCursor=!1,this.shouldUpdateReferenceLines=!1,this.shouldUpdateLabels=!1,this.shouldUpdateCursor=!1,this.shouldDrawInteractionState=!1,this.shouldSetLabelOpacity=!1,this.shouldCheckLabelColor=!1,this.shouldBindInteractivity=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldSetTestingAttributes=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetTextures=!1,this.shouldSetStrokes=!1,this.strokes={},this.topLevel="h2",this.bottomLevel="p",this.textTreatmentHandler=(t,i,s)=>{const n=this.clickHighlight&&this.clickHighlight.length>0&&wo(t,this.clickHighlight,this.innerInteractionKeys)&&this.clickStyle.color?Oo[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&go(t,this.hoverHighlight,this.innerInteractionKeys)&&this.hoverStyle.color?Oo[this.hoverStyle.color]||this.hoverStyle.color:this.preparedColors[i],r="bottom"===this.dataLabel.placement||"left"===this.dataLabel.placement?lo(n):Oo.dark_text,e=Dr(s[i]);return e.attr("filter",e.classed("textIsMoving")?null:Ha({root:this.svg.node(),id:this.chartID,color:"bottom"===this.dataLabel.placement||"left"===this.dataLabel.placement?n:"#ffffff"})),r},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldSetTextures=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateTableData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateLegendData=!0,this.shouldUpdateScales=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetStrokes=!0}idWatcher(t,i){this.chartID=t||"clustered-bar-chart-"+Oa(),this.clusteredBarChartEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetLabelOpacity=!0}layoutWatcher(t,i){this.shouldValidateLabelPlacement=!0,this.shouldUpdateScales=!0,this.shouldValidateAxes=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetTestingAttributes=!0,this.shouldSetLabelOpacity=!0}ordinalAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateLegendData=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}valueAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldCheckValueAxis=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}groupAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}reverseOrderWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,"vertical"===this.layout?(this.shouldValidateAxes=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0):"horizontal"===this.layout&&(this.shouldValidateAxes=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0)}xAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0)}yAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0)}wrapLabelWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}paletteWatcher(t,i){this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0}cornerWatcher(t,i){this.shouldUpdateCorners=!0}intervalRatioWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldSetLabelOpacity=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateAnnotations=!0}groupIntervalRatioWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateAnnotations=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}labelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0;const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement,r=!(!t||!t.labelAccessor)&&t.labelAccessor,e=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),s!==n&&(this.shouldSetLabelOpacity=!0,this.shouldValidateLabelPlacement=!0,this.shouldCheckLabelColor=!0),r!==e&&(this.shouldValidateDataLabelAccessor=!0)}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideTextures)&&t.hideTextures)!==(!(!i||!i.hideTextures)&&i.hideTextures)&&(this.shouldSetTextures=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0,this.shouldDrawInteractionState=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldDrawInteractionState=!0)}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}clickWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"clustered-bar-chart-"+Oa(),this.clusteredBarChartEl.id=this.chartID,this.setTagLevels(),this.prepareData(),this.prepareLegendData(),this.setDimensions(),this.prepareScales(),this.validateInteractionKeys(),this.validateDataLabelAccessor(),this.validateAxes(),this.validateLabelPlacement(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.shouldValidateAccessibilityProps(),this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTextures(),this.setStrokes(),this.drawXGrid(),this.drawYGrid(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.drawGeometries(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.bindLegendInteractivity(),this.drawDataLabels(),this.drawReferenceLines(),this.setSelectedClass(),this.updateInteractionState(),this.setLabelOpacity(),this.checkLabelColorAgainstBackground(),this.updateCursor(),this.bindInteractivity(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),this.drawBaseline(),this.onChangeHandler(),Ka(this.root.node(),this.barG.node()),this.setGroupAccessibilityID(),this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldSetTextures&&(this.setTextures(),this.shouldSetTextures=!1),this.shouldSetStrokes&&(this.setStrokes(),this.shouldSetStrokes=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldEnterUpdateExit&&(this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateGeometries&&(this.drawGeometries(),this.shouldUpdateGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateCorners&&(this.setRoundedCorners(),this.shouldUpdateCorners=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldCheckLabelColor&&(this.checkLabelColorAgainstBackground(),this.shouldCheckLabelColor=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldUpdateLegendInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateBaseline&&(this.drawBaseline(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,zo(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateLabelPlacement(){"vertical"===this.layout?"top"!==this.dataLabel.placement&&"bottom"!==this.dataLabel.placement&&"auto"!==this.dataLabel.placement&&(this.dataLabel.placement="top"):"right"!==this.dataLabel.placement&&"left"!==this.dataLabel.placement&&"auto"!==this.dataLabel.placement&&(this.dataLabel.placement="right")}setDimensions(){this.padding="string"==typeof this.padding?So(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}prepareData(){this.data.map(t=>{t[this.valueAccessor]=parseFloat(t[this.valueAccessor]),t[this.groupAccessor]=t[this.groupAccessor]instanceof Date?Wo({date:t[this.groupAccessor],format:"vertical"===this.layout?this.xAxis.format:this.yAxis.format,offsetTimezone:!0}):t[this.groupAccessor]}),this.nest=function(){var t,i,s,n=[],r=[];function e(s,r,h,a){if(r>=n.length)return null!=t&&s.sort(t),null!=i?i(s):s;for(var o,u,c,l=-1,f=s.length,d=n[r++],v=Gr(),p=h();++l<f;)(c=v.get(o=d(u=s[l])+""))?c.push(u):v.set(o,[u]);return v.each((function(t,i){a(p,i,e(t,r,h,a))})),p}return s={object:function(t){return e(t,0,Vr,Yr)},map:function(t){return e(t,0,Kr,Br)},entries:function(t){return function t(s,e){if(++e>n.length)return s;var h,a=r[e-1];return null!=i&&e>=n.length?h=s.entries():(h=[],s.each((function(i,s){h.push({key:s,values:t(i,e)})}))),null!=a?h.sort((function(t,i){return a(t.key,i.key)})):h}(e(t,0,Kr,Br),0)},key:function(t){return n.push(t),s},sortKeys:function(t){return r[n.length-1]=t,s},sortValues:function(i){return t=i,s},rollup:function(t){return i=t,s}}}().key(t=>t[this.groupAccessor]).entries(this.data),this.datakeys=this.nest.map(t=>t.key)}setTableData(){const t=Co(this,vo,"clustered-bar-chart");this.tableData=To(this.data,t),this.tableColumns=Object.keys(t)}prepareScales(){const t=this.minValueOverride&&this.minValueOverride<Xr(this.data,t=>t[this.valueAccessor])?this.minValueOverride:Xr(this.data,t=>t[this.valueAccessor]);"vertical"===this.layout?(this.y=Ah().domain([Math.min(0,t),this.maxValueOverride||Rr(this.data,t=>t[this.valueAccessor])]).range([this.innerPaddedHeight,0]),this.x0=ie().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedWidth,0]:[0,this.innerPaddedWidth]).padding(this.groupIntervalRatio),this.x1=ie().domain(this.nest[0].values.map(t=>t[this.ordinalAccessor])).rangeRound([0,this.x0.bandwidth()]).padding(this.barIntervalRatio)):"horizontal"===this.layout&&(this.x=Ah().domain([Math.min(0,t),this.maxValueOverride||Rr(this.data,t=>t[this.valueAccessor])]).range([0,this.innerPaddedWidth]),this.y0=ie().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedHeight,0]:[0,this.innerPaddedHeight]).padding(this.groupIntervalRatio),this.y1=ie().domain(this.nest[0].values.map(t=>t[this.ordinalAccessor])).rangeRound([0,this.y0.bandwidth()]).padding(this.barIntervalRatio))}validateAxes(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!("vertical"===this.layout)&&this.xAxis.gridVisible}),this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:"vertical"===this.layout&&this.yAxis.gridVisible})}setColors(){this.preparedColors=this.colors?po(this.colors):No(this.colorPalette,this.nest[0].values.length)}setTextures(){const t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6)this.colorArr=this.preparedColors;else{const i=Xa({colors:t,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical",disableTransitions:!this.duration});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}}setStrokes(){this.strokes=Ra({root:this.svg.node(),id:this.chartID,colors:this.preparedColors.range?this.preparedColors.range():this.preparedColors,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle})}renderRootElements(){this.svg=Dr(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.gridG=this.rootG.append("g").attr("class","grid-group"),this.barG=this.rootG.append("g").attr("class","clustered-bar-group"),this.labelG=this.rootG.append("g").attr("class","clustered-bar-dataLabel-group"),this.legendG=Dr(this.clusteredBarChartEl).select(".clustered-bar-legend").append("svg"),this.tooltipG=Dr(this.clusteredBarChartEl).select(".clustered-bar-tooltip"),this.references=this.rootG.append("g").attr("class","clustered-bar-reference-line-group")}setTestingAttributes(){this.unitTest?(Dr(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid","chart-container"),Dr(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid","main-title"),Dr(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.barG.attr("data-testid","clustered-bar-group"),this.updateBarWrappers.attr("data-testid","clustered-bar-wrapper").attr("data-id",t=>`clustered-bar-wrapper-${t.key}`),this.update.attr("data-testid","bar").attr("data-id",t=>`bar-${t[this.groupAccessor]}-${t[this.ordinalAccessor]}`),this.labelG.attr("data-testid","clustered-bar-dataLabel-group"),this.updateLabelWrappers.attr("data-testid","clustered-bar-dataLabel-wrapper").attr("data-id",t=>`clustered-bar-dataLabel-wrapper-${t.key}`),this.updateLabels.attr("data-testid","dataLabel").attr("data-id",t=>`dataLabel-${t[this.groupAccessor]}-${t[this.ordinalAccessor]}`),this.references.attr("data-testid","reference-line-group"),this.svg.select("defs").attr("data-testid","pattern-defs"),this.references.selectAll(".clustered-bar-reference-line").attr("data-testid","reference-line"),this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid","reference-line-label")):(Dr(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid",null),Dr(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid",null),Dr(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.barG.attr("data-testid",null),this.updateBarWrappers.attr("data-testid",null).attr("data-id",null),this.update.attr("data-testid",null).attr("data-id",null),this.labelG.attr("data-testid",null),this.updateLabelWrappers.attr("data-testid",null).attr("data-id",null),this.updateLabels.attr("data-testid",null).attr("data-id",null),this.references.attr("data-testid",null),this.svg.select("defs").attr("data-testid",null),this.references.selectAll(".clustered-bar-reference-line").attr("data-testid",null),this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid",null))}reSetRoot(){Ho({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:Wh}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),Ho({selection:this.root,duration:this.duration,namespace:"root_reset",easing:Wh}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),Ho({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:Wh}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),co(this.chartID,this.width)}drawXAxis(){mo({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.x0:this.x,left:!1,wrapLabel:this.wrapLabel&&"vertical"===this.layout?this.x0.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible,duration:this.duration})}drawYAxis(){mo({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.y:this.y0,left:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible,duration:this.duration})}setXAxisAccessibility(){no({rootEle:this.clusteredBarChartEl,hasXAxis:!!this.innerXAxis&&this.innerXAxis.visible,xAxis:"vertical"===this.layout?this.x0||!1:this.x||!1,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){ro({rootEle:this.clusteredBarChartEl,hasYAxis:!!this.innerYAxis&&this.innerYAxis.visible,yAxis:"vertical"===this.layout?this.y||!1:this.y0||!1,yAxisLabel:this.yAxis.label?this.yAxis.label:""})}drawBaseline(){mo({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.x0:this.x,left:!1,padding:this.padding,markOffset:"vertical"===this.layout?this.y(0)||-1:this.y0(0)||-1,hide:!("vertical"===this.layout),duration:this.duration}),mo({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.y:this.y0,left:!0,padding:this.padding,markOffset:"vertical"===this.layout?this.x0(0)||-1:this.x(0)||-1,hide:"vertical"===this.layout,duration:this.duration})}drawXGrid(){bo(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,"vertical"===this.layout?this.x0:this.x,!1,!this.innerXAxis.gridVisible,this.xAxis.tickInterval,this.duration)}drawYGrid(){bo(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,"vertical"===this.layout?this.y:this.y0,!0,!this.innerYAxis.gridVisible,this.yAxis.tickInterval,this.duration)}setGlobalSelections(){const t=this.barG.selectAll(".clustered-bar-wrapper").data(this.nest,t=>t.key);this.enterBarWrappers=t.enter().append("g"),this.exitBarWrappers=t.exit(),this.updateBarWrappers=t.merge(this.enterBarWrappers);const i=this.updateBarWrappers.selectAll(".clustered-bar").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enter=i.enter().append("rect"),this.exit=i.exit(),this.update=i.merge(this.enter),this.enterSize=this.enter.size(),this.exitSize=this.exit.size();const s=this.labelG.selectAll("g").data(this.nest,t=>t.key);this.enterLabelWrappers=s.enter().append("g"),this.exitLabelWrappers=s.exit(),this.updateLabelWrappers=s.merge(this.enterLabelWrappers);const n=this.updateLabelWrappers.selectAll("text").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enterLabels=n.enter().append("text"),this.exitLabels=n.exit(),this.updateLabels=n.merge(this.enterLabels)}enterGeometries(){this.enter.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"max":"min";this.enterBarWrappers.attr("class","clustered-bar-wrapper").classed("entering",!0).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")").each((t,i,s)=>{Fa(s[i])}),this.enter.attr("class","clustered-bar").attr("cursor",this.suppressEvents?null:this.cursor).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).each((t,i,s)=>{Fa(s[i])}).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr(s,t=>this[s](Math[r](0,t[this.valueAccessor]))).attr(n,t=>Math.abs("vertical"===this.layout?this[s](0)-this[s](t[this.valueAccessor]):this[s](t[this.valueAccessor])-this[s](0))).attr(t,i=>this[t+"1"](i[this.ordinalAccessor])).attr(i,this[t+"1"].bandwidth()),this.defaults?this.enter.attr("opacity",t=>yo(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)):this.enter.classed("entering",!0).attr(t,(i,s,n)=>{const r=Dr(n[s].parentNode),e=r.classed("entering");let h=e?this[t+"0"](r.datum().key):this[t+"1"](i[this.ordinalAccessor]);const a=e?this[t+"0"].bandwidth()/2:this[t+"1"].bandwidth()/2,o=(h+a)/(this.innerPaddedWidth/2);return h=e?0:h,h+a*o}).attr(i,0),this.enterBarWrappers.order(),this.enter.order()}updateGeometries(){this.update.interrupt(),this.update.transition("opacity").duration((t,i,s)=>Dr(s[i]).classed("entering")?(Dr(s[i]).classed("entering",!1),this.duration):0).ease(Wh).attr("opacity",t=>yo(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}exitGeometries(){this.exitBarWrappers.interrupt(),this.exit.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="innerPadded"+i[0].toUpperCase()+i.substring(1);this.exit.transition("exit").duration(this.duration).ease(Wh).attr("opacity",0).attr(t,(n,r,e)=>{const h=Dr(e[r]);let a=+h.attr(t)+ +h.attr(i)/2;return a=+h.attr(t)+ +h.attr(i)/2*(a/(this[s]/2)),a}).attr(i,0),this.exitSize+=this.exitBarWrappers.selectAll(".clustered-bar").size(),this.exitBarWrappers.selectAll(".clustered-bar").transition("exit_wrappers").duration(.75*this.duration).ease(Wh).attr("opacity",0).attr(t,(i,n,r)=>{const e=r[n].parentNode.transform.baseVal.consolidate().matrix.e,h=this[t+"0"].bandwidth()/2;return h*((e+h)/(this[s]/2))}).attr(i,0),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(Wh).call(Io,()=>{const t=oo(this.rootG.node());this.exit.remove(),this.exitBarWrappers.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),ao({parentGNode:this.rootG.node(),focusDidExist:t})})}drawGeometries(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"max":"min";this.updateBarWrappers.transition("update").duration(this.duration).ease(Wh).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")").call(Io,()=>{this.updateBarWrappers.classed("entering",!1)}),this.update.classed("geometryIsMoving",(e,h,a)=>_a(Dr(a[h]),[{attr:t,numeric:!0,newValue:this[t+"1"](e[this.ordinalAccessor])},{attr:i,numeric:!0,newValue:this[t+"1"].bandwidth()},{attr:s,numeric:!0,newValue:this[s](Math[r](0,e[this.valueAccessor]))},{attr:n,numeric:!0,newValue:Math.abs("vertical"===this.layout?this[s](0)-this[s](e[this.valueAccessor]):this[s](e[this.valueAccessor])-this[s](0))}])).attr(`data-${t}`,i=>this[t+"1"](i[this.ordinalAccessor])).attr("data-translate-x",t=>("vertical"===this.layout?this.x0(t[this.groupAccessor]):0)+this.padding.left+this.margin.left).attr("data-translate-y",t=>("vertical"===this.layout?0:this.y0(t[this.groupAccessor]))+this.padding.top+this.margin.top).attr(`data-${i}`,this[t+"1"].bandwidth()).attr(`data-${s}`,t=>this[s](Math[r](0,t[this.valueAccessor]))).attr(`data-${n}`,t=>Math.abs("vertical"===this.layout?this[s](0)-this[s](t[this.valueAccessor]):this[s](t[this.valueAccessor])-this[s](0))).transition("update").duration((t,i,s)=>Dr(s[i]).classed("entering")?this.duration/2:this.duration).delay((t,i,s)=>Dr(s[i]).classed("entering")?this.duration/2:0).ease(Wh).attr(s,t=>this[s](Math[r](0,t[this.valueAccessor]))).attr(n,t=>Math.abs("vertical"===this.layout?this[s](0)-this[s](t[this.valueAccessor]):this[s](t[this.valueAccessor])-this[s](0))).attr(t,i=>this[t+"1"](i[this.ordinalAccessor])).attr(i,this[t+"1"].bandwidth()).call(Io,()=>{this.update.classed("geometryIsMoving",!1),this.updateInteractionState(),ao({parentGNode:this.rootG.node()})})}updateInteractionState(){Pa(this.svg.node()),this.update.interrupt("opacity"),this.updateLabels.interrupt("opacity"),this.update.attr("opacity",t=>yo(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).attr("fill",(t,i)=>{const s=this.clickHighlight&&this.clickHighlight.length>0&&wo(t,this.clickHighlight,this.innerInteractionKeys),n=this.hoverHighlight&&go(t,this.hoverHighlight,this.innerInteractionKeys),r=this.colorArr[i];return s&&this.clickStyle.color?Oo[this.clickStyle.color]||this.clickStyle.color:s?r:n&&this.hoverStyle.color?Oo[this.hoverStyle.color]||this.hoverStyle.color:r}).attr("filter",(t,i,s)=>{if(!this.accessibility.hideStrokes&&!Dr(s[i]).classed("geometryIsMoving")){const n=this.clickHighlight&&this.clickHighlight.length>0&&wo(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&go(t,this.hoverHighlight,this.innerInteractionKeys),e=this.preparedColors[i],h=n?"click":r&&!Dr(s[i]).classed("geometryIsMoving")?"hover":"rest",a=n&&this.clickStyle.color?Oo[this.clickStyle.color]||this.clickStyle.color:n?e:r&&this.hoverStyle.color?Oo[this.hoverStyle.color]||this.hoverStyle.color:e;return"hover"===h&&qa({inputElement:s[i],id:this.chartID,key:t[this.ordinalAccessor]+t[this.groupAccessor],strokeWidth:this.hoverStyle.strokeWidth,fill:a}),this.strokes[h+a]}return null}),ao({parentGNode:this.rootG.node()}),ko({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}setLabelOpacity(){this.processLabelOpacity(this.updateLabels)}processLabelOpacity(t){const i=this.dataLabel.visible?1:0,s="vertical"===this.layout?"x":"y",n="vertical"===this.layout?"width":"height",r="vertical"===this.layout?"y":"x",e="vertical"===this.layout?"height":"width",h=this[s+"0"].bandwidth()/this.nest[0].values.length;t.attr("opacity",t=>{const a={};return a[n]="left"===this.dataLabel.placement||"bottom"===this.dataLabel.placement?this[s+"1"].bandwidth():h,"left"!==this.dataLabel.placement&&"bottom"!==this.dataLabel.placement||(a[e]=Math.abs("vertical"===this.layout?this[r](0)-this[r](t[this.valueAccessor]):this[r](t[this.valueAccessor])-this[r](0))),"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly||this.accessibility.showSmallLabels||za({text:Ao(t,this.innerLabelAccessor,this.dataLabel.format),dimensions:a,fontSize:14})?yo(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:0})}checkLabelColorAgainstBackground(){this.updateLabels.attr("fill",(t,i,s)=>this.textTreatmentHandler(t,i,s))}setRoundedCorners(){this.update.transition("corners").duration(this.duration).ease(Wh).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)}setSelectedClass(){this.update.classed("highlight",(t,i,s)=>{let n=yo(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return n=!(!this.clickHighlight||!this.clickHighlight.length)&&n,uo(s[i],n,this.accessibility.elementsAreInterface),n})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),this.updateLabels.attr("cursor",this.suppressEvents?null:this.cursor)}enterDataLabels(){const t="vertical"===this.layout?"x":"y";this.enterLabelWrappers.attr("class","clustered-bar-label-wrapper").classed("entering",!0).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")"),this.enterLabels.attr(`data-${t}`,i=>this[t+"1"](i[this.ordinalAccessor])).attr("opacity",0).attr("class","clustered-bar-dataLabel entering").attr("cursor",this.suppressEvents?null:this.cursor).classed("clustered-bar-dataLabel-horizontal",!1).classed("clustered-bar-dataLabel-vertical",!1).classed("clustered-bar-dataLabel-"+this.layout,!0).attr("fill",this.textTreatmentHandler).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),$o({root:this.enterLabels,xScale:"vertical"===this.layout?this.x1:this.x,yScale:"vertical"===this.layout?this.y:this.y1,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"bar"}),this.enterLabels.attr(t,(i,s,n)=>{const r=t+"0",e=t+"1",h="x"===t?"innerPaddedWidth":"innerPaddedHeight",a=Dr(n[s].parentNode),o=a.classed("entering");let u=o?this[r](a.datum().key):this[e](i[this.ordinalAccessor]);const c=o?this[r].bandwidth()/2:this[e].bandwidth()/2,l=(u+c)/(this[h]/2);return u=o?0:u,u+c*l})}updateDataLabels(){this.updateLabels.interrupt();const t=this.dataLabel.visible?1:0;this.updateLabels.transition("opacity").duration((t,i,s)=>Dr(s[i]).classed("entering")?(Dr(s[i]).classed("entering",!1),this.duration/2):0).ease(Wh).attr("opacity",i=>yo(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1).call(Io,()=>{this.updateLabels.classed("entering",!1)})}exitDataLabels(){this.exitLabelWrappers.selectAll("text").transition("exit").ease(Wh).duration(this.duration/3).attr("opacity",0).call(Io,()=>{this.exitLabelWrappers.remove()}),this.exitLabels.transition("exit").ease(Wh).duration(this.duration/3).attr("opacity",0).remove()}drawDataLabels(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"max":"min";let e=15;const h="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;this.updateLabels.text((t,i,s)=>{if(0===i){const t=getComputedStyle(s[i]),n=parseFloat(t.fontSize);e=Math.max(n-1,1)}return Ao(t,this.innerLabelAccessor,this.dataLabel.format)}),this.updateLabelWrappers.classed("clustered-bar-dataLabel-horizontal",!1).classed("clustered-bar-dataLabel-vertical",!1).classed("clustered-bar-dataLabel-"+this.layout,!0).transition("update").duration(this.duration).ease(Wh).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")").call(Io,()=>{this.updateLabelWrappers.classed("entering",!1)});const a=this.updateLabels.style("visibility",(t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?Dr(s[i]).style("visibility"):null).attr(`data-${t}`,i=>this[t+"1"](i[this.ordinalAccessor])).attr("data-translate-x",t=>("vertical"===this.layout?this.x0(t[this.groupAccessor]):0)+this.padding.left+this.margin.left).attr("data-translate-y",t=>("vertical"===this.layout?0:this.y0(t[this.groupAccessor]))+this.padding.top+this.margin.top).attr(`data-${i}`,this[t+"1"].bandwidth()).attr(`data-${s}`,t=>this[s](Math[r](0,t[this.valueAccessor]))).attr(`data-${n}`,t=>Math.abs("vertical"===this.layout?this[s](0)-this[s](t[this.valueAccessor]):this[s](t[this.valueAccessor])-this[s](0))).transition("update").ease(Wh).duration(this.duration),o={vertical:{top:{validPositions:["top","bottom"],offsets:[2,1]},middle:{validPositions:["middle","top"],offsets:[1,e/2]},bottom:{validPositions:["middle","top"],offsets:[1,e/2]}},horizontal:{right:{validPositions:["right","left"],offsets:[4,8]},middle:{validPositions:["middle","right"],offsets:[1,15]},left:{validPositions:["left","right"],offsets:[1,20]}}},u=this.dataLabel&&this.dataLabel.collisionPlacement,c=u&&o[this.layout][u]?this.dataLabel.collisionPlacement:"vertical"===this.layout?"top":"right";this.bitmaps=$o({root:a,xScale:"vertical"===this.layout?this.x1:this.x,yScale:"vertical"===this.layout?this.y:this.y1,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"bar",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,labelSelection:a,avoidMarks:[this.update],validPositions:h?["middle"]:o[this.layout][c].validPositions,offsets:h?[1]:o[this.layout][c].offsets,accessors:[this.groupAccessor,this.ordinalAccessor,"key"],size:[qo(this.width,0),qo(this.height,0)],boundsScope:h?void 0:c,hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class","clustered-bar-reference").attr("opacity",1),s=i.append("line");s.attr("class","clustered-bar-reference-line").attr("opacity",0);const n=i.append("text");n.attr("class","clustered-bar-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".clustered-bar-reference-line").data(t=>[t]).transition("merge").ease(Wh).duration(this.duration),h=r.selectAll(".clustered-bar-reference-line-label").data(t=>[t]).transition("merge").ease(Wh).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(Wh).duration(this.duration).attr("opacity",0).remove(),"vertical"===this.layout?(i.attr("transform",t=>"translate(0,"+this.y(t.value)+")"),r.transition("merge").ease(Wh).duration(this.duration).attr("transform",t=>"translate(0,"+this.y(t.value)+")"),s.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),n.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em")):"horizontal"===this.layout&&(i.attr("transform",t=>"translate("+this.x(t.value)+",0)"),r.transition("merge").ease(Wh).duration(this.duration).attr("transform",t=>"translate("+this.x(t.value)+",0)"),s.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),e.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),n.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em"),h.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em")),e.style("stroke",Oo[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",Oo[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}prepareLegendData(){this.legendData=this.nest[0].values}drawLegendElements(){Mo({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){Dr(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:"").on("click",this.legend.interactive&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.legend.interactive&&!this.suppressEvents?t=>this.hoverFunc.emit(t):null).on("mouseout",this.legend.interactive&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}setLegendCursor(){Dr(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:null)}bindInteractivity(){this.update.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateLabels.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler())}drawAnnotations(){fo({source:this.rootG.node(),data:this.annotations,xScale:"horizontal"!==this.layout?this.x0:this.x,xAccessor:"horizontal"!==this.layout?this.groupAccessor:this.valueAccessor,yScale:"horizontal"!==this.layout?this.y:this.y0,yAccessor:"horizontal"!==this.layout?this.valueAccessor:this.groupAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){ho(this.clusteredBarChartEl,this.annotations)}setTagLevels(){this.topLevel=_o(this.highestHeadingLevel),this.bottomLevel=_o(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){ja({rootEle:this.clusteredBarChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"clustered-bar-chart",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){Ya({node:this.svg.node(),chartTag:"clustered-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:Co(this,vo,"clustered-bar-chart"),groupAccessor:this.groupAccessor,groupName:"cluster",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,s)=>{Fa(s[i])})}setGeometryAriaLabels(){const t=Co(this,vo,"clustered-bar-chart");this.update.each((i,s,n)=>{Ga({node:n[s],geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"cluster",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),Va({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateBarWrappers.each((t,i,s)=>{Va({node:s[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){Ba(this.clusteredBarChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){Ua(this.clusteredBarChartEl,this.subTitle)}setChartAccessibilityLongDescription(){Za(this.clusteredBarChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){Ja(this.clusteredBarChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){Qa(this.clusteredBarChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){to(this.clusteredBarChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){io(this.clusteredBarChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){so({rootEle:this.clusteredBarChartEl,parentGNode:this.barG.node(),chartTag:"clustered-bar-chart",geomType:"bar",groupName:"cluster"})}setChartAccessibilityStructureNotes(){eo(this.clusteredBarChartEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){Do(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&t[this.ordinalAccessor]&&this.eventsTooltip({data:t,evt:mr,isToShow:!0})}onMouseOutHandler(){Do(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){Eo(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){xo({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"clustered"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldCheckValueAxis&&("horizontal"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldUpdateXGrid=!0):"vertical"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldUpdateYGrid=!0),this.shouldCheckValueAxis=!1),this.shouldCheckLabelAxis&&("vertical"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldUpdateXGrid=!0,this.shouldSetXAxisAccessibility=!0):"horizontal"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldUpdateYGrid=!0,this.shouldSetYAxisAccessibility=!0),this.shouldCheckLabelAxis=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateLegendData&&(this.prepareLegendData(),this.shouldUpdateLegendData=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldValidateAxes&&(this.validateAxes(),this.shouldValidateAxes=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldValidateLabelPlacement&&(this.validateLabelPlacement(),this.shouldValidateLabelPlacement=!1),s("div",{class:`o-layout is--${this.layout} light`},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"clustered-bar-main-title vcl-main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions clustered-bar-sub-title vcl-sub-title"},this.subTitle),s("div",{class:"clustered-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"bar",groupName:"cluster",chartTag:"clustered-bar-chart",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:!0,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-clustered-bar-container"}),s("div",{class:"clustered-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(Lh);let i=0;const s={mainTitle:{exception:""},subTitle:{exception:""},barIntervalRatio:{exception:0},groupIntervalRatio:{exception:0},showTooltip:{exception:!1},wrapLabel:{exception:!1},hoverOpacity:{exception:0}};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:Lh[t[i]]}}get clusteredBarChartEl(){return n(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],reverseOrder:["reverseOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],groupIntervalRatio:["groupIntervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}clustered-bar-chart{cursor:default}clustered-bar-chart .annotations{pointer-events:none}clustered-bar-chart .annotations .handle{pointer-events:all}clustered-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}clustered-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}clustered-bar-chart .hidden{display:none}clustered-bar-chart #visa-viz-d3-clustered-bar-container{clear:both}clustered-bar-chart .clustered-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}clustered-bar-chart .clustered-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}clustered-bar-chart .clustered-bar-legend .key-dot{margin:3px 8px}clustered-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}clustered-bar-chart .light .grid path{stroke-width:0}clustered-bar-chart .light .axis{font-size:12px}clustered-bar-chart .light .axis .tick text{fill:#767676}clustered-bar-chart .light .axis .tick line{stroke:#767676}clustered-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .light .y.axis path{stroke:#767676;opacity:0}clustered-bar-chart .light .x.axis path{stroke:#767676}clustered-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}clustered-bar-chart .dark .grid path{stroke-width:0}clustered-bar-chart .dark .axis{font-size:12px}clustered-bar-chart .dark .axis .tick line{stroke:lightgrey}clustered-bar-chart .dark .axis .tick text{fill:grey}clustered-bar-chart .dark .axis path{stroke:black}clustered-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .dark .o-layout--chart svg{background:black}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-vertical{text-anchor:middle}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-horizontal{text-anchor:start}"}};window.VisaChartsLibOSSLicenses=Lo();var Ro="http://www.w3.org/1999/xhtml";const Xo={svg:"http://www.w3.org/2000/svg",xhtml:Ro,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jo(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),Xo.hasOwnProperty(i)?{space:Xo[i],local:t}:t}function Fo(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===Ro&&i.documentElement.namespaceURI===Ro?i.createElement(t):i.createElementNS(s,t)}}function Go(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Vo(t){var i=jo(t);return(i.local?Go:Fo)(i)}function Yo(){}function Ko(t){return null==t?Yo:function(){return this.querySelector(t)}}function Bo(){return[]}function Uo(t){return null==t?Bo:function(){return this.querySelectorAll(t)}}function Zo(t){return function(){return this.matches(t)}}function Jo(t){return new Array(t.length)}function Qo(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function tu(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new Qo(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function iu(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new Qo(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function su(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function nu(t){return function(){this.removeAttribute(t)}}function ru(t){return function(){this.removeAttributeNS(t.space,t.local)}}function eu(t,i){return function(){this.setAttribute(t,i)}}function hu(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function au(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function ou(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function uu(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function cu(t){return function(){this.style.removeProperty(t)}}function lu(t,i,s){return function(){this.style.setProperty(t,i,s)}}function fu(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function du(t,i){return t.style.getPropertyValue(i)||uu(t).getComputedStyle(t,null).getPropertyValue(i)}function vu(t){return function(){delete this[t]}}function pu(t,i){return function(){this[t]=i}}function yu(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function wu(t){return t.trim().split(/^|\s+/)}function gu(t){return t.classList||new mu(t)}function mu(t){this._node=t,this._names=wu(t.getAttribute("class")||"")}function bu(t,i){for(var s=gu(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function Mu(t,i){for(var s=gu(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function ku(t){return function(){bu(this,t)}}function xu(t){return function(){Mu(this,t)}}function Au(t,i){return function(){(i.apply(this,arguments)?bu:Mu)(this,t)}}function Wu(){this.textContent=""}function Nu(t){return function(){this.textContent=t}}function Lu(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function Su(){this.innerHTML=""}function Tu(t){return function(){this.innerHTML=t}}function Eu(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function Du(){this.nextSibling&&this.parentNode.appendChild(this)}function $u(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cu(){return null}function Iu(){var t=this.parentNode;t&&t.removeChild(this)}function Ou(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function zu(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}Qo.prototype={constructor:Qo,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},mu.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var _u={},Hu=null;function qu(t,i,s){return t=Pu(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function Pu(t,i,s){return function(n){var r=Hu;Hu=n;try{t.call(this,this.__data__,i,s)}finally{Hu=r}}}function Ru(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function Xu(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function ju(t,i,s){var n=_u.hasOwnProperty(t.type)?qu:Pu;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function Fu(t,i,s){var n=uu(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function Gu(t,i){return function(){return Fu(this,t,i)}}function Vu(t,i){return function(){return Fu(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(_u={mouseenter:"mouseover",mouseleave:"mouseout"}));var Yu=[null];function Ku(t,i){this._groups=t,this._parents=i}function Bu(){return new Ku([[document.documentElement]],Yu)}function Uu(t){return"string"==typeof t?new Ku([[document.querySelector(t)]],[document.documentElement]):new Ku([[t]],Yu)}function Zu(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function Ju(t){return 1===t.length&&(t=function(t){return function(i,s){return Zu(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}Ku.prototype=Bu.prototype={constructor:Ku,select:function(t){"function"!=typeof t&&(t=Ko(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new Ku(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Uo(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new Ku(n,r)},filter:function(t){"function"!=typeof t&&(t=Zo(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new Ku(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?iu:tu,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new Ku(h,n))._enter=a,h._exit=o,h},enter:function(){return new Ku(this._enter||this._groups.map(Jo),this._parents)},exit:function(){return new Ku(this._exit||this._groups.map(Jo),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new Ku(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=su);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new Ku(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=jo(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?ru:nu:"function"==typeof i?s.local?ou:au:s.local?hu:eu)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?cu:"function"==typeof i?fu:lu)(t,i,null==s?"":s)):du(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?vu:"function"==typeof i?yu:pu)(t,i)):this.node()[t]},classed:function(t,i){var s=wu(t+"");if(arguments.length<2){for(var n=gu(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?Au:i?ku:xu)(s,i))},text:function(t){return arguments.length?this.each(null==t?Wu:("function"==typeof t?Lu:Nu)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Su:("function"==typeof t?Eu:Tu)(t)):this.node().innerHTML},raise:function(){return this.each(Du)},lower:function(){return this.each($u)},append:function(t){var i="function"==typeof t?t:Vo(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:Vo(t),n=null==i?Cu:"function"==typeof i?i:Ko(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(Iu)},clone:function(t){return this.select(t?zu:Ou)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=Ru(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?ju:Xu,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?Vu:Gu)(t,i))}};var Qu=Ju(Zu).right;function tc(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var ic=Math.sqrt(50),sc=Math.sqrt(10),nc=Math.sqrt(2);function rc(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=ic?10:e>=sc?5:e>=nc?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=ic?10:e>=sc?5:e>=nc?2:1)}function ec(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=ic?r*=10:e>=sc?r*=5:e>=nc&&(r*=2),i<t?-r:r}function hc(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&s>n&&(n=s);return n}function ac(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&n>s&&(n=s);return n}var oc=new Date,uc=new Date;function cc(t,i,s,n){function r(i){return t(i=0===arguments.length?new Date:new Date(+i)),i}return r.floor=function(i){return t(i=new Date(+i)),i},r.ceil=function(s){return t(s=new Date(s-1)),i(s,1),t(s),s},r.round=function(t){var i=r(t),s=r.ceil(t);return t-i<s-t?i:s},r.offset=function(t,s){return i(t=new Date(+t),null==s?1:Math.floor(s)),t},r.range=function(s,n,e){var h,a=[];if(s=r.ceil(s),e=null==e?1:Math.floor(e),!(s<n&&e>0))return a;do{a.push(h=new Date(+s)),i(s,e),t(s)}while(h<s&&s<n);return a},r.filter=function(s){return cc((function(i){if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;i(t,-1),!s(t););else for(;--n>=0;)for(;i(t,1),!s(t););}))},s&&(r.count=function(i,n){return oc.setTime(+i),uc.setTime(+n),t(oc),t(uc),Math.floor(s(oc,uc))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(n?function(i){return n(i)%t==0}:function(i){return r.count(0,i)%t==0}):r:null}),r}var lc=cc((function(){}),(function(t,i){t.setTime(+t+i)}),(function(t,i){return i-t}));lc.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?cc((function(i){i.setTime(Math.floor(i/t)*t)}),(function(i,s){i.setTime(+i+s*t)}),(function(i,s){return(s-i)/t})):lc:null};var fc=cc((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,i){t.setTime(+t+1e3*i)}),(function(t,i){return(i-t)/1e3}),(function(t){return t.getUTCSeconds()})),dc=cc((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,i){t.setTime(+t+6e4*i)}),(function(t,i){return(i-t)/6e4}),(function(t){return t.getMinutes()})),vc=cc((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,i){t.setTime(+t+36e5*i)}),(function(t,i){return(i-t)/36e5}),(function(t){return t.getHours()})),pc=cc((function(t){t.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}));function yc(t){return cc((function(i){i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+7*i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var wc=yc(0),gc=yc(1),mc=(yc(2),yc(3),yc(4)),bc=(yc(5),yc(6),cc((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,i){t.setMonth(t.getMonth()+i)}),(function(t,i){return i.getMonth()-t.getMonth()+12*(i.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),Mc=cc((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,i){t.setFullYear(t.getFullYear()+i)}),(function(t,i){return i.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Mc.every=function(t){return isFinite(t=Math.floor(t))&&t>0?cc((function(i){i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)}),(function(i,s){i.setFullYear(i.getFullYear()+s*t)})):null};var kc=cc((function(t){t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+i)}),(function(t,i){return(i-t)/864e5}),(function(t){return t.getUTCDate()-1}));function xc(t){return cc((function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-t)%7),i.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+7*i)}),(function(t,i){return(i-t)/6048e5}))}var Ac=xc(0),Wc=xc(1),Nc=(xc(2),xc(3),xc(4)),Lc=(xc(5),xc(6),cc((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i)}),(function(t,i){return i.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));function Sc(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function Tc(){}function Ec(t,i){var s=new Tc;if(t instanceof Tc)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}function Dc(){return{}}function $c(t,i,s){t[i]=s}function Cc(){return Ec()}function Ic(t,i,s){t.set(i,s)}Lc.every=function(t){return isFinite(t=Math.floor(t))&&t>0?cc((function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/t)*t),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)}),(function(i,s){i.setUTCFullYear(i.getUTCFullYear()+s*t)})):null},Tc.prototype=Ec.prototype={constructor:Tc,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var Oc=Array.prototype,zc=Oc.map,_c=Oc.slice,Hc={name:"implicit"};function qc(){var t=Ec(),i=[],s=[],n=Hc;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==Hc)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=Ec();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=_c.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return qc(i,s).unknown(n)},Sc.apply(r,arguments),r}function Pc(){var t,i,s=qc().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=tc(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return Pc(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},Sc.apply(c(),arguments)}function Rc(t){var i=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Rc(i())},t}function Xc(){return Rc(Pc.apply(null,arguments).paddingInner(1))}function jc(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function Fc(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function Gc(){}var Vc="\\s*([+-]?\\d+)\\s*",Yc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bc=/^#([0-9a-f]{3,8})$/,Uc=new RegExp("^rgb\\("+[Vc,Vc,Vc]+"\\)$"),Zc=new RegExp("^rgb\\("+[Kc,Kc,Kc]+"\\)$"),Jc=new RegExp("^rgba\\("+[Vc,Vc,Vc,Yc]+"\\)$"),Qc=new RegExp("^rgba\\("+[Kc,Kc,Kc,Yc]+"\\)$"),tl=new RegExp("^hsl\\("+[Yc,Kc,Kc]+"\\)$"),il=new RegExp("^hsla\\("+[Yc,Kc,Kc,Yc]+"\\)$"),sl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function nl(){return this.rgb().formatHex()}function rl(){return this.rgb().formatRgb()}function el(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=Bc.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?hl(i):3===s?new cl(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?al(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?al(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Uc.exec(t))?new cl(i[1],i[2],i[3],1):(i=Zc.exec(t))?new cl(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=Jc.exec(t))?al(i[1],i[2],i[3],i[4]):(i=Qc.exec(t))?al(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=tl.exec(t))?vl(i[1],i[2]/100,i[3]/100,1):(i=il.exec(t))?vl(i[1],i[2]/100,i[3]/100,i[4]):sl.hasOwnProperty(t)?hl(sl[t]):"transparent"===t?new cl(NaN,NaN,NaN,0):null}function hl(t){return new cl(t>>16&255,t>>8&255,255&t,1)}function al(t,i,s,n){return n<=0&&(t=i=s=NaN),new cl(t,i,s,n)}function ol(t){return t instanceof Gc||(t=el(t)),t?new cl((t=t.rgb()).r,t.g,t.b,t.opacity):new cl}function ul(t,i,s,n){return 1===arguments.length?ol(t):new cl(t,i,s,null==n?1:n)}function cl(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function ll(){return"#"+dl(this.r)+dl(this.g)+dl(this.b)}function fl(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function dl(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function vl(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new yl(t,i,s,n)}function pl(t){if(t instanceof yl)return new yl(t.h,t.s,t.l,t.opacity);if(t instanceof Gc||(t=el(t)),!t)return new yl;if(t instanceof yl)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new yl(h,a,o,t.opacity)}function yl(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function wl(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function gl(t){return function(){return t}}function ml(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):gl(isNaN(t)?i:t)}jc(Gc,el,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:nl,formatHex:nl,formatHsl:function(){return pl(this).formatHsl()},formatRgb:rl,toString:rl}),jc(cl,ul,Fc(Gc,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new cl(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new cl(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ll,formatHex:ll,formatRgb:fl,toString:fl})),jc(yl,(function(t,i,s,n){return 1===arguments.length?pl(t):new yl(t,i,s,null==n?1:n)}),Fc(Gc,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new yl(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new yl(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new cl(wl(t>=240?t-240:t+120,r,n),wl(t,r,n),wl(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const bl=function t(i){var s=function(t){return 1==(t=+t)?ml:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):gl(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=ul(t)).r,(i=ul(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=ml(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function Ml(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function kl(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=Tl(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function xl(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function Al(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function Wl(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=Tl(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var Nl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ll=new RegExp(Nl.source,"g");function Sl(t,i){var s,n,r,e=Nl.lastIndex=Ll.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=Nl.exec(t))&&(n=Ll.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:Al(s,n)})),e=Ll.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function Tl(t,i){var s,n=typeof i;return null==i||"boolean"===n?gl(i):("number"===n?Al:"string"===n?(s=el(i))?(i=s,bl):Sl:i instanceof el?bl:i instanceof Date?xl:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?Ml:Array.isArray(i)?kl:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?Wl:Al)(t,i)}function El(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var Dl,$l,Cl,Il,Ol=180/Math.PI,zl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _l(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*Ol,skewX:Math.atan(o)*Ol,scaleX:h,scaleY:a}}function Hl(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:Al(t,r)},{i:o-2,x:Al(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:Al(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:Al(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:Al(t,s)},{i:a-2,x:Al(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var ql=Hl((function(t){return"none"===t?zl:(Dl||(Dl=document.createElement("DIV"),$l=document.documentElement,Cl=document.defaultView),Dl.style.transform=t,t=Cl.getComputedStyle($l.appendChild(Dl),null).getPropertyValue("transform"),$l.removeChild(Dl),_l(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Pl=Hl((function(t){return null==t?zl:(Il||(Il=document.createElementNS("http://www.w3.org/2000/svg","g")),Il.setAttribute("transform",t),(t=Il.transform.baseVal.consolidate())?_l((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):zl)}),", ",")",")");function Rl(t){return+t}var Xl=[0,1];function jl(t){return t}function Fl(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function Gl(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function Vl(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=Fl(r,n),e=s(h,e)):(n=Fl(n,r),e=s(e,h)),function(t){return e(n(t))}}function Yl(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=Fl(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=Qu(t,i,1,n)-1;return e[s](r[s](i))}}function Kl(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Bl(t,i){return function(){var t,i,s,n,r,e,h=Xl,a=Xl,o=Tl,u=jl;function c(){return n=Math.min(h.length,a.length)>2?Yl:Vl,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),Al)))(s)))},l.domain=function(t){return arguments.length?(h=zc.call(t,Rl),u===jl||(u=Gl(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=_c.call(t),c()):a.slice()},l.rangeRound=function(t){return a=_c.call(t),o=El,c()},l.clamp=function(t){return arguments.length?(u=t?Gl(h):jl,l):u!==jl},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function Ul(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function Zl(t){return(t=Ul(Math.abs(t)))?t[1]:NaN}var Jl,Ql=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tf(t){if(!(i=Ql.exec(t)))throw new Error("invalid format: "+t);var i;return new sf({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function sf(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function nf(t,i){var s=Ul(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}tf.prototype=sf.prototype,sf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const rf={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return nf(100*t,i)},r:nf,s:function(t,i){var s=Ul(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(Jl=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+Ul(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function ef(t){return t}var hf,af,of,uf=Array.prototype.map,cf=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function lf(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=rc(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=ec(t,i,s);switch((n=tf(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Zl(i)/3)))-Zl(Math.abs(t)))}(e,h))||(n.precision=r),of(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,Zl(i)-Zl(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-Zl(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return af(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=rc(a,o,s))>0?n=rc(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=rc(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function ff(){var t=Bl(jl,jl);return t.copy=function(){return Kl(t,ff())},Sc.apply(t,arguments),lf(t)}function df(t){if(0<=t.y&&t.y<100){var i=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return i.setFullYear(t.y),i}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function vf(t){if(0<=t.y&&t.y<100){var i=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return i.setUTCFullYear(t.y),i}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function pf(t,i,s){return{y:t,m:i,d:s,H:0,M:0,S:0,L:0}}hf=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?ef:(i=uf.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?ef:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(uf.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=tf(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):rf[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?o:"",M=rf[g],k=/[defgprs%]/.test(g);function x(t){var r,e,o,f=m,x=b;if("c"===g)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===g?cf[8+Jl/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var W=f.length+t.length+x.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=n(N+t,N.length?v-x.length:1/0),N=""),s){case"<":t=f+t+x+N;break;case"=":t=f+N+t+x;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+x+N.slice(W);break;default:t=N+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=tf(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(Zl(i)/3))),r=Math.pow(10,-n),e=cf[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),af=hf.format,of=hf.formatPrefix;var yf,wf,gf={"-":"",_:" ",0:"0"},mf=/^\s*\d+/,bf=/^%/,Mf=/[\\^$*+?|[\]().{}]/g;function kf(t,i,s){var n=t<0?"-":"",r=(n?-t:t)+"",e=r.length;return n+(e<s?new Array(s-e+1).join(i)+r:r)}function xf(t){return t.replace(Mf,"\\$&")}function Af(t){return new RegExp("^(?:"+t.map(xf).join("|")+")","i")}function Wf(t){for(var i={},s=-1,n=t.length;++s<n;)i[t[s].toLowerCase()]=s;return i}function Nf(t,i,s){var n=mf.exec(i.slice(s,s+1));return n?(t.w=+n[0],s+n[0].length):-1}function Lf(t,i,s){var n=mf.exec(i.slice(s,s+1));return n?(t.u=+n[0],s+n[0].length):-1}function Sf(t,i,s){var n=mf.exec(i.slice(s,s+2));return n?(t.U=+n[0],s+n[0].length):-1}function Tf(t,i,s){var n=mf.exec(i.slice(s,s+2));return n?(t.V=+n[0],s+n[0].length):-1}function Ef(t,i,s){var n=mf.exec(i.slice(s,s+2));return n?(t.W=+n[0],s+n[0].length):-1}function Df(t,i,s){var n=mf.exec(i.slice(s,s+4));return n?(t.y=+n[0],s+n[0].length):-1}function $f(t,i,s){var n=mf.exec(i.slice(s,s+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),s+n[0].length):-1}function Cf(t,i,s){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(s,s+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),s+n[0].length):-1}function If(t,i,s){var n=mf.exec(i.slice(s,s+1));return n?(t.q=3*n[0]-3,s+n[0].length):-1}function Of(t,i,s){var n=mf.exec(i.slice(s,s+2));return n?(t.m=n[0]-1,s+n[0].length):-1}function zf(t,i,s){var n=mf.exec(i.slice(s,s+2));return n?(t.d=+n[0],s+n[0].length):-1}function _f(t,i,s){var n=mf.exec(i.slice(s,s+3));return n?(t.m=0,t.d=+n[0],s+n[0].length):-1}function Hf(t,i,s){var n=mf.exec(i.slice(s,s+2));return n?(t.H=+n[0],s+n[0].length):-1}function qf(t,i,s){var n=mf.exec(i.slice(s,s+2));return n?(t.M=+n[0],s+n[0].length):-1}function Pf(t,i,s){var n=mf.exec(i.slice(s,s+2));return n?(t.S=+n[0],s+n[0].length):-1}function Rf(t,i,s){var n=mf.exec(i.slice(s,s+3));return n?(t.L=+n[0],s+n[0].length):-1}function Xf(t,i,s){var n=mf.exec(i.slice(s,s+6));return n?(t.L=Math.floor(n[0]/1e3),s+n[0].length):-1}function jf(t,i,s){var n=bf.exec(i.slice(s,s+1));return n?s+n[0].length:-1}function Ff(t,i,s){var n=mf.exec(i.slice(s));return n?(t.Q=+n[0],s+n[0].length):-1}function Gf(t,i,s){var n=mf.exec(i.slice(s));return n?(t.s=+n[0],s+n[0].length):-1}function Vf(t,i){return kf(t.getDate(),i,2)}function Yf(t,i){return kf(t.getHours(),i,2)}function Kf(t,i){return kf(t.getHours()%12||12,i,2)}function Bf(t,i){return kf(1+pc.count(Mc(t),t),i,3)}function Uf(t,i){return kf(t.getMilliseconds(),i,3)}function Zf(t,i){return Uf(t,i)+"000"}function Jf(t,i){return kf(t.getMonth()+1,i,2)}function Qf(t,i){return kf(t.getMinutes(),i,2)}function td(t,i){return kf(t.getSeconds(),i,2)}function id(t){var i=t.getDay();return 0===i?7:i}function sd(t,i){return kf(wc.count(Mc(t)-1,t),i,2)}function nd(t){var i=t.getDay();return i>=4||0===i?mc(t):mc.ceil(t)}function rd(t,i){return t=nd(t),kf(mc.count(Mc(t),t)+(4===Mc(t).getDay()),i,2)}function ed(t){return t.getDay()}function hd(t,i){return kf(gc.count(Mc(t)-1,t),i,2)}function ad(t,i){return kf(t.getFullYear()%100,i,2)}function od(t,i){return kf((t=nd(t)).getFullYear()%100,i,2)}function ud(t,i){return kf(t.getFullYear()%1e4,i,4)}function cd(t,i){var s=t.getDay();return kf((t=s>=4||0===s?mc(t):mc.ceil(t)).getFullYear()%1e4,i,4)}function ld(t){var i=t.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+kf(i/60|0,"0",2)+kf(i%60,"0",2)}function fd(t,i){return kf(t.getUTCDate(),i,2)}function dd(t,i){return kf(t.getUTCHours(),i,2)}function vd(t,i){return kf(t.getUTCHours()%12||12,i,2)}function pd(t,i){return kf(1+kc.count(Lc(t),t),i,3)}function yd(t,i){return kf(t.getUTCMilliseconds(),i,3)}function wd(t,i){return yd(t,i)+"000"}function gd(t,i){return kf(t.getUTCMonth()+1,i,2)}function md(t,i){return kf(t.getUTCMinutes(),i,2)}function bd(t,i){return kf(t.getUTCSeconds(),i,2)}function Md(t){var i=t.getUTCDay();return 0===i?7:i}function kd(t,i){return kf(Ac.count(Lc(t)-1,t),i,2)}function xd(t){var i=t.getUTCDay();return i>=4||0===i?Nc(t):Nc.ceil(t)}function Ad(t,i){return t=xd(t),kf(Nc.count(Lc(t),t)+(4===Lc(t).getUTCDay()),i,2)}function Wd(t){return t.getUTCDay()}function Nd(t,i){return kf(Wc.count(Lc(t)-1,t),i,2)}function Ld(t,i){return kf(t.getUTCFullYear()%100,i,2)}function Sd(t,i){return kf((t=xd(t)).getUTCFullYear()%100,i,2)}function Td(t,i){return kf(t.getUTCFullYear()%1e4,i,4)}function Ed(t,i){var s=t.getUTCDay();return kf((t=s>=4||0===s?Nc(t):Nc.ceil(t)).getUTCFullYear()%1e4,i,4)}function Dd(){return"+0000"}function $d(){return"%"}function Cd(t){return+t}function Id(t){return Math.floor(+t/1e3)}function Od(t){return new Date(t)}function zd(t){return t instanceof Date?+t:+new Date(+t)}function _d(t,i,s,n,r,e,h,a,o){var u=Bl(jl,jl),c=u.invert,l=u.domain,f=o(".%L"),d=o(":%S"),v=o("%I:%M"),p=o("%I %p"),y=o("%a %d"),w=o("%b %d"),g=o("%B"),m=o("%Y"),b=[[h,1,1e3],[h,5,5e3],[h,15,15e3],[h,30,3e4],[e,1,6e4],[e,5,3e5],[e,15,9e5],[e,30,18e5],[r,1,36e5],[r,3,108e5],[r,6,216e5],[r,12,432e5],[n,1,864e5],[n,2,1728e5],[s,1,6048e5],[i,1,2592e6],[i,3,7776e6],[t,1,31536e6]];function M(a){return(h(a)<a?f:e(a)<a?d:r(a)<a?v:n(a)<a?p:i(a)<a?s(a)<a?y:w:t(a)<a?g:m)(a)}function k(i,s,n,r){if(null==i&&(i=10),"number"==typeof i){var e=Math.abs(n-s)/i,h=Ju((function(t){return t[2]})).right(b,e);h===b.length?(r=ec(s/31536e6,n/31536e6,i),i=t):h?(r=(h=b[e/b[h-1][2]<b[h][2]/e?h-1:h])[1],i=h[0]):(r=Math.max(ec(s,n,i),1),i=a)}return null==r?i:i.every(r)}return u.invert=function(t){return new Date(c(t))},u.domain=function(t){return arguments.length?l(zc.call(t,zd)):l().map(Od)},u.ticks=function(t,i){var s,n=l(),r=n[0],e=n[n.length-1],h=e<r;return h&&(s=r,r=e,e=s),s=(s=k(t,r,e,i))?s.range(r,e+1):[],h?s.reverse():s},u.tickFormat=function(t,i){return null==i?M:o(i)},u.nice=function(t,i){var s=l();return(t=k(t,s[0],s[s.length-1],i))?l(function(t,i){var s,n=0,r=(t=t.slice()).length-1,e=t[n],h=t[r];return h<e&&(s=n,n=r,r=s,s=e,e=h,h=s),t[n]=i.floor(e),t[r]=i.ceil(h),t}(s,t)):u},u.copy=function(){return Kl(u,_d(t,i,s,n,r,e,h,a,o))},u}yf=function(t){var i=t.dateTime,s=t.date,n=t.time,r=t.periods,e=t.days,h=t.shortDays,a=t.months,o=t.shortMonths,u=Af(r),c=Wf(r),l=Af(e),f=Wf(e),d=Af(h),v=Wf(h),p=Af(a),y=Wf(a),w=Af(o),g=Wf(o),m={a:function(t){return h[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return o[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Vf,e:Vf,f:Zf,g:od,G:cd,H:Yf,I:Kf,j:Bf,L:Uf,m:Jf,M:Qf,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Cd,s:Id,S:td,u:id,U:sd,V:rd,w:ed,W:hd,x:null,X:null,y:ad,Y:ud,Z:ld,"%":$d},b={a:function(t){return h[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return o[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:fd,e:fd,f:wd,g:Sd,G:Ed,H:dd,I:vd,j:pd,L:yd,m:gd,M:md,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Cd,s:Id,S:bd,u:Md,U:kd,V:Ad,w:Wd,W:Nd,x:null,X:null,y:Ld,Y:Td,Z:Dd,"%":$d},M={a:function(t,i,s){var n=d.exec(i.slice(s));return n?(t.w=v[n[0].toLowerCase()],s+n[0].length):-1},A:function(t,i,s){var n=l.exec(i.slice(s));return n?(t.w=f[n[0].toLowerCase()],s+n[0].length):-1},b:function(t,i,s){var n=w.exec(i.slice(s));return n?(t.m=g[n[0].toLowerCase()],s+n[0].length):-1},B:function(t,i,s){var n=p.exec(i.slice(s));return n?(t.m=y[n[0].toLowerCase()],s+n[0].length):-1},c:function(t,s,n){return A(t,i,s,n)},d:zf,e:zf,f:Xf,g:$f,G:Df,H:Hf,I:Hf,j:_f,L:Rf,m:Of,M:qf,p:function(t,i,s){var n=u.exec(i.slice(s));return n?(t.p=c[n[0].toLowerCase()],s+n[0].length):-1},q:If,Q:Ff,s:Gf,S:Pf,u:Lf,U:Sf,V:Tf,w:Nf,W:Ef,x:function(t,i,n){return A(t,s,i,n)},X:function(t,i,s){return A(t,n,i,s)},y:$f,Y:Df,Z:Cf,"%":jf};function k(t,i){return function(s){var n,r,e,h=[],a=-1,o=0,u=t.length;for(s instanceof Date||(s=new Date(+s));++a<u;)37===t.charCodeAt(a)&&(h.push(t.slice(o,a)),null!=(r=gf[n=t.charAt(++a)])?n=t.charAt(++a):r="e"===n?" ":"0",(e=i[n])&&(n=e(s,r)),h.push(n),o=a+1);return h.push(t.slice(o,a)),h.join("")}}function x(t,i){return function(s){var n,r,e=pf(1900,void 0,1);if(A(e,t,s+="",0)!=s.length)return null;if("Q"in e)return new Date(e.Q);if("s"in e)return new Date(1e3*e.s+("L"in e?e.L:0));if(!i||"Z"in e||(e.Z=0),"p"in e&&(e.H=e.H%12+12*e.p),void 0===e.m&&(e.m="q"in e?e.q:0),"V"in e){if(e.V<1||e.V>53)return null;"w"in e||(e.w=1),"Z"in e?(r=(n=vf(pf(e.y,0,1))).getUTCDay(),n=r>4||0===r?Wc.ceil(n):Wc(n),n=kc.offset(n,7*(e.V-1)),e.y=n.getUTCFullYear(),e.m=n.getUTCMonth(),e.d=n.getUTCDate()+(e.w+6)%7):(r=(n=df(pf(e.y,0,1))).getDay(),n=r>4||0===r?gc.ceil(n):gc(n),n=pc.offset(n,7*(e.V-1)),e.y=n.getFullYear(),e.m=n.getMonth(),e.d=n.getDate()+(e.w+6)%7)}else("W"in e||"U"in e)&&("w"in e||(e.w="u"in e?e.u%7:"W"in e?1:0),r="Z"in e?vf(pf(e.y,0,1)).getUTCDay():df(pf(e.y,0,1)).getDay(),e.m=0,e.d="W"in e?(e.w+6)%7+7*e.W-(r+5)%7:e.w+7*e.U-(r+6)%7);return"Z"in e?(e.H+=e.Z/100|0,e.M+=e.Z%100,vf(e)):df(e)}}function A(t,i,s,n){for(var r,e,h=0,a=i.length,o=s.length;h<a;){if(n>=o)return-1;if(37===(r=i.charCodeAt(h++))){if(r=i.charAt(h++),!(e=M[r in gf?i.charAt(h++):r])||(n=e(t,s,n))<0)return-1}else if(r!=s.charCodeAt(n++))return-1}return n}return(m.x=k(s,m),m.X=k(n,m),m.c=k(i,m),b.x=k(s,b),b.X=k(n,b),b.c=k(i,b),{format:function(t){var i=k(t+="",m);return i.toString=function(){return t},i},parse:function(t){var i=x(t+="",!1);return i.toString=function(){return t},i},utcFormat:function(t){var i=k(t+="",b);return i.toString=function(){return t},i},utcParse:function(t){var i=x(t+="",!0);return i.toString=function(){return t},i}})}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),wf=yf.format;const{propDefaultValues:Hd}=r;class qd{}function Pd(t){return 1-Math.sqrt(1-t*t)}qd.mainTitle="Dumbbell Plot Title",qd.subTitle="This is the dumbbell plot's subtitle",qd.height=300,qd.width=650,qd.margin={top:3,bottom:3,right:6.5,left:6.5},qd.padding={top:20,bottom:50,right:50,left:50},qd.ordinalAccessor="date",qd.valueAccessor="value",qd.seriesAccessor="category",qd.focusMarker={key:"",sizeFromBar:12},qd.marker={visible:!0,type:"dot",sizeFromBar:8},qd.barStyle={opacity:1,width:1,colorRule:"default"},qd.differenceLabel={visible:!1,placement:"left",calculation:"difference",format:"0[.][0][0]a",collisionHideOnly:!1},qd.layout=Hd.layout,qd.accessibility=Hd.accessibility,qd.animationConfig=Hd.animationConfig,qd.highestHeadingLevel=Hd.highestHeadingLevel,qd.sortOrder=Hd.sortOrder,qd.xAxis=Hd.xAxisDate,qd.yAxis=Hd.yAxis,qd.showBaselineX=Hd.showBaselineFalse,qd.showBaselineY=Hd.showBaselineFalse,qd.wrapLabel=Hd.wrapLabel,qd.colorPalette=Hd.colorPaletteCategorical,qd.hoverStyle=Hd.hoverStyle,qd.clickStyle=Hd.clickStyle,qd.referenceStyle=Hd.referenceStyle,qd.cursor=Hd.cursor,qd.roundedCorner=Hd.roundedCorner,qd.barIntervalRatio=Hd.barIntervalRatio,qd.hoverOpacity=Hd.hoverOpacity,qd.dataLabel=Hd.dataLabelEnds,qd.legend=Hd.hiddenLegend,qd.tooltipLabel=Hd.tooltipLabel,qd.showTooltip=Hd.showTooltip,qd.suppressEvents=Hd.suppressEvents,qd.referenceLines=Hd.referenceLines,qd.annotations=Hd.annotations,qd.clickHighlight=Hd.clickHighlight,qd.seriesLabel=Hd.seriesLabel;var Rd={value:function(){}};function Xd(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new jd(n)}function jd(t){this._=t}function Fd(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function Gd(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function Vd(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=Rd,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}jd.prototype=Xd.prototype={constructor:jd,on:function(t,i){var s,n=this._,r=Fd(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=Vd(n[s],t.name,i);else if(null==i)for(s in n)n[s]=Vd(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=Gd(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new jd(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var Yd,Kd,Bd=0,Ud=0,Zd=0,Jd=0,Qd=0,tv=0,iv="object"==typeof performance&&performance.now?performance:Date,sv="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function nv(){return Qd||(sv(rv),Qd=iv.now()+tv)}function rv(){Qd=0}function ev(){this._call=this._time=this._next=null}function hv(t,i,s){var n=new ev;return n.restart(t,i,s),n}function av(){Qd=(Jd=iv.now())+tv,Bd=Ud=0;try{!function(){nv(),++Bd;for(var t,i=Yd;i;)(t=Qd-i._time)>=0&&i._call.call(null,t),i=i._next;--Bd}()}finally{Bd=0,function(){for(var t,i,s=Yd,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:Yd=i);Kd=t,uv(n)}(),Qd=0}}function ov(){var t=iv.now(),i=t-Jd;i>1e3&&(tv-=i,Jd=t)}function uv(t){Bd||(Ud&&(Ud=clearTimeout(Ud)),t-Qd>24?(t<1/0&&(Ud=setTimeout(av,t-iv.now()-tv)),Zd&&(Zd=clearInterval(Zd))):(Zd||(Jd=iv.now(),Zd=setInterval(ov,1e3)),Bd=1,sv(av)))}function cv(t,i,s){var n=new ev;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}ev.prototype=hv.prototype={constructor:ev,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?nv():+s)+(null==i?0:+i),this._next||Kd===this||(Kd?Kd._next=this:Yd=this,Kd=this),this._call=t,this._time=s,uv()},stop:function(){this._call&&(this._call=null,this._time=1/0,uv())}};var lv=Xd("start","end","interrupt"),fv=[];function dv(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return cv(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(cv((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=hv((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:lv,tween:fv,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function vv(t,i){var s=yv(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function pv(t,i){var s=yv(t,i);if(s.state>2)throw new Error("too late; already started");return s}function yv(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function wv(t,i){var s,n;return function(){var r=pv(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function gv(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=pv(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function mv(t,i,s){var n=t._id;return t.each((function(){var t=pv(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return yv(t,n).value[i]}}function bv(t,i){var s;return("number"==typeof i?Al:i instanceof el?bl:(s=el(i))?(i=s,bl):Sl)(t,i)}function Mv(t){return function(){this.removeAttribute(t)}}function kv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xv(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function Av(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function Wv(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function Nv(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function Lv(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function Sv(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function Tv(t,i){return function(){vv(this,t).delay=+i.apply(this,arguments)}}function Ev(t,i){return i=+i,function(){vv(this,t).delay=i}}function Dv(t,i){return function(){pv(this,t).duration=+i.apply(this,arguments)}}function $v(t,i){return i=+i,function(){pv(this,t).duration=i}}function Cv(t,i){if("function"!=typeof i)throw new Error;return function(){pv(this,t).ease=i}}function Iv(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?vv:pv;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var Ov=Bu.prototype.constructor;function zv(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var _v=0;function Hv(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function qv(){return++_v}var Pv=Bu.prototype;Hv.prototype=function(t){return Bu().transition(t)}.prototype={constructor:Hv,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=Ko(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,dv(l[f],i,s,f,l,yv(a,s)));return new Hv(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=Uo(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=yv(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&dv(f,i,s,p,d,v);e.push(d),h.push(o)}return new Hv(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=Zo(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new Hv(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new Hv(e,this._parents,this._name,this._id)},selection:function(){return new Ov(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=qv(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=yv(h,i);dv(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Hv(n,this._parents,t,s)},call:Pv.call,nodes:Pv.nodes,node:Pv.node,size:Pv.size,empty:Pv.empty,each:Pv.each,on:function(t,i){var s=this._id;return arguments.length<2?yv(this.node(),s).on.on(t):this.each(Iv(s,t,i))},attr:function(t,i){var s=jo(t),n="transform"===s?Pl:bv;return this.attrTween(t,"function"==typeof i?(s.local?Nv:Wv)(s,n,mv(this,"attr."+t,i)):null==i?(s.local?kv:Mv)(s):(s.local?Av:xv)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=jo(t);return this.tween(s,(n.local?Lv:Sv)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?ql:bv;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=du(this,t),h=(this.style.removeProperty(t),du(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=du(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=du(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,mv(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=du(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,zv(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(mv(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=yv(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?wv:gv)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?Tv:Ev)(i,t)):yv(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?Dv:$v)(i,t)):yv(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(Cv(i,t)):yv(this.node(),i).ease}};var Rv={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Xv(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return Rv.time=nv(),Rv;return s}Bu.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},Bu.prototype.transition=function(t){var i,s;t instanceof Hv?(i=t._id,t=t._name):(i=qv(),(s=Rv).time=nv(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&dv(h,t,i,u,a,s||Xv(h,i));return new Hv(n,this._parents,t,i)};var jv="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Fv=new Uint8Array(16);function Gv(){if(!jv)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return jv(Fv)}for(var Vv=[],Yv=0;Yv<256;++Yv)Vv[Yv]=(Yv+256).toString(16).substr(1);function Kv(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||Gv)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[Vv[t[i++]],Vv[t[i++]],Vv[t[i++]],Vv[t[i++]],"-",Vv[t[i++]],Vv[t[i++]],"-",Vv[t[i++]],Vv[t[i++]],"-",Vv[t[i++]],Vv[t[i++]],"-",Vv[t[i++]],Vv[t[i++]],Vv[t[i++]],Vv[t[i++]],Vv[t[i++]],Vv[t[i++]]].join("")}(r)}const{getAccessibleStrokes:Bv,ensureTextContrast:Uv,createTextStrokeFilter:Zv,createUrl:Jv,initializeDescriptionRoot:Qv,initializeElementAccess:tp,setElementFocusHandler:ip,setElementAccessID:sp,setAccessibilityController:np,hideNonessentialGroups:rp,setAccessTitle:ep,setAccessSubtitle:hp,setAccessLongDescription:ap,setAccessExecutiveSummary:op,setAccessPurpose:up,setAccessContext:cp,setAccessStatistics:lp,setAccessChartCounts:fp,setAccessXAxis:dp,setAccessYAxis:vp,setAccessStructure:pp,setAccessAnnotation:yp,retainAccessFocus:wp,checkAccessFocus:gp,setElementInteractionAccessState:mp,setAccessibilityDescriptionWidth:bp,drawTooltip:Mp,annotate:kp,chartAccessors:xp,checkInteraction:Ap,checkClicked:Wp,checkHovered:Np,convertVisaColor:Lp,drawAxis:Sp,drawGrid:Tp,drawLegend:Ep,setLegendInteractionState:Dp,formatDataLabel:$p,getColors:Cp,getLicenses:Ip,getPadding:Op,getScopedData:zp,initTooltipStyle:_p,overrideTitleTooltip:Hp,placeDataLabels:qp,scopeDataKeys:Pp,visaColors:Rp,transitionEndAll:Xp,validateAccessibilityProps:jp,findTagLevel:Fp,prepareRenderChange:Gp,roundTo:Vp,getTextWidth:Yp,resolveLabelCollision:Kp}=r,Bp=class{constructor(s){t(this,s),this.mainTitle=qd.mainTitle,this.subTitle=qd.subTitle,this.height=qd.height,this.width=qd.width,this.margin=qd.margin,this.padding=qd.padding,this.highestHeadingLevel=qd.highestHeadingLevel,this.ordinalAccessor=qd.ordinalAccessor,this.valueAccessor=qd.valueAccessor,this.seriesAccessor=qd.seriesAccessor,this.sortOrder=qd.sortOrder,this.xAxis=qd.xAxis,this.yAxis=qd.yAxis,this.wrapLabel=qd.wrapLabel,this.layout=qd.layout,this.showBaselineX=qd.showBaselineX,this.showBaselineY=qd.showBaselineY,this.colorPalette=qd.colorPalette,this.hoverStyle=qd.hoverStyle,this.hoverOpacity=qd.hoverOpacity,this.animationConfig=qd.animationConfig,this.clickStyle=qd.clickStyle,this.referenceStyle=qd.referenceStyle,this.cursor=qd.cursor,this.focusMarker=qd.focusMarker,this.marker=qd.marker,this.barStyle=qd.barStyle,this.dataLabel=qd.dataLabel,this.seriesLabel=qd.seriesLabel,this.differenceLabel=qd.differenceLabel,this.showTooltip=qd.showTooltip,this.tooltipLabel=qd.tooltipLabel,this.accessibility=qd.accessibility,this.legend=qd.legend,this.annotations=qd.annotations,this.referenceLines=qd.referenceLines,this.suppressEvents=qd.suppressEvents,this.clickHighlight=qd.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.updated=!0,this.time={timemillisecond:lc,timesecond:fc,timeminute:dc,timehour:vc,timeday:pc,timeweek:wc,timemonth:bc,timeyear:Mc},this.shouldUpdateLayout=!1,this.shouldValidate=!1,this.shouldUpdateAnnotations=!1,this.shouldUpdateReferenceLines=!1,this.shouldResetRoot=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateYGrid=!1,this.shouldUpdateScales=!1,this.shouldUpdateBaseline=!1,this.shouldCheckValueAxis=!1,this.shouldCheckLabelAxis=!1,this.shouldSetColors=!1,this.shouldUpdateLegend=!1,this.shouldSetGlobalSelections=!1,this.shouldSetSeriesSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldUpdateData=!1,this.shouldEnterUpdateExit=!1,this.shouldEnterUpdateExitMarkers=!1,this.shouldUpdateMarkerOpacity=!1,this.shouldUpdateGeometries=!1,this.shouldUpdateSeriesLabels=!1,this.shouldUpdateDifferenceLabels=!1,this.shouldUpdateLabels=!1,this.shouldValidateInteractionKeys=!1,this.shouldUpdateTableData=!1,this.shouldValidateDataLabelPlacement=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldAddStrokeUnder=!1,this.shouldUpdateBaselineX=!1,this.shouldUpdateBaselineY=!1,this.shouldUpdateLegendData=!1,this.shouldUpdateMarkerIDs=!1,this.shouldValidateLayout=!1,this.shouldValidateSeriesLabelPlacement=!1,this.shouldValidateDiffLabelPlacement=!1,this.shouldBindInteractivity=!1,this.shouldBindLegendInteractivity=!1,this.shouldBindSeriesInteractivity=!1,this.shouldUpdateCursor=!1,this.shouldSetLegendCursor=!1,this.shouldSetSeriesCursor=!1,this.shouldSetLabelOpacity=!1,this.shouldSetSeriesLabelOpacity=!1,this.shouldSetDifferenceLabelOpacity=!1,this.shouldSetSelectionClass=!1,this.shouldDrawInteractionState=!1,this.shouldRenderMarkerGroup=!1,this.shouldUpdateBarStyle=!1,this.shouldUpdateMarkerSize=!1,this.shouldUpdateDiffLabelColor=!1,this.shouldUpdateMarkerStyle=!1,this.shouldDrawMarkerGeometries=!1,this.shouldUpdateMarkerData=!1,this.shouldUpdateSeriesData=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityAttributes=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.topLevel="h2",this.bottomLevel="p",this.strokes={},this.handleMarkerColors=(t,i,s)=>{const n=this.rawColors[t.referenceIndex]||this.rawColors[0],r=i<2&&this.clickHighlight.length?this.clickStyle.color||n:i<4?n:this.hoverStyle.color||n,e=this.colorArr[t.referenceIndex]||this.colorArr[0],h=i<2&&this.clickHighlight.length?this.clickStyle.color||e:i<4?e:this.hoverStyle.color||e;return Uu(s[i]).attr("fill",h),this.accessibility.hideStrokes?h:this.strokes[r.toLowerCase()]},this.handleSeriesLabelColors=(t,i)=>{let s,n;this.seriesInteraction&&(s=Np(t,this.hoverHighlight,this.innerInteractionKeys),n=Wp(t,this.clickHighlight,this.innerInteractionKeys));const r=this.rawColors[i]||this.rawColors[0];return this.textColors[(this.seriesInteraction?n&&this.clickHighlight.length?this.clickStyle.color||r:s&&this.hoverHighlight&&this.hoverStyle.color||r:r).toLowerCase()]},this.handleLabelColors=(t,i)=>{const s=Np(t,this.hoverHighlight,this.innerInteractionKeys),n=Wp(t,this.clickHighlight,this.innerInteractionKeys),r=this.rawColors[i]||this.rawColors[0];return this.textColors[(n&&this.clickHighlight.length?this.clickStyle.color||r:s&&this.hoverHighlight&&this.hoverStyle.color||r).toLowerCase()]},this.handleBarColors=(t,i,s)=>{t.focusMarker=!1,t.values[0][this.seriesAccessor]===this.focusMarker.key?t.focusMarker=0:t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1);const n=Wp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&Wp(t.values[1],this.clickHighlight,this.innerInteractionKeys),r=Np(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&Np(t.values[1],this.hoverHighlight,this.innerInteractionKeys),e="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.rawColors[t.greaterIndex]:this.rawColors[2]:this.rawColors[t.focusMarker],h=n&&this.clickHighlight.length?this.clickStyle.color||e:r&&this.hoverHighlight&&this.hoverStyle.color||e,a="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.colorArr[t.greaterIndex]:this.colorArr[2]:this.colorArr[t.focusMarker],o=n&&this.clickHighlight.length?this.clickStyle.color||a:r&&this.hoverHighlight&&this.hoverStyle.color||a;return Uu(s[i]).attr("fill",o),this.accessibility.hideStrokes?o:this.strokes[h.toLowerCase()]},this.handleBarOpacity=(t,i,s)=>{const n=Ap(t.values[0],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),r=Ap(t.values[1],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),e=n&&r?this.barStyle.opacity:this.hoverOpacity;return Uu(s[i]).attr("stroke-opacity",e),e},this.setBarSize=(t,i,s)=>{const n=Wp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&Wp(t.values[1],this.clickHighlight,this.innerInteractionKeys),r=Np(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&Np(t.values[1],this.hoverHighlight,this.innerInteractionKeys),e=this.dumbbellInteraction?n?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:r&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width,h=this.x(t.values[0][this.xAccessor]),a=this.y(t.values[0][this.yAccessor]),o=this.x(t.values[1][this.xAccessor]),u=this.y(t.values[1][this.yAccessor]),c=this.isVertical?a>u?.001:-.001:0,l=this.isVertical?0:h>o?.001:-.001,f=this.isVertical?e/2:0,d=this.isVertical?0:e/2;return Uu(s[i]).attr("data-barSize",e).attr("data-centerX1",t=>this.x(t.values[0][this.xAccessor])).attr("data-centerY1",t=>this.y(t.values[0][this.yAccessor])).attr("data-centerX2",t=>this.x(t.values[1][this.xAccessor])).attr("data-centerY2",t=>this.y(t.values[1][this.yAccessor])),`M ${h+l} ${a+c} L ${h} ${a} L ${h+f} ${a+d} L ${o+f} ${u+d} L ${o} ${u} L ${o-f} ${u-d} L ${h-f} ${a-d} L ${h} ${a} L ${h+f} ${a+d} L ${o+f} ${u+d} L ${o} ${u} L ${o-l} ${u-c}`},this.setDiffLabelColor=t=>{t.focusMarker=!1,t.values[0][this.seriesAccessor]===this.focusMarker.key?t.focusMarker=0:t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1);const i="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.rawColors[t.greaterIndex]:this.rawColors[2]:this.rawColors[t.focusMarker];let s,n;return this.dumbbellInteraction&&(n=Wp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&Wp(t.values[1],this.clickHighlight,this.innerInteractionKeys),s=Np(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&Np(t.values[1],this.hoverHighlight,this.innerInteractionKeys)),this.textColors[(this.dumbbellInteraction?n&&this.clickHighlight.length?this.clickStyle.color||i:s&&this.hoverHighlight&&this.hoverStyle.color||i:i).toLowerCase()]},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}mainTitleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subTitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldUpdateLayout=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateLegendData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateBarStyle=!0,this.shouldSetColors=!0}idWatcher(t,i){this.chartID=t||"dumbbell-plot-"+Kv(),this.dumbbellPlotEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateMarkerIDs=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}ordinalAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateGeometries=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}valueAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldCheckValueAxis=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0}seriesAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateLegendData=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateLegend=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateTableData=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}sortWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0}xAxisWatcher(t,i){const s=!(!t||!t.format)&&t.format,n=!(!i||!i.format)&&i.format,r=!(!t||!t.unit)&&t.unit,e=!(!i||!i.unit)&&i.unit;(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0),s===n&&r===e||(this.shouldUpdateScales=!0,r!==e&&(this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0)),this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0}yAxisWatcher(t,i){(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0),this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0}wrapLabelWatcher(t,i){this.shouldCheckLabelAxis=!0}layoutWatcher(t,i){this.shouldValidateLayout=!0,this.shouldValidateDataLabelPlacement=!0,this.shouldValidateSeriesLabelPlacement=!0,this.shouldUpdateSeriesData=!0,this.shouldValidateDiffLabelPlacement=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0}showBaselineXWatcher(t,i){this.shouldUpdateBaselineX=!0}showBaselineYWatcher(t,i){this.shouldUpdateBaselineY=!0}paletteWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldSetColors=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerStyle=!0,this.shouldUpdateLegend=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDiffLabelColor=!0}hoverStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0}clickStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldSetSeriesCursor=!0}focusMarkerWatcher(t,i){this.shouldDrawMarkerGeometries=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateLabels=!0,(t&&t.sizeFromBar?t.sizeFromBar:0)!==(i&&i.sizeFromBar?i.sizeFromBar:0)&&(this.shouldUpdateMarkerSize=!0),(!(!t||!t.key)&&t.key)!==(!(!i||!i.key)&&i.key)&&(this.shouldUpdateDiffLabelColor=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateBarStyle=!0)}markerWatcher(t,i){(t&&t.visible)!==(i&&i.visible)&&(this.shouldUpdateMarkerOpacity=!0),(!(!t||!t.type)&&t.type)!==(!(!i||!i.type)&&i.type)&&(this.shouldRenderMarkerGroup=!0,this.shouldEnterUpdateExitMarkers=!0),this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateData=!0,this.shouldUpdateLabels=!0,(t&&t.sizeFromBar?t.sizeFromBar:0)!==(i&&i.sizeFromBar?i.sizeFromBar:0)&&(this.shouldUpdateMarkerSize=!0)}barStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateDiffLabelColor=!0,this.shouldDrawInteractionState=!0,(t&&t.width?t.width:0)!==(i&&i.width?i.width:0)&&(this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateSeriesLabels=!0)}dataLabelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0;const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement,r=!(!t||!t.labelAccessor)&&t.labelAccessor,e=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),s!==n&&(this.shouldValidateDataLabelPlacement=!0),r!==e&&(this.shouldValidateDataLabelAccessor=!0)}seriesLabelWatcher(t,i){this.shouldValidateSeriesLabelPlacement=!0,this.shouldUpdateSeriesLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateTableData=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetSeriesLabelOpacity=!0),(!(!t||!t.placement)&&t.placement)!==(!(!i||!i.placement)&&i.placement)&&(this.shouldUpdateSeriesData=!0,this.shouldSetSeriesSelections=!0)}differenceLabelWatcher(t,i){this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateDiffLabelColor=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateTableData=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetDifferenceLabelOpacity=!0),(!(!t||!t.placement)&&t.placement)!==(!(!i||!i.placement)&&i.placement)&&(this.shouldValidateDiffLabelPlacement=!0)}showTooltipWatcher(t,i){this.shouldDrawInteractionState=!0}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerStyle=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateLegend=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldBindLegendInteractivity=!0,this.shouldSetLegendCursor=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldBindLegendInteractivity=!0,this.shouldBindSeriesInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldSetSeriesCursor=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}hoverWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldUpdateData=!0,this.shouldUpdateLabels=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0}clickWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldUpdateData=!0,this.shouldUpdateLabels=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldUpdateLabels=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0,(!(!t||1!==t.length)&&t[0]===this.seriesAccessor)!=(!(!i||1!==i.length)&&i[0]===this.seriesAccessor)&&(this.shouldBindSeriesInteractivity=!0,this.shouldSetSeriesCursor=!0,this.shouldBindLegendInteractivity=!0,this.shouldSetLegendCursor=!0)}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.chartID=this.uniqueID||"dumbbell-plot-"+Kv(),this.dumbbellPlotEl.id=this.chartID,this.setTagLevels(),this.checkIfSafari(),this.validateLayout(),this.validateDataLabelPlacement(),this.validateSeriesLabelPlacement(),this.validateDiffLabelPlacement(),this.validateInteractionKeys(),this.prepareData(),this.prepareMarkerData(),this.prepareSeriesData(),this.prepareLegendData(),this.setLayoutData(),this.prepareScales(),this.validateDataLabelAccessor(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.defaults=!0,this.shouldValidateAccessibilityProps(),this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.drawXGrid(),this.drawYGrid(),this.renderMarkerGroup(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterMarkerGeometries(),this.updateMarkerGeometries(),this.exitMarkerGeometries(),this.updateMarkerSize(),this.enterDumbbells(),this.updateDumbbells(),this.exitDumbbells(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterDifferenceLabels(),this.updateDifferenceLabels(),this.exitDifferenceLabels(),this.updateMarkerIds(),this.drawDumbbells(),this.updateInteractionState(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.drawDataLabels(),this.drawSeriesLabels(),this.drawDifferenceLabels(),this.addStrokeUnder(),this.drawReferenceLines(),this.setSelectedClass(),this.setLabelOpacity(),this.bindLegendInteractivity(),this.setLegendCursor(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),this.drawBaselineX(),this.drawBaselineY(),this.onChangeHandler(),rp(this.root.node(),this.dumbbellG.node()),this.setGroupAccessibilityAttributes(),this.setGroupAccessibilityID(),this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldRenderMarkerGroup&&(this.renderMarkerGroup(),this.shouldRenderMarkerGroup=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetSeriesSelections&&(this.setSeriesSelections(),this.shouldSetSeriesSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldEnterUpdateExitMarkers&&(this.enterMarkerGeometries(),this.updateMarkerGeometries(),this.exitMarkerGeometries(),this.shouldEnterUpdateExitMarkers=!1,this.shouldUpdateMarkerOpacity=!1),this.shouldUpdateMarkerOpacity&&(this.updateMarkerGeometries(),this.shouldUpdateMarkerOpacity=!1),this.shouldEnterUpdateExit&&(this.enterDumbbells(),this.updateDumbbells(),this.exitDumbbells(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterDifferenceLabels(),this.updateDifferenceLabels(),this.exitDifferenceLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateMarkerIDs&&(this.updateMarkerIds(),this.shouldUpdateMarkerIDs=!1),this.shouldUpdateGeometries&&(this.drawDumbbells(),this.shouldUpdateGeometries=!1),this.shouldUpdateBarStyle&&(this.updateBarStyle(),this.shouldUpdateBarStyle=!1),this.shouldUpdateMarkerStyle&&(this.updateMarkerStyle(),this.shouldUpdateMarkerStyle=!1),this.shouldUpdateMarkerSize&&(this.updateMarkerSize(),this.shouldUpdateMarkerSize=!1),this.shouldDrawMarkerGeometries&&(this.drawMarkerGeometries(),this.shouldDrawMarkerGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateSeriesLabels&&(this.drawSeriesLabels(),this.shouldUpdateSeriesLabels=!1),this.shouldUpdateDifferenceLabels&&(this.drawDifferenceLabels(),this.shouldUpdateDifferenceLabels=!1),this.shouldAddStrokeUnder&&(this.addStrokeUnder(),this.shouldAddStrokeUnder=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSeriesLabelOpacity&&(this.setSeriesLabelOpacity(),this.shouldSetSeriesLabelOpacity=!1),this.shouldSetDifferenceLabelOpacity&&(this.setDifferenceLabelOpacity(),this.shouldSetDifferenceLabelOpacity=!1),this.shouldUpdateDiffLabelColor&&(this.updateDiffLabelColor(),this.shouldUpdateDiffLabelColor=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldBindLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldBindLegendInteractivity=!1),this.shouldBindSeriesInteractivity&&(this.bindSeriesInteractivity(),this.shouldBindSeriesInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldSetSeriesCursor&&(this.setSeriesCursor(),this.shouldSetSeriesCursor=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateBaselineX&&(this.drawBaselineX(),this.shouldUpdateBaseline=!1),this.shouldUpdateBaselineY&&(this.drawBaselineY(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,jp(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor],this.seriesInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.seriesAccessor,this.dumbbellInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.ordinalAccessor}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateLayout(){this.layoutOverride=!this.layout||this.data[0][this.ordinalAccessor]instanceof Date?"vertical":this.layout,this.isVertical="vertical"===this.layoutOverride}validateDataLabelPlacement(){this.placement=this.dataLabel.placement,this.isVertical?"left"!==this.placement&&"right"!==this.placement&&"auto"!==this.placement&&(this.placement="ends"):"top"!==this.placement&&"bottom"!==this.placement&&"auto"!==this.placement&&(this.placement="ends")}validateSeriesLabelPlacement(){this.seriesLabelDetails=Object.assign({},this.seriesLabel),this.seriesLabelDetails.placement||(this.seriesLabelDetails.placement=this.isVertical?"right":"top"),this.isVertical&&"right"!==this.seriesLabelDetails.placement&&"left"!==this.seriesLabelDetails.placement&&"auto"!==this.seriesLabelDetails.placement?this.seriesLabelDetails.placement="right":this.isVertical||"top"===this.seriesLabelDetails.placement||"bottom"===this.seriesLabelDetails.placement||"auto"===this.seriesLabelDetails.placement||(this.seriesLabelDetails.placement="top"),this.seriesLabelDetails.label&&this.seriesLabelDetails.label.length||(this.seriesLabelDetails.label="")}validateDiffLabelPlacement(){this.diffLabelDetails=Object.assign({},this.differenceLabel),this.diffLabelDetails.placement||(this.diffLabelDetails.placement=this.isVertical?"left":"top"),this.isVertical&&"right"!==this.diffLabelDetails.placement&&"left"!==this.diffLabelDetails.placement&&"auto"!==this.diffLabelDetails.placement?this.diffLabelDetails.placement="left":this.isVertical||"top"===this.diffLabelDetails.placement||"bottom"===this.diffLabelDetails.placement||"auto"===this.diffLabelDetails.placement||(this.diffLabelDetails.placement="top")}checkIfSafari(){this.url=Jv()}setColors(){if(this.colors=this.colors?Lp(this.colors):"",this.rawColors=this.colors||Cp(this.colorPalette,3),this.colorArr=this.rawColors,this.textColors={},this.strokes={},this.rawColors.forEach(t=>{if(!this.accessibility.hideStrokes){const i=Bv(t),s=2===i.length?i[1]:i[0];this.strokes[t.toLowerCase()]=s}this.textColors[t.toLowerCase()]=Uv(t,"#ffffff",4.5)}),this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){const t=Bv(this.hoverStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.hoverStyle.color.toLowerCase()]=i}this.textColors[this.hoverStyle.color.toLowerCase()]=Uv(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){const t=Bv(this.clickStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.clickStyle.color.toLowerCase()]=i}this.textColors[this.clickStyle.color.toLowerCase()]=Uv(this.clickStyle.color,"#ffffff",4.5)}}setLayoutData(){this.padding="string"==typeof this.padding?Op(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}setTableData(){const t=Pp(this,xp,"dumbbell-plot");this.tableData=zp(this.data,t),this.tableColumns=Object.keys(t)}prepareData(){const t=function(){var t,i,s,n=[],r=[];function e(s,r,h,a){if(r>=n.length)return null!=t&&s.sort(t),null!=i?i(s):s;for(var o,u,c,l=-1,f=s.length,d=n[r++],v=Ec(),p=h();++l<f;)(c=v.get(o=d(u=s[l])+""))?c.push(u):v.set(o,[u]);return v.each((function(t,i){a(p,i,e(t,r,h,a))})),p}return s={object:function(t){return e(t,0,Dc,$c)},map:function(t){return e(t,0,Cc,Ic)},entries:function(t){return function t(s,e){if(++e>n.length)return s;var h,a=r[e-1];return null!=i&&e>=n.length?h=s.entries():(h=[],s.each((function(i,s){h.push({key:s,values:t(i,e)})}))),null!=a?h.sort((function(t,i){return a(t.key,i.key)})):h}(e(t,0,Cc,Ic),0)},key:function(t){return n.push(t),s},sortKeys:function(t){return r[n.length-1]=t,s},sortValues:function(i){return t=i,s},rollup:function(t){return i=t,s}}}().key(t=>t[this.ordinalAccessor]).entries(this.data);t.forEach(t=>{t.focusMarker=!1,t.greaterIndex=1;let i="marker",s="marker";t.values[0][this.seriesAccessor]===this.focusMarker.key?(t.focusMarker=0,i="focusMarker"):t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1,s="focusMarker");const n=Wp(t.values[0],this.clickHighlight,this.innerInteractionKeys)?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:Np(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width,r=Wp(t.values[1],this.clickHighlight,this.innerInteractionKeys)?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:Np(t.values[1],this.hoverHighlight,this.innerInteractionKeys)&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width;t.values[0].offset=0===t.focusMarker||this.marker.visible?"dot"===this.marker.type?this[i].sizeFromBar*(n+1)/2:"stroke"===this.marker.type||t.focusMarker?this[i].sizeFromBar*(n+1)/5:this[i].sizeFromBar*(n+1)/2:1,t.values[1].offset=1===t.focusMarker||this.marker.visible?"dot"===this.marker.type?-this[s].sizeFromBar*(r+1)/2:"stroke"===this.marker.type?-this[s].sizeFromBar*(r+1)/5:t.focusMarker?-this[s].sizeFromBar*(r+1)/2:-this[s].sizeFromBar*(r+1)/5:-1,t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]&&(t.greaterIndex=0,t.values[0].offset=-t.values[0].offset,t.values[1].offset=-t.values[1].offset)});const i=t=>{const i={absoluteDiff:"Absolute Difference ",difference:"Difference "},s=this.differenceLabel&&this.differenceLabel.calculation&&i[this.differenceLabel.calculation]?this.differenceLabel.calculation:"difference";return i[s]+$p(t,s,this.differenceLabel&&this.differenceLabel.format&&this.differenceLabel.visible?this.differenceLabel.format:this.differenceLabel&&this.dataLabel.format&&this.dataLabel.visible?this.dataLabel.format:"0[.][0][0]a")};this.nest=t.sort((t,s)=>{t.difference=t.values[0][this.valueAccessor]-t.values[1][this.valueAccessor],s.difference=s.values[0][this.valueAccessor]-s.values[1][this.valueAccessor],t.absoluteDiff=Math.abs(t.difference),s.absoluteDiff=Math.abs(s.difference),t.middle=(t.values[0][this.valueAccessor]+t.values[1][this.valueAccessor])/2,s.middle=(s.values[0][this.valueAccessor]+s.values[1][this.valueAccessor])/2,t.message=i(t),s.message=i(s);const n=!1!==t.focusMarker?t.focusMarker:0;return t.values[0][this.ordinalAccessor]instanceof Date?0:"asc"===this.sortOrder||"diffAsc"===this.sortOrder?t.difference-s.difference:"desc"===this.sortOrder||"diffDesc"===this.sortOrder?s.difference-t.difference:"focusAsc"===this.sortOrder?t.values[n][this.valueAccessor]-s.values[n][this.valueAccessor]:"focusDesc"===this.sortOrder?s.values[n][this.valueAccessor]-t.values[n][this.valueAccessor]:"absoluteDiffAsc"===this.sortOrder?t.absoluteDiff-s.absoluteDiff:"absoluteDiffDesc"===this.sortOrder?s.absoluteDiff-t.absoluteDiff:0})}prepareMarkerData(){this.markerData=[];const t={focus:!1,label:this.nest[0].values[0][this.seriesAccessor]},i={focus:!1,label:this.nest[0].values[1][this.seriesAccessor]};this.nest[0].focusMarker?i.focus=!0:0===this.nest[0].focusMarker&&(t.focus=!0);const s=Object.assign(Object.assign({},t),{limitOpacity:!0}),n=Object.assign(Object.assign({},i),{limitOpacity:!0}),r=Object.assign({},t),e=Object.assign({},i);this.markerData.push(t),this.markerData.push(i),this.markerData.push(s),this.markerData.push(n),this.markerData.push(r),this.markerData.push(e);let h=0;this.markerData.forEach(t=>{t.index=h,t.referenceIndex=h<2?h:h<4?h-2:h-4,h++})}prepareSeriesData(){const t=!("auto"!==this.seriesLabelDetails.placement)||this.seriesLabelDetails.placement.includes(this.isVertical?"right":"top");this.seriesData=[{label:this.nest[0].values[0][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[0][this.seriesAccessor],value:t?this.nest[this.nest.length-1].values[0][this.valueAccessor]:this.nest[0].values[0][this.valueAccessor]},{label:this.nest[0].values[1][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[1][this.seriesAccessor],value:t?this.nest[this.nest.length-1].values[1][this.valueAccessor]:this.nest[0].values[1][this.valueAccessor]}]}prepareLegendData(){this.legendData=[{label:this.nest[0].values[0][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[0][this.seriesAccessor]},{label:this.nest[0].values[1][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[1][this.seriesAccessor]}],this.ordinalLabel=this.legendData.map(t=>t.label)}prepareScales(){const t=ac(this.data,t=>parseFloat(t[this.valueAccessor])),i=hc(this.data,t=>parseFloat(t[this.valueAccessor]));if(this.isVertical)if(this.xAccessor=this.ordinalAccessor,this.yAccessor=this.valueAccessor,this.y=ff().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t-.15*(i-t),this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i+.15*(i-t)]).range([this.innerPaddedHeight,0]),this.data[0][this.ordinalAccessor]instanceof Date){const t=hc(this.data,t=>t[this.ordinalAccessor]),i=ac(this.data,t=>t[this.ordinalAccessor]);if(this.x=function(){return Sc.apply(_d(Mc,bc,wc,pc,vc,dc,fc,lc,wf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain([i,t]).range([0,this.innerPaddedWidth]),this.xAxis.unit){const s=this.time["time"+this.xAxis.unit];this.x.domain([s.offset(i,-1),s.offset(t,1)])}}else this.x=Xc().domain(this.nest.map(t=>t.key)).padding(.5).range([0,this.innerPaddedWidth]);else this.isVertical||(this.xAccessor=this.valueAccessor,this.yAccessor=this.ordinalAccessor,this.x=ff().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t-.15*(i-t),this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i+.15*(i-t)]).range([0,this.innerPaddedWidth]),this.y=Xc().domain(this.nest.map(t=>t.key)).padding(.5).range([this.innerPaddedHeight,0]))}addStrokeUnder(){const t=Zv({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.seriesLabelWrapper.selectAll("text").attr("filter",this.accessibility.hideStrokes?null:t),this.diffLabelWrapper.attr("filter",this.accessibility.hideStrokes?null:t),this.labels.attr("filter",this.accessibility.hideStrokes?null:t),this.labels.attr("filter",this.accessibility.hideStrokes?null:t),this.dumbbellG.attr("filter",this.accessibility.hideStrokes?null:t)}renderRootElements(){this.svg=Uu(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.defs=this.rootG.append("defs"),this.baselineG=this.rootG.append("g").attr("class","baseline-group"),this.gridG=this.rootG.append("g").attr("class","gridline-group"),this.dumbbellG=this.rootG.append("g").attr("class","dumbbell-group"),this.seriesLabelWrapper=this.rootG.select(".dumbbell-series-wrapper"),this.seriesLabelWrapper=this.rootG.append("g").attr("class","dumbbell-series-wrapper"),this.diffLabelWrapper=this.rootG.select(".dumbbell-diff-label-wrapper"),this.diffLabelWrapper=this.rootG.append("g").attr("class","dumbbell-diff-label-wrapper"),this.legendG=Uu(this.dumbbellPlotEl).select(".dumbbell-legend").append("svg"),this.tooltipG=Uu(this.dumbbellPlotEl).select(".dumbbell-tooltip"),this.labels=this.rootG.append("g").attr("class","dumbbell-dataLabel-group"),this.references=this.rootG.append("g").attr("class","dumbbell-reference-line-group")}renderMarkerGroup(){this.markerG=this.defs.select("."+this.marker.type+"markers"),this.markerG.node()||(this.defs.selectAll("g").remove(),this.markerG=this.defs.append("g").attr("class",this.marker.type+"markers"))}setSeriesSelections(){const t=this.seriesLabelWrapper.selectAll(".dumbbell-series-label").data(this.seriesData,t=>t.label);this.enterSeriesLabel=t.enter().append("text"),this.exitSeriesLabel=t.exit(),this.updateSeriesLabel=t.merge(this.enterSeriesLabel)}setGlobalSelections(){const t=this.dumbbellG.selectAll(".dumbbell-plot").data(this.nest,t=>t.key);this.enter=t.enter().append("path"),this.exit=t.exit(),this.update=t.merge(this.enter),this.exitSize=this.exit.size(),this.enterSize=this.enter.size();const i=this.markerG.selectAll("marker").data(this.markerData,(t,i)=>t.label+i);this.enterMarkers=i.enter().append("marker"),this.exitMarkers=i.exit(),this.updateMarkers=i.merge(this.enterMarkers),this.setSeriesSelections();const s=this.diffLabelWrapper.selectAll(".dumbbell-diff-label").data(this.nest,t=>t.key);this.enterDiffLabel=s.enter().append("text"),this.exitDiffLabel=s.exit(),this.updateDiffLabel=s.merge(this.enterDiffLabel);const n=this.labels.selectAll("g").data(this.nest,t=>t.key);this.enterLabels=n.enter().append("g"),this.exitLabels=n.exit(),this.updateLabels=n.merge(this.enterLabels);const r=this.updateLabels.selectAll(".dumbbell-dataLabel").data(t=>[t.values[0],t.values[1]],t=>t[this.seriesAccessor]);this.enterLabelChildren=r.enter().append("text"),this.exitLabelChildren=r.exit(),this.updateLabelChildren=r.merge(this.enterLabelChildren)}setTestingAttributes(){this.unitTest?(Uu(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid","chart-container"),Uu(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid","main-title"),Uu(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid","sub-title"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.dumbbellG.attr("data-testid","dumbbell-group"),this.baselineG.attr("data-testid","baseline-group"),this.references.attr("data-testid","reference-line-group"),this.updateLabels.attr("data-testid","dataLabel-wrapper"),this.updateLabelChildren.attr("data-testid","dataLabel").attr("data-id",t=>`label-${t[this.ordinalAccessor]}-${t[this.seriesAccessor]}`),this.updateDiffLabel.attr("data-testid","difference-label").attr("data-id",t=>`difference-label-${t.key}`),this.updateSeriesLabel.attr("data-testid","series-label"),this.updateMarkers.attr("data-testid","marker"),this.update.attr("data-testid","line").attr("data-id",t=>`line-${t.key}`)):(Uu(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid",null),Uu(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid",null),Uu(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.dumbbellG.attr("data-testid",null),this.baselineG.attr("data-testid",null),this.references.attr("data-testid",null),this.updateLabels.attr("data-testid",null),this.updateLabelChildren.attr("data-testid",null).attr("data-id",null),this.updateDiffLabel.attr("data-testid",null).attr("data-id",null),this.updateSeriesLabel.attr("data-testid",null),this.updateMarkers.attr("data-testid",null),this.update.attr("data-testid",null).attr("data-id",null))}reSetRoot(){Gp({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:Pd}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),Gp({selection:this.root,duration:this.duration,namespace:"root_reset",easing:Pd}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),Gp({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:Pd}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),bp(this.chartID,this.width)}drawXAxis(){Sp({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel?this.innerPaddedWidth/this.nest.length*.7:"",dateFormat:this.xAxis.format,format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration})}drawYAxis(){Sp({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,wrapLabel:this.wrapLabel?100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.yAxis.visible,duration:this.duration})}setXAxisAccessibility(){dp({rootEle:this.dumbbellPlotEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:!!this.x&&this.x,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){vp({rootEle:this.dumbbellPlotEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:!!this.y&&this.y,yAxisLabel:this.yAxis.label?this.yAxis.label:""})}drawBaselineX(){Sp({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,padding:this.padding,markOffset:this.x(0),hide:!!this.isVertical||!this.showBaselineY,duration:this.duration})}drawBaselineY(){Sp({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0),hide:!this.isVertical||!this.showBaselineX,duration:this.duration})}drawXGrid(){Tp(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!this.xAxis.gridVisible,this.xAxis.tickInterval,this.duration)}drawYGrid(){Tp(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)}enterMarkerGeometries(){this.enterMarkers.attr("orient","auto").attr("markerUnits","userSpaceOnUse").attr("id",t=>this.generateId(t,t.index)).attr("class","marker-"+this.marker.type).attr("stroke",this.handleMarkerColors),"dot"===this.marker.type?this.enterMarkers.append("circle").attr("r",5):("stroke"===this.marker.type||"arrow"===this.marker.type)&&this.enterMarkers.append("path"),this.updateMarkerSize(this.enterMarkers)}updateMarkerGeometries(){this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1)}updateMarkerStyle(){this.updateMarkers.attr("stroke",this.handleMarkerColors)}exitMarkerGeometries(){this.exitMarkers.transition("exit").duration(this.duration).ease(Pd).remove()}enterDumbbells(){this.enter.interrupt(),this.enter.attr("class","dumbbell-plot").attr("d",t=>{const i=this.x(t.values[0][this.xAccessor]),s=this.y(t.values[0][this.yAccessor]),n=this.x(t.values[1][this.xAccessor]),r=this.y(t.values[1][this.yAccessor]),e=this.isVertical?s>r?.001:-.001:0,h=this.isVertical?0:i>n?.001:-.001;return`M ${i+h} ${s+e} L ${i} ${s} L ${i} ${s} L ${n} ${r} L ${n} ${r} L ${n} ${r} L ${i} ${s} L ${i} ${s} L ${i} ${s} L ${n} ${r} L ${n} ${r} L ${n-h} ${r-e}`}).attr("cursor",this.suppressEvents?null:this.cursor).attr("opacity",0).each((t,i,s)=>{tp(s[i])}).on("click",this.suppressEvents?null:(t,i,s)=>{if(t.values){const n=this.findMarkerIndex(t,s[i],Hu);this.onClickHandler(t.values[n])}}).on("mouseover",this.suppressEvents?null:(t,i,s)=>{let n=t;if(t.values){const r=this.findMarkerIndex(t,s[i],Hu);Hp(this.chartID,!0),n=t.values[r],this.hoverFunc.emit(n)}this.showTooltip&&this.eventsTooltip({data:this.tooltipLabel.labelAccessor&&this.tooltipLabel.labelAccessor.length?n:t,evt:Hu,isToShow:!0})}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity),this.update.order()}updateBarStyle(){this.update.attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity)}updateMarkerSize(t){(t||this.updateMarkers).each((t,i,s)=>{const n=Uu(s[i]),r=i<2&&this.clickHighlight.length?parseFloat(this.clickStyle.strokeWidth+""):i<4?this.barStyle.width:parseFloat(this.hoverStyle.strokeWidth+""),e=(t.focus?this.focusMarker.sizeFromBar:this.marker.sizeFromBar)*("dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2)*(r+1),h=e?10/e:0;n.attr("viewBox",`0 0 ${10+h} ${10+h}`).attr("refX",5+h/2).attr("refY",5+h/2).attr("stroke-width",h).attr("markerWidth",e).attr("markerHeight",e),"dot"===this.marker.type?n.select("circle").attr("cx",5+h/2).attr("cy",5+h/2):"stroke"===this.marker.type?n.select("path").attr("d",`M 4.5 ${0+h/2} L 4.5 ${10+h/2} L 6 ${10+h/2} L 6 ${0+h/2} z`):"arrow"===this.marker.type&&n.select("path").attr("transform",t.focus&&this.focusMarker.key&&1===t.referenceIndex?`rotate(180,${5+h/2},${5+h/2})`:null).attr("d",t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?`M ${0+h/2} ${5+h/4} L ${10+h/2} ${0+h/2} L ${10+h/2} ${10+h/2} z`:`M 4.5 ${0+h/2} L 4.5 ${10+h/2} L 6 ${10+h/2} L 6 ${0+h/2} z`)})}drawMarkerGeometries(){this.updateMarkers.selectAll(".marker-"+this.marker.type).data(t=>[t]),"arrow"===this.marker.type&&this.updateMarkers.selectAll("path").attr("d",(t,i,s)=>{const n=i<2&&this.clickHighlight.length?parseFloat(this.clickStyle.strokeWidth+""):i<4?this.barStyle.width:parseFloat(this.hoverStyle.strokeWidth+""),r=(t.focus?this.focusMarker.sizeFromBar:this.marker.sizeFromBar)*("dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2)*(n+1),e=r?10/r:0;return Uu(s[i]).attr("transform",t.focus&&this.focusMarker.key&&1===t.referenceIndex?`rotate(180,${5+e/2},${5+e/2})`:null),t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?`M ${0+e/2} ${5+e/4} L ${10+e/2} ${0+e/2} L ${10+e/2} ${10+e/2} z`:`M 4.5 ${0+e/2} L 4.5 ${10+e/2} L 6 ${10+e/2} L 6 ${0+e/2} z`})}updateDumbbells(){this.update.interrupt(),this.enter.transition("opacity").duration(this.duration).ease(Pd).attr("opacity",1)}exitDumbbells(){this.exit.interrupt(),this.exit.transition("exit").ease(Pd).duration(this.duration/2).attr("opacity",0).attr("d",(t,i,s)=>{const n=Uu(s[i]),r=+n.attr("data-centerX1"),e=+n.attr("data-centerY1"),h=+n.attr("data-centerX2"),a=+n.attr("data-centerY2"),o=this.isVertical?e>a?.001:-.001:0,u=this.isVertical?0:r>h?.001:-.001;return`M ${r+u} ${e+o} L ${r} ${e} L ${r} ${e} L ${h} ${a} L ${h} ${a} L ${h} ${a} L ${r} ${e} L ${r} ${e} L ${r} ${e} L ${h} ${a} L ${h} ${a} L ${h-u} ${a-o}`}),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(Pd).call(Xp,()=>{const t=gp(this.rootG.node());this.exit.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),wp({parentGNode:this.rootG.node(),focusDidExist:t})})}drawDumbbells(){this.update.classed("moving",(t,i,s)=>{const n=Uu(s[i]),r=Wp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&Wp(t.values[1],this.clickHighlight,this.innerInteractionKeys),e=Np(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&Np(t.values[1],this.hoverHighlight,this.innerInteractionKeys),h=this.dumbbellInteraction?r?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:e&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width,a=this.x(t.values[0][this.xAccessor]),o=this.y(t.values[0][this.yAccessor]),u=this.x(t.values[1][this.xAccessor]),c=this.y(t.values[1][this.yAccessor]),l=+n.attr("data-barSize"),f=+n.attr("data-centerX1"),d=+n.attr("data-centerY1"),v=+n.attr("data-centerX2"),p=+n.attr("data-centerY2");return h!==l||a!==f||o!==d||u!==v||c!==p}).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-d",this.setBarSize).transition("update").ease(Pd).duration(this.duration).attr("d",this.setBarSize).call(Xp,()=>{this.update.classed("moving",!1),wp({parentGNode:this.rootG.node()})})}updateMarkerIds(){this.updateMarkers.attr("id",t=>this.generateId(t,t.index)),this.update.attr("marker-start",t=>{const i=Ap(t.values[0],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),s=Np(t.values[0],this.hoverHighlight,this.innerInteractionKeys),n=Wp(t.values[0],this.clickHighlight,this.innerInteractionKeys);return this.url+(s&&!n?this.updateMarkers._groups[0][4].id:n||i?this.updateMarkers._groups[0][0].id:this.updateMarkers._groups[0][2].id)+")"}).attr("marker-end",t=>{const i=Ap(t.values[1],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),s=Np(t.values[1],this.hoverHighlight,this.innerInteractionKeys),n=Wp(t.values[1],this.clickHighlight,this.innerInteractionKeys);return this.url+(s&&!n?this.updateMarkers._groups[0][5].id:n||i?this.updateMarkers._groups[0][1].id:this.updateMarkers._groups[0][3].id)+")"})}updateInteractionState(){this.update.interrupt("opacity"),this.updateLabelChildren.interrupt("opacity"),this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1),this.update.attr("opacity",1).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity).each((t,i,s)=>{const n=Uu(s[i]);n.classed("moving")||n.attr("d",this.setBarSize)}),wp({parentGNode:this.rootG.node()}),Dp({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}enterSeriesLabels(){this.enterSeriesLabel.interrupt();const t=!("auto"!==this.seriesLabelDetails.placement)||this.seriesLabelDetails.placement.includes(this.isVertical?"right":"top");this.enterSeriesLabel.attr("opacity",0).attr("class","dumbbell-series-label").attr("fill",this.handleSeriesLabelColors).attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>this.onHoverHandler(t,!1):null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null).attr("text-anchor",this.isVertical&&t?"start":this.isVertical?"end":"middle").attr("x",i=>this.isVertical&&t?this.innerPaddedWidth:this.isVertical?0:this.x(i.value)).attr("y",i=>this.isVertical?this.y(i.value):this.isVertical||t?0:this.innerPaddedHeight).attr("dx",this.isVertical&&t?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}updateSeriesLabels(){this.updateSeriesLabel.interrupt(),this.updateSeriesLabel.transition("opacity_series_labels").ease(Pd).duration(this.duration).attr("opacity",t=>{const i=this.seriesLabelDetails.visible?1:0;return this.seriesInteraction?Ap(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}exitSeriesLabels(){this.exitSeriesLabel.transition("exit_series_labels").ease(Pd).duration(this.duration).attr("opacity",0).remove()}drawSeriesLabels(){const t="auto"===this.seriesLabelDetails.placement,i=!!t||this.seriesLabelDetails.placement.includes(this.isVertical?"right":"top"),s=!t&&this.seriesLabelDetails.collisionHideOnly,n=this.updateSeriesLabel.text((t,i)=>this.seriesLabelDetails.label?this.seriesLabelDetails.label[i]:t.label).style("visibility",(i,s,n)=>t||this.seriesLabelDetails.collisionHideOnly?Uu(n[s]).style("visibility"):null).attr("fill",this.handleSeriesLabelColors).attr("data-x",t=>this.isVertical&&i?this.innerPaddedWidth:this.isVertical?0:this.x(t.value)).attr("data-y",(t,s,n)=>{const r=getComputedStyle(n[s]),e=parseFloat(r.fontSize),h=Math.max(e-1,1);return this.isVertical?this.y(t.value)+.3*h:this.isVertical||i?0:this.innerPaddedHeight}).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",s).attr("data-use-dy",s).attr("data-text-anchor",this.isVertical&&i?"start":this.isVertical?"end":"middle").attr("dx",this.isVertical&&i?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em").transition("update_series_labels").ease(Pd).duration(this.duration);this.seriesLabelDetails.visible&&("auto"===this.seriesLabelDetails.placement||this.seriesLabelDetails.collisionHideOnly)?(this.bitmaps=Kp({bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:[this.seriesAccessor],size:[Vp(this.width,0),Vp(this.height,0)],hideOnly:this.seriesLabelDetails.visible&&this.seriesLabelDetails.collisionHideOnly&&"auto"!==this.seriesLabelDetails.placement}),s&&n.attr("text-anchor",this.isVertical&&i?"start":this.isVertical?"end":"middle").attr("x",t=>this.isVertical&&i?this.innerPaddedWidth:this.isVertical?0:this.x(t.value)).attr("y",t=>this.isVertical?this.y(t.value):this.isVertical||i?0:this.innerPaddedHeight).attr("dx",this.isVertical&&i?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")):n.attr("text-anchor",this.isVertical&&i?"start":this.isVertical?"end":"middle").attr("x",t=>this.isVertical&&i?this.innerPaddedWidth:this.isVertical?0:this.x(t.value)).attr("y",t=>this.isVertical?this.y(t.value):this.isVertical||i?0:this.innerPaddedHeight).attr("dx",this.isVertical&&i?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}setSeriesLabelOpacity(){this.updateSeriesLabel.interrupt("opacity_series_labels"),this.updateSeriesLabel.attr("opacity",t=>{const i=this.seriesLabelDetails.visible?1:0;return this.seriesInteraction?Ap(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}enterDifferenceLabels(){this.enterDiffLabel.interrupt();const t=this.diffLabelDetails.placement.includes(this.isVertical?"left":"top");this.enterDiffLabel.attr("class","dumbbell-diff-label").attr("opacity",0).attr("fill",this.setDiffLabelColor).attr("cursor",!this.suppressEvents&&this.dumbbellInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?()=>this.onMouseOutHandler():null).attr("x",t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle)).attr("y",i=>!this.isVertical&&t?this.y(i.key)-this.barStyle.width/2-4:this.isVertical?this.y(i.middle):this.y(i.key)+this.barStyle.width/2+4).attr("dx",this.isVertical&&t?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&t?"0":this.isVertical?"0.3em":"0.6em")}updateDifferenceLabels(){this.updateDiffLabel.interrupt(),this.updateDiffLabel.transition("opacity_diff_labels").ease(Pd).duration(this.duration).attr("opacity",t=>{const i=this.differenceLabel.visible?1:0;return this.dumbbellInteraction?Ap(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}exitDifferenceLabels(){this.exitDiffLabel.transition("exit_diff_label").ease(Pd).duration(this.duration).attr("opacity",0).remove()}drawDifferenceLabels(){const t="auto"===this.diffLabelDetails.placement,i=!!t||this.diffLabelDetails.placement.includes(this.isVertical?"left":"top"),s=!t&&this.differenceLabel.collisionHideOnly,n=this.updateDiffLabel.text(t=>$p(t,this.differenceLabel.calculation,this.differenceLabel.format)).style("visibility",(i,s,n)=>t||this.differenceLabel.collisionHideOnly?Uu(n[s]).style("visibility"):null).attr("data-x",t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle)).attr("data-y",t=>!this.isVertical&&i?this.y(t.key)-this.barStyle.width/2-4:this.isVertical?this.y(t.middle):this.y(t.key)+this.barStyle.width/2+4).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",s).attr("data-use-dy",s).attr("dx",this.isVertical&&i?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&i?"0":this.isVertical?"0.3em":"0.6em").attr("text-anchor",(s,n,r)=>t&&Uu(r[n]).attr("text-anchor")?Uu(r[n]).attr("text-anchor"):this.isVertical&&i?"end":this.isVertical?"start":"middle").transition("update_diff_label").ease(Pd).duration(this.duration);this.differenceLabel.visible&&("auto"===this.diffLabelDetails.placement||this.differenceLabel.collisionHideOnly)?(this.bitmaps=Kp({bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[this.update],validPositions:s?["middle"]:this.isVertical?["left","right"]:["top","bottom"],offsets:s?[this.barStyle.width/2+4]:[this.barStyle.width/2+4,this.barStyle.width/2+4],accessors:["key"],size:[Vp(this.width,0),Vp(this.height,0)],hideOnly:this.differenceLabel.visible&&this.differenceLabel.collisionHideOnly&&"auto"!==this.diffLabelDetails.placement}),s&&n.attr("x",t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle)).attr("y",t=>!this.isVertical&&i?this.y(t.key)-this.barStyle.width/2-4:this.isVertical?this.y(t.middle):this.y(t.key)+this.barStyle.width/2+4).attr("dx",this.isVertical&&i?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&i?"0":this.isVertical?"0.3em":"0.6em").attr("text-anchor",this.isVertical&&i?"end":this.isVertical?"start":"middle")):n.attr("x",t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle)).attr("y",t=>!this.isVertical&&i?this.y(t.key)-this.barStyle.width/2-4:this.isVertical?this.y(t.middle):this.y(t.key)+this.barStyle.width/2+4).attr("dx",this.isVertical&&i?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&i?"0":this.isVertical?"0.3em":"0.6em").attr("text-anchor",this.isVertical&&i?"end":this.isVertical?"start":"middle")}enterDataLabels(){this.enterLabels.interrupt(),this.enterLabels.attr("class","dumbbell-label-wrapper").attr("opacity",0).attr("fill",this.handleLabelColors),this.enterLabelChildren.attr("class","dumbbell-dataLabel").attr("opacity",0).attr("fill",this.handleLabelColors).attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null).on("click",!this.suppressEvents&&this.dataLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null),qp({root:this.enterLabelChildren,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData})}setDifferenceLabelOpacity(){this.updateDiffLabel.interrupt("opacity_diff_labels"),this.updateDiffLabel.attr("opacity",t=>{const i=this.differenceLabel.visible?1:0;return this.dumbbellInteraction?Ap(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}updateDataLabels(){this.updateLabelChildren.classed("transitioning",!0),this.updateLabels.transition("opacity").ease(Pd).duration(this.duration).attr("opacity",()=>this.dataLabel.visible?1:0).call(Xp,()=>{this.updateLabelChildren.classed("transitioning",!1)})}exitDataLabels(){this.exitLabels.interrupt(),this.exitLabels.selectAll(".dumbbell-dataLabel").transition("exit").ease(Pd).duration(this.duration/2).attr("opacity",0).call(Xp,()=>{this.exitLabels.remove()}),this.exitLabelChildren.transition("exit_dataLabel").ease(Pd).duration(this.duration).attr("opacity",0).remove()}drawDataLabels(t){const i="auto"===this.placement,s="auto"!==this.placement&&this.dataLabel.collisionHideOnly;this.updateLabelChildren.text(t=>$p(t,this.innerLabelAccessor,this.dataLabel.format));const n=this.updateLabelChildren.attr("fill",this.handleLabelColors).style("visibility",(t,s,n)=>i||this.dataLabel.collisionHideOnly?Uu(n[s]).style("visibility"):null).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",s).attr("data-use-dy",s).attr("dx",t=>this.isVertical?"0.0em":t.offset>=0?"-0.1em":"0.1em").attr("dy",t=>this.isVertical&&t.offset>=0?"0.9em":this.isVertical?"-0.3em":"0.0em").attr("data-y",(t,i,s)=>{const n=s[i],r=getComputedStyle(n),e=parseFloat(r.fontSize),h=Math.max(e-1,1),a=Yp(n.textContent,e,!0,r.fontFamily),o="horizontal"!==this.layoutOverride?0:t.offset>=0?-a/2:a/2,u="vertical"!==this.layoutOverride?-h/2:t.offset>=0?h/2:-h/2-h;return Uu(n).attr("data-x",t=>(this.isVertical?this.x(t[this.ordinalAccessor]):this.x(t[this.valueAccessor])-t.offset)+o),this.isVertical?this.y(t[this.valueAccessor])+t.offset+u:this.y(t[this.ordinalAccessor])+u}).attr("data-offset",t=>t.offset).transition("update_dataLabel").ease(Pd).duration((i,s,n)=>{const r=Np(i,this.hoverHighlight,this.innerInteractionKeys),e=Wp(i,this.clickHighlight,this.innerInteractionKeys);return(r||e)&&t&&!Uu(n[s]).classed("transitioning")?0:this.duration});this.bitmaps=qp({root:n,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.placement,labelSelection:n,avoidMarks:[this.update],validPositions:["middle"],offsets:[1],accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[Vp(this.width,0),Vp(this.height,0)],boundsScope:"centroid",hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})}updateDiffLabelColor(){this.updateDiffLabel.attr("fill",this.setDiffLabelColor)}setLabelOpacity(){this.updateLabels.attr("opacity",this.dataLabel.visible?1:0),this.updateLabelChildren.attr("opacity",t=>Ap(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1)}updateMarkerOpacity(){this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1)}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class",".dumbbell-reference").attr("opacity",1),s=i.append("line");s.attr("class","dumbbell-reference-line").attr("data-testid",this.unitTest?"reference-line":null).attr("opacity",0);const n=i.append("text");n.attr("class","dumbbell-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".dumbbell-reference-line").data(t=>[t]).transition("merge").ease(Pd).duration(this.duration),h=r.selectAll(".dumbbell-reference-line-label").data(t=>[t]).transition("merge").ease(Pd).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(Pd).duration(this.duration).attr("opacity",0).remove(),i.attr("transform",t=>"translate(0,"+this[this.isVertical?"y":"x"](t.value)+")"),r.transition("merge").ease(Pd).duration(this.duration).attr("transform",t=>"translate(0,"+this[this.isVertical?"y":"x"](t.value)+")"),s.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),n.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.style("stroke",Rp[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",Rp[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}setSelectedClass(){this.update.classed("highlight",(t,i,s)=>{const n=Ap(t.values[0],1,0,{},this.clickHighlight,this.innerInteractionKeys),r=Ap(t.values[1],1,0,{},this.clickHighlight,this.innerInteractionKeys);let e=n||r;return e=!(!this.clickHighlight||!this.clickHighlight.length)&&e,mp(s[i],e,this.accessibility.elementsAreInterface),e})}drawAnnotations(){kp({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:"horizontal"!==this.layoutOverride?this.ordinalAccessor:this.valueAccessor,yScale:this.y,yAccessor:"horizontal"!==this.layoutOverride?this.valueAccessor:this.ordinalAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){yp(this.dumbbellPlotEl,this.annotations)}setTagLevels(){this.topLevel=Fp(this.highestHeadingLevel),this.bottomLevel=Fp(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){Qv({rootEle:this.dumbbellPlotEl,title:this.accessibility.title||this.mainTitle,chartTag:"dumbbell-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){const t=Pp(this,xp,"dumbbell-plot");delete t[this.ordinalAccessor],np({node:this.svg.node(),chartTag:"dumbbell-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:["message"],nested:"values",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,s)=>{tp(s[i])})}setGeometryAriaLabels(){const t=Pp(this,xp,"dumbbell-plot");delete t[this.ordinalAccessor],this.update.each((i,s,n)=>{ip({node:n[s],geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:["message"],nested:["values"],uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),sp({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityAttributes(){tp(this.dumbbellG.node())}setGroupAccessibilityID(){this.dumbbellG.each((t,i,s)=>{sp({node:s[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){ep(this.dumbbellPlotEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){hp(this.dumbbellPlotEl,this.subTitle)}setChartAccessibilityLongDescription(){ap(this.dumbbellPlotEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){op(this.dumbbellPlotEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){up(this.dumbbellPlotEl,this.accessibility.purpose)}setChartAccessibilityContext(){cp(this.dumbbellPlotEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){lp(this.dumbbellPlotEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){fp({rootEle:this.dumbbellPlotEl,parentGNode:this.dumbbellG.node(),chartTag:"dumbbell-plot",geomType:"dumbbell"})}setChartAccessibilityStructureNotes(){pp(this.dumbbellPlotEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t,i){Hp(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&i&&this.eventsTooltip({data:t,evt:Hu,isToShow:!0})}onMouseOutHandler(){Hp(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){_p(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){Mp({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,diffLabelDetails:this.diffLabelDetails,chartType:"dumbbell"})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),this.updateDiffLabel.attr("cursor",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?this.cursor:null),this.updateLabelChildren.attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null)}drawLegendElements(){Ep({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.accessibility.hideStrokes?null:this.rawColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,label:this.legend.labels||this.ordinalLabel,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){Uu(this.dumbbellPlotEl).selectAll(".legend").on("click",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?t=>this.onHoverHandler(t,!1):null).on("mouseout",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}setLegendCursor(){Uu(this.dumbbellPlotEl).selectAll(".legend").style("cursor",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?this.cursor:null)}setSeriesCursor(){this.updateSeriesLabel.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null)}bindSeriesInteractivity(){this.updateSeriesLabel.on("click",!this.suppressEvents&&this.seriesInteraction?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>this.onHoverHandler(t,!1):null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null)}bindInteractivity(){this.update.on("click",this.suppressEvents?null:(t,i,s)=>{if(t.values){const n=this.findMarkerIndex(t,s[i],Hu);this.onClickHandler(t.values[n])}}).on("mouseover",this.suppressEvents?null:(t,i,s)=>{let n=t;if(t.values){const r=this.findMarkerIndex(t,s[i],Hu);Hp(this.chartID,!0),n=t.values[r],this.hoverFunc.emit(n)}this.showTooltip&&this.eventsTooltip({data:this.tooltipLabel.labelAccessor&&this.tooltipLabel.labelAccessor.length?n:t,evt:Hu,isToShow:!0})}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateLabelChildren.on("click",!this.suppressEvents&&this.dataLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null),this.updateDiffLabel.on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?()=>this.onMouseOutHandler():null)}findMarkerIndex(t,i,s){const n=this.isVertical?this.findPosition(i,s)[1]:this.findPosition(i,s)[0],r=this.isVertical?"Y":"X",e=+Uu(i).attr("data-center"+r+"1"),h=+Uu(i).attr("data-center"+r+"2"),a=t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]?0:1;return n<=(h-e)/2+e?0+a:1-a}findPosition(t,i){let s=(t.ownerSVGElement||t).createSVGPoint();return s.x=i.clientX,s.y=i.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}generateId(t,i){let s="dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2;s=t.focus?this.focusMarker.sizeFromBar*s:this.marker.sizeFromBar*s;const n=this.marker.visible||t.focus?1:0,r="#"===this.rawColors[t.referenceIndex][0]?this.rawColors[t.referenceIndex].substring(1):this.rawColors[t.referenceIndex];let e=(i<2&&this.clickHighlight.length?this.clickStyle.strokeWidth:i<4?this.barStyle.width:this.hoverStyle.strokeWidth).toString();return e=""+e,e=e.replace(/\D/g,"n"),"marker-"+this.chartID+i+this.marker.type+s+r+e+n}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldValidateLayout&&this.validateLayout(),this.shouldValidateDataLabelPlacement&&(this.validateDataLabelPlacement(),this.shouldValidateDataLabelPlacement=!1),this.shouldValidateSeriesLabelPlacement&&(this.validateSeriesLabelPlacement(),this.shouldValidateSeriesLabelPlacement=!1),this.shouldValidateDiffLabelPlacement&&(this.validateDiffLabelPlacement(),this.shouldValidateDiffLabelPlacement=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldUpdateLayout&&(this.setLayoutData(),this.shouldUpdateLayout=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateMarkerData&&(this.prepareMarkerData(),this.shouldUpdateMarkerData=!1),this.shouldUpdateSeriesData&&(this.prepareSeriesData(),this.shouldUpdateSeriesData=!1),this.shouldUpdateLegendData&&(this.prepareLegendData(),this.shouldUpdateLegendData=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldCheckValueAxis&&("horizontal"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0):("vertical"===this.layout||this.layoutOverride)&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0),this.shouldCheckValueAxis=!1),this.shouldCheckLabelAxis&&("vertical"===this.layout||this.layoutOverride?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0):"horizontal"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0),this.shouldCheckLabelAxis=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"dumbbell-main-title vcl-main-title","data-testid":"main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions dumbbell-sub-title vcl-sub-title","data-testid":"sub-title"},this.subTitle),s("div",{class:"dumbbell-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"dumbbell",chartTag:"dumbbell-plot",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-dumbbell-container"}),s("div",{class:"dumbbell-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))}init(){const t=Object.keys(qd);let i=0;const s={wrapLabel:{exception:!1},strokeWidth:{exception:0},showDots:{exception:!1},dotRadius:{exception:0},hoverOpacity:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:!1}};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:qd[t[i]]}}get dumbbellPlotEl(){return n(this)}static get watchers(){return{mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],seriesAccessor:["seriesAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],layout:["layoutWatcher"],showBaselineX:["showBaselineXWatcher"],showBaselineY:["showBaselineYWatcher"],colorPalette:["paletteWatcher"],colors:["paletteWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],hoverOpacity:["hoverOpacityWatcher"],cursor:["cursorWatcher"],focusMarker:["focusMarkerWatcher"],marker:["markerWatcher"],barStyle:["barStyleWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],differenceLabel:["differenceLabelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],referenceStyle:["referenceWatcher"],referenceLines:["referenceWatcher"],suppressEvents:["suppressWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],interactionKeys:["interactionWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}dumbbell-plot{cursor:default}dumbbell-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}dumbbell-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}dumbbell-plot .hidden{display:none}dumbbell-plot .axis{font-size:12px}dumbbell-plot .axis text{fill:#767676}dumbbell-plot .axis-label{text-anchor:middle;font:1rem sans-serif}dumbbell-plot .axis path{stroke:#767676}dumbbell-plot .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}dumbbell-plot .grid path{stroke-width:0;stroke:#767676}dumbbell-plot .dumbbell-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}dumbbell-plot .dumbbell-group__inactive{opacity:0}dumbbell-plot .dumbbell-group .dot{stroke:#ffffff}dumbbell-plot .dumbbell-group .dumbbell-series-label{font-size:1em}dumbbell-plot .dumbbell-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .dumbbell-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .annotations{pointer-events:none}dumbbell-plot .annotations .handle{pointer-events:all}"}};window.VisaChartsLibOSSLicenses=Ip();const{getLicenses:Up}=r,Zp=class{constructor(i){t(this,i),this.chartContent=[],this.selectionMode="multiple",this.onElementUpdate=new Function,this.filterAccessor="label",this.defaultClickElement=[],this.data=[],this.hoverElement="",this.clickElement=[]}componentWillLoad(){}componentWillUpdate(){this.clickElement||(this.clickElement=this.defaultClickElement),this.renderCharts()}onClick(t){this.handleClickElement(t)}handleClickElement(t){if(console.log("handleClickElement",t),"single"===this.selectionMode)this.clickElement=this.clickElement.includes(t)?"":[t];else if("multiple"===this.selectionMode)if(this.clickElement.includes(t))for(let i=this.clickElement.length-1;i>=0;i--)this.clickElement[i]===t&&this.clickElement.splice(i,1);else this.clickElement.push(t);else this.clickElement=[];this.onElementUpdate(this.clickElement)}onHover(t){this.hoverElement=t}onMouseOut(){this.hoverElement=""}drawChart(t){const i=function(t,i){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.indexOf(n)<0&&(s[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)i.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]])}return s}(t,["chartType","width"]),n={onClickFunc:t=>this.onClick(t),onHoverFunc:t=>this.onHover(t),onMouseOutFunc:()=>this.onMouseOut(),clickHighlight:this.clickElement,hoverHighlight:this.hoverElement};switch(t.chartType){case"bar-chart":return s("div",{class:"col--lg-"+t.width},s("bar-chart",Object.assign({width:100*t.width},n,i)));case"pie-chart":return s("div",{class:"col--lg-"+t.width},s("pie-chart",Object.assign({width:100*t.width},n,i)));case"scatter-plot":return s("div",{class:"col--lg-"+t.width},s("scatter-plot",Object.assign({width:100*t.width},n,i)));case"circle-packing":return s("div",{class:"col--lg-"+t.width},s("circle-packing",Object.assign({width:100*t.width},n,i)));case"clustered-force-layout":return s("div",{class:"col--lg-"+t.width},s("clustered-force-layout",Object.assign({width:100*t.width},n,i)));case"line-chart":return s("div",{class:"col--lg-"+t.width},s("line-chart",Object.assign({width:100*t.width},n,i)));case"world-map":return s("div",{class:"col--lg-"+t.width},s("world-map",Object.assign({width:100*t.width},n,i)));case"space":return s("div",{class:"col--lg-"+t.width});default:return}}renderCharts(){return this.chartContent.map(t=>this.drawChart(t))}render(){return s("div",{class:"row"},this.renderCharts())}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}"}};window.VisaChartsLibOSSLicenses=Up();var Jp="http://www.w3.org/1999/xhtml";const Qp={svg:"http://www.w3.org/2000/svg",xhtml:Jp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ty(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),Qp.hasOwnProperty(i)?{space:Qp[i],local:t}:t}function iy(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===Jp&&i.documentElement.namespaceURI===Jp?i.createElement(t):i.createElementNS(s,t)}}function sy(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ny(t){var i=ty(t);return(i.local?sy:iy)(i)}function ry(){}function ey(t){return null==t?ry:function(){return this.querySelector(t)}}function hy(){return[]}function ay(t){return null==t?hy:function(){return this.querySelectorAll(t)}}function oy(t){return function(){return this.matches(t)}}function uy(t){return new Array(t.length)}function cy(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function ly(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new cy(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function fy(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new cy(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function dy(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function vy(t){return function(){this.removeAttribute(t)}}function py(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yy(t,i){return function(){this.setAttribute(t,i)}}function wy(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function gy(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function my(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function by(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function My(t){return function(){this.style.removeProperty(t)}}function ky(t,i,s){return function(){this.style.setProperty(t,i,s)}}function xy(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function Ay(t,i){return t.style.getPropertyValue(i)||by(t).getComputedStyle(t,null).getPropertyValue(i)}function Wy(t){return function(){delete this[t]}}function Ny(t,i){return function(){this[t]=i}}function Ly(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function Sy(t){return t.trim().split(/^|\s+/)}function Ty(t){return t.classList||new Ey(t)}function Ey(t){this._node=t,this._names=Sy(t.getAttribute("class")||"")}function Dy(t,i){for(var s=Ty(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function $y(t,i){for(var s=Ty(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function Cy(t){return function(){Dy(this,t)}}function Iy(t){return function(){$y(this,t)}}function Oy(t,i){return function(){(i.apply(this,arguments)?Dy:$y)(this,t)}}function zy(){this.textContent=""}function _y(t){return function(){this.textContent=t}}function Hy(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function qy(){this.innerHTML=""}function Py(t){return function(){this.innerHTML=t}}function Ry(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function Xy(){this.nextSibling&&this.parentNode.appendChild(this)}function jy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fy(){return null}function Gy(){var t=this.parentNode;t&&t.removeChild(this)}function Vy(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function Yy(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}cy.prototype={constructor:cy,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Ey.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Ky={},By=null;function Uy(t,i,s){return t=Zy(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function Zy(t,i,s){return function(n){var r=By;By=n;try{t.call(this,this.__data__,i,s)}finally{By=r}}}function Jy(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function Qy(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function tw(t,i,s){var n=Ky.hasOwnProperty(t.type)?Uy:Zy;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function iw(t,i,s){var n=by(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function sw(t,i){return function(){return iw(this,t,i)}}function nw(t,i){return function(){return iw(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Ky={mouseenter:"mouseover",mouseleave:"mouseout"}));var rw=[null];function ew(t,i){this._groups=t,this._parents=i}function hw(){return new ew([[document.documentElement]],rw)}function aw(t){return"string"==typeof t?new ew([[document.querySelector(t)]],[document.documentElement]):new ew([[t]],rw)}function ow(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}ew.prototype=hw.prototype={constructor:ew,select:function(t){"function"!=typeof t&&(t=ey(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new ew(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=ay(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new ew(n,r)},filter:function(t){"function"!=typeof t&&(t=oy(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new ew(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?fy:ly,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new ew(h,n))._enter=a,h._exit=o,h},enter:function(){return new ew(this._enter||this._groups.map(uy),this._parents)},exit:function(){return new ew(this._exit||this._groups.map(uy),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new ew(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=dy);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new ew(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=ty(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?py:vy:"function"==typeof i?s.local?my:gy:s.local?wy:yy)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?My:"function"==typeof i?xy:ky)(t,i,null==s?"":s)):Ay(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?Wy:"function"==typeof i?Ly:Ny)(t,i)):this.node()[t]},classed:function(t,i){var s=Sy(t+"");if(arguments.length<2){for(var n=Ty(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?Oy:i?Cy:Iy)(s,i))},text:function(t){return arguments.length?this.each(null==t?zy:("function"==typeof t?Hy:_y)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?qy:("function"==typeof t?Ry:Py)(t)):this.node().innerHTML},raise:function(){return this.each(Xy)},lower:function(){return this.each(jy)},append:function(t){var i="function"==typeof t?t:ny(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:ny(t),n=null==i?Fy:"function"==typeof i?i:ey(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(Gy)},clone:function(t){return this.select(t?Yy:Vy)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=Jy(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?tw:Qy,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?nw:sw)(t,i))}};var uw=function(t){return 1===t.length&&(t=function(t){return function(i,s){return ow(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}(ow).right;function cw(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var lw=Math.sqrt(50),fw=Math.sqrt(10),dw=Math.sqrt(2);function vw(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=lw?10:e>=fw?5:e>=dw?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=lw?10:e>=fw?5:e>=dw?2:1)}function pw(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&s>n&&(n=s);return n}function yw(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&n>s&&(n=s);return n}function ww(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function gw(){}function mw(t,i){var s=new gw;if(t instanceof gw)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}function bw(){return{}}function Mw(t,i,s){t[i]=s}function kw(){return mw()}function xw(t,i,s){t.set(i,s)}gw.prototype=mw.prototype={constructor:gw,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var Aw=Array.prototype.slice,Ww={name:"implicit"};function Nw(){var t=mw(),i=[],s=[],n=Ww;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==Ww)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=mw();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=Aw.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return Nw(i,s).unknown(n)},ww.apply(r,arguments),r}function Lw(){var t,i,s=Nw().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=cw(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return Lw(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},ww.apply(c(),arguments)}function Sw(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function Tw(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function Ew(){}var Dw="\\s*([+-]?\\d+)\\s*",$w="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Iw=/^#([0-9a-f]{3,8})$/,Ow=new RegExp("^rgb\\("+[Dw,Dw,Dw]+"\\)$"),zw=new RegExp("^rgb\\("+[Cw,Cw,Cw]+"\\)$"),_w=new RegExp("^rgba\\("+[Dw,Dw,Dw,$w]+"\\)$"),Hw=new RegExp("^rgba\\("+[Cw,Cw,Cw,$w]+"\\)$"),qw=new RegExp("^hsl\\("+[$w,Cw,Cw]+"\\)$"),Pw=new RegExp("^hsla\\("+[$w,Cw,Cw,$w]+"\\)$"),Rw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Xw(){return this.rgb().formatHex()}function jw(){return this.rgb().formatRgb()}function Fw(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=Iw.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?Gw(i):3===s?new Bw(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?Vw(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?Vw(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Ow.exec(t))?new Bw(i[1],i[2],i[3],1):(i=zw.exec(t))?new Bw(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=_w.exec(t))?Vw(i[1],i[2],i[3],i[4]):(i=Hw.exec(t))?Vw(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=qw.exec(t))?Qw(i[1],i[2]/100,i[3]/100,1):(i=Pw.exec(t))?Qw(i[1],i[2]/100,i[3]/100,i[4]):Rw.hasOwnProperty(t)?Gw(Rw[t]):"transparent"===t?new Bw(NaN,NaN,NaN,0):null}function Gw(t){return new Bw(t>>16&255,t>>8&255,255&t,1)}function Vw(t,i,s,n){return n<=0&&(t=i=s=NaN),new Bw(t,i,s,n)}function Yw(t){return t instanceof Ew||(t=Fw(t)),t?new Bw((t=t.rgb()).r,t.g,t.b,t.opacity):new Bw}function Kw(t,i,s,n){return 1===arguments.length?Yw(t):new Bw(t,i,s,null==n?1:n)}function Bw(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function Uw(){return"#"+Jw(this.r)+Jw(this.g)+Jw(this.b)}function Zw(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Jw(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Qw(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new ig(t,i,s,n)}function tg(t){if(t instanceof ig)return new ig(t.h,t.s,t.l,t.opacity);if(t instanceof Ew||(t=Fw(t)),!t)return new ig;if(t instanceof ig)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new ig(h,a,o,t.opacity)}function ig(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function sg(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function ng(t){return function(){return t}}function rg(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):ng(isNaN(t)?i:t)}Sw(Ew,Fw,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Xw,formatHex:Xw,formatHsl:function(){return tg(this).formatHsl()},formatRgb:jw,toString:jw}),Sw(Bw,Kw,Tw(Ew,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Bw(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Bw(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Uw,formatHex:Uw,formatRgb:Zw,toString:Zw})),Sw(ig,(function(t,i,s,n){return 1===arguments.length?tg(t):new ig(t,i,s,null==n?1:n)}),Tw(Ew,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ig(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ig(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new Bw(sg(t>=240?t-240:t+120,r,n),sg(t,r,n),sg(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const eg=function t(i){var s=function(t){return 1==(t=+t)?rg:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):ng(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=Kw(t)).r,(i=Kw(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=rg(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function hg(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}var ag=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,og=new RegExp(ag.source,"g");function ug(t,i){var s,n,r,e=ag.lastIndex=og.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=ag.exec(t))&&(n=og.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:hg(s,n)})),e=og.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}var cg,lg,fg,dg,vg=180/Math.PI,pg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yg(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*vg,skewX:Math.atan(o)*vg,scaleX:h,scaleY:a}}function wg(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:hg(t,r)},{i:o-2,x:hg(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:hg(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:hg(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:hg(t,s)},{i:a-2,x:hg(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var gg=wg((function(t){return"none"===t?pg:(cg||(cg=document.createElement("DIV"),lg=document.documentElement,fg=document.defaultView),cg.style.transform=t,t=fg.getComputedStyle(lg.appendChild(cg),null).getPropertyValue("transform"),lg.removeChild(cg),yg(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),mg=wg((function(t){return null==t?pg:(dg||(dg=document.createElementNS("http://www.w3.org/2000/svg","g")),dg.setAttribute("transform",t),(t=dg.transform.baseVal.consolidate())?yg((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):pg)}),", ",")",")");function bg(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function Mg(t){return(t=bg(Math.abs(t)))?t[1]:NaN}var kg,xg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ag(t){if(!(i=xg.exec(t)))throw new Error("invalid format: "+t);var i;return new Wg({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function Wg(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Ng(t,i){var s=bg(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}Ag.prototype=Wg.prototype,Wg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Lg={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return Ng(100*t,i)},r:Ng,s:function(t,i){var s=bg(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(kg=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+bg(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Sg(t){return t}var Tg,Eg,Dg,$g=Array.prototype.map,Cg=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ig(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=vw(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=function(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=lw?r*=10:e>=fw?r*=5:e>=dw&&(r*=2),i<t?-r:r}(t,i,s);switch((n=Ag(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Mg(i)/3)))-Mg(Math.abs(t)))}(e,h))||(n.precision=r),Dg(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,Mg(i)-Mg(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-Mg(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return Eg(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=vw(a,o,s))>0?n=vw(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=vw(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function Og(){var t,i=0,s=1,n=1,r=[.5],e=[0,1];function h(i){return i<=i?e[uw(r,i,0,n)]:t}function a(){var t=-1;for(r=new Array(n);++t<n;)r[t]=((t+1)*s-(t-n)*i)/(n+1);return h}return h.domain=function(t){return arguments.length?(i=+t[0],s=+t[1],a()):[i,s]},h.range=function(t){return arguments.length?(n=(e=Aw.call(t)).length-1,a()):e.slice()},h.invertExtent=function(t){var h=e.indexOf(t);return h<0?[NaN,NaN]:h<1?[i,r[0]]:h>=n?[r[n-1],s]:[r[h-1],r[h]]},h.unknown=function(i){return arguments.length?(t=i,h):h},h.thresholds=function(){return r.slice()},h.copy=function(){return Og().domain([i,s]).range(e).unknown(t)},ww.apply(Ig(h),arguments)}function zg(t){return 1-Math.sqrt(1-t*t)}Tg=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?Sg:(i=$g.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Sg:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}($g.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=Ag(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):Lg[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?o:"",M=Lg[g],k=/[defgprs%]/.test(g);function x(t){var r,e,o,f=m,x=b;if("c"===g)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===g?Cg[8+kg/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var W=f.length+t.length+x.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=n(N+t,N.length?v-x.length:1/0),N=""),s){case"<":t=f+t+x+N;break;case"=":t=f+N+t+x;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+x+N.slice(W);break;default:t=N+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=Ag(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(Mg(i)/3))),r=Math.pow(10,-n),e=Cg[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Eg=Tg.format,Dg=Tg.formatPrefix;const{propDefaultValues:_g}=r;class Hg{}Hg.mainTitle="Heat Map Title",Hg.subTitle="This is the heat map's subtitle",Hg.height=250,Hg.width=500,Hg.margin={top:2.5,bottom:2.5,right:5,left:5},Hg.padding={top:20,bottom:30,right:60,left:80},Hg.xAccessor="date",Hg.yAccessor="category",Hg.valueAccessor="value",Hg.shape="rect",Hg.hideAxisPath=_g.showBaselineFalse,Hg.accessibility=_g.accessibility,Hg.animationConfig=_g.animationConfig,Hg.highestHeadingLevel=_g.highestHeadingLevel,Hg.xAxis=_g.xAxis,Hg.yAxis=_g.yAxis,Hg.wrapLabel=_g.wrapLabel,Hg.strokeWidth=_g.strokeWidth2,Hg.colorPalette=_g.colorPaletteSequential,Hg.colorSteps=_g.colorSteps5,Hg.hoverStyle=_g.hoverStyle,Hg.clickStyle=_g.clickStyle,Hg.cursor=_g.cursor,Hg.hoverOpacity=_g.hoverOpacity,Hg.dataLabel=_g.dataLabel,Hg.legend=_g.legend,Hg.tooltipLabel=_g.tooltipLabel,Hg.showTooltip=_g.showTooltip,Hg.suppressEvents=_g.suppressEvents,Hg.referenceLines=_g.referenceLines,Hg.annotations=_g.annotations,Hg.clickHighlight=_g.clickHighlight;var qg={value:function(){}};function Pg(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Rg(n)}function Rg(t){this._=t}function Xg(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function jg(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function Fg(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=qg,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}Rg.prototype=Pg.prototype={constructor:Rg,on:function(t,i){var s,n=this._,r=Xg(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=Fg(n[s],t.name,i);else if(null==i)for(s in n)n[s]=Fg(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=jg(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new Rg(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var Gg,Vg,Yg=0,Kg=0,Bg=0,Ug=0,Zg=0,Jg=0,Qg="object"==typeof performance&&performance.now?performance:Date,tm="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function im(){return Zg||(tm(sm),Zg=Qg.now()+Jg)}function sm(){Zg=0}function nm(){this._call=this._time=this._next=null}function rm(t,i,s){var n=new nm;return n.restart(t,i,s),n}function em(){Zg=(Ug=Qg.now())+Jg,Yg=Kg=0;try{!function(){im(),++Yg;for(var t,i=Gg;i;)(t=Zg-i._time)>=0&&i._call.call(null,t),i=i._next;--Yg}()}finally{Yg=0,function(){for(var t,i,s=Gg,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:Gg=i);Vg=t,am(n)}(),Zg=0}}function hm(){var t=Qg.now(),i=t-Ug;i>1e3&&(Jg-=i,Ug=t)}function am(t){Yg||(Kg&&(Kg=clearTimeout(Kg)),t-Zg>24?(t<1/0&&(Kg=setTimeout(em,t-Qg.now()-Jg)),Bg&&(Bg=clearInterval(Bg))):(Bg||(Ug=Qg.now(),Bg=setInterval(hm,1e3)),Yg=1,tm(em)))}function om(t,i,s){var n=new nm;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}nm.prototype=rm.prototype={constructor:nm,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?im():+s)+(null==i?0:+i),this._next||Vg===this||(Vg?Vg._next=this:Gg=this,Vg=this),this._call=t,this._time=s,am()},stop:function(){this._call&&(this._call=null,this._time=1/0,am())}};var um=Pg("start","end","interrupt"),cm=[];function lm(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return om(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(om((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=rm((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:um,tween:cm,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function fm(t,i){var s=vm(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function dm(t,i){var s=vm(t,i);if(s.state>2)throw new Error("too late; already started");return s}function vm(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function pm(t,i){var s,n;return function(){var r=dm(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function ym(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=dm(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function wm(t,i,s){var n=t._id;return t.each((function(){var t=dm(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return vm(t,n).value[i]}}function gm(t,i){var s;return("number"==typeof i?hg:i instanceof Fw?eg:(s=Fw(i))?(i=s,eg):ug)(t,i)}function mm(t){return function(){this.removeAttribute(t)}}function bm(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mm(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function km(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function xm(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function Am(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function Wm(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function Nm(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function Lm(t,i){return function(){fm(this,t).delay=+i.apply(this,arguments)}}function Sm(t,i){return i=+i,function(){fm(this,t).delay=i}}function Tm(t,i){return function(){dm(this,t).duration=+i.apply(this,arguments)}}function Em(t,i){return i=+i,function(){dm(this,t).duration=i}}function Dm(t,i){if("function"!=typeof i)throw new Error;return function(){dm(this,t).ease=i}}function $m(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?fm:dm;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var Cm=hw.prototype.constructor;function Im(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var Om=0;function zm(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function _m(){return++Om}var Hm=hw.prototype;zm.prototype=function(t){return hw().transition(t)}.prototype={constructor:zm,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=ey(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,lm(l[f],i,s,f,l,vm(a,s)));return new zm(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=ay(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=vm(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&lm(f,i,s,p,d,v);e.push(d),h.push(o)}return new zm(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=oy(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new zm(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new zm(e,this._parents,this._name,this._id)},selection:function(){return new Cm(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=_m(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=vm(h,i);lm(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new zm(n,this._parents,t,s)},call:Hm.call,nodes:Hm.nodes,node:Hm.node,size:Hm.size,empty:Hm.empty,each:Hm.each,on:function(t,i){var s=this._id;return arguments.length<2?vm(this.node(),s).on.on(t):this.each($m(s,t,i))},attr:function(t,i){var s=ty(t),n="transform"===s?mg:gm;return this.attrTween(t,"function"==typeof i?(s.local?Am:xm)(s,n,wm(this,"attr."+t,i)):null==i?(s.local?bm:mm)(s):(s.local?km:Mm)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=ty(t);return this.tween(s,(n.local?Wm:Nm)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?gg:gm;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=Ay(this,t),h=(this.style.removeProperty(t),Ay(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=Ay(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=Ay(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,wm(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=Ay(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,Im(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(wm(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=vm(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?pm:ym)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?Lm:Sm)(i,t)):vm(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?Tm:Em)(i,t)):vm(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(Dm(i,t)):vm(this.node(),i).ease}};var qm={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Pm(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return qm.time=im(),qm;return s}hw.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},hw.prototype.transition=function(t){var i,s;t instanceof zm?(i=t._id,t=t._name):(i=_m(),(s=qm).time=im(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&lm(h,t,i,u,a,s||Pm(h,i));return new zm(n,this._parents,t,i)};var Rm="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Xm=new Uint8Array(16);function jm(){if(!Rm)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return Rm(Xm)}for(var Fm=[],Gm=0;Gm<256;++Gm)Fm[Gm]=(Gm+256).toString(16).substr(1);function Vm(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||jm)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[Fm[t[i++]],Fm[t[i++]],Fm[t[i++]],Fm[t[i++]],"-",Fm[t[i++]],Fm[t[i++]],"-",Fm[t[i++]],Fm[t[i++]],"-",Fm[t[i++]],Fm[t[i++]],"-",Fm[t[i++]],Fm[t[i++]],Fm[t[i++]],Fm[t[i++]],Fm[t[i++]],Fm[t[i++]]].join("")}(r)}const{calculateLuminance:Ym,prepareStrokeColorsFromScheme:Km,verifyTextHasSpace:Bm,checkAttributeTransitions:Um,createTextStrokeFilter:Zm,drawHoverStrokes:Jm,removeHoverStrokes:Qm,buildStrokes:tb,convertColorsToTextures:ib,findTagLevel:sb,prepareRenderChange:nb,initializeDescriptionRoot:rb,initializeElementAccess:eb,setElementFocusHandler:hb,setElementAccessID:ab,setAccessibilityController:ob,hideNonessentialGroups:ub,setAccessTitle:cb,setAccessSubtitle:lb,setAccessLongDescription:fb,setAccessExecutiveSummary:db,setAccessPurpose:vb,setAccessContext:pb,setAccessStatistics:yb,setAccessChartCounts:wb,setAccessXAxis:gb,setAccessYAxis:mb,setAccessStructure:bb,setAccessAnnotation:Mb,retainAccessFocus:kb,checkAccessFocus:xb,setElementInteractionAccessState:Ab,setAccessibilityDescriptionWidth:Wb,autoTextColor:Nb,annotate:Lb,chartAccessors:Sb,checkInteraction:Tb,checkClicked:Eb,checkHovered:Db,convertVisaColor:$b,drawAxis:Cb,drawLegend:Ib,drawTooltip:Ob,formatStats:zb,formatDate:_b,getColors:Hb,getLicenses:qb,getPadding:Pb,getScopedData:Rb,initTooltipStyle:Xb,overrideTitleTooltip:jb,placeDataLabels:Fb,scopeDataKeys:Gb,transitionEndAll:Vb,validateAccessibilityProps:Yb}=r,Kb=class{constructor(s){t(this,s),this.mainTitle=Hg.mainTitle,this.subTitle=Hg.subTitle,this.height=Hg.height,this.width=Hg.width,this.highestHeadingLevel=Hg.highestHeadingLevel,this.margin=Hg.margin,this.padding=Hg.padding,this.xAccessor=Hg.xAccessor,this.yAccessor=Hg.yAccessor,this.valueAccessor=Hg.valueAccessor,this.xAxis=Hg.xAxis,this.yAxis=Hg.yAxis,this.wrapLabel=Hg.wrapLabel,this.hideAxisPath=Hg.hideAxisPath,this.colorPalette=Hg.colorPalette,this.colorSteps=Hg.colorSteps,this.hoverStyle=Hg.hoverStyle,this.clickStyle=Hg.clickStyle,this.cursor=Hg.cursor,this.shape=Hg.shape,this.hoverOpacity=Hg.hoverOpacity,this.animationConfig=Hg.animationConfig,this.strokeWidth=Hg.strokeWidth,this.dataLabel=Hg.dataLabel,this.showTooltip=Hg.showTooltip,this.tooltipLabel=Hg.tooltipLabel,this.accessibility=Hg.accessibility,this.legend=Hg.legend,this.annotations=Hg.annotations,this.clickHighlight=Hg.clickHighlight,this.suppressEvents=Hg.suppressEvents,this.shouldValidateAccessibility=!0,this.nest=[],this.datakeys=[],this.updated=!0,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateTableData=!1,this.shouldUpdateScales=!1,this.shouldResetRoot=!1,this.shouldSetColors=!1,this.shouldValidateInteractionKeys=!1,this.shouldFormatClickHighlight=!1,this.shouldFormatHoverHighlight=!1,this.shouldUpdateAnnotations=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldSetGlobalSelections=!1,this.shouldEnterUpdateExit=!1,this.shouldUpdateGeometries=!1,this.shouldSetSelectionClass=!1,this.shouldDrawInteractionState=!1,this.shouldUpdateLegend=!1,this.shouldUpdateCursor=!1,this.shouldBindInteractivity=!1,this.shouldUpdateLabels=!1,this.shouldSetLabelOpacity=!1,this.shouldSwapXAxis=!1,this.shouldSwapYAxis=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetTextures=!1,this.shouldSetStrokes=!1,this.strokes={},this.topLevel="h2",this.bottomLevel="p",this.textTreatmentHandler=(t,i,s)=>{const n=!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors(t.valueAccessor):this.rawHeat(t.valueAccessor),r=Nb(n),e=aw(s[i]);return e.attr("filter",e.classed("textIsMoving")?null:Zm({root:this.svg.node(),id:this.chartID,color:n})),r},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateScales=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0,this.shouldSetLabelOpacity=!0}idWatcher(t,i){this.chartID=t,this.heatMapEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldSetTextures=!0,this.shouldDrawInteractionState=!0,this.shouldSetStrokes=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}layoutWatcher(t,i){this.shouldSetDimensions=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetLabelOpacity=!0}xAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0,this.shouldSetLabelOpacity=!0}yAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0,this.shouldSetLabelOpacity=!0}groupAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateTableData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldSetGeometryAriaLabels=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldSetTextures=!0,this.shouldSetStrokes=!0}xKeyOrderWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0}yKeyOrderWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0}xAxisWatcher(t,i){const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement;(!(!t||!t.format)&&t.format)!==(!(!i||!i.format)&&i.format)&&(this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0),s!==n&&(this.shouldSwapXAxis=!0),this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0}yAxisWatcher(t,i){const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement;(!(!t||!t.format)&&t.format)!==(!(!i||!i.format)&&i.format)&&(this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0),s!==n&&(this.shouldSwapYAxis=!0),this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0}wrapLabelWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}hideAxisPathWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}shapeWatcher(t,i){this.shouldUpdateGeometries=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0}strokeWidthWatcher(t,i){this.shouldUpdateGeometries=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldUpdateGeometries=!0,this.shouldSetStrokes=!0}hoverOpacityWatcher(t,i){this.shouldSetLabelOpacity=!0,this.shouldDrawInteractionState=!0}labelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0)}showTooltipWatcher(t,i){}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}legendWatcher(t,i){this.shouldUpdateLegend=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideTextures)&&t.hideTextures)===(!(!i||!i.hideTextures)&&i.hideTextures)&&(!(!t||!t.showExperimentalTextures)&&t.showExperimentalTextures)===(!(!i||!i.showExperimentalTextures)&&i.showExperimentalTextures)||(this.shouldSetTextures=!0,this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0,this.shouldDrawInteractionState=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetTextures=!0}clickWatcher(t,i){this.shouldFormatClickHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0}hoverWatcher(t,i){this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"heat-map-"+Vm(),this.heatMapEl.id=this.chartID,this.setTagLevels(),this.prepareData(),this.setDimensions(),this.setColors(),this.prepareScales(),this.validateInteractionKeys(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.formatClickHighlight(),this.formatHoverHighlight(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTextures(),this.setStrokes(),this.setGlobalSelections(),this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.drawGeometries(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawDataLabels(),this.drawLegendElements(),this.setSelectedClass(),this.updateInteractionState(),this.bindInteractivity(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),ub(this.root.node(),this.map.node()),this.setGroupAccessibilityID(),this.onChangeHandler(),this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldSetTextures&&(this.setTextures(),this.shouldSetTextures=!1),this.shouldSetStrokes&&(this.setStrokes(),this.shouldSetStrokes=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldEnterUpdateExit&&(this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateGeometries&&(this.drawGeometries(),this.shouldUpdateGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldSwapXAxis&&(this.drawXAxis(!0),this.shouldSwapXAxis=!1),this.shouldSwapYAxis&&(this.drawYAxis(!0),this.shouldSwapYAxis=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,Yb(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}formatClickHighlight(){this.clickHighlight&&this.clickHighlight.map(t=>{t.xAccessor&&t.yAccessor||(t.xAccessor=t[this.xAccessor]instanceof Date?_b({date:t[this.xAccessor],format:this.xAxis.format,offsetTimezone:!0}):t[this.xAccessor],t.yAccessor=t[this.yAccessor]instanceof Date?_b({date:t[this.yAccessor],format:this.yAxis.format,offsetTimezone:!0}):t[this.yAccessor])})}formatHoverHighlight(){this.hoverHighlight&&(this.hoverHighlight.xAccessor&&this.hoverHighlight.yAccessor||(this.hoverHighlight.xAccessor=this.hoverHighlight[this.xAccessor]instanceof Date?_b({date:this.hoverHighlight[this.xAccessor],format:this.xAxis.format,offsetTimezone:!0}):this.hoverHighlight[this.xAccessor],this.hoverHighlight.yAccessor=this.hoverHighlight[this.yAccessor]instanceof Date?_b({date:this.hoverHighlight[this.yAccessor],format:this.yAxis.format,offsetTimezone:!0}):this.hoverHighlight[this.yAccessor]))}setDimensions(){this.padding="string"==typeof this.padding?Pb(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}validateInteractionKeys(){if(this.interactionKeys&&this.interactionKeys.length){if(this.interactionKeys.includes(this.xAccessor)||this.interactionKeys.includes(this.yAccessor)){const t=[];this.interactionKeys.map(i=>{t.push(i===this.xAccessor?"xAccessor":i===this.yAccessor?"yAccessor":i)}),this.innerInteractionKeys=t}}else this.innerInteractionKeys=["xAccessor","yAccessor"]}prepareScales(){const t=(this.minValueOverride||0===this.minValueOverride)&&this.minValueOverride<yw(this.preppedData,t=>t.valueAccessor)?this.minValueOverride:yw(this.preppedData,t=>t.valueAccessor),i=(this.maxValueOverride||0===this.maxValueOverride)&&this.maxValueOverride>pw(this.preppedData,t=>t.valueAccessor)?this.maxValueOverride:pw(this.preppedData,t=>t.valueAccessor);this.x=Lw().domain(this.xKeyOrder?this.xKeyOrder:this.preppedData.map(t=>t.xAccessor)).range([0,this.innerPaddedWidth]),this.x.padding(this.strokeWidth?this.strokeWidth/this.x.bandwidth():0),this.y=Lw().domain(this.yKeyOrder?this.yKeyOrder:this.preppedData.map(t=>t.yAccessor)).range([0,this.innerPaddedHeight]),this.y.padding(this.strokeWidth?this.strokeWidth/this.y.bandwidth():0),this.heat=Og().domain([t,i]);const s=[],n=[];let r=0;const e=Math.ceil(this.preparedColors.length/2),h=this.colorPalette&&this.colorPalette.includes("diverging"),a=this.colorPalette&&this.colorPalette.includes("dark");this.preparedColors.forEach(t=>{const i=Km(t,r,this.preparedColors,h?"diverging":"sequential");if(h){const t=Ym(i.fillColor),e=Ym(i.textureColor),h=t>e?i.textureColor:i.fillColor,o=t<e?i.textureColor:i.fillColor;this.preparedColors.length%2&&r===(this.preparedColors.length-1)/2?(n.push(a?h:o),s.push(a?o:h)):(s.push(a?h:o),n.push(a?o:h))}else r+1<e?(n.push(this.preparedColors[0]),s.push(this.preparedColors[this.preparedColors.length-1])):(s.push(this.preparedColors[0]),n.push(this.preparedColors[this.preparedColors.length-1]));r++}),this.fillColors=Og().domain([t,i]).range(n),this.strokeColors=Og().domain([t,i]).range(s),this.rawHeat=Og().domain([t,i]).range(this.preparedColors),this.updateCheck=!0}setColors(){this.preparedColors=this.colors?$b(this.colors):Hb(this.colorPalette,this.colorSteps)}setTextures(){const t=this.colorPalette&&this.colorPalette.includes("diverging")?"diverging":"sequential";if(this.accessibility.hideTextures||this.colorSteps>("diverging"===t?11:9)||!this.accessibility.showExperimentalTextures)this.colorArr=this.preparedColors;else{const i=ib({colors:this.preparedColors,rootSVG:this.svg.node(),id:this.chartID,scheme:t,disableTransitions:!this.duration});this.colorArr=i}this.heat.range(this.colorArr)}setStrokes(){const t=Object.assign(Object.assign({},this.clickStyle),{color:void 0}),i=Object.assign(Object.assign({},this.hoverStyle),{color:void 0});this.strokes=tb({root:this.svg.node(),id:this.chartID,colors:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors.range():this.preparedColors,clickStyle:t,hoverStyle:i,strokeOverride:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.strokeColors.range():void 0})}setTableData(){const t=Gb(this,Sb,"heat-map");this.tableData=Rb(this.data,t),this.tableColumns=Object.keys(t)}prepareData(){if(this.updateCheck){this.interpolating=this.preppedData;const t=this.x.domain(),i=this.x.range(),s=this.y.domain(),n=this.y.range();this.interpolating.x=Lw().domain(t).range(i),this.interpolating.y=Lw().domain(s).range(n)}this.preppedData=this.data.map(t=>{const i=Object.assign({},t);return i.valueAccessor=parseFloat(t[this.valueAccessor]),i.xAccessor=t[this.xAccessor]instanceof Date?_b({date:t[this.xAccessor],format:this.xAxis.format,offsetTimezone:!0}):t[this.xAccessor],i.yAccessor=t[this.yAccessor]instanceof Date?_b({date:t[this.yAccessor],format:this.yAxis.format,offsetTimezone:!0}):t[this.yAccessor],i}),this.nest=function(){var t,i,s,n=[],r=[];function e(s,r,h,a){if(r>=n.length)return null!=t&&s.sort(t),null!=i?i(s):s;for(var o,u,c,l=-1,f=s.length,d=n[r++],v=mw(),p=h();++l<f;)(c=v.get(o=d(u=s[l])+""))?c.push(u):v.set(o,[u]);return v.each((function(t,i){a(p,i,e(t,r,h,a))})),p}return s={object:function(t){return e(t,0,bw,Mw)},map:function(t){return e(t,0,kw,xw)},entries:function(t){return function t(s,e){if(++e>n.length)return s;var h,a=r[e-1];return null!=i&&e>=n.length?h=s.entries():(h=[],s.each((function(i,s){h.push({key:s,values:t(i,e)})}))),null!=a?h.sort((function(t,i){return a(t.key,i.key)})):h}(e(t,0,kw,xw),0)},key:function(t){return n.push(t),s},sortKeys:function(t){return r[n.length-1]=t,s},sortValues:function(i){return t=i,s},rollup:function(t){return i=t,s}}}().key(t=>t[this.yAccessor]).entries(this.preppedData),this.datakeys=this.nest.map(t=>t.key)}reSetRoot(){nb({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:zg}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),nb({selection:this.root,duration:this.duration,namespace:"root_reset",easing:zg}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),nb({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:zg}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),Wb(this.chartID,this.width)}drawXAxis(t){Cb({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,top:"top"===this.xAxis.placement,wrapLabel:this.wrapLabel?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:t||!this.xAxis.visible,duration:this.duration,hidePath:this.hideAxisPath})}drawYAxis(t){Cb({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:"right"!==this.yAxis.placement,right:"right"===this.yAxis.placement,format:this.yAxis.format,wrapLabel:this.wrapLabel?this.padding.left||100:"",tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:t||!this.yAxis.visible,duration:this.duration,hidePath:this.hideAxisPath})}setXAxisAccessibility(){gb({rootEle:this.heatMapEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:this.x||!1,xAxisLabel:this.xAxis&&this.xAxis.label||""})}setYAxisAccessibility(){mb({rootEle:this.heatMapEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:this.y||!1,yAxisLabel:this.yAxis&&this.yAxis.label||""})}renderRootElements(){this.svg=aw(this.heatMapEl).select(".visa-viz-d3-heat-map-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.map=this.rootG.append("g").attr("class","map-group"),this.labelG=this.rootG.append("g").attr("class","heat-map-dataLabel-group"),this.legendG=aw(this.heatMapEl).select(".heat-map-legend").append("svg"),this.tooltipG=aw(this.heatMapEl).select(".heat-map-tooltip")}setGlobalSelections(){this.xAxisElement=this.rootG.selectAll(".bottom");const t=this.map.selectAll(".row").data(this.nest,t=>t.key);this.enterRowWrappers=t.enter().append("g"),this.exitRowWrappers=t.exit(),this.updateRowWrappers=t.merge(this.enterRowWrappers);const i=this.updateRowWrappers.selectAll(".grid").data(t=>t.values,t=>t.xAccessor+t.yAccessor);this.enter=i.enter().append("rect"),this.exit=i.exit(),this.update=i.merge(this.enter),this.exitSize=this.exit.size(),this.enterSize=this.enter.size(),this.exitSize+=this.exitRowWrappers.selectAll(".grid").size();const s=this.labelG.selectAll("g").data(this.nest,t=>t.key);this.enteringLabelGroups=s.enter().append("g"),this.exitingLabelGroups=s.exit(),this.updatingLabelGroups=s.merge(this.enteringLabelGroups);const n=this.updatingLabelGroups.selectAll("text").data(t=>t.values,t=>t.xAccessor+t.yAccessor);this.enterLabels=n.enter().append("text"),this.exitLabels=n.exit(),this.updateLabels=n.merge(this.enterLabels)}enterGeometries(){this.enter.interrupt(),this.enterRowWrappers.attr("class","row").classed("entering",!0).attr("cursor",this.suppressEvents?null:this.cursor).each((t,i,s)=>{eb(s[i])}),this.enter.attr("class","grid").each((t,i,s)=>{eb(s[i])}).on("click",this.suppressEvents?null:t=>{this.onClickHandler(t)}).on("mouseover",this.suppressEvents?null:t=>{this.onHoverHandler(t)}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("opacity",0).attr("y",t=>{if(this.interpolating&&void 0===this.interpolating.y(t.yAccessor)){let i=this.y(t.yAccessor);return i+=this.y.bandwidth()*(i/this.y(this.y.domain()[0])),i}return this.interpolating?this.interpolating.y(t.yAccessor):this.y(t.yAccessor)}).attr("height",t=>this.interpolating&&void 0===this.interpolating.y(t.yAccessor)?0:this.interpolating?this.interpolating.y.bandwidth():this.y.bandwidth()).attr("x",t=>{if(this.interpolating&&void 0===this.interpolating.x(t.xAccessor)){let i=this.x(t.xAccessor);return i+=this.x.bandwidth()*(i/this.x(this.x.domain()[this.x.domain().length-1])),i}return this.interpolating?this.interpolating.x(t.xAccessor):this.x(t.xAccessor)}).attr("width",t=>this.interpolating&&void 0===this.interpolating.x(t.xAccessor)?0:this.interpolating?this.interpolating.x.bandwidth():this.x.bandwidth()).attr("rx","circle"===this.shape?this.x.bandwidth():0).attr("ry","circle"===this.shape?this.y.bandwidth():0),this.update.order(),this.enterRowWrappers.order()}updateGeometries(){this.update.interrupt(),this.update.transition("opacity").duration((t,i,s)=>aw(s[i]).classed("entering")?(aw(s[i]).classed("entering",!1),this.duration):0).ease(zg).attr("opacity",t=>Tb(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}exitGeometries(){this.exit.interrupt(),this.exit.transition("exit").duration(this.duration).ease(zg).attr("opacity",0).attr("y",(t,i,s)=>{if(void 0===this.y(t.yAccessor)){const t=aw(s[i]);let n=+t.attr("y");return n+=+t.attr("height")*(n/this.y(this.y.domain()[0])),n}return this.y(t.yAccessor)}).attr("height",t=>void 0===this.y(t.yAccessor)?0:this.y.bandwidth()).attr("x",(t,i,s)=>{if(void 0===this.x(t.xAccessor)){const t=aw(s[i]);let n=+t.attr("x");return n+=+t.attr("width")*(n/this.x(this.x.domain()[this.x.domain().length-1])),n}return this.x(t.xAccessor)}).attr("width",t=>void 0===this.x(t.xAccessor)?0:this.x.bandwidth()),this.exitRowWrappers.selectAll(".grid").transition("exit").duration(this.duration).ease(zg).attr("opacity",0).attr("y",(t,i,s)=>{const n=aw(s[i]);let r=+n.attr("y");return r+=+n.attr("height")*(r/this.y(this.y.domain()[0])),r}).attr("height",0).attr("x",(t,i,s)=>{if(void 0===this.x(t.xAccessor)){const t=aw(s[i]);let n=+t.attr("x");return n+=+t.attr("width")*(n/this.x(this.x.domain()[this.x.domain().length-1])),n}return this.x(t.xAccessor)}).attr("width",t=>void 0===this.x(t.xAccessor)?0:this.x.bandwidth()),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(zg).call(Vb,()=>{const t=xb(this.rootG.node());this.exit.remove(),this.exitRowWrappers.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),kb({parentGNode:this.rootG.node(),focusDidExist:t})})}drawGeometries(){this.updateRowWrappers.transition("update").duration(this.duration).ease(zg).call(Vb,()=>{this.updateRowWrappers.classed("entering",!1)});const t=this.update.classed("geometryIsMoving",(t,i,s)=>Um(aw(s[i]),[{attr:"y",numeric:!0,newValue:this.y(t.yAccessor)},{attr:"height",numeric:!0,newValue:this.y.bandwidth()},{attr:"x",numeric:!0,newValue:this.x(t.xAccessor)},{attr:"width",numeric:!0,newValue:this.x.bandwidth()},{attr:"rx",numeric:!0,newValue:"circle"===this.shape?this.x.bandwidth():0},{attr:"ry",numeric:!0,newValue:"circle"===this.shape?this.y.bandwidth():0}])).transition("update").duration(this.duration).ease(zg).attr("y",t=>this.y(t.yAccessor)).attr("height",this.y.bandwidth()).attr("x",t=>this.x(t.xAccessor)).attr("width",this.x.bandwidth()).attr("rx","circle"===this.shape?this.x.bandwidth():0).attr("ry","circle"===this.shape?this.y.bandwidth():0);!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures||t.attr("fill",t=>this.heat(t[this.valueAccessor])),t.call(Vb,()=>{this.update.classed("geometryIsMoving",!1),this.updateInteractionState(),kb({parentGNode:this.rootG.node()})})}updateInteractionState(){Qm(this.svg.node()),this.update.attr("fill",t=>this.heat(t[this.valueAccessor])).attr("opacity",t=>Tb(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).attr("filter",(t,i,s)=>{if(!this.accessibility.hideStrokes&&!aw(s[i]).classed("geometryIsMoving")){const n=this.clickHighlight&&this.clickHighlight.length>0&&Eb(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&Db(t,this.hoverHighlight,this.innerInteractionKeys),e=!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors(t[this.valueAccessor]):this.rawHeat(t[this.valueAccessor]),h=!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.strokeColors(t[this.valueAccessor]):void 0,a=n?"click":r&&!aw(s[i]).classed("geometryIsMoving")?"hover":"rest";return"hover"===a&&Jm({inputElement:s[i],id:this.chartID,key:t[this.xAccessor]+t[this.yAccessor],strokeWidth:this.hoverStyle.strokeWidth,fill:e,strokeOverride:h}),this.strokes[a+e]}return null}),kb({parentGNode:this.rootG.node()}),this.updateLabels.attr("fill",this.textTreatmentHandler)}setLabelOpacity(){this.processLabelOpacity(this.updateLabels)}processLabelOpacity(t,i){const s=this.dataLabel.visible?1:0,n={width:this.x.bandwidth(),height:this.y.bandwidth()},r=t=>{let i=this.dataLabel.labelAccessor?t[this.dataLabel.labelAccessor]:t.valueAccessor;return i=i instanceof Date?_b({date:i,format:this.dataLabel.format,offsetTimezone:!0}):zb(i,this.dataLabel.format),this.accessibility.showSmallLabels||Bm({text:i,dimensions:n,fontSize:14})?Tb(t,s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:0};i?t.attr("opacity",r):t.each((t,i,s)=>{aw(s[i]).classed("entering")||aw(s[i]).attr("opacity",()=>r(t))})}setSelectedClass(){this.update.classed("highlight",(t,i,s)=>{let n=Tb(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return n=!(!this.clickHighlight||!this.clickHighlight.length)&&n,Ab(s[i],n,this.accessibility.elementsAreInterface),n})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),this.updateLabels.attr("cursor",this.suppressEvents?null:this.cursor)}bindInteractivity(){this.update.on("click",this.suppressEvents?null:t=>{this.onClickHandler(t)}).on("mouseover",this.suppressEvents?null:t=>{this.onHoverHandler(t)}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateLabels.on("click",this.dataLabel.visible&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?t=>this.onHoverHandler(t):null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}enterDataLabels(){this.enteringLabelGroups.attr("class","heat-map-label-wrapper"),this.enterLabels.attr("class","heat-map-dataLabel entering").attr("opacity",0).attr("fill",this.textTreatmentHandler).attr("cursor",this.suppressEvents?null:this.cursor).on("click",this.dataLabel.visible&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?t=>this.onHoverHandler(t):null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?()=>this.onMouseOutHandler():null),Fb({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})}updateDataLabels(){const t=this.updateLabels.transition("opacity").ease(zg).duration((t,i,s)=>aw(s[i]).classed("entering")?this.duration/2:0).delay((t,i,s)=>aw(s[i]).classed("entering")?this.duration/2:0);this.processLabelOpacity(t,!0),t.call(Vb,()=>{this.updateLabels.classed("entering",!1)})}exitDataLabels(){this.exitLabels.transition("exit").ease(zg).duration(this.duration/2).attr("opacity",0).remove(),this.exitingLabelGroups.selectAll("text").transition("exit").ease(zg).duration(this.duration/2).attr("opacity",0).call(Vb,()=>{this.exitingLabelGroups.remove()})}drawDataLabels(){this.updateLabels.attr("fill",this.textTreatmentHandler).text(t=>{const i=this.dataLabel.labelAccessor?t[this.dataLabel.labelAccessor]:t.valueAccessor;return i instanceof Date?_b({date:i,format:this.dataLabel.format,offsetTimezone:!0}):zb(i,this.dataLabel.format)});const t=this.updateLabels.transition("update").ease(zg).duration(this.duration);Fb({root:t,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})}drawLegendElements(){Ib({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.bottom+60,colorArr:this.legend&&"gradient"!==this.legend.type?this.colorArr:this.preparedColors,baseColorArr:this.colorPalette&&this.colorPalette.includes("diverging")?this.strokeColors.range():[this.preparedColors[this.preparedColors.length-1]],hideStrokes:this.accessibility.hideStrokes,scale:this.heat,steps:this.colorSteps,margin:this.margin,padding:this.padding,duration:this.duration,type:this.legend.type,fontSize:12,label:this.legend.labels,format:this.legend.format,hide:!this.legend.visible})}drawAnnotations(){Lb({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.xAccessor,yScale:this.y,yAccessor:this.yAccessor})}setAnnotationAccessibility(){Mb(this.heatMapEl,this.annotations)}setTagLevels(){this.topLevel=sb(this.highestHeadingLevel),this.bottomLevel=sb(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){rb({rootEle:this.heatMapEl,title:this.accessibility.title||this.mainTitle,chartTag:"heat-map",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){ob({node:this.svg.node(),chartTag:"heat-map",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"cell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:Gb(this,Sb,"heat-map"),groupAccessor:this.yAccessor,groupName:"row",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,s)=>{eb(s[i])})}setGeometryAriaLabels(){const t=Gb(this,Sb,"heat-map");this.update.each((i,s,n)=>{hb({node:n[s],geomType:"cell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"row",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),ab({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateRowWrappers.each((t,i,s)=>{ab({node:s[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){cb(this.heatMapEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){lb(this.heatMapEl,this.subTitle)}setChartAccessibilityLongDescription(){fb(this.heatMapEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){db(this.heatMapEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){vb(this.heatMapEl,this.accessibility.purpose)}setChartAccessibilityContext(){pb(this.heatMapEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){yb(this.heatMapEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){wb({rootEle:this.heatMapEl,parentGNode:this.map.node(),chartTag:"heat-map",geomType:"cell",groupName:"row"})}setChartAccessibilityStructureNotes(){bb(this.heatMapEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){jb(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&this.eventsTooltip({data:t,evt:By,isToShow:!0})}onMouseOutHandler(){jb(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){Xb(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){Ob({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor,xAccessor:this.xAccessor,yAccessor:this.yAccessor,chartType:"heat-map"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldFormatClickHighlight&&(this.formatClickHighlight(),this.shouldFormatClickHighlight=!1),this.shouldFormatHoverHighlight&&(this.formatHoverHighlight(),this.shouldFormatHoverHighlight=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s(this.topLevel,{"data-testid":"main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions","data-testid":"sub-title"},this.subTitle),s("div",{class:"heat-map-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"cell",groupName:"row",chartTag:"heat-map",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:!0,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-heat-map-container"}),s("div",{class:"heat-map-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))}init(){const t=Object.keys(Hg);let i=0;const s={strokeWidth:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},wrapLabel:{exception:!1},hoverOpacity:{exception:0}};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:Hg[t[i]]}}get heatMapEl(){return n(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["layoutWatcher"],width:["layoutWatcher"],padding:["layoutWatcher"],margin:["layoutWatcher"],xAccessor:["xAccessorWatcher"],yAccessor:["yAccessorWatcher"],valueAccessor:["groupAccessorWatcher"],xKeyOrder:["xKeyOrderWatcher"],yKeyOrder:["yKeyOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],hideAxisPath:["hideAxisPathWatcher"],colorPalette:["colorsWatcher"],colors:["colorsWatcher"],colorSteps:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],shape:["shapeWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],legend:["legendWatcher"],suppressEvents:["suppressWatcher"],annotations:["annotationsWatcher"],accessibility:["accessibilityWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}heat-map{cursor:default}heat-map .annotations{pointer-events:none}heat-map .annotations .handle{pointer-events:all}heat-map .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}heat-map .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}heat-map .hidden{display:none}heat-map .axis{font-size:12px}heat-map .axis text{fill:#767676}heat-map .axis-label{text-anchor:middle;font:1rem sans-serif}heat-map .axis path{stroke:#767676}heat-map .axis .hidden{visibility:hidden}heat-map .heat-map-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}heat-map .heat-map-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"}};window.VisaChartsLibOSSLicenses=qb();var Bb="http://www.w3.org/1999/xhtml";const Ub={svg:"http://www.w3.org/2000/svg",xhtml:Bb,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zb(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),Ub.hasOwnProperty(i)?{space:Ub[i],local:t}:t}function Jb(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===Bb&&i.documentElement.namespaceURI===Bb?i.createElement(t):i.createElementNS(s,t)}}function Qb(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function tM(t){var i=Zb(t);return(i.local?Qb:Jb)(i)}function iM(){}function sM(t){return null==t?iM:function(){return this.querySelector(t)}}function nM(){return[]}function rM(t){return null==t?nM:function(){return this.querySelectorAll(t)}}function eM(t){return function(){return this.matches(t)}}function hM(t){return new Array(t.length)}function aM(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function oM(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new aM(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function uM(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new aM(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function cM(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function lM(t){return function(){this.removeAttribute(t)}}function fM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dM(t,i){return function(){this.setAttribute(t,i)}}function vM(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function pM(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function yM(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function wM(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gM(t){return function(){this.style.removeProperty(t)}}function mM(t,i,s){return function(){this.style.setProperty(t,i,s)}}function bM(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function MM(t,i){return t.style.getPropertyValue(i)||wM(t).getComputedStyle(t,null).getPropertyValue(i)}function kM(t){return function(){delete this[t]}}function xM(t,i){return function(){this[t]=i}}function AM(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function WM(t){return t.trim().split(/^|\s+/)}function NM(t){return t.classList||new LM(t)}function LM(t){this._node=t,this._names=WM(t.getAttribute("class")||"")}function SM(t,i){for(var s=NM(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function TM(t,i){for(var s=NM(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function EM(t){return function(){SM(this,t)}}function DM(t){return function(){TM(this,t)}}function $M(t,i){return function(){(i.apply(this,arguments)?SM:TM)(this,t)}}function CM(){this.textContent=""}function IM(t){return function(){this.textContent=t}}function OM(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function zM(){this.innerHTML=""}function _M(t){return function(){this.innerHTML=t}}function HM(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function qM(){this.nextSibling&&this.parentNode.appendChild(this)}function PM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function RM(){return null}function XM(){var t=this.parentNode;t&&t.removeChild(this)}function jM(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function FM(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}aM.prototype={constructor:aM,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},LM.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var GM={},VM=null;function YM(t,i,s){return t=KM(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function KM(t,i,s){return function(n){var r=VM;VM=n;try{t.call(this,this.__data__,i,s)}finally{VM=r}}}function BM(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function UM(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function ZM(t,i,s){var n=GM.hasOwnProperty(t.type)?YM:KM;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function JM(t,i,s){var n=wM(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function QM(t,i){return function(){return JM(this,t,i)}}function tk(t,i){return function(){return JM(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(GM={mouseenter:"mouseover",mouseleave:"mouseout"}));var ik=[null];function sk(t,i){this._groups=t,this._parents=i}function nk(){return new sk([[document.documentElement]],ik)}function rk(t){return"string"==typeof t?new sk([[document.querySelector(t)]],[document.documentElement]):new sk([[t]],ik)}function ek(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}sk.prototype=nk.prototype={constructor:sk,select:function(t){"function"!=typeof t&&(t=sM(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new sk(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=rM(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new sk(n,r)},filter:function(t){"function"!=typeof t&&(t=eM(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new sk(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?uM:oM,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new sk(h,n))._enter=a,h._exit=o,h},enter:function(){return new sk(this._enter||this._groups.map(hM),this._parents)},exit:function(){return new sk(this._exit||this._groups.map(hM),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new sk(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=cM);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new sk(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=Zb(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?fM:lM:"function"==typeof i?s.local?yM:pM:s.local?vM:dM)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?gM:"function"==typeof i?bM:mM)(t,i,null==s?"":s)):MM(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?kM:"function"==typeof i?AM:xM)(t,i)):this.node()[t]},classed:function(t,i){var s=WM(t+"");if(arguments.length<2){for(var n=NM(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?$M:i?EM:DM)(s,i))},text:function(t){return arguments.length?this.each(null==t?CM:("function"==typeof t?OM:IM)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?zM:("function"==typeof t?HM:_M)(t)):this.node().innerHTML},raise:function(){return this.each(qM)},lower:function(){return this.each(PM)},append:function(t){var i="function"==typeof t?t:tM(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:tM(t),n=null==i?RM:"function"==typeof i?i:sM(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(XM)},clone:function(t){return this.select(t?FM:jM)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=BM(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?ZM:UM,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?tk:QM)(t,i))}};var hk=function(t){return 1===t.length&&(t=function(t){return function(i,s){return ek(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}(ek).right;function ak(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var ok=Math.sqrt(50),uk=Math.sqrt(10),ck=Math.sqrt(2);function lk(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=ok?10:e>=uk?5:e>=ck?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=ok?10:e>=uk?5:e>=ck?2:1)}function fk(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function dk(){}function vk(t,i){var s=new dk;if(t instanceof dk)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}dk.prototype=vk.prototype={constructor:dk,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var pk=Array.prototype,yk=pk.map,wk=pk.slice,gk={name:"implicit"};function mk(){var t=vk(),i=[],s=[],n=gk;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==gk)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=vk();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=wk.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return mk(i,s).unknown(n)},fk.apply(r,arguments),r}function bk(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function Mk(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function kk(){}var xk="\\s*([+-]?\\d+)\\s*",Ak="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wk="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nk=/^#([0-9a-f]{3,8})$/,Lk=new RegExp("^rgb\\("+[xk,xk,xk]+"\\)$"),Sk=new RegExp("^rgb\\("+[Wk,Wk,Wk]+"\\)$"),Tk=new RegExp("^rgba\\("+[xk,xk,xk,Ak]+"\\)$"),Ek=new RegExp("^rgba\\("+[Wk,Wk,Wk,Ak]+"\\)$"),Dk=new RegExp("^hsl\\("+[Ak,Wk,Wk]+"\\)$"),$k=new RegExp("^hsla\\("+[Ak,Wk,Wk,Ak]+"\\)$"),Ck={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ik(){return this.rgb().formatHex()}function Ok(){return this.rgb().formatRgb()}function zk(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=Nk.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?_k(i):3===s?new Rk(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?Hk(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?Hk(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Lk.exec(t))?new Rk(i[1],i[2],i[3],1):(i=Sk.exec(t))?new Rk(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=Tk.exec(t))?Hk(i[1],i[2],i[3],i[4]):(i=Ek.exec(t))?Hk(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Dk.exec(t))?Gk(i[1],i[2]/100,i[3]/100,1):(i=$k.exec(t))?Gk(i[1],i[2]/100,i[3]/100,i[4]):Ck.hasOwnProperty(t)?_k(Ck[t]):"transparent"===t?new Rk(NaN,NaN,NaN,0):null}function _k(t){return new Rk(t>>16&255,t>>8&255,255&t,1)}function Hk(t,i,s,n){return n<=0&&(t=i=s=NaN),new Rk(t,i,s,n)}function qk(t){return t instanceof kk||(t=zk(t)),t?new Rk((t=t.rgb()).r,t.g,t.b,t.opacity):new Rk}function Pk(t,i,s,n){return 1===arguments.length?qk(t):new Rk(t,i,s,null==n?1:n)}function Rk(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function Xk(){return"#"+Fk(this.r)+Fk(this.g)+Fk(this.b)}function jk(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Fk(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Gk(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new Yk(t,i,s,n)}function Vk(t){if(t instanceof Yk)return new Yk(t.h,t.s,t.l,t.opacity);if(t instanceof kk||(t=zk(t)),!t)return new Yk;if(t instanceof Yk)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new Yk(h,a,o,t.opacity)}function Yk(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function Kk(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function Bk(t){return function(){return t}}function Uk(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):Bk(isNaN(t)?i:t)}bk(kk,zk,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ik,formatHex:Ik,formatHsl:function(){return Vk(this).formatHsl()},formatRgb:Ok,toString:Ok}),bk(Rk,Pk,Mk(kk,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Rk(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Rk(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xk,formatHex:Xk,formatRgb:jk,toString:jk})),bk(Yk,(function(t,i,s,n){return 1===arguments.length?Vk(t):new Yk(t,i,s,null==n?1:n)}),Mk(kk,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Yk(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Yk(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new Rk(Kk(t>=240?t-240:t+120,r,n),Kk(t,r,n),Kk(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Zk=function t(i){var s=function(t){return 1==(t=+t)?Uk:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):Bk(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=Pk(t)).r,(i=Pk(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=Uk(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function Jk(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function Qk(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=hx(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function tx(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function ix(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function sx(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=hx(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var nx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rx=new RegExp(nx.source,"g");function ex(t,i){var s,n,r,e=nx.lastIndex=rx.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=nx.exec(t))&&(n=rx.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:ix(s,n)})),e=rx.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function hx(t,i){var s,n=typeof i;return null==i||"boolean"===n?Bk(i):("number"===n?ix:"string"===n?(s=zk(i))?(i=s,Zk):ex:i instanceof zk?Zk:i instanceof Date?tx:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?Jk:Array.isArray(i)?Qk:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?sx:ix)(t,i)}function ax(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var ox,ux,cx,lx,fx=180/Math.PI,dx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vx(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*fx,skewX:Math.atan(o)*fx,scaleX:h,scaleY:a}}function px(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:ix(t,r)},{i:o-2,x:ix(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:ix(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:ix(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:ix(t,s)},{i:a-2,x:ix(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var yx=px((function(t){return"none"===t?dx:(ox||(ox=document.createElement("DIV"),ux=document.documentElement,cx=document.defaultView),ox.style.transform=t,t=cx.getComputedStyle(ux.appendChild(ox),null).getPropertyValue("transform"),ux.removeChild(ox),vx(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),wx=px((function(t){return null==t?dx:(lx||(lx=document.createElementNS("http://www.w3.org/2000/svg","g")),lx.setAttribute("transform",t),(t=lx.transform.baseVal.consolidate())?vx((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):dx)}),", ",")",")");function gx(t){return+t}var mx=[0,1];function bx(t){return t}function Mx(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function kx(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function xx(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=Mx(r,n),e=s(h,e)):(n=Mx(n,r),e=s(e,h)),function(t){return e(n(t))}}function Ax(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=Mx(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=hk(t,i,1,n)-1;return e[s](r[s](i))}}function Wx(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Nx(t,i){return function(){var t,i,s,n,r,e,h=mx,a=mx,o=hx,u=bx;function c(){return n=Math.min(h.length,a.length)>2?Ax:xx,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),ix)))(s)))},l.domain=function(t){return arguments.length?(h=yk.call(t,gx),u===bx||(u=kx(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=wk.call(t),c()):a.slice()},l.rangeRound=function(t){return a=wk.call(t),o=ax,c()},l.clamp=function(t){return arguments.length?(u=t?kx(h):bx,l):u!==bx},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function Lx(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function Sx(t){return(t=Lx(Math.abs(t)))?t[1]:NaN}var Tx,Ex=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dx(t){if(!(i=Ex.exec(t)))throw new Error("invalid format: "+t);var i;return new $x({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function $x(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Cx(t,i){var s=Lx(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}Dx.prototype=$x.prototype,$x.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Ix={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return Cx(100*t,i)},r:Cx,s:function(t,i){var s=Lx(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(Tx=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+Lx(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Ox(t){return t}var zx,_x,Hx,qx=Array.prototype.map,Px=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Rx(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=lk(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=function(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=ok?r*=10:e>=uk?r*=5:e>=ck&&(r*=2),i<t?-r:r}(t,i,s);switch((n=Dx(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Sx(i)/3)))-Sx(Math.abs(t)))}(e,h))||(n.precision=r),Hx(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,Sx(i)-Sx(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-Sx(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return _x(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=lk(a,o,s))>0?n=lk(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=lk(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}zx=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?Ox:(i=qx.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Ox:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(qx.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=Dx(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):Ix[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?o:"",M=Ix[g],k=/[defgprs%]/.test(g);function x(t){var r,e,o,f=m,x=b;if("c"===g)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===g?Px[8+Tx/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var W=f.length+t.length+x.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=n(N+t,N.length?v-x.length:1/0),N=""),s){case"<":t=f+t+x+N;break;case"=":t=f+N+t+x;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+x+N.slice(W);break;default:t=N+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=Dx(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(Sx(i)/3))),r=Math.pow(10,-n),e=Px[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),_x=zx.format,Hx=zx.formatPrefix;var Xx={value:function(){}};function jx(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Fx(n)}function Fx(t){this._=t}function Gx(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function Vx(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function Yx(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=Xx,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}Fx.prototype=jx.prototype={constructor:Fx,on:function(t,i){var s,n=this._,r=Gx(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=Yx(n[s],t.name,i);else if(null==i)for(s in n)n[s]=Yx(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=Vx(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new Fx(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var Kx,Bx,Ux=0,Zx=0,Jx=0,Qx=0,tA=0,iA=0,sA="object"==typeof performance&&performance.now?performance:Date,nA="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function rA(){return tA||(nA(eA),tA=sA.now()+iA)}function eA(){tA=0}function hA(){this._call=this._time=this._next=null}function aA(t,i,s){var n=new hA;return n.restart(t,i,s),n}function oA(){tA=(Qx=sA.now())+iA,Ux=Zx=0;try{!function(){rA(),++Ux;for(var t,i=Kx;i;)(t=tA-i._time)>=0&&i._call.call(null,t),i=i._next;--Ux}()}finally{Ux=0,function(){for(var t,i,s=Kx,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:Kx=i);Bx=t,cA(n)}(),tA=0}}function uA(){var t=sA.now(),i=t-Qx;i>1e3&&(iA-=i,Qx=t)}function cA(t){Ux||(Zx&&(Zx=clearTimeout(Zx)),t-tA>24?(t<1/0&&(Zx=setTimeout(oA,t-sA.now()-iA)),Jx&&(Jx=clearInterval(Jx))):(Jx||(Qx=sA.now(),Jx=setInterval(uA,1e3)),Ux=1,nA(oA)))}function lA(t,i,s){var n=new hA;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}hA.prototype=aA.prototype={constructor:hA,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?rA():+s)+(null==i?0:+i),this._next||Bx===this||(Bx?Bx._next=this:Kx=this,Bx=this),this._call=t,this._time=s,cA()},stop:function(){this._call&&(this._call=null,this._time=1/0,cA())}};var fA=jx("start","end","interrupt"),dA=[];function vA(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return lA(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(lA((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=aA((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:fA,tween:dA,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function pA(t,i){var s=wA(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function yA(t,i){var s=wA(t,i);if(s.state>2)throw new Error("too late; already started");return s}function wA(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function gA(t,i){var s,n;return function(){var r=yA(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function mA(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=yA(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function bA(t,i,s){var n=t._id;return t.each((function(){var t=yA(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return wA(t,n).value[i]}}function MA(t,i){var s;return("number"==typeof i?ix:i instanceof zk?Zk:(s=zk(i))?(i=s,Zk):ex)(t,i)}function kA(t){return function(){this.removeAttribute(t)}}function xA(t){return function(){this.removeAttributeNS(t.space,t.local)}}function AA(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function WA(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function NA(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function LA(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function SA(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function TA(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function EA(t,i){return function(){pA(this,t).delay=+i.apply(this,arguments)}}function DA(t,i){return i=+i,function(){pA(this,t).delay=i}}function $A(t,i){return function(){yA(this,t).duration=+i.apply(this,arguments)}}function CA(t,i){return i=+i,function(){yA(this,t).duration=i}}function IA(t,i){if("function"!=typeof i)throw new Error;return function(){yA(this,t).ease=i}}function OA(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?pA:yA;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var zA=nk.prototype.constructor;function _A(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var HA=0;function qA(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function PA(){return++HA}var RA=nk.prototype;qA.prototype=function(t){return nk().transition(t)}.prototype={constructor:qA,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=sM(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,vA(l[f],i,s,f,l,wA(a,s)));return new qA(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=rM(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=wA(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&vA(f,i,s,p,d,v);e.push(d),h.push(o)}return new qA(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=eM(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new qA(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new qA(e,this._parents,this._name,this._id)},selection:function(){return new zA(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=PA(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=wA(h,i);vA(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new qA(n,this._parents,t,s)},call:RA.call,nodes:RA.nodes,node:RA.node,size:RA.size,empty:RA.empty,each:RA.each,on:function(t,i){var s=this._id;return arguments.length<2?wA(this.node(),s).on.on(t):this.each(OA(s,t,i))},attr:function(t,i){var s=Zb(t),n="transform"===s?wx:MA;return this.attrTween(t,"function"==typeof i?(s.local?LA:NA)(s,n,bA(this,"attr."+t,i)):null==i?(s.local?xA:kA)(s):(s.local?WA:AA)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=Zb(t);return this.tween(s,(n.local?SA:TA)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?yx:MA;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=MM(this,t),h=(this.style.removeProperty(t),MM(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=MM(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=MM(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,bA(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=MM(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,_A(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(bA(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=wA(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?gA:mA)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?EA:DA)(i,t)):wA(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?$A:CA)(i,t)):wA(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(IA(i,t)):wA(this.node(),i).ease}};var XA={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function jA(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return XA.time=rA(),XA;return s}nk.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},nk.prototype.transition=function(t){var i,s;t instanceof qA?(i=t._id,t=t._name):(i=PA(),(s=XA).time=rA(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&vA(h,t,i,u,a,s||jA(h,i));return new qA(n,this._parents,t,i)};const{getLicenses:FA,drawTooltip:GA,initTooltipStyle:VA}=r,YA=class{constructor(s){t(this,s),this.height=100,this.width=60,this.data=[{}],this.ordinalAccessor="label",this.valueAccessor="value",this.showHeader=!0,this.showLabel=!1,this.enableColor=!0,this.dataFormat="0,0.00",this.threshold=.1,this.colors=["#180F58","#B7C9E7","#B7B7B7","#E2AEBC","#D60036"],this.indicatorLabels=["High","Above","Avg.","Below","Poor"],this.defaultColor=["#180F58"],this.wrapLabel=!0,this.alignLabel="center",this.padding={top:.08*this.height,bottom:.25*this.height,right:.01*this.width,left:.01*this.width},this.indicatorWidth=this.height/4,this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}componentWillLoad(){this.innerHeight=this.height-this.padding.top-this.padding.bottom,this.innerWidth=this.width-this.padding.left-this.padding.right}componentWillUpdate(){this.drawChart()}componentDidLoad(){this.drawChart(),this.setTooltipInitialStyle()}drawChart(){this.reSetRoot(),this.y=function t(){var i=Nx(bx,bx);return i.copy=function(){return Wx(i,t())},fk.apply(i,arguments),Rx(i)}().domain([-this.threshold,this.threshold]).range([this.innerHeight-this.indicatorWidth/6,0]),this.x=function t(){var i,s,n=mk().unknown(void 0),r=n.domain,e=n.range,h=[0,1],a=!1,o=0,u=0,c=.5;function l(){var t=r().length,n=h[1]<h[0],l=h[n-0],f=h[1-n];i=(f-l)/Math.max(1,t-o+2*u),a&&(i=Math.floor(i)),l+=(f-l-i*(t-o))*c,s=i*(1-o),a&&(l=Math.round(l),s=Math.round(s));var d=ak(t).map((function(t){return l+i*t}));return e(n?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(h=[+t[0],+t[1]],l()):h.slice()},n.rangeRound=function(t){return h=[+t[0],+t[1]],a=!0,l()},n.bandwidth=function(){return s},n.step=function(){return i},n.round=function(t){return arguments.length?(a=!!t,l()):a},n.padding=function(t){return arguments.length?(o=Math.min(1,u=+t),l()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),l()):o},n.paddingOuter=function(t){return arguments.length?(u=+t,l()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.copy=function(){return t(r(),h).round(a).paddingInner(o).paddingOuter(u).align(c)},fk.apply(l(),arguments)}().domain(this.data.map(t=>t[this.ordinalAccessor])).range([0,this.innerWidth]).padding(.2),this.showLabel&&this.drawLabel(),this.drawIndicator()}reSetRoot(){this.svg&&this.svg.remove(),this.svg=rk(this.indicatorChartEl).select("#visa-viz-d3-indicator-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.rootG=this.svg.append("g").attr("id","visa-viz-padding-container-g").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`).attr("class","indicator"),this.tooltipG=rk(this.indicatorChartEl).select(".indicator-tooltip")}drawLabel(){this.rootG.append("g").attr("class","indicator-label").attr("transform",`translate(0, ${this.innerHeight})`).selectAll("text").data(this.data).enter().append("text").attr("dy","1.5em").attr("dx",t=>this.x(t[this.ordinalAccessor])/2).text(t=>this.getLabel(t[this.valueAccessor]))}drawIndicator(){let t=this.rootG.append("g").attr("class","indicator-chart").selectAll("g").data(this.data).enter().append("g");[-2,-1,0,1,2].map(i=>{t.append("rect").attr("x",t=>this.x(t[this.ordinalAccessor])).attr("y",()=>this.y(this.threshold/2*i)-this.indicatorWidth/4).attr("height",this.indicatorWidth/2).attr("width",.8*this.indicatorWidth).attr("fill","#E6E6E6")}),t.append("rect").attr("x",t=>this.x(t[this.ordinalAccessor])-.1*this.indicatorWidth).attr("y",t=>this.y(this.getLevel(t[this.valueAccessor]))-this.indicatorWidth/4).attr("height",this.indicatorWidth/2).attr("width",this.indicatorWidth).attr("fill",t=>this.enableColor?this.getColor(t[this.valueAccessor]):this.defaultColor).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler())}getLevel(t){return t>=this.threshold?this.threshold:t>=this.threshold/2?this.threshold/2:t>-this.threshold/2?0:t>-this.threshold?-this.threshold/2:-this.threshold}getLabel(t){return t>=this.threshold?this.indicatorLabels[0]:t>=this.threshold/2?this.indicatorLabels[1]:t>-this.threshold/2?this.indicatorLabels[2]:t>-this.threshold?this.indicatorLabels[3]:this.indicatorLabels[4]}getColor(t){return t>=this.threshold?this.colors[0]:t>=this.threshold/2?this.colors[1]:t>-this.threshold/2?this.colors[2]:t>-this.threshold?this.colors[3]:this.colors[4]}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){this.hoverFunc.emit(t),this.eventsTooltip({data:t,evt:VM,isToShow:!0})}onMouseOutHandler(){this.mouseOutFunc.emit(),this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){VA(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){GA({root:this.tooltipG,data:t,event:i,isToShow:s,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})}render(){return s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s("div",{class:"visa-ui-text--body",style:{visibility:this.showHeader?"visible":"hidden",width:this.wrapLabel?`${1.5*this.indicatorWidth}`+"px":"auto",textAlign:this.alignLabel}},this.data[0][this.ordinalAccessor]),s("div",{class:"indicator-tooltip vcl-tooltip",style:{display:"block"}}),s("div",{id:"visa-viz-d3-indicator-container"})))}get indicatorChartEl(){return n(this)}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}.indicator .indicator-grid line{stroke:#767676;stroke-opacity:1}.indicator .indicator-grid path{stroke-width:0;stroke:#767676}.indicator .indicator-grid text{fill:#767676}.indicator .indicator-label{font-size:0.8em;fill:#767676;text-anchor:start}.indicator .indicator-chart{stroke:#767676}.indicator .indicator-chart rect{stroke:none}"}};window.VisaChartsLibOSSLicenses=FA();var KA="http://www.w3.org/1999/xhtml";const BA={svg:"http://www.w3.org/2000/svg",xhtml:KA,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function UA(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),BA.hasOwnProperty(i)?{space:BA[i],local:t}:t}function ZA(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===KA&&i.documentElement.namespaceURI===KA?i.createElement(t):i.createElementNS(s,t)}}function JA(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function QA(t){var i=UA(t);return(i.local?JA:ZA)(i)}function tW(){}function iW(t){return null==t?tW:function(){return this.querySelector(t)}}function sW(){return[]}function nW(t){return null==t?sW:function(){return this.querySelectorAll(t)}}function rW(t){return function(){return this.matches(t)}}function eW(t){return new Array(t.length)}function hW(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function aW(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new hW(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function oW(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new hW(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function uW(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function cW(t){return function(){this.removeAttribute(t)}}function lW(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fW(t,i){return function(){this.setAttribute(t,i)}}function dW(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function vW(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function pW(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function yW(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function wW(t){return function(){this.style.removeProperty(t)}}function gW(t,i,s){return function(){this.style.setProperty(t,i,s)}}function mW(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function bW(t,i){return t.style.getPropertyValue(i)||yW(t).getComputedStyle(t,null).getPropertyValue(i)}function MW(t){return function(){delete this[t]}}function kW(t,i){return function(){this[t]=i}}function xW(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function AW(t){return t.trim().split(/^|\s+/)}function WW(t){return t.classList||new NW(t)}function NW(t){this._node=t,this._names=AW(t.getAttribute("class")||"")}function LW(t,i){for(var s=WW(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function SW(t,i){for(var s=WW(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function TW(t){return function(){LW(this,t)}}function EW(t){return function(){SW(this,t)}}function DW(t,i){return function(){(i.apply(this,arguments)?LW:SW)(this,t)}}function $W(){this.textContent=""}function CW(t){return function(){this.textContent=t}}function IW(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function OW(){this.innerHTML=""}function zW(t){return function(){this.innerHTML=t}}function _W(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function HW(){this.nextSibling&&this.parentNode.appendChild(this)}function qW(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function PW(){return null}function RW(){var t=this.parentNode;t&&t.removeChild(this)}function XW(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function jW(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}hW.prototype={constructor:hW,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},NW.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var FW={},GW=null;function VW(t,i,s){return t=YW(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function YW(t,i,s){return function(n){var r=GW;GW=n;try{t.call(this,this.__data__,i,s)}finally{GW=r}}}function KW(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function BW(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function UW(t,i,s){var n=FW.hasOwnProperty(t.type)?VW:YW;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function ZW(t,i,s){var n=yW(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function JW(t,i){return function(){return ZW(this,t,i)}}function QW(t,i){return function(){return ZW(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(FW={mouseenter:"mouseover",mouseleave:"mouseout"}));var tN=[null];function iN(t,i){this._groups=t,this._parents=i}function sN(){return new iN([[document.documentElement]],tN)}function nN(t){return"string"==typeof t?new iN([[document.querySelector(t)]],[document.documentElement]):new iN([[t]],tN)}function rN(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}iN.prototype=sN.prototype={constructor:iN,select:function(t){"function"!=typeof t&&(t=iW(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new iN(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=nW(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new iN(n,r)},filter:function(t){"function"!=typeof t&&(t=rW(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new iN(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?oW:aW,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new iN(h,n))._enter=a,h._exit=o,h},enter:function(){return new iN(this._enter||this._groups.map(eW),this._parents)},exit:function(){return new iN(this._exit||this._groups.map(eW),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new iN(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=uW);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new iN(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=UA(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?lW:cW:"function"==typeof i?s.local?pW:vW:s.local?dW:fW)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?wW:"function"==typeof i?mW:gW)(t,i,null==s?"":s)):bW(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?MW:"function"==typeof i?xW:kW)(t,i)):this.node()[t]},classed:function(t,i){var s=AW(t+"");if(arguments.length<2){for(var n=WW(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?DW:i?TW:EW)(s,i))},text:function(t){return arguments.length?this.each(null==t?$W:("function"==typeof t?IW:CW)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?OW:("function"==typeof t?_W:zW)(t)):this.node().innerHTML},raise:function(){return this.each(HW)},lower:function(){return this.each(qW)},append:function(t){var i="function"==typeof t?t:QA(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:QA(t),n=null==i?PW:"function"==typeof i?i:iW(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(RW)},clone:function(t){return this.select(t?jW:XW)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=KW(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?UW:BW,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?QW:JW)(t,i))}};var eN=function(t){return 1===t.length&&(t=function(t){return function(i,s){return rN(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}(rN).right;function hN(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var aN=Math.sqrt(50),oN=Math.sqrt(10),uN=Math.sqrt(2);function cN(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=aN?10:e>=oN?5:e>=uN?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=aN?10:e>=oN?5:e>=uN?2:1)}var lN=new Date,fN=new Date;function dN(t,i,s,n){function r(i){return t(i=0===arguments.length?new Date:new Date(+i)),i}return r.floor=function(i){return t(i=new Date(+i)),i},r.ceil=function(s){return t(s=new Date(s-1)),i(s,1),t(s),s},r.round=function(t){var i=r(t),s=r.ceil(t);return t-i<s-t?i:s},r.offset=function(t,s){return i(t=new Date(+t),null==s?1:Math.floor(s)),t},r.range=function(s,n,e){var h,a=[];if(s=r.ceil(s),e=null==e?1:Math.floor(e),!(s<n&&e>0))return a;do{a.push(h=new Date(+s)),i(s,e),t(s)}while(h<s&&s<n);return a},r.filter=function(s){return dN((function(i){if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;i(t,-1),!s(t););else for(;--n>=0;)for(;i(t,1),!s(t););}))},s&&(r.count=function(i,n){return lN.setTime(+i),fN.setTime(+n),t(lN),t(fN),Math.floor(s(lN,fN))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(n?function(i){return n(i)%t==0}:function(i){return r.count(0,i)%t==0}):r:null}),r}var vN=dN((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,i){t.setTime(+t+36e5*i)}),(function(t,i){return(i-t)/36e5}),(function(t){return t.getHours()})),pN=dN((function(t){t.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}));function yN(t){return dN((function(i){i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+7*i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var wN=yN(0),gN=(yN(1),yN(2),yN(3),yN(4),yN(5),yN(6),dN((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,i){t.setMonth(t.getMonth()+i)}),(function(t,i){return i.getMonth()-t.getMonth()+12*(i.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),mN=dN((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,i){t.setFullYear(t.getFullYear()+i)}),(function(t,i){return i.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));function bN(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function MN(){}function kN(t,i){var s=new MN;if(t instanceof MN)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}function xN(){var t,i,s,n=[],r=[];function e(s,r,h,a){if(r>=n.length)return null!=t&&s.sort(t),null!=i?i(s):s;for(var o,u,c,l=-1,f=s.length,d=n[r++],v=kN(),p=h();++l<f;)(c=v.get(o=d(u=s[l])+""))?c.push(u):v.set(o,[u]);return v.each((function(t,i){a(p,i,e(t,r,h,a))})),p}return s={object:function(t){return e(t,0,AN,WN)},map:function(t){return e(t,0,NN,LN)},entries:function(t){return function t(s,e){if(++e>n.length)return s;var h,a=r[e-1];return null!=i&&e>=n.length?h=s.entries():(h=[],s.each((function(i,s){h.push({key:s,values:t(i,e)})}))),null!=a?h.sort((function(t,i){return a(t.key,i.key)})):h}(e(t,0,NN,LN),0)},key:function(t){return n.push(t),s},sortKeys:function(t){return r[n.length-1]=t,s},sortValues:function(i){return t=i,s},rollup:function(t){return i=t,s}}}function AN(){return{}}function WN(t,i,s){t[i]=s}function NN(){return kN()}function LN(t,i,s){t.set(i,s)}mN.every=function(t){return isFinite(t=Math.floor(t))&&t>0?dN((function(i){i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)}),(function(i,s){i.setFullYear(i.getFullYear()+s*t)})):null},MN.prototype=kN.prototype={constructor:MN,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var SN=Array.prototype,TN=SN.map,EN=SN.slice,DN={name:"implicit"};function $N(){var t=kN(),i=[],s=[],n=DN;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==DN)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=kN();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=EN.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return $N(i,s).unknown(n)},bN.apply(r,arguments),r}function CN(){var t,i,s=$N().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=hN(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return CN(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},bN.apply(c(),arguments)}function IN(t){var i=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return IN(i())},t}function ON(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function zN(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function _N(){}var HN="\\s*([+-]?\\d+)\\s*",qN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",PN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RN=/^#([0-9a-f]{3,8})$/,XN=new RegExp("^rgb\\("+[HN,HN,HN]+"\\)$"),jN=new RegExp("^rgb\\("+[PN,PN,PN]+"\\)$"),FN=new RegExp("^rgba\\("+[HN,HN,HN,qN]+"\\)$"),GN=new RegExp("^rgba\\("+[PN,PN,PN,qN]+"\\)$"),VN=new RegExp("^hsl\\("+[qN,PN,PN]+"\\)$"),YN=new RegExp("^hsla\\("+[qN,PN,PN,qN]+"\\)$"),KN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function BN(){return this.rgb().formatHex()}function UN(){return this.rgb().formatRgb()}function ZN(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=RN.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?JN(i):3===s?new sL(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?QN(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?QN(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=XN.exec(t))?new sL(i[1],i[2],i[3],1):(i=jN.exec(t))?new sL(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=FN.exec(t))?QN(i[1],i[2],i[3],i[4]):(i=GN.exec(t))?QN(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=VN.exec(t))?hL(i[1],i[2]/100,i[3]/100,1):(i=YN.exec(t))?hL(i[1],i[2]/100,i[3]/100,i[4]):KN.hasOwnProperty(t)?JN(KN[t]):"transparent"===t?new sL(NaN,NaN,NaN,0):null}function JN(t){return new sL(t>>16&255,t>>8&255,255&t,1)}function QN(t,i,s,n){return n<=0&&(t=i=s=NaN),new sL(t,i,s,n)}function tL(t){return t instanceof _N||(t=ZN(t)),t?new sL((t=t.rgb()).r,t.g,t.b,t.opacity):new sL}function iL(t,i,s,n){return 1===arguments.length?tL(t):new sL(t,i,s,null==n?1:n)}function sL(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function nL(){return"#"+eL(this.r)+eL(this.g)+eL(this.b)}function rL(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function eL(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function hL(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new oL(t,i,s,n)}function aL(t){if(t instanceof oL)return new oL(t.h,t.s,t.l,t.opacity);if(t instanceof _N||(t=ZN(t)),!t)return new oL;if(t instanceof oL)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new oL(h,a,o,t.opacity)}function oL(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function uL(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function cL(t){return function(){return t}}function lL(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):cL(isNaN(t)?i:t)}ON(_N,ZN,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:BN,formatHex:BN,formatHsl:function(){return aL(this).formatHsl()},formatRgb:UN,toString:UN}),ON(sL,iL,zN(_N,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new sL(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new sL(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nL,formatHex:nL,formatRgb:rL,toString:rL})),ON(oL,(function(t,i,s,n){return 1===arguments.length?aL(t):new oL(t,i,s,null==n?1:n)}),zN(_N,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new oL(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new oL(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new sL(uL(t>=240?t-240:t+120,r,n),uL(t,r,n),uL(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const fL=function t(i){var s=function(t){return 1==(t=+t)?lL:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):cL(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=iL(t)).r,(i=iL(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=lL(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function dL(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function vL(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=ML(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function pL(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function yL(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function wL(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=ML(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var gL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mL=new RegExp(gL.source,"g");function bL(t,i){var s,n,r,e=gL.lastIndex=mL.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=gL.exec(t))&&(n=mL.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:yL(s,n)})),e=mL.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function ML(t,i){var s,n=typeof i;return null==i||"boolean"===n?cL(i):("number"===n?yL:"string"===n?(s=ZN(i))?(i=s,fL):bL:i instanceof ZN?fL:i instanceof Date?pL:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?dL:Array.isArray(i)?vL:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?wL:yL)(t,i)}function kL(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var xL,AL,WL,NL,LL=180/Math.PI,SL={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function TL(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*LL,skewX:Math.atan(o)*LL,scaleX:h,scaleY:a}}function EL(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:yL(t,r)},{i:o-2,x:yL(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:yL(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:yL(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:yL(t,s)},{i:a-2,x:yL(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var DL=EL((function(t){return"none"===t?SL:(xL||(xL=document.createElement("DIV"),AL=document.documentElement,WL=document.defaultView),xL.style.transform=t,t=WL.getComputedStyle(AL.appendChild(xL),null).getPropertyValue("transform"),AL.removeChild(xL),TL(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),$L=EL((function(t){return null==t?SL:(NL||(NL=document.createElementNS("http://www.w3.org/2000/svg","g")),NL.setAttribute("transform",t),(t=NL.transform.baseVal.consolidate())?TL((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):SL)}),", ",")",")");function CL(t){return+t}var IL=[0,1];function OL(t){return t}function zL(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function _L(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function HL(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=zL(r,n),e=s(h,e)):(n=zL(n,r),e=s(e,h)),function(t){return e(n(t))}}function qL(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=zL(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=eN(t,i,1,n)-1;return e[s](r[s](i))}}function PL(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function RL(t,i){return function(){var t,i,s,n,r,e,h=IL,a=IL,o=ML,u=OL;function c(){return n=Math.min(h.length,a.length)>2?qL:HL,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),yL)))(s)))},l.domain=function(t){return arguments.length?(h=TN.call(t,CL),u===OL||(u=_L(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=EN.call(t),c()):a.slice()},l.rangeRound=function(t){return a=EN.call(t),o=kL,c()},l.clamp=function(t){return arguments.length?(u=t?_L(h):OL,l):u!==OL},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function XL(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function jL(t){return(t=XL(Math.abs(t)))?t[1]:NaN}var FL,GL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function VL(t){if(!(i=GL.exec(t)))throw new Error("invalid format: "+t);var i;return new YL({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function YL(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function KL(t,i){var s=XL(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}VL.prototype=YL.prototype,YL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const BL={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return KL(100*t,i)},r:KL,s:function(t,i){var s=XL(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(FL=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+XL(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function UL(t){return t}var ZL,JL,QL,tS=Array.prototype.map,iS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function sS(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=cN(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=function(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=aN?r*=10:e>=oN?r*=5:e>=uN&&(r*=2),i<t?-r:r}(t,i,s);switch((n=VL(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(jL(i)/3)))-jL(Math.abs(t)))}(e,h))||(n.precision=r),QL(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,jL(i)-jL(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-jL(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return JL(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=cN(a,o,s))>0?n=cN(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=cN(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function nS(){var t=RL(OL,OL);return t.copy=function(){return PL(t,nS())},bN.apply(t,arguments),sS(t)}ZL=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?UL:(i=tS.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?UL:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(tS.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=VL(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):BL[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?o:"",M=BL[g],k=/[defgprs%]/.test(g);function x(t){var r,e,o,f=m,x=b;if("c"===g)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===g?iS[8+FL/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var W=f.length+t.length+x.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=n(N+t,N.length?v-x.length:1/0),N=""),s){case"<":t=f+t+x+N;break;case"=":t=f+N+t+x;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+x+N.slice(W);break;default:t=N+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=VL(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(jL(i)/3))),r=Math.pow(10,-n),e=iS[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),JL=ZL.format,QL=ZL.formatPrefix;var rS=Math.PI,eS=2*rS,hS=eS-1e-6;function aS(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function oS(){return new aS}function uS(t){return function(){return t}}function cS(t){this._context=t}function lS(t){return new cS(t)}function fS(t){return t[0]}function dS(t){return t[1]}function vS(){var t=fS,i=dS,s=uS(!0),n=null,r=lS,e=null;function h(h){var a,o,u,c=h.length,l=!1;for(null==n&&(e=r(u=oS())),a=0;a<=c;++a)!(a<c&&s(o=h[a],a,h))===l&&((l=!l)?e.lineStart():e.lineEnd()),l&&e.point(+t(o,a,h),+i(o,a,h));if(u)return e=null,u+""||null}return h.x=function(i){return arguments.length?(t="function"==typeof i?i:uS(+i),h):t},h.y=function(t){return arguments.length?(i="function"==typeof t?t:uS(+t),h):i},h.defined=function(t){return arguments.length?(s="function"==typeof t?t:uS(!!t),h):s},h.curve=function(t){return arguments.length?(r=t,null!=n&&(e=r(n)),h):r},h.context=function(t){return arguments.length?(null==t?n=e=null:e=r(n=t),h):n},h}aS.prototype=oS.prototype={constructor:aS,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,s,n){this._+="Q"+ +t+","+ +i+","+(this._x1=+s)+","+(this._y1=+n)},bezierCurveTo:function(t,i,s,n,r,e){this._+="C"+ +t+","+ +i+","+ +s+","+ +n+","+(this._x1=+r)+","+(this._y1=+e)},arcTo:function(t,i,s,n,r){var e=this._x1,h=this._y1,a=(s=+s)-(t=+t),o=(n=+n)-(i=+i),u=e-t,c=h-i,l=u*u+c*c;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(l>1e-6)if(Math.abs(c*a-o*u)>1e-6&&r){var f=s-e,d=n-h,v=a*a+o*o,p=f*f+d*d,y=Math.sqrt(v),w=Math.sqrt(l),g=r*Math.tan((rS-Math.acos((v+l-p)/(2*y*w)))/2),m=g/w,b=g/y;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*u)+","+(i+m*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>u*d)+","+(this._x1=t+b*a)+","+(this._y1=i+b*o)}else this._+="L"+(this._x1=t)+","+(this._y1=i)},arc:function(t,i,s,n,r,e){t=+t,i=+i,e=!!e;var h=(s=+s)*Math.cos(n),a=s*Math.sin(n),o=t+h,u=i+a,c=1^e,l=e?n-r:r-n;if(s<0)throw new Error("negative radius: "+s);null===this._x1?this._+="M"+o+","+u:(Math.abs(this._x1-o)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+o+","+u),s&&(l<0&&(l=l%eS+eS),l>hS?this._+="A"+s+","+s+",0,1,"+c+","+(t-h)+","+(i-a)+"A"+s+","+s+",0,1,"+c+","+(this._x1=o)+","+(this._y1=u):l>1e-6&&(this._+="A"+s+","+s+",0,"+ +(l>=rS)+","+c+","+(this._x1=t+s*Math.cos(r))+","+(this._y1=i+s*Math.sin(r))))},rect:function(t,i,s,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +s+"v"+ +n+"h"+-s+"Z"},toString:function(){return this._}},cS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}};const{propDefaultValues:pS}=r;class yS{}function wS(t){return 1-Math.sqrt(1-t*t)}yS.mainTitle="Parallel Plot Title",yS.subTitle="This is the parallel plot's subtitle",yS.height=300,yS.width=500,yS.margin={top:3,bottom:3,right:5,left:5},yS.padding={top:20,bottom:50,right:100,left:75},yS.ordinalAccessor="label",yS.valueAccessor="value",yS.seriesAccessor="series",yS.accessibility=pS.accessibility,yS.animationConfig=pS.animationConfig,yS.highestHeadingLevel=pS.highestHeadingLevel,yS.xAxis=pS.xAxis,yS.yAxis=pS.yAxis,yS.showBaselineX=pS.showBaselineFalse,yS.wrapLabel=pS.wrapLabel,yS.colorPalette=pS.colorPaletteCategorical,yS.hoverStyle=pS.hoverStyle,yS.clickStyle=pS.clickStyle,yS.referenceStyle=pS.referenceStyle,yS.strokeWidth=pS.strokeWidth1,yS.showDots=pS.showDots,yS.dotRadius=pS.dotRadius4,yS.hoverOpacity=pS.hoverOpacity,yS.cursor=pS.cursor,yS.dataLabel=pS.dataLabelBottomRight,yS.seriesLabel=pS.seriesLabel,yS.legend=pS.hiddenLegend,yS.tooltipLabel=pS.tooltipLabel,yS.secondaryLines=pS.secondaryLines,yS.showTooltip=pS.showTooltip,yS.suppressEvents=pS.suppressEvents,yS.referenceLines=pS.referenceLines,yS.annotations=pS.annotations,yS.clickHighlight=pS.clickHighlight;var gS={value:function(){}};function mS(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new bS(n)}function bS(t){this._=t}function MS(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function kS(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function xS(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=gS,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}bS.prototype=mS.prototype={constructor:bS,on:function(t,i){var s,n=this._,r=MS(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=xS(n[s],t.name,i);else if(null==i)for(s in n)n[s]=xS(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=kS(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new bS(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var AS,WS,NS=0,LS=0,SS=0,TS=0,ES=0,DS=0,$S="object"==typeof performance&&performance.now?performance:Date,CS="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function IS(){return ES||(CS(OS),ES=$S.now()+DS)}function OS(){ES=0}function zS(){this._call=this._time=this._next=null}function _S(t,i,s){var n=new zS;return n.restart(t,i,s),n}function HS(){ES=(TS=$S.now())+DS,NS=LS=0;try{!function(){IS(),++NS;for(var t,i=AS;i;)(t=ES-i._time)>=0&&i._call.call(null,t),i=i._next;--NS}()}finally{NS=0,function(){for(var t,i,s=AS,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:AS=i);WS=t,PS(n)}(),ES=0}}function qS(){var t=$S.now(),i=t-TS;i>1e3&&(DS-=i,TS=t)}function PS(t){NS||(LS&&(LS=clearTimeout(LS)),t-ES>24?(t<1/0&&(LS=setTimeout(HS,t-$S.now()-DS)),SS&&(SS=clearInterval(SS))):(SS||(TS=$S.now(),SS=setInterval(qS,1e3)),NS=1,CS(HS)))}function RS(t,i,s){var n=new zS;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}zS.prototype=_S.prototype={constructor:zS,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?IS():+s)+(null==i?0:+i),this._next||WS===this||(WS?WS._next=this:AS=this,WS=this),this._call=t,this._time=s,PS()},stop:function(){this._call&&(this._call=null,this._time=1/0,PS())}};var XS=mS("start","end","interrupt"),jS=[];function FS(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return RS(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(RS((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=_S((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:XS,tween:jS,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function GS(t,i){var s=YS(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function VS(t,i){var s=YS(t,i);if(s.state>2)throw new Error("too late; already started");return s}function YS(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function KS(t,i){var s,n;return function(){var r=VS(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function BS(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=VS(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function US(t,i,s){var n=t._id;return t.each((function(){var t=VS(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return YS(t,n).value[i]}}function ZS(t,i){var s;return("number"==typeof i?yL:i instanceof ZN?fL:(s=ZN(i))?(i=s,fL):bL)(t,i)}function JS(t){return function(){this.removeAttribute(t)}}function QS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tT(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function iT(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function sT(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function nT(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function rT(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function eT(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function hT(t,i){return function(){GS(this,t).delay=+i.apply(this,arguments)}}function aT(t,i){return i=+i,function(){GS(this,t).delay=i}}function oT(t,i){return function(){VS(this,t).duration=+i.apply(this,arguments)}}function uT(t,i){return i=+i,function(){VS(this,t).duration=i}}function cT(t,i){if("function"!=typeof i)throw new Error;return function(){VS(this,t).ease=i}}function lT(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?GS:VS;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var fT=sN.prototype.constructor;function dT(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var vT=0;function pT(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function yT(){return++vT}var wT=sN.prototype;pT.prototype=function(t){return sN().transition(t)}.prototype={constructor:pT,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=iW(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,FS(l[f],i,s,f,l,YS(a,s)));return new pT(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=nW(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=YS(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&FS(f,i,s,p,d,v);e.push(d),h.push(o)}return new pT(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=rW(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new pT(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new pT(e,this._parents,this._name,this._id)},selection:function(){return new fT(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=yT(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=YS(h,i);FS(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new pT(n,this._parents,t,s)},call:wT.call,nodes:wT.nodes,node:wT.node,size:wT.size,empty:wT.empty,each:wT.each,on:function(t,i){var s=this._id;return arguments.length<2?YS(this.node(),s).on.on(t):this.each(lT(s,t,i))},attr:function(t,i){var s=UA(t),n="transform"===s?$L:ZS;return this.attrTween(t,"function"==typeof i?(s.local?nT:sT)(s,n,US(this,"attr."+t,i)):null==i?(s.local?QS:JS)(s):(s.local?iT:tT)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=UA(t);return this.tween(s,(n.local?rT:eT)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?DL:ZS;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=bW(this,t),h=(this.style.removeProperty(t),bW(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=bW(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=bW(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,US(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=bW(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,dT(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(US(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=YS(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?KS:BS)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?hT:aT)(i,t)):YS(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?oT:uT)(i,t)):YS(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(cT(i,t)):YS(this.node(),i).ease}};var gT={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function mT(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return gT.time=IS(),gT;return s}sN.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},sN.prototype.transition=function(t){var i,s;t instanceof pT?(i=t._id,t=t._name):(i=yT(),(s=gT).time=IS(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&FS(h,t,i,u,a,s||mT(h,i));return new pT(n,this._parents,t,i)};var bT="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),MT=new Uint8Array(16);function kT(){if(!bT)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return bT(MT)}for(var xT=[],AT=0;AT<256;++AT)xT[AT]=(AT+256).toString(16).substr(1);function WT(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||kT)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[xT[t[i++]],xT[t[i++]],xT[t[i++]],xT[t[i++]],"-",xT[t[i++]],xT[t[i++]],"-",xT[t[i++]],xT[t[i++]],"-",xT[t[i++]],xT[t[i++]],"-",xT[t[i++]],xT[t[i++]],xT[t[i++]],xT[t[i++]],xT[t[i++]],xT[t[i++]]].join("")}(r)}const{getAccessibleStrokes:NT,ensureTextContrast:LT,createTextStrokeFilter:ST,findTagLevel:TT,prepareRenderChange:ET,initializeDescriptionRoot:DT,initializeElementAccess:$T,setElementFocusHandler:CT,setElementAccessID:IT,setAccessibilityController:OT,hideNonessentialGroups:zT,setAccessTitle:_T,setAccessSubtitle:HT,setAccessLongDescription:qT,setAccessExecutiveSummary:PT,setAccessPurpose:RT,setAccessContext:XT,setAccessStatistics:jT,setAccessChartCounts:FT,setAccessXAxis:GT,setAccessYAxis:VT,setAccessStructure:YT,setAccessAnnotation:KT,retainAccessFocus:BT,checkAccessFocus:UT,setElementInteractionAccessState:ZT,setAccessibilityDescriptionWidth:JT,annotate:QT,chartAccessors:tE,checkInteraction:iE,checkClicked:sE,checkHovered:nE,convertVisaColor:rE,drawAxis:eE,drawGrid:hE,drawLegend:aE,setLegendInteractionState:oE,drawTooltip:uE,formatDataLabel:cE,getColors:lE,getLicenses:fE,getPadding:dE,getScopedData:vE,initTooltipStyle:pE,overrideTitleTooltip:yE,placeDataLabels:wE,resolveLines:gE,scopeDataKeys:mE,transitionEndAll:bE,visaColors:ME,validateAccessibilityProps:kE,roundTo:xE,getTextWidth:AE,resolveLabelCollision:WE}=r,NE=class{constructor(s){t(this,s),this.mainTitle=yS.mainTitle,this.subTitle=yS.subTitle,this.height=yS.height,this.width=yS.width,this.highestHeadingLevel=yS.highestHeadingLevel,this.margin=yS.margin,this.padding=yS.padding,this.ordinalAccessor=yS.ordinalAccessor,this.valueAccessor=yS.valueAccessor,this.seriesAccessor=yS.seriesAccessor,this.xAxis=yS.xAxis,this.yAxis=yS.yAxis,this.wrapLabel=yS.wrapLabel,this.showBaselineX=yS.showBaselineX,this.colorPalette=yS.colorPalette,this.hoverStyle=yS.hoverStyle,this.clickStyle=yS.clickStyle,this.referenceStyle=yS.referenceStyle,this.cursor=yS.cursor,this.hoverOpacity=yS.hoverOpacity,this.animationConfig=yS.animationConfig,this.strokeWidth=yS.strokeWidth,this.showDots=yS.showDots,this.dotRadius=yS.dotRadius,this.dataLabel=yS.dataLabel,this.showTooltip=yS.showTooltip,this.tooltipLabel=yS.tooltipLabel,this.accessibility=yS.accessibility,this.legend=yS.legend,this.annotations=yS.annotations,this.seriesLabel=yS.seriesLabel,this.referenceLines=yS.referenceLines,this.secondaryLines=yS.secondaryLines,this.suppressEvents=yS.suppressEvents,this.clickHighlight=yS.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.updated=!0,this.enterSize=0,this.exitSize=0,this.time={timehour:vN,timeday:pN,timeweek:wN,timemonth:gN,timeyear:mN},this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYGrid=!1,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateScales=!1,this.shouldUpdateTableData=!1,this.shouldUpdateLabels=!1,this.shouldUpdateAnnotations=!1,this.shouldDrawInteractionState=!1,this.shouldSetSelectionClass=!1,this.shouldUpdateCursor=!1,this.shouldSetColors=!1,this.shouldUpdateLines=!1,this.shouldUpdatePoints=!1,this.shouldUpdateLegend=!1,this.shouldUpdateReferenceLines=!1,this.shouldBindInteractivity=!1,this.shouldUpdateLegendInteractivity=!1,this.shouldResetRoot=!1,this.shouldUpdateBaseline=!1,this.shouldValidateInteractionKeys=!1,this.shouldEnterUpdateExit=!1,this.shouldSetGlobalSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldSetLabelOpacity=!1,this.shouldSetSeriesLabelOpacity=!1,this.shouldSetLegendCursor=!1,this.shouldAddStrokeUnder=!1,this.shouldValidateSeriesLabels=!1,this.shouldUpdateSeriesLabels=!1,this.shouldUpdateColors=!1,this.shouldUpdateStrokeWidth=!1,this.shouldUpdateInterpolationData=!1,this.shouldSetScaleUsed=!1,this.shouldUpdateDotRadius=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldUpdateDashPatterns=!1,this.shouldValidateDataLabelAccessor=!1,this.topLevel="h2",this.bottomLevel="p",this.strokes={},this.b=",",this.short="2,2",this.med="4,2",this.long="8,2",this.dashPatterns=["",this.long,this.long+this.b+this.med,this.short+this.b+this.long+this.b+this.long,this.short+this.b+this.short+this.b+this.long],this.hiddenHash={},this.dynamicY=t=>"individual"===this.yAxis.scales?this.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.y(t[this.valueAccessor]),this.interpolateDynamicY=t=>"individual"===this.yAxis.scales?this.interpolating.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.interpolating.y(t[this.valueAccessor]),this.handleDotStroke=(t,i,s)=>{if(!this.accessibility.hideStrokes){const n=this.clickHighlight&&this.clickHighlight.length>0&&sE(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&nE(t,this.hoverHighlight,this.innerInteractionKeys),e=nN(s[i].parentNode).attr("fill"),h=n&&this.clickStyle.color?ME[this.clickStyle.color]||this.clickStyle.color:n?e:r&&this.hoverStyle.color?ME[this.hoverStyle.color]||this.hoverStyle.color:e;return nN(s[i]).attr("stroke-width",this.calculateStrokeWidth(t)),nN(s[i]).attr("fill",h),this.strokes[h.toLowerCase()]}return null},this.handleLineStroke=(t,i)=>{const s=this.colorArr[i]||this.colorArr[0],n=t.values[0],r=sE(n,this.clickHighlight,this.innerInteractionKeys),e=nE(n,this.hoverHighlight,this.innerInteractionKeys);return this.seriesInteraction?r&&this.clickStyle.color?this.strokes[(ME[this.clickStyle.color]||this.clickStyle.color).toLowerCase()]:r?s:e&&this.hoverStyle.color?this.strokes[(ME[this.hoverStyle.color]||this.hoverStyle.color).toLowerCase()]:s:s},this.handleSeriesTextFill=(t,i)=>{const s=this.rawColors[i]||this.rawColors[0],n=t.values[0],r=sE(n,this.clickHighlight,this.innerInteractionKeys),e=nE(n,this.hoverHighlight,this.innerInteractionKeys);return this.textColors[(this.seriesInteraction?r&&this.clickStyle.color?ME[this.clickStyle.color]||this.clickStyle.color:r?s:e&&this.hoverStyle.color?ME[this.hoverStyle.color]||this.hoverStyle.color:s:s).toLowerCase()]},this.handleTextFill=(t,i,s)=>{const n=this.clickHighlight&&this.clickHighlight.length>0&&sE(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&nE(t,this.hoverHighlight,this.innerInteractionKeys),e=nN(s[i].parentNode).attr("fill");return this.textColors[(n&&this.clickStyle.color?ME[this.clickStyle.color]||this.clickStyle.color:n?e:r&&this.hoverStyle.color?ME[this.hoverStyle.color]||this.hoverStyle.color:e).toLowerCase()]},this.calculateStrokeWidth=(t,i)=>{const s=i?t.values[0]:t;return!i||this.seriesInteraction?sE(s,this.clickHighlight,this.innerInteractionKeys)?this.clickStyle.strokeWidth||this.strokeWidth:nE(s,this.hoverHighlight,this.innerInteractionKeys)?this.hoverStyle.strokeWidth||this.strokeWidth:this.secondaryLines.keys.includes(s[this.seriesAccessor])?1:this.strokeWidth:this.secondaryLines.keys.includes(s[this.seriesAccessor])?1:this.strokeWidth},this.handleStrokeDasharray=(t,i)=>this.secondaryLines.keys.includes(t.key)?this.short:this.accessibility.hideTextures?"":this.dashPatterns[i],this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateDotRadius=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldValidate=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0}idWatcher(t,i){this.chartID=t,this.parallelChartEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldUpdateLegend=!0,this.shouldAddStrokeUnder=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldResetRoot=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}seriesAccessorWatcher(t,i){this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldValidate=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateTableData=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldUpdateLabels=!0,this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0}ordinalAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldUpdateTableData=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateStrokeWidth=!0}valueAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldSetGlobalSelections=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGlobalSelections=!0}xAxisWatcher(t,i){this.shouldUpdateXAxis=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0),this.shouldSetXAxisAccessibility=!0}yAxisWatcher(t,i){(!(!t||!t.scales)&&t.scales)!==(!(!i||!i.scales)&&i.scales)&&(this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0),this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0)}wrapLabelWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}showBaselineXWatcher(t,i){this.shouldUpdateBaseline=!0}paletteWatcher(t,i){this.shouldSetColors=!0,this.shouldUpdateColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldUpdateColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldSetColors=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldSetColors=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0}strokeWidthWatcher(t,i){this.shouldUpdateStrokeWidth=!0}showDotsWatcher(t,i){this.shouldDrawInteractionState=!0}dotRadiusWatcher(t,i){this.shouldUpdateDotRadius=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0}dataLabelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0;const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement,r=!(!t||!t.labelAccessor)&&t.labelAccessor,e=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),s!==n&&(this.shouldUpdateSeriesLabels=!0),r!==e&&(this.shouldValidateDataLabelAccessor=!0)}seriesLabelWatcher(t,i){this.shouldUpdateSeriesLabels=!0,this.shouldUpdateTableData=!0,this.shouldValidateSeriesLabels=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetSeriesLabelOpacity=!0)}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}showTooltipWatcher(t,i){}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateStrokeWidth=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.hideTextures)&&t.hideTextures)!==(!(!i||!i.hideTextures)&&i.hideTextures)&&(this.shouldUpdateDashPatterns=!0,this.shouldUpdateLegend=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0}valueOverrideWatcher(t,i){this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}secondaryLinesWatcher(t,i){const s=t&&t.showDataLabel,n=i&&i.showDataLabel,r=t&&t.showSeriesLabel,e=i&&i.showSeriesLabel,h=t&&t.opacity?t.opacity:0,a=i&&i.opacity?i.opacity:0;(!(!t||!t.keys)&&t.keys)!==(!(!i||!i.keys)&&i.keys)&&(this.shouldUpdateLines=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0),s!==n&&(this.shouldSetLabelOpacity=!0),r!==e&&(this.shouldUpdateLabels=!0),h!==a&&(this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0)}clickWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"parallel-plot-"+WT(),this.parallelChartEl.id=this.chartID,this.setTagLevels(),this.setDimensions(),this.setScaleUsed(),this.prepareScales(),this.prepareData(),this.updateInterpolationData(),this.validateInteractionKeys(),this.validateSeriesLabels(),this.validateDataLabelAccessor(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.renderChartRootElemets(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.drawXGrid(),this.drawYGrid(),this.setGlobalSelections(),this.setTestingAttributes(),this.drawXAxis(),this.setXAxisAccessibility(),this.enterYAxis(),this.exitYAxis(),this.drawYAxis(),this.setYAxisAccessibility(),this.enterChartLines(),this.updateChartLines(),this.exitChartLines(),this.enterPoints(),this.updatePoints(),this.exitPoints(),this.drawChartLines(),this.drawPoints(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.drawDataLabels(),this.drawSeriesLabels(),this.addStrokeUnder(),this.drawReferenceLines(),this.setSelectedClass(),this.updateInteractionState(),this.setLabelOpacity(),this.setSeriesLabelOpacity(),this.updateCursor(),this.bindInteractivity(),this.setLegendCursor(),this.bindLegendInteractivity(),this.drawBaseline(),this.drawAnnotations(),this.setAnnotationAccessibility(),zT(this.root.node(),this.dotG.node()),this.setGroupAccessibilityID(),this.onChangeHandler(),this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldEnterUpdateExit&&(this.enterYAxis(),this.exitYAxis(),this.enterChartLines(),this.updateChartLines(),this.exitChartLines(),this.enterPoints(),this.updatePoints(),this.exitPoints(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateLines&&(this.drawChartLines(),this.shouldUpdateLines=!1),this.shouldUpdatePoints&&(this.drawPoints(),this.shouldUpdatePoints=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateColors&&(this.updateColors(),this.shouldUpdateColors=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateSeriesLabels&&(this.drawSeriesLabels(),this.shouldUpdateSeriesLabels=!1),this.addStrokeUnder&&(this.addStrokeUnder(),this.shouldAddStrokeUnder=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldUpdateStrokeWidth&&(this.updateStrokeWidth(),this.shouldUpdateStrokeWidth=!1),this.shouldUpdateDotRadius&&(this.updateDotRadius(),this.shouldUpdateDotRadius=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldUpdateDashPatterns&&(this.updateStrokePattern(),this.shouldUpdateDashPatterns=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSeriesLabelOpacity&&(this.setSeriesLabelOpacity(),this.shouldSetSeriesLabelOpacity=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldUpdateLegendInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateBaseline&&(this.drawBaseline(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,kE(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}setDimensions(){this.padding="string"==typeof this.padding?dE(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.seriesAccessor],this.seriesInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.seriesAccessor}setColors(){this.rawColors=this.colors?rE(this.colors):lE(this.colorPalette,this.nest.length),this.textColors={};let t=this.rawColors;if(this.strokes={},this.accessibility.hideStrokes||(t=[]),this.rawColors.forEach(i=>{if(!this.accessibility.hideStrokes){const s=NT(i),n=2===s.length?s[1]:s[0];this.strokes[i.toLowerCase()]=n,t.push(n)}this.textColors[i.toLowerCase()]=LT(i,"#ffffff",4.5)}),this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){const t=NT(this.hoverStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.hoverStyle.color.toLowerCase()]=i}this.textColors[this.hoverStyle.color.toLowerCase()]=LT(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){const t=NT(this.clickStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.clickStyle.color.toLowerCase()]=i}this.textColors[this.clickStyle.color.toLowerCase()]=LT(this.clickStyle.color,"#ffffff",4.5)}this.colorArr=t}setTableData(){const t=mE(this,tE,"parallel-plot");this.tableData=vE(this.data,t),this.tableColumns=Object.keys(t)}prepareData(){this.multiYScale={},this.data.map(t=>{const i=this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`];!i||"auto"!==this.dataLabel.placement&&!this.dataLabel.collisionHideOnly||t.enter||t.exit||(t.hidden=i["data-label-hidden"],t["auto-x"]=i.x,t["auto-y"]=i.y,t["auto-text-anchor"]=i["text-anchor"])}),this.nest=xN().key(t=>(this.multiYScale[t[this.ordinalAccessor]]||(this.multiYScale[t[this.ordinalAccessor]]={min:1/0,max:0}),this.multiYScale[t[this.ordinalAccessor]].min>t[this.valueAccessor]&&(this.multiYScale[t[this.ordinalAccessor]].min=t[this.valueAccessor]),this.multiYScale[t[this.ordinalAccessor]].max<t[this.valueAccessor]&&(this.multiYScale[t[this.ordinalAccessor]].max=t[this.valueAccessor]),t[this.seriesAccessor])).entries(this.data),this.map=xN().key(t=>t[this.seriesAccessor]).map(this.data),Object.keys(this.multiYScale).forEach(t=>{const i=this.multiYScale[t],s=.05*this.innerPaddedHeight;i.y=nS().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:i.min,this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i.max]).range([this.innerPaddedHeight-s,0+s]),i.ticks=[i.y.invert(this.innerPaddedHeight),i.y.invert(0)]})}updateInterpolationData(){if(this.interpolating){let t=this.nest.length;this.nest.forEach(i=>{i.interpolate={};const s=this.interpolating.map.get(i.key),n=i.values;if(s){const r=gE(s,n,this.ordinalAccessor);r.length?(i.interpolate.start=r[0],i.interpolate.end=r[1]):(i.interpolate.start=s,i.interpolate.end=n,t--)}else i.interpolate.start=n,i.interpolate.end=n}),t||this.nest.length!==this.interpolating.length||(this.interpolating=!1)}}prepareScales(){if(this.nest){this.interpolating=this.nest;const t=this.x.domain(),i=this.x.range(),s=this.y.domain(),n=this.y.range();this.interpolating.scales=this.scalesUsed,this.interpolating.multiYScale=Object.assign({},this.multiYScale),this.interpolating.x=this.x.domain(t).range(i),this.interpolating.y=nS().domain(s).range(n),this.interpolating.line=vS().x(t=>this.interpolating.x(t[this.ordinalAccessor])).y(t=>"individual"===this.interpolating.scales?this.interpolating.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.interpolating.y(t[this.valueAccessor])),this.interpolating.map=this.map}this.extent={},this.extent.minValue=function(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e]))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e]))&&n>s&&(n=s);return n}(this.data,t=>parseFloat(t[this.valueAccessor])),this.extent.maxValue=function(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e]))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e]))&&s>n&&(n=s);return n}(this.data,t=>parseFloat(t[this.valueAccessor]));let t=0+.05*this.innerPaddedHeight,i=this.innerPaddedHeight-.05*this.innerPaddedHeight;"preNormalized"===this.yAxis.scales&&(this.extent.minValue=0,this.extent.maxValue=1,t=0,i=this.innerPaddedHeight),this.extent.minValue=this.minValueOverride||0===this.minValueOverride?this.minValueOverride:this.extent.minValue,this.extent.maxValue=this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:this.extent.maxValue,t=this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t,i=this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i,this.y=nS().domain([this.extent.minValue,this.extent.maxValue]).range([i,t]),this.x=function(){return IN(CN.apply(null,arguments).paddingInner(1))}().domain(this.data.map(t=>t[this.ordinalAccessor])).range([0,this.innerPaddedWidth]),this.line=vS().x(t=>this.x(t[this.ordinalAccessor])).y(t=>"individual"===this.yAxis.scales?this.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.y(t[this.valueAccessor]))}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel&&this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateSeriesLabels(){this.labelDetails=Object.assign({},this.seriesLabel),this.labelDetails.placement||(this.labelDetails.placement=""),this.labelDetails.label&&this.labelDetails.label.length||(this.labelDetails.label=""),this.isRight="left"!==this.labelDetails.placement}setScaleUsed(){this.scalesUsed=this.yAxis.scales}renderRootElements(){this.svg=nN(this.parallelChartEl).select(".visa-viz-d3-parallel-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.gridG=this.rootG.append("g").attr("class","grid-group"),this.references=this.rootG.append("g").attr("class","parallel-reference-line-group")}renderChartRootElemets(){this.yGroup=this.rootG.append("g").attr("class","y-scales-group"),this.parallelLineG=this.rootG.append("g").attr("class","parallel-group parallel-line-group"),this.dotG=this.rootG.append("g").attr("class","parallel-group"),this.seriesLabelG=this.rootG.append("g").attr("class","parallel-series-wrapper"),this.labels=this.rootG.append("g").attr("class","parallel-dataLabel-group"),this.legendG=nN(this.parallelChartEl).select(".parallel-legend").append("svg"),this.tooltipG=nN(this.parallelChartEl).select(".parallel-tooltip"),this.setTooltipInitialStyle()}reSetRoot(){ET({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:wS}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),ET({selection:this.root,duration:this.duration,namespace:"root_reset",easing:wS}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),ET({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:wS}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),JT(this.chartID,this.width)}setGlobalSelections(){const t=Object.keys(this.multiYScale),i=this.yGroup.selectAll(".y-wrapper").data(t,t=>t);this.yEnter=i.enter().append("g"),this.yExit=i.exit(),this.yUpdate=i.merge(this.yEnter);const s=this.parallelLineG.selectAll(".parallel-plot").data(this.nest,t=>t.key);this.enterLines=s.enter().append("path"),this.exitLines=s.exit(),this.updateLines=s.merge(this.enterLines),this.enterSize=this.enterLines.size();const n=this.dotG.selectAll(".parallel-dot-wrapper").data(this.nest,t=>t.key);this.enterDotWrappers=n.enter().append("g"),this.exitDotWrappers=n.exit(),this.updateDotWrappers=n.merge(this.enterDotWrappers);const r=this.seriesLabelG.selectAll(".parallel-series-label").data(this.nest,t=>t.key);this.seriesLabelEnter=r.enter().append("text"),this.seriesLabelExit=r.exit(),this.seriesLabelUpdate=r.merge(this.seriesLabelEnter);const e=this.labels.selectAll("g").data(this.nest,t=>t.key);if(this.enteringLabelGroups=e.enter().append("g"),this.exitingLabelGroups=e.exit(),this.updatingLabelGroups=e.merge(this.enteringLabelGroups),this.interpolating){this.updateDotWrappers.selectAll("circle").remove();const t=this.updateDotWrappers.selectAll("circle").data(t=>t.interpolate.start);this.enterDots=t.enter().append("circle"),this.exitDots=t.exit(),this.updateDots=t.merge(this.enterDots),this.updatingLabelGroups.selectAll(".parallel-dataLabel").remove();const i=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data(t=>t.interpolate.start);this.enteringLabels=i.enter().append("text"),this.updatingLabels=i.merge(this.enteringLabels)}else{const t=this.updateDotWrappers.selectAll("circle").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enterDots=t.enter().append("circle"),this.exitDots=t.exit(),this.updateDots=t.merge(this.enterDots),this.enterSize=this.enterDots.size(),this.exitSize=this.exitDots.size();const i=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enteringLabels=i.enter().append("text"),this.exitingLabels=i.exit(),this.updatingLabels=i.merge(this.enteringLabels)}}setTestingAttributes(){this.unitTest?(nN(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid","chart-container"),nN(this.parallelChartEl).select(".parallel-main-title").attr("data-testid","main-title"),nN(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.gridG.attr("data-testid","grid-group"),this.references.attr("data-testid","reference-line-group"),this.yGroup.attr("data-testid","y-scales-group"),this.yUpdate.attr("data-testid","y-scale-wrapper"),this.parallelLineG.attr("data-testid","parallel-line-group"),this.updateLines.attr("data-testid","parallel-line").attr("data-id",t=>`parallel-line-${t.key}`),this.seriesLabelG.attr("data-testid","parallel-series-label-container"),this.seriesLabelUpdate.attr("data-testid","parallel-series-label").attr("data-id",t=>`parallel-series-label-${t.key}`),this.dotG.attr("data-testid","marker-group"),this.updateDotWrappers.attr("data-testid","marker-series-group").attr("data-id",t=>`marker-series-${t.key}`),this.updateDots.attr("data-testid","marker").attr("data-id",t=>`marker-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`),this.labels.attr("data-testid","dataLabel-group-container"),this.updatingLabelGroups.attr("data-testid","dataLabel-group").attr("data-id",t=>`dataLabel-group-${t.key}`),this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",t=>`dataLabel-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`),this.svg.select("defs").attr("data-testid","pattern-defs")):(nN(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid",null),nN(this.parallelChartEl).select(".parallel-main-title").attr("data-testid",null),nN(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.gridG.attr("data-testid",null),this.references.attr("data-testid",null),this.yGroup.attr("data-testid",null),this.yUpdate.attr("data-testid",null),this.parallelLineG.attr("data-testid",null),this.updateLines.attr("data-testid",null).attr("data-id",null),this.seriesLabelG.attr("data-testid",null),this.seriesLabelUpdate.attr("data-testid",null).attr("data-id",null),this.dotG.attr("data-testid",null),this.updateDotWrappers.attr("data-testid",null).attr("data-id",null),this.updateDots.attr("data-testid",null).attr("data-id",null),this.labels.attr("data-testid",null),this.updatingLabelGroups.attr("data-testid",null).attr("data-id",null),this.updatingLabels.attr("data-testid",null).attr("data-id",null),this.svg.select("defs").attr("data-testid",null))}drawXAxis(){eE({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel?this.innerPaddedWidth/this.nest[0].values.length*.7:"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration,hidePath:!0})}enterYAxis(){this.yEnter.attr("class","y-wrapper").attr("transform",t=>"translate("+this.x(t)+",0)").attr("opacity",0)}exitYAxis(){this.yExit.transition("exit").duration(this.duration).ease(wS).attr("opacity",0).remove()}drawYAxis(){this.yUpdate.each((t,i,s)=>{const n="individual"===this.yAxis.scales?this.multiYScale[t].ticks:this.yAxis.onlyTickExtents?[this.extent.minValue,this.extent.maxValue]:this.yAxis.onlyTickExtents,r=this.multiYScale[t].y.domain(),e=r[0]===r[1]||0!==i&&"individual"!==this.yAxis.scales||!this.yAxis.visible;eE({root:nN(s[i]),height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"individual"===this.yAxis.scales?this.multiYScale[t].y:this.y,left:!0,wrapLabel:this.wrapLabel?this.padding.left:"",format:this.yAxis.format,tickInterval:n?1:this.yAxis.tickInterval,label:"individual"===this.yAxis.scales||e?"":this.yAxis.label,padding:this.padding,hide:e,hidePath:!0,duration:this.duration,ticks:n})}).transition("update").duration(this.duration).ease(wS).attr("transform",t=>"translate("+this.x(t)+",0)").attr("opacity",1)}setXAxisAccessibility(){GT({rootEle:this.parallelChartEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:!!this.x&&this.x,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){VT({rootEle:this.parallelChartEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:!!this.y&&this.y,yAxisLabel:this.yAxis.label?this.yAxis.label:"",xAxisLabel:this.xAxis.label?this.xAxis.label:""})}drawBaseline(){eE({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0),hide:!this.showBaselineX,duration:this.duration})}drawXGrid(){hE(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!1,this.xAxis.tickInterval,this.duration)}drawYGrid(){hE(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)}enterChartLines(){this.enterLines.interrupt(),this.enterLines.attr("class","parallel-plot entering").attr("d",t=>this.line(t.values)).attr("data-d",t=>this.line(t.values)).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top),this.enterLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("stroke-dasharray",(t,i,s)=>(t.linelength=s[i].getTotalLength(),t.linelength+" "+t.linelength)).attr("stroke",this.handleLineStroke).attr("fill","none").attr("stroke-width",.1)}updateChartLines(){this.updateLines.interrupt(),this.updateLines.transition().duration(this.duration).ease(wS).attr("stroke-dashoffset",0).attr("stroke-width",t=>this.calculateStrokeWidth(t,!0)).call(bE,()=>{this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)}),this.updateLines.transition("opacity").ease(wS).duration(this.duration).attr("opacity",t=>{const i=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?iE(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):iE(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i})}exitChartLines(){this.exitLines.interrupt(),this.exitLines.attr("stroke-dasharray",(t,i,s)=>(t.linelength=s[i].getTotalLength(),t.linelength+" "+t.linelength)).transition("exit").ease(wS).duration(this.duration).attr("opacity",0).attr("stroke-dashoffset",t=>t.linelength).attr("stroke-width",.1).remove()}drawChartLines(){this.interpolating&&this.updateLines.attr("d",(t,i,s)=>nN(s[i]).classed("entering")?this.line(t.values):this.interpolating.line(t.interpolate.start)),this.updateLines.attr("stroke-width",t=>this.calculateStrokeWidth(t,!0)).attr("stroke-dashoffset",t=>t.linelength).attr("data-d",t=>this.line(this.interpolating?t.interpolate.end:t.values)).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(wS).duration(this.duration).attr("d",t=>this.line(this.interpolating?t.interpolate.end:t.values)).call(bE,()=>{this.updateLines.classed("entering",!1).attr("data-d",t=>this.line(t.values)).attr("d",t=>this.line(t.values)).attr("stroke-dasharray",this.handleStrokeDasharray)})}enterPoints(){this.enterDots.interrupt(),this.enterDotWrappers.attr("class","parallel-dot-wrapper").attr("opacity",0).attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]).each((t,i,s)=>{$T(s[i])}),this.enterDots.each((t,i,s)=>{$T(s[i])}).attr("stroke",this.handleDotStroke).attr("cursor",this.suppressEvents?null:this.cursor).attr("data-fill",!0).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.interpolating&&(this.enterDots.attr("cx",t=>this.interpolating.x(t[this.ordinalAccessor])).attr("cy",this.interpolateDynamicY).attr("r",t=>t.enter?0:sE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):nE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).attr("stroke-width",t=>this.calculateStrokeWidth(t)),this.enterDotWrappers.selectAll("circle").attr("r",0).attr("cx",t=>this.x(t[this.ordinalAccessor])).attr("cy",this.dynamicY).attr("opacity",0)),this.updateDotWrappers.order(),this.updateDots.order()}updatePoints(){this.updateDots.interrupt();const t=this.showDots?1:0;this.updateDots.attr("tabindex",(t,i)=>0===i?"0":"-1"),this.updateDotWrappers.attr("opacity",i=>this.secondaryLines.keys.includes(i.key)?this.secondaryLines.opacity:t),this.interpolating?(this.updateDots.attr("opacity",t=>(this.exitSize+=t.exit?1:0,this.enterSize+=t.enter?1:0,t.enter?0:1)),this.updateDots=this.updateDotWrappers.selectAll("circle").data(t=>t.interpolate.end).classed("exiting",t=>t.exit),this.enterDotWrappers.selectAll("circle").each(t=>{t.enterWholeGroup=!0}),this.updateDots.transition("opacity").ease(wS).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0).attr("opacity",i=>iE(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))):this.updateDots.transition("opacity").ease(wS).duration(this.duration).attr("opacity",i=>iE(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}exitPoints(){this.exitDots.interrupt(),this.exitDots.transition("exit").ease(wS).duration(this.duration).attr("opacity",0).attr("r",0),this.exitDotWrappers.selectAll("circle").each(t=>{t.exitWholeGroup=!0}).transition("exit").ease(wS).duration(this.duration/2).delay((t,i,s)=>this.duration-this.duration*(i/(s.length-1))).attr("opacity",0).attr("r",0),this.updateDots.transition("accessibilityAfterExit").duration(this.duration/2).delay((t,i,s)=>this.duration-this.duration*(i/(s.length-1))).ease(wS).call(bE,()=>{const t=UT(this.rootG.node());this.exitDots.remove(),this.exitDotWrappers.remove(),this.svg.selectAll(".exiting").remove(),this.updateDots=this.updateDotWrappers.selectAll("circle"),this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel"),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),BT({parentGNode:this.rootG.node(),focusDidExist:t})})}drawPoints(){let t;t=this.interpolating?this.updateDots.attr("data-cx",t=>this.x(t[this.ordinalAccessor])).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",t=>t.exit?0:sE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):nE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).transition("update").ease(wS).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0).attr("r",t=>t.exit?0:sE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):nE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).attr("stroke-width",t=>this.calculateStrokeWidth(t)):this.updateDots.attr("data-cx",t=>this.x(t[this.ordinalAccessor])).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",t=>sE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):nE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).attr("r",t=>sE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):nE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).attr("stroke-width",t=>this.calculateStrokeWidth(t)).transition("update").ease(wS).duration(this.duration),this.updateDots.attr("stroke",this.handleDotStroke),t.attr("cx",t=>this.x(t[this.ordinalAccessor])).attr("cy",this.dynamicY).call(bE,()=>{this.updateDots.each(t=>{t.enterWholeGroup=!1,t.enter=!1}),BT({parentGNode:this.rootG.node()})})}enterSeriesLabels(){this.seriesLabelEnter.interrupt(),this.seriesLabelEnter.attr("class","parallel-series-label").attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onSeriesHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("fill",this.handleSeriesTextFill).attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor])).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.1em").attr("text-anchor",this.isRight?"start":"end").attr("opacity",0)}updateSeriesLabels(){this.seriesLabelUpdate.interrupt(),this.seriesLabelUpdate.transition("opacity").ease(wS).duration(this.duration).attr("opacity",t=>{const i=this.seriesLabel.visible?this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1:0;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?iE(t.values[0],i,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):iE(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i})}exitSeriesLabels(){this.seriesLabelExit.interrupt(),this.seriesLabelExit.transition("update").ease(wS).duration(this.duration).attr("opacity",0).remove()}drawSeriesLabels(){const t="auto"!==this.labelDetails.placement&&this.labelDetails.collisionHideOnly,i=this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill).text((t,i)=>this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showSeriesLabel?"":this.labelDetails.label?this.labelDetails.label[i]:t.key).style("visibility",(t,i,s)=>"auto"===this.labelDetails.placement||this.labelDetails.collisionHideOnly?nN(s[i]).style("visibility"):null).attr("data-x",this.isRight?this.innerPaddedWidth+10:0).attr("data-y",(t,i,s)=>{const n=getComputedStyle(s[i]),r=parseFloat(n.fontSize),e=Math.max(r-1,1);return"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor])+.4*e:this.y(t.values[0][this.valueAccessor])+.4*e}).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.1em").attr("data-use-dx",t).attr("data-use-dy",t).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-text-anchor",this.isRight?"start":"end").transition("update").ease(wS).duration(this.duration);this.labelDetails.visible&&("auto"===this.labelDetails.placement||this.labelDetails.collisionHideOnly)?(this.bitmaps=WE({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[this.updateDots],validPositions:t?["middle"]:["middle","top","bottom"],offsets:t?[1]:[1,4,4],accessors:["key"],size:[xE(this.width,0),xE(this.height,0)],hideOnly:this.labelDetails.visible&&t}),t&&i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor])).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.1em")):i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor])).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.1em")}enterDataLabels(){if(this.enteringLabels.interrupt(),this.enteringLabelGroups.attr("class","parallel-label-wrapper").attr("opacity",0).attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]),this.enteringLabels.attr("opacity",0).attr("fill",this.handleTextFill).attr("class","parallel-dataLabel").attr("cursor",this.suppressEvents?null:this.cursor).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.interpolating){const t=this.enteringLabels.attr("class","parallel-dataLabel").attr("opacity",0);wE({root:t,xScale:this.interpolating.x,yScale:this.interpolateDynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"}),this.updatingLabels.attr("opacity",t=>t.enter?0:1);const i=this.enteringLabelGroups.selectAll(".parallel-dataLabel").attr("opacity",0);wE({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}else{const t=this.enteringLabels.attr("opacity",0).attr("class","parallel-dataLabel");wE({root:t,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}"auto"===this.dataLabel.placement&&this.updatingLabels.each((t,i,s)=>{t.enter||t.exit||t.hidden||!t["auto-x"]&&0!==t["auto-x"]||!t["auto-y"]&&0!==t["auto-y"]||nN(s[i]).attr("x",+nN(s[i]).attr("x")+(+t["auto-x"]||0)).attr("y",+nN(s[i]).attr("y")+(+t["auto-y"]||0)).attr("text-anchor",t["auto-text-anchor"])})}updateDataLabels(){this.updatingLabelGroups.interrupt(),this.updatingLabelGroups.attr("opacity",t=>this.dataLabel.visible?this.secondaryLines.keys.includes(t.key)&&this.secondaryLines.showDataLabel?this.secondaryLines.opacity:this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showDataLabel?0:1:0),this.interpolating?(this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data(t=>t.interpolate.end).classed("exiting",t=>t.exit),this.enteringLabelGroups.each(t=>t.enterWholeGroup=!0),this.updatingLabels.transition("opacity").ease(wS).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0).attr("opacity",(t,i,s)=>{const n=t.exit||iE(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1,r=+nN(s[i].parentNode).attr("opacity");return nN(s[i]).attr("data-hidden",0===r||0===n?"true":null),n})):this.updatingLabels.attr("opacity",(t,i,s)=>{const n=t.exit||iE(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1,r=+nN(s[i].parentNode).attr("opacity");return nN(s[i]).attr("data-hidden",0===r||0===n?"true":null),n})}exitDataLabels(){this.exitingLabels.interrupt(),this.exitingLabels.transition("exit").ease(wS).duration(this.duration).attr("opacity",0).remove(),this.exitingLabelGroups.selectAll(".parallel-dataLabel").transition("exit").ease(wS).duration(this.duration/2).delay((t,i,s)=>this.duration-this.duration*(i/(s.length-1))).attr("opacity",0).call(bE,()=>{this.exitingLabelGroups.remove()})}drawDataLabels(){const t="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;let i=this.updatingLabels.text(t=>cE(t,this.innerLabelAccessor,this.dataLabel.format));i=this.interpolating?this.updatingLabels.style("visibility",(t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?t.hidden?"hidden":nN(s[i]).style("visibility"):null).attr("data-x",t=>this.interpolating.x(t[this.ordinalAccessor])).attr("data-y",this.interpolateDynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(wS).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0):this.updatingLabels.style("visibility",(t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?t.hidden?"hidden":nN(s[i]).style("visibility"):null).attr("data-x",t=>this.x(t[this.ordinalAccessor])).attr("data-y",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(wS).duration(this.duration);const s=this.gridG.selectAll("line").attr("data-y2",this.innerPaddedHeight).attr("data-y1",0).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-x1",t=>this.x(t)).attr("data-x2",t=>this.x(t)),n=this.yUpdate.selectAll(".y.axis").filter((t,i,s)=>+nN(s[i]).attr("opacity")>=1e-4).selectAll("text").attr("data-fill",!0).attr("data-y",t=>this.y(t)).attr("data-width",(t,i,s)=>{const n=s[i],r=getComputedStyle(n),e=parseFloat(r.fontSize),h=Math.max(e-1,1),a=AE(n.textContent,e,!0,r.fontFamily);return nN(n).attr("data-x",+nN(n).attr("x")).attr("data-translate-x",this.margin.left+this.padding.left-a).attr("data-translate-y",this.margin.top+this.padding.top-h/2).attr("data-height",h),a}),r={all:{validPositions:["top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:[3,2,4,4,1,1,1,1]},top:{validPositions:["top","top-left","top-right"],offsets:[3,1,1]},middle:{validPositions:["left","right"],offsets:[4,4]},bottom:{validPositions:["bottom","bottom-left","bottom-right"],offsets:[2,1,1]},right:{validPositions:["right","top-right","bottom-right"],offsets:[4,1,1]},left:{validPositions:["left","top-left","bottom-left"],offsets:[4,1,1]}},e=this.dataLabel&&this.dataLabel.collisionPlacement;this.bitmaps=wE({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,labelSelection:i,avoidMarks:[n,s,this.updateLines,this.updateDots],validPositions:t?["middle"]:e&&r[e]?r[e].validPositions:r.all.validPositions,offsets:t?[1]:e&&r[e]?r[e].offsets:r.all.offsets,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[xE(this.width,0),xE(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}}),i.call(bE,()=>{this.hiddenHash={},this.updatingLabels.each((t,i,s)=>{this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`]={"data-label-hidden":"true"===nN(s[i]).attr("data-label-hidden"),x:+nN(s[i]).attr("x")-+nN(s[i]).attr("data-x"),y:+nN(s[i]).attr("y")-+nN(s[i]).attr("data-y"),"text-anchor":nN(s[i]).attr("text-anchor")}})})}updateInteractionState(){this.updateLines.interrupt("opacity"),this.updateLines.attr("opacity",t=>{const i=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?iE(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):iE(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i});const t=this.showDots?1:0;this.updateDotWrappers.attr("opacity",i=>this.secondaryLines.keys.includes(i.key)?this.secondaryLines.opacity:t),this.updateDots.each((i,s,n)=>{i.enter||i.enterWholeGroup||i.exit||i.exitWholeGroup||nN(n[s]).attr("opacity",()=>iE(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}),BT({parentGNode:this.rootG.node()}),oE({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}setSeriesLabelOpacity(){this.seriesLabelUpdate.each((t,i,s)=>{const n=nN(s[i]);n.classed("entering")||n.attr("opacity",()=>{const r=(this.seriesLabel.visible?this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1:0)<1?0:1,e=+nN(s[i].parentNode).attr("opacity");if(n.attr("data-hidden",0===e||0===r?"true":null),this.seriesInteraction){if(this.secondaryLines.keys.includes(t.key)){const n=iE(t.values[0],r,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;return nN(s[i]).attr("data-hidden",0===n?"true":null),n}{const n=iE(t.values[0],r,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;return nN(s[i]).attr("data-hidden",0===n?"true":null),n}}return nN(s[i]).attr("data-hidden",0===r?"true":null),r})})}setLabelOpacity(){this.updatingLabelGroups.attr("opacity",t=>(this.dataLabel.visible?this.secondaryLines.keys.includes(t.key)&&this.secondaryLines.showDataLabel?this.secondaryLines.opacity:this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showDataLabel?0:1:0)<1?0:1),this.updatingLabels.each((t,i,s)=>{t.enter||t.enterWholeGroup||t.exit||t.exitWholeGroup||nN(s[i]).attr("opacity",()=>{const n=iE(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1,r=+nN(s[i].parentNode).attr("opacity");return nN(s[i]).attr("data-hidden",0===r||0===n?"true":null),n})})}bindInteractivity(){this.updateLines.on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateDots.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.seriesLabelUpdate.on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onSeriesHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updatingLabels.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler())}addStrokeUnder(){const t=ST({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.labels.attr("filter",t),this.seriesLabelG.attr("filter",t)}updateColors(){this.updateDotWrappers.attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]),this.updateDots.attr("stroke",this.handleDotStroke),this.updateLines.attr("stroke",this.handleLineStroke),this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill),this.updatingLabelGroups.attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]),this.updatingLabels.attr("fill",this.handleTextFill)}updateCursor(){this.updateLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null),this.updateDots.attr("cursor",this.suppressEvents?null:this.cursor),this.seriesLabelUpdate.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null),this.updatingLabels.attr("cursor",this.suppressEvents?null:this.cursor)}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class",".parallel-reference").attr("opacity",1),s=i.append("line");s.attr("class","line-reference-line").attr("opacity",0);const n=i.append("text");n.attr("class","parallel-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".parallel-reference-line").data(t=>[t]).transition("merge").ease(wS).duration(this.duration),h=r.selectAll(".parallel-reference-line-label").data(t=>[t]).transition("merge").ease(wS).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(wS).duration(this.duration).attr("opacity",0).remove(),i.attr("transform",t=>"translate(0,"+this.y(t.value)+")"),r.transition("merge").ease(wS).duration(this.duration).attr("transform",t=>"translate(0,"+this.y(t.value)+")"),s.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),n.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.style("stroke",ME[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",ME[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}updateStrokeWidth(){this.updateLines.attr("stroke-width",t=>this.calculateStrokeWidth(t,!0)),this.updateDots.attr("stroke",this.handleDotStroke)}updateStrokePattern(){this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)}updateDotRadius(){this.updateDots.each((t,i,s)=>{const n=nN(s[i]);t.enter||t.enterWholeGroup||n.classed("entering")||t.exit||n.attr("r",()=>sE(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):nE(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)}).attr("stroke",this.handleDotStroke)}setSelectedClass(){this.updateDots.classed("highlight",(t,i,s)=>{let n=iE(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return n=!(!this.clickHighlight||!this.clickHighlight.length)&&n,ZT(s[i],n,this.accessibility.elementsAreInterface),n})}drawAnnotations(){QT({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.ordinalAccessor,yScale:this.y,yAccessor:this.valueAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){KT(this.parallelChartEl,this.annotations)}setTagLevels(){this.topLevel=TT(this.highestHeadingLevel),this.bottomLevel=TT(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){DT({rootEle:this.parallelChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"parallel-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){OT({node:this.svg.node(),chartTag:"parallel-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:mE(this,tE,"parallel-plot"),groupAccessor:this.seriesAccessor,groupName:"line",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.updateDots.each((t,i,s)=>{$T(s[i])})}setGeometryAriaLabels(){const t=mE(this,tE,"parallel-plot");this.updateDots.each((i,s,n)=>{CT({node:n[s],geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"line",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),IT({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateDotWrappers.each((t,i,s)=>{IT({node:s[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){_T(this.parallelChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){HT(this.parallelChartEl,this.subTitle)}setChartAccessibilityLongDescription(){qT(this.parallelChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){PT(this.parallelChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){RT(this.parallelChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){XT(this.parallelChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){jT(this.parallelChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){FT({rootEle:this.parallelChartEl,parentGNode:this.dotG.node(),chartTag:"parallel-plot",geomType:"point",groupName:"line"})}setChartAccessibilityStructureNotes(){YT(this.parallelChartEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.interpolating=!1,this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){yE(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&t[this.ordinalAccessor]&&this.eventsTooltip({data:t,evt:GW,isToShow:!0})}onSeriesHoverHandler(t){this.hoverFunc.emit(t)}onMouseOutHandler(){yE(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){pE(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){uE({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,chartType:"parallel"})}bindLegendInteractivity(){nN(this.parallelChartEl).selectAll(".legend").on("click",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?t=>{t.values&&this.hoverFunc.emit(t.values[0])}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive?()=>this.onMouseOutHandler():null)}setLegendCursor(){nN(this.parallelChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?this.cursor:null)}drawLegendElements(){aE({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,dashPatterns:this.accessibility.hideTextures?null:this.dashPatterns,margin:this.margin,padding:this.padding,duration:this.duration,type:"parallel",secondary:this.secondaryLines.keys,fontSize:16,data:this.nest,label:this.legend.labels,hide:!(this.legend.visible||!this.legend),interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldSetScaleUsed&&(this.setScaleUsed(),this.shouldSetScaleUsed=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateInterpolationData&&(this.updateInterpolationData(),this.shouldUpdateInterpolationData=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldValidateSeriesLabels&&(this.validateSeriesLabels(),this.shouldValidateSeriesLabels=!1),s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"parallel-main-title vcl-main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions parallel-sub-title vcl-sub-title"},this.subTitle),s("div",{class:"parallel-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"point",groupName:"line",chartTag:"parallel-plot",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:!0,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-parallel-container"}),s("div",{class:"parallel-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(yS);let i=0;const s={wrapLabel:{exception:!1},strokeWidth:{exception:0},showDots:{exception:!1},hoverOpacity:{exception:0},dotRadius:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:!1}};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:yS[t[i]]}}get parallelChartEl(){return n(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],seriesAccessor:["seriesAccessorWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],showBaselineX:["showBaselineXWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],showDots:["showDotsWatcher"],dotRadius:["dotRadiusWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],secondaryLines:["secondaryLinesWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}parallel-plot{cursor:default}parallel-plot .annotations{pointer-events:none}parallel-plot .annotations .handle{pointer-events:all}parallel-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}parallel-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}parallel-plot .hidden{display:none}parallel-plot .axis{font-size:12px}parallel-plot .axis text{fill:#767676}parallel-plot .axis-label{text-anchor:middle;font:1rem sans-serif}parallel-plot .axis path{stroke:#767676}parallel-plot .grid line{stroke:#767676;shape-rendering:crispEdges}parallel-plot .grid path{stroke-width:0;stroke:#767676}parallel-plot .grid.left line{stroke-dasharray:4, 4;stroke-opacity:0.6}parallel-plot .parallel-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}parallel-plot .parallel-group__inactive{opacity:0}parallel-plot .parallel-group .parallel-plot{fill:none}parallel-plot .parallel-group .dot{stroke:#ffffff}parallel-plot .parallel-group .parallel-series-label{font-size:1em}parallel-plot .parallel-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}parallel-plot .parallel-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"}};window.VisaChartsLibOSSLicenses=fE();var LE="http://www.w3.org/1999/xhtml";const SE={svg:"http://www.w3.org/2000/svg",xhtml:LE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function TE(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),SE.hasOwnProperty(i)?{space:SE[i],local:t}:t}function EE(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===LE&&i.documentElement.namespaceURI===LE?i.createElement(t):i.createElementNS(s,t)}}function DE(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function $E(t){var i=TE(t);return(i.local?DE:EE)(i)}function CE(){}function IE(t){return null==t?CE:function(){return this.querySelector(t)}}function OE(){return[]}function zE(t){return null==t?OE:function(){return this.querySelectorAll(t)}}function _E(t){return function(){return this.matches(t)}}function HE(t){return new Array(t.length)}function qE(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function PE(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new qE(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function RE(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new qE(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function XE(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function jE(t){return function(){this.removeAttribute(t)}}function FE(t){return function(){this.removeAttributeNS(t.space,t.local)}}function GE(t,i){return function(){this.setAttribute(t,i)}}function VE(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function YE(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function KE(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function BE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function UE(t){return function(){this.style.removeProperty(t)}}function ZE(t,i,s){return function(){this.style.setProperty(t,i,s)}}function JE(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function QE(t,i){return t.style.getPropertyValue(i)||BE(t).getComputedStyle(t,null).getPropertyValue(i)}function tD(t){return function(){delete this[t]}}function iD(t,i){return function(){this[t]=i}}function sD(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function nD(t){return t.trim().split(/^|\s+/)}function rD(t){return t.classList||new eD(t)}function eD(t){this._node=t,this._names=nD(t.getAttribute("class")||"")}function hD(t,i){for(var s=rD(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function aD(t,i){for(var s=rD(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function oD(t){return function(){hD(this,t)}}function uD(t){return function(){aD(this,t)}}function cD(t,i){return function(){(i.apply(this,arguments)?hD:aD)(this,t)}}function lD(){this.textContent=""}function fD(t){return function(){this.textContent=t}}function dD(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function vD(){this.innerHTML=""}function pD(t){return function(){this.innerHTML=t}}function yD(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function wD(){this.nextSibling&&this.parentNode.appendChild(this)}function gD(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mD(){return null}function bD(){var t=this.parentNode;t&&t.removeChild(this)}function MD(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function kD(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}qE.prototype={constructor:qE,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},eD.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var xD={},AD=null;function WD(t,i,s){return t=ND(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function ND(t,i,s){return function(n){var r=AD;AD=n;try{t.call(this,this.__data__,i,s)}finally{AD=r}}}function LD(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function SD(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function TD(t,i,s){var n=xD.hasOwnProperty(t.type)?WD:ND;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function ED(t,i,s){var n=BE(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function DD(t,i){return function(){return ED(this,t,i)}}function $D(t,i){return function(){return ED(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(xD={mouseenter:"mouseover",mouseleave:"mouseout"}));var CD=[null];function ID(t,i){this._groups=t,this._parents=i}function OD(){return new ID([[document.documentElement]],CD)}function zD(t){return"string"==typeof t?new ID([[document.querySelector(t)]],[document.documentElement]):new ID([[t]],CD)}function _D(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}ID.prototype=OD.prototype={constructor:ID,select:function(t){"function"!=typeof t&&(t=IE(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new ID(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=zE(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new ID(n,r)},filter:function(t){"function"!=typeof t&&(t=_E(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new ID(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?RE:PE,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new ID(h,n))._enter=a,h._exit=o,h},enter:function(){return new ID(this._enter||this._groups.map(HE),this._parents)},exit:function(){return new ID(this._exit||this._groups.map(HE),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new ID(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=XE);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new ID(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=TE(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?FE:jE:"function"==typeof i?s.local?KE:YE:s.local?VE:GE)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?UE:"function"==typeof i?JE:ZE)(t,i,null==s?"":s)):QE(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?tD:"function"==typeof i?sD:iD)(t,i)):this.node()[t]},classed:function(t,i){var s=nD(t+"");if(arguments.length<2){for(var n=rD(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?cD:i?oD:uD)(s,i))},text:function(t){return arguments.length?this.each(null==t?lD:("function"==typeof t?dD:fD)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?vD:("function"==typeof t?yD:pD)(t)):this.node().innerHTML},raise:function(){return this.each(wD)},lower:function(){return this.each(gD)},append:function(t){var i="function"==typeof t?t:$E(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:$E(t),n=null==i?mD:"function"==typeof i?i:IE(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(bD)},clone:function(t){return this.select(t?kD:MD)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=LD(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?TD:SD,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?$D:DD)(t,i))}};var HD=function(t){return 1===t.length&&(t=function(t){return function(i,s){return _D(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}(_D).right;function qD(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var PD=Math.sqrt(50),RD=Math.sqrt(10),XD=Math.sqrt(2);function jD(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=PD?10:e>=RD?5:e>=XD?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=PD?10:e>=RD?5:e>=XD?2:1)}function FD(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e],e,t))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e],e,t))&&s>n&&(n=s);return n}function GD(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function VD(){}function YD(t,i){var s=new VD;if(t instanceof VD)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}VD.prototype=YD.prototype={constructor:VD,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var KD=Array.prototype,BD=KD.map,UD=KD.slice,ZD={name:"implicit"};function JD(){var t=YD(),i=[],s=[],n=ZD;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==ZD)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=YD();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=UD.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return JD(i,s).unknown(n)},GD.apply(r,arguments),r}function QD(){var t,i,s=JD().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=qD(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return QD(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},GD.apply(c(),arguments)}function t$(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function i$(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function s$(){}var n$="\\s*([+-]?\\d+)\\s*",r$="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",e$="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h$=/^#([0-9a-f]{3,8})$/,a$=new RegExp("^rgb\\("+[n$,n$,n$]+"\\)$"),o$=new RegExp("^rgb\\("+[e$,e$,e$]+"\\)$"),u$=new RegExp("^rgba\\("+[n$,n$,n$,r$]+"\\)$"),c$=new RegExp("^rgba\\("+[e$,e$,e$,r$]+"\\)$"),l$=new RegExp("^hsl\\("+[r$,e$,e$]+"\\)$"),f$=new RegExp("^hsla\\("+[r$,e$,e$,r$]+"\\)$"),d$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v$(){return this.rgb().formatHex()}function p$(){return this.rgb().formatRgb()}function y$(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=h$.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?w$(i):3===s?new M$(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?g$(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?g$(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=a$.exec(t))?new M$(i[1],i[2],i[3],1):(i=o$.exec(t))?new M$(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=u$.exec(t))?g$(i[1],i[2],i[3],i[4]):(i=c$.exec(t))?g$(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=l$.exec(t))?W$(i[1],i[2]/100,i[3]/100,1):(i=f$.exec(t))?W$(i[1],i[2]/100,i[3]/100,i[4]):d$.hasOwnProperty(t)?w$(d$[t]):"transparent"===t?new M$(NaN,NaN,NaN,0):null}function w$(t){return new M$(t>>16&255,t>>8&255,255&t,1)}function g$(t,i,s,n){return n<=0&&(t=i=s=NaN),new M$(t,i,s,n)}function m$(t){return t instanceof s$||(t=y$(t)),t?new M$((t=t.rgb()).r,t.g,t.b,t.opacity):new M$}function b$(t,i,s,n){return 1===arguments.length?m$(t):new M$(t,i,s,null==n?1:n)}function M$(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function k$(){return"#"+A$(this.r)+A$(this.g)+A$(this.b)}function x$(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function A$(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function W$(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new L$(t,i,s,n)}function N$(t){if(t instanceof L$)return new L$(t.h,t.s,t.l,t.opacity);if(t instanceof s$||(t=y$(t)),!t)return new L$;if(t instanceof L$)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new L$(h,a,o,t.opacity)}function L$(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function S$(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function T$(t){return function(){return t}}function E$(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):T$(isNaN(t)?i:t)}t$(s$,y$,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:v$,formatHex:v$,formatHsl:function(){return N$(this).formatHsl()},formatRgb:p$,toString:p$}),t$(M$,b$,i$(s$,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new M$(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new M$(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k$,formatHex:k$,formatRgb:x$,toString:x$})),t$(L$,(function(t,i,s,n){return 1===arguments.length?N$(t):new L$(t,i,s,null==n?1:n)}),i$(s$,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new L$(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new L$(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new M$(S$(t>=240?t-240:t+120,r,n),S$(t,r,n),S$(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const D$=function t(i){var s=function(t){return 1==(t=+t)?E$:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):T$(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=b$(t)).r,(i=b$(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=E$(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function $$(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function C$(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=P$(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function I$(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function O$(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function z$(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=P$(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var _$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,H$=new RegExp(_$.source,"g");function q$(t,i){var s,n,r,e=_$.lastIndex=H$.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=_$.exec(t))&&(n=H$.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:O$(s,n)})),e=H$.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function P$(t,i){var s,n=typeof i;return null==i||"boolean"===n?T$(i):("number"===n?O$:"string"===n?(s=y$(i))?(i=s,D$):q$:i instanceof y$?D$:i instanceof Date?I$:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?$$:Array.isArray(i)?C$:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?z$:O$)(t,i)}function R$(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var X$,j$,F$,G$,V$=180/Math.PI,Y$={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function K$(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*V$,skewX:Math.atan(o)*V$,scaleX:h,scaleY:a}}function B$(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:O$(t,r)},{i:o-2,x:O$(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:O$(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:O$(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:O$(t,s)},{i:a-2,x:O$(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var U$=B$((function(t){return"none"===t?Y$:(X$||(X$=document.createElement("DIV"),j$=document.documentElement,F$=document.defaultView),X$.style.transform=t,t=F$.getComputedStyle(j$.appendChild(X$),null).getPropertyValue("transform"),j$.removeChild(X$),K$(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Z$=B$((function(t){return null==t?Y$:(G$||(G$=document.createElementNS("http://www.w3.org/2000/svg","g")),G$.setAttribute("transform",t),(t=G$.transform.baseVal.consolidate())?K$((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Y$)}),", ",")",")");function J$(t){return+t}var Q$=[0,1];function tC(t){return t}function iC(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function sC(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function nC(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=iC(r,n),e=s(h,e)):(n=iC(n,r),e=s(e,h)),function(t){return e(n(t))}}function rC(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=iC(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=HD(t,i,1,n)-1;return e[s](r[s](i))}}function eC(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function hC(t,i){return function(){var t,i,s,n,r,e,h=Q$,a=Q$,o=P$,u=tC;function c(){return n=Math.min(h.length,a.length)>2?rC:nC,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),O$)))(s)))},l.domain=function(t){return arguments.length?(h=BD.call(t,J$),u===tC||(u=sC(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=UD.call(t),c()):a.slice()},l.rangeRound=function(t){return a=UD.call(t),o=R$,c()},l.clamp=function(t){return arguments.length?(u=t?sC(h):tC,l):u!==tC},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function aC(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function oC(t){return(t=aC(Math.abs(t)))?t[1]:NaN}var uC,cC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lC(t){if(!(i=cC.exec(t)))throw new Error("invalid format: "+t);var i;return new fC({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function fC(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function dC(t,i){var s=aC(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}lC.prototype=fC.prototype,fC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const vC={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return dC(100*t,i)},r:dC,s:function(t,i){var s=aC(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(uC=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+aC(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function pC(t){return t}var yC,wC,gC,mC=Array.prototype.map,bC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function MC(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=jD(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=function(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=PD?r*=10:e>=RD?r*=5:e>=XD&&(r*=2),i<t?-r:r}(t,i,s);switch((n=lC(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(oC(i)/3)))-oC(Math.abs(t)))}(e,h))||(n.precision=r),gC(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,oC(i)-oC(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-oC(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return wC(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=jD(a,o,s))>0?n=jD(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=jD(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function kC(){var t=hC(tC,tC);return t.copy=function(){return eC(t,kC())},GD.apply(t,arguments),MC(t)}yC=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?pC:(i=mC.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?pC:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(mC.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=lC(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):vC[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?o:"",M=vC[g],k=/[defgprs%]/.test(g);function x(t){var r,e,o,f=m,x=b;if("c"===g)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===g?bC[8+uC/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var W=f.length+t.length+x.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=n(N+t,N.length?v-x.length:1/0),N=""),s){case"<":t=f+t+x+N;break;case"=":t=f+N+t+x;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+x+N.slice(W);break;default:t=N+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=lC(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(oC(i)/3))),r=Math.pow(10,-n),e=bC[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),wC=yC.format,gC=yC.formatPrefix;var xC=Math.PI,AC=2*xC,WC=AC-1e-6;function NC(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function LC(){return new NC}function SC(t){return function(){return t}}function TC(t){this._context=t}function EC(t){return new TC(t)}function DC(t){return t[0]}function $C(t){return t[1]}NC.prototype=LC.prototype={constructor:NC,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,s,n){this._+="Q"+ +t+","+ +i+","+(this._x1=+s)+","+(this._y1=+n)},bezierCurveTo:function(t,i,s,n,r,e){this._+="C"+ +t+","+ +i+","+ +s+","+ +n+","+(this._x1=+r)+","+(this._y1=+e)},arcTo:function(t,i,s,n,r){var e=this._x1,h=this._y1,a=(s=+s)-(t=+t),o=(n=+n)-(i=+i),u=e-t,c=h-i,l=u*u+c*c;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(l>1e-6)if(Math.abs(c*a-o*u)>1e-6&&r){var f=s-e,d=n-h,v=a*a+o*o,p=f*f+d*d,y=Math.sqrt(v),w=Math.sqrt(l),g=r*Math.tan((xC-Math.acos((v+l-p)/(2*y*w)))/2),m=g/w,b=g/y;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*u)+","+(i+m*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>u*d)+","+(this._x1=t+b*a)+","+(this._y1=i+b*o)}else this._+="L"+(this._x1=t)+","+(this._y1=i)},arc:function(t,i,s,n,r,e){t=+t,i=+i,e=!!e;var h=(s=+s)*Math.cos(n),a=s*Math.sin(n),o=t+h,u=i+a,c=1^e,l=e?n-r:r-n;if(s<0)throw new Error("negative radius: "+s);null===this._x1?this._+="M"+o+","+u:(Math.abs(this._x1-o)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+o+","+u),s&&(l<0&&(l=l%AC+AC),l>WC?this._+="A"+s+","+s+",0,1,"+c+","+(t-h)+","+(i-a)+"A"+s+","+s+",0,1,"+c+","+(this._x1=o)+","+(this._y1=u):l>1e-6&&(this._+="A"+s+","+s+",0,"+ +(l>=xC)+","+c+","+(this._x1=t+s*Math.cos(r))+","+(this._y1=i+s*Math.sin(r))))},rect:function(t,i,s,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +s+"v"+ +n+"h"+-s+"Z"},toString:function(){return this._}},TC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}};var CC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),IC=new Uint8Array(16);function OC(){if(!CC)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return CC(IC)}for(var zC=[],_C=0;_C<256;++_C)zC[_C]=(_C+256).toString(16).substr(1);function HC(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||OC)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[zC[t[i++]],zC[t[i++]],zC[t[i++]],zC[t[i++]],"-",zC[t[i++]],zC[t[i++]],"-",zC[t[i++]],zC[t[i++]],"-",zC[t[i++]],zC[t[i++]],"-",zC[t[i++]],zC[t[i++]],zC[t[i++]],zC[t[i++]],zC[t[i++]],zC[t[i++]]].join("")}(r)}var qC={value:function(){}};function PC(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new RC(n)}function RC(t){this._=t}function XC(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function jC(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function FC(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=qC,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}RC.prototype=PC.prototype={constructor:RC,on:function(t,i){var s,n=this._,r=XC(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=FC(n[s],t.name,i);else if(null==i)for(s in n)n[s]=FC(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=jC(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new RC(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var GC,VC,YC=0,KC=0,BC=0,UC=0,ZC=0,JC=0,QC="object"==typeof performance&&performance.now?performance:Date,tI="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function iI(){return ZC||(tI(sI),ZC=QC.now()+JC)}function sI(){ZC=0}function nI(){this._call=this._time=this._next=null}function rI(t,i,s){var n=new nI;return n.restart(t,i,s),n}function eI(){ZC=(UC=QC.now())+JC,YC=KC=0;try{!function(){iI(),++YC;for(var t,i=GC;i;)(t=ZC-i._time)>=0&&i._call.call(null,t),i=i._next;--YC}()}finally{YC=0,function(){for(var t,i,s=GC,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:GC=i);VC=t,aI(n)}(),ZC=0}}function hI(){var t=QC.now(),i=t-UC;i>1e3&&(JC-=i,UC=t)}function aI(t){YC||(KC&&(KC=clearTimeout(KC)),t-ZC>24?(t<1/0&&(KC=setTimeout(eI,t-QC.now()-JC)),BC&&(BC=clearInterval(BC))):(BC||(UC=QC.now(),BC=setInterval(hI,1e3)),YC=1,tI(eI)))}function oI(t,i,s){var n=new nI;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}nI.prototype=rI.prototype={constructor:nI,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?iI():+s)+(null==i?0:+i),this._next||VC===this||(VC?VC._next=this:GC=this,VC=this),this._call=t,this._time=s,aI()},stop:function(){this._call&&(this._call=null,this._time=1/0,aI())}};var uI=PC("start","end","interrupt"),cI=[];function lI(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return oI(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(oI((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=rI((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:uI,tween:cI,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function fI(t,i){var s=vI(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function dI(t,i){var s=vI(t,i);if(s.state>2)throw new Error("too late; already started");return s}function vI(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function pI(t,i){var s,n;return function(){var r=dI(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function yI(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=dI(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function wI(t,i,s){var n=t._id;return t.each((function(){var t=dI(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return vI(t,n).value[i]}}function gI(t,i){var s;return("number"==typeof i?O$:i instanceof y$?D$:(s=y$(i))?(i=s,D$):q$)(t,i)}function mI(t){return function(){this.removeAttribute(t)}}function bI(t){return function(){this.removeAttributeNS(t.space,t.local)}}function MI(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function kI(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function xI(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function AI(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function WI(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function NI(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function LI(t,i){return function(){fI(this,t).delay=+i.apply(this,arguments)}}function SI(t,i){return i=+i,function(){fI(this,t).delay=i}}function TI(t,i){return function(){dI(this,t).duration=+i.apply(this,arguments)}}function EI(t,i){return i=+i,function(){dI(this,t).duration=i}}function DI(t,i){if("function"!=typeof i)throw new Error;return function(){dI(this,t).ease=i}}function $I(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?fI:dI;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var CI=OD.prototype.constructor;function II(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var OI=0;function zI(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function _I(){return++OI}var HI=OD.prototype;zI.prototype=function(t){return OD().transition(t)}.prototype={constructor:zI,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=IE(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,lI(l[f],i,s,f,l,vI(a,s)));return new zI(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=zE(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=vI(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&lI(f,i,s,p,d,v);e.push(d),h.push(o)}return new zI(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=_E(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new zI(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new zI(e,this._parents,this._name,this._id)},selection:function(){return new CI(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=_I(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=vI(h,i);lI(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new zI(n,this._parents,t,s)},call:HI.call,nodes:HI.nodes,node:HI.node,size:HI.size,empty:HI.empty,each:HI.each,on:function(t,i){var s=this._id;return arguments.length<2?vI(this.node(),s).on.on(t):this.each($I(s,t,i))},attr:function(t,i){var s=TE(t),n="transform"===s?Z$:gI;return this.attrTween(t,"function"==typeof i?(s.local?AI:xI)(s,n,wI(this,"attr."+t,i)):null==i?(s.local?bI:mI)(s):(s.local?kI:MI)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=TE(t);return this.tween(s,(n.local?WI:NI)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?U$:gI;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=QE(this,t),h=(this.style.removeProperty(t),QE(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=QE(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=QE(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,wI(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=QE(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,II(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(wI(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=vI(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?pI:yI)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?LI:SI)(i,t)):vI(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?TI:EI)(i,t)):vI(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(DI(i,t)):vI(this.node(),i).ease}};var qI={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function PI(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return qI.time=iI(),qI;return s}OD.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},OD.prototype.transition=function(t){var i,s;t instanceof zI?(i=t._id,t=t._name):(i=_I(),(s=qI).time=iI(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&lI(h,t,i,u,a,s||PI(h,i));return new zI(n,this._parents,t,i)};const{initTooltipStyle:RI,drawAxis:XI,drawGrid:jI,drawTooltip:FI,formatStats:GI,getLicenses:VI,checkInteraction:YI,checkClicked:KI,checkHovered:BI,interactionStyle:UI,getColors:ZI,outlineColor:JI,visaColors:QI}=r,tO=class{constructor(s){t(this,s),this.height=400,this.width=800,this.showDataLabel=!0,this.ordinalAccessor="label",this.valueAccessor="value",this.showTooltip=!0,this.dataLabel={visible:!0,placement:"top",content:"valueAccessor",format:"0,0.00"},this.referenceLines=[],this.layout="vertical",this.xAxis={visible:!0,gridVisible:!0,tickInterval:1},this.yAxis={visible:!0,gridVisible:!0,tickInterval:1},this.wrapLabel=!1,this.colorPalette="single_blue",this.hoverOpacity=1,this.cursor="default",this.sortOrder="",this.roundedCorner=0,this.margin={top:.01*this.height,bottom:.01*this.height,right:.01*this.width,left:.01*this.width},this.padding={top:20,bottom:60,right:80,left:80},this.hideDataTable=!1,this.paretoStroke="#767676",this.paretoHighlight="#15195A",this.paretoDot=3,this.clickHighlight=[],this.shouldUpdateChart=!1,this.shouldUpdateBarStyle=!1,this.placeDataLabels=(t,i)=>{let s,n,r,e,h="0em";return"vertical"===this.layout?"top"===(this.dataLabel.placement||"top")?(s=this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2,n=this.y(Math.max(0,t[this.valueAccessor])),r="-.3em",e="middle"):"bottom"===(this.dataLabel.placement||"top")&&(s=this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2,n=this.y(0)-5,r="-.2em",e="middle"):"horizontal"===this.layout&&("top"===(this.dataLabel.placement||"top")?(n=this.y(t[this.ordinalAccessor])+this.y.bandwidth()/2+4,s=this.x(t[this.valueAccessor])+4,r=".2em",e="start"):"bottom"===(this.dataLabel.placement||"top")?(n=this.y(t[this.ordinalAccessor])+this.y.bandwidth()/2+4,s=this.x(0),r=".2em",e="start"):"bottomAbove"===(this.dataLabel.placement||"top")?(n=this.y(t[this.ordinalAccessor]),s=this.x(0),r=".2em",h="-.2em",e="start"):"bottomBelow"===(this.dataLabel.placement||"top")&&(n=this.y(t[this.ordinalAccessor])+this.y.bandwidth(),s=this.x(0),r=".2em",h="1em",e="start")),"x"===i?s:"y"===i?n:"em"===i?r:"em2"===i?h:"anchor"===i?e:null},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}idWatcher(t,i){this.chartID=t,this.barChartEl.id=this.chartID}dataWatcher(t,i){this.shouldUpdateChart=!0}highlightWatcher(t,i){this.shouldUpdateBarStyle=!0}componentWillLoad(){this.chartID=this.uniqueID||"bar-chart-"+HC(),this.barChartEl.id=this.chartID,this.updateChartVariable()}componentDidLoad(){this.updateData(),this.drawChart(),this.setTooltipInitialStyle()}componentWillUpdate(){this.updateChartVariable()}componentDidUpdate(){"asc"===this.sortOrder?this.data.sort((t,i)=>Number(t[this.valueAccessor])-Number(i[this.valueAccessor])):"desc"===this.sortOrder&&this.data.sort((t,i)=>Number(i[this.valueAccessor])-Number(t[this.valueAccessor])),this.shouldUpdateBarStyle?(this.shouldUpdateBarStyle=!1,this.updateBarSytle(this.bars)):(this.shouldUpdateChart=!1,this.updateData(),this.drawChart())}updateData(){var t=0;this.data.map((i,s)=>{i[this.valueAccessor]=parseFloat(i[this.valueAccessor]),i[this.valueAccessor]=+i[this.valueAccessor],t+=i[this.valueAccessor],i.CumulativeAmount=0===s?i[this.valueAccessor]:i[this.valueAccessor]+this.data[s-1].CumulativeAmount}),this.data.map(i=>{i.CumulativePercentage=i.CumulativeAmount/t})}updateChartVariable(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!("vertical"===this.layout)&&this.xAxis.gridVisible}),this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:"vertical"===this.layout&&this.yAxis.gridVisible}),this.innerXAxis.visible||(this.padding.bottom=.05*this.height),this.innerYAxis.visible||(this.padding.left=.05*this.width),!this.interactionKeys&&(this.interactionKeys=[this.groupAccessor||this.ordinalAccessor]),this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}updateBarSytle(t){t.attr("fill",t=>this.clickHighlight.length>0&&KI(t,this.clickHighlight,this.interactionKeys)&&this.clickStyle.color?QI[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&BI(t,this.hoverHighlight,this.interactionKeys)&&this.hoverStyle.color?QI[this.hoverStyle.color]||this.hoverStyle.color:this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])).attr("style",t=>UI({data:t,clickHighlight:this.clickHighlight,hoverHighlight:this.hoverHighlight,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,interactionKeys:this.interactionKeys,defaultStroke:JI(this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])),defaultStrokeWidth:3})).attr("opacity",t=>YI(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.interactionKeys))}drawChart(){if(this.reSetRoot(),"vertical"===this.layout){if(this.y=kC().domain([0,this.maxValueOverride||FD(this.data,t=>t[this.valueAccessor])]).range([this.innerPaddedHeight,0]),1==this.yAxis.gridVisible){var t=Math.ceil(10*FD(this.data,t=>t[this.valueAccessor]))/10;this.y=kC().domain([0,t]).range([this.innerPaddedHeight,0])}this.x=QD().domain(this.data.map(t=>t[this.ordinalAccessor])).range([0,this.innerPaddedWidth]).padding(.2),this.yCum=kC().domain([0,1]).range([this.innerPaddedHeight,0])}else"horizontal"===this.layout&&(this.x=kC().domain([0,this.maxValueOverride||FD(this.data,t=>t[this.valueAccessor])]).range([0,this.innerPaddedWidth]),this.y=QD().domain(this.data.map(t=>t[this.ordinalAccessor])).range([this.innerPaddedHeight,0]).padding(.2));this.line=function(){var t=DC,i=$C,s=SC(!0),n=null,r=EC,e=null;function h(h){var a,o,u,c=h.length,l=!1;for(null==n&&(e=r(u=LC())),a=0;a<=c;++a)!(a<c&&s(o=h[a],a,h))===l&&((l=!l)?e.lineStart():e.lineEnd()),l&&e.point(+t(o,a,h),+i(o,a,h));if(u)return e=null,u+""||null}return h.x=function(i){return arguments.length?(t="function"==typeof i?i:SC(+i),h):t},h.y=function(t){return arguments.length?(i="function"==typeof t?t:SC(+t),h):i},h.defined=function(t){return arguments.length?(s="function"==typeof t?t:SC(!!t),h):s},h.curve=function(t){return arguments.length?(r=t,null!=n&&(e=r(n)),h):r},h.context=function(t){return arguments.length?(null==t?n=e=null:e=r(n=t),h):n},h}().x(t=>this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2).y(t=>this.yCum(t.CumulativePercentage));const i=function(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e]))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e]))&&n>s&&(n=s);return n}(this.data,t=>t[this.valueAccessor]),s=FD(this.data,t=>t[this.valueAccessor]);this.colorArr=ZI(this.colors||this.colorPalette,this.groupAccessor?JD().domain(this.data.map(t=>t[this.groupAccessor])).domain():[i,s]),this.hoverStyle=this.hoverStyle?this.hoverStyle:this.colorPalette.includes("single")?{color:"comp_blue",strokeWidth:3}:{strokeWidth:3},this.clickStyle=this.clickStyle?this.clickStyle:this.colorPalette.includes("single")?{color:"supp_purple",strokeWidth:3}:{strokeWidth:3},this.drawGrid(),this.drawAxis(),this.drawBars(),this.line&&this.drawLine(),this.drawDataLabels(),this.drawReferenceLines()}reSetRoot(){this.svg&&this.svg.remove(),this.svg=zD(this.barChartEl).select("#visa-viz-d3-pareto-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),this.tooltipG=zD(this.barChartEl).select(".pareto-tooltip")}drawAxis(){XI({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel&&"vertical"===this.layout?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible}),XI({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible}),XI({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.yCum,right:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.formatCum||"0.0%",hide:!this.innerYAxis.visible})}formatDataLabel(t){return"ordinalAccessor"===this.dataLabel.content?t[this.ordinalAccessor]:this.dataLabel.format?GI(t[this.valueAccessor],this.dataLabel.format):t[this.valueAccessor]}drawDataLabels(){this.dataLabel.visible&&(this.rootG.selectAll("text.dataLabel").remove(),this.rootG.append("g").attr("class","bar-dataLabel-group").attr("id","bar-dataLabel-group").selectAll(".text").data(this.data).enter().append("text").attr("x",t=>this.placeDataLabels(t,"x")).attr("y",t=>this.placeDataLabels(t,"y")).attr("vertical"===this.layout?"dy":"dx",t=>this.placeDataLabels(t,"em")).attr("vertical"===this.layout?"dx":"dy",t=>this.placeDataLabels(t,"em2")).attr("text-anchor",t=>this.placeDataLabels(t,"anchor")).attr("class","bar-dataLabel-"+this.layout).text(t=>this.formatDataLabel(t)).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler()))}drawGrid(){jI(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!this.innerXAxis.gridVisible,this.xAxis.tickInterval),jI(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.innerYAxis.gridVisible,this.yAxis.tickInterval)}drawBars(){"vertical"===this.layout?this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class","bar").attr("tabindex",(t,i)=>0===i?"0":"-1").attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",t=>this.x(t[this.ordinalAccessor])).attr("y",t=>this.y(Math.max(0,t[this.valueAccessor]))).attr("height",t=>Math.abs(this.y(0)-this.y(t[this.valueAccessor]))).attr("width",this.x.bandwidth()).attr("cursor",this.cursor).attr("fill",t=>this.clickHighlight.length>0&&KI(t,this.clickHighlight,this.interactionKeys)&&this.clickStyle.color?QI[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&BI(t,this.hoverHighlight,this.interactionKeys)&&this.hoverStyle.color?QI[this.hoverStyle.color]||this.hoverStyle.color:this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])).attr("style",t=>UI({data:t,clickHighlight:this.clickHighlight,hoverHighlight:this.hoverHighlight,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,interactionKeys:this.interactionKeys,defaultStroke:JI(this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])),defaultStrokeWidth:3})).attr("opacity",t=>YI(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.interactionKeys)).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler()):"horizontal"===this.layout&&(this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class",t=>this.clickHighlight.includes(t[this.ordinalAccessor])?"bar highlight":"bar").attr("tabindex",(t,i)=>0===i?"0":"-1").attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",t=>this.x(Math.min(0,t[this.valueAccessor]))).attr("y",t=>this.y(t[this.ordinalAccessor])).attr("height",this.y.bandwidth()).attr("width",t=>Math.abs(this.x(t[this.valueAccessor])-this.x(0))).attr("cursor",this.cursor).attr("fill",t=>this.clickHighlight.length>0&&KI(t,this.clickHighlight,this.interactionKeys)&&this.clickStyle.color?QI[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&BI(t,this.hoverHighlight,this.interactionKeys)&&this.hoverStyle.color?QI[this.hoverStyle.color]||this.hoverStyle.color:this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])).attr("style",t=>UI({data:t,clickHighlight:this.clickHighlight,hoverHighlight:this.hoverHighlight,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,interactionKeys:this.interactionKeys,defaultStroke:JI(this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])),defaultStrokeWidth:3})).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler()))}drawLine(){let t,i=!1;for(let n=0;n<this.data.length;n++)!i&&this.data[n].CumulativePercentage>this.paretoThreshold&&(t=n,i=!0);const s=this.rootG.append("g").attr("class","pareto-line");s.append("path").datum(this.data).attr("d",this.line).attr("class","pareto-line-path").attr("x",this.x.bandwidth()/2).attr("fill","none").attr("stroke",this.paretoStroke).attr("stroke-width",1),s.selectAll(".pareto-background-dot").data([this.data[t]]).enter().append("circle").attr("class","pareto-background-dot").attr("fill","#fff").attr("stroke",this.paretoHighlight).attr("stroke-width","1px").attr("r",this.paretoDot+6).attr("cx",t=>this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2).attr("cy",t=>this.yCum(t.CumulativePercentage)),s.selectAll(".pareto-dot").data(this.data).enter().append("circle").attr("class","pareto-dot").attr("fill",(i,s)=>s===t?this.paretoHighlight:this.paretoStroke).attr("r",(i,s)=>t===s?this.paretoDot+3:this.paretoDot).attr("cx",t=>this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2).attr("cy",t=>this.yCum(t.CumulativePercentage)),s.selectAll("text").data(this.data).enter().append("text").attr("x",t=>this.placeDataLabels(t,"x")).attr("y",t=>this.yCum(t.CumulativePercentage)).attr("dy","-1em").attr("text-anchor","middle").attr("class","pareto-label").attr("fill",this.paretoHighlight).text((i,s)=>t===s?GI(i.CumulativePercentage,"0.0%"):"")}drawReferenceLines(){this.referenceLines.length>0&&("vertical"===this.layout?(this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",t=>t.referenceID).attr("class","bar-reference-line").attr("x1",0).attr("x2",this.innerPaddedWidth).attr("y1",t=>this.y(t.referenceData.referenceValue)).attr("y2",t=>this.y(t.referenceData.referenceValue)).style("stroke",t=>t.referenceData.strokeColor).style("stroke-width",t=>t.referenceData.strokeWidth).style("opacity",t=>t.referenceData.strokeOpacity),this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",t=>t.referenceID+"-label").attr("class","bar-reference-line-label").attr("text-anchor",t=>"right"===(t.referenceData.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.referenceData.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("dx",t=>"right"===(t.referenceData.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("y",t=>this.y(t.referenceData.referenceValue)).attr("dy","0.3em").text(t=>t.referenceData.labelValue).style("fill",t=>t.referenceData.strokeColor)):"horizontal"===this.layout&&(this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",t=>t.referenceID).attr("class","bar-reference-line").attr("y1",0).attr("y2",this.innerPaddedHeight).attr("x1",t=>this.x(t.referenceData.referenceValue)).attr("x2",t=>this.x(t.referenceData.referenceValue)).style("stroke",t=>t.referenceData.strokeColor).style("stroke-width",t=>t.referenceData.strokeWidth).style("opacity",t=>t.referenceData.strokeOpacity),this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",t=>t.referenceID+"-label").attr("class","bar-reference-line-label").attr("text-anchor","middle").attr("x",t=>this.x(t.referenceData.referenceValue)).attr("y",t=>"top"===(t.referenceData.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dy",t=>"top"===(t.referenceData.labelPlacementVertical||"top")?"-0.3em":"1em").text(t=>t.referenceData.labelValue).style("fill",t=>t.referenceData.strokeColor)),this.rootG.exit().remove())}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){this.hoverFunc.emit(t),this.showTooltip&&this.eventsTooltip({data:t,evt:AD,isToShow:!0})}onMouseOutHandler(){this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){RI(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){FI({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:void 0,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})}render(){return s("div",{class:`o-layout is--${this.layout} light`},s("div",{class:"o-layout--chart"},s("h1",{class:"visa-ui-header--4"},this.mainTitle),s("p",{class:"visa-ui-text--instructions"},this.subTitle),s("div",{class:"pareto-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("div",{id:"visa-viz-d3-pareto-container"})))}get barChartEl(){return n(this)}static get watchers(){return{uniqueID:["idWatcher"],data:["dataWatcher"],hoverHighlight:["highlightWatcher"],clickHighlight:["highlightWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}pareto-chart .axis{font-size:12px}pareto-chart .axis text{font:0.65rem;fill:#767676}pareto-chart .axis-label{text-anchor:middle;font:1rem sans-serif}pareto-chart .axis path{stroke:#767676}pareto-chart .patero-line path{stroke:#767676}pareto-chart .patero-line .patero-highlight{fill:black}pareto-chart .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}pareto-chart .grid path{stroke-width:0;stroke:#767676}pareto-chart .y.axis path{stroke:#767676;opacity:0}pareto-chart .x.axis path{stroke:#767676}pareto-chart .o-layout--chart .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}pareto-chart .o-layout--chart .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"}};window.VisaChartsLibOSSLicenses=VI();var iO="http://www.w3.org/1999/xhtml";const sO={svg:"http://www.w3.org/2000/svg",xhtml:iO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nO(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),sO.hasOwnProperty(i)?{space:sO[i],local:t}:t}function rO(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===iO&&i.documentElement.namespaceURI===iO?i.createElement(t):i.createElementNS(s,t)}}function eO(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hO(t){var i=nO(t);return(i.local?eO:rO)(i)}function aO(){}function oO(t){return null==t?aO:function(){return this.querySelector(t)}}function uO(){return[]}function cO(t){return null==t?uO:function(){return this.querySelectorAll(t)}}function lO(t){return function(){return this.matches(t)}}function fO(t){return new Array(t.length)}function dO(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function vO(t,i,s,n,r,e){for(var h,a=0,o=i.length,u=e.length;a<u;++a)(h=i[a])?(h.__data__=e[a],n[a]=h):s[a]=new dO(t,e[a]);for(;a<o;++a)(h=i[a])&&(r[a]=h)}function pO(t,i,s,n,r,e,h){var a,o,u,c={},l=i.length,f=e.length,d=new Array(l);for(a=0;a<l;++a)(o=i[a])&&(d[a]=u="$"+h.call(o,o.__data__,a,i),u in c?r[a]=o:c[u]=o);for(a=0;a<f;++a)(o=c[u="$"+h.call(t,e[a],a,e)])?(n[a]=o,o.__data__=e[a],c[u]=null):s[a]=new dO(t,e[a]);for(a=0;a<l;++a)(o=i[a])&&c[d[a]]===o&&(r[a]=o)}function yO(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function wO(t){return function(){this.removeAttribute(t)}}function gO(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mO(t,i){return function(){this.setAttribute(t,i)}}function bO(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function MO(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function kO(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function xO(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function AO(t){return function(){this.style.removeProperty(t)}}function WO(t,i,s){return function(){this.style.setProperty(t,i,s)}}function NO(t,i,s){return function(){var n=i.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,s)}}function LO(t,i){return t.style.getPropertyValue(i)||xO(t).getComputedStyle(t,null).getPropertyValue(i)}function SO(t){return function(){delete this[t]}}function TO(t,i){return function(){this[t]=i}}function EO(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function DO(t){return t.trim().split(/^|\s+/)}function $O(t){return t.classList||new CO(t)}function CO(t){this._node=t,this._names=DO(t.getAttribute("class")||"")}function IO(t,i){for(var s=$O(t),n=-1,r=i.length;++n<r;)s.add(i[n])}function OO(t,i){for(var s=$O(t),n=-1,r=i.length;++n<r;)s.remove(i[n])}function zO(t){return function(){IO(this,t)}}function _O(t){return function(){OO(this,t)}}function HO(t,i){return function(){(i.apply(this,arguments)?IO:OO)(this,t)}}function qO(){this.textContent=""}function PO(t){return function(){this.textContent=t}}function RO(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function XO(){this.innerHTML=""}function jO(t){return function(){this.innerHTML=t}}function FO(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function GO(){this.nextSibling&&this.parentNode.appendChild(this)}function VO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function YO(){return null}function KO(){var t=this.parentNode;t&&t.removeChild(this)}function BO(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function UO(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}dO.prototype={constructor:dO,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},CO.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ZO={},JO=null;function QO(t,i,s){return t=tz(t,i,s),function(i){var s=i.relatedTarget;s&&(s===this||8&s.compareDocumentPosition(this))||t.call(this,i)}}function tz(t,i,s){return function(n){var r=JO;JO=n;try{t.call(this,this.__data__,i,s)}finally{JO=r}}}function iz(t){return t.trim().split(/^|\s+/).map((function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}}))}function sz(t){return function(){var i=this.__on;if(i){for(var s,n=0,r=-1,e=i.length;n<e;++n)s=i[n],t.type&&s.type!==t.type||s.name!==t.name?i[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?i.length=r:delete this.__on}}}function nz(t,i,s){var n=ZO.hasOwnProperty(t.type)?QO:tz;return function(r,e,h){var a,o=this.__on,u=n(i,e,h);if(o)for(var c=0,l=o.length;c<l;++c)if((a=o[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=s),void(a.value=i);this.addEventListener(t.type,u,s),a={type:t.type,name:t.name,value:i,listener:u,capture:s},o?o.push(a):this.__on=[a]}}function rz(t,i,s){var n=xO(t),r=n.CustomEvent;"function"==typeof r?r=new r(i,s):(r=n.document.createEvent("Event"),s?(r.initEvent(i,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function ez(t,i){return function(){return rz(this,t,i)}}function hz(t,i){return function(){return rz(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ZO={mouseenter:"mouseover",mouseleave:"mouseout"}));var az=[null];function oz(t,i){this._groups=t,this._parents=i}function uz(){return new oz([[document.documentElement]],az)}function cz(t){return"string"==typeof t?new oz([[document.querySelector(t)]],[document.documentElement]):new oz([[t]],az)}function lz(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function fz(t){return 1===t.length&&(t=function(t){return function(i,s){return lz(t(i),s)}}(t)),{left:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)<0?n=e+1:r=e}return n},right:function(i,s,n,r){for(null==n&&(n=0),null==r&&(r=i.length);n<r;){var e=n+r>>>1;t(i[e],s)>0?r=e:n=e+1}return n}}}oz.prototype=uz.prototype={constructor:oz,select:function(t){"function"!=typeof t&&(t=oO(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h,a=i[r],o=a.length,u=n[r]=new Array(o),c=0;c<o;++c)(e=a[c])&&(h=t.call(e,e.__data__,c,a))&&("__data__"in e&&(h.__data__=e.__data__),u[c]=h);return new oz(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=cO(t));for(var i=this._groups,s=i.length,n=[],r=[],e=0;e<s;++e)for(var h,a=i[e],o=a.length,u=0;u<o;++u)(h=a[u])&&(n.push(t.call(h,h.__data__,u,a)),r.push(h));return new oz(n,r)},filter:function(t){"function"!=typeof t&&(t=lO(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new oz(n,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var s=i?pO:vO,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),a=new Array(e),o=new Array(e),u=0;u<e;++u){var c=n[u],l=r[u],f=l.length,d=t.call(c,c&&c.__data__,u,n),v=d.length,p=a[u]=new Array(v),y=h[u]=new Array(v);s(c,l,p,y,o[u]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new oz(h,n))._enter=a,h._exit=o,h},enter:function(){return new oz(this._enter||this._groups.map(fO),this._parents)},exit:function(){return new oz(this._exit||this._groups.map(fO),this._parents)},join:function(t,i,s){var n=this.enter(),r=this,e=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=i&&(r=i(r)),null==s?e.remove():s(e),n&&r?n.merge(r).order():r},merge:function(t){for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new oz(e,this._parents)},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var n,r=t[i],e=r.length-1,h=r[e];--e>=0;)(n=r[e])&&(h&&4^n.compareDocumentPosition(h)&&h.parentNode.insertBefore(n,h),h=n);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=yO);for(var s=this._groups,n=s.length,r=new Array(n),e=0;e<n;++e){for(var h,a=s[e],o=a.length,u=r[e]=new Array(o),c=0;c<o;++c)(h=a[c])&&(u[c]=h);u.sort(i)}return new oz(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var n=t[i],r=0,e=n.length;r<e;++r){var h=n[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,n=i.length;s<n;++s)for(var r,e=i[s],h=0,a=e.length;h<a;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var s=nO(t);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((null==i?s.local?gO:wO:"function"==typeof i?s.local?kO:MO:s.local?bO:mO)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?AO:"function"==typeof i?NO:WO)(t,i,null==s?"":s)):LO(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?SO:"function"==typeof i?EO:TO)(t,i)):this.node()[t]},classed:function(t,i){var s=DO(t+"");if(arguments.length<2){for(var n=$O(this.node()),r=-1,e=s.length;++r<e;)if(!n.contains(s[r]))return!1;return!0}return this.each(("function"==typeof i?HO:i?zO:_O)(s,i))},text:function(t){return arguments.length?this.each(null==t?qO:("function"==typeof t?RO:PO)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?XO:("function"==typeof t?FO:jO)(t)):this.node().innerHTML},raise:function(){return this.each(GO)},lower:function(){return this.each(VO)},append:function(t){var i="function"==typeof t?t:hO(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var s="function"==typeof t?t:hO(t),n=null==i?YO:"function"==typeof i?i:oO(i);return this.select((function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(KO)},clone:function(t){return this.select(t?UO:BO)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var n,r,e=iz(t+""),h=e.length;if(!(arguments.length<2)){for(a=i?nz:sz,null==s&&(s=!1),n=0;n<h;++n)this.each(a(e[n],i,s));return this}var a=this.node().__on;if(a)for(var o,u=0,c=a.length;u<c;++u)for(n=0,o=a[u];n<h;++n)if((r=e[n]).type===o.type&&r.name===o.name)return o.value},dispatch:function(t,i){return this.each(("function"==typeof i?hz:ez)(t,i))}};var dz=fz(lz).right;function vz(t,i,s){t=+t,i=+i,s=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+s;for(var n=-1,r=0|Math.max(0,Math.ceil((i-t)/s)),e=new Array(r);++n<r;)e[n]=t+n*s;return e}var pz=Math.sqrt(50),yz=Math.sqrt(10),wz=Math.sqrt(2);function gz(t,i,s){var n=(i-t)/Math.max(0,s),r=Math.floor(Math.log(n)/Math.LN10),e=n/Math.pow(10,r);return r>=0?(e>=pz?10:e>=yz?5:e>=wz?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=pz?10:e>=yz?5:e>=wz?2:1)}function mz(t,i,s){var n=Math.abs(i-t)/Math.max(0,s),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),e=n/r;return e>=pz?r*=10:e>=yz?r*=5:e>=wz&&(r*=2),i<t?-r:r}function bz(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function Mz(){}function kz(t,i){var s=new Mz;if(t instanceof Mz)t.each((function(t,i){s.set(i,t)}));else if(Array.isArray(t)){var n,r=-1,e=t.length;if(null==i)for(;++r<e;)s.set(r,t[r]);else for(;++r<e;)s.set(i(n=t[r],r,t),n)}else if(t)for(var h in t)s.set(h,t[h]);return s}function xz(){return{}}function Az(t,i,s){t[i]=s}function Wz(){return kz()}function Nz(t,i,s){t.set(i,s)}Mz.prototype=kz.prototype={constructor:Mz,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var Lz=Array.prototype,Sz=Lz.map,Tz=Lz.slice,Ez={name:"implicit"};function Dz(){var t=kz(),i=[],s=[],n=Ez;function r(r){var e=r+"",h=t.get(e);if(!h){if(n!==Ez)return n;t.set(e,h=i.push(r))}return s[(h-1)%s.length]}return r.domain=function(s){if(!arguments.length)return i.slice();i=[],t=kz();for(var n,e,h=-1,a=s.length;++h<a;)t.has(e=(n=s[h])+"")||t.set(e,i.push(n));return r},r.range=function(t){return arguments.length?(s=Tz.call(t),r):s.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return Dz(i,s).unknown(n)},bz.apply(r,arguments),r}function $z(){var t,i,s=Dz().unknown(void 0),n=s.domain,r=s.range,e=[0,1],h=!1,a=0,o=0,u=.5;function c(){var s=n().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,s-a+2*o),h&&(t=Math.floor(t)),l+=(f-l-t*(s-a))*u,i=t*(1-a),h&&(l=Math.round(l),i=Math.round(i));var d=vz(s).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(n(t),c()):n()},s.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},s.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},s.bandwidth=function(){return i},s.step=function(){return t},s.round=function(t){return arguments.length?(h=!!t,c()):h},s.padding=function(t){return arguments.length?(a=Math.min(1,o=+t),c()):a},s.paddingInner=function(t){return arguments.length?(a=Math.min(1,t),c()):a},s.paddingOuter=function(t){return arguments.length?(o=+t,c()):o},s.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},s.copy=function(){return $z(n(),e).round(h).paddingInner(a).paddingOuter(o).align(u)},bz.apply(c(),arguments)}function Cz(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function Iz(t,i){var s=Object.create(t.prototype);for(var n in i)s[n]=i[n];return s}function Oz(){}var zz="\\s*([+-]?\\d+)\\s*",_z="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hz="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qz=/^#([0-9a-f]{3,8})$/,Pz=new RegExp("^rgb\\("+[zz,zz,zz]+"\\)$"),Rz=new RegExp("^rgb\\("+[Hz,Hz,Hz]+"\\)$"),Xz=new RegExp("^rgba\\("+[zz,zz,zz,_z]+"\\)$"),jz=new RegExp("^rgba\\("+[Hz,Hz,Hz,_z]+"\\)$"),Fz=new RegExp("^hsl\\("+[_z,Hz,Hz]+"\\)$"),Gz=new RegExp("^hsla\\("+[_z,Hz,Hz,_z]+"\\)$"),Vz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yz(){return this.rgb().formatHex()}function Kz(){return this.rgb().formatRgb()}function Bz(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=qz.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?Uz(i):3===s?new t_(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?Zz(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?Zz(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Pz.exec(t))?new t_(i[1],i[2],i[3],1):(i=Rz.exec(t))?new t_(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=Xz.exec(t))?Zz(i[1],i[2],i[3],i[4]):(i=jz.exec(t))?Zz(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Fz.exec(t))?r_(i[1],i[2]/100,i[3]/100,1):(i=Gz.exec(t))?r_(i[1],i[2]/100,i[3]/100,i[4]):Vz.hasOwnProperty(t)?Uz(Vz[t]):"transparent"===t?new t_(NaN,NaN,NaN,0):null}function Uz(t){return new t_(t>>16&255,t>>8&255,255&t,1)}function Zz(t,i,s,n){return n<=0&&(t=i=s=NaN),new t_(t,i,s,n)}function Jz(t){return t instanceof Oz||(t=Bz(t)),t?new t_((t=t.rgb()).r,t.g,t.b,t.opacity):new t_}function Qz(t,i,s,n){return 1===arguments.length?Jz(t):new t_(t,i,s,null==n?1:n)}function t_(t,i,s,n){this.r=+t,this.g=+i,this.b=+s,this.opacity=+n}function i_(){return"#"+n_(this.r)+n_(this.g)+n_(this.b)}function s_(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function n_(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function r_(t,i,s,n){return n<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new h_(t,i,s,n)}function e_(t){if(t instanceof h_)return new h_(t.h,t.s,t.l,t.opacity);if(t instanceof Oz||(t=Bz(t)),!t)return new h_;if(t instanceof h_)return t;var i=(t=t.rgb()).r/255,s=t.g/255,n=t.b/255,r=Math.min(i,s,n),e=Math.max(i,s,n),h=NaN,a=e-r,o=(e+r)/2;return a?(h=i===e?(s-n)/a+6*(s<n):s===e?(n-i)/a+2:(i-s)/a+4,a/=o<.5?e+r:2-e-r,h*=60):a=o>0&&o<1?0:h,new h_(h,a,o,t.opacity)}function h_(t,i,s,n){this.h=+t,this.s=+i,this.l=+s,this.opacity=+n}function a_(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function o_(t){return function(){return t}}function u_(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):o_(isNaN(t)?i:t)}Cz(Oz,Bz,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Yz,formatHex:Yz,formatHsl:function(){return e_(this).formatHsl()},formatRgb:Kz,toString:Kz}),Cz(t_,Qz,Iz(Oz,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new t_(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new t_(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i_,formatHex:i_,formatRgb:s_,toString:s_})),Cz(h_,(function(t,i,s,n){return 1===arguments.length?e_(t):new h_(t,i,s,null==n?1:n)}),Iz(Oz,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new h_(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new h_(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*i,r=2*s-n;return new t_(a_(t>=240?t-240:t+120,r,n),a_(t,r,n),a_(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const c_=function t(i){var s=function(t){return 1==(t=+t)?u_:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(n){return Math.pow(t+n*i,s)}}(i,s,t):o_(isNaN(i)?s:i)}}(i);function n(t,i){var n=s((t=Qz(t)).r,(i=Qz(i)).r),r=s(t.g,i.g),e=s(t.b,i.b),h=u_(t.opacity,i.opacity);return function(i){return t.r=n(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return n.gamma=t,n}(1);function l_(t,i){i||(i=[]);var s,n=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(s=0;s<n;++s)r[s]=t[s]*(1-e)+i[s]*e;return r}}function f_(t,i){var s,n=i?i.length:0,r=t?Math.min(n,t.length):0,e=new Array(r),h=new Array(n);for(s=0;s<r;++s)e[s]=m_(t[s],i[s]);for(;s<n;++s)h[s]=i[s];return function(t){for(s=0;s<r;++s)h[s]=e[s](t);return h}}function d_(t,i){var s=new Date;return t=+t,i=+i,function(n){return s.setTime(t*(1-n)+i*n),s}}function v_(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}function p_(t,i){var s,n={},r={};for(s in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)s in t?n[s]=m_(t[s],i[s]):r[s]=i[s];return function(t){for(s in n)r[s]=n[s](t);return r}}var y_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w_=new RegExp(y_.source,"g");function g_(t,i){var s,n,r,e=y_.lastIndex=w_.lastIndex=0,h=-1,a=[],o=[];for(t+="",i+="";(s=y_.exec(t))&&(n=w_.exec(i));)(r=n.index)>e&&(r=i.slice(e,r),a[h]?a[h]+=r:a[++h]=r),(s=s[0])===(n=n[0])?a[h]?a[h]+=n:a[++h]=n:(a[++h]=null,o.push({i:h,x:v_(s,n)})),e=w_.lastIndex;return e<i.length&&(r=i.slice(e),a[h]?a[h]+=r:a[++h]=r),a.length<2?o[0]?function(t){return function(i){return t(i)+""}}(o[0].x):function(t){return function(){return t}}(i):(i=o.length,function(t){for(var s,n=0;n<i;++n)a[(s=o[n]).i]=s.x(t);return a.join("")})}function m_(t,i){var s,n=typeof i;return null==i||"boolean"===n?o_(i):("number"===n?v_:"string"===n?(s=Bz(i))?(i=s,c_):g_:i instanceof Bz?c_:i instanceof Date?d_:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?l_:Array.isArray(i)?f_:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?p_:v_)(t,i)}function b_(t,i){return t=+t,i=+i,function(s){return Math.round(t*(1-s)+i*s)}}var M_,k_,x_,A_,W_=180/Math.PI,N_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function L_(t,i,s,n,r,e){var h,a,o;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(o=t*s+i*n)&&(s-=t*o,n-=i*o),(a=Math.sqrt(s*s+n*n))&&(s/=a,n/=a,o/=a),t*n<i*s&&(t=-t,i=-i,o=-o,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*W_,skewX:Math.atan(o)*W_,scaleX:h,scaleY:a}}function S_(t,i,s,n){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var a=[],o=[];return e=t(e),h=t(h),function(t,n,r,e,h,a){if(t!==r||n!==e){var o=h.push("translate(",null,i,null,s);a.push({i:o-4,x:v_(t,r)},{i:o-2,x:v_(n,e)})}else(r||e)&&h.push("translate("+r+i+e+s)}(e.translateX,e.translateY,h.translateX,h.translateY,a,o),function(t,i,s,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:s.push(r(s)+"rotate(",null,n)-2,x:v_(t,i)})):i&&s.push(r(s)+"rotate("+i+n)}(e.rotate,h.rotate,a,o),function(t,i,s,e){t!==i?e.push({i:s.push(r(s)+"skewX(",null,n)-2,x:v_(t,i)}):i&&s.push(r(s)+"skewX("+i+n)}(e.skewX,h.skewX,a,o),function(t,i,s,n,e,h){if(t!==s||i!==n){var a=e.push(r(e)+"scale(",null,",",null,")");h.push({i:a-4,x:v_(t,s)},{i:a-2,x:v_(i,n)})}else 1===s&&1===n||e.push(r(e)+"scale("+s+","+n+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,a,o),e=h=null,function(t){for(var i,s=-1,n=o.length;++s<n;)a[(i=o[s]).i]=i.x(t);return a.join("")}}}var T_=S_((function(t){return"none"===t?N_:(M_||(M_=document.createElement("DIV"),k_=document.documentElement,x_=document.defaultView),M_.style.transform=t,t=x_.getComputedStyle(k_.appendChild(M_),null).getPropertyValue("transform"),k_.removeChild(M_),L_(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),E_=S_((function(t){return null==t?N_:(A_||(A_=document.createElementNS("http://www.w3.org/2000/svg","g")),A_.setAttribute("transform",t),(t=A_.transform.baseVal.consolidate())?L_((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):N_)}),", ",")",")");function D_(t){return+t}var $_=[0,1];function C_(t){return t}function I_(t,i){return(i-=t=+t)?function(s){return(s-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function O_(t){var i,s=t[0],n=t[t.length-1];return s>n&&(i=s,s=n,n=i),function(t){return Math.max(s,Math.min(n,t))}}function z_(t,i,s){var n=t[0],r=t[1],e=i[0],h=i[1];return r<n?(n=I_(r,n),e=s(h,e)):(n=I_(n,r),e=s(e,h)),function(t){return e(n(t))}}function __(t,i,s){var n=Math.min(t.length,i.length)-1,r=new Array(n),e=new Array(n),h=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<n;)r[h]=I_(t[h],t[h+1]),e[h]=s(i[h],i[h+1]);return function(i){var s=dz(t,i,1,n)-1;return e[s](r[s](i))}}function H_(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function q_(t,i){return function(){var t,i,s,n,r,e,h=$_,a=$_,o=m_,u=C_;function c(){return n=Math.min(h.length,a.length)>2?__:z_,r=e=null,l}function l(i){return isNaN(i=+i)?s:(r||(r=n(h.map(t),a,o)))(t(u(i)))}return l.invert=function(s){return u(i((e||(e=n(a,h.map(t),v_)))(s)))},l.domain=function(t){return arguments.length?(h=Sz.call(t,D_),u===C_||(u=O_(h)),c()):h.slice()},l.range=function(t){return arguments.length?(a=Tz.call(t),c()):a.slice()},l.rangeRound=function(t){return a=Tz.call(t),o=b_,c()},l.clamp=function(t){return arguments.length?(u=t?O_(h):C_,l):u!==C_},l.interpolate=function(t){return arguments.length?(o=t,c()):o},l.unknown=function(t){return arguments.length?(s=t,l):s},function(s,n){return t=s,i=n,c()}}()(t,i)}function P_(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function R_(t){return(t=P_(Math.abs(t)))?t[1]:NaN}var X_,j_=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function F_(t){if(!(i=j_.exec(t)))throw new Error("invalid format: "+t);var i;return new G_({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function G_(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function V_(t,i){var s=P_(t,i);if(!s)return t+"";var n=s[0],r=s[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}F_.prototype=G_.prototype,G_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Y_={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return V_(100*t,i)},r:V_,s:function(t,i){var s=P_(t,i);if(!s)return t+"";var n=s[0],r=s[1],e=r-(X_=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=n.length;return e===h?n:e>h?n+new Array(e-h+1).join("0"):e>0?n.slice(0,e)+"."+n.slice(e):"0."+new Array(1-e).join("0")+P_(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function K_(t){return t}var B_,U_,Z_,J_=Array.prototype.map,Q_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function tH(t){var i=t.domain;return t.ticks=function(t){var s=i();return function(t,i,s){var n,r,e,h,a=-1;if(s=+s,(t=+t)==(i=+i)&&s>0)return[t];if((n=i<t)&&(r=t,t=i,i=r),0===(h=gz(t,i,s))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++a<r;)e[a]=(t+a)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++a<r;)e[a]=(t-a)/h;return n&&e.reverse(),e}(s[0],s[s.length-1],null==t?10:t)},t.tickFormat=function(t,s){var n=i();return function(t,i,s,n){var r,e=mz(t,i,s);switch((n=F_(null==n?",f":n)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=n.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(R_(i)/3)))-R_(Math.abs(t)))}(e,h))||(n.precision=r),Z_(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,R_(i)-R_(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-R_(Math.abs(t)))}(e))||(n.precision=r-2*("%"===n.type))}return U_(n)}(n[0],n[n.length-1],null==t?10:t,s)},t.nice=function(s){null==s&&(s=10);var n,r=i(),e=0,h=r.length-1,a=r[e],o=r[h];return o<a&&(n=a,a=o,o=n,n=e,e=h,h=n),(n=gz(a,o,s))>0?n=gz(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,s):n<0&&(n=gz(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,s)),n>0?(r[e]=Math.floor(a/n)*n,r[h]=Math.ceil(o/n)*n,i(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[h]=Math.floor(o*n)/n,i(r)),t},t}function iH(){var t=q_(C_,C_);return t.copy=function(){return H_(t,iH())},bz.apply(t,arguments),tH(t)}B_=function(t){var i,s,n=void 0===t.grouping||void 0===t.thousands?K_:(i=J_.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],h=0,a=i[0],o=0;r>0&&a>0&&(o+a+1>n&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=i[h=(h+1)%i.length];return e.reverse().join(s)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?K_:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(J_.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=F_(t)).fill,s=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):Y_[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?o:"",M=Y_[g],k=/[defgprs%]/.test(g);function x(t){var r,e,o,f=m,x=b;if("c"===g)x=M(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,s=t.length,n=1,r=-1;n<s;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),f=(A?"("===l?l:u:"-"===l||"("===l?"":l)+f,x=("s"===g?Q_[8+X_/3]:"")+x+(A&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(o=t.charCodeAt(r))||o>57){x=(46===o?h+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!d&&(t=n(t,1/0));var W=f.length+t.length+x.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=n(N+t,N.length?v-x.length:1/0),N=""),s){case"<":t=f+t+x+N;break;case"=":t=f+N+t+x;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+x+N.slice(W);break;default:t=N+f+t+x}return a(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),x.toString=function(){return t+""},x}return{format:l,formatPrefix:function(t,i){var s=l(((t=F_(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(R_(i)/3))),r=Math.pow(10,-n),e=Q_[8+n/3];return function(t){return s(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),U_=B_.format,Z_=B_.formatPrefix;var sH=new Date,nH=new Date;function rH(t,i,s,n){function r(i){return t(i=0===arguments.length?new Date:new Date(+i)),i}return r.floor=function(i){return t(i=new Date(+i)),i},r.ceil=function(s){return t(s=new Date(s-1)),i(s,1),t(s),s},r.round=function(t){var i=r(t),s=r.ceil(t);return t-i<s-t?i:s},r.offset=function(t,s){return i(t=new Date(+t),null==s?1:Math.floor(s)),t},r.range=function(s,n,e){var h,a=[];if(s=r.ceil(s),e=null==e?1:Math.floor(e),!(s<n&&e>0))return a;do{a.push(h=new Date(+s)),i(s,e),t(s)}while(h<s&&s<n);return a},r.filter=function(s){return rH((function(i){if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;i(t,-1),!s(t););else for(;--n>=0;)for(;i(t,1),!s(t););}))},s&&(r.count=function(i,n){return sH.setTime(+i),nH.setTime(+n),t(sH),t(nH),Math.floor(s(sH,nH))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(n?function(i){return n(i)%t==0}:function(i){return r.count(0,i)%t==0}):r:null}),r}var eH=rH((function(){}),(function(t,i){t.setTime(+t+i)}),(function(t,i){return i-t}));eH.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?rH((function(i){i.setTime(Math.floor(i/t)*t)}),(function(i,s){i.setTime(+i+s*t)}),(function(i,s){return(s-i)/t})):eH:null};var hH=rH((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,i){t.setTime(+t+1e3*i)}),(function(t,i){return(i-t)/1e3}),(function(t){return t.getUTCSeconds()})),aH=rH((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,i){t.setTime(+t+6e4*i)}),(function(t,i){return(i-t)/6e4}),(function(t){return t.getMinutes()})),oH=rH((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,i){t.setTime(+t+36e5*i)}),(function(t,i){return(i-t)/36e5}),(function(t){return t.getHours()})),uH=rH((function(t){t.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}));function cH(t){return rH((function(i){i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+7*i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var lH=cH(0),fH=cH(1),dH=(cH(2),cH(3),cH(4)),vH=(cH(5),cH(6),rH((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,i){t.setMonth(t.getMonth()+i)}),(function(t,i){return i.getMonth()-t.getMonth()+12*(i.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),pH=rH((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,i){t.setFullYear(t.getFullYear()+i)}),(function(t,i){return i.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));pH.every=function(t){return isFinite(t=Math.floor(t))&&t>0?rH((function(i){i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)}),(function(i,s){i.setFullYear(i.getFullYear()+s*t)})):null};var yH=rH((function(t){t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+i)}),(function(t,i){return(i-t)/864e5}),(function(t){return t.getUTCDate()-1}));function wH(t){return rH((function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-t)%7),i.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+7*i)}),(function(t,i){return(i-t)/6048e5}))}var gH=wH(0),mH=wH(1),bH=(wH(2),wH(3),wH(4)),MH=(wH(5),wH(6),rH((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i)}),(function(t,i){return i.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));function kH(t){if(0<=t.y&&t.y<100){var i=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return i.setFullYear(t.y),i}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function xH(t){if(0<=t.y&&t.y<100){var i=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return i.setUTCFullYear(t.y),i}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function AH(t,i,s){return{y:t,m:i,d:s,H:0,M:0,S:0,L:0}}MH.every=function(t){return isFinite(t=Math.floor(t))&&t>0?rH((function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/t)*t),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)}),(function(i,s){i.setUTCFullYear(i.getUTCFullYear()+s*t)})):null};var WH,NH,LH={"-":"",_:" ",0:"0"},SH=/^\s*\d+/,TH=/^%/,EH=/[\\^$*+?|[\]().{}]/g;function DH(t,i,s){var n=t<0?"-":"",r=(n?-t:t)+"",e=r.length;return n+(e<s?new Array(s-e+1).join(i)+r:r)}function $H(t){return t.replace(EH,"\\$&")}function CH(t){return new RegExp("^(?:"+t.map($H).join("|")+")","i")}function IH(t){for(var i={},s=-1,n=t.length;++s<n;)i[t[s].toLowerCase()]=s;return i}function OH(t,i,s){var n=SH.exec(i.slice(s,s+1));return n?(t.w=+n[0],s+n[0].length):-1}function zH(t,i,s){var n=SH.exec(i.slice(s,s+1));return n?(t.u=+n[0],s+n[0].length):-1}function _H(t,i,s){var n=SH.exec(i.slice(s,s+2));return n?(t.U=+n[0],s+n[0].length):-1}function HH(t,i,s){var n=SH.exec(i.slice(s,s+2));return n?(t.V=+n[0],s+n[0].length):-1}function qH(t,i,s){var n=SH.exec(i.slice(s,s+2));return n?(t.W=+n[0],s+n[0].length):-1}function PH(t,i,s){var n=SH.exec(i.slice(s,s+4));return n?(t.y=+n[0],s+n[0].length):-1}function RH(t,i,s){var n=SH.exec(i.slice(s,s+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),s+n[0].length):-1}function XH(t,i,s){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(s,s+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),s+n[0].length):-1}function jH(t,i,s){var n=SH.exec(i.slice(s,s+1));return n?(t.q=3*n[0]-3,s+n[0].length):-1}function FH(t,i,s){var n=SH.exec(i.slice(s,s+2));return n?(t.m=n[0]-1,s+n[0].length):-1}function GH(t,i,s){var n=SH.exec(i.slice(s,s+2));return n?(t.d=+n[0],s+n[0].length):-1}function VH(t,i,s){var n=SH.exec(i.slice(s,s+3));return n?(t.m=0,t.d=+n[0],s+n[0].length):-1}function YH(t,i,s){var n=SH.exec(i.slice(s,s+2));return n?(t.H=+n[0],s+n[0].length):-1}function KH(t,i,s){var n=SH.exec(i.slice(s,s+2));return n?(t.M=+n[0],s+n[0].length):-1}function BH(t,i,s){var n=SH.exec(i.slice(s,s+2));return n?(t.S=+n[0],s+n[0].length):-1}function UH(t,i,s){var n=SH.exec(i.slice(s,s+3));return n?(t.L=+n[0],s+n[0].length):-1}function ZH(t,i,s){var n=SH.exec(i.slice(s,s+6));return n?(t.L=Math.floor(n[0]/1e3),s+n[0].length):-1}function JH(t,i,s){var n=TH.exec(i.slice(s,s+1));return n?s+n[0].length:-1}function QH(t,i,s){var n=SH.exec(i.slice(s));return n?(t.Q=+n[0],s+n[0].length):-1}function tq(t,i,s){var n=SH.exec(i.slice(s));return n?(t.s=+n[0],s+n[0].length):-1}function iq(t,i){return DH(t.getDate(),i,2)}function sq(t,i){return DH(t.getHours(),i,2)}function nq(t,i){return DH(t.getHours()%12||12,i,2)}function rq(t,i){return DH(1+uH.count(pH(t),t),i,3)}function eq(t,i){return DH(t.getMilliseconds(),i,3)}function hq(t,i){return eq(t,i)+"000"}function aq(t,i){return DH(t.getMonth()+1,i,2)}function oq(t,i){return DH(t.getMinutes(),i,2)}function uq(t,i){return DH(t.getSeconds(),i,2)}function cq(t){var i=t.getDay();return 0===i?7:i}function lq(t,i){return DH(lH.count(pH(t)-1,t),i,2)}function fq(t){var i=t.getDay();return i>=4||0===i?dH(t):dH.ceil(t)}function dq(t,i){return t=fq(t),DH(dH.count(pH(t),t)+(4===pH(t).getDay()),i,2)}function vq(t){return t.getDay()}function pq(t,i){return DH(fH.count(pH(t)-1,t),i,2)}function yq(t,i){return DH(t.getFullYear()%100,i,2)}function wq(t,i){return DH((t=fq(t)).getFullYear()%100,i,2)}function gq(t,i){return DH(t.getFullYear()%1e4,i,4)}function mq(t,i){var s=t.getDay();return DH((t=s>=4||0===s?dH(t):dH.ceil(t)).getFullYear()%1e4,i,4)}function bq(t){var i=t.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+DH(i/60|0,"0",2)+DH(i%60,"0",2)}function Mq(t,i){return DH(t.getUTCDate(),i,2)}function kq(t,i){return DH(t.getUTCHours(),i,2)}function xq(t,i){return DH(t.getUTCHours()%12||12,i,2)}function Aq(t,i){return DH(1+yH.count(MH(t),t),i,3)}function Wq(t,i){return DH(t.getUTCMilliseconds(),i,3)}function Nq(t,i){return Wq(t,i)+"000"}function Lq(t,i){return DH(t.getUTCMonth()+1,i,2)}function Sq(t,i){return DH(t.getUTCMinutes(),i,2)}function Tq(t,i){return DH(t.getUTCSeconds(),i,2)}function Eq(t){var i=t.getUTCDay();return 0===i?7:i}function Dq(t,i){return DH(gH.count(MH(t)-1,t),i,2)}function $q(t){var i=t.getUTCDay();return i>=4||0===i?bH(t):bH.ceil(t)}function Cq(t,i){return t=$q(t),DH(bH.count(MH(t),t)+(4===MH(t).getUTCDay()),i,2)}function Iq(t){return t.getUTCDay()}function Oq(t,i){return DH(mH.count(MH(t)-1,t),i,2)}function zq(t,i){return DH(t.getUTCFullYear()%100,i,2)}function _q(t,i){return DH((t=$q(t)).getUTCFullYear()%100,i,2)}function Hq(t,i){return DH(t.getUTCFullYear()%1e4,i,4)}function qq(t,i){var s=t.getUTCDay();return DH((t=s>=4||0===s?bH(t):bH.ceil(t)).getUTCFullYear()%1e4,i,4)}function Pq(){return"+0000"}function Rq(){return"%"}function Xq(t){return+t}function jq(t){return Math.floor(+t/1e3)}function Fq(t){return new Date(t)}function Gq(t){return t instanceof Date?+t:+new Date(+t)}function Vq(t,i,s,n,r,e,h,a,o){var u=q_(C_,C_),c=u.invert,l=u.domain,f=o(".%L"),d=o(":%S"),v=o("%I:%M"),p=o("%I %p"),y=o("%a %d"),w=o("%b %d"),g=o("%B"),m=o("%Y"),b=[[h,1,1e3],[h,5,5e3],[h,15,15e3],[h,30,3e4],[e,1,6e4],[e,5,3e5],[e,15,9e5],[e,30,18e5],[r,1,36e5],[r,3,108e5],[r,6,216e5],[r,12,432e5],[n,1,864e5],[n,2,1728e5],[s,1,6048e5],[i,1,2592e6],[i,3,7776e6],[t,1,31536e6]];function M(a){return(h(a)<a?f:e(a)<a?d:r(a)<a?v:n(a)<a?p:i(a)<a?s(a)<a?y:w:t(a)<a?g:m)(a)}function k(i,s,n,r){if(null==i&&(i=10),"number"==typeof i){var e=Math.abs(n-s)/i,h=fz((function(t){return t[2]})).right(b,e);h===b.length?(r=mz(s/31536e6,n/31536e6,i),i=t):h?(r=(h=b[e/b[h-1][2]<b[h][2]/e?h-1:h])[1],i=h[0]):(r=Math.max(mz(s,n,i),1),i=a)}return null==r?i:i.every(r)}return u.invert=function(t){return new Date(c(t))},u.domain=function(t){return arguments.length?l(Sz.call(t,Gq)):l().map(Fq)},u.ticks=function(t,i){var s,n=l(),r=n[0],e=n[n.length-1],h=e<r;return h&&(s=r,r=e,e=s),s=(s=k(t,r,e,i))?s.range(r,e+1):[],h?s.reverse():s},u.tickFormat=function(t,i){return null==i?M:o(i)},u.nice=function(t,i){var s=l();return(t=k(t,s[0],s[s.length-1],i))?l(function(t,i){var s,n=0,r=(t=t.slice()).length-1,e=t[n],h=t[r];return h<e&&(s=n,n=r,r=s,s=e,e=h,h=s),t[n]=i.floor(e),t[r]=i.ceil(h),t}(s,t)):u},u.copy=function(){return H_(u,Vq(t,i,s,n,r,e,h,a,o))},u}function Yq(t){return 1-Math.sqrt(1-t*t)}WH=function(t){var i=t.dateTime,s=t.date,n=t.time,r=t.periods,e=t.days,h=t.shortDays,a=t.months,o=t.shortMonths,u=CH(r),c=IH(r),l=CH(e),f=IH(e),d=CH(h),v=IH(h),p=CH(a),y=IH(a),w=CH(o),g=IH(o),m={a:function(t){return h[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return o[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:iq,e:iq,f:hq,g:wq,G:mq,H:sq,I:nq,j:rq,L:eq,m:aq,M:oq,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Xq,s:jq,S:uq,u:cq,U:lq,V:dq,w:vq,W:pq,x:null,X:null,y:yq,Y:gq,Z:bq,"%":Rq},b={a:function(t){return h[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return o[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Mq,e:Mq,f:Nq,g:_q,G:qq,H:kq,I:xq,j:Aq,L:Wq,m:Lq,M:Sq,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Xq,s:jq,S:Tq,u:Eq,U:Dq,V:Cq,w:Iq,W:Oq,x:null,X:null,y:zq,Y:Hq,Z:Pq,"%":Rq},M={a:function(t,i,s){var n=d.exec(i.slice(s));return n?(t.w=v[n[0].toLowerCase()],s+n[0].length):-1},A:function(t,i,s){var n=l.exec(i.slice(s));return n?(t.w=f[n[0].toLowerCase()],s+n[0].length):-1},b:function(t,i,s){var n=w.exec(i.slice(s));return n?(t.m=g[n[0].toLowerCase()],s+n[0].length):-1},B:function(t,i,s){var n=p.exec(i.slice(s));return n?(t.m=y[n[0].toLowerCase()],s+n[0].length):-1},c:function(t,s,n){return A(t,i,s,n)},d:GH,e:GH,f:ZH,g:RH,G:PH,H:YH,I:YH,j:VH,L:UH,m:FH,M:KH,p:function(t,i,s){var n=u.exec(i.slice(s));return n?(t.p=c[n[0].toLowerCase()],s+n[0].length):-1},q:jH,Q:QH,s:tq,S:BH,u:zH,U:_H,V:HH,w:OH,W:qH,x:function(t,i,n){return A(t,s,i,n)},X:function(t,i,s){return A(t,n,i,s)},y:RH,Y:PH,Z:XH,"%":JH};function k(t,i){return function(s){var n,r,e,h=[],a=-1,o=0,u=t.length;for(s instanceof Date||(s=new Date(+s));++a<u;)37===t.charCodeAt(a)&&(h.push(t.slice(o,a)),null!=(r=LH[n=t.charAt(++a)])?n=t.charAt(++a):r="e"===n?" ":"0",(e=i[n])&&(n=e(s,r)),h.push(n),o=a+1);return h.push(t.slice(o,a)),h.join("")}}function x(t,i){return function(s){var n,r,e=AH(1900,void 0,1);if(A(e,t,s+="",0)!=s.length)return null;if("Q"in e)return new Date(e.Q);if("s"in e)return new Date(1e3*e.s+("L"in e?e.L:0));if(!i||"Z"in e||(e.Z=0),"p"in e&&(e.H=e.H%12+12*e.p),void 0===e.m&&(e.m="q"in e?e.q:0),"V"in e){if(e.V<1||e.V>53)return null;"w"in e||(e.w=1),"Z"in e?(r=(n=xH(AH(e.y,0,1))).getUTCDay(),n=r>4||0===r?mH.ceil(n):mH(n),n=yH.offset(n,7*(e.V-1)),e.y=n.getUTCFullYear(),e.m=n.getUTCMonth(),e.d=n.getUTCDate()+(e.w+6)%7):(r=(n=kH(AH(e.y,0,1))).getDay(),n=r>4||0===r?fH.ceil(n):fH(n),n=uH.offset(n,7*(e.V-1)),e.y=n.getFullYear(),e.m=n.getMonth(),e.d=n.getDate()+(e.w+6)%7)}else("W"in e||"U"in e)&&("w"in e||(e.w="u"in e?e.u%7:"W"in e?1:0),r="Z"in e?xH(AH(e.y,0,1)).getUTCDay():kH(AH(e.y,0,1)).getDay(),e.m=0,e.d="W"in e?(e.w+6)%7+7*e.W-(r+5)%7:e.w+7*e.U-(r+6)%7);return"Z"in e?(e.H+=e.Z/100|0,e.M+=e.Z%100,xH(e)):kH(e)}}function A(t,i,s,n){for(var r,e,h=0,a=i.length,o=s.length;h<a;){if(n>=o)return-1;if(37===(r=i.charCodeAt(h++))){if(r=i.charAt(h++),!(e=M[r in LH?i.charAt(h++):r])||(n=e(t,s,n))<0)return-1}else if(r!=s.charCodeAt(n++))return-1}return n}return(m.x=k(s,m),m.X=k(n,m),m.c=k(i,m),b.x=k(s,b),b.X=k(n,b),b.c=k(i,b),{format:function(t){var i=k(t+="",m);return i.toString=function(){return t},i},parse:function(t){var i=x(t+="",!1);return i.toString=function(){return t},i},utcFormat:function(t){var i=k(t+="",b);return i.toString=function(){return t},i},utcParse:function(t){var i=x(t+="",!0);return i.toString=function(){return t},i}})}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),NH=WH.format;var Kq={value:function(){}};function Bq(){for(var t,i=0,s=arguments.length,n={};i<s;++i){if(!(t=arguments[i]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Uq(n)}function Uq(t){this._=t}function Zq(t,i){return t.trim().split(/^|\s+/).map((function(t){var s="",n=t.indexOf(".");if(n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}}))}function Jq(t,i){for(var s,n=0,r=t.length;n<r;++n)if((s=t[n]).name===i)return s.value}function Qq(t,i,s){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=Kq,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=s&&t.push({name:i,value:s}),t}Uq.prototype=Bq.prototype={constructor:Uq,on:function(t,i){var s,n=this._,r=Zq(t+"",n),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(s=(t=r[e]).type)n[s]=Qq(n[s],t.name,i);else if(null==i)for(s in n)n[s]=Qq(n[s],t.name,null);return this}for(;++e<h;)if((s=(t=r[e]).type)&&(s=Jq(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new Uq(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,n,r=new Array(s),e=0;e<s;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,s=(n=this._[t]).length;e<s;++e)n[e].value.apply(i,r)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,e=n.length;r<e;++r)n[r].value.apply(i,s)}};var tP,iP,sP=0,nP=0,rP=0,eP=0,hP=0,aP=0,oP="object"==typeof performance&&performance.now?performance:Date,uP="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function cP(){return hP||(uP(lP),hP=oP.now()+aP)}function lP(){hP=0}function fP(){this._call=this._time=this._next=null}function dP(t,i,s){var n=new fP;return n.restart(t,i,s),n}function vP(){hP=(eP=oP.now())+aP,sP=nP=0;try{!function(){cP(),++sP;for(var t,i=tP;i;)(t=hP-i._time)>=0&&i._call.call(null,t),i=i._next;--sP}()}finally{sP=0,function(){for(var t,i,s=tP,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:tP=i);iP=t,yP(n)}(),hP=0}}function pP(){var t=oP.now(),i=t-eP;i>1e3&&(aP-=i,eP=t)}function yP(t){sP||(nP&&(nP=clearTimeout(nP)),t-hP>24?(t<1/0&&(nP=setTimeout(vP,t-oP.now()-aP)),rP&&(rP=clearInterval(rP))):(rP||(eP=oP.now(),rP=setInterval(pP,1e3)),sP=1,uP(vP)))}function wP(t,i,s){var n=new fP;return n.restart((function(s){n.stop(),t(s+i)}),i=null==i?0:+i,s),n}fP.prototype=dP.prototype={constructor:fP,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?cP():+s)+(null==i?0:+i),this._next||iP===this||(iP?iP._next=this:tP=this,iP=this),this._call=t,this._time=s,yP()},stop:function(){this._call&&(this._call=null,this._time=1/0,yP())}};var gP=Bq("start","end","interrupt"),mP=[];function bP(t,i,s,n,r,e){var h=t.__transition;if(h){if(s in h)return}else t.__transition={};!function(t,i,s){var n,r=t.__transition;function e(o){var u,c,l,f;if(1!==s.state)return a();for(u in r)if((f=r[u]).name===s.name){if(3===f.state)return wP(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<i&&(f.state=6,f.timer.stop(),delete r[u])}if(wP((function(){3===s.state&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(o))})),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,n=new Array(l=s.tween.length),u=0,c=-1;u<l;++u)(f=s.tween[u].value.call(t,t.__data__,s.index,s.group))&&(n[++c]=f);n.length=c+1}}function h(i){for(var r=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(a),s.state=5,1),e=-1,h=n.length;++e<h;)n[e].call(null,r);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),a())}function a(){for(var n in s.state=6,s.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=s,s.timer=dP((function(t){s.state=1,s.timer.restart(e,s.delay,s.time),s.delay<=t&&e(t-s.delay)}),0,s.time)}(t,s,{name:i,index:n,group:r,on:gP,tween:mP,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function MP(t,i){var s=xP(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function kP(t,i){var s=xP(t,i);if(s.state>2)throw new Error("too late; already started");return s}function xP(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function AP(t,i){var s,n;return function(){var r=kP(this,t),e=r.tween;if(e!==s)for(var h=0,a=(n=s=e).length;h<a;++h)if(n[h].name===i){(n=n.slice()).splice(h,1);break}r.tween=n}}function WP(t,i,s){var n,r;if("function"!=typeof s)throw new Error;return function(){var e=kP(this,t),h=e.tween;if(h!==n){r=(n=h).slice();for(var a={name:i,value:s},o=0,u=r.length;o<u;++o)if(r[o].name===i){r[o]=a;break}o===u&&r.push(a)}e.tween=r}}function NP(t,i,s){var n=t._id;return t.each((function(){var t=kP(this,n);(t.value||(t.value={}))[i]=s.apply(this,arguments)})),function(t){return xP(t,n).value[i]}}function LP(t,i){var s;return("number"==typeof i?v_:i instanceof Bz?c_:(s=Bz(i))?(i=s,c_):g_)(t,i)}function SP(t){return function(){this.removeAttribute(t)}}function TP(t){return function(){this.removeAttributeNS(t.space,t.local)}}function EP(t,i,s){var n,r;return function(){var e=this.getAttribute(t);return e===s?null:e===n?r:r=i(n=e,s)}}function DP(t,i,s){var n,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===s?null:e===n?r:r=i(n=e,s)}}function $P(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttribute(t))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttribute(t)}}function CP(t,i,s){var n,r,e;return function(){var h,a=s(this);if(null!=a)return(h=this.getAttributeNS(t.space,t.local))===a?null:h===n&&a===r?e:e=i(n=h,r=a);this.removeAttributeNS(t.space,t.local)}}function IP(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttributeNS(t.space,t.local,n(i))}}return s._value=i,s}function OP(t,i){function s(){var s=this,n=i.apply(s,arguments);return n&&function(i){s.setAttribute(t,n(i))}}return s._value=i,s}function zP(t,i){return function(){MP(this,t).delay=+i.apply(this,arguments)}}function _P(t,i){return i=+i,function(){MP(this,t).delay=i}}function HP(t,i){return function(){kP(this,t).duration=+i.apply(this,arguments)}}function qP(t,i){return i=+i,function(){kP(this,t).duration=i}}function PP(t,i){if("function"!=typeof i)throw new Error;return function(){kP(this,t).ease=i}}function RP(t,i,s){var n,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?MP:kP;return function(){var h=e(this,t),a=h.on;a!==n&&(r=(n=a).copy()).on(i,s),h.on=r}}var XP=uz.prototype.constructor;function jP(t,i,s){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),s)}}return n._value=i,n}var FP=0;function GP(t,i,s,n){this._groups=t,this._parents=i,this._name=s,this._id=n}function VP(){return++FP}var YP=uz.prototype;GP.prototype=function(t){return uz().transition(t)}.prototype={constructor:GP,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=oO(t));for(var n=this._groups,r=n.length,e=new Array(r),h=0;h<r;++h)for(var a,o,u=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=u[f])&&(o=t.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),l[f]=o,bP(l[f],i,s,f,l,xP(a,s)));return new GP(e,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=cO(t));for(var n=this._groups,r=n.length,e=[],h=[],a=0;a<r;++a)for(var o,u=n[a],c=u.length,l=0;l<c;++l)if(o=u[l]){for(var f,d=t.call(o,o.__data__,l,u),v=xP(o,s),p=0,y=d.length;p<y;++p)(f=d[p])&&bP(f,i,s,p,d,v);e.push(d),h.push(o)}return new GP(e,h,i,s)},filter:function(t){"function"!=typeof t&&(t=lO(t));for(var i=this._groups,s=i.length,n=new Array(s),r=0;r<s;++r)for(var e,h=i[r],a=h.length,o=n[r]=[],u=0;u<a;++u)(e=h[u])&&t.call(e,e.__data__,u,h)&&o.push(e);return new GP(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,n=i.length,r=Math.min(n,s.length),e=new Array(n),h=0;h<r;++h)for(var a,o=i[h],u=s[h],c=o.length,l=e[h]=new Array(c),f=0;f<c;++f)(a=o[f]||u[f])&&(l[f]=a);for(;h<n;++h)e[h]=i[h];return new GP(e,this._parents,this._name,this._id)},selection:function(){return new XP(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=VP(),n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)if(h=a[u]){var c=xP(h,i);bP(h,t,s,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new GP(n,this._parents,t,s)},call:YP.call,nodes:YP.nodes,node:YP.node,size:YP.size,empty:YP.empty,each:YP.each,on:function(t,i){var s=this._id;return arguments.length<2?xP(this.node(),s).on.on(t):this.each(RP(s,t,i))},attr:function(t,i){var s=nO(t),n="transform"===s?E_:LP;return this.attrTween(t,"function"==typeof i?(s.local?CP:$P)(s,n,NP(this,"attr."+t,i)):null==i?(s.local?TP:SP)(s):(s.local?DP:EP)(s,n,i+""))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var n=nO(t);return this.tween(s,(n.local?IP:OP)(n,i))},style:function(t,i,s){var n="transform"==(t+="")?T_:LP;return null==i?this.styleTween(t,function(t,i){var s,n,r;return function(){var e=LO(this,t),h=(this.style.removeProperty(t),LO(this,t));return e===h?null:e===s&&h===n?r:r=i(s=e,n=h)}}(t,n)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,s){var n,r,e;return function(){var h=LO(this,t),a=s(this);return null==a&&(this.style.removeProperty(t),a=LO(this,t)),h===a?null:h===n&&a===r?e:e=i(n=h,r=a)}}(t,n,NP(this,"style."+t,i)):function(t,i,s){var n,r;return function(){var e=LO(this,t);return e===s?null:e===n?r:r=i(n=e,s)}}(t,n,i+""),s)},styleTween:function(t,i,s){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;return this.tween(n,jP(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(NP(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var n,r=xP(this.node(),s).tween,e=0,h=r.length;e<h;++e)if((n=r[e]).name===t)return n.value;return null}return this.each((null==i?AP:WP)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?zP:_P)(i,t)):xP(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?HP:qP)(i,t)):xP(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(PP(i,t)):xP(this.node(),i).ease}};var KP={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function BP(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))return KP.time=cP(),KP;return s}uz.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var s,n,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(s=e[r]).name===i?(n=s.state>2&&s.state<5,s.state=6,s.timer.stop(),n&&s.on.call("interrupt",t,t.__data__,s.index,s.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},uz.prototype.transition=function(t){var i,s;t instanceof GP?(i=t._id,t=t._name):(i=VP(),(s=KP).time=cP(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,e=0;e<r;++e)for(var h,a=n[e],o=a.length,u=0;u<o;++u)(h=a[u])&&bP(h,t,i,u,a,s||BP(h,i));return new GP(n,this._parents,t,i)};var UP="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),ZP=new Uint8Array(16);function JP(){if(!UP)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return UP(ZP)}for(var QP=[],tR=0;tR<256;++tR)QP[tR]=(tR+256).toString(16).substr(1);function iR(t,i,s){var n=i&&s||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||JP)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[n+e]=r[e];return i||function(t){var i=0;return[QP[t[i++]],QP[t[i++]],QP[t[i++]],QP[t[i++]],"-",QP[t[i++]],QP[t[i++]],"-",QP[t[i++]],QP[t[i++]],"-",QP[t[i++]],QP[t[i++]],"-",QP[t[i++]],QP[t[i++]],QP[t[i++]],QP[t[i++]],QP[t[i++]],QP[t[i++]]].join("")}(r)}const{propDefaultValues:sR}=r;class nR{}nR.mainTitle="Stacked Bar Chart Title",nR.subTitle="This is the stacked bar chart's subtitle",nR.height=280,nR.width=700,nR.margin={top:4,bottom:4,right:4,left:4},nR.padding={top:20,bottom:50,right:50,left:50},nR.normalized=!1,nR.showTotalValue=!0,nR.showZeroLabels=!1,nR.ordinalAccessor="label",nR.valueAccessor="value",nR.groupAccessor="item",nR.layout=sR.layout,nR.accessibility=sR.accessibility,nR.animationConfig=sR.animationConfig,nR.highestHeadingLevel=sR.highestHeadingLevel,nR.sortOrder=sR.sortOrder,nR.xAxis=sR.xAxis,nR.yAxis=sR.yAxis,nR.wrapLabel=sR.wrapLabel,nR.colorPalette=sR.colorPaletteCategorical,nR.hoverStyle=sR.hoverStyle,nR.clickStyle=sR.clickStyle,nR.referenceStyle=sR.referenceStyle,nR.cursor=sR.cursor,nR.roundedCorner=sR.roundedCorner,nR.barIntervalRatio=sR.barIntervalRatio,nR.hoverOpacity=sR.hoverOpacity,nR.dataLabel=sR.dataLabelMiddle,nR.legend=sR.categoryLegend,nR.tooltipLabel=sR.tooltipLabel,nR.showTooltip=sR.showTooltip,nR.suppressEvents=sR.suppressEvents,nR.referenceLines=sR.referenceLines,nR.annotations=sR.annotations,nR.clickHighlight=sR.clickHighlight;const{getBrowser:rR,verifyTextHasSpace:eR,checkAttributeTransitions:hR,createTextStrokeFilter:aR,drawHoverStrokes:oR,removeHoverStrokes:uR,buildStrokes:cR,convertColorsToTextures:lR,findTagLevel:fR,prepareRenderChange:dR,initializeDescriptionRoot:vR,initializeElementAccess:pR,setElementFocusHandler:yR,setElementAccessID:wR,setAccessibilityController:gR,hideNonessentialGroups:mR,setAccessTitle:bR,setAccessSubtitle:MR,setAccessLongDescription:kR,setAccessExecutiveSummary:xR,setAccessPurpose:AR,setAccessContext:WR,setAccessStatistics:NR,setAccessChartCounts:LR,setAccessXAxis:SR,setAccessYAxis:TR,setAccessStructure:ER,setAccessAnnotation:DR,retainAccessFocus:$R,checkAccessFocus:CR,setElementInteractionAccessState:IR,setAccessibilityDescriptionWidth:OR,autoTextColor:zR,annotate:_R,chartAccessors:HR,checkInteraction:qR,checkClicked:PR,checkHovered:RR,convertVisaColor:XR,drawAxis:jR,drawGrid:FR,drawLegend:GR,setLegendInteractionState:VR,drawTooltip:YR,formatStats:KR,formatDate:BR,formatDataLabel:UR,getPadding:ZR,getColors:JR,getLicenses:QR,getScopedData:tX,initTooltipStyle:iX,overrideTitleTooltip:sX,placeDataLabels:nX,transitionEndAll:rX,scopeDataKeys:eX,visaColors:hX,validateAccessibilityProps:aX,roundTo:oX,resolveLabelCollision:uX}=r,cX=class{constructor(s){t(this,s),this.mainTitle=nR.mainTitle,this.subTitle=nR.subTitle,this.height=nR.height,this.width=nR.width,this.layout=nR.layout,this.highestHeadingLevel=nR.highestHeadingLevel,this.margin=nR.margin,this.padding=nR.padding,this.ordinalAccessor=nR.ordinalAccessor,this.valueAccessor=nR.valueAccessor,this.groupAccessor=nR.groupAccessor,this.sortOrder=nR.sortOrder,this.xAxis=nR.xAxis,this.yAxis=nR.yAxis,this.wrapLabel=nR.wrapLabel,this.normalized=nR.normalized,this.colorPalette=nR.colorPalette,this.hoverStyle=nR.hoverStyle,this.clickStyle=nR.clickStyle,this.referenceStyle=nR.referenceStyle,this.cursor=nR.cursor,this.roundedCorner=nR.roundedCorner,this.barIntervalRatio=nR.barIntervalRatio,this.hoverOpacity=nR.hoverOpacity,this.animationConfig=nR.animationConfig,this.dataLabel=nR.dataLabel,this.showTotalValue=nR.showTotalValue,this.showTooltip=nR.showTooltip,this.tooltipLabel=nR.tooltipLabel,this.accessibility=nR.accessibility,this.legend=nR.legend,this.annotations=nR.annotations,this.showZeroLabels=nR.showZeroLabels,this.referenceLines=nR.referenceLines,this.suppressEvents=nR.suppressEvents,this.clickHighlight=nR.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.series=[],this.extent=[],this.datakeys=[],this.updated=!0,this.shouldValidateInteractionKeys=!1,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateTableData=!1,this.shouldSetColors=!1,this.shouldValidateAxes=!1,this.shouldValidateClickHighlight=!1,this.shouldUpdateScales=!1,this.shouldUpdateAnnotations=!1,this.shouldResetRoot=!1,this.shouldEnterUpdateExit=!1,this.shouldSetGlobalSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldUpdateGeometries=!1,this.shouldCheckValueAxis=!1,this.shouldCheckLabelAxis=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYGrid=!1,this.shouldUpdateBaseline=!1,this.shouldSetSelectionClass=!1,this.shouldUpdateCursor=!1,this.shouldUpdateCorners=!1,this.shouldUpdateLegendData=!1,this.shouldValidateLabelPlacement=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldUpdateLegend=!1,this.shouldUpdateLegendInteractivity=!1,this.shouldUpdateReferenceLines=!1,this.shouldDrawInteractionState=!1,this.shouldBindInteractivity=!1,this.shouldSetLabelOpacity=!1,this.shouldUpdateLabels=!1,this.shouldUpdateTotalLabels=!1,this.shouldCheckLabelColor=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetTextures=!1,this.shouldSetStrokes=!1,this.isSafari="Safari"===rR(),this.strokes={},this.textStrokes={},this.topLevel="h2",this.bottomLevel="p",this.textTreatmentHandler=(t,i,s)=>{const n=cz(s[i]),r=this.clickHighlight&&this.clickHighlight.length>0&&PR(t,this.clickHighlight,this.innerInteractionKeys)&&this.clickStyle.color?hX[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&RR(t,this.hoverHighlight,this.innerInteractionKeys)&&this.hoverStyle.color?hX[this.hoverStyle.color]||this.hoverStyle.color:this.preparedColors[i],e=zR(r);if(n.classed("textIsMoving"))n.attr("filter",null);else{const t=this.textStrokes[r];t!==n.attr("filter")&&(this.isSafari?(n.attr("filter",null),setTimeout(()=>{n.attr("filter",t)},0)):n.attr("filter",t))}return e},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldSetColors=!0,this.shouldSetTextures=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateScales=!0,this.shouldUpdateTableData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLegendData=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateLabels=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetStrokes=!0}idWatcher(t,i){this.chartID=t,this.stackedBarChartEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldSetTextures=!0,this.shouldCheckLabelColor=!0,this.shouldDrawInteractionState=!0,this.shouldSetStrokes=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetLabelOpacity=!0}layoutWatcher(t,i){this.interpolating=!1,this.shouldValidateLabelPlacement=!0,this.shouldUpdateScales=!0,this.shouldValidateAxes=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetLabelOpacity=!0}ordinalAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateLegendData=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.shouldCheckValueAxis=!0}valueAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateTableData=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.shouldSetGlobalSelections=!0,this.shouldCheckValueAxis=!0}groupAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateReferenceLines=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}sortWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldCheckLabelAxis=!0}xAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXAxis=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0)}yAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYAxis=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0)}wrapLabelWatcher(t,i){this.shouldCheckLabelAxis=!0}normalizedWatcher(t,i){this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateTableData=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0}paletteWatcher(t,i){this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetSelectionClass=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0}cornerWatcher(t,i){this.shouldUpdateCorners=!0}intervalRatioWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldSetLabelOpacity=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateAnnotations=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}labelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateTableData=!0;const s=!(!t||!t.placement)&&t.placement,n=!(!i||!i.placement)&&i.placement,r=!(!t||!t.labelAccessor)&&t.labelAccessor,e=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),s!==n&&(this.shouldSetLabelOpacity=!0,this.shouldValidateLabelPlacement=!0,this.shouldCheckLabelColor=!0),r!==e&&(this.shouldValidateDataLabelAccessor=!0)}showTotalValueWatcher(t,i){this.shouldUpdateTotalLabels=!0,this.shouldUpdateTableData=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldSetGeometryAriaLabels=!0}showTooltipWatcher(t,i){this.shouldDrawInteractionState=!0}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,n=i&&i.includeDataKeyNames;s===n&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==n&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideTextures)&&t.hideTextures)!==(!(!i||!i.hideTextures)&&i.hideTextures)&&(this.shouldSetTextures=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldSetStrokes=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}showZeroLabelsWatcher(t,i){this.shouldUpdateLabels=!0}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldUpdateLegendInteractivity=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}clickWatcher(t,i){this.shouldValidateClickHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldUpdateLegendInteractivity=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"stacked-bar-chart-"+iR(),this.stackedBarChartEl.id=this.chartID,this.setTagLevels(),this.prepareData(),this.prepareLegendData(),this.setDimensions(),this.prepareScales(),this.validateClickHighlight(),this.validateInteractionKeys(),this.validateDataLabelAccessor(),this.validateAxes(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTextures(),this.setStrokes(),this.drawXGrid(),this.drawYGrid(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterTotalDataLabels(),this.updateTotalDataLabels(),this.exitTotalDataLabels(),this.setRoundedCorners(),this.drawGeometries(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.bindLegendInteractivity(),this.validateLabelPlacement(),this.drawDataLabels(),this.drawTotalDataLabels(),this.drawReferenceLines(),this.setSelectedClass(),this.updateInteractionState(),this.setLabelOpacity(),this.checkLabelColorAgainstBackground(),this.updateCursor(),this.bindInteractivity(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),this.drawBaseline(),mR(this.root.node(),this.barG.node()),this.setGroupAccessibilityID(),this.onChangeHandler(),this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldSetTextures&&(this.setTextures(),this.shouldSetTextures=!1),this.shouldSetStrokes&&(this.setStrokes(),this.shouldSetStrokes=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldEnterUpdateExit&&(this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterTotalDataLabels(),this.updateTotalDataLabels(),this.exitTotalDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateGeometries&&(this.drawGeometries(),this.shouldUpdateGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateCorners&&(this.setRoundedCorners(),this.shouldUpdateCorners=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateTotalLabels&&(this.drawTotalDataLabels(),this.shouldUpdateTotalLabels=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldCheckLabelColor&&(this.checkLabelColorAgainstBackground(),this.shouldCheckLabelColor=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldUpdateLegendInteractivity=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateBaseline&&(this.drawBaseline(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,aX(this.chartID,this.accessibility,{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit,tooltipLabel:this.tooltipLabel,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor},misc:{normalized:this.normalized}}))}validateLabelPlacement(){"vertical"===this.layout?"top"!==this.dataLabel.placement&&"middle"!==this.dataLabel.placement&&"bottom"!==this.dataLabel.placement&&"auto"!==this.dataLabel.placement&&(this.dataLabel.placement="middle"):"end"!==this.dataLabel.placement&&"middle"!==this.dataLabel.placement&&"base"!==this.dataLabel.placement&&"auto"!==this.dataLabel.placement&&(this.dataLabel.placement="middle")}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateAxes(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!("vertical"===this.layout)&&this.xAxis.gridVisible}),this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:"vertical"===this.layout&&this.yAxis.gridVisible})}setDimensions(){this.padding="string"==typeof this.padding?ZR(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}prepareData(){this.extent=[0,0];const t=[];this.data.forEach(i=>{const s=Object.keys(i),n={};s.forEach(t=>{n[t]=i[t]instanceof Date?new Date(i[t].getTime()):i[t]}),t.push(n)});const i=function(){var t,i,s,n=[],r=[];function e(s,r,h,a){if(r>=n.length)return null!=t&&s.sort(t),null!=i?i(s):s;for(var o,u,c,l=-1,f=s.length,d=n[r++],v=kz(),p=h();++l<f;)(c=v.get(o=d(u=s[l])+""))?c.push(u):v.set(o,[u]);return v.each((function(t,i){a(p,i,e(t,r,h,a))})),p}return s={object:function(t){return e(t,0,xz,Az)},map:function(t){return e(t,0,Wz,Nz)},entries:function(t){return function t(s,e){if(++e>n.length)return s;var h,a=r[e-1];return null!=i&&e>=n.length?h=s.entries():(h=[],s.each((function(i,s){h.push({key:s,values:t(i,e)})}))),null!=a?h.sort((function(t,i){return a(t.key,i.key)})):h}(e(t,0,Wz,Nz),0)},key:function(t){return n.push(t),s},sortKeys:function(t){return r[n.length-1]=t,s},sortValues:function(i){return t=i,s},rollup:function(t){return i=t,s}}}().key(t=>(t[this.valueAccessor]=parseFloat(t[this.valueAccessor]),t[this.groupAccessor]=t[this.groupAccessor]instanceof Date?BR({date:t[this.groupAccessor],format:"vertical"===this.layout?this.xAxis.format:this.yAxis.format,offsetTimezone:!0}):t[this.groupAccessor],t[this.groupAccessor])).entries(t);this.interpolating=this.series.length?this.series:"",this.interpolating&&(this.interpolating.stackOrder=this.stackOrder);const s={},n=t=>{let i=0;const n=t.length,r=[];for(this.stackOrder={},i=0;i<n;i++){const n=Object.assign({},t[i]);let e=0,h=0,a=0;const o={positive:0,negative:0},u=t[i].values,c=u.length;n.values=[];let l=0;for(e=0;e<c;e++){const t=Object.assign({},u[e]),i=t[this.valueAccessor];i>=0?(t.stackEnd=o.positive,o.positive+=i,t.stackStart=o.positive):(t.stackStart=o.negative,o.negative+=i,t.stackEnd=o.negative);let r=this.stackOrder[t[this.groupAccessor]];if(r||(this.stackOrder[t[this.groupAccessor]]={},r=this.stackOrder[t[this.groupAccessor]]),r[t[this.ordinalAccessor]]||(r[t[this.ordinalAccessor]]={previous:l,value:i,stackStart:t.stackStart,stackEnd:t.stackEnd}),t.enteringStackStart=!1,this.interpolating&&this.interpolating.stackOrder[t[this.groupAccessor]]){const s=this.interpolating.stackOrder[t[this.groupAccessor]],n=t=>{if(0===t)return 0;if(s[t]){if(i>=0&&s[t].value>=0)return s[t].stackStart;if(i<0&&s[t].value<0)return s[t].stackEnd}return n(r[t].previous)};s[t[this.ordinalAccessor]]||(t.enteringStackStart=n(l))}l=t[this.ordinalAccessor],t.getSum=()=>n.sum,h+=i,i>0&&(a+=i),s[t[this.ordinalAccessor]]||(s[t[this.ordinalAccessor]]=1),n.values.push(t)}o.positive>this.extent[1]&&(this.extent[1]=o.positive),o.negative<this.extent[0]&&(this.extent[0]=o.negative),n.sum=h,n.sumMessage="Sum "+h,n.sumAboveZero=a,r.push(n)}return r};n(i),this.datakeys=Object.keys(s),this.series=n(i),"asc"===this.sortOrder?this.series=[...this.series].sort((t,i)=>t.sum-i.sum):"desc"===this.sortOrder&&(this.series=[...this.series].sort((t,i)=>i.sum-t.sum))}prepareLegendData(){this.legendData=this.series[0].values}validateClickHighlight(){this.clickHighlight.map(t=>{t[this.groupAccessor]=t[this.groupAccessor]instanceof Date?BR({date:t[this.groupAccessor],format:"vertical"===this.layout?this.xAxis.format:this.yAxis.format,offsetTimezone:!0}):t[this.groupAccessor]})}setTableData(){const t=[];this.series.forEach(i=>{i.values.forEach(i=>{t.push(i)})});const i=eX(this,HR,"stacked-bar-chart");this.tableData=tX(t,i),this.tableColumns=Object.keys(i)}setColors(){this.preparedColors=this.colors?XR(this.colors):JR(this.colorPalette,this.datakeys.length)}setTextures(){const t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6)this.colorArr=this.preparedColors;else{const i=lR({colors:t,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical",disableTransitions:!this.duration});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}}setStrokes(){const t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;this.strokes=cR({root:this.svg.node(),id:this.chartID,colors:t,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,stacked:!0}),this.textStrokes={},t.forEach(t=>{this.textStrokes[t]=aR({root:this.svg.node(),id:this.chartID,color:t})}),this.clickStyle&&this.clickStyle.color&&(this.textStrokes[this.clickStyle.color]=aR({root:this.svg.node(),id:this.chartID,color:this.clickStyle.color})),this.hoverStyle&&this.hoverStyle.color&&(this.textStrokes[this.hoverStyle.color]=aR({root:this.svg.node(),id:this.chartID,color:this.hoverStyle.color}))}prepareScales(){const t=this.normalized?[0,1]:[this.minValueOverride&&this.minValueOverride<this.extent[0]?this.minValueOverride:this.extent[0],this.maxValueOverride||this.extent[1]];this.interpolating&&(this.interpolating.oldXDomain=this.x.domain(),this.interpolating.oldXRange=this.x.range(),this.interpolating.oldYDomain=this.y.domain(),this.interpolating.oldYRange=this.y.range()),"vertical"===this.layout?(this.interpolating&&(this.interpolating.padding=this.x.padding(),this.interpolating.x=$z().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange).padding(this.interpolating.padding),this.interpolating.y=iH().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange)),this.y=iH().domain(t).range([this.innerPaddedHeight,0]),this.x=$z().domain(this.series.map(t=>t.key)).range([0,this.innerPaddedWidth]).padding(this.barIntervalRatio)):"horizontal"===this.layout&&(this.interpolating&&(this.interpolating.padding=this.y.padding(),this.interpolating.x=iH().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange),this.interpolating.y=$z().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange).padding(this.interpolating.padding)),this.x=iH().domain(t).range([0,this.innerPaddedWidth]),this.y=$z().domain(this.series.map(t=>t.key)).range([0,this.innerPaddedHeight]).padding(this.barIntervalRatio))}renderRootElements(){this.svg=cz(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.gridG=this.rootG.append("g").attr("class","grid-group"),this.barG=this.rootG.append("g").attr("class","stacked-bar-group"),this.labelG=this.rootG.append("g").attr("class","stacked-bar-dataLabel-group"),this.totalLabels=this.rootG.append("g").attr("class","bar-dataLabel-group"),this.legendG=cz(this.stackedBarChartEl).select(".stacked-bar-legend").append("svg"),this.tooltipG=cz(this.stackedBarChartEl).select(".stacked-bar-tooltip"),this.references=this.rootG.append("g").attr("class","stacked-bar-reference-line-group")}setTestingAttributes(){this.unitTest?(cz(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").attr("data-testid","chart-container"),cz(this.stackedBarChartEl).select(".stacked-bar-main-title").attr("data-testid","main-title"),cz(this.stackedBarChartEl).select(".stacked-bar-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.barG.attr("data-testid","stacked-bar-group"),this.updateBarWrappers.attr("data-testid","stacked-bar-wrapper").attr("data-id",t=>`stacked-bar-wrapper-${t.key}`),this.update.attr("data-testid","bar").attr("data-id",t=>`bar-${t[this.groupAccessor]}-${t[this.ordinalAccessor]}`),this.labelG.attr("data-testid","stacked-bar-dataLabel-group"),this.updateLabelWrappers.attr("data-testid","stacked-bar-dataLabel-wrapper").attr("data-id",t=>`stacked-bar-dataLabel-wrapper-${t.key}`),this.updateLabels.attr("data-testid","dataLabel").attr("data-id",t=>`dataLabel-${t[this.groupAccessor]}-${t[this.ordinalAccessor]}`),this.totalLabels.attr("data-testid","stacked-bar-totalLabel-group"),this.updateTotalLabels.attr("data-testid","totalLabel").attr("data-id",t=>`totalLabel-${t.key}`),this.references.attr("data-testid","reference-line-group"),this.svg.select("defs").attr("data-testid","pattern-defs"),this.references.selectAll(".stacked-bar-reference-line").attr("data-testid","reference-line"),this.references.selectAll(".stacked-bar-reference-line-label").attr("data-testid","reference-line-label")):(cz(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").attr("data-testid",null),cz(this.stackedBarChartEl).select(".stacked-bar-main-title").attr("data-testid",null),cz(this.stackedBarChartEl).select(".stacked-bar-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.barG.attr("data-testid",null),this.updateBarWrappers.attr("data-testid",null).attr("data-id",null),this.update.attr("data-testid",null).attr("data-id",null),this.labelG.attr("data-testid",null),this.updateLabelWrappers.attr("data-testid",null).attr("data-id",null),this.updateLabels.attr("data-testid",null).attr("data-id",null),this.totalLabels.attr("data-testid",null),this.updateTotalLabels.attr("data-testid",null).attr("data-id",null),this.references.attr("data-testid",null),this.svg.select("defs").attr("data-testid",null),this.references.selectAll(".stacked-bar-reference-line").attr("data-testid",null),this.references.selectAll(".stacked-bar-reference-line-label").attr("data-testid",null))}reSetRoot(){dR({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:Yq}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),dR({selection:this.root,duration:this.duration,namespace:"root_reset",easing:Yq}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),dR({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:Yq}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),OR(this.chartID,this.width)}drawXAxis(){jR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel&&"vertical"===this.layout?this.x.bandwidth():"",format:this.xAxis.format,dateFormat:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible,duration:this.duration})}drawYAxis(){jR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,dateFormat:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible,duration:this.duration})}setXAxisAccessibility(){SR({rootEle:this.stackedBarChartEl,hasXAxis:!!this.innerXAxis&&this.innerXAxis.visible,xAxis:"vertical"===this.layout?this.x||!1:this.y||!1,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){TR({rootEle:this.stackedBarChartEl,hasYAxis:!!this.innerYAxis&&this.innerYAxis.visible,yAxis:"vertical"===this.layout?this.y||!1:this.x||!1,yAxisLabel:this.yAxis.label?this.yAxis.label:""})}drawBaseline(){"vertical"===this.layout&&jR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0)||-1,duration:this.duration}),"horizontal"===this.layout&&jR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,padding:this.padding,markOffset:this.x(0)||-1,duration:this.duration})}drawXGrid(){FR(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!this.innerXAxis.gridVisible,this.xAxis.tickInterval,this.duration)}drawYGrid(){FR(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.innerYAxis.gridVisible,this.yAxis.tickInterval,this.duration)}setGlobalSelections(){const t=this.barG.selectAll(".stacked-bar-series").data(this.series,t=>t.key);this.enterBarWrappers=t.enter().append("g"),this.exitBarWrappers=t.exit(),this.updateBarWrappers=t.merge(this.enterBarWrappers);const i=this.updateBarWrappers.selectAll(".stacked-bar").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enter=i.enter().append("rect"),this.exit=i.exit(),this.update=i.merge(this.enter),this.exitSize=this.exit.size(),this.enterSize=this.enter.size();const s=this.labelG.selectAll(".stacked-bar-dataLabel-series").data(this.series,t=>t.key);this.enterLabelWrappers=s.enter().append("g"),this.exitLabelWrappers=s.exit(),this.updateLabelWrappers=s.merge(this.enterLabelWrappers);const n=this.updateLabelWrappers.selectAll(".stacked-bar-dataLabel").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enterLabels=n.enter().append("text"),this.exitLabels=n.exit(),this.updateLabels=n.merge(this.enterLabels);const r=this.totalLabels.selectAll(".bar-dataLabel-group text").data(this.series,t=>t.key);this.enterTotalLabels=r.enter().append("text"),this.exitTotalLabels=r.exit(),this.updateTotalLabels=r.merge(this.enterTotalLabels)}enterGeometries(){this.enter.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"innerPaddedWidth":"innerPaddedHeight";this.enter.attr("class","stacked-bar").attr("cursor",this.suppressEvents?null:this.cursor).each((t,i,s)=>{pR(s[i])}).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr(s,t=>{let i=this[s];this.interpolating&&(i=this.interpolating[s]);let n=t.stackEnd;return t.stackEnd<0&&(n=t.stackStart),"number"==typeof t.enteringStackStart&&(n=t.enteringStackStart),i(n/(this.normalized?t.getSum():1))}).attr(n,0).attr(t,i=>{let s=this[t];return this.interpolating&&(s=this.interpolating[t]),s(i[this.groupAccessor])}).attr(i,()=>{let i=this[t];return this.interpolating&&(i=this.interpolating[t]),i.bandwidth()}),this.enterBarWrappers.attr("class","stacked-bar-series entering").each((t,i,s)=>{pR(s[i])}).selectAll(".stacked-bar").attr(n,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackEnd/i)-this.y(t.stackStart/i):this.x(t.stackStart/i)-this.x(t.stackEnd/i)}),this.defaults?this.enter.attr("opacity",t=>qR(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)):(this.enter.attr("opacity",0),this.enterBarWrappers.selectAll(".stacked-bar").attr(s,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackStart/i):this.x(t.stackEnd/i)}).attr(t,i=>{let s=this[t](i[this.groupAccessor])+this[t].bandwidth()/2;return s=this[t](i[this.groupAccessor])+this[t].bandwidth()/2*(s/(this[r]/2)),s}).attr(i,0)),this.enterBarWrappers.order(),this.enter.order()}updateGeometries(){this.update.interrupt(),this.update.transition("opacity").duration((t,i,s)=>cz(s[i]).classed("entering")?(cz(s[i]).classed("entering",!1),this.duration):0).ease(Yq).attr("opacity",t=>qR(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).call(rX,()=>{this.update.classed("entering",!1)})}exitGeometries(){this.exit.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"innerPaddedWidth":"innerPaddedHeight";this.exit.attr("filter",null).transition("exit").duration(this.duration).ease(Yq).attr(n,0).attr(s,t=>{let i=t.stackEnd;t.stackEnd<0&&(i=t.stackStart);const n=this.normalized?t.getSum():1;return this[s](i/n)}).attr(t,i=>this[t](i[this.groupAccessor])),this.exitBarWrappers.selectAll(".stacked-bar").attr("filter",null).transition("exit").duration(this.duration).ease(Yq).attr("opacity",0).attr(s,(t,i,n)=>cz(n[i]).attr(s)).attr(t,(s,n,e)=>{const h=cz(e[n]);let a=+h.attr(t)+ +h.attr(i)/2;return a=+h.attr(t)+ +h.attr(i)/2*(a/(this[r]/2)),a}).attr(n,(t,i,s)=>cz(s[i]).attr(n)).attr(i,0),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(Yq).call(rX,()=>{const t=CR(this.rootG.node());this.exit.remove(),this.exitBarWrappers.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),$R({parentGNode:this.rootG.node(),focusDidExist:t})})}drawGeometries(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",s="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"height":"width";this.updateBarWrappers.transition("update").duration(this.duration).ease(Yq).call(rX,()=>{this.updateBarWrappers.classed("entering",!1)}),this.update.classed("geometryIsMoving",(r,e,h)=>{const a=this.normalized?r.getSum():1;return hR(cz(h[e]),[{attr:t,numeric:!0,newValue:this[t](r[this.groupAccessor])},{attr:i,numeric:!0,newValue:this[t].bandwidth()},{attr:s,numeric:!0,newValue:"vertical"===this.layout?this.y(r.stackStart/a):this.x(r.stackEnd/a)},{attr:n,numeric:!0,newValue:"vertical"===this.layout?this.y(r.stackEnd/a)-this.y(r.stackStart/a):this.x(r.stackStart/a)-this.x(r.stackEnd/a)}])}).attr(`data-${t}`,i=>this[t](i[this.groupAccessor])).attr(`data-${i}`,this[t].bandwidth()).attr(`data-${s}`,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackStart/i):this.x(t.stackEnd/i)}).attr(`data-${n}`,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackEnd/i)-this.y(t.stackStart/i):this.x(t.stackStart/i)-this.x(t.stackEnd/i)}).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).transition("update").duration(this.duration).ease(Yq).attr(s,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackStart/i):this.x(t.stackEnd/i)}).attr(n,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackEnd/i)-this.y(t.stackStart/i):this.x(t.stackStart/i)-this.x(t.stackEnd/i)}).attr(t,i=>this[t](i[this.groupAccessor])).attr(i,this[t].bandwidth()).call(rX,()=>{setTimeout(()=>{this.update.classed("geometryIsMoving",!1),this.updateInteractionState(),this.updateLabels.classed("textIsMoving",!1),this.checkLabelColorAgainstBackground()},0),$R({parentGNode:this.rootG.node()})})}updateInteractionState(){uR(this.svg.node()),this.update.interrupt("opacity"),this.updateLabels.interrupt("opacity"),this.update.attr("opacity",t=>qR(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).attr("fill",(t,i)=>{const s=this.clickHighlight&&this.clickHighlight.length>0&&PR(t,this.clickHighlight,this.innerInteractionKeys),n=this.hoverHighlight&&RR(t,this.hoverHighlight,this.innerInteractionKeys),r=this.colorArr[i];return s&&this.clickStyle.color?hX[this.clickStyle.color]||this.clickStyle.color:s?r:n&&this.hoverStyle.color?hX[this.hoverStyle.color]||this.hoverStyle.color:r}).each((t,i,s)=>{const n=cz(s[i]);if(this.accessibility.hideStrokes||n.classed("geometryIsMoving"))n.attr("filter",null);else{const r=this.clickHighlight&&this.clickHighlight.length>0&&PR(t,this.clickHighlight,this.innerInteractionKeys),e=this.hoverHighlight&&RR(t,this.hoverHighlight,this.innerInteractionKeys),h=this.preparedColors[i],a=r?"click":e?"hover":"rest",o=r&&this.clickStyle.color?hX[this.clickStyle.color]||this.clickStyle.color:r?h:e&&this.hoverStyle.color?hX[this.hoverStyle.color]||this.hoverStyle.color:h;"hover"===a&&oR({inputElement:s[i],id:this.chartID,key:t[this.ordinalAccessor]+t[this.groupAccessor],strokeWidth:this.hoverStyle.strokeWidth,fill:o});const u=this.strokes[a+o];u!==n.attr("filter")&&(this.isSafari?(n.attr("filter",null),setTimeout(()=>{n.attr("filter",u)},0)):n.attr("filter",u))}}),$R({parentGNode:this.rootG.node()}),VR({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}setLabelOpacity(){this.processLabelOpacity(this.updateLabels),this.updateTotalLabels.attr("opacity",this.showTotalValue&&!this.normalized?1:0)}processLabelOpacity(t){const i=this.dataLabel.visible?1:0,s="vertical"===this.layout?"x":"y",n="vertical"===this.layout?"width":"height",r="vertical"===this.layout?"height":"width";t.attr("opacity",t=>{const e=this.normalized?t.getSum():1,h={};return h[n]=this[s].bandwidth(),h[r]="vertical"===this.layout?this.y(t.stackEnd/e)-this.y(t.stackStart/e):this.x(t.stackStart/e)-this.x(t.stackEnd/e),"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly||this.accessibility.showSmallLabels||eR({text:UR(t,this.innerLabelAccessor,this.dataLabel.format,this.normalized),dimensions:h,fontSize:14})?qR(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:0})}checkLabelColorAgainstBackground(){this.updateLabels.attr("fill",(t,i,s)=>this.textTreatmentHandler(t,i,s))}bindInteractivity(){this.update.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler())}setRoundedCorners(){this.update.transition("shared_update").duration(this.duration).ease(Yq).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)}setSelectedClass(){this.update.classed("highlight",(t,i,s)=>{let n=qR(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return n=!(!this.clickHighlight||!this.clickHighlight.length)&&n,IR(s[i],n,this.accessibility.elementsAreInterface),n})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),cz(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null)}enterDataLabels(){this.enterLabelWrappers.attr("class","stacked-bar-dataLabel-series entering"),this.enterLabels.attr("class","stacked-bar-dataLabel entering").style("pointer-events","none").classed("stacked-bar-dataLabel-"+this.layout,!0).attr("opacity",0).attr("fill",this.textTreatmentHandler),nX({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized})}updateDataLabels(){this.updateLabels.interrupt();const t=this.dataLabel.visible?1:0;this.updateLabelWrappers.transition("update").duration(this.duration).ease(Yq).call(rX,()=>{this.updateLabelWrappers.classed("entering",!1)}),this.updateLabels.transition("opacity").ease(Yq).duration((t,i,s)=>cz(s[i]).classed("entering")?(cz(s[i]).classed("entering",!1),this.duration):0).attr("opacity",i=>qR(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1).call(rX,()=>{this.updateLabels.classed("entering",!1)})}exitDataLabels(){this.exitLabelWrappers.selectAll("text").attr("filter",null).transition("exit").ease(Yq).duration(this.duration/2).attr("opacity",0).call(rX,()=>{this.exitLabelWrappers.remove()}),this.exitLabels.attr("filter",null).transition("exit").ease(Yq).duration(this.duration/2).attr("opacity",0).remove()}drawDataLabels(){let t=15;const i="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;this.updateLabels.classed("stacked-bar-dataLabel-horizontal",!1).classed("stacked-bar-dataLabel-vertical",!1).classed("stacked-bar-dataLabel-"+this.layout,!0).text((i,s,n)=>{if(0===i[this.valueAccessor]&&!this.showZeroLabels)return"";if(0===s){const i=getComputedStyle(n[s]),r=parseFloat(i.fontSize);t=Math.max(r-1,1)}return UR(i,this.innerLabelAccessor,this.dataLabel.format,this.normalized)}).style("visibility",(t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?cz(s[i]).style("visibility"):null),this.updateLabelWrappers.transition("update").duration(this.duration).ease(Yq).call(rX,()=>{this.updateLabelWrappers.classed("entering",!1)});const s="vertical"===this.layout?"x":"y",n="vertical"===this.layout?"y":"x",r="vertical"===this.layout?"stackStart":"stackEnd",e=this.updateLabels.classed("textIsMoving",t=>{if(!this.interpolating)return!1;const i=this.normalized?t.getSum():1;return this.interpolating[s](t[this.groupAccessor])!==this[s](t[this.groupAccessor])||this.interpolating[n](t[r]/i)!==this[n](t[r]/i)}).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).transition("update").ease(Yq).duration(this.duration),h={vertical:{top:{validPositions:["bottom"],offsets:[5]},middle:{validPositions:["middle"],offsets:[1]},bottom:{validPositions:["top"],offsets:[t/2]}},horizontal:{right:{validPositions:["left"],offsets:[8]},middle:{validPositions:["middle"],offsets:[1]},left:{validPositions:["right"],offsets:[20]}}},a=this.dataLabel&&this.dataLabel.collisionPlacement,o=a&&h[this.layout][a]?this.dataLabel.collisionPlacement:"vertical"===this.layout?"top":"right";this.bitmaps=nX({root:e,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,labelSelection:e,avoidMarks:[this.update],validPositions:i?["middle"]:h[this.layout][o].validPositions,offsets:i?[1]:h[this.layout][o].offsets,accessors:[this.groupAccessor,this.ordinalAccessor,"key"],size:[oX(this.width,0),oX(this.height,0)],boundsScope:i?void 0:o,hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})}enterTotalDataLabels(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"y":"x";this.enterTotalLabels.attr("class","bar-dataLabel-"+this.layout).attr("opacity",0).attr("fill",hX.dark_text).attr(t,i=>this[t](i.key)+this[t].bandwidth()/2).attr(i,t=>this[i](t.sumAboveZero)+4)}updateTotalDataLabels(){const t=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.transition("total_opacity").ease(Yq).duration(this.duration).attr("opacity",t)}exitTotalDataLabels(){this.exitTotalLabels.transition("exit").ease(Yq).duration(this.duration/2).attr("opacity",0).remove()}drawTotalDataLabels(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"y":"x",s=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.text(t=>KR(t.sum,this.dataLabel.format)).attr("text-anchor","vertical"===this.layout?"middle":"start");const n=this.updateTotalLabels.classed("bar-dataLabel-horizontal",!1).classed("bar-dataLabel-vertical",!1).classed("bar-dataLabel-"+this.layout,!0).attr(`data-${t}`,i=>this[t](i.key)+this[t].bandwidth()/2).attr(`data-${i}`,t=>this[i](t.sumAboveZero)).attr("data-use-dx",!0).attr("data-use-dy",!0).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("dx","vertical"===this.layout?"0":"0.3em").attr("dy","vertical"===this.layout?"-0.3em":".3em").style("visibility",(t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?cz(s[i]).style("visibility"):null).transition("update").ease(Yq).duration(this.duration).attr("opacity",s);this.showTotalValue&&("auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly)?(this.bitmaps=uX({bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[this.update],validPositions:["middle"],offsets:[1],accessors:[this.ordinalAccessor],size:[oX(this.width,0),oX(this.height,0)],hideOnly:!0}),n.attr(t,i=>this[t](i.key)+this[t].bandwidth()/2).attr(i,t=>this[i](t.sumAboveZero))):n.attr(t,i=>this[t](i.key)+this[t].bandwidth()/2).attr(i,t=>this[i](t.sumAboveZero))}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class",".stacked-bar-reference").attr("opacity",1),s=i.append("line");s.attr("class","stacked-bar-reference-line").attr("opacity",0);const n=i.append("text");n.attr("class","stacked-bar-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".stacked-bar-reference-line").data(t=>[t]).transition("merge").ease(Yq).duration(this.duration),h=r.selectAll(".stacked-bar-reference-line-label").data(t=>[t]).transition("merge").ease(Yq).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(Yq).duration(this.duration).attr("opacity",0).remove(),"vertical"===this.layout?(i.attr("transform",t=>"translate(0,"+this.y(t.value)+")"),r.transition("merge").ease(Yq).duration(this.duration).attr("transform",t=>"translate(0,"+this.y(t.value)+")"),s.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),n.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em")):"horizontal"===this.layout&&(i.attr("transform",t=>"translate("+this.x(t.value)+",0)"),r.transition("merge").ease(Yq).duration(this.duration).attr("transform",t=>"translate("+this.x(t.value)+",0)"),s.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),e.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),n.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em"),h.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em")),e.style("stroke",hX[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",hX[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}drawAnnotations(){let t="horizontal"!==this.layout?this.x:this.y;const i="horizontal"!==this.layout?this.y:this.x;if(this.data[0][this.groupAccessor]instanceof Date){const i=function(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&s>n&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e]))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e]))&&s>n&&(n=s);return n}(this.data,t=>t[this.groupAccessor]),s=function(t,i){var s,n,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(s=t[e])&&s>=s)for(n=s;++e<r;)null!=(s=t[e])&&n>s&&(n=s)}else for(;++e<r;)if(null!=(s=i(t[e]))&&s>=s)for(n=s;++e<r;)null!=(s=i(t[e]))&&n>s&&(n=s);return n}(this.data,t=>t[this.groupAccessor]),n="horizontal"!==this.layout?[0,this.innerPaddedWidth]:[this.innerPaddedHeight,0];t=function(){return bz.apply(Vq(pH,vH,lH,uH,oH,aH,hH,eH,NH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain([s,i]).range(n)}_R({source:this.rootG.node(),data:this.annotations,xScale:"horizontal"!==this.layout?t:i,xAccessor:"horizontal"!==this.layout?this.groupAccessor:this.valueAccessor,yScale:"horizontal"!==this.layout?i:t,yAccessor:"horizontal"!==this.layout?this.valueAccessor:this.groupAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){DR(this.stackedBarChartEl,this.annotations)}drawLegendElements(){GR({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){cz(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null).on("click",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?t=>this.hoverFunc.emit(t):null).on("mouseout",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?()=>this.onMouseOutHandler():null)}setTagLevels(){this.topLevel=fR(this.highestHeadingLevel),this.bottomLevel=fR(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){vR({rootEle:this.stackedBarChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"stacked-bar-chart",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){gR({node:this.svg.node(),chartTag:"stacked-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:eX(this,HR,"stacked-bar-chart"),groupAccessor:this.groupAccessor,groupName:"stack",groupKeys:!!this.showTotalValue&&["sumMessage"],disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,s)=>{pR(s[i])})}setGeometryAriaLabels(){const t=eX(this,HR,"stacked-bar-chart");this.update.each((i,s,n)=>{yR({node:n[s],geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:!!this.showTotalValue&&["sumMessage"],groupName:"stack",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),wR({node:n[s],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateBarWrappers.each((t,i,s)=>{wR({node:s[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){bR(this.stackedBarChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){MR(this.stackedBarChartEl,this.subTitle)}setChartAccessibilityLongDescription(){kR(this.stackedBarChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){xR(this.stackedBarChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){AR(this.stackedBarChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){WR(this.stackedBarChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){NR(this.stackedBarChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){LR({rootEle:this.stackedBarChartEl,parentGNode:this.barG.node(),chartTag:"stacked-bar-chart",geomType:"bar",groupName:"stack"})}setChartAccessibilityStructureNotes(){ER(this.stackedBarChartEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){sX(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&t&&this.eventsTooltip({data:t,evt:JO,isToShow:!0})}onMouseOutHandler(){sX(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){iX(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){YR({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,normalized:this.normalized,chartType:"stacked"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldCheckValueAxis&&("horizontal"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0):"vertical"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0),this.shouldCheckValueAxis=!1),this.shouldCheckLabelAxis&&("vertical"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0):"horizontal"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0),this.shouldCheckLabelAxis=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateLegendData&&(this.prepareLegendData(),this.shouldUpdateLegendData=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldValidateClickHighlight&&(this.validateClickHighlight(),this.shouldValidateClickHighlight=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldValidateAxes&&(this.validateAxes(),this.shouldValidateAxes=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldValidateLabelPlacement&&(this.validateLabelPlacement(),this.shouldValidateLabelPlacement=!1),s("div",{class:`o-layout is--${this.layout} light`},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"stacked-bar-main-title vcl-main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions stacked-bar-sub-title vcl-sub-title"},this.subTitle),s("div",{class:"stacked-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"bar",groupName:"stack",chartTag:"stacked-bar-chart",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:!0,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-stacked-bar-container"}),s("div",{class:"stacked-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(nR);let i=0;const s={mainTitle:{exception:""},subTitle:{exception:""},showTooltip:{exception:!1},wrapLabel:{exception:!1},showTotalValue:{exception:!1},barIntervalRatio:{exception:0},hoverOpacity:{exception:0}};for(i=0;i<t.length;i++){const n=!!s[t[i]]&&this[t[i]]===s[t[i]].exception;this[t[i]]=this[t[i]]||n?this[t[i]]:nR[t[i]]}}get stackedBarChartEl(){return n(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],normalized:["normalizedWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTotalValue:["showTotalValueWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],showZeroLabels:["showZeroLabelsWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],interactionKeys:["interactionWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}stacked-bar-chart{cursor:default}stacked-bar-chart .annotations{pointer-events:none}stacked-bar-chart .annotations .handle{pointer-events:all}stacked-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}stacked-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}stacked-bar-chart .hidden{display:none}stacked-bar-chart #visa-viz-d3-stacked-bar-container{clear:both}stacked-bar-chart .stacked-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}stacked-bar-chart .stacked-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}stacked-bar-chart .stacked-bar-legend .key-dot{margin:3px 8px}stacked-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}stacked-bar-chart .light .grid path{stroke-width:0}stacked-bar-chart .light .axis{font-size:12px}stacked-bar-chart .light .axis .tick text{fill:#767676}stacked-bar-chart .light .axis .tick line{stroke:#767676}stacked-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .light .y.axis path{stroke:#767676;opacity:0}stacked-bar-chart .light .x.axis path{stroke:#767676}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-vertical{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-horizontal{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}stacked-bar-chart .dark .grid path{stroke-width:0}stacked-bar-chart .dark .axis{font-size:12px}stacked-bar-chart .dark .axis .tick line{stroke:lightgrey}stacked-bar-chart .dark .axis .tick text{fill:grey}stacked-bar-chart .dark .axis path{stroke:black}stacked-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .dark .o-layout--chart svg{background:black}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"}};window.VisaChartsLibOSSLicenses=QR();export{Mn as alluvial_diagram,Po as clustered_bar_chart,Bp as dumbbell_plot,Zp as group_charts,Kb as heat_map,YA as level_indicator_alternative,NE as parallel_plot,tO as pareto_chart,cX as stacked_bar_chart};