/**
 * Copyright (c) 2024 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
import{r as t,c as i,h as s,g as h}from"./p-eeee2e3c.js";import{m as e}from"./p-cbe185fc.js";import{m as a}from"./p-b0dcbe24.js";import{p as l}from"./p-b62f42bc.js";import{n as r,l as o}from"./p-45691346.js";import{m as n,s as c,a as d,b as u}from"./p-6812b7e2.js";import{v as b,s as p,e as m}from"./p-a494a9b5.js";import{v as f}from"./p-9cc83250.js";import{h as y,d as g,s as v,m as x,y as L}from"./p-4d338ee8.js";import{c as k}from"./p-209ccfff.js";import"./p-1e7506b0.js";import"./p-85d34e7b.js";const{propDefaultValues:$}=b;class w{}w.mainTitle="Dumbbell Plot Title",w.subTitle=$.subTitle.text,w.height=300,w.width=650,w.margin={top:3,bottom:3,right:6.5,left:6.5},w.padding={top:20,bottom:50,right:50,left:50},w.localization=$.localization,w.ordinalAccessor="date",w.valueAccessor="value",w.seriesAccessor="category",w.focusMarker={key:"",sizeFromBar:12},w.marker={visible:!0,type:"dot",sizeFromBar:8},w.barStyle={opacity:1,width:1,colorRule:"default"},w.differenceLabel={visible:!1,placement:"left",calculation:"difference",format:"0[.][0][0]a",collisionHideOnly:!1},w.layout=$.layout,w.accessibility=$.accessibility,w.animationConfig=$.animationConfig,w.highestHeadingLevel=$.highestHeadingLevel,w.sortOrder=$.sortOrder,w.xAxis=$.xAxisDate,w.yAxis=$.yAxis,w.showBaselineX=$.showBaselineFalse,w.showBaselineY=$.showBaselineFalse,w.wrapLabel=$.wrapLabel,w.colorPalette=$.colorPaletteCategorical,w.hoverStyle=$.hoverStyle,w.clickStyle=$.clickStyle,w.referenceStyle=$.referenceStyle,w.cursor=$.cursor,w.roundedCorner=$.roundedCorner,w.barIntervalRatio=$.barIntervalRatio,w.hoverOpacity=$.hoverOpacity,w.dataLabel=$.dataLabelEnds,w.legend=$.hiddenLegend,w.tooltipLabel=$.tooltipLabel,w.showTooltip=$.showTooltip,w.suppressEvents=$.suppressEvents,w.referenceLines=$.referenceLines,w.annotations=$.annotations,w.clickHighlight=$.clickHighlight,w.seriesLabel=$.seriesLabel;const{getGlobalInstances:A,configLocalization:W,getActiveLanguageString:S,getAccessibleStrokes:D,ensureTextContrast:T,createTextStrokeFilter:O,createUrl:C,initializeDescriptionRoot:z,initializeElementAccess:I,setElementFocusHandler:M,setElementAccessID:E,setAccessibilityController:j,hideNonessentialGroups:P,setAccessTitle:_,setAccessSubtitle:F,setAccessLongDescription:N,setAccessExecutiveSummary:K,setAccessPurpose:G,setAccessContext:H,setAccessStatistics:X,setAccessChartCounts:Y,setAccessXAxis:B,setAccessYAxis:q,setAccessStructure:V,setAccessAnnotation:R,retainAccessFocus:U,checkAccessFocus:J,setElementInteractionAccessState:Q,setAccessibilityDescriptionWidth:Z,drawTooltip:tt,annotate:it,chartAccessors:st,checkInteraction:ht,checkClicked:et,checkHovered:at,convertVisaColor:lt,drawAxis:rt,drawGrid:ot,drawLegend:nt,setLegendInteractionState:ct,formatDataLabel:dt,getColors:ut,getLicenses:bt,getPadding:pt,getScopedData:mt,initTooltipStyle:ft,overrideTitleTooltip:yt,placeDataLabels:gt,scopeDataKeys:vt,transitionEndAll:xt,validateAccessibilityProps:Lt,validateLocalizationProps:kt,findTagLevel:$t,prepareRenderChange:wt,roundTo:At,getTextWidth:Wt,resolveLabelCollision:St,setSubTitle:Dt,setReferenceLine:Tt}=b,Ot=class{constructor(s){t(this,s),this.clickEvent=i(this,"clickEvent",7),this.hoverEvent=i(this,"hoverEvent",7),this.mouseOutEvent=i(this,"mouseOutEvent",7),this.initialLoadEvent=i(this,"initialLoadEvent",7),this.initialLoadEndEvent=i(this,"initialLoadEndEvent",7),this.drawStartEvent=i(this,"drawStartEvent",7),this.drawEndEvent=i(this,"drawEndEvent",7),this.transitionEndEvent=i(this,"transitionEndEvent",7),this.shouldValidateAccessibility=!0,this.shouldValidateLocalization=!0,this.updated=!0,this.time={timemillisecond:n,timesecond:c,timeminute:d,timehour:y,timeday:g,timeweek:v,timemonth:x,timeyear:L},this.shouldUpdateLayout=!1,this.shouldValidate=!1,this.shouldUpdateAnnotations=!1,this.shouldUpdateReferenceLines=!1,this.shouldResetRoot=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateYGrid=!1,this.shouldUpdateScales=!1,this.shouldUpdateBaseline=!1,this.shouldCheckValueAxis=!1,this.shouldCheckLabelAxis=!1,this.shouldSetColors=!1,this.shouldSetSubTitle=!1,this.shouldUpdateLegend=!1,this.shouldSetGlobalSelections=!1,this.shouldSetSeriesSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldUpdateData=!1,this.shouldEnterUpdateExit=!1,this.shouldEnterUpdateExitMarkers=!1,this.shouldUpdateMarkerOpacity=!1,this.shouldUpdateGeometries=!1,this.shouldUpdateSeriesLabels=!1,this.shouldUpdateDifferenceLabels=!1,this.shouldUpdateLabels=!1,this.shouldValidateInteractionKeys=!1,this.shouldUpdateTableData=!1,this.shouldValidateDataLabelPlacement=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldAddStrokeUnder=!1,this.shouldUpdateBaselineX=!1,this.shouldUpdateBaselineY=!1,this.shouldUpdateLegendData=!1,this.shouldUpdateMarkerIDs=!1,this.shouldValidateLayout=!1,this.shouldValidateSeriesLabelPlacement=!1,this.shouldValidateDiffLabelPlacement=!1,this.shouldBindInteractivity=!1,this.shouldBindLegendInteractivity=!1,this.shouldBindSeriesInteractivity=!1,this.shouldUpdateCursor=!1,this.shouldSetLegendCursor=!1,this.shouldSetSeriesCursor=!1,this.shouldSetLabelOpacity=!1,this.shouldSetSeriesLabelOpacity=!1,this.shouldSetDifferenceLabelOpacity=!1,this.shouldSetSelectionClass=!1,this.shouldDrawInteractionState=!1,this.shouldRenderMarkerGroup=!1,this.shouldUpdateBarStyle=!1,this.shouldUpdateMarkerSize=!1,this.shouldUpdateDiffLabelColor=!1,this.shouldUpdateMarkerStyle=!1,this.shouldDrawMarkerGeometries=!1,this.shouldUpdateMarkerData=!1,this.shouldUpdateSeriesData=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityAttributes=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetLocalizationConfig=!1,this.topLevel="h2",this.bottomLevel="p",this.strokes={},this.handleMarkerColors=(t,i,s)=>{const h=this.rawColors[t.referenceIndex]||this.rawColors[0],e=i<2&&this.clickHighlight.length?this.clickStyle.color||h:i<4?h:this.hoverStyle.color||h,a=this.colorArr[t.referenceIndex]||this.colorArr[0],l=i<2&&this.clickHighlight.length?this.clickStyle.color||a:i<4?a:this.hoverStyle.color||a;return p(s[i]).attr("fill",l),this.accessibility.hideStrokes?l:this.strokes[e.toLowerCase()]},this.handleSeriesLabelColors=(t,i)=>{let s,h;this.seriesInteraction&&(s=at(t,this.hoverHighlight,this.innerInteractionKeys),h=et(t,this.clickHighlight,this.innerInteractionKeys));const e=this.rawColors[i]||this.rawColors[0];return this.textColors[(this.seriesInteraction?h&&this.clickHighlight.length?this.clickStyle.color||e:s&&this.hoverHighlight&&this.hoverStyle.color||e:e).toLowerCase()]},this.handleLabelColors=(t,i)=>{const s=at(t,this.hoverHighlight,this.innerInteractionKeys),h=et(t,this.clickHighlight,this.innerInteractionKeys),e=this.rawColors[i]||this.rawColors[0];return this.textColors[(h&&this.clickHighlight.length?this.clickStyle.color||e:s&&this.hoverHighlight&&this.hoverStyle.color||e).toLowerCase()]},this.handleBarColors=(t,i,s)=>{t.focusMarker=!1,t.values[0][this.seriesAccessor]===this.focusMarker.key?t.focusMarker=0:t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1);const h=et(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&et(t.values[1],this.clickHighlight,this.innerInteractionKeys),e=at(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&at(t.values[1],this.hoverHighlight,this.innerInteractionKeys),a="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.rawColors[t.greaterIndex]:this.rawColors[2]:this.rawColors[t.focusMarker],l=h&&this.clickHighlight.length?this.clickStyle.color||a:e&&this.hoverHighlight&&this.hoverStyle.color||a,r="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.colorArr[t.greaterIndex]:this.colorArr[2]:this.colorArr[t.focusMarker],o=h&&this.clickHighlight.length?this.clickStyle.color||r:e&&this.hoverHighlight&&this.hoverStyle.color||r;return p(s[i]).attr("fill",o),this.accessibility.hideStrokes?o:this.strokes[l.toLowerCase()]},this.handleBarOpacity=(t,i,s)=>{const h=ht(t.values[0],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),e=ht(t.values[1],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),a=h&&e?this.barStyle.opacity:this.hoverOpacity;return p(s[i]).attr("stroke-opacity",a),a},this.setBarSize=(t,i,s)=>{const h=et(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&et(t.values[1],this.clickHighlight,this.innerInteractionKeys),e=at(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&at(t.values[1],this.hoverHighlight,this.innerInteractionKeys),a=this.dumbbellInteraction?h?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:e&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width,l=this.x(t.values[0][this.xAccessor]),r=this.y(t.values[0][this.yAccessor]),o=this.x(t.values[1][this.xAccessor]),n=this.y(t.values[1][this.yAccessor]),c=this.isVertical?r>n?.001:-.001:0,d=this.isVertical?0:l>o?.001:-.001,u=this.isVertical?a/2:0,b=this.isVertical?0:a/2;return p(s[i]).attr("data-barSize",a).attr("data-centerX1",(t=>this.x(t.values[0][this.xAccessor]))).attr("data-centerY1",(t=>this.y(t.values[0][this.yAccessor]))).attr("data-centerX2",(t=>this.x(t.values[1][this.xAccessor]))).attr("data-centerY2",(t=>this.y(t.values[1][this.yAccessor]))),`M ${l+d} ${r+c} L ${l} ${r} L ${l+u} ${r+b} L ${o+u} ${n+b} L ${o} ${n} L ${o-u} ${n-b} L ${l-u} ${r-b} L ${l} ${r} L ${l+u} ${r+b} L ${o+u} ${n+b} L ${o} ${n} L ${o-d} ${n-c}`},this.setDiffLabelColor=t=>{t.focusMarker=!1,t.values[0][this.seriesAccessor]===this.focusMarker.key?t.focusMarker=0:t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1);const i="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.rawColors[t.greaterIndex]:this.rawColors[2]:this.rawColors[t.focusMarker];let s,h;return this.dumbbellInteraction&&(h=et(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&et(t.values[1],this.clickHighlight,this.innerInteractionKeys),s=at(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&at(t.values[1],this.hoverHighlight,this.innerInteractionKeys)),this.textColors[(this.dumbbellInteraction?h&&this.clickHighlight.length?this.clickStyle.color||i:s&&this.hoverHighlight&&this.hoverStyle.color||i:i).toLowerCase()]},this.mainTitle=w.mainTitle,this.subTitle=w.subTitle,this.height=w.height,this.width=w.width,this.margin=w.margin,this.padding=w.padding,this.highestHeadingLevel=w.highestHeadingLevel,this.data=void 0,this.uniqueID=void 0,this.localization=w.localization,this.ordinalAccessor=w.ordinalAccessor,this.valueAccessor=w.valueAccessor,this.seriesAccessor=w.seriesAccessor,this.sortOrder=w.sortOrder,this.xAxis=w.xAxis,this.yAxis=w.yAxis,this.wrapLabel=w.wrapLabel,this.layout=w.layout,this.showBaselineX=w.showBaselineX,this.showBaselineY=w.showBaselineY,this.colorPalette=w.colorPalette,this.colors=void 0,this.hoverStyle=w.hoverStyle,this.hoverOpacity=w.hoverOpacity,this.animationConfig=w.animationConfig,this.clickStyle=w.clickStyle,this.referenceStyle=w.referenceStyle,this.cursor=w.cursor,this.focusMarker=w.focusMarker,this.marker=w.marker,this.barStyle=w.barStyle,this.dataLabel=w.dataLabel,this.dataKeyNames=void 0,this.seriesLabel=w.seriesLabel,this.differenceLabel=w.differenceLabel,this.showTooltip=w.showTooltip,this.tooltipLabel=w.tooltipLabel,this.accessibility=w.accessibility,this.legend=w.legend,this.annotations=w.annotations,this.maxValueOverride=void 0,this.minValueOverride=void 0,this.referenceLines=w.referenceLines,this.suppressEvents=w.suppressEvents,this.hoverHighlight=void 0,this.clickHighlight=w.clickHighlight,this.interactionKeys=void 0,this.unitTest=!1}mainTitleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subTitleWatcher(t,i){this.shouldSetSubTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldUpdateLayout=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateLegendData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateBarStyle=!0,this.shouldSetColors=!0}idWatcher(t,i){console.error("Change detected in prop uniqueID from value "+i+" to value "+t+". This prop cannot be changed after component has loaded.")}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetSubTitle=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}ordinalAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateGeometries=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}valueAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldCheckValueAxis=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0}seriesAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateLegendData=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateLegend=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateTableData=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}sortWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0}xAxisWatcher(t,i){const s=!(!t||!t.format)&&t.format,h=!(!i||!i.format)&&i.format,e=!(!t||!t.unit)&&t.unit,a=!(!i||!i.unit)&&i.unit;(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0),s===h&&e===a||(this.shouldUpdateScales=!0,e!==a&&(this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0)),this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0}yAxisWatcher(t,i){(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0),this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0}wrapLabelWatcher(t,i){this.shouldCheckLabelAxis=!0}layoutWatcher(t,i){this.shouldValidateLayout=!0,this.shouldValidateDataLabelPlacement=!0,this.shouldValidateSeriesLabelPlacement=!0,this.shouldUpdateSeriesData=!0,this.shouldValidateDiffLabelPlacement=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0}showBaselineXWatcher(t,i){this.shouldUpdateBaselineX=!0}showBaselineYWatcher(t,i){this.shouldUpdateBaselineY=!0}paletteWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldSetColors=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerStyle=!0,this.shouldUpdateLegend=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDiffLabelColor=!0}hoverStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0}clickStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldSetSeriesCursor=!0}focusMarkerWatcher(t,i){this.shouldDrawMarkerGeometries=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateLabels=!0,(t&&t.sizeFromBar?t.sizeFromBar:0)!==(i&&i.sizeFromBar?i.sizeFromBar:0)&&(this.shouldUpdateMarkerSize=!0),(!(!t||!t.key)&&t.key)!==(!(!i||!i.key)&&i.key)&&(this.shouldUpdateDiffLabelColor=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateBarStyle=!0)}markerWatcher(t,i){(t&&t.visible)!==(i&&i.visible)&&(this.shouldUpdateMarkerOpacity=!0),(!(!t||!t.type)&&t.type)!==(!(!i||!i.type)&&i.type)&&(this.shouldRenderMarkerGroup=!0,this.shouldEnterUpdateExitMarkers=!0),this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateData=!0,this.shouldUpdateLabels=!0,(t&&t.sizeFromBar?t.sizeFromBar:0)!==(i&&i.sizeFromBar?i.sizeFromBar:0)&&(this.shouldUpdateMarkerSize=!0)}barStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateDiffLabelColor=!0,this.shouldDrawInteractionState=!0,(t&&t.width?t.width:0)!==(i&&i.width?i.width:0)&&(this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateSeriesLabels=!0)}dataLabelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0;const s=!(!t||!t.placement)&&t.placement,h=!(!i||!i.placement)&&i.placement,e=!(!t||!t.labelAccessor)&&t.labelAccessor,a=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),s!==h&&(this.shouldValidateDataLabelPlacement=!0),e!==a&&(this.shouldValidateDataLabelAccessor=!0)}seriesLabelWatcher(t,i){this.shouldValidateSeriesLabelPlacement=!0,this.shouldUpdateSeriesLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateTableData=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetSeriesLabelOpacity=!0),(!(!t||!t.placement)&&t.placement)!==(!(!i||!i.placement)&&i.placement)&&(this.shouldUpdateSeriesData=!0,this.shouldSetSeriesSelections=!0)}differenceLabelWatcher(t,i){this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateDiffLabelColor=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateTableData=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetDifferenceLabelOpacity=!0),(!(!t||!t.placement)&&t.placement)!==(!(!i||!i.placement)&&i.placement)&&(this.shouldValidateDiffLabelPlacement=!0)}showTooltipWatcher(t,i){this.shouldDrawInteractionState=!0}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldSetGeometryAriaLabels=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,h=i&&i.includeDataKeyNames;s===h&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==h&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerStyle=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateLegend=!0);const e=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,a=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&e===a||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),e!==a&&(this.shouldSetSelectionClass=!0)}localizationWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.language)&&t.language)!==(!(!i||!i.language)&&i.language)&&(this.shouldSetLocalizationConfig=!0,this.shouldUpdateTableData=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldRedrawWrapper=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.numeralLocale)&&t.numeralLocale)!==(!(!i||!i.numeralLocale)&&i.numeralLocale)&&(this.shouldSetLocalizationConfig=!0,this.shouldUpdateTableData=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldRedrawWrapper=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0)}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldBindLegendInteractivity=!0,this.shouldSetLegendCursor=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldBindLegendInteractivity=!0,this.shouldBindSeriesInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldSetSeriesCursor=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetSubTitle=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}hoverWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0}clickWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0,(!(!t||1!==t.length)&&t[0]===this.seriesAccessor)!=(!(!i||1!==i.length)&&i[0]===this.seriesAccessor)&&(this.shouldBindSeriesInteractivity=!0,this.shouldSetSeriesCursor=!0,this.shouldBindLegendInteractivity=!0,this.shouldSetLegendCursor=!0)}dataKeyNamesWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetGeometryAriaLabels=!0}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){const t=this.uniqueID||"dumbbell-plot-"+f();return this.initialLoadEvent.emit({chartID:t}),new Promise((i=>{this.duration=0,this.chartID=t,this.dumbbellPlotEl.id=this.chartID,this.setLocalizationConfig(),this.setTagLevels(),this.checkIfSafari(),this.validateLayout(),this.validateDataLabelPlacement(),this.validateSeriesLabelPlacement(),this.validateDiffLabelPlacement(),this.validateInteractionKeys(),this.prepareData(),this.prepareMarkerData(),this.prepareSeriesData(),this.prepareLegendData(),this.setLayoutData(),this.prepareScales(),this.validateDataLabelAccessor(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.shouldValidateLocalizationProps(),this.setColors(),i("component will load")}))}componentWillUpdate(){return new Promise((t=>{t("component will update")}))}componentDidLoad(){return new Promise((t=>{this.defaults=!0,this.shouldValidateAccessibilityProps(),this.shouldValidateLocalizationProps(),this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setSubTitleElements(),this.drawXGrid(),this.drawYGrid(),this.renderMarkerGroup(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterMarkerGeometries(),this.updateMarkerGeometries(),this.exitMarkerGeometries(),this.updateMarkerSize(),this.enterDumbbells(),this.updateDumbbells(),this.exitDumbbells(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterDifferenceLabels(),this.updateDifferenceLabels(),this.exitDifferenceLabels(),this.updateMarkerIds(),this.drawDumbbells(),this.updateInteractionState(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.drawDataLabels(),this.drawSeriesLabels(),this.drawDifferenceLabels(),this.addStrokeUnder(),this.drawReferenceLines(),this.setSelectedClass(),this.setLabelOpacity(),this.bindLegendInteractivity(),this.setLegendCursor(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),this.drawBaselineX(),this.drawBaselineY(),this.onChangeHandler(),P(this.root.node(),this.dumbbellG.node()),this.setGroupAccessibilityAttributes(),this.setGroupAccessibilityID(),this.defaults=!1,t("component did load")})).then((()=>this.initialLoadEndEvent.emit({chartID:this.chartID})))}componentDidUpdate(){return new Promise((t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldRenderMarkerGroup&&(this.renderMarkerGroup(),this.shouldRenderMarkerGroup=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetSeriesSelections&&(this.setSeriesSelections(),this.shouldSetSeriesSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldSetSubTitle&&(this.setSubTitleElements(),this.shouldSetSubTitle=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldEnterUpdateExitMarkers&&(this.enterMarkerGeometries(),this.updateMarkerGeometries(),this.exitMarkerGeometries(),this.shouldEnterUpdateExitMarkers=!1,this.shouldUpdateMarkerOpacity=!1),this.shouldUpdateMarkerOpacity&&(this.updateMarkerGeometries(),this.shouldUpdateMarkerOpacity=!1),this.shouldEnterUpdateExit&&(this.enterDumbbells(),this.updateDumbbells(),this.exitDumbbells(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterDifferenceLabels(),this.updateDifferenceLabels(),this.exitDifferenceLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateMarkerIDs&&(this.updateMarkerIds(),this.shouldUpdateMarkerIDs=!1),this.shouldUpdateGeometries&&(this.drawDumbbells(),this.shouldUpdateGeometries=!1),this.shouldUpdateBarStyle&&(this.updateBarStyle(),this.shouldUpdateBarStyle=!1),this.shouldUpdateMarkerStyle&&(this.updateMarkerStyle(),this.shouldUpdateMarkerStyle=!1),this.shouldUpdateMarkerSize&&(this.updateMarkerSize(),this.shouldUpdateMarkerSize=!1),this.shouldDrawMarkerGeometries&&(this.drawMarkerGeometries(),this.shouldDrawMarkerGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateSeriesLabels&&(this.drawSeriesLabels(),this.shouldUpdateSeriesLabels=!1),this.shouldUpdateDifferenceLabels&&(this.drawDifferenceLabels(),this.shouldUpdateDifferenceLabels=!1),this.shouldAddStrokeUnder&&(this.addStrokeUnder(),this.shouldAddStrokeUnder=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSeriesLabelOpacity&&(this.setSeriesLabelOpacity(),this.shouldSetSeriesLabelOpacity=!1),this.shouldSetDifferenceLabelOpacity&&(this.setDifferenceLabelOpacity(),this.shouldSetDifferenceLabelOpacity=!1),this.shouldUpdateDiffLabelColor&&(this.updateDiffLabelColor(),this.shouldUpdateDiffLabelColor=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldBindLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldBindLegendInteractivity=!1),this.shouldBindSeriesInteractivity&&(this.bindSeriesInteractivity(),this.shouldBindSeriesInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldSetSeriesCursor&&(this.setSeriesCursor(),this.shouldSetSeriesCursor=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateBaselineX&&(this.drawBaselineX(),this.shouldUpdateBaseline=!1),this.shouldUpdateBaselineY&&(this.drawBaselineY(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})).then((()=>this.drawEndEvent.emit({chartID:this.chartID})))}shouldValidateLocalizationProps(){const t=A(),i=t.i18Next.getResourceBundle(t.i18Next.language),s=t.numeral.localeData();this.shouldValidateLocalization&&!this.localization.skipValidation&&(this.shouldValidateLocalization=!1,kt(this.chartID,Object.assign(Object.assign({},this.localization),{language:i,numeralLocale:s})))}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,Lt(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickEvent:this.suppressEvents?void 0:this.clickEvent.emit}}))}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor],this.seriesInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.seriesAccessor,this.dumbbellInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.ordinalAccessor}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateLayout(){this.layoutOverride=!this.layout||this.data[0][this.ordinalAccessor]instanceof Date?"vertical":this.layout,this.isVertical="vertical"===this.layoutOverride}validateDataLabelPlacement(){this.placement=this.dataLabel.placement,this.isVertical?"left"!==this.placement&&"right"!==this.placement&&"auto"!==this.placement&&(this.placement="ends"):"top"!==this.placement&&"bottom"!==this.placement&&"auto"!==this.placement&&(this.placement="ends")}validateSeriesLabelPlacement(){this.seriesLabelDetails=Object.assign({},this.seriesLabel),this.seriesLabelDetails.placement||(this.seriesLabelDetails.placement=this.isVertical?"right":"top"),this.isVertical&&"right"!==this.seriesLabelDetails.placement&&"left"!==this.seriesLabelDetails.placement&&"auto"!==this.seriesLabelDetails.placement?this.seriesLabelDetails.placement="right":this.isVertical||"top"===this.seriesLabelDetails.placement||"bottom"===this.seriesLabelDetails.placement||"auto"===this.seriesLabelDetails.placement||(this.seriesLabelDetails.placement="top"),this.seriesLabelDetails.label&&this.seriesLabelDetails.label.length||(this.seriesLabelDetails.label="")}validateDiffLabelPlacement(){this.diffLabelDetails=Object.assign({},this.differenceLabel),this.diffLabelDetails.placement||(this.diffLabelDetails.placement=this.isVertical?"left":"top"),this.isVertical&&"right"!==this.diffLabelDetails.placement&&"left"!==this.diffLabelDetails.placement&&"auto"!==this.diffLabelDetails.placement?this.diffLabelDetails.placement="left":this.isVertical||"top"===this.diffLabelDetails.placement||"bottom"===this.diffLabelDetails.placement||"auto"===this.diffLabelDetails.placement||(this.diffLabelDetails.placement="top")}checkIfSafari(){this.url=C()}setSubTitleElements(){Dt({root:this.subTitleG,subTitle:this.subTitle})}setColors(){if(this.colors=this.colors?lt(this.colors):"",this.rawColors=this.colors||ut(this.colorPalette,3),this.colorArr=this.rawColors,this.textColors={},this.strokes={},this.rawColors.forEach((t=>{if(!this.accessibility.hideStrokes){const i=D(t),s=2===i.length?i[1]:i[0];this.strokes[t.toLowerCase()]=s}this.textColors[t.toLowerCase()]=T(t,"#ffffff",4.5)})),this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){const t=D(this.hoverStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.hoverStyle.color.toLowerCase()]=i}this.textColors[this.hoverStyle.color.toLowerCase()]=T(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){const t=D(this.clickStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.clickStyle.color.toLowerCase()]=i}this.textColors[this.clickStyle.color.toLowerCase()]=T(this.clickStyle.color,"#ffffff",4.5)}}getLanguageString(){return S(this.localization)}setLocalizationConfig(){W(this.localization)}setLayoutData(){this.padding="string"==typeof this.padding?pt(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}setTableData(){const t=vt(this,st,"dumbbell-plot");this.tableData=mt(this.data,t),this.tableColumns=Object.keys(t)}prepareData(){const t=r().key((t=>t[this.ordinalAccessor])).entries(this.data);t.forEach((t=>{t.focusMarker=!1,t.greaterIndex=1;let i="marker",s="marker";t.values[0][this.seriesAccessor]===this.focusMarker.key?(t.focusMarker=0,i="focusMarker"):t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1,s="focusMarker");const h=et(t.values[0],this.clickHighlight,this.innerInteractionKeys)?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:at(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width,e=et(t.values[1],this.clickHighlight,this.innerInteractionKeys)?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:at(t.values[1],this.hoverHighlight,this.innerInteractionKeys)&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width;t.values[0].offset=0===t.focusMarker||this.marker.visible?"dot"===this.marker.type?this[i].sizeFromBar*(h+1)/2:"stroke"===this.marker.type||t.focusMarker?this[i].sizeFromBar*(h+1)/5:this[i].sizeFromBar*(h+1)/2:1,t.values[1].offset=1===t.focusMarker||this.marker.visible?"dot"===this.marker.type?-this[s].sizeFromBar*(e+1)/2:"stroke"===this.marker.type?-this[s].sizeFromBar*(e+1)/5:t.focusMarker?-this[s].sizeFromBar*(e+1)/2:-this[s].sizeFromBar*(e+1)/5:-1,t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]&&(t.greaterIndex=0,t.values[0].offset=-t.values[0].offset,t.values[1].offset=-t.values[1].offset)}));const i=t=>{const i={absoluteDiff:"Absolute Difference ",difference:"Difference "},s=this.differenceLabel&&this.differenceLabel.calculation&&i[this.differenceLabel.calculation]?this.differenceLabel.calculation:"difference";return i[s]+dt(t,s,this.differenceLabel&&this.differenceLabel.format&&this.differenceLabel.visible?this.differenceLabel.format:this.differenceLabel&&this.dataLabel.format&&this.dataLabel.visible?this.dataLabel.format:"0[.][0][0]a")};this.nest=t.sort(((t,s)=>{t.difference=t.values[0][this.valueAccessor]-t.values[1][this.valueAccessor],s.difference=s.values[0][this.valueAccessor]-s.values[1][this.valueAccessor],t.absoluteDiff=Math.abs(t.difference),s.absoluteDiff=Math.abs(s.difference),t.middle=(t.values[0][this.valueAccessor]+t.values[1][this.valueAccessor])/2,s.middle=(s.values[0][this.valueAccessor]+s.values[1][this.valueAccessor])/2,t.message=i(t),s.message=i(s);const h=!1!==t.focusMarker?t.focusMarker:0;return t.values[0][this.ordinalAccessor]instanceof Date?0:"asc"===this.sortOrder||"diffAsc"===this.sortOrder?t.difference-s.difference:"desc"===this.sortOrder||"diffDesc"===this.sortOrder?s.difference-t.difference:"focusAsc"===this.sortOrder?t.values[h][this.valueAccessor]-s.values[h][this.valueAccessor]:"focusDesc"===this.sortOrder?s.values[h][this.valueAccessor]-t.values[h][this.valueAccessor]:"absoluteDiffAsc"===this.sortOrder?t.absoluteDiff-s.absoluteDiff:"absoluteDiffDesc"===this.sortOrder?s.absoluteDiff-t.absoluteDiff:0}))}prepareMarkerData(){this.markerData=[];const t={focus:!1,label:this.nest[0].values[0][this.seriesAccessor]},i={focus:!1,label:this.nest[0].values[1][this.seriesAccessor]};this.nest[0].focusMarker?i.focus=!0:0===this.nest[0].focusMarker&&(t.focus=!0);const s=Object.assign(Object.assign({},t),{limitOpacity:!0}),h=Object.assign(Object.assign({},i),{limitOpacity:!0}),e=Object.assign({},t),a=Object.assign({},i);this.markerData.push(t),this.markerData.push(i),this.markerData.push(s),this.markerData.push(h),this.markerData.push(e),this.markerData.push(a);let l=0;this.markerData.forEach((t=>{t.index=l,t.referenceIndex=l<2?l:l<4?l-2:l-4,l++}))}prepareSeriesData(){const t=!("auto"!==this.seriesLabelDetails.placement)||this.seriesLabelDetails.placement.includes(this.isVertical?"right":"top");this.seriesData=[{label:this.nest[0].values[0][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[0][this.seriesAccessor],value:t?this.nest[this.nest.length-1].values[0][this.valueAccessor]:this.nest[0].values[0][this.valueAccessor]},{label:this.nest[0].values[1][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[1][this.seriesAccessor],value:t?this.nest[this.nest.length-1].values[1][this.valueAccessor]:this.nest[0].values[1][this.valueAccessor]}]}prepareLegendData(){this.legendData=[{label:this.nest[0].values[0][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[0][this.seriesAccessor]},{label:this.nest[0].values[1][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[1][this.seriesAccessor]}],this.ordinalLabel=this.legendData.map((t=>t.label))}prepareScales(){const t=a(this.data,(t=>parseFloat(t[this.valueAccessor]))),i=e(this.data,(t=>parseFloat(t[this.valueAccessor])));if(this.isVertical)if(this.xAccessor=this.ordinalAccessor,this.yAccessor=this.valueAccessor,this.y=o().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t-.15*(i-t),this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i+.15*(i-t)]).range([this.innerPaddedHeight,0]),this.data[0][this.ordinalAccessor]instanceof Date){const t=e(this.data,(t=>t[this.ordinalAccessor])),i=a(this.data,(t=>t[this.ordinalAccessor]));if(this.x=u().domain([i,t]).range([0,this.innerPaddedWidth]),this.xAxis.unit){const s=this.time["time"+this.xAxis.unit];this.x.domain([s.offset(i,-1),s.offset(t,1)])}}else this.x=l().domain(this.nest.map((t=>t.key))).padding(.5).range([0,this.innerPaddedWidth]);else this.isVertical||(this.xAccessor=this.valueAccessor,this.yAccessor=this.ordinalAccessor,this.x=o().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t-.15*(i-t),this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i+.15*(i-t)]).range([0,this.innerPaddedWidth]),this.y=l().domain(this.nest.map((t=>t.key))).padding(.5).range([this.innerPaddedHeight,0]))}addStrokeUnder(){const t=O({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.seriesLabelWrapper.selectAll("text").attr("filter",this.accessibility.hideStrokes?null:t),this.diffLabelWrapper.attr("filter",this.accessibility.hideStrokes?null:t),this.labels.attr("filter",this.accessibility.hideStrokes?null:t),this.labels.attr("filter",this.accessibility.hideStrokes?null:t),this.dumbbellG.attr("filter",this.accessibility.hideStrokes?null:t)}renderRootElements(){this.svg=p(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.defs=this.rootG.append("defs"),this.baselineG=this.rootG.append("g").attr("class","baseline-group"),this.gridG=this.rootG.append("g").attr("class","gridline-group"),this.dumbbellG=this.rootG.append("g").attr("class","dumbbell-group"),this.seriesLabelWrapper=this.rootG.select(".dumbbell-series-wrapper"),this.seriesLabelWrapper=this.rootG.append("g").attr("class","dumbbell-series-wrapper"),this.diffLabelWrapper=this.rootG.select(".dumbbell-diff-label-wrapper"),this.diffLabelWrapper=this.rootG.append("g").attr("class","dumbbell-diff-label-wrapper"),this.legendG=p(this.dumbbellPlotEl).select(".dumbbell-legend").append("svg"),this.subTitleG=p(this.dumbbellPlotEl).select(".dumbbell-sub-title"),this.tooltipG=p(this.dumbbellPlotEl).select(".dumbbell-tooltip"),this.labels=this.rootG.append("g").attr("class","dumbbell-dataLabel-group"),this.referencesG=this.rootG.append("g").attr("class","dumbbell-reference-line-group")}renderMarkerGroup(){this.markerG=this.defs.select("."+this.marker.type+"markers"),this.markerG.node()||(this.defs.selectAll("g").remove(),this.markerG=this.defs.append("g").attr("class",this.marker.type+"markers"))}setSeriesSelections(){const t=this.seriesLabelWrapper.selectAll(".dumbbell-series-label").data(this.seriesData,(t=>t.label));this.enterSeriesLabel=t.enter().append("text"),this.exitSeriesLabel=t.exit(),this.updateSeriesLabel=t.merge(this.enterSeriesLabel)}setGlobalSelections(){const t=this.dumbbellG.selectAll(".dumbbell-plot").data(this.nest,(t=>t.key));this.enter=t.enter().append("path"),this.exit=t.exit(),this.update=t.merge(this.enter),this.exitSize=this.exit.size(),this.enterSize=this.enter.size();const i=this.markerG.selectAll("marker").data(this.markerData,((t,i)=>t.label+i));this.enterMarkers=i.enter().append("marker"),this.exitMarkers=i.exit(),this.updateMarkers=i.merge(this.enterMarkers),this.setSeriesSelections();const s=this.diffLabelWrapper.selectAll(".dumbbell-diff-label").data(this.nest,(t=>t.key));this.enterDiffLabel=s.enter().append("text"),this.exitDiffLabel=s.exit(),this.updateDiffLabel=s.merge(this.enterDiffLabel);const h=this.labels.selectAll("g").data(this.nest,(t=>t.key));this.enterLabels=h.enter().append("g"),this.exitLabels=h.exit(),this.updateLabels=h.merge(this.enterLabels);const e=this.updateLabels.selectAll(".dumbbell-dataLabel").data((t=>[t.values[0],t.values[1]]),(t=>t[this.seriesAccessor]));this.enterLabelChildren=e.enter().append("text"),this.exitLabelChildren=e.exit(),this.updateLabelChildren=e.merge(this.enterLabelChildren)}setTestingAttributes(){this.unitTest?(p(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid","chart-container"),p(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid","main-title"),p(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.dumbbellG.attr("data-testid","dumbbell-group"),this.baselineG.attr("data-testid","baseline-group"),this.referencesG.attr("data-testid","reference-line-group"),this.updateLabels.attr("data-testid","dataLabel-wrapper"),this.updateLabelChildren.attr("data-testid","dataLabel").attr("data-id",(t=>`label-${t[this.ordinalAccessor]}-${t[this.seriesAccessor]}`)),this.updateDiffLabel.attr("data-testid","difference-label").attr("data-id",(t=>`difference-label-${t.key}`)),this.updateSeriesLabel.attr("data-testid","series-label"),this.updateMarkers.attr("data-testid","marker"),this.update.attr("data-testid","line").attr("data-id",(t=>`line-${t.key}`))):(p(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid",null),p(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid",null),p(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.dumbbellG.attr("data-testid",null),this.baselineG.attr("data-testid",null),this.referencesG.attr("data-testid",null),this.updateLabels.attr("data-testid",null),this.updateLabelChildren.attr("data-testid",null).attr("data-id",null),this.updateDiffLabel.attr("data-testid",null).attr("data-id",null),this.updateSeriesLabel.attr("data-testid",null),this.updateMarkers.attr("data-testid",null),this.update.attr("data-testid",null).attr("data-id",null))}reSetRoot(){wt({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:k}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),wt({selection:this.root,duration:this.duration,namespace:"root_reset",easing:k}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),wt({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:k}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),Z(this.chartID,this.width)}drawXAxis(){rt({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel?this.innerPaddedWidth/this.nest.length*.7:"",dateFormat:this.xAxis.format,format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label||""===this.xAxis.label?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.xAccessor]?this.dataKeyNames[this.xAccessor]:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration})}drawYAxis(){rt({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,wrapLabel:this.wrapLabel?100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label&&""!==this.yAxis.label?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.yAccessor]?this.dataKeyNames[this.yAccessor]:this.yAxis.label,padding:this.padding,hide:!this.yAxis.visible,duration:this.duration})}setXAxisAccessibility(){B({rootEle:this.dumbbellPlotEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:!!this.x&&this.x,xAxisLabel:(this.xAxis.label||""===this.xAxis.label?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.xAccessor]?this.dataKeyNames[this.xAccessor]:this.xAxis.label)||""})}setYAxisAccessibility(){q({rootEle:this.dumbbellPlotEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:!!this.y&&this.y,yAxisLabel:(this.yAxis.label&&""!==this.yAxis.label?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.yAccessor]?this.dataKeyNames[this.yAccessor]:this.yAxis.label)||""})}drawBaselineX(){rt({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,padding:this.padding,markOffset:this.x(0),hide:!!this.isVertical||!this.showBaselineY,duration:this.duration})}drawBaselineY(){rt({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0),hide:!this.isVertical||!this.showBaselineX,duration:this.duration})}drawXGrid(){ot(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!this.xAxis.gridVisible,this.xAxis.tickInterval,this.duration)}drawYGrid(){ot(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)}enterMarkerGeometries(){this.enterMarkers.attr("orient","auto").attr("markerUnits","userSpaceOnUse").attr("id",(t=>this.generateId(t,t.index))).attr("class","marker-"+this.marker.type).attr("stroke",this.handleMarkerColors),"dot"===this.marker.type?this.enterMarkers.append("circle").attr("r",5):("stroke"===this.marker.type||"arrow"===this.marker.type)&&this.enterMarkers.append("path"),this.updateMarkerSize(this.enterMarkers)}updateMarkerGeometries(){this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",(t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1))}updateMarkerStyle(){this.updateMarkers.attr("stroke",this.handleMarkerColors)}exitMarkerGeometries(){this.exitMarkers.transition("exit").duration(this.duration).ease(k).remove()}enterDumbbells(){this.enter.interrupt(),this.enter.attr("class","dumbbell-plot").attr("d",(t=>{const i=this.x(t.values[0][this.xAccessor]),s=this.y(t.values[0][this.yAccessor]),h=this.x(t.values[1][this.xAccessor]),e=this.y(t.values[1][this.yAccessor]),a=this.isVertical?s>e?.001:-.001:0,l=this.isVertical?0:i>h?.001:-.001;return`M ${i+l} ${s+a} L ${i} ${s} L ${i} ${s} L ${h} ${e} L ${h} ${e} L ${h} ${e} L ${i} ${s} L ${i} ${s} L ${i} ${s} L ${h} ${e} L ${h} ${e} L ${h-l} ${e-a}`})).attr("cursor",this.suppressEvents?null:this.cursor).attr("opacity",0).each(((t,i,s)=>{I(s[i])})).on("click",this.suppressEvents?null:(t,i,s)=>{if(t.values){const h=this.findMarkerIndex(t,s[i],m);this.onClickHandler(t.values[h],s[i])}}).on("mouseover",this.suppressEvents?null:(t,i,s)=>{let h=t;if(t.values){const e=this.findMarkerIndex(t,s[i],m);yt(this.chartID,!0),h=t.values[e],this.hoverEvent.emit({data:h,target:s[i]})}this.showTooltip&&this.eventsTooltip({data:this.tooltipLabel.labelAccessor&&this.tooltipLabel.labelAccessor.length?h:t,evt:m,isToShow:!0})}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity),this.update.order()}updateBarStyle(){this.update.attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity)}updateMarkerSize(t){(t||this.updateMarkers).each(((t,i,s)=>{const h=p(s[i]),e=i<2&&this.clickHighlight.length?parseFloat(this.clickStyle.strokeWidth+""):i<4?this.barStyle.width:parseFloat(this.hoverStyle.strokeWidth+""),a=(t.focus?this.focusMarker.sizeFromBar:this.marker.sizeFromBar)*("dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2)*(e+1),l=a?10/a:0;h.attr("viewBox",`0 0 ${10+l} ${10+l}`).attr("refX",5+l/2).attr("refY",5+l/2).attr("stroke-width",l).attr("markerWidth",a).attr("markerHeight",a),"dot"===this.marker.type?h.select("circle").attr("cx",5+l/2).attr("cy",5+l/2):"stroke"===this.marker.type?h.select("path").attr("d",`M 4.5 ${0+l/2} L 4.5 ${10+l/2} L 6 ${10+l/2} L 6 ${0+l/2} z`):"arrow"===this.marker.type&&h.select("path").attr("transform",t.focus&&this.focusMarker.key&&1===t.referenceIndex?`rotate(180,${5+l/2},${5+l/2})`:null).attr("d",t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?`M ${0+l/2} ${5+l/4} L ${10+l/2} ${0+l/2} L ${10+l/2} ${10+l/2} z`:`M 4.5 ${0+l/2} L 4.5 ${10+l/2} L 6 ${10+l/2} L 6 ${0+l/2} z`)}))}drawMarkerGeometries(){this.updateMarkers.selectAll(".marker-"+this.marker.type).data((t=>[t])),"arrow"===this.marker.type&&this.updateMarkers.selectAll("path").attr("d",((t,i,s)=>{const h=i<2&&this.clickHighlight.length?parseFloat(this.clickStyle.strokeWidth+""):i<4?this.barStyle.width:parseFloat(this.hoverStyle.strokeWidth+""),e=(t.focus?this.focusMarker.sizeFromBar:this.marker.sizeFromBar)*("dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2)*(h+1),a=e?10/e:0;return p(s[i]).attr("transform",t.focus&&this.focusMarker.key&&1===t.referenceIndex?`rotate(180,${5+a/2},${5+a/2})`:null),t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?`M ${0+a/2} ${5+a/4} L ${10+a/2} ${0+a/2} L ${10+a/2} ${10+a/2} z`:`M 4.5 ${0+a/2} L 4.5 ${10+a/2} L 6 ${10+a/2} L 6 ${0+a/2} z`}))}updateDumbbells(){this.update.interrupt(),this.enter.transition("opacity").duration(this.duration).ease(k).attr("opacity",1)}exitDumbbells(){this.exit.interrupt(),this.exit.transition("exit").ease(k).duration(this.duration/2).attr("opacity",0).attr("d",((t,i,s)=>{const h=p(s[i]),e=+h.attr("data-centerX1"),a=+h.attr("data-centerY1"),l=+h.attr("data-centerX2"),r=+h.attr("data-centerY2"),o=this.isVertical?a>r?.001:-.001:0,n=this.isVertical?0:e>l?.001:-.001;return`M ${e+n} ${a+o} L ${e} ${a} L ${e} ${a} L ${l} ${r} L ${l} ${r} L ${l} ${r} L ${e} ${a} L ${e} ${a} L ${e} ${a} L ${l} ${r} L ${l} ${r} L ${l-n} ${r-o}`})),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(k).call(xt,(()=>{const t=J(this.rootG.node());this.exit.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),U({parentGNode:this.rootG.node(),focusDidExist:t})}))}drawDumbbells(){this.update.classed("moving",((t,i,s)=>{const h=p(s[i]),e=et(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&et(t.values[1],this.clickHighlight,this.innerInteractionKeys),a=at(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&at(t.values[1],this.hoverHighlight,this.innerInteractionKeys),l=this.dumbbellInteraction?e?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:a&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width,r=this.x(t.values[0][this.xAccessor]),o=this.y(t.values[0][this.yAccessor]),n=this.x(t.values[1][this.xAccessor]),c=this.y(t.values[1][this.yAccessor]),d=+h.attr("data-barSize"),u=+h.attr("data-centerX1"),b=+h.attr("data-centerY1"),m=+h.attr("data-centerX2"),f=+h.attr("data-centerY2");return l!==d||r!==u||o!==b||n!==m||c!==f})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-d",this.setBarSize).transition("update").ease(k).duration(this.duration).attr("d",this.setBarSize).call(xt,(()=>{this.update.classed("moving",!1),U({parentGNode:this.rootG.node()}),this.transitionEndEvent.emit({chartID:this.chartID})}))}updateMarkerIds(){this.updateMarkers.attr("id",(t=>this.generateId(t,t.index))),this.update.attr("marker-start",(t=>{const i=ht(t.values[0],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),s=at(t.values[0],this.hoverHighlight,this.innerInteractionKeys),h=et(t.values[0],this.clickHighlight,this.innerInteractionKeys);return this.url+(s&&!h?this.updateMarkers._groups[0][4].id:h||i?this.updateMarkers._groups[0][0].id:this.updateMarkers._groups[0][2].id)+")"})).attr("marker-end",(t=>{const i=ht(t.values[1],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),s=at(t.values[1],this.hoverHighlight,this.innerInteractionKeys),h=et(t.values[1],this.clickHighlight,this.innerInteractionKeys);return this.url+(s&&!h?this.updateMarkers._groups[0][5].id:h||i?this.updateMarkers._groups[0][1].id:this.updateMarkers._groups[0][3].id)+")"}))}updateInteractionState(){this.update.interrupt("opacity"),this.updateLabelChildren.interrupt("opacity"),this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",(t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1)),this.update.attr("opacity",1).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity).each(((t,i,s)=>{const h=p(s[i]);h.classed("moving")||h.attr("d",this.setBarSize)})),this.drawDataLabels(!0),this.seriesLabelDetails.visible&&("auto"===this.seriesLabelDetails.placement||this.seriesLabelDetails.collisionHideOnly)&&this.drawSeriesLabels(!0),this.diffLabelDetails.visible&&("auto"===this.diffLabelDetails.placement||this.diffLabelDetails.collisionHideOnly)&&this.drawDifferenceLabels(!0),U({parentGNode:this.rootG.node()}),ct({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}enterSeriesLabels(){this.enterSeriesLabel.interrupt();const t=!("auto"!==this.seriesLabelDetails.placement)||this.seriesLabelDetails.placement.includes(this.isVertical?"right":"top");this.enterSeriesLabel.attr("opacity",(t=>{const i=this.seriesLabelDetails.visible?1:0;return this.seriesInteraction?ht(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON:i})).attr("class","dumbbell-series-label").attr("fill",this.handleSeriesLabelColors).attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>this.onClickHandler(t,s[i]):null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>this.onHoverHandler(t,s[i],!1):null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null).attr("text-anchor",this.isVertical&&t?"start":this.isVertical?"end":"middle").attr("x",(i=>this.isVertical&&t?this.innerPaddedWidth:this.isVertical?0:this.x(i.value))).attr("y",(i=>this.isVertical?this.y(i.value):this.isVertical||t?0:this.innerPaddedHeight)).attr("dx",this.isVertical&&t?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}updateSeriesLabels(){this.updateSeriesLabel.interrupt(),this.updateSeriesLabel.transition("opacity_series_labels").ease(k).duration(this.duration).attr("opacity",(t=>{const i=this.seriesLabelDetails.visible?1:0;return this.seriesInteraction?ht(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i}))}exitSeriesLabels(){this.exitSeriesLabel.transition("exit_series_labels").ease(k).duration(this.duration).attr("opacity",0).remove()}drawSeriesLabels(t){const i="auto"===this.seriesLabelDetails.placement,s=!!i||this.seriesLabelDetails.placement.includes(this.isVertical?"right":"top"),h=!i&&this.seriesLabelDetails.collisionHideOnly,e=this.updateSeriesLabel.text(((t,i)=>this.seriesLabelDetails.label?this.seriesLabelDetails.label[i]:t.label)).style("visibility",((t,s,h)=>i||this.seriesLabelDetails.collisionHideOnly?p(h[s]).style("visibility"):null)).attr("fill",this.handleSeriesLabelColors).attr("data-x",(t=>this.isVertical&&s?this.innerPaddedWidth:this.isVertical?0:this.x(t.value))).attr("data-y",((t,i,h)=>{const e=getComputedStyle(h[i]),a=parseFloat(e.fontSize),l=Math.max(a-1,1);return this.isVertical?this.y(t.value)+.3*l:this.isVertical||s?0:this.innerPaddedHeight})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",h).attr("data-use-dy",h).attr("data-text-anchor",this.isVertical&&s?"start":this.isVertical?"end":"middle").attr("dx",this.isVertical&&s?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em").transition("update_series_labels").ease(k).duration((()=>t?0:this.duration));this.seriesLabelDetails.visible&&("auto"===this.seriesLabelDetails.placement||this.seriesLabelDetails.collisionHideOnly)?(this.bitmaps=St({bitmaps:this.bitmaps,labelSelection:e,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:[this.seriesAccessor],size:[At(this.width,0),At(this.height,0)],hideOnly:this.seriesLabelDetails.visible&&this.seriesLabelDetails.collisionHideOnly&&"auto"!==this.seriesLabelDetails.placement}),h&&e.attr("text-anchor",this.isVertical&&s?"start":this.isVertical?"end":"middle").attr("x",(t=>this.isVertical&&s?this.innerPaddedWidth:this.isVertical?0:this.x(t.value))).attr("y",(t=>this.isVertical?this.y(t.value):this.isVertical||s?0:this.innerPaddedHeight)).attr("dx",this.isVertical&&s?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")):e.attr("text-anchor",this.isVertical&&s?"start":this.isVertical?"end":"middle").attr("x",(t=>this.isVertical&&s?this.innerPaddedWidth:this.isVertical?0:this.x(t.value))).attr("y",(t=>this.isVertical?this.y(t.value):this.isVertical||s?0:this.innerPaddedHeight)).attr("dx",this.isVertical&&s?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}setSeriesLabelOpacity(){this.updateSeriesLabel.interrupt("opacity_series_labels"),this.updateSeriesLabel.attr("opacity",(t=>{const i=this.seriesLabelDetails.visible?1:0;return this.seriesInteraction?ht(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i}))}enterDifferenceLabels(){this.enterDiffLabel.interrupt();const t=this.diffLabelDetails.placement.includes(this.isVertical?"left":"top");this.enterDiffLabel.attr("class","dumbbell-diff-label").attr("opacity",(t=>{const i=this.differenceLabel.visible?1:0;return this.dumbbellInteraction?ht(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON:i})).attr("fill",this.setDiffLabelColor).attr("cursor",!this.suppressEvents&&this.dumbbellInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?(t,i,s)=>this.onClickHandler(t,s[i]):null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?(t,i,s)=>this.onHoverHandler(t,s[i],!0):null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?()=>this.onMouseOutHandler():null).attr("x",(t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle))).attr("y",(i=>!this.isVertical&&t?this.y(i.key)-this.barStyle.width/2-4:this.isVertical?this.y(i.middle):this.y(i.key)+this.barStyle.width/2+4)).attr("dx",this.isVertical&&t?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&t?"0":this.isVertical?"0.3em":"0.6em")}updateDifferenceLabels(){this.updateDiffLabel.interrupt(),this.updateDiffLabel.transition("opacity_diff_labels").ease(k).duration(this.duration).attr("opacity",(t=>{const i=this.differenceLabel.visible?1:0;return this.dumbbellInteraction?ht(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i}))}exitDifferenceLabels(){this.exitDiffLabel.transition("exit_diff_label").ease(k).duration(this.duration).attr("opacity",0).remove()}drawDifferenceLabels(t){const i="auto"===this.diffLabelDetails.placement,s=!!i||this.diffLabelDetails.placement.includes(this.isVertical?"left":"top"),h=!i&&this.differenceLabel.collisionHideOnly,e=this.updateDiffLabel.text((t=>dt(t,this.differenceLabel.calculation,this.differenceLabel.format))).style("visibility",((t,s,h)=>i||this.differenceLabel.collisionHideOnly?p(h[s]).style("visibility"):null)).attr("data-x",(t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle))).attr("data-y",(t=>!this.isVertical&&s?this.y(t.key)-this.barStyle.width/2-4:this.isVertical?this.y(t.middle):this.y(t.key)+this.barStyle.width/2+4)).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",h).attr("data-use-dy",h).attr("dx",this.isVertical&&s?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&s?"0":this.isVertical?"0.3em":"0.6em").attr("text-anchor",((t,h,e)=>i&&p(e[h]).attr("text-anchor")?p(e[h]).attr("text-anchor"):this.isVertical&&s?"end":this.isVertical?"start":"middle")).transition("update_diff_label").ease(k).duration((()=>t?0:this.duration));this.differenceLabel.visible&&("auto"===this.diffLabelDetails.placement||this.differenceLabel.collisionHideOnly)?(this.bitmaps=St({bitmaps:this.bitmaps,labelSelection:e,avoidMarks:[this.update],validPositions:h?["middle"]:this.isVertical?["left","right"]:["top","bottom"],offsets:h?[this.barStyle.width/2+4]:[this.barStyle.width/2+4,this.barStyle.width/2+4],accessors:["key"],size:[At(this.width,0),At(this.height,0)],hideOnly:this.differenceLabel.visible&&this.differenceLabel.collisionHideOnly&&"auto"!==this.diffLabelDetails.placement}),h&&e.attr("x",(t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle))).attr("y",(t=>!this.isVertical&&s?this.y(t.key)-this.barStyle.width/2-4:this.isVertical?this.y(t.middle):this.y(t.key)+this.barStyle.width/2+4)).attr("dx",this.isVertical&&s?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&s?"0":this.isVertical?"0.3em":"0.6em").attr("text-anchor",this.isVertical&&s?"end":this.isVertical?"start":"middle")):e.attr("x",(t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle))).attr("y",(t=>!this.isVertical&&s?this.y(t.key)-this.barStyle.width/2-4:this.isVertical?this.y(t.middle):this.y(t.key)+this.barStyle.width/2+4)).attr("dx",this.isVertical&&s?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&s?"0":this.isVertical?"0.3em":"0.6em").attr("text-anchor",this.isVertical&&s?"end":this.isVertical?"start":"middle")}enterDataLabels(){this.enterLabels.interrupt(),this.enterLabels.attr("class","dumbbell-label-wrapper").attr("opacity",0).attr("fill",this.handleLabelColors),this.enterLabelChildren.attr("class","dumbbell-dataLabel").attr("opacity",(t=>ht(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON)).attr("fill",this.handleLabelColors).attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null).on("click",!this.suppressEvents&&this.dataLabel.visible?(t,i,s)=>this.onClickHandler(t,s[i]):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?(t,i,s)=>this.onHoverHandler(t,s[i],!0):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null),gt({root:this.enterLabelChildren,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData})}setDifferenceLabelOpacity(){this.updateDiffLabel.interrupt("opacity_diff_labels"),this.updateDiffLabel.attr("opacity",(t=>{const i=this.differenceLabel.visible?1:0;return this.dumbbellInteraction?ht(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i}))}updateDataLabels(){this.updateLabelChildren.classed("transitioning",!0),this.updateLabels.transition("opacity").ease(k).duration(this.duration).attr("opacity",(()=>this.dataLabel.visible?1:0)).call(xt,(()=>{this.updateLabelChildren.classed("transitioning",!1)}))}exitDataLabels(){this.exitLabels.interrupt(),this.exitLabels.selectAll(".dumbbell-dataLabel").transition("exit").ease(k).duration(this.duration/2).attr("opacity",0).call(xt,(()=>{this.exitLabels.remove()})),this.exitLabelChildren.transition("exit_dataLabel").ease(k).duration(this.duration).attr("opacity",0).remove()}drawDataLabels(t){const i="auto"===this.placement,s="auto"!==this.placement&&this.dataLabel.collisionHideOnly;this.updateLabelChildren.text((t=>dt(t,this.innerLabelAccessor,this.dataLabel.format)));const h=this.updateLabelChildren.attr("fill",this.handleLabelColors).style("visibility",((t,s,h)=>i||this.dataLabel.collisionHideOnly?p(h[s]).style("visibility"):null)).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",s).attr("data-use-dy",s).attr("dx",(t=>this.isVertical?"0.0em":t.offset>=0?"-0.1em":"0.1em")).attr("dy",(t=>this.isVertical&&t.offset>=0?"0.9em":this.isVertical?"-0.3em":"0.0em")).attr("data-y",((t,i,s)=>{const h=s[i],e=getComputedStyle(h),a=parseFloat(e.fontSize),l=Math.max(a-1,1),r=Wt(h.textContent,a,!0,e.fontFamily),o="horizontal"!==this.layoutOverride?0:t.offset>=0?-r/2:r/2,n="vertical"!==this.layoutOverride?-l/2:t.offset>=0?l/2:-l/2-l;return p(h).attr("data-x",(t=>(this.isVertical?this.x(t[this.ordinalAccessor]):this.x(t[this.valueAccessor])-t.offset)+o)),this.isVertical?this.y(t[this.valueAccessor])+t.offset+n:this.y(t[this.ordinalAccessor])+n})).attr("data-offset",(t=>t.offset)).transition("update_dataLabel").ease(k).duration((()=>t?0:this.duration));this.bitmaps=gt({root:h,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.placement,labelSelection:h,avoidMarks:[this.update],validPositions:["middle"],offsets:[1],accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[At(this.width,0),At(this.height,0)],boundsScope:"centroid",hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})}updateDiffLabelColor(){this.updateDiffLabel.attr("fill",this.setDiffLabelColor)}setLabelOpacity(){this.updateLabels.attr("opacity",this.dataLabel.visible?1:0),this.updateLabelChildren.attr("opacity",(t=>ht(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1))}updateMarkerOpacity(){this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",(t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1))}drawReferenceLines(){Tt({groupName:"dumbbell",root:this.referencesG,referenceLines:this.referenceLines,referenceStyle:this.referenceStyle,innerPaddedWidth:this.innerPaddedWidth,innerPaddedHeight:this.innerPaddedHeight,duration:this.duration,layout:this.layout,x:this.x,y:this.y,unitTest:this.unitTest})}setSelectedClass(){this.update.classed("highlight",((t,i,s)=>{const h=ht(t.values[0],1,0,{},this.clickHighlight,this.innerInteractionKeys),e=ht(t.values[1],1,0,{},this.clickHighlight,this.innerInteractionKeys);let a=h||e;return a=!(!this.clickHighlight||!this.clickHighlight.length)&&a,Q(s[i],a,this.accessibility.elementsAreInterface),a}))}drawAnnotations(){it({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:"horizontal"!==this.layoutOverride?this.ordinalAccessor:this.valueAccessor,yScale:this.y,yAccessor:"horizontal"!==this.layoutOverride?this.valueAccessor:this.ordinalAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){R(this.getLanguageString(),this.dumbbellPlotEl,this.annotations,this.referenceLines)}setTagLevels(){this.topLevel=$t(this.highestHeadingLevel),this.bottomLevel=$t(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){z({language:this.getLanguageString(),rootEle:this.dumbbellPlotEl,title:this.accessibility.title||this.mainTitle,chartTag:"dumbbell-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled,hideDataTable:this.accessibility.hideDataTableButton}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){const t=vt(this,st,"dumbbell-plot");delete t[this.ordinalAccessor],j({chartTag:"dumbbell-plot",language:this.getLanguageString(),node:this.svg.node(),title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,dataKeyNames:this.dataKeyNames,groupKeys:["message"],nested:"values",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each(((t,i,s)=>{I(s[i])}))}setGeometryAriaLabels(){const t=vt(this,st,"dumbbell-plot");delete t[this.ordinalAccessor],this.update.each(((i,s,h)=>{M({chartTag:"dumbbell-plot",language:this.getLanguageString(),node:h[s],geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,dataKeyNames:this.dataKeyNames,groupKeys:["message"],nested:["values"],uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),E({node:h[s],uniqueID:this.chartID})}))}setGroupAccessibilityAttributes(){I(this.dumbbellG.node())}setGroupAccessibilityID(){this.dumbbellG.each(((t,i,s)=>{E({node:s[i],uniqueID:this.chartID})}))}setChartAccessibilityTitle(){_(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){F(this.getLanguageString(),this.dumbbellPlotEl,this.subTitle)}setChartAccessibilityLongDescription(){N(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){K(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){G(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.purpose)}setChartAccessibilityContext(){H(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){X(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){Y({rootEle:this.dumbbellPlotEl,parentGNode:this.dumbbellG.node(),chartTag:"dumbbell-plot",geomType:"dumbbell"})}setChartAccessibilityStructureNotes(){V(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t,i){this.clickEvent.emit({data:t,target:i})}onHoverHandler(t,i,s){yt(this.chartID,!0),this.hoverEvent.emit({data:t,target:i}),this.showTooltip&&s&&this.eventsTooltip({data:t,evt:m,isToShow:!0})}onMouseOutHandler(){yt(this.chartID,!1),this.mouseOutEvent.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){ft(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){tt({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,dataKeyNames:this.dataKeyNames,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,diffLabelDetails:this.diffLabelDetails,chartType:"dumbbell"})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),this.updateDiffLabel.attr("cursor",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?this.cursor:null),this.updateLabelChildren.attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null)}drawLegendElements(){nt({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.accessibility.hideStrokes?null:this.rawColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,label:this.legend.labels||this.ordinalLabel,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){p(this.dumbbellPlotEl).selectAll(".legend").on("click",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?(t,i,s)=>this.onClickHandler(t,s[i]):null).on("mouseover",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?(t,i,s)=>this.onHoverHandler(t,s[i],!1):null).on("mouseout",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}setLegendCursor(){p(this.dumbbellPlotEl).selectAll(".legend").style("cursor",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?this.cursor:null)}setSeriesCursor(){this.updateSeriesLabel.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null)}bindSeriesInteractivity(){this.updateSeriesLabel.on("click",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>this.onClickHandler(t,s[i]):null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>this.onHoverHandler(t,s[i],!1):null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null)}bindInteractivity(){this.update.on("click",this.suppressEvents?null:(t,i,s)=>{if(t.values){const h=this.findMarkerIndex(t,s[i],m);this.onClickHandler(t.values[h],s[i])}}).on("mouseover",this.suppressEvents?null:(t,i,s)=>{let h=t;if(t.values){const e=this.findMarkerIndex(t,s[i],m);yt(this.chartID,!0),h=t.values[e],this.hoverEvent.emit({data:h,target:s[i]})}this.showTooltip&&this.eventsTooltip({data:this.tooltipLabel.labelAccessor&&this.tooltipLabel.labelAccessor.length?h:t,evt:m,isToShow:!0})}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateLabelChildren.on("click",!this.suppressEvents&&this.dataLabel.visible?(t,i,s)=>this.onClickHandler(t,s[i]):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?(t,i,s)=>this.onHoverHandler(t,s[i],!0):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null),this.updateDiffLabel.on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?(t,i,s)=>this.onClickHandler(t,s[i]):null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?(t,i,s)=>this.onHoverHandler(t,s[i],!0):null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?()=>this.onMouseOutHandler():null)}findMarkerIndex(t,i,s){const h=this.isVertical?this.findPosition(i,s)[1]:this.findPosition(i,s)[0],e=this.isVertical?"Y":"X",a=+p(i).attr("data-center"+e+"1"),l=+p(i).attr("data-center"+e+"2"),r=t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]?0:1;return h<=(l-a)/2+a?0+r:1-r}findPosition(t,i){let s=(t.ownerSVGElement||t).createSVGPoint();return s.x=i.clientX,s.y=i.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}generateId(t,i){let s="dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2;s=t.focus?this.focusMarker.sizeFromBar*s:this.marker.sizeFromBar*s;const h=this.marker.visible||t.focus?1:0,e="#"===this.rawColors[t.referenceIndex][0]?this.rawColors[t.referenceIndex].substring(1):this.rawColors[t.referenceIndex];let a=(i<2&&this.clickHighlight.length?this.clickStyle.strokeWidth:i<4?this.barStyle.width:this.hoverStyle.strokeWidth).toString();return a=""+a,a=a.replace(/\D/g,"n"),"marker-"+this.chartID+i+this.marker.type+s+e+a+h}render(){return this.drawStartEvent.emit({chartID:this.chartID}),this.init(),this.shouldSetLocalizationConfig&&(this.setLocalizationConfig(),this.shouldSetLocalizationConfig=!1),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidateLocalizationProps(),this.shouldValidate=!1),this.shouldValidateLayout&&this.validateLayout(),this.shouldValidateDataLabelPlacement&&(this.validateDataLabelPlacement(),this.shouldValidateDataLabelPlacement=!1),this.shouldValidateSeriesLabelPlacement&&(this.validateSeriesLabelPlacement(),this.shouldValidateSeriesLabelPlacement=!1),this.shouldValidateDiffLabelPlacement&&(this.validateDiffLabelPlacement(),this.shouldValidateDiffLabelPlacement=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldUpdateLayout&&(this.setLayoutData(),this.shouldUpdateLayout=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateMarkerData&&(this.prepareMarkerData(),this.shouldUpdateMarkerData=!1),this.shouldUpdateSeriesData&&(this.prepareSeriesData(),this.shouldUpdateSeriesData=!1),this.shouldUpdateLegendData&&(this.prepareLegendData(),this.shouldUpdateLegendData=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldCheckValueAxis&&("horizontal"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0):("vertical"===this.layout||this.layoutOverride)&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0),this.shouldCheckValueAxis=!1),this.shouldCheckLabelAxis&&("vertical"===this.layout||this.layoutOverride?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0):"horizontal"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0),this.shouldCheckLabelAxis=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"dumbbell-main-title vcl-main-title","data-testid":"main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions dumbbell-sub-title vcl-sub-title","data-testid":"sub-title"}),s("div",{class:"dumbbell-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,language:this.getLanguageString(),geomType:"dumbbell",chartTag:"dumbbell-plot",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-dumbbell-container"}),s("div",{class:"dumbbell-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,unitTest:this.unitTest,language:this.getLanguageString(),isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,dataKeyNames:this.dataKeyNames,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))}init(){const t=Object.keys(w);let i=0;const s={wrapLabel:{exception:!1},strokeWidth:{exception:0},showDots:{exception:!1},dotRadius:{exception:0},hoverOpacity:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:!1}};for(i=0;i<t.length;i++)this[t[i]]=this[t[i]]||s[t[i]]&&this[t[i]]===s[t[i]].exception?this[t[i]]:w[t[i]]}get dumbbellPlotEl(){return h(this)}static get watchers(){return{mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],seriesAccessor:["seriesAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],layout:["layoutWatcher"],showBaselineX:["showBaselineXWatcher"],showBaselineY:["showBaselineYWatcher"],colorPalette:["paletteWatcher"],colors:["paletteWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],hoverOpacity:["hoverOpacityWatcher"],cursor:["cursorWatcher"],focusMarker:["focusMarkerWatcher"],marker:["markerWatcher"],barStyle:["barStyleWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],differenceLabel:["differenceLabelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],localization:["localizationWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],referenceStyle:["referenceWatcher"],referenceLines:["referenceWatcher"],suppressEvents:["suppressWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],interactionKeys:["interactionWatcher"],dataKeyNames:["dataKeyNamesWatcher"],unitTest:["unitTestWatcher"]}}};window.VisaChartsLibOSSLicenses=bt(),Ot.style=".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}dumbbell-plot{cursor:default}dumbbell-plot .vcl-sub-title-keyword{-webkit-padding-before:1px;padding:3px 6px 1px 6px}dumbbell-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}dumbbell-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}dumbbell-plot .hidden{display:none}dumbbell-plot .axis{font-size:12px}dumbbell-plot .axis text{fill:#767676}dumbbell-plot .axis-label{text-anchor:middle;font:1rem sans-serif}dumbbell-plot .axis-mark{color:transparent;stroke-width:2px;opacity:1}dumbbell-plot .axis path{stroke:black}dumbbell-plot .x.axis path{stroke:transparent}dumbbell-plot .y.axis path{stroke:transparent}dumbbell-plot .grid line{stroke:#c9c9c9;stroke-opacity:0.6}dumbbell-plot .grid path{stroke-width:0;stroke:#767676}dumbbell-plot .dumbbell-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}dumbbell-plot .dumbbell-group__inactive{opacity:0}dumbbell-plot .dumbbell-group .dot{stroke:#ffffff}dumbbell-plot .dumbbell-group .dumbbell-series-label{font-size:1em}dumbbell-plot .dumbbell-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .dumbbell-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .annotations{pointer-events:none}dumbbell-plot .annotations .handle{pointer-events:all}";export{Ot as dumbbell_plot}