/**
 * Copyright (c) 2024 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
import{r as t,c as i,h as s,g as h}from"./p-eeee2e3c.js";import{m as e}from"./p-cbe185fc.js";import{m as a}from"./p-b0dcbe24.js";import{p as l}from"./p-b62f42bc.js";import{n as o,l as r}from"./p-45691346.js";import{v as n,s as c,e as d}from"./p-a494a9b5.js";import{v as p}from"./p-9cc83250.js";import{h as u,d as y,s as m,m as b,y as g}from"./p-4d338ee8.js";import{c as v,a as f,l as x}from"./p-2ce88f16.js";import{b as k,a as A}from"./p-8e11a6c4.js";import{c as w}from"./p-209ccfff.js";import"./p-1e7506b0.js";import"./p-85d34e7b.js";import"./p-fef5c4ba.js";import"./p-cbc590f6.js";import"./p-2f90bdc4.js";const{propDefaultValues:W}=n;class L{}L.mainTitle="Parallel Plot Title",L.subTitle=W.subTitle.text,L.height=300,L.width=500,L.margin={top:3,bottom:3,right:5,left:5},L.padding={top:20,bottom:50,right:100,left:75},L.localization=W.localization,L.ordinalAccessor="label",L.valueAccessor="value",L.seriesAccessor="series",L.accessibility=W.accessibility,L.animationConfig=W.animationConfig,L.highestHeadingLevel=W.highestHeadingLevel,L.xAxis=W.xAxis,L.yAxis=W.yAxis,L.showBaselineX=W.showBaselineFalse,L.wrapLabel=W.wrapLabel,L.colorPalette=W.colorPaletteCategorical,L.hoverStyle=W.hoverStyle,L.clickStyle=W.clickStyle,L.strokeWidth=W.strokeWidth1,L.showDots=W.showDots,L.dotRadius=W.dotRadius4,L.lineCurve=W.lineCurve,L.hoverOpacity=W.hoverOpacity,L.cursor=W.cursor,L.dataLabel=W.dataLabelBottomRight,L.seriesLabel=W.seriesLabel,L.legend=W.hiddenLegend,L.tooltipLabel=W.tooltipLabel,L.secondaryLines=W.secondaryLines,L.showTooltip=W.showTooltip,L.suppressEvents=W.suppressEvents,L.annotations=W.annotations,L.clickHighlight=W.clickHighlight;const{getGlobalInstances:S,configLocalization:T,getActiveLanguageString:C,getAccessibleStrokes:D,ensureTextContrast:O,createTextStrokeFilter:P,findTagLevel:E,prepareRenderChange:I,initializeDescriptionRoot:N,initializeElementAccess:j,setElementFocusHandler:z,setElementAccessID:F,setAccessibilityController:K,hideNonessentialGroups:$,setAccessTitle:H,setAccessSubtitle:G,setAccessLongDescription:M,setAccessExecutiveSummary:q,setAccessPurpose:R,setAccessContext:X,setAccessStatistics:B,setAccessChartCounts:Y,setAccessXAxis:V,setAccessYAxis:_,setAccessStructure:U,setAccessAnnotation:J,retainAccessFocus:Q,checkAccessFocus:Z,setElementInteractionAccessState:tt,setAccessibilityDescriptionWidth:it,annotate:st,chartAccessors:ht,checkInteraction:et,checkClicked:at,checkHovered:lt,convertVisaColor:ot,drawAxis:rt,drawGrid:nt,drawLegend:ct,setLegendInteractionState:dt,drawTooltip:pt,formatDataLabel:ut,getColors:yt,getLicenses:mt,getPadding:bt,getScopedData:gt,initTooltipStyle:vt,overrideTitleTooltip:ft,placeDataLabels:xt,resolveLines:kt,scopeDataKeys:At,transitionEndAll:wt,visaColors:Wt,validateAccessibilityProps:Lt,validateLocalizationProps:St,roundTo:Tt,getTextWidth:Ct,resolveLabelCollision:Dt,setSubTitle:Ot}=n,Pt=class{constructor(s){t(this,s),this.clickEvent=i(this,"clickEvent",7),this.hoverEvent=i(this,"hoverEvent",7),this.mouseOutEvent=i(this,"mouseOutEvent",7),this.initialLoadEvent=i(this,"initialLoadEvent",7),this.initialLoadEndEvent=i(this,"initialLoadEndEvent",7),this.drawStartEvent=i(this,"drawStartEvent",7),this.drawEndEvent=i(this,"drawEndEvent",7),this.transitionEndEvent=i(this,"transitionEndEvent",7),this.shouldValidateAccessibility=!0,this.shouldValidateLocalization=!0,this.updated=!0,this.enterSize=0,this.exitSize=0,this.time={timehour:u,timeday:y,timeweek:m,timemonth:b,timeyear:g},this.curveOptions={linear:v,bumpX:k,bumpY:A,catmullRom:f},this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYGrid=!1,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateScales=!1,this.shouldUpdateTableData=!1,this.shouldUpdateLabels=!1,this.shouldUpdateAnnotations=!1,this.shouldDrawInteractionState=!1,this.shouldSetSelectionClass=!1,this.shouldUpdateCursor=!1,this.shouldSetColors=!1,this.shouldSetSubTitle=!1,this.shouldUpdateLines=!1,this.shouldUpdatePoints=!1,this.shouldUpdateLegend=!1,this.shouldBindInteractivity=!1,this.shouldUpdateLegendInteractivity=!1,this.shouldResetRoot=!1,this.shouldUpdateBaseline=!1,this.shouldValidateInteractionKeys=!1,this.shouldEnterUpdateExit=!1,this.shouldSetGlobalSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldSetLabelOpacity=!1,this.shouldSetSeriesLabelOpacity=!1,this.shouldSetLegendCursor=!1,this.shouldAddStrokeUnder=!1,this.shouldValidateSeriesLabels=!1,this.shouldUpdateSeriesLabels=!1,this.shouldUpdateColors=!1,this.shouldUpdateStrokeWidth=!1,this.shouldUpdateInterpolationData=!1,this.shouldSetScaleUsed=!1,this.shouldUpdateDotRadius=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldUpdateDashPatterns=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldSetLocalizationConfig=!1,this.topLevel="h2",this.bottomLevel="p",this.strokes={},this.b=",",this.short="2,2",this.med="4,2",this.long="8,2",this.dashPatterns=["",this.long,this.long+this.b+this.med,this.short+this.b+this.long+this.b+this.long,this.short+this.b+this.short+this.b+this.long],this.hiddenHash={},this.collisionSettings={all:{validPositions:["top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:[3,2,4,4,1,1,1,1]},top:{validPositions:["top","top-left","top-right"],offsets:[3,1,1]},middle:{validPositions:["left","right"],offsets:[4,4]},bottom:{validPositions:["bottom","bottom-left","bottom-right"],offsets:[2,1,1]},right:{validPositions:["right","top-right","bottom-right"],offsets:[4,1,1]},left:{validPositions:["left","top-left","bottom-left"],offsets:[4,1,1]}},this.dynamicY=t=>"individual"===this.yAxis.scales?this.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.y(t[this.valueAccessor]),this.interpolateDynamicY=t=>"individual"===this.yAxis.scales?this.interpolating.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.interpolating.y(t[this.valueAccessor]),this.handleDotStroke=(t,i,s)=>{if(!this.accessibility.hideStrokes){const h=this.clickHighlight&&this.clickHighlight.length>0&&at(t,this.clickHighlight,this.innerInteractionKeys),e=this.hoverHighlight&&lt(t,this.hoverHighlight,this.innerInteractionKeys),a=c(s[i].parentNode).attr("fill"),l=h&&this.clickStyle.color?Wt[this.clickStyle.color]||this.clickStyle.color:h?a:e&&this.hoverStyle.color?Wt[this.hoverStyle.color]||this.hoverStyle.color:a;return c(s[i]).attr("stroke-width",this.calculateStrokeWidth(t)),c(s[i]).attr("fill",l),this.strokes[l.toLowerCase()]}return null},this.handleLineStroke=(t,i)=>{const s=this.colorArr[i]||this.colorArr[0],h=t.values[0],e=at(h,this.clickHighlight,this.innerInteractionKeys),a=lt(h,this.hoverHighlight,this.innerInteractionKeys);return this.seriesInteraction?e&&this.clickStyle.color?this.strokes[(Wt[this.clickStyle.color]||this.clickStyle.color).toLowerCase()]:e?s:a&&this.hoverStyle.color?this.strokes[(Wt[this.hoverStyle.color]||this.hoverStyle.color).toLowerCase()]:s:s},this.handleSeriesTextFill=(t,i)=>{const s=this.rawColors[i]||this.rawColors[0],h=t.values[0],e=at(h,this.clickHighlight,this.innerInteractionKeys),a=lt(h,this.hoverHighlight,this.innerInteractionKeys);return this.textColors[(this.seriesInteraction?e&&this.clickStyle.color?Wt[this.clickStyle.color]||this.clickStyle.color:e?s:a&&this.hoverStyle.color?Wt[this.hoverStyle.color]||this.hoverStyle.color:s:s).toLowerCase()]},this.handleTextFill=(t,i,s)=>{const h=this.clickHighlight&&this.clickHighlight.length>0&&at(t,this.clickHighlight,this.innerInteractionKeys),e=this.hoverHighlight&&lt(t,this.hoverHighlight,this.innerInteractionKeys),a=c(s[i].parentNode).attr("fill");return this.textColors[(h&&this.clickStyle.color?Wt[this.clickStyle.color]||this.clickStyle.color:h?a:e&&this.hoverStyle.color?Wt[this.hoverStyle.color]||this.hoverStyle.color:a).toLowerCase()]},this.calculateStrokeWidth=(t,i)=>{const s=i?t.values[0]:t;return!i||this.seriesInteraction?at(s,this.clickHighlight,this.innerInteractionKeys)?this.clickStyle.strokeWidth||this.strokeWidth:lt(s,this.hoverHighlight,this.innerInteractionKeys)?this.hoverStyle.strokeWidth||this.strokeWidth:this.secondaryLines.keys.includes(s[this.seriesAccessor])?1:this.strokeWidth:this.secondaryLines.keys.includes(s[this.seriesAccessor])?1:this.strokeWidth},this.handleStrokeDasharray=(t,i)=>this.secondaryLines.keys.includes(t.key)?this.short:this.accessibility.hideTextures?"":this.dashPatterns[i],this.mainTitle=L.mainTitle,this.subTitle=L.subTitle,this.height=L.height,this.width=L.width,this.highestHeadingLevel=L.highestHeadingLevel,this.margin=L.margin,this.padding=L.padding,this.data=void 0,this.uniqueID=void 0,this.localization=L.localization,this.ordinalAccessor=L.ordinalAccessor,this.valueAccessor=L.valueAccessor,this.seriesAccessor=L.seriesAccessor,this.xAxis=L.xAxis,this.yAxis=L.yAxis,this.wrapLabel=L.wrapLabel,this.showBaselineX=L.showBaselineX,this.colorPalette=L.colorPalette,this.colors=void 0,this.hoverStyle=L.hoverStyle,this.clickStyle=L.clickStyle,this.cursor=L.cursor,this.hoverOpacity=L.hoverOpacity,this.animationConfig=L.animationConfig,this.strokeWidth=L.strokeWidth,this.showDots=L.showDots,this.dotRadius=L.dotRadius,this.lineCurve=L.lineCurve,this.dataLabel=L.dataLabel,this.dataKeyNames=void 0,this.showTooltip=L.showTooltip,this.tooltipLabel=L.tooltipLabel,this.accessibility=L.accessibility,this.legend=L.legend,this.annotations=L.annotations,this.seriesLabel=L.seriesLabel,this.maxValueOverride=void 0,this.minValueOverride=void 0,this.secondaryLines=L.secondaryLines,this.suppressEvents=L.suppressEvents,this.hoverHighlight=void 0,this.clickHighlight=L.clickHighlight,this.interactionKeys=void 0,this.unitTest=!1}dataWatcher(t,i){this.updated=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateDotRadius=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldValidate=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0}idWatcher(t,i){console.error("Change detected in prop uniqueID from value "+i+" to value "+t+". This prop cannot be changed after component has loaded.")}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetSubTitle=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetSubTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldResetRoot=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}seriesAccessorWatcher(t,i){this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldValidate=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateTableData=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldUpdateLabels=!0,this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0}ordinalAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldUpdateTableData=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateAnnotations=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateStrokeWidth=!0}valueAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldSetGlobalSelections=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGlobalSelections=!0}xAxisWatcher(t,i){this.shouldUpdateXAxis=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0),this.shouldSetXAxisAccessibility=!0}yAxisWatcher(t,i){(!(!t||!t.scales)&&t.scales)!==(!(!i||!i.scales)&&i.scales)&&(this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0),this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0)}wrapLabelWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}showBaselineXWatcher(t,i){this.shouldUpdateBaseline=!0}paletteWatcher(t,i){this.shouldSetColors=!0,this.shouldUpdateColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldUpdateColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldSetColors=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldSetColors=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0}strokeWidthWatcher(t,i){this.shouldUpdateStrokeWidth=!0}showDotsWatcher(t,i){this.shouldDrawInteractionState=!0}dotRadiusWatcher(t,i){this.shouldUpdateDotRadius=!0}lineCurveWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,console.warn("Change detected in prop lineCurve from value "+t+" to value "+i+". Transition effects for this prop have not been implemented.")}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0}dataLabelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0;const s=!(!t||!t.placement)&&t.placement,h=!(!i||!i.placement)&&i.placement,e=!(!t||!t.labelAccessor)&&t.labelAccessor,a=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),s!==h&&(this.shouldUpdateSeriesLabels=!0),e!==a&&(this.shouldValidateDataLabelAccessor=!0)}seriesLabelWatcher(t,i){this.shouldUpdateSeriesLabels=!0,this.shouldUpdateTableData=!0,this.shouldValidateSeriesLabels=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetSeriesLabelOpacity=!0)}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldSetGeometryAriaLabels=!0}showTooltipWatcher(t,i){}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const s=t&&t.includeDataKeyNames,h=i&&i.includeDataKeyNames;s===h&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(s!==h&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateStrokeWidth=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.hideTextures)&&t.hideTextures)!==(!(!i||!i.hideTextures)&&i.hideTextures)&&(this.shouldUpdateDashPatterns=!0,this.shouldUpdateLegend=!0);const e=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,a=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&e===a||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),e!==a&&(this.shouldSetSelectionClass=!0)}localizationWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.language)&&t.language)!==(!(!i||!i.language)&&i.language)&&(this.shouldSetLocalizationConfig=!0,this.shouldUpdateTableData=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldRedrawWrapper=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.numeralLocale)&&t.numeralLocale)!==(!(!i||!i.numeralLocale)&&i.numeralLocale)&&(this.shouldSetLocalizationConfig=!0,this.shouldUpdateTableData=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldRedrawWrapper=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0)}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}valueOverrideWatcher(t,i){this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}secondaryLinesWatcher(t,i){const s=t&&t.showDataLabel,h=i&&i.showDataLabel,e=t&&t.showSeriesLabel,a=i&&i.showSeriesLabel,l=t&&t.opacity?t.opacity:0,o=i&&i.opacity?i.opacity:0;(!(!t||!t.keys)&&t.keys)!==(!(!i||!i.keys)&&i.keys)&&(this.shouldUpdateLines=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0),s!==h&&(this.shouldSetLabelOpacity=!0),e!==a&&(this.shouldUpdateLabels=!0),l!==o&&(this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0)}clickWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0}dataKeyNamesWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetGeometryAriaLabels=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetSubTitle=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){const t=this.uniqueID||"parallel-plot-"+p();return this.initialLoadEvent.emit({chartID:t}),new Promise((i=>{this.duration=0,this.defaults=!0,this.chartID=t,this.parallelChartEl.id=this.chartID,this.setLocalizationConfig(),this.setTagLevels(),this.setDimensions(),this.setScaleUsed(),this.prepareScales(),this.prepareData(),this.updateInterpolationData(),this.validateInteractionKeys(),this.validateSeriesLabels(),this.validateDataLabelAccessor(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.shouldValidateLocalizationProps(),this.setColors(),i("component will load")}))}componentWillUpdate(){return new Promise((t=>{t("component will update")}))}componentDidLoad(){return new Promise((t=>{this.renderRootElements(),this.renderChartRootElemets(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setSubTitleElements(),this.drawXGrid(),this.drawYGrid(),this.setGlobalSelections(),this.setTestingAttributes(),this.drawXAxis(),this.setXAxisAccessibility(),this.enterYAxis(),this.exitYAxis(),this.drawYAxis(),this.setYAxisAccessibility(),this.enterChartLines(),this.updateChartLines(),this.exitChartLines(),this.enterPoints(),this.updatePoints(),this.exitPoints(),this.drawChartLines(),this.drawPoints(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.drawDataLabels(),this.drawSeriesLabels(),this.addStrokeUnder(),this.setSelectedClass(),this.updateCursor(),this.bindInteractivity(),this.setLegendCursor(),this.bindLegendInteractivity(),this.drawBaseline(),this.drawAnnotations(),this.setAnnotationAccessibility(),$(this.root.node(),this.dotG.node()),this.setGroupAccessibilityID(),this.onChangeHandler(),this.defaults=!1,t("component did load")})).then((()=>this.initialLoadEndEvent.emit({chartID:this.chartID})))}componentDidUpdate(){return new Promise((t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldSetSubTitle&&(this.setSubTitleElements(),this.shouldSetSubTitle=!1),this.shouldEnterUpdateExit&&(this.enterYAxis(),this.exitYAxis(),this.enterChartLines(),this.updateChartLines(),this.exitChartLines(),this.enterPoints(),this.updatePoints(),this.exitPoints(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateLines&&(this.drawChartLines(),this.shouldUpdateLines=!1),this.shouldUpdatePoints&&(this.drawPoints(),this.shouldUpdatePoints=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateColors&&(this.updateColors(),this.shouldUpdateColors=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateSeriesLabels&&(this.drawSeriesLabels(),this.shouldUpdateSeriesLabels=!1),this.addStrokeUnder&&(this.addStrokeUnder(),this.shouldAddStrokeUnder=!1),this.shouldUpdateStrokeWidth&&(this.updateStrokeWidth(),this.shouldUpdateStrokeWidth=!1),this.shouldUpdateDotRadius&&(this.updateDotRadius(),this.shouldUpdateDotRadius=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldUpdateDashPatterns&&(this.updateStrokePattern(),this.shouldUpdateDashPatterns=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSeriesLabelOpacity&&(this.setSeriesLabelOpacity(),this.shouldSetSeriesLabelOpacity=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldUpdateLegendInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateBaseline&&(this.drawBaseline(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})).then((()=>this.drawEndEvent.emit({chartID:this.chartID})))}shouldValidateLocalizationProps(){const t=S(),i=t.i18Next.getResourceBundle(t.i18Next.language),s=t.numeral.localeData();this.shouldValidateLocalization&&!this.localization.skipValidation&&(this.shouldValidateLocalization=!1,St(this.chartID,Object.assign(Object.assign({},this.localization),{language:i,numeralLocale:s})))}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,Lt(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickEvent:this.suppressEvents?void 0:this.clickEvent.emit}}))}setDimensions(){this.padding="string"==typeof this.padding?bt(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.seriesAccessor],this.seriesInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.seriesAccessor}getLanguageString(){return C(this.localization)}setLocalizationConfig(){T(this.localization)}setSubTitleElements(){Ot({root:this.subTitleG,subTitle:this.subTitle})}setColors(){this.rawColors=this.colors?ot(this.colors):yt(this.colorPalette,this.nest.length),this.textColors={};let t=this.rawColors;if(this.strokes={},this.accessibility.hideStrokes||(t=[]),this.rawColors.forEach((i=>{if(!this.accessibility.hideStrokes){const s=D(i),h=2===s.length?s[1]:s[0];this.strokes[i.toLowerCase()]=h,t.push(h)}this.textColors[i.toLowerCase()]=O(i,"#ffffff",4.5)})),this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){const t=D(this.hoverStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.hoverStyle.color.toLowerCase()]=i}this.textColors[this.hoverStyle.color.toLowerCase()]=O(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){const t=D(this.clickStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.clickStyle.color.toLowerCase()]=i}this.textColors[this.clickStyle.color.toLowerCase()]=O(this.clickStyle.color,"#ffffff",4.5)}this.colorArr=t}innerScopeDataKeys(){const t=[];ht.singleAccessors.forEach((i=>{this[i]&&void 0!==a(this.data,(t=>t[this[i]]))&&t.push(i)}));const i=Object.assign(Object.assign({},ht),{singleAccessors:t});return At(this,i,"parallel-plot")}setTableData(){const t=this.innerScopeDataKeys();this.tableData=gt(this.data,t),this.tableColumns=Object.keys(t)}prepareData(){this.multiYScale={},this.data.map((t=>{const i=this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`];!i||"auto"!==this.dataLabel.placement&&!this.dataLabel.collisionHideOnly||t.enter||t.exit||(t.hidden=i["data-label-hidden"],t["auto-x"]=i.x,t["auto-y"]=i.y,t["auto-text-anchor"]=i["text-anchor"])})),this.nest=o().key((t=>(this.multiYScale[t[this.ordinalAccessor]]||(this.multiYScale[t[this.ordinalAccessor]]={min:1/0,max:0}),this.multiYScale[t[this.ordinalAccessor]].min>t[this.valueAccessor]&&(this.multiYScale[t[this.ordinalAccessor]].min=t[this.valueAccessor]),this.multiYScale[t[this.ordinalAccessor]].max<t[this.valueAccessor]&&(this.multiYScale[t[this.ordinalAccessor]].max=t[this.valueAccessor]),t[this.seriesAccessor]))).entries(this.data),this.map=o().key((t=>t[this.seriesAccessor])).map(this.data),Object.keys(this.multiYScale).forEach((t=>{const i=this.multiYScale[t],s=.05*this.innerPaddedHeight;i.y=r().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:i.min,this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i.max]).range([this.innerPaddedHeight-s,0+s]),i.ticks=[i.y.invert(this.innerPaddedHeight),i.y.invert(0)]}))}updateInterpolationData(){if(this.interpolating){let t=this.nest.length;this.nest.forEach((i=>{i.interpolate={};const s=this.interpolating.map.get(i.key),h=i.values;if(s){const e=kt(s,h,this.ordinalAccessor);e.length?(i.interpolate.start=e[0],i.interpolate.end=e[1]):(i.interpolate.start=s,i.interpolate.end=h,t--)}else i.interpolate.start=h,i.interpolate.end=h})),t||this.nest.length!==this.interpolating.length||(this.interpolating=!1)}}prepareScales(){if(this.nest){this.interpolating=this.nest;const t=this.x.domain(),i=this.x.range(),s=this.y.domain(),h=this.y.range();this.interpolating.scales=this.scalesUsed,this.interpolating.multiYScale=Object.assign({},this.multiYScale),this.interpolating.x=this.x.domain(t).range(i),this.interpolating.y=r().domain(s).range(h),this.interpolating.line=x().x((t=>this.interpolating.x(t[this.ordinalAccessor]))).y((t=>"individual"===this.interpolating.scales?this.interpolating.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.interpolating.y(t[this.valueAccessor]))).curve(this.curveOptions[this.lineCurve]||this.curveOptions.linear),this.interpolating.map=this.map}this.extent={},this.extent.minValue=a(this.data,(t=>parseFloat(t[this.valueAccessor]))),this.extent.maxValue=e(this.data,(t=>parseFloat(t[this.valueAccessor])));let t=0+.05*this.innerPaddedHeight,i=this.innerPaddedHeight-.05*this.innerPaddedHeight;"preNormalized"===this.yAxis.scales&&(this.extent.minValue=0,this.extent.maxValue=1,t=0,i=this.innerPaddedHeight),this.extent.minValue=this.minValueOverride||0===this.minValueOverride?this.minValueOverride:this.extent.minValue,this.extent.maxValue=this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:this.extent.maxValue,t=this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t,i=this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i,this.y=r().domain([this.extent.minValue,this.extent.maxValue]).range([i,t]),this.x=l().domain(this.data.map((t=>t[this.ordinalAccessor]))).range([0,this.innerPaddedWidth]),this.line=x().x((t=>this.x(t[this.ordinalAccessor]))).y((t=>"individual"===this.yAxis.scales?this.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.y(t[this.valueAccessor]))).curve(this.curveOptions[this.lineCurve]||this.curveOptions.linear)}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel&&this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateSeriesLabels(){this.labelDetails=Object.assign({},this.seriesLabel),this.labelDetails.placement||(this.labelDetails.placement=""),this.labelDetails.label&&this.labelDetails.label.length||(this.labelDetails.label=""),this.isRight="left"!==this.labelDetails.placement}setScaleUsed(){this.scalesUsed=this.yAxis.scales}renderRootElements(){this.svg=c(this.parallelChartEl).select(".visa-viz-d3-parallel-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.gridG=this.rootG.append("g").attr("class","grid-group")}renderChartRootElemets(){this.yGroup=this.rootG.append("g").attr("class","y-scales-group"),this.parallelLineG=this.rootG.append("g").attr("class","parallel-group parallel-line-group"),this.dotG=this.rootG.append("g").attr("class","parallel-group"),this.seriesLabelG=this.rootG.append("g").attr("class","parallel-series-wrapper"),this.labels=this.rootG.append("g").attr("class","parallel-dataLabel-group"),this.legendG=c(this.parallelChartEl).select(".parallel-legend").append("svg"),this.subTitleG=c(this.parallelChartEl).select(".parallel-sub-title"),this.tooltipG=c(this.parallelChartEl).select(".parallel-tooltip"),this.setTooltipInitialStyle()}reSetRoot(){I({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:w}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),I({selection:this.root,duration:this.duration,namespace:"root_reset",easing:w}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),I({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:w}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),it(this.chartID,this.width)}setGlobalSelections(){const t=Object.keys(this.multiYScale),i=this.yGroup.selectAll(".y-wrapper").data(t,(t=>t));this.yEnter=i.enter().append("g"),this.yExit=i.exit(),this.yUpdate=i.merge(this.yEnter);const s=this.parallelLineG.selectAll(".parallel-plot").data(this.nest,(t=>t.key));this.enterLines=s.enter().append("path"),this.exitLines=s.exit(),this.updateLines=s.merge(this.enterLines),this.enterSize=this.enterLines.size();const h=this.dotG.selectAll(".parallel-dot-wrapper").data(this.nest,(t=>t.key));this.enterDotWrappers=h.enter().append("g"),this.exitDotWrappers=h.exit(),this.updateDotWrappers=h.merge(this.enterDotWrappers);const e=this.seriesLabelG.selectAll(".parallel-series-label").data(this.nest,(t=>t.key));this.seriesLabelEnter=e.enter().append("text"),this.seriesLabelExit=e.exit(),this.seriesLabelUpdate=e.merge(this.seriesLabelEnter);const a=this.labels.selectAll("g").data(this.nest,(t=>t.key));if(this.enteringLabelGroups=a.enter().append("g"),this.exitingLabelGroups=a.exit(),this.updatingLabelGroups=a.merge(this.enteringLabelGroups),this.interpolating){this.updateDotWrappers.selectAll("circle").remove();const t=this.updateDotWrappers.selectAll("circle").data((t=>t.interpolate.start));this.enterDots=t.enter().append("circle"),this.exitDots=t.exit(),this.updateDots=t.merge(this.enterDots),this.updatingLabelGroups.selectAll(".parallel-dataLabel").remove();const i=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((t=>t.interpolate.start));this.enteringLabels=i.enter().append("text"),this.updatingLabels=i.merge(this.enteringLabels)}else{const t=this.updateDotWrappers.selectAll("circle").data((t=>t.values),(t=>t[this.ordinalAccessor]));this.enterDots=t.enter().append("circle"),this.exitDots=t.exit(),this.updateDots=t.merge(this.enterDots),this.enterSize=this.enterDots.size(),this.exitSize=this.exitDots.size();const i=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((t=>t.values),(t=>t[this.ordinalAccessor]));this.enteringLabels=i.enter().append("text"),this.exitingLabels=i.exit(),this.updatingLabels=i.merge(this.enteringLabels)}}setTestingAttributes(){this.unitTest?(c(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid","chart-container"),c(this.parallelChartEl).select(".parallel-main-title").attr("data-testid","main-title"),c(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.gridG.attr("data-testid","grid-group"),this.yGroup.attr("data-testid","y-scales-group"),this.yUpdate.attr("data-testid","y-scale-wrapper"),this.parallelLineG.attr("data-testid","parallel-line-group"),this.updateLines.attr("data-testid","parallel-line").attr("data-id",(t=>`parallel-line-${t.key}`)),this.seriesLabelG.attr("data-testid","parallel-series-label-container"),this.seriesLabelUpdate.attr("data-testid","parallel-series-label").attr("data-id",(t=>`parallel-series-label-${t.key}`)),this.dotG.attr("data-testid","marker-group"),this.updateDotWrappers.attr("data-testid","marker-series-group").attr("data-id",(t=>`marker-series-${t.key}`)),this.updateDots.attr("data-testid","marker").attr("data-id",(t=>`marker-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`)),this.labels.attr("data-testid","dataLabel-group-container"),this.updatingLabelGroups.attr("data-testid","dataLabel-group").attr("data-id",(t=>`dataLabel-group-${t.key}`)),this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",(t=>`dataLabel-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`)),this.svg.select("defs").attr("data-testid","pattern-defs")):(c(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid",null),c(this.parallelChartEl).select(".parallel-main-title").attr("data-testid",null),c(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.gridG.attr("data-testid",null),this.yGroup.attr("data-testid",null),this.yUpdate.attr("data-testid",null),this.parallelLineG.attr("data-testid",null),this.updateLines.attr("data-testid",null).attr("data-id",null),this.seriesLabelG.attr("data-testid",null),this.seriesLabelUpdate.attr("data-testid",null).attr("data-id",null),this.dotG.attr("data-testid",null),this.updateDotWrappers.attr("data-testid",null).attr("data-id",null),this.updateDots.attr("data-testid",null).attr("data-id",null),this.labels.attr("data-testid",null),this.updatingLabelGroups.attr("data-testid",null).attr("data-id",null),this.updatingLabels.attr("data-testid",null).attr("data-id",null),this.svg.select("defs").attr("data-testid",null))}drawXAxis(){rt({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel?this.innerPaddedWidth/this.nest[0].values.length*.7:"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label||""===this.xAxis.label?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.ordinalAccessor]?this.dataKeyNames[this.ordinalAccessor]:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration,hidePath:!0})}enterYAxis(){this.yEnter.attr("class","y-wrapper").attr("transform",(t=>"translate("+this.x(t)+",0)")).attr("opacity",0)}exitYAxis(){this.yExit.transition("exit").duration(this.duration).ease(w).attr("opacity",0).remove()}drawYAxis(){const t=this.yAxis.label&&""!==this.yAxis.label?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.valueAccessor]?this.dataKeyNames[this.valueAccessor]:this.yAxis.label;this.yUpdate.each(((i,s,h)=>{const e="individual"===this.yAxis.scales?this.multiYScale[i].ticks:this.yAxis.onlyTickExtents?[this.extent.minValue,this.extent.maxValue]:this.yAxis.onlyTickExtents,a=this.multiYScale[i].y.domain(),l=a[0]===a[1]||0!==s&&"individual"!==this.yAxis.scales||!this.yAxis.visible;rt({root:c(h[s]),height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"individual"===this.yAxis.scales?this.multiYScale[i].y:this.y,left:!0,wrapLabel:this.wrapLabel?this.padding.left:"",format:this.yAxis.format,tickInterval:e?1:this.yAxis.tickInterval,label:"individual"===this.yAxis.scales||l?"":t,padding:this.padding,hide:l,hidePath:!0,duration:this.duration,ticks:e})})).transition("update").duration(this.duration).ease(w).attr("transform",(t=>"translate("+this.x(t)+",0)")).attr("opacity",1)}setXAxisAccessibility(){V({rootEle:this.parallelChartEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:!!this.x&&this.x,xAxisLabel:(this.xAxis.label||""===this.xAxis.label?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.ordinalAccessor]?this.dataKeyNames[this.ordinalAccessor]:this.xAxis.label)||""})}setYAxisAccessibility(){_({rootEle:this.parallelChartEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:!!this.y&&this.y,yAxisLabel:(this.yAxis.label&&""!==this.yAxis.label?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.valueAccessor]?this.dataKeyNames[this.valueAccessor]:this.yAxis.label)||"",xAxisLabel:(this.xAxis.label||""===this.xAxis.label?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.ordinalAccessor]?this.dataKeyNames[this.ordinalAccessor]:this.xAxis.label)||""})}drawBaseline(){rt({root:this.gridG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0),hide:!this.showBaselineX,duration:this.duration})}drawXGrid(){nt(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!1,this.xAxis.tickInterval,this.duration)}drawYGrid(){nt(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)}enterChartLines(){this.enterLines.interrupt(),this.enterLines.attr("class","parallel-plot entering").attr("d",(t=>this.line(t.values))).attr("data-d",(t=>this.line(t.values))).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top),this.enterLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>{t.values&&this.onClickHandler(t.values[0],s[i])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>{t.values&&this.onHoverHandler(t.values[0],s[i])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("stroke-dasharray",((t,i,s)=>(t.linelength=s[i].getTotalLength(),t.linelength+" "+t.linelength))).attr("stroke",this.handleLineStroke).attr("fill","none").attr("stroke-width",.1)}updateChartLines(){this.updateLines.interrupt(),this.updateLines.transition().duration(this.duration).ease(w).attr("stroke-dashoffset",0).attr("stroke-width",(t=>this.calculateStrokeWidth(t,!0))).call(wt,(()=>{this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)})),this.updateLines.transition("opacity").ease(w).duration(this.duration).attr("opacity",(t=>{const i=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?et(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):et(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i}))}exitChartLines(){this.exitLines.interrupt(),this.exitLines.attr("stroke-dasharray",((t,i,s)=>(t.linelength=s[i].getTotalLength(),t.linelength+" "+t.linelength))).transition("exit").ease(w).duration(this.duration).attr("opacity",0).attr("stroke-dashoffset",(t=>t.linelength)).attr("stroke-width",.1).remove()}drawChartLines(){this.interpolating&&this.updateLines.attr("d",((t,i,s)=>c(s[i]).classed("entering")?this.line(t.values):this.interpolating.line(t.interpolate.start))),this.updateLines.attr("stroke-width",(t=>this.calculateStrokeWidth(t,!0))).attr("stroke-dashoffset",(t=>t.linelength)).attr("data-d",(t=>this.line(this.interpolating?t.interpolate.end:t.values))).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(w).duration(this.duration).attr("d",(t=>this.line(this.interpolating?t.interpolate.end:t.values))).call(wt,(()=>{this.updateLines.classed("entering",!1).attr("data-d",(t=>this.line(t.values))).attr("d",(t=>this.line(t.values))).attr("stroke-dasharray",this.handleStrokeDasharray)}))}enterPoints(){this.enterDots.interrupt(),this.enterDotWrappers.attr("class","parallel-dot-wrapper").attr("opacity",0).attr("fill",((t,i)=>this.rawColors[i]||this.rawColors[0])).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>{t.values&&this.onSeriesHoverHandler(t.values[0],s[i])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).each(((t,i,s)=>{j(s[i])})),this.enterDots.each(((t,i,s)=>{j(s[i])})).attr("stroke",this.handleDotStroke).attr("cursor",this.suppressEvents?null:this.cursor).attr("data-fill",!0).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).on("click",this.suppressEvents?null:(t,i,s)=>this.onClickHandler(t,s[i])).on("mouseover",this.suppressEvents?null:(t,i,s)=>this.onHoverHandler(t,s[i])).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.interpolating&&(this.enterDots.attr("cx",(t=>this.interpolating.x(t[this.ordinalAccessor]))).attr("cy",this.interpolateDynamicY).attr("r",(t=>t.enter?0:at(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):lt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).attr("stroke-width",(t=>this.calculateStrokeWidth(t))),this.enterDotWrappers.selectAll("circle").attr("r",0).attr("cx",(t=>this.x(t[this.ordinalAccessor]))).attr("cy",this.dynamicY).attr("opacity",0)),this.updateDotWrappers.order(),this.updateDots.order()}updatePoints(){this.updateDots.interrupt();const t=this.showDots?1:0;this.updateDots.attr("tabindex",((t,i)=>0===i?"0":"-1")),this.updateDotWrappers.attr("opacity",(i=>this.secondaryLines.keys.includes(i.key)?this.secondaryLines.opacity:t)),this.interpolating?(this.updateDots.attr("opacity",(t=>(this.exitSize+=t.exit?1:0,this.enterSize+=t.enter?1:0,t.enter?0:1))),this.updateDots=this.updateDotWrappers.selectAll("circle").data((t=>t.interpolate.end)).classed("exiting",(t=>t.exit)),this.enterDotWrappers.selectAll("circle").each((t=>{t.enterWholeGroup=!0})),this.updateDots.transition("opacity").ease(w).duration((t=>t.enterWholeGroup?this.duration/2:this.duration)).delay(((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0)).attr("opacity",(i=>et(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)))):this.updateDots.transition("opacity").ease(w).duration(this.duration).attr("opacity",(i=>et(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)))}exitPoints(){this.exitDots.interrupt(),this.exitDots.transition("exit").ease(w).duration(this.duration).attr("opacity",0).attr("r",0),this.exitDotWrappers.selectAll("circle").each((t=>{t.exitWholeGroup=!0})).transition("exit").ease(w).duration(this.duration/2).delay(((t,i,s)=>this.duration-this.duration*(i/(s.length-1)))).attr("opacity",0).attr("r",0),this.updateDots.transition("accessibilityAfterExit").duration(this.duration/2).delay(((t,i,s)=>this.duration-this.duration*(i/(s.length-1)))).ease(w).call(wt,(()=>{const t=Z(this.rootG.node());this.exitDots.remove(),this.exitDotWrappers.remove(),this.svg.selectAll(".exiting").remove(),this.updateDots=this.updateDotWrappers.selectAll("circle"),this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel"),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),Q({parentGNode:this.rootG.node(),focusDidExist:t})}))}drawPoints(){let t;t=this.interpolating?this.updateDots.attr("data-cx",(t=>this.x(t[this.ordinalAccessor]))).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",(t=>t.exit?0:at(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):lt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).transition("update").ease(w).duration((t=>t.enterWholeGroup?this.duration/2:this.duration)).delay(((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0)).attr("r",(t=>t.exit?0:at(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):lt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).attr("stroke-width",(t=>this.calculateStrokeWidth(t))):this.updateDots.attr("data-cx",(t=>this.x(t[this.ordinalAccessor]))).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",(t=>at(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):lt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).attr("r",(t=>at(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):lt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).attr("stroke-width",(t=>this.calculateStrokeWidth(t))).transition("update").ease(w).duration(this.duration),this.updateDots.attr("stroke",this.handleDotStroke),t.attr("cx",(t=>this.x(t[this.ordinalAccessor]))).attr("cy",this.dynamicY).call(wt,(()=>{this.updateDots.each((t=>{t.enterWholeGroup=!1,t.enter=!1})),Q({parentGNode:this.rootG.node()}),this.transitionEndEvent.emit({chartID:this.chartID})}))}enterSeriesLabels(){this.seriesLabelEnter.interrupt(),this.seriesLabelEnter.attr("class","parallel-series-label").attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>{t.values&&this.onClickHandler(t.values[0],s[i])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>{t.values&&this.onSeriesHoverHandler(t.values[0],s[i])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("fill",this.handleSeriesTextFill).attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor]))).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.5em").attr("text-anchor",this.isRight?"start":"end").attr("opacity",(t=>{const i=this.seriesLabel.visible?this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1:0;return et(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON}))}updateSeriesLabels(){this.seriesLabelUpdate.interrupt(),this.seriesLabelUpdate.transition("opacity").ease(w).duration(this.duration).attr("opacity",(t=>{const i=this.seriesLabel.visible?this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1:0;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?et(t.values[0],i,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):et(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i}))}exitSeriesLabels(){this.seriesLabelExit.interrupt(),this.seriesLabelExit.transition("update").ease(w).duration(this.duration).attr("opacity",0).remove()}drawSeriesLabels(){const t="auto"!==this.labelDetails.placement&&this.labelDetails.collisionHideOnly,i=this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill).text(((t,i)=>this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showSeriesLabel?"":this.labelDetails.label?this.labelDetails.label[i]:t.key&&"undefined"!==t.key?t.key:"")).style("visibility",((t,i,s)=>"auto"===this.labelDetails.placement||this.labelDetails.collisionHideOnly?c(s[i]).style("visibility"):null)).attr("data-x",this.isRight?this.innerPaddedWidth+10:0).attr("data-y",((t,i,s)=>{const h=getComputedStyle(s[i]),e=parseFloat(h.fontSize),a=Math.max(e-1,1);return"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor])+.4*a:this.y(t.values[0][this.valueAccessor])+.4*a})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.5em").attr("data-use-dx",t).attr("data-use-dy",t).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-text-anchor",this.isRight?"start":"end").transition("update").ease(w).duration(this.duration);this.labelDetails.visible&&("auto"===this.labelDetails.placement||this.labelDetails.collisionHideOnly)?(this.bitmaps=Dt({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[this.updateDots],validPositions:t?["middle"]:["middle","top","bottom"],offsets:t?[1]:[1,4,4],accessors:["key"],size:[Tt(this.width,0),Tt(this.height,0)],hideOnly:this.labelDetails.visible&&t}),t&&i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor]))).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.5em")):i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor]))).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.5em")}enterDataLabels(){if(this.enteringLabels.interrupt(),this.enteringLabelGroups.attr("class","parallel-label-wrapper").attr("opacity",0).attr("fill",((t,i)=>this.rawColors[i]||this.rawColors[0])),this.enteringLabels.attr("opacity",0).attr("fill",this.handleTextFill).attr("class","parallel-dataLabel").attr("cursor",this.suppressEvents?null:this.cursor).on("click",this.suppressEvents?null:(t,i,s)=>this.onClickHandler(t,s[i])).on("mouseover",this.suppressEvents?null:(t,i,s)=>this.onHoverHandler(t,s[i])).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.interpolating){const t=this.enteringLabels.attr("class","parallel-dataLabel").attr("opacity",Number.EPSILON);xt({root:t,xScale:this.interpolating.x,yScale:this.interpolateDynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"}),this.updatingLabels.attr("opacity",(t=>t.enter?Number.EPSILON:1));const i=this.enteringLabelGroups.selectAll(".parallel-dataLabel").attr("opacity",Number.EPSILON);xt({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}else{const t=this.enteringLabels.attr("opacity",Number.EPSILON).attr("class","parallel-dataLabel");xt({root:t,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}"auto"===this.dataLabel.placement&&this.updatingLabels.each(((t,i,s)=>{t.enter||t.exit||t.hidden||!t["auto-x"]&&0!==t["auto-x"]||!t["auto-y"]&&0!==t["auto-y"]||c(s[i]).attr("x",+c(s[i]).attr("x")+(+t["auto-x"]||0)).attr("y",+c(s[i]).attr("y")+(+t["auto-y"]||0)).attr("text-anchor",t["auto-text-anchor"])}))}updateDataLabels(){this.updatingLabelGroups.interrupt(),this.updatingLabelGroups.attr("opacity",(t=>this.dataLabel.visible?this.secondaryLines.keys.includes(t.key)&&this.secondaryLines.showDataLabel?this.secondaryLines.opacity:this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showDataLabel?0:1:0)),this.interpolating?(this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((t=>t.interpolate.end)).classed("exiting",(t=>t.exit)),this.enteringLabelGroups.each((t=>t.enterWholeGroup=!0)),this.updatingLabels.transition("opacity").ease(w).duration((t=>t.enterWholeGroup?this.duration/2:this.duration)).delay(((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0)).attr("opacity",((t,i,s)=>{const h=t.exit||et(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1,e=+c(s[i].parentNode).attr("opacity");return c(s[i]).attr("data-hidden",0===e||0===h?"true":null),h}))):this.updatingLabels.attr("opacity",((t,i,s)=>{const h=t.exit||et(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1,e=+c(s[i].parentNode).attr("opacity");return c(s[i]).attr("data-hidden",0===e||0===h?"true":null),h}))}exitDataLabels(){this.exitingLabels.interrupt(),this.exitingLabels.transition("exit").ease(w).duration(this.duration).attr("opacity",0).remove(),this.exitingLabelGroups.selectAll(".parallel-dataLabel").transition("exit").ease(w).duration(this.duration/2).delay(((t,i,s)=>this.duration-this.duration*(i/(s.length-1)))).attr("opacity",0).call(wt,(()=>{this.exitingLabelGroups.remove()}))}drawDataLabels(){const t="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;let i=this.updatingLabels.text((t=>ut(t,this.innerLabelAccessor,this.dataLabel.format)));i=this.interpolating?this.updatingLabels.style("visibility",((t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?t.hidden?"hidden":c(s[i]).style("visibility"):null)).attr("data-x",(t=>this.interpolating.x(t[this.ordinalAccessor]))).attr("data-y",this.interpolateDynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(w).duration((t=>t.enterWholeGroup?this.duration/2:this.duration)).delay(((t,i,s)=>t.enterWholeGroup?.75*this.duration*(i/(s.length-1)):0)):this.updatingLabels.style("visibility",((t,i,s)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?t.hidden?"hidden":c(s[i]).style("visibility"):null)).attr("data-x",(t=>this.x(t[this.ordinalAccessor]))).attr("data-y",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(w).duration(this.duration);const s=this.gridG.selectAll("line").attr("data-y2",this.innerPaddedHeight).attr("data-y1",0).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-x1",(t=>this.x(t))).attr("data-x2",(t=>this.x(t))),h=this.yUpdate.selectAll(".y.axis").filter(((t,i,s)=>+c(s[i]).attr("opacity")>=1e-4)).selectAll("text").attr("data-fill",!0).attr("data-y",(t=>this.y(t))).attr("data-width",((t,i,s)=>{const h=s[i],e=getComputedStyle(h),a=parseFloat(e.fontSize),l=Math.max(a-1,1),o=Ct(h.textContent,a,!0,e.fontFamily);return c(h).attr("data-x",+c(h).attr("x")).attr("data-translate-x",this.margin.left+this.padding.left-o).attr("data-translate-y",this.margin.top+this.padding.top-l/2).attr("data-height",l),o})),e=this.dataLabel&&this.dataLabel.collisionPlacement;this.bitmaps=xt({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,labelSelection:i,avoidMarks:[h,s,this.updateLines,this.updateDots],validPositions:t?["middle"]:e&&this.collisionSettings[e]?this.collisionSettings[e].validPositions:this.collisionSettings.all.validPositions,offsets:t?[1]:e&&this.collisionSettings[e]?this.collisionSettings[e].offsets:this.collisionSettings.all.offsets,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[Tt(this.width,0),Tt(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}}),i.call(wt,(()=>{this.hiddenHash={},this.updatingLabels.each(((t,i,s)=>{this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`]={"data-label-hidden":"true"===c(s[i]).attr("data-label-hidden"),x:+c(s[i]).attr("x")-+c(s[i]).attr("data-x"),y:+c(s[i]).attr("y")-+c(s[i]).attr("data-y"),"text-anchor":c(s[i]).attr("text-anchor")}}))}))}updateInteractionState(){this.updateLines.interrupt("opacity"),this.updateLines.attr("opacity",(t=>{const i=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?et(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):et(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i}));const t=this.showDots?1:0;this.updateDotWrappers.attr("opacity",(i=>this.secondaryLines.keys.includes(i.key)?this.secondaryLines.opacity:t)),this.updateDots.each(((i,s,h)=>{i.enter||i.enterWholeGroup||i.exit||i.exitWholeGroup||c(h[s]).attr("opacity",(()=>et(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)))})),Q({parentGNode:this.rootG.node()}),dt({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}setSeriesLabelOpacity(){const t="auto"!==this.labelDetails.placement&&this.labelDetails.collisionHideOnly,i="auto"===this.labelDetails.placement||t;if(this.seriesLabelUpdate.each(((i,s,h)=>{const e=c(h[s]),a=+e.attr("opacity"),l=e.style("visibility");e.classed("entering")||e.attr("opacity",(()=>{const o=(this.seriesLabel.visible?this.secondaryLines.keys.includes(i.key)?this.secondaryLines.opacity:1:0)<1?0:1,r=+c(h[s].parentNode).attr("opacity");if(e.attr("data-hidden",0===r||0===o?"true":null),this.seriesInteraction){if(this.secondaryLines.keys.includes(i.key)){const e=et(i.values[0],o,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;return c(h[s]).attr("data-hidden",0===e?"true":null),(1!==e||"hidden"!==l)&&a===e||"auto"!==this.labelDetails.placement&&!t||(1===e?c(h[s]).classed("collision-added",!0).style("visibility",null):c(h[s]).classed("collision-removed",!0)),e}{const e=et(i.values[0],o,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;return c(h[s]).attr("data-hidden",0===e?"true":null),(1!==e||"hidden"!==l)&&a===e||"auto"!==this.labelDetails.placement&&!t||(1===e?c(h[s]).classed("collision-added",!0).style("visibility",null):c(h[s]).classed("collision-removed",!0)),e}}return c(h[s]).attr("data-hidden",0===o?"true":null),a===o||"auto"!==this.labelDetails.placement&&!t||(1===o?c(h[s]).classed("collision-added",!0).style("visibility",null):c(h[s]).classed("collision-removed",!0)),o}))})),i){const i=this.seriesLabelUpdate.filter(((t,i,s)=>c(s[i]).classed("collision-added"))).attr("data-text-anchor",((t,i,s)=>c(s[i]).attr("collision-text-anchor")||c(s[i]).attr("data-text-anchor"))).attr("collision-text-anchor",null),s=this.seriesLabelUpdate.filter(((t,i,s)=>c(s[i]).classed("collision-removed"))).attr("data-use-dx",t).attr("data-use-dy",t).attr("keep-data-y",t).attr("collision-text-anchor",((t,i,s)=>c(s[i]).attr("data-text-anchor"))).attr("data-text-anchor",null);s.size()>0&&(this.bitmaps=Dt({bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[Tt(this.width,0),Tt(this.height,0)],hideOnly:!1,removeOnly:!0}),s.classed("collision-removed",!1).attr("keep-data-y",null)),i.size()>0&&(this.bitmaps=Dt({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[this.updateDots],validPositions:t?["middle"]:["middle","top","bottom"],offsets:t?[1]:[1,4,4],accessors:["key"],size:[Tt(this.width,0),Tt(this.height,0)],hideOnly:this.labelDetails.visible&&t}),t&&i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor]))).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.5em"),i.classed("collision-added",!1))}}setLabelOpacity(){const t="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly,i="auto"===this.dataLabel.placement||t,s=this.dataLabel&&this.dataLabel.collisionPlacement;if(this.updatingLabelGroups.attr("opacity",(t=>(this.dataLabel.visible?this.secondaryLines.keys.includes(t.key)&&this.secondaryLines.showDataLabel?this.secondaryLines.opacity:this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showDataLabel?0:1:0)<1?0:1)),this.updatingLabels.each(((i,s,h)=>{const e=+c(h[s]).attr("opacity"),a=c(h[s]).style("visibility");i.enter||i.enterWholeGroup||i.exit||i.exitWholeGroup||c(h[s]).attr("opacity",(()=>{const l=et(i,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1,o=+c(h[s].parentNode).attr("opacity");return c(h[s]).attr("data-hidden",0===o||0===l?"true":null),(1!==l||"hidden"!==a)&&e===l||"auto"!==this.dataLabel.placement&&!t||(1===l?c(h[s]).classed("collision-added",!0).style("visibility",null):c(h[s]).classed("collision-removed",!0)),l}))})),i){const i=this.updatingLabels.filter(((t,i,s)=>c(s[i]).classed("collision-added"))).transition().duration(0),h=this.updatingLabels.filter(((t,i,s)=>c(s[i]).classed("collision-removed"))).attr("data-use-dx",t).attr("data-use-dy",t),e=t?["middle"]:s&&this.collisionSettings[s]?this.collisionSettings[s].validPositions:this.collisionSettings.all.validPositions,a=t?[1]:s&&this.collisionSettings[s]?this.collisionSettings[s].offsets:this.collisionSettings.all.offsets;h.size()>0&&(this.bitmaps=Dt({bitmaps:this.bitmaps,labelSelection:h,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[Tt(this.width,0),Tt(this.height,0)],hideOnly:!1,removeOnly:!0}),h.classed("collision-removed",!1)),i.size()>0&&(this.bitmaps=xt({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[this.updateLines,this.updateDots],validPositions:e,offsets:a,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[Tt(this.width,0),Tt(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly,suppressMarkDraw:!0}}),i.call(wt,(()=>{this.updatingLabels.each(((t,i,s)=>{c(s[i]).classed("collision-added",!1),this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`]={"data-label-hidden":"true"===c(s[i]).attr("data-label-hidden"),x:+c(s[i]).attr("x")-+c(s[i]).attr("data-x"),y:+c(s[i]).attr("y")-+c(s[i]).attr("data-y"),"text-anchor":c(s[i]).attr("text-anchor")}}))})))}}bindInteractivity(){this.updateLines.on("click",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>{t.values&&this.onClickHandler(t.values[0],s[i])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>{t.values&&this.onHoverHandler(t.values[0],s[i])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateDots.on("click",this.suppressEvents?null:(t,i,s)=>this.onClickHandler(t,s[i])).on("mouseover",this.suppressEvents?null:(t,i,s)=>this.onHoverHandler(t,s[i])).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.dotG.selectAll(".parallel-dot-wrapper").on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>{t.values&&this.onSeriesHoverHandler(t.values[0],s[i])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.seriesLabelUpdate.on("click",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>{t.values&&this.onClickHandler(t.values[0],s[i])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,i,s)=>{t.values&&this.onSeriesHoverHandler(t.values[0],s[i])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updatingLabels.on("click",this.suppressEvents?null:(t,i,s)=>this.onClickHandler(t,s[i])).on("mouseover",this.suppressEvents?null:(t,i,s)=>this.onHoverHandler(t,s[i])).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler())}addStrokeUnder(){const t=P({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.labels.attr("filter",t),this.seriesLabelG.attr("filter",t)}updateColors(){this.updateDotWrappers.attr("fill",((t,i)=>this.rawColors[i]||this.rawColors[0])),this.updateDots.attr("stroke",this.handleDotStroke),this.updateLines.attr("stroke",this.handleLineStroke),this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill),this.updatingLabelGroups.attr("fill",((t,i)=>this.rawColors[i]||this.rawColors[0])),this.updatingLabels.attr("fill",this.handleTextFill)}updateCursor(){this.updateLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null),this.updateDots.attr("cursor",this.suppressEvents?null:this.cursor),this.seriesLabelUpdate.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null),this.updatingLabels.attr("cursor",this.suppressEvents?null:this.cursor)}updateStrokeWidth(){this.updateLines.attr("stroke-width",(t=>this.calculateStrokeWidth(t,!0))),this.updateDots.attr("stroke",this.handleDotStroke)}updateStrokePattern(){this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)}updateDotRadius(){this.updateDots.each(((t,i,s)=>{const h=c(s[i]);t.enter||t.enterWholeGroup||h.classed("entering")||t.exit||h.attr("r",(()=>at(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):lt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2))})).attr("stroke",this.handleDotStroke)}setSelectedClass(){this.updateDots.classed("highlight",((t,i,s)=>{let h=et(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return h=!(!this.clickHighlight||!this.clickHighlight.length)&&h,tt(s[i],h,this.accessibility.elementsAreInterface),h}))}drawAnnotations(){st({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.ordinalAccessor,yScale:this.y,yAccessor:this.valueAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){J(this.getLanguageString(),this.parallelChartEl,this.annotations,void 0)}setTagLevels(){this.topLevel=E(this.highestHeadingLevel),this.bottomLevel=E(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){N({language:this.getLanguageString(),rootEle:this.parallelChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"parallel-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled,hideDataTable:this.accessibility.hideDataTableButton}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){K({chartTag:"parallel-plot",language:this.getLanguageString(),node:this.svg.node(),title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:this.innerScopeDataKeys(),dataKeyNames:this.dataKeyNames,groupAccessor:this.seriesAccessor,groupName:"line",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.updateDots.each(((t,i,s)=>{j(s[i])}))}setGeometryAriaLabels(){const t=this.innerScopeDataKeys();this.updateDots.each(((i,s,h)=>{z({chartTag:"parallel-plot",language:this.getLanguageString(),node:h[s],geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,dataKeyNames:this.dataKeyNames,groupName:"line",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),F({node:h[s],uniqueID:this.chartID})}))}setGroupAccessibilityID(){this.updateDotWrappers.each(((t,i,s)=>{F({node:s[i],uniqueID:this.chartID})}))}setChartAccessibilityTitle(){H(this.getLanguageString(),this.parallelChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){G(this.getLanguageString(),this.parallelChartEl,this.subTitle)}setChartAccessibilityLongDescription(){M(this.getLanguageString(),this.parallelChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){q(this.getLanguageString(),this.parallelChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){R(this.getLanguageString(),this.parallelChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){X(this.getLanguageString(),this.parallelChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){B(this.getLanguageString(),this.parallelChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){Y({rootEle:this.parallelChartEl,parentGNode:this.dotG.node(),chartTag:"parallel-plot",geomType:"point",groupName:"line"})}setChartAccessibilityStructureNotes(){U(this.getLanguageString(),this.parallelChartEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.interpolating=!1,this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t,i){this.clickEvent.emit({data:t,target:i})}onHoverHandler(t,i){ft(this.chartID,!0),this.hoverEvent.emit({data:t,target:i}),this.showTooltip&&t[this.ordinalAccessor]&&this.eventsTooltip({data:t,evt:d,isToShow:!0})}onSeriesHoverHandler(t,i){this.hoverEvent.emit({data:t,target:i})}onMouseOutHandler(){ft(this.chartID,!1),this.mouseOutEvent.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){vt(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:s}){pt({root:this.tooltipG,data:t,event:i,isToShow:s,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,dataKeyNames:this.dataKeyNames,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,chartType:"parallel"})}bindLegendInteractivity(){c(this.parallelChartEl).selectAll(".legend").on("click",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?(t,i,s)=>{t.values&&this.onClickHandler(t.values[0],s[i])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?(t,i,s)=>{t.values&&this.hoverEvent.emit({data:t.values[0],target:s[i]})}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive?()=>this.onMouseOutHandler():null)}setLegendCursor(){c(this.parallelChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?this.cursor:null)}drawLegendElements(){ct({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,dashPatterns:this.accessibility.hideTextures?null:this.dashPatterns,margin:this.margin,padding:this.padding,duration:this.duration,type:"parallel",secondary:this.secondaryLines.keys,fontSize:16,data:this.nest,label:this.legend.labels,hide:!(this.legend.visible&&(this.seriesAccessor!==L.seriesAccessor||!this.nest||1!==this.nest.length||"undefined"!==this.nest[0].key)||!this.legend||!this.seriesAccessor),interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}render(){return this.drawStartEvent.emit({chartID:this.chartID}),this.init(),this.shouldSetLocalizationConfig&&(this.setLocalizationConfig(),this.shouldSetLocalizationConfig=!1),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldSetScaleUsed&&(this.setScaleUsed(),this.shouldSetScaleUsed=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateInterpolationData&&(this.updateInterpolationData(),this.shouldUpdateInterpolationData=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidateLocalizationProps(),this.shouldValidate=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldValidateSeriesLabels&&(this.validateSeriesLabels(),this.shouldValidateSeriesLabels=!1),s("div",{class:"o-layout"},s("div",{class:"o-layout--chart"},s(this.topLevel,{class:"parallel-main-title vcl-main-title"},this.mainTitle),s(this.bottomLevel,{class:"visa-ui-text--instructions parallel-sub-title vcl-sub-title"}),s("div",{class:"parallel-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),s("keyboard-instructions",{uniqueID:this.chartID,geomType:"point",groupName:"line",language:this.getLanguageString(),chartTag:"parallel-plot",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:!0,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),s("div",{class:"visa-viz-d3-parallel-container"}),s("div",{class:"parallel-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),s("data-table",{uniqueID:this.chartID,isCompact:!0,language:this.getLanguageString(),tableColumns:this.tableColumns,dataKeyNames:this.dataKeyNames,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(L);let i=0;const s={wrapLabel:{exception:!1},strokeWidth:{exception:0},showDots:{exception:!1},hoverOpacity:{exception:0},dotRadius:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:!1}};for(i=0;i<t.length;i++)this[t[i]]=this[t[i]]||s[t[i]]&&this[t[i]]===s[t[i]].exception?this[t[i]]:L[t[i]]}get parallelChartEl(){return h(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],seriesAccessor:["seriesAccessorWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],showBaselineX:["showBaselineXWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],showDots:["showDotsWatcher"],dotRadius:["dotRadiusWatcher"],lineCurve:["lineCurveWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],localization:["localizationWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],secondaryLines:["secondaryLinesWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],dataKeyNames:["dataKeyNamesWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}};window.VisaChartsLibOSSLicenses=mt(),Pt.style=".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}parallel-plot{cursor:default}parallel-plot .vcl-sub-title-keyword{-webkit-padding-before:1px;padding:3px 6px 1px 6px}parallel-plot .annotations{pointer-events:none}parallel-plot .annotations .handle{pointer-events:all}parallel-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}parallel-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}parallel-plot .hidden{display:none}parallel-plot .axis{font-size:12px}parallel-plot .axis text{fill:#767676}parallel-plot .axis-label{text-anchor:middle;font:1rem sans-serif}parallel-plot .axis path{stroke:#767676}parallel-plot .grid line{stroke:#767676;shape-rendering:crispEdges}parallel-plot .grid path{stroke-width:0;stroke:#767676}parallel-plot .grid.left line{stroke-dasharray:4, 4;stroke-opacity:0.6}parallel-plot .parallel-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}parallel-plot .parallel-group__inactive{opacity:0}parallel-plot .parallel-group .parallel-plot{fill:none}parallel-plot .parallel-group .dot{stroke:#ffffff}parallel-plot .parallel-group .parallel-series-label{font-size:1em}parallel-plot .parallel-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}parallel-plot .parallel-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}";export{Pt as parallel_plot}