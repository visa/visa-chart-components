/**
 * Copyright (c) 2023 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
import{r as t,c as s,h as i,g as h}from"./p-eeee2e3c.js";import{m as e}from"./p-cbe185fc.js";import{m as a}from"./p-b0dcbe24.js";import{e as o,a as r,n as l,l as c,o as n}from"./p-be615bb3.js";import{p as d,s as u}from"./p-ed125cb5.js";import{v as p}from"./p-5aee2b76.js";import{v as g,s as f,e as y}from"./p-2c07c4b3.js";import{i as m}from"./p-19a4f06b.js";import{c as v}from"./p-209ccfff.js";function b(){var t,s,i,h,e,a=0,o=1,l=r,c=!1;function n(s){return isNaN(s=+s)?e:l(0===i?.5:(s=(h(s)-t)*i,c?Math.max(0,Math.min(1,s)):s))}return n.domain=function(e){return arguments.length?(t=h(a=+e[0]),s=h(o=+e[1]),i=t===s?0:1/(s-t),n):[a,o]},n.clamp=function(t){return arguments.length?(c=!!t,n):c},n.interpolator=function(t){return arguments.length?(l=t,n):l},n.unknown=function(t){return arguments.length?(e=t,n):e},function(e){return h=e,t=e(a),s=e(o),i=t===s?0:1/(s-t),n}}function x(t,s){return s.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function A(){var t=d(b());return t.copy=function(){return x(t,A()).exponent(t.exponent())},o.apply(t,arguments)}function W(){return A.apply(null,arguments).exponent(.5)}const{propDefaultValues:w}=g;class k{}k.mainTitle="Scatter Plot Title",k.subTitle=w.subTitle.text,k.height=300,k.width=650,k.margin={top:3,bottom:3,right:6.5,left:6.5},k.padding={top:20,bottom:50,right:50,left:60},k.localization=w.localization,k.xAccessor="metric",k.yAccessor="value",k.groupAccessor="category",k.sizeConfig=w.sizeConfig,k.accessibility=w.accessibility,k.animationConfig=w.animationConfig,k.highestHeadingLevel=w.highestHeadingLevel,k.sortOrder=w.sortOrder,k.xAxis=w.xAxis,k.yAxis=w.yAxis,k.showBaselineX=w.showBaselineTrue,k.showBaselineY=w.showBaselineFalse,k.colorPalette=w.colorPaletteCategorical,k.dotRadius=w.dotRadius6,k.dotOpacity=w.dotOpacity,k.dotSymbols=w.dotSymbols,k.referenceStyle=w.referenceStyle,k.showFitLine=w.showFitLine,k.fitLineStyle=w.referenceStyle,k.cursor=w.cursor,k.hoverOpacity=w.hoverOpacity,k.hoverStyle=w.symbolHoverStyle,k.clickStyle=w.symbolClickStyle,k.dataLabel=w.dataLabel,k.legend=w.categoryLegend,k.tooltipLabel=w.tooltipLabel,k.showTooltip=w.showTooltip,k.suppressEvents=w.suppressEvents,k.referenceLines=w.referenceLines,k.annotations=w.annotations,k.clickHighlight=w.clickHighlight;const{getGlobalInstances:S,configLocalization:L,getActiveLanguageString:T,getAccessibleStrokes:D,ensureTextContrast:C,createTextStrokeFilter:O,initializeDescriptionRoot:z,initializeElementAccess:I,setElementFocusHandler:E,setElementAccessID:N,setAccessibilityController:F,hideNonessentialGroups:P,setAccessTitle:K,setAccessSubtitle:M,setAccessLongDescription:j,setAccessExecutiveSummary:G,setAccessPurpose:H,setAccessContext:V,setAccessStatistics:q,setAccessChartCounts:B,setAccessXAxis:$,setAccessYAxis:X,setAccessStructure:R,setAccessAnnotation:Y,retainAccessFocus:_,checkAccessFocus:U,setElementInteractionAccessState:Z,setAccessibilityDescriptionWidth:J,annotate:Q,chartAccessors:tt,checkInteraction:st,checkClicked:it,checkHovered:ht,convertVisaColor:et,drawAxis:at,drawGrid:ot,drawLegend:rt,setLegendInteractionState:lt,drawTooltip:ct,formatDataLabel:nt,getColors:dt,getLicenses:ut,getPadding:pt,getScopedData:gt,initTooltipStyle:ft,leastSquares:yt,overrideTitleTooltip:mt,placeDataLabels:vt,scopeDataKeys:bt,symbols:xt,transitionEndAll:At,visaColors:Wt,validateAccessibilityProps:wt,validateLocalizationProps:kt,findTagLevel:St,prepareRenderChange:Lt,roundTo:Tt,resolveLabelCollision:Dt,setSubTitle:Ct}=g,Ot=class{constructor(i){t(this,i),this.clickEvent=s(this,"clickEvent",7),this.hoverEvent=s(this,"hoverEvent",7),this.mouseOutEvent=s(this,"mouseOutEvent",7),this.initialLoadEvent=s(this,"initialLoadEvent",7),this.initialLoadEndEvent=s(this,"initialLoadEndEvent",7),this.drawStartEvent=s(this,"drawStartEvent",7),this.drawEndEvent=s(this,"drawEndEvent",7),this.transitionEndEvent=s(this,"transitionEndEvent",7),this.shouldValidateAccessibility=!0,this.shouldValidateLocalization=!0,this.updated=!0,this.shouldUpdateAnnotations=!1,this.shouldResetRoot=!1,this.shouldUpdateTableData=!1,this.shouldSetColors=!1,this.shouldSetSubTitle=!1,this.shouldUpdateData=!1,this.shouldUpdateScales=!1,this.shouldValidate=!1,this.shouldUpdateLayout=!1,this.shouldEnterUpdateExit=!1,this.shouldSetGlobalSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldUpdateGeometries=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateBaselineX=!1,this.shouldUpdateBaselineY=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYGrid=!1,this.shouldUpdateLegend=!1,this.shouldUpdateReferenceLines=!1,this.shouldDrawFitLine=!1,this.shouldUpdateLabels=!1,this.shouldAddStrokeUnder=!1,this.shouldValidateClickStyle=!1,this.shouldValidateHoverStyle=!1,this.shouldValidateInteractionKeys=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldSetSelectionClass=!1,this.shouldUpdateCursor=!1,this.shouldDrawInteractionState=!1,this.shouldSetDotRadius=!1,this.shouldBindInteractivity=!1,this.shouldUpdateLegendInteractivity=!1,this.shouldSetLegendCursor=!1,this.shouldSetLabelOpacity=!1,this.shouldSetPointOpacity=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityAttributes=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetStrokes=!1,this.shouldSetLocalizationConfig=!1,this.topLevel="h2",this.bottomLevel="p",this.strokes={},this.setColors=()=>{this.rawColors=this.colors?et(this.colors):dt(this.colorPalette,this.nest.length||1),this.textColorArr=[];let t=this.rawColors;function s(t){const s=D(t);return 2===s.length?s[1]:s[0]}if(!this.accessibility.hideStrokes){if(this.strokes={},this.innerClickStyle.color){const t=Wt[this.innerClickStyle.color]||this.innerClickStyle.color;this.strokes[t.toLowerCase()]=s(t)}if(this.innerHoverStyle.color){const t=Wt[this.innerHoverStyle.color]||this.innerHoverStyle.color;this.strokes[t.toLowerCase()]=s(t)}t=[]}this.rawColors.forEach((i=>{if(!this.accessibility.hideStrokes){const h=s(i);this.strokes[i.toLowerCase()]=h,t.push(h)}this.textColorArr.push(C(i,"#ffffff",4.5))})),this.innerClickStyle.color&&this.textColorArr.push(C(Wt[this.innerClickStyle.color]||this.innerClickStyle.color,"#ffffff",4.5)),this.innerHoverStyle.color&&this.textColorArr.push(C(Wt[this.innerHoverStyle.color]||this.innerHoverStyle.color,"#ffffff",4.5)),this.colorArr=t},this.textFillHandler=t=>{const s=this.clickHighlight&&this.clickHighlight.length>0&&it(t,this.clickHighlight,this.innerInteractionKeys),i=this.hoverHighlight&&ht(t,this.hoverHighlight,this.innerInteractionKeys),h=s?Wt[this.innerClickStyle.color]||this.innerClickStyle.color||(this.groupAccessor?this.dotColor(t[this.groupAccessor]):this.rawColors[0]):i&&(Wt[this.innerHoverStyle.color]||this.innerHoverStyle.color)||(this.groupAccessor?this.dotColor(t[this.groupAccessor]):this.rawColors[0]);return this.textColor(h)},this.handleDotStyle=(t,s,i)=>{let h=null;const e=this.clickHighlight&&this.clickHighlight.length>0&&it(t,this.clickHighlight,this.innerInteractionKeys),a=this.hoverHighlight&&ht(t,this.hoverHighlight,this.innerInteractionKeys),o=e?Wt[this.innerClickStyle.color]||this.innerClickStyle.color||(this.groupAccessor?this.dotColor(t[this.groupAccessor]):this.rawColors[0]):a?Wt[this.innerHoverStyle.color]||this.innerHoverStyle.color||(this.groupAccessor?this.dotColor(t[this.groupAccessor]):this.rawColors[0]):this.groupAccessor&&this.sizeConfig.dualEncodeColor?W([Math.max(0,this.sizeMin),this.sizeMax],m("#fff",this.dotColor(t[this.groupAccessor])))(t[this.sizeConfig.sizeAccessor])||this.dotColor(t[this.groupAccessor]):this.groupAccessor&&this.sizeConfig&&!this.sizeConfig.dualEncodeColor?this.dotColor(t[this.groupAccessor]):!this.groupAccessor&&this.sizeConfig.dualEncodeColor&&W([Math.max(0,this.sizeMin),this.sizeMax],m("#fff",this.rawColors[0]))(t[this.sizeConfig.sizeAccessor])||this.rawColors[0];if(!this.accessibility.hideStrokes){const r=(e?parseFloat(this.innerClickStyle.strokeWidth)||1:a&&parseFloat(this.innerHoverStyle.strokeWidth)||1)/(this.size(t[this.sizeConfig.sizeAccessor]*this.shapeArea[this.groupAccessor?t[this.groupAccessor]:""].toCircle)||this.dotRadius||1);f(i[s]).attr("stroke-width",r),h=this.strokes[e||a?o.toLowerCase():this.groupAccessor?this.dotColor(t[this.groupAccessor]).toLowerCase():this.rawColors[0].toLowerCase()]}return f(i[s]).attr("fill",o),h},this.localization=k.localization,this.mainTitle=k.mainTitle,this.subTitle=k.subTitle,this.height=k.height,this.width=k.width,this.margin=k.margin,this.padding=k.padding,this.highestHeadingLevel=k.highestHeadingLevel,this.data=void 0,this.uniqueID=void 0,this.xAccessor=k.xAccessor,this.yAccessor=k.yAccessor,this.sizeConfig=k.sizeConfig,this.groupAccessor=k.groupAccessor,this.xAxis=k.xAxis,this.yAxis=k.yAxis,this.showBaselineX=k.showBaselineX,this.showBaselineY=k.showBaselineY,this.colorPalette=k.colorPalette,this.colors=void 0,this.dotRadius=k.dotRadius,this.dotOpacity=k.dotOpacity,this.hoverStyle=k.hoverStyle,this.clickStyle=k.clickStyle,this.referenceStyle=k.referenceStyle,this.cursor=k.cursor,this.hoverOpacity=k.hoverOpacity,this.animationConfig=k.animationConfig,this.fitLineStyle=k.fitLineStyle,this.dotSymbols=k.dotSymbols,this.dataLabel=k.dataLabel,this.dataKeyNames=void 0,this.showTooltip=k.showTooltip,this.tooltipLabel=k.tooltipLabel,this.accessibility=k.accessibility,this.legend=k.legend,this.annotations=k.annotations,this.xMaxValueOverride=void 0,this.xMinValueOverride=void 0,this.yMaxValueOverride=void 0,this.yMinValueOverride=void 0,this.showFitLine=k.showFitLine,this.referenceLines=k.referenceLines,this.suppressEvents=k.suppressEvents,this.hoverHighlight=void 0,this.clickHighlight=k.clickHighlight,this.interactionKeys=void 0,this.unitTest=!1}dataWatcher(t,s){this.updated=!0,this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldUpdateScales=!0,this.shouldDrawInteractionState=!0,this.shouldSetPointOpacity=!0,this.shouldEnterUpdateExit=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateTableData=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldDrawFitLine=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0}idWatcher(t,s){console.error("Change detected in prop uniqueID from value "+s+" to value "+t+". This prop cannot be changed after component has loaded.")}headingWatcher(t,s){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetSubTitle=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,s){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,s){this.shouldSetSubTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}layoutWatcher(t,s){this.shouldUpdateLayout=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldDrawFitLine=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0}xAccessorWatcher(t,s){this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateLabels=!0,this.shouldDrawFitLine=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0}yAccessorWatcher(t,s){this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldDrawFitLine=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0}sizeConfigWatcher(t,s){this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldDrawFitLine=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateTableData=!0}groupAccessorWatcher(t,s){this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldSetPointOpacity=!0,this.shouldValidateHoverStyle=!0,this.shouldValidateClickStyle=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetGroupAccessibilityAttributes=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}xAxisWatcher(t,s){this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,(t&&t.gridVisible)===(s&&s.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(s&&s.tickInterval?s.tickInterval:0)||(this.shouldUpdateXGrid=!0)}yAxisWatcher(t,s){this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,(t&&t.gridVisible)===(s&&s.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(s&&s.tickInterval?s.tickInterval:0)||(this.shouldUpdateYGrid=!0)}showBaselineXWatcher(t,s){this.shouldUpdateBaselineX=!0}showBaselineYWatcher(t,s){this.shouldUpdateBaselineY=!0}colorsWatcher(t,s){this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0}dotRadiusWatcher(t,s){this.shouldValidateHoverStyle=!0,this.shouldValidateClickStyle=!0,this.shouldSetDotRadius=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0}dotOpacityWatcher(t,s){this.shouldSetPointOpacity=!0}dotSymbolsWatcher(t,s){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0}hoverStyleWatcher(t,s){this.shouldSetColors=!0,this.shouldSetPointOpacity=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldValidateHoverStyle=!0}clickStyleWatcher(t,s){this.shouldSetColors=!0,this.shouldSetPointOpacity=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldValidateClickStyle=!0}referenceWatcher(t,s){this.shouldUpdateReferenceLines=!0}fitLineStyleWatcher(t,s){this.shouldDrawFitLine=!0}cursorWatcher(t,s){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0}hoverOpacityWatcher(t,s){this.shouldSetPointOpacity=!0,this.shouldSetLabelOpacity=!0}labelWatcher(t,s){this.shouldUpdateLabels=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateTableData=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldSetGeometryAriaLabels=!0;const i=!(!t||!t.labelAccessor)&&t.labelAccessor,h=!(!s||!s.labelAccessor)&&s.labelAccessor,e=!(!t||!t.format)&&t.format,a=!(!s||!s.format)&&s.format;(t&&t.visible)!==(s&&s.visible)&&(this.shouldSetLabelOpacity=!0),i===h&&e===a||(this.shouldValidateDataLabelAccessor=!0)}showTooltipWatcher(t,s){this.shouldDrawInteractionState=!0}tooltipLabelWatcher(t,s){this.shouldUpdateTableData=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldSetGeometryAriaLabels=!0}legendWatcher(t,s){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(s&&s.interactive)&&(this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0)}suppressWatcher(t,s){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldUpdateLegend=!0,this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetSubTitle=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}annotationsWatcher(t,s){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}accessibilityWatcher(t,s){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!s||!s.title)&&s.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!s||!s.executiveSummary)&&s.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!s||!s.purpose)&&s.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!s||!s.longDescription)&&s.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!s||!s.contextExplanation)&&s.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!s||!s.statisticalNotes)&&s.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!s||!s.structureNotes)&&s.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const i=t&&t.includeDataKeyNames,h=s&&s.includeDataKeyNames;i===h&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!s||!s.elementDescriptionAccessor)&&s.elementDescriptionAccessor)||(i!==h&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!s||!s.hideStrokes)&&s.hideStrokes)&&(this.shouldSetColors=!0,this.shouldDrawInteractionState=!0);const e=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,a=!(!s||!s.elementsAreInterface)&&s.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(s&&s.keyboardNavConfig&&s.keyboardNavConfig.disabled)&&s.keyboardNavConfig.disabled)&&e===a||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),e!==a&&(this.shouldSetSelectionClass=!0)}localizationWatcher(t,s){this.shouldValidate=!0,(!(!t||!t.language)&&t.language)!==(!(!s||!s.language)&&s.language)&&(this.shouldSetLocalizationConfig=!0,this.shouldUpdateTableData=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldRedrawWrapper=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.numeralLocale)&&t.numeralLocale)!==(!(!s||!s.numeralLocale)&&s.numeralLocale)&&(this.shouldSetLocalizationConfig=!0,this.shouldUpdateTableData=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldRedrawWrapper=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0)}xValueOverrideWatcher(t,s){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateLabels=!0,this.shouldDrawFitLine=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateAnnotations=!0}yValueOverrideWatcher(t,s){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldDrawFitLine=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0}showFitLineWatcher(t,s){this.shouldDrawFitLine=!0}clickWatcher(t,s){this.shouldSetPointOpacity=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0}hoverWatcher(t,s){this.shouldSetPointOpacity=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0}interactionWatcher(t,s){this.shouldValidateInteractionKeys=!0,this.shouldSetPointOpacity=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldBindInteractivity=!0,this.shouldUpdateLegendInteractivity=!0}dataKeyNamesWatcher(t,s){this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetGeometryAriaLabels=!0}unitTestWatcher(t,s){this.shouldSetTestingAttributes=!0}componentWillLoad(){const t=this.uniqueID||"scatter-plot-"+p();return this.initialLoadEvent.emit({chartID:t}),new Promise((s=>{this.duration=0,this.defaults=!0,this.chartID=t,this.scatterChartEl.id=this.chartID,this.setLocalizationConfig(),this.setTagLevels(),this.prepareData(),this.setLayoutData(),this.validateClickStyle(),this.validateHoverStyle(),this.setColors(),this.prepareScales(),this.validateInteractionKeys(),this.validateDataLabelAccessor(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.shouldValidateLocalizationProps(),s("component will load")}))}componentWillUpdate(){return new Promise((t=>{t("component will update")}))}componentDidLoad(){return new Promise((t=>{this.shouldValidateAccessibilityProps(),this.shouldValidateLocalizationProps(),this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setStrokes(),this.setSubTitleElements(),this.drawXGrid(),this.drawYGrid(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterPointGroups(),this.exitPointGroups(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.setPointOpacity(),this.drawPointGroups(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.drawDataLabels(),this.addStrokeUnder(),this.drawFitLine(),this.drawReferenceLines(),this.setSelectedClass(),this.updateCursor(),this.setLegendCursor(),this.bindInteractivity(),this.bindLegendInteractivity(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),this.drawBaselineX(),this.drawBaselineY(),this.onChangeHandler(),P(this.root.node(),this.dotG.node()),this.setGroupAccessibilityID(),this.defaults=!1,t("component did load")})).then((()=>this.initialLoadEndEvent.emit({chartID:this.chartID})))}componentDidUpdate(){return new Promise((t=>{this.duration=this.animationConfig&&this.animationConfig.disabled?0:750,this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldSetStrokes&&(this.setStrokes(),this.shouldSetStrokes=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldSetSubTitle&&(this.setSubTitleElements(),this.shouldSetSubTitle=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldEnterUpdateExit&&(this.enterPointGroups(),this.exitPointGroups(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateGeometries&&(this.drawPointGroups(),this.shouldUpdateGeometries=!1),this.shouldSetDotRadius&&(this.setDotRadius(),this.shouldSetDotRadius=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.addStrokeUnder&&(this.addStrokeUnder(),this.shouldAddStrokeUnder=!1),this.shouldDrawFitLine&&(this.drawFitLine(),this.shouldDrawFitLine=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetPointOpacity&&(this.setPointOpacity(),this.shouldSetPointOpacity=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldUpdateLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldUpdateLegendInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateBaselineX&&(this.drawBaselineX(),this.shouldUpdateBaselineX=!1),this.shouldUpdateBaselineY&&(this.drawBaselineY(),this.shouldUpdateBaselineY=!1),this.onChangeHandler(),t("component did update")})).then((()=>this.drawEndEvent.emit({chartID:this.chartID})))}shouldValidateLocalizationProps(){const t=S(),s=t.i18Next.getResourceBundle(t.i18Next.language),i=t.numeral.localeData();this.shouldValidateLocalization&&!this.localization.skipValidation&&(this.shouldValidateLocalization=!1,kt(this.chartID,Object.assign(Object.assign({},this.localization),{language:s,numeralLocale:i})))}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,wt(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickEvent:this.suppressEvents?void 0:this.clickEvent.emit}}))}setLayoutData(){this.padding="string"==typeof this.padding?pt(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:this.groupAccessor?[this.groupAccessor]:[this.xAccessor,this.yAccessor],this.groupInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.groupAccessor}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.sizeConfig.sizeAccessor?this.sizeConfig.sizeAccessor:this.yAccessor,this.innerLabelFormat=this.dataLabel.labelAccessor?this.dataLabel.format:this.sizeConfig.sizeAccessor?this.sizeConfig.format:this.yAxis.format}innerScopeDataKeys(){const t=[];tt.singleAccessors.forEach((s=>{this[s]&&void 0!==a(this.data,(t=>t[this[s]]))&&t.push(s)}));const s=Object.assign(Object.assign({},tt),{singleAccessors:t});return bt(this,s,"scatter-plot")}setTableData(){const t=this.innerScopeDataKeys();this.tableData=gt(this.data,t),this.tableColumns=Object.keys(t)}getLanguageString(){return T(this.localization)}setLocalizationConfig(){L(this.localization)}prepareData(){this.nest=this.groupAccessor?l().key((t=>t[this.groupAccessor])).entries(this.data):[{key:"",values:this.data}]}setSubTitleElements(){Ct({root:this.subTitleG,subTitle:this.subTitle})}prepareScales(){const t=a(this.data,(t=>parseFloat(t[this.xAccessor]))),s=e(this.data,(t=>parseFloat(t[this.xAccessor]))),i=a(this.data,(t=>parseFloat(t[this.yAccessor]))),h=e(this.data,(t=>parseFloat(t[this.yAccessor]))),o=a(this.data,(t=>parseFloat(t[this.sizeConfig.sizeAccessor]))),r=e(this.data,(t=>parseFloat(t[this.sizeConfig.sizeAccessor])));this.xMin=0===this.xMinValueOverride?0:this.xMinValueOverride||t-.1*(s-t),this.xMax=0===this.xMaxValueOverride?0:this.xMaxValueOverride||s+.1*(s-t),this.yMin=0===this.yMinValueOverride?0:this.yMinValueOverride||i-.1*(h-i),this.yMax=0===this.yMaxValueOverride?0:this.yMaxValueOverride||h+.1*(h-i);const l=this.sizeConfig.maxValueOverride||0===this.sizeConfig.maxValueOverride;this.sizeMin=(this.sizeConfig.minValueOverride||0===this.sizeConfig.minValueOverride)&&this.sizeConfig.minValueOverride<o?this.sizeConfig.minValueOverride:o,this.sizeMax=l&&this.sizeConfig.maxValueOverride>r?this.sizeConfig.maxValueOverride:r;const d=[];this.nest.map((t=>{d.push(t.key)})),this.xMax===this.xMin&&(this.xMax=Math.max(0,this.xMax),this.xMin=Math.min(0,this.xMin)),this.yMax===this.yMin&&(this.yMax=Math.max(0,this.yMax),this.yMin=Math.min(0,this.yMin)),this.sizeMax===this.sizeMin&&(this.sizeMax=Math.max(0,this.sizeMax),this.sizeMin=Math.min(0,this.sizeMin)),this.x=c().domain([this.xMin,this.xMax]).range([0,this.innerPaddedWidth]),this.y=c().domain([this.yMin,this.yMax]).range([this.innerPaddedHeight,0]),this.size=u().domain([this.sizeMin,this.sizeMax]).range([this.sizeConfig.minSizeOverride||0===this.sizeConfig.minSizeOverride?this.sizeConfig.minSizeOverride:k.dotRadius,this.sizeConfig.maxSizeOverride||0===this.sizeConfig.maxSizeOverride?this.sizeConfig.maxSizeOverride:(this.innerPaddedWidth+this.innerPaddedHeight)/2.5/10]),this.symbol=n().domain(d).range(this.dotSymbols),this.shapeArea={},d.forEach((t=>{let s=[];xt[this.symbol(t)].general.split(/[A-Z]/g).forEach((t=>{2===t.split(",").length&&s.push(t.split(","))}));let i=[],h=[];s.forEach(((t,e)=>{s[e+1]?(i.push(parseFloat(t[0])*parseFloat(s[e+1][1])),h.push(parseFloat(t[1])*parseFloat(s[e+1][0]))):(i.push(parseFloat(t[0])*parseFloat(s[0][1])),h.push(parseFloat(t[1])*parseFloat(s[0][0])))}));let e=(i.reduce(((t,s)=>t+s))-h.reduce(((t,s)=>t+s)))/2;this.shapeArea[t]={shape:this.symbol(t),area:e,toCircle:Math.PI/e}})),this.dotColor=n().domain(d).range(this.rawColors);const p=[...this.rawColors];this.innerClickStyle.color&&p.push(Wt[this.innerClickStyle.color]||this.innerClickStyle.color),this.innerHoverStyle.color&&p.push(Wt[this.innerHoverStyle.color]||this.innerHoverStyle.color),this.textColor=n().domain(p).range(this.textColorArr)}validateHoverStyle(){this.innerHoverStyle=this.hoverStyle?{color:this.hoverStyle.color,strokeWidth:this.hoverStyle.strokeWidth||2}:{strokeWidth:2}}validateClickStyle(){this.innerClickStyle=this.clickStyle?{color:this.clickStyle.color,strokeWidth:this.clickStyle.strokeWidth||3}:{strokeWidth:3}}setStrokes(){this.textFilter=O({root:this.svg.node(),id:this.chartID,color:"#ffffff"}),this.filter=this.accessibility.hideStrokes?null:O({root:this.svg.node(),id:this.chartID,color:"#ffffff",strokeSizeOverride:1/(this.dotRadius||1)})}addStrokeUnder(){this.updateLabels.attr("filter",this.textFilter),this.updatePoints.attr("filter",((t,s,i)=>f(i[s]).classed("moving")?null:this.filter))}updateStrokeWidth(){this.updatePoints.attr("stroke",this.handleDotStyle)}renderRootElements(){this.svg=f(this.scatterChartEl).select(".visa-viz-d3-scatter-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.gridG=this.rootG.append("g").attr("class","scatter-grid-group"),this.dotG=this.rootG.append("g").attr("class","scatter-dot-group").attr("isolation","isolate").style("isolation","isolate"),this.fitLine=this.rootG.append("g").attr("class","scatter-fit-line-group"),this.labelG=this.rootG.append("g").attr("class","scatter-dataLabel-group"),this.legendG=f(this.scatterChartEl).select(".scatter-legend").append("svg"),this.subTitleG=f(this.scatterChartEl).select(".scatter-sub-title"),this.tooltipG=f(this.scatterChartEl).select(".scatter-tooltip"),this.references=this.rootG.append("g").attr("class","scatter-reference-line-group")}setGlobalSelections(){const t=this.dotG.selectAll(".series-point-group").data(this.nest,(t=>t.key));this.enterPointWrappers=t.enter().append("g"),this.exitPointWrappers=t.exit(),this.updatePointWrappers=t.merge(this.enterPointWrappers),this.exitSize=this.exitPointWrappers.selectAll(".data-point").size(),this.exitSize+=this.exitPointWrappers.size();const s=this.updatePointWrappers.selectAll(".data-point").data((t=>t.values));this.enterPoints=s.enter().append("path"),this.exitPoints=s.exit(),this.updatePoints=s.merge(this.enterPoints);const i=this.labelG.selectAll(".series-dataLabel-group").data(this.nest,(t=>t.key));this.enteringLabelGroups=i.enter().append("g"),this.exitingLabelGroups=i.exit(),this.updatingLabelGroups=i.merge(this.enteringLabelGroups);const h=this.updatingLabelGroups.selectAll("text").data((t=>t.values));this.enterLabels=h.enter().append("text"),this.exitLabels=h.exit(),this.updateLabels=h.merge(this.enterLabels)}setTestingAttributes(){this.unitTest?(f(this.scatterChartEl).select(".visa-viz-d3-scatter-container").attr("data-testid","chart-container"),f(this.scatterChartEl).select(".scatter-main-title").attr("data-testid","main-title"),f(this.scatterChartEl).select(".scatter-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.gridG.attr("data-testid","scatter-grid-group"),this.fitLine.attr("data-testid","scatter-fit-line-group"),this.references.attr("data-testid","scatter-reference-line-group"),this.dotG.attr("data-testid","marker-group-container"),this.updatePointWrappers.attr("data-testid","marker-series-group").attr("data-id",(t=>`marker-series-${t.key}`)),this.updatePoints.attr("data-testid","marker").attr("data-id",(t=>`marker-${t[this.groupAccessor]}-${t[this.xAccessor]}-${t[this.yAccessor]}`)),this.labelG.attr("data-testid","dataLabel-group-container"),this.updatingLabelGroups.attr("data-testid","dataLabel-series-group").attr("data-id",(t=>`label-series-${t.key}`)),this.updateLabels.attr("data-testid","dataLabel").attr("data-id",(t=>`label-${t[this.groupAccessor]}-${t[this.xAccessor]}-${t[this.yAccessor]}`)),this.svg.select("defs").attr("data-testid","pattern-defs")):(f(this.scatterChartEl).select(".visa-viz-d3-scatter-container").attr("data-testid",null),f(this.scatterChartEl).select(".scatter-main-title").attr("data-testid",null),f(this.scatterChartEl).select(".scatter-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.gridG.attr("data-testid",null),this.fitLine.attr("data-testid",null),this.references.attr("data-testid",null),this.dotG.attr("data-testid",null),this.updatePointWrappers.attr("data-testid",null).attr("data-id",null),this.updatePoints.attr("data-testid",null).attr("data-id",null),this.labelG.attr("data-testid",null),this.updatingLabelGroups.attr("data-testid",null).attr("data-id",null),this.updateLabels.attr("data-testid",null).attr("data-id",null),this.svg.select("defs").attr("data-testid",null))}enterPointGroups(){this.enterPointWrappers.interrupt(),this.enterPoints.interrupt(),this.enterPointWrappers.attr("class","series-point-group").attr("cursor",this.suppressEvents?null:this.cursor).on("mouseover",this.groupInteraction&&!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t.values?t.values[0]:t,i[s],!0):null).on("mouseout",this.groupInteraction&&!this.suppressEvents?()=>this.onMouseOutHandler():null).each(((t,s,i)=>{I(i[s])})),this.enterPoints.attr("class","data-point entering").style("mix-blend-mode","multiply").attr("filter",this.filter).each(((t,s,i)=>{I(i[s])})).on("click",((t,s,i)=>this.onClickHandler(t,i[s]))).on("mouseover",((t,s,i)=>this.onHoverHandler(t,i[s]))).on("mouseout",(()=>this.onMouseOutHandler())).attr("opacity",0).attr("stroke",this.handleDotStyle).attr("d",(t=>this.groupAccessor?xt[this.symbol(t[this.groupAccessor])].general:xt[this.dotSymbols[0]].general)).attr("transform",(t=>"translate("+this.x(t[this.xAccessor])+","+this.y(t[this.yAccessor])+") scale(1)")),this.updatePointWrappers.order(),this.updatePoints.order()}exitPointGroups(){this.exitPointWrappers.interrupt(),this.exitPoints.interrupt(),this.exitPointWrappers.transition("exit").duration(this.duration).ease(v),this.exitPointWrappers.selectAll(".data-point").attr("filter",null).transition("exit").duration(this.duration).ease(v).attr("opacity",0).attr("transform",((t,s,i)=>{const h=f(i[s]).attr("transform"),e=h.indexOf("scale(");return h.substring(0,e)+"scale(1)"})).call(At,(()=>{this.exitPointWrappers.remove()})),this.exitPoints.attr("filter",null).transition("exit").duration(this.duration).ease(v).attr("opacity",0).attr("transform",((t,s,i)=>{const h=f(i[s]).attr("transform"),e=h.indexOf("scale(");return h.substring(0,e)+"scale(1)"})),this.updatePoints.transition("accessibilityAfterExit").duration(this.duration).ease(v).call(At,(()=>{const t=U(this.rootG.node());this.exitPoints.remove(),this.exitPointWrappers.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),_({parentGNode:this.rootG.node(),focusDidExist:t})}))}drawPointGroups(){this.updatePoints.each(((t,s,i)=>{const h=f(i[s]),e=+h.attr("data-x")!==this.x(t[this.xAccessor]),a=+h.attr("data-y")!==this.y(t[this.yAccessor]),o=+h.attr("data-r")!==this.size(t[this.sizeConfig.sizeAccessor]*this.shapeArea[this.groupAccessor?t[this.groupAccessor]:""].toCircle)||this.dotRadius||1;(e||a||o)&&(h.attr("filter",null),h.classed("moving",!0))})).attr("data-r",(t=>this.size(t[this.sizeConfig.sizeAccessor]*this.shapeArea[this.groupAccessor?t[this.groupAccessor]:""].toCircle)||this.dotRadius||1)).attr("data-x",(t=>this.x(t[this.xAccessor]))).attr("data-y",(t=>this.y(t[this.yAccessor]))).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-d",(t=>this.groupAccessor?xt[this.symbol(t[this.groupAccessor])].base:xt[this.dotSymbols[0]].base)).transition("update_d").duration(this.duration).ease(v).attr("d",(t=>this.groupAccessor?xt[this.symbol(t[this.groupAccessor])].general:xt[this.dotSymbols[0]].general)).attr("transform",(t=>"translate("+this.x(t[this.xAccessor])+","+this.y(t[this.yAccessor])+") scale("+(this.size(t[this.sizeConfig.sizeAccessor]*this.shapeArea[this.groupAccessor?t[this.groupAccessor]:""].toCircle)||this.dotRadius||1)+")")).call(At,(()=>{setTimeout((()=>{this.updatePointWrappers.selectAll(".moving").classed("moving",!1).attr("filter",this.filter)}),0),_({parentGNode:this.rootG.node()}),this.transitionEndEvent.emit({chartID:this.chartID})}))}setDotRadius(){this.updatePoints.transition("radius").duration(this.duration).ease(v).attr("transform",(t=>"translate("+this.x(t[this.xAccessor])+","+this.y(t[this.yAccessor])+") scale("+(this.size(t[this.sizeConfig.sizeAccessor]*this.shapeArea[this.groupAccessor?t[this.groupAccessor]:""].toCircle)||this.dotRadius||1)+")")).call(At,(()=>{_({parentGNode:this.rootG.node()})}))}setSelectedClass(){this.updatePoints.classed("highlight",((t,s,i)=>{let h=st(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return h=!(!this.clickHighlight||!this.clickHighlight.length)&&h,Z(i[s],h,this.accessibility.elementsAreInterface),h}))}updateCursor(){this.updatePointWrappers.attr("cursor",this.suppressEvents?null:this.cursor),this.updatingLabelGroups.attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null)}reSetRoot(){Lt({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:v}).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),Lt({selection:this.root,duration:this.duration,namespace:"root_reset",easing:v}).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),Lt({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:v}).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),J(this.chartID,this.width)}drawXAxis(){at({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label||""===this.xAxis.label?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.xAccessor]?this.dataKeyNames[this.xAccessor]:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration})}drawYAxis(){at({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label&&""!==this.yAxis.label?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.yAccessor]?this.dataKeyNames[this.yAccessor]:this.yAxis.label,padding:this.padding,hide:!this.yAxis.visible,duration:this.duration})}setXAxisAccessibility(){$({rootEle:this.scatterChartEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:this.x,xAxisLabel:(this.xAxis.label||""===this.xAxis.label?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.xAccessor]?this.dataKeyNames[this.xAccessor]:this.xAxis.label)||""})}setYAxisAccessibility(){X({rootEle:this.scatterChartEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:this.y,yAxisLabel:(this.yAxis.label&&""!==this.yAxis.label?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.yAccessor]?this.dataKeyNames[this.yAccessor]:this.yAxis.label)||""})}drawBaselineY(){at({root:this.gridG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,padding:this.padding,markOffset:this.x(0)||-1,hide:!this.showBaselineY,duration:this.duration})}drawBaselineX(){at({root:this.gridG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0)||-1,hide:!this.showBaselineX,duration:this.duration})}drawXGrid(){ot(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!this.xAxis.gridVisible,this.xAxis.tickInterval,this.duration)}drawYGrid(){ot(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)}bindLegendInteractivity(){f(this.scatterChartEl).selectAll(".legend").on("click",this.legend.interactive&&!this.suppressEvents?(t,s,i)=>this.onClickHandler(t.values?t.values[0]:t,i[s]):null).on("mouseover",this.legend.interactive&&!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t.values?t.values[0]:t,i[s],!0):null).on("mouseout",this.legend.interactive&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}setLegendCursor(){f(this.scatterChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:null)}bindInteractivity(){this.enterPointWrappers.on("mouseover",this.groupInteraction&&!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t.values?t.values[0]:t,i[s],!0):null).on("mouseout",this.groupInteraction&&!this.suppressEvents?()=>this.onMouseOutHandler():null),this.updatePoints.on("click",this.suppressEvents?null:(t,s,i)=>this.onClickHandler(t,i[s])).on("mouseover",this.suppressEvents?null:(t,s,i)=>this.onHoverHandler(t,i[s])).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateLabels.on("click",this.suppressEvents?null:(t,s,i)=>this.onClickHandler(t,i[s])).on("mouseover",this.suppressEvents?null:(t,s,i)=>this.onHoverHandler(t,i[s])).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler())}enterDataLabels(){const t=this.dataLabel.visible?1:0;this.enteringLabelGroups.attr("class","series-dataLabel-group").attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null),this.enterLabels.attr("filter",this.textFilter).attr("opacity",(s=>st(s,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON)).attr("class","scatter-dataLabel entering").attr("fill",this.textFillHandler).on("click",!this.suppressEvents&&this.dataLabel.visible?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?(t,s,i)=>this.onHoverHandler(t,i[s]):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null),vt({root:this.enterLabels,xScale:this.x,yScale:this.y,sizeScale:this.size,ordinalAccessor:this.xAccessor,valueAccessor:this.yAccessor,groupAccessor:this.groupAccessor,sizeAccessor:this.sizeConfig.sizeAccessor,shapeArea:this.shapeArea,placement:this.dataLabel.placement,chartType:"scatter",labelOffset:this.dotRadius})}updateDataLabels(){this.updateLabels.interrupt();const t=this.dataLabel.visible?1:0;this.updateLabels.transition("opacity").ease(v).duration(this.duration).attr("opacity",(s=>st(s,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1)).call(At,((t,s,i)=>{f(i[s]).classed("entering",!1)}))}exitDataLabels(){this.exitingLabelGroups.selectAll(".scatter-dataLabel").attr("filter",null).transition("exit").duration(this.duration/3).ease(v).attr("opacity",0).call(At,(()=>{this.exitingLabelGroups.remove()})),this.exitLabels.attr("filter",null).transition("exit").ease(v).duration(this.duration).attr("opacity",0).remove()}drawDataLabels(){const t="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly;this.updateLabels.text((t=>nt(t,this.innerLabelAccessor,this.innerLabelFormat)));const s=this.updateLabels.style("visibility",((t,s,i)=>"auto"===this.dataLabel.placement||this.dataLabel.collisionHideOnly?f(i[s]).style("visibility"):null)).attr("data-x",(t=>this.x(t[this.xAccessor]))).attr("data-y",(t=>this.y(t[this.yAccessor]))).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).transition("update").ease(v).duration(this.duration);this.bitmaps=vt({root:s,xScale:this.x,yScale:this.y,sizeScale:this.size,ordinalAccessor:this.xAccessor,valueAccessor:this.yAccessor,groupAccessor:this.groupAccessor,sizeAccessor:this.sizeConfig.sizeAccessor,shapeArea:this.shapeArea,placement:this.dataLabel.placement,chartType:"scatter",labelOffset:this.dotRadius+.25*this.dotRadius,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,labelSelection:s,avoidMarks:[this.updatePoints],validPositions:t?["middle"]:["middle","top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:t?[1]:[1,5,4,4,1,1,1,1,1],accessors:[this.xAccessor,this.yAccessor,this.groupAccessor,"key"],size:[Tt(this.width,0),Tt(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})}updateInteractionState(){this.updatePoints.interrupt("opacity"),this.updatePoints.attr("stroke",this.handleDotStyle),this.updateLabels.attr("fill",this.textFillHandler),_({parentGNode:this.rootG.node()}),lt({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.groupAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.innerHoverStyle,clickStyle:this.innerClickStyle,hoverOpacity:this.hoverOpacity})}setPointOpacity(){this.updatePoints.interrupt(),this.updatePoints.transition("opacity").duration(((t,s,i)=>f(i[s]).classed("entering")?(f(i[s]).classed("entering",!1),this.duration):0)).ease(v).attr("opacity",(t=>st(t,this.dotOpacity,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))).call(At,((t,s,i)=>{f(i[s]).classed("entering",!1)}))}setLabelOpacity(){const t="auto"!==this.dataLabel.placement&&this.dataLabel.collisionHideOnly,s="auto"===this.dataLabel.placement||t;if(this.updateLabels.attr("data-use-dx",t).attr("data-use-dy",t).attr("opacity",((s,i,h)=>{const e=+f(h[i]).attr("opacity"),a=f(h[i]).style("visibility"),o=st(s,this.dataLabel.visible?1:0,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;return(1!==o||"hidden"!==a)&&e===o||"auto"!==this.dataLabel.placement&&!t||(1===o?f(h[i]).classed("collision-added",!0).style("visibility",null):f(h[i]).classed("collision-removed",!0)),o})),s){const s=this.updateLabels.filter(((t,s,i)=>f(i[s]).classed("collision-added"))),i=this.updateLabels.filter(((t,s,i)=>f(i[s]).classed("collision-removed")));i.size()>0&&(this.bitmaps=Dt({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[Tt(this.width,0),Tt(this.height,0)],hideOnly:!1,removeOnly:!0}),i.classed("collision-removed",!1)),s.size()>0&&(this.bitmaps=vt({root:s,xScale:this.x,yScale:this.y,sizeScale:this.size,ordinalAccessor:this.xAccessor,valueAccessor:this.yAccessor,groupAccessor:this.groupAccessor,sizeAccessor:this.sizeConfig.sizeAccessor,shapeArea:this.shapeArea,placement:this.dataLabel.placement,chartType:"scatter",labelOffset:this.dotRadius+.25*this.dotRadius,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&"auto"===this.dataLabel.placement,bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[this.updatePoints],validPositions:t?["middle"]:["middle","top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:t?[1]:[1,5,4,4,1,1,1,1,1],accessors:[this.xAccessor,this.yAccessor,this.groupAccessor,"key"],size:[Tt(this.width,0),Tt(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly,suppressMarkDraw:!0}}),s.classed("collision-added",!1))}}drawFitLine(){const t=this.showFitLine?this.fitLineStyle.opacity:0,s=this.data.map((t=>parseFloat(t[this.xAccessor]))),i=this.data.map((t=>parseFloat(t[this.yAccessor]))),h=yt(s,i),e=h[0],a=h[1],o=this.fitLine.selectAll("line").data(h),r=o.enter().append("line").attr("class","trendline").attr("opacity",0);o.merge(r).transition("update").duration(this.duration).ease(v).attr("x1",this.x(this.xMin)).attr("y1",this.y(a)).attr("x2",this.x(this.xMax)).attr("y2",this.y(this.xMax*e+a)).style("stroke",Wt[this.fitLineStyle.color]||this.fitLineStyle.color).style("stroke-width",this.fitLineStyle.strokeWidth).attr("stroke-dasharray",this.fitLineStyle.dashed?this.fitLineStyle.dashed:"").attr("opacity",t),o.exit().remove()}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,(t=>t.label)),s=t.enter().append("g").attr("class","scatter-reference").attr("opacity",1),i=s.append("line");i.attr("class","scatter-reference-line").attr("opacity",0);const h=s.append("text");h.attr("class","scatter-reference-line-label").attr("opacity",0);const e=t.merge(s),a=e.selectAll(".scatter-reference-line").data((t=>[t])).transition("merge").ease(v).duration(this.duration),o=e.selectAll(".scatter-reference-line-label").data((t=>[t])).transition("merge").ease(v).duration(this.duration).text((t=>t.label));t.exit().transition("exit").ease(v).duration(this.duration).attr("opacity",0).remove(),e.transition("merge").ease(v).duration(this.duration),i.attr("x1",(t=>"x"===t.axis?this.x(t.value):0)).attr("x2",(t=>"x"===t.axis?this.x(t.value):this.innerPaddedWidth)).attr("y1",(t=>"x"===t.axis?0:this.y(t.value))).attr("y2",(t=>"x"===t.axis?this.innerPaddedHeight:this.y(t.value))),h.attr("text-anchor",(t=>"right"===t.placement?"start":"left"===t.placement?"end":"middle")).attr("x",(t=>"right"===t.placement?this.innerPaddedWidth:"left"===t.placement?0:this.x(t.value))).attr("dx",(t=>"right"===t.placement?"0.1em":"left"===t.placement?"-0.1em":0)).attr("y",(t=>"top"===t.placement?0:"bottom"===t.placement?this.innerPaddedHeight:this.y(t.value))).attr("dy",(t=>"top"===t.placement?"-0.3em":"bottom"===t.placement?"1.3em":"0.3em")),a.attr("x1",(t=>"x"===t.axis?this.x(t.value):0)).attr("x2",(t=>"x"===t.axis?this.x(t.value):this.innerPaddedWidth)).attr("y1",(t=>"x"===t.axis?0:this.y(t.value))).attr("y2",(t=>"x"===t.axis?this.innerPaddedHeight:this.y(t.value))),o.attr("text-anchor",(t=>"right"===t.placement?"start":"left"===t.placement?"end":"middle")).attr("x",(t=>"right"===t.placement?this.innerPaddedWidth:"left"===t.placement?0:this.x(t.value))).attr("dx",(t=>"right"===t.placement?"0.1em":"left"===t.placement?"-0.1em":0)).attr("y",(t=>"top"===t.placement?0:"bottom"===t.placement?this.innerPaddedHeight:this.y(t.value))).attr("dy",(t=>"top"===t.placement?"-0.3em":"bottom"===t.placement?"1.3em":"0.3em")),a.style("stroke",Wt[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").style("opacity",this.referenceStyle.opacity),o.style("fill",Wt[this.referenceStyle.color]||this.referenceStyle.color).style("opacity",this.referenceStyle.opacity)}drawAnnotations(){Q({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.xAccessor,yScale:this.y,yAccessor:this.yAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){Y(this.getLanguageString(),this.scatterChartEl,this.annotations)}setTagLevels(){this.topLevel=St(this.highestHeadingLevel),this.bottomLevel=St(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){z({language:this.getLanguageString(),rootEle:this.scatterChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"scatter-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled,hideDataTable:this.accessibility.hideDataTableButton}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){F({chartTag:"scatter-plot",language:this.getLanguageString(),node:this.svg.node(),title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:this.innerScopeDataKeys(),dataKeyNames:this.dataKeyNames,groupAccessor:this.groupAccessor,groupName:"scatter-group",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.updatePoints.each(((t,s,i)=>{I(i[s])}))}setGeometryAriaLabels(){const t=this.innerScopeDataKeys();this.updatePoints.each(((s,i,h)=>{E({chartTag:"scatter-plot",language:this.getLanguageString(),node:h[i],geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,dataKeyNames:this.dataKeyNames,groupName:"scatter-group",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),N({node:h[i],uniqueID:this.chartID})}))}setGroupAccessibilityID(){this.updatePointWrappers.each(((t,s,i)=>{N({node:i[s],uniqueID:this.chartID})}))}setChartAccessibilityTitle(){K(this.getLanguageString(),this.scatterChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){M(this.getLanguageString(),this.scatterChartEl,this.subTitle)}setChartAccessibilityLongDescription(){j(this.getLanguageString(),this.scatterChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){G(this.getLanguageString(),this.scatterChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){H(this.getLanguageString(),this.scatterChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){V(this.getLanguageString(),this.scatterChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){q(this.getLanguageString(),this.scatterChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){B({rootEle:this.scatterChartEl,parentGNode:this.dotG.node(),chartTag:"scatter-plot",geomType:"point",groupName:"scatter group"})}setChartAccessibilityStructureNotes(){R(this.getLanguageString(),this.scatterChartEl,this.accessibility.structureNotes)}drawLegendElements(){rt({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.rawColors,baseColorArr:this.colorArr,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"scatter",fontSize:16,data:this.nest,label:this.legend.labels,symbol:this.dotSymbols,hide:!(this.legend.visible&&(this.groupAccessor!==k.groupAccessor||!this.nest||1!==this.nest.length||"undefined"!==this.nest[0].key)||!this.legend||!this.groupAccessor),interactionKeys:this.innerInteractionKeys,groupAccessor:this.groupAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.innerHoverStyle,clickStyle:this.innerClickStyle,hoverOpacity:this.hoverOpacity})}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t,s){this.clickEvent.emit({data:t,target:s})}onHoverHandler(t,s,i){mt(this.chartID,!0),this.hoverEvent.emit({data:t,target:s}),this.showTooltip&&!i&&this.eventsTooltip({data:t,evt:y,isToShow:!0})}onMouseOutHandler(){mt(this.chartID,!1),this.mouseOutEvent.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){ft(this.tooltipG)}eventsTooltip({data:t,evt:s,isToShow:i}){ct({root:this.tooltipG,data:t,event:s,isToShow:i,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,dataKeyNames:this.dataKeyNames,groupAccessor:this.groupAccessor,sizeConfig:this.sizeConfig,xAccessor:this.xAccessor,yAccessor:this.yAccessor,chartType:"scatter"})}render(){return this.drawStartEvent.emit({chartID:this.chartID}),this.init(),this.shouldSetLocalizationConfig&&(this.setLocalizationConfig(),this.shouldSetLocalizationConfig=!1),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateLayout&&(this.setLayoutData(),this.shouldUpdateLayout=!1),this.shouldValidateClickStyle&&(this.validateClickStyle(),this.shouldValidateClickStyle=!1),this.shouldValidateHoverStyle&&(this.validateHoverStyle(),this.shouldValidateHoverStyle=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidateLocalizationProps(),this.shouldValidate=!1),i("div",{class:"o-layout"},i("div",{class:"o-layout--chart"},i(this.topLevel,{class:"scatter-main-title vcl-main-title"},this.mainTitle),i(this.bottomLevel,{class:"visa-ui-text--instructions scatter-sub-title vcl-sub-title"}),i("div",{class:"scatter-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),i("keyboard-instructions",{uniqueID:this.chartID,geomType:"point",groupName:"scatter group",language:this.getLanguageString(),chartTag:"scatter-plot",width:this.width-(this.margin&&this.margin.right||0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:!0,disabled:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),i("div",{class:"visa-viz-d3-scatter-container"}),i("div",{class:"scatter-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),i("data-table",{uniqueID:this.chartID,isCompact:!0,language:this.getLanguageString(),tableColumns:this.tableColumns,data:this.tableData,dataKeyNames:this.dataKeyNames,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(k);let s=0;const i={showFitLine:{exception:!1},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:!1},groupAccessor:{exception:""},hoverOpacity:{exception:0}};for(s=0;s<t.length;s++)this[t[s]]=this[t[s]]||i[t[s]]&&this[t[s]]===i[t[s]].exception?this[t[s]]:k[t[s]]}get scatterChartEl(){return h(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["layoutWatcher"],width:["layoutWatcher"],padding:["layoutWatcher"],margin:["layoutWatcher"],xAccessor:["xAccessorWatcher"],yAccessor:["yAccessorWatcher"],sizeConfig:["sizeConfigWatcher"],groupAccessor:["groupAccessorWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],showBaselineX:["showBaselineXWatcher"],showBaselineY:["showBaselineYWatcher"],colors:["colorsWatcher"],colorPalette:["colorsWatcher"],dotRadius:["dotRadiusWatcher"],dotOpacity:["dotOpacityWatcher"],dotSymbols:["dotSymbolsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],fitLineStyle:["fitLineStyleWatcher"],cursor:["cursorWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],legend:["legendWatcher"],suppressEvents:["suppressWatcher"],annotations:["annotationsWatcher"],accessibility:["accessibilityWatcher"],localization:["localizationWatcher"],xMaxValueOverride:["xValueOverrideWatcher"],xMinValueOverride:["xValueOverrideWatcher"],yMaxValueOverride:["yValueOverrideWatcher"],yMinValueOverride:["yValueOverrideWatcher"],showFitLine:["showFitLineWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],dataKeyNames:["dataKeyNamesWatcher"],unitTest:["unitTestWatcher"]}}};window.VisaChartsLibOSSLicenses=ut(),Ot.style=".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}scatter-plot .vcl-sub-title-keyword{-webkit-padding-before:1px;padding:3px 6px 1px 6px}scatter-plot .annotations{pointer-events:none}scatter-plot .annotations .handle{pointer-events:all}scatter-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}scatter-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}scatter-plot .hidden{display:none}scatter-plot .axis{font-size:12px}scatter-plot .axis text{font:0.65rem;fill:#767676}scatter-plot .axis-label{text-anchor:middle;font:1rem sans-serif}scatter-plot .axis-mark path{color:#949494;stroke-width:0px}scatter-plot .axis path{color:#949494;stroke-width:2px}scatter-plot .axis-mark path{stroke:#767676;stroke-opacity:1}scatter-plot .grid line{stroke:#c9c9c9;stroke-opacity:0.6}scatter-plot .grid path{stroke-width:0;stroke:#767676}scatter-plot .scatter-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}scatter-plot .scatter-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}";export{Ot as scatter_plot}