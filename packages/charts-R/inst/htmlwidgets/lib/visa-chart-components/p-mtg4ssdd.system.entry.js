/**
 * Copyright (c) 2021 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
var __spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var r=Array(t),n=0,e=0;e<i;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,n++)r[n]=s[a];return r};System.register(["./p-3a3b8b8a.system.js","./p-bae7bff7.system.js"],(function(t){"use strict";var e,i,r,n,s;return{setters:[function(t){e=t.r;i=t.c;r=t.h;n=t.g},function(t){s=t.U}],execute:function(){var a="http://www.w3.org/1999/xhtml";var o={svg:"http://www.w3.org/2000/svg",xhtml:a,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function l(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return o.hasOwnProperty(e)?{space:o[e],local:t}:t}function u(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===a&&e.documentElement.namespaceURI===a?e.createElement(t):e.createElementNS(i,t)}}function h(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function c(t){var e=l(t);return(e.local?h:u)(e)}function d(){}function f(t){return t==null?d:function(){return this.querySelector(t)}}function p(t){if(typeof t!=="function")t=f(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new Kt(r,this._parents)}function y(){return[]}function v(t){return t==null?y:function(){return this.querySelectorAll(t)}}function g(t){if(typeof t!=="function")t=v(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new Kt(r,n)}function b(t){return function(){return this.matches(t)}}function m(t){if(typeof t!=="function")t=b(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new Kt(r,this._parents)}function A(t){return new Array(t.length)}function w(){return new Kt(this._enter||this._groups.map(A),this._parents)}function x(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}x.prototype={constructor:x,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function S(t){return function(){return t}}var L="$";function k(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new x(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function _(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=L+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=L+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new x(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function C(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?_:k,r=this._parents,n=this._groups;if(typeof t!=="function")t=S(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new Kt(a,r);a._enter=o;a._exit=l;return a}function D(){return new Kt(this._exit||this._groups.map(A),this._parents)}function M(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function U(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new Kt(a,this._parents)}function T(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function E(t){if(!t)t=I;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new Kt(n,this._parents).order()}function I(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function N(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function H(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function W(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function P(){var t=0;this.each((function(){++t}));return t}function G(){return!this.node()}function O(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function V(t){return function(){this.removeAttribute(t)}}function R(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Y(t,e){return function(){this.setAttribute(t,e)}}function z(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function F(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function X(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function B(t,e){var i=l(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?R:V:typeof e==="function"?i.local?X:F:i.local?z:Y)(i,e))}function K(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function q(t){return function(){this.style.removeProperty(t)}}function j(t,e,i){return function(){this.style.setProperty(t,e,i)}}function $(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function Z(t,e,i){return arguments.length>1?this.each((e==null?q:typeof e==="function"?$:j)(t,e,i==null?"":i)):Q(this.node(),t)}function Q(t,e){return t.style.getPropertyValue(e)||K(t).getComputedStyle(t,null).getPropertyValue(e)}function J(t){return function(){delete this[t]}}function tt(t,e){return function(){this[t]=e}}function et(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function it(t,e){return arguments.length>1?this.each((e==null?J:typeof e==="function"?et:tt)(t,e)):this.node()[t]}function rt(t){return t.trim().split(/^|\s+/)}function nt(t){return t.classList||new st(t)}function st(t){this._node=t;this._names=rt(t.getAttribute("class")||"")}st.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function at(t,e){var i=nt(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function ot(t,e){var i=nt(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function lt(t){return function(){at(this,t)}}function ut(t){return function(){ot(this,t)}}function ht(t,e){return function(){(e.apply(this,arguments)?at:ot)(this,t)}}function ct(t,e){var i=rt(t+"");if(arguments.length<2){var r=nt(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?ht:e?lt:ut)(i,e))}function dt(){this.textContent=""}function ft(t){return function(){this.textContent=t}}function pt(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function yt(t){return arguments.length?this.each(t==null?dt:(typeof t==="function"?pt:ft)(t)):this.node().textContent}function vt(){this.innerHTML=""}function gt(t){return function(){this.innerHTML=t}}function bt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function mt(t){return arguments.length?this.each(t==null?vt:(typeof t==="function"?bt:gt)(t)):this.node().innerHTML}function At(){if(this.nextSibling)this.parentNode.appendChild(this)}function wt(){return this.each(At)}function xt(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function St(){return this.each(xt)}function Lt(t){var e=typeof t==="function"?t:c(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function kt(){return null}function _t(t,e){var i=typeof t==="function"?t:c(t),r=e==null?kt:typeof e==="function"?e:f(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function Ct(){var t=this.parentNode;if(t)t.removeChild(this)}function Dt(){return this.each(Ct)}function Mt(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ut(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Tt(t){return this.select(t?Ut:Mt)}function Et(t){return arguments.length?this.property("__data__",t):this.node().__data__}var It={};var Nt=null;if(typeof document!=="undefined"){var Ht=document.documentElement;if(!("onmouseenter"in Ht)){It={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Wt(t,e,i){t=Pt(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function Pt(t,e,i){return function(r){var n=Nt;Nt=r;try{t.call(this,this.__data__,e,i)}finally{Nt=n}}}function Gt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function Ot(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function Vt(t,e,i){var r=It.hasOwnProperty(t.type)?Wt:Pt;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function Rt(t,e,i){var r=Gt(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?Vt:Ot;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function Yt(t,e,i){var r=K(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function zt(t,e){return function(){return Yt(this,t,e)}}function Ft(t,e){return function(){return Yt(this,t,e.apply(this,arguments))}}function Xt(t,e){return this.each((typeof e==="function"?Ft:zt)(t,e))}var Bt=[null];function Kt(t,e){this._groups=t;this._parents=e}function qt(){return new Kt([[document.documentElement]],Bt)}Kt.prototype=qt.prototype={constructor:Kt,select:p,selectAll:g,filter:m,data:C,enter:w,exit:D,join:M,merge:U,order:T,sort:E,call:N,nodes:H,node:W,size:P,empty:G,each:O,attr:B,style:Z,property:it,classed:ct,text:yt,html:mt,raise:wt,lower:St,append:Lt,insert:_t,remove:Dt,clone:Tt,datum:Et,on:Rt,dispatch:Xt};function jt(t){return typeof t==="string"?new Kt([[document.querySelector(t)]],[document.documentElement]):new Kt([[t]],Bt)}function $t(t,e){var i;if(e===undefined){for(var r=0,n=t;r<n.length;r++){var s=n[r];if(s!=null&&(i<s||i===undefined&&s>=s)){i=s}}}else{var a=-1;for(var o=0,l=t;o<l.length;o++){var s=l[o];if((s=e(s,++a,t))!=null&&(i<s||i===undefined&&s>=s)){i=s}}}return i}function Zt(t,e){var i;if(e===undefined){for(var r=0,n=t;r<n.length;r++){var s=n[r];if(s!=null&&(i>s||i===undefined&&s>=s)){i=s}}}else{var a=-1;for(var o=0,l=t;o<l.length;o++){var s=l[o];if((s=e(s,++a,t))!=null&&(i>s||i===undefined&&s>=s)){i=s}}}return i}var Qt=Math.PI,Jt=2*Qt,te=1e-6,ee=Jt-te;function ie(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function re(){return new ie}ie.prototype=re.prototype={constructor:ie,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(t,e,i,r,n,s){this._+="C"+ +t+","+ +e+","+ +i+","+ +r+","+(this._x1=+n)+","+(this._y1=+s)},arcTo:function(t,e,i,r,n){t=+t,e=+e,i=+i,r=+r,n=+n;var s=this._x1,a=this._y1,o=i-t,l=r-e,u=s-t,h=a-e,c=u*u+h*h;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=e)}else if(!(c>te));else if(!(Math.abs(h*o-l*u)>te)||!n){this._+="L"+(this._x1=t)+","+(this._y1=e)}else{var d=i-s,f=r-a,p=o*o+l*l,y=d*d+f*f,v=Math.sqrt(p),g=Math.sqrt(c),b=n*Math.tan((Qt-Math.acos((p+c-y)/(2*v*g)))/2),m=b/g,A=b/v;if(Math.abs(m-1)>te){this._+="L"+(t+m*u)+","+(e+m*h)}this._+="A"+n+","+n+",0,0,"+ +(h*d>u*f)+","+(this._x1=t+A*o)+","+(this._y1=e+A*l)}},arc:function(t,e,i,r,n,s){t=+t,e=+e,i=+i,s=!!s;var a=i*Math.cos(r),o=i*Math.sin(r),l=t+a,u=e+o,h=1^s,c=s?r-n:n-r;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null){this._+="M"+l+","+u}else if(Math.abs(this._x1-l)>te||Math.abs(this._y1-u)>te){this._+="L"+l+","+u}if(!i)return;if(c<0)c=c%Jt+Jt;if(c>ee){this._+="A"+i+","+i+",0,1,"+h+","+(t-a)+","+(e-o)+"A"+i+","+i+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u)}else if(c>te){this._+="A"+i+","+i+",0,"+ +(c>=Qt)+","+h+","+(this._x1=t+i*Math.cos(n))+","+(this._y1=e+i*Math.sin(n))}},rect:function(t,e,i,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};function ne(t){return function e(){return t}}function se(t){return t[0]}function ae(t){return t[1]}var oe=Array.prototype.slice;function le(t){return t.source}function ue(t){return t.target}function he(t){var e=le,i=ue,r=se,n=ae,s=null;function a(){var a,o=oe.call(arguments),l=e.apply(this,o),u=i.apply(this,o);if(!s)s=a=re();t(s,+r.apply(this,(o[0]=l,o)),+n.apply(this,o),+r.apply(this,(o[0]=u,o)),+n.apply(this,o));if(a)return s=null,a+""||null}a.source=function(t){return arguments.length?(e=t,a):e};a.target=function(t){return arguments.length?(i=t,a):i};a.x=function(t){return arguments.length?(r=typeof t==="function"?t:ne(+t),a):r};a.y=function(t){return arguments.length?(n=typeof t==="function"?t:ne(+t),a):n};a.context=function(t){return arguments.length?(s=t==null?null:t,a):s};return a}function ce(t,e,i,r,n){t.moveTo(e,i);t.bezierCurveTo(e=(e+r)/2,i,e,n,r,n)}function de(){return he(ce)}function fe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function pe(t){return 1-Math.sqrt(1-t*t)}var ye=s.propDefaultValues;var ve=function(){function t(){}return t}();ve.highestHeadingLevel=ye.highestHeadingLevel;ve.mainTitle="Alluvial Diagram Title";ve.subTitle="This is the alluvial diagram's subtitle";ve.height=300;ve.width=650;ve.margin={top:300*.01,bottom:300*.01,right:650*.01,left:650*.01};ve.padding={top:20,bottom:50,right:50,left:50};ve.sourceAccessor="source";ve.targetAccessor="target";ve.valueAccessor="value";ve.groupAccessor="group";ve.labelAccessor="name";ve.nodeIDAccessor="id";ve.nodeConfig={fill:false,width:12,padding:20,alignment:"left",compare:false};ve.linkConfig={visible:true,fillMode:"none",opacity:.3};ve.accessibility=ye.accessibility;ve.animationConfig=ye.animationConfig;ve.colorPalette=ye.colorPaletteCategorical;ve.dataLabel=ye.dataLabel;ve.annotations=ye.annotations;ve.hoverStyle=ye.hoverStyle;ve.clickStyle=ye.clickStyle;ve.hoverOpacity=ye.hoverOpacity;ve.cursor=ye.cursor;ve.tooltipLabel=ye.tooltipLabel;ve.showTooltip=ye.showTooltip;ve.suppressEvents=ye.suppressEvents;ve.clickHighlight=ye.clickHighlight;var ge=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var be=new Uint8Array(16);function me(){if(!ge){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return ge(be)}var Ae=[];for(var we=0;we<256;++we){Ae[we]=(we+256).toString(16).substr(1)}function xe(t,e){var i=e||0;var r=Ae;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function Se(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||me)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||xe(n)}var Le={value:function(){}};function ke(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new _e(i)}function _e(t){this._=t}function Ce(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}_e.prototype=ke.prototype={constructor:_e,on:function(t,e){var i=this._,r=Ce(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=De(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=Me(i[n],t.name,e);else if(e==null)for(n in i)i[n]=Me(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new _e(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function De(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function Me(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=Le,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var Ue=0,Te=0,Ee=0,Ie=1e3,Ne,He,We=0,Pe=0,Ge=0,Oe=typeof performance==="object"&&performance.now?performance:Date,Ve=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Re(){return Pe||(Ve(Ye),Pe=Oe.now()+Ge)}function Ye(){Pe=0}function ze(){this._call=this._time=this._next=null}ze.prototype=Fe.prototype={constructor:ze,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?Re():+i)+(e==null?0:+e);if(!this._next&&He!==this){if(He)He._next=this;else Ne=this;He=this}this._call=t;this._time=i;je()},stop:function(){if(this._call){this._call=null;this._time=Infinity;je()}}};function Fe(t,e,i){var r=new ze;r.restart(t,e,i);return r}function Xe(){Re();++Ue;var t=Ne,e;while(t){if((e=Pe-t._time)>=0)t._call.call(null,e);t=t._next}--Ue}function Be(){Pe=(We=Oe.now())+Ge;Ue=Te=0;try{Xe()}finally{Ue=0;qe();Pe=0}}function Ke(){var t=Oe.now(),e=t-We;if(e>Ie)Ge-=e,We=t}function qe(){var t,e=Ne,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:Ne=i}}He=t;je(r)}function je(t){if(Ue)return;if(Te)Te=clearTimeout(Te);var e=t-Pe;if(e>24){if(t<Infinity)Te=setTimeout(Be,t-Oe.now()-Ge);if(Ee)Ee=clearInterval(Ee)}else{if(!Ee)We=Oe.now(),Ee=setInterval(Ke,Ie);Ue=1,Ve(Be)}}function $e(t,e,i){var r=new ze;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var Ze=ke("start","end","interrupt");var Qe=[];var Je=0;var ti=1;var ei=2;var ii=3;var ri=4;var ni=5;var si=6;function ai(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;hi(t,i,{name:e,index:r,group:n,on:Ze,tween:Qe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Je})}function oi(t,e){var i=ui(t,e);if(i.state>Je)throw new Error("too late; already scheduled");return i}function li(t,e){var i=ui(t,e);if(i.state>ei)throw new Error("too late; already started");return i}function ui(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function hi(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=Fe(s,0,i.time);function s(t){i.state=ti;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==ti)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===ii)return $e(a);if(d.state===ri){d.state=si;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=si;d.timer.stop();delete r[u]}}$e((function(){if(i.state===ii){i.state=ri;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=ei;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==ei)return;i.state=ii;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=ni,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===ni){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=si;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function ci(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>ei&&r.state<ni;r.state=si;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function di(t){return this.each((function(){ci(this,t)}))}function fi(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function pi(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function yi(){}var vi=.7;var gi=1/vi;var bi="\\s*([+-]?\\d+)\\s*",mi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ai="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wi=/^#([0-9a-f]{3,8})$/,xi=new RegExp("^rgb\\("+[bi,bi,bi]+"\\)$"),Si=new RegExp("^rgb\\("+[Ai,Ai,Ai]+"\\)$"),Li=new RegExp("^rgba\\("+[bi,bi,bi,mi]+"\\)$"),ki=new RegExp("^rgba\\("+[Ai,Ai,Ai,mi]+"\\)$"),_i=new RegExp("^hsl\\("+[mi,Ai,Ai]+"\\)$"),Ci=new RegExp("^hsla\\("+[mi,Ai,Ai,mi]+"\\)$");var Di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fi(yi,Ei,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Mi,formatHex:Mi,formatHsl:Ui,formatRgb:Ti,toString:Ti});function Mi(){return this.rgb().formatHex()}function Ui(){return Yi(this).formatHsl()}function Ti(){return this.rgb().formatRgb()}function Ei(t){var e,i;t=(t+"").trim().toLowerCase();return(e=wi.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Ii(e):i===3?new Pi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?Ni(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?Ni(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=xi.exec(t))?new Pi(e[1],e[2],e[3],1):(e=Si.exec(t))?new Pi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Li.exec(t))?Ni(e[1],e[2],e[3],e[4]):(e=ki.exec(t))?Ni(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_i.exec(t))?Ri(e[1],e[2]/100,e[3]/100,1):(e=Ci.exec(t))?Ri(e[1],e[2]/100,e[3]/100,e[4]):Di.hasOwnProperty(t)?Ii(Di[t]):t==="transparent"?new Pi(NaN,NaN,NaN,0):null}function Ii(t){return new Pi(t>>16&255,t>>8&255,t&255,1)}function Ni(t,e,i,r){if(r<=0)t=e=i=NaN;return new Pi(t,e,i,r)}function Hi(t){if(!(t instanceof yi))t=Ei(t);if(!t)return new Pi;t=t.rgb();return new Pi(t.r,t.g,t.b,t.opacity)}function Wi(t,e,i,r){return arguments.length===1?Hi(t):new Pi(t,e,i,r==null?1:r)}function Pi(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}fi(Pi,Wi,pi(yi,{brighter:function(t){t=t==null?gi:Math.pow(gi,t);return new Pi(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?vi:Math.pow(vi,t);return new Pi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:Gi,formatHex:Gi,formatRgb:Oi,toString:Oi}));function Gi(){return"#"+Vi(this.r)+Vi(this.g)+Vi(this.b)}function Oi(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Vi(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function Ri(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new Fi(t,e,i,r)}function Yi(t){if(t instanceof Fi)return new Fi(t.h,t.s,t.l,t.opacity);if(!(t instanceof yi))t=Ei(t);if(!t)return new Fi;if(t instanceof Fi)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new Fi(a,o,l,t.opacity)}function zi(t,e,i,r){return arguments.length===1?Yi(t):new Fi(t,e,i,r==null?1:r)}function Fi(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}fi(Fi,zi,pi(yi,{brighter:function(t){t=t==null?gi:Math.pow(gi,t);return new Fi(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?vi:Math.pow(vi,t);return new Fi(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new Pi(Xi(t>=240?t-240:t+120,n,r),Xi(t,n,r),Xi(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Xi(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function Bi(t){return function(){return t}}function Ki(t,e){return function(i){return t+i*e}}function qi(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function ji(t){return(t=+t)===1?$i:function(e,i){return i-e?qi(e,i,t):Bi(isNaN(e)?i:e)}}function $i(t,e){var i=e-t;return i?Ki(t,i):Bi(isNaN(t)?e:t)}var Zi=function t(e){var i=ji(e);function r(t,e){var r=i((t=Wi(t)).r,(e=Wi(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=$i(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function Qi(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}var Ji=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tr=new RegExp(Ji.source,"g");function er(t){return function(){return t}}function ir(t){return function(e){return t(e)+""}}function rr(t,e){var i=Ji.lastIndex=tr.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=Ji.exec(t))&&(n=tr.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:Qi(r,n)})}i=tr.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?ir(l[0].x):er(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}var nr=180/Math.PI;var sr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ar(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*nr,skewX:Math.atan(l)*nr,scaleX:a,scaleY:o}}var or,lr,ur,hr;function cr(t){if(t==="none")return sr;if(!or)or=document.createElement("DIV"),lr=document.documentElement,ur=document.defaultView;or.style.transform=t;t=ur.getComputedStyle(lr.appendChild(or),null).getPropertyValue("transform");lr.removeChild(or);t=t.slice(7,-1).split(",");return ar(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function dr(t){if(t==null)return sr;if(!hr)hr=document.createElementNS("http://www.w3.org/2000/svg","g");hr.setAttribute("transform",t);if(!(t=hr.transform.baseVal.consolidate()))return sr;t=t.matrix;return ar(t.a,t.b,t.c,t.d,t.e,t.f)}function fr(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:Qi(t,n)},{i:l-2,x:Qi(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:Qi(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:Qi(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:Qi(t,i)},{i:o-2,x:Qi(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var pr=fr(cr,"px, ","px)","deg)");var yr=fr(dr,", ",")",")");function vr(t,e){var i,r;return function(){var n=li(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function gr(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=li(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function br(t,e){var i=this._id;t+="";if(arguments.length<2){var r=ui(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?vr:gr)(i,t,e))}function mr(t,e,i){var r=t._id;t.each((function(){var t=li(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return ui(t,r).value[e]}}function Ar(t,e){var i;return(typeof e==="number"?Qi:e instanceof Ei?Zi:(i=Ei(e))?(e=i,Zi):rr)(t,e)}function wr(t){return function(){this.removeAttribute(t)}}function xr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Sr(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function Lr(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function kr(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function _r(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Cr(t,e){var i=l(t),r=i==="transform"?yr:Ar;return this.attrTween(t,typeof e==="function"?(i.local?_r:kr)(i,r,mr(this,"attr."+t,e)):e==null?(i.local?xr:wr)(i):(i.local?Lr:Sr)(i,r,e+""))}function Dr(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function Mr(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function Ur(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=l(t);return this.tween(i,(r.local?Dr:Mr)(r,e))}function Tr(t,e){return function(){oi(this,t).delay=+e.apply(this,arguments)}}function Er(t,e){return e=+e,function(){oi(this,t).delay=e}}function Ir(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Tr:Er)(e,t)):ui(this.node(),e).delay}function Nr(t,e){return function(){li(this,t).duration=+e.apply(this,arguments)}}function Hr(t,e){return e=+e,function(){li(this,t).duration=e}}function Wr(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Nr:Hr)(e,t)):ui(this.node(),e).duration}function Pr(t,e){if(typeof e!=="function")throw new Error;return function(){li(this,t).ease=e}}function Gr(t){var e=this._id;return arguments.length?this.each(Pr(e,t)):ui(this.node(),e).ease}function Or(t){if(typeof t!=="function")t=b(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new un(r,this._parents,this._name,this._id)}function Vr(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new un(a,this._parents,this._name,this._id)}function Rr(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function Yr(t,e,i){var r,n,s=Rr(e)?oi:li;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function zr(t,e){var i=this._id;return arguments.length<2?ui(this.node(),i).on.on(t):this.each(Yr(i,t,e))}function Fr(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function Xr(){return this.on("end.remove",Fr(this._id))}function Br(t){var e=this._name,i=this._id;if(typeof t!=="function")t=f(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;ai(u[d],e,i,d,u,ui(h,i))}}}return new un(s,this._parents,e,i)}function Kr(t){var e=this._name,i=this._id;if(typeof t!=="function")t=v(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=ui(h,i),y=0,g=d.length;y<g;++y){if(f=d[y]){ai(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new un(s,a,e,i)}var qr=qt.prototype.constructor;function jr(){return new qr(this._groups,this._parents)}function $r(t,e){var i,r,n;return function(){var s=Q(this,t),a=(this.style.removeProperty(t),Q(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function Zr(t){return function(){this.style.removeProperty(t)}}function Qr(t,e,i){var r,n;return function(){var s=Q(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function Jr(t,e,i){var r,n,s;return function(){var a=Q(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),Q(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function tn(t,e,i){var r=(t+="")==="transform"?pr:Ar;return e==null?this.styleTween(t,$r(t,r)).on("end.style."+t,Zr(t)):this.styleTween(t,typeof e==="function"?Jr(t,r,mr(this,"style."+t,e)):Qr(t,r,e+""),i)}function en(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function rn(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,en(t,e,i==null?"":i))}function nn(t){return function(){this.textContent=t}}function sn(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function an(t){return this.tween("text",typeof t==="function"?sn(mr(this,"text",t)):nn(t==null?"":t+""))}function on(){var t=this._name,e=this._id,i=cn();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=ui(l,e);ai(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new un(r,this._parents,t,i)}var ln=0;function un(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function hn(t){return qt().transition(t)}function cn(){return++ln}var dn=qt.prototype;un.prototype=hn.prototype={constructor:un,select:Br,selectAll:Kr,filter:Or,merge:Vr,selection:jr,transition:on,call:dn.call,nodes:dn.nodes,node:dn.node,size:dn.size,empty:dn.empty,each:dn.each,on:zr,attr:Cr,attrTween:Ur,style:tn,styleTween:rn,text:an,remove:Xr,tween:br,delay:Ir,duration:Wr,ease:Gr};var fn={time:null,delay:0,duration:250,ease:fe};function pn(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return fn.time=Re(),fn}}return i}function yn(t){var e,i;if(t instanceof un){e=t._id,t=t._name}else{e=cn(),(i=fn).time=Re(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){ai(l,t,e,u,a,i||pn(l,e))}}}return new un(r,this._parents,t,e)}qt.prototype.interrupt=di;qt.prototype.transition=yn;var vn=s.initializeDescriptionRoot,gn=s.setAccessibilityController,bn=s.initializeElementAccess,mn=s.setElementFocusHandler,An=s.setElementAccessID,wn=s.setAccessChartCounts,xn=s.hideNonessentialGroups,Sn=s.setAccessTitle,Ln=s.setAccessSubtitle,kn=s.setAccessLongDescription,_n=s.setAccessExecutiveSummary,Cn=s.setAccessPurpose,Dn=s.setAccessContext,Mn=s.setAccessStatistics,Un=s.setAccessStructure,Tn=s.setAccessAnnotation,En=s.retainAccessFocus,In=s.checkAccessFocus,Nn=s.setElementInteractionAccessState,Hn=s.setAccessibilityDescriptionWidth,Wn=s.roundTo,Pn=s.resolveLabelCollision,Gn=s.transitionEndAll,On=s.annotate,Vn=s.checkClicked,Rn=s.checkInteraction,Yn=s.convertVisaColor,zn=s.createTextStrokeFilter,Fn=s.drawTooltip,Xn=s.findTagLevel,Bn=s.formatDataLabel,Kn=s.getColors,qn=s.getPadding,jn=s.initTooltipStyle,$n=s.overrideTitleTooltip,Zn=s.scopeDataKeys,Qn=s.chartAccessors,Jn=s.sankey,ts=s.sankeyCenter,es=s.sankeyJustify,is=s.sankeyLeft,rs=s.sankeyLinkHorizontal,ns=s.sankeyRight,ss=s.prepareRenderChange;var as=t("alluvial_diagram",function(){function t(t){e(this,t);this.mainTitle=ve.mainTitle;this.subTitle=ve.subTitle;this.height=ve.height;this.width=ve.width;this.highestHeadingLevel=ve.highestHeadingLevel;this.margin=ve.margin;this.padding=ve.padding;this.sourceAccessor=ve.sourceAccessor;this.targetAccessor=ve.targetAccessor;this.valueAccessor=ve.valueAccessor;this.groupAccessor=ve.groupAccessor;this.nodeIDAccessor=ve.nodeIDAccessor;this.nodeConfig=ve.nodeConfig;this.linkConfig=ve.linkConfig;this.colorPalette=ve.colorPalette;this.hoverStyle=ve.hoverStyle;this.clickStyle=ve.clickStyle;this.cursor=ve.cursor;this.hoverOpacity=ve.hoverOpacity;this.animationConfig=ve.animationConfig;this.dataLabel=ve.dataLabel;this.showTooltip=ve.showTooltip;this.tooltipLabel=ve.tooltipLabel;this.accessibility=ve.accessibility;this.annotations=ve.annotations;this.suppressEvents=ve.suppressEvents;this.clickHighlight=ve.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.innerInteractionKeys=[];this.topLevel="h2";this.bottomLevel="p";this.sourceLinksString="sourceLinks";this.targetLinksString="targetLinks";this.shouldSetDimensions=false;this.shouldUpdateData=false;this.shouldSetColors=false;this.shouldSetTagLevels=false;this.shouldRedrawWrapper=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetSelectionClass=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetGlobalSelections=false;this.shouldSetTestingAttributes=false;this.shouldDrawInteractionState=false;this.shouldEnterUpdateExit=false;this.shouldUpdateNodeGeometries=false;this.shouldUpdateLinkGeometries=false;this.shouldDrawNodeLabels=false;this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.linkDataWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.nodeDataWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.idWatcher=function(t,e){this.chartID=t||"alluvial-diagram-"+Se();this.alluvialDiagramEl.id=this.chartID};t.prototype.mainTitleWatcher=function(t,e){};t.prototype.subTitleWatcher=function(t,e){};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.sourceAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.targetAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.valueAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.groupAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.nodeIDAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.nodeConfigWatcher=function(t,e){this.shouldEnterUpdateExit=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.linkConfigWatcher=function(t,e){this.shouldEnterUpdateExit=true;this.shouldUpdateNodeGeometries=true;this.shouldUpdateLinkGeometries=true;this.shouldDrawNodeLabels=true};t.prototype.colorPaletteWatcher=function(t,e){};t.prototype.colorsWatcher=function(t,e){};t.prototype.clickStyleWatcher=function(t,e){};t.prototype.hoverStyleWatcher=function(t,e){};t.prototype.cursorWatcher=function(t,e){};t.prototype.hoverOpacityWatcher=function(t,e){};t.prototype.dataLabelWatcher=function(t,e){this.shouldDrawNodeLabels=true;this.shouldDrawInteractionState=true};t.prototype.tooltipLabelWatcher=function(t,e){};t.prototype.showTooltipWatcher=function(t,e){};t.prototype.accessibilityWatcher=function(t,e){var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldSetAnnotationAccessibility=true};t.prototype.clickWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.hoverWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.interactionWatcher=function(t,e){};t.prototype.suppressWatcher=function(t,e){};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"alluvial-diagram-"+Se();t.alluvialDiagramEl.id=t.chartID;t.setTagLevels();t.setDimensions();t.prepareData();t.validateIdAccessor();t.validateLabelText();t.validateLinkFillMode();t.validateNodeAlignment();t.validateInteractionKeys();t.validateLinkGroups();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTooltipInitialStyle();t.setNodesDimensions();t.callSankeyGenerator();t.setGlobalSelections();t.setTestingAttributes();t.enterLinkGeometries();t.updateLinkGeometries();t.exitLinkGeometries();t.enterNodeGeometries();t.updateNodeGeometries();t.exitNodeGeometries();t.enterNodeLabels();t.updateNodeLabels();t.exitNodeLabels();t.drawNodeGeometries();t.drawLinkGeometries();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.setGroupAccessibilityID();t.setChartCountAccessibility();t.setSelectedClass();t.drawNodeLabels();t.drawAnnotations();t.setAnnotationAccessibility();t.duration=750;t.defaults=false;xn(t.root.node(),null);e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;t.reSetRoot();if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}t.setNodesDimensions();t.callSankeyGenerator();t.setGlobalSelections();if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldEnterUpdateExit){t.enterLinkGeometries();t.updateLinkGeometries();t.exitLinkGeometries();t.enterNodeGeometries();t.updateNodeGeometries();t.exitNodeGeometries();t.enterNodeLabels();t.updateNodeLabels();t.exitNodeLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateNodeGeometries){t.drawNodeGeometries();t.shouldUpdateNodeGeometries=false}if(t.shouldUpdateLinkGeometries){t.drawLinkGeometries();t.shouldUpdateLinkGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldDrawNodeLabels){t.drawNodeLabels();t.shouldDrawNodeLabels=false}t.drawAnnotations();if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}e("component did update")}))};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?qn(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.prepareData=function(){var t=this;this.nodeList=[];this.linkList=[];this.linkData.forEach((function(e,i){var r={source:e[t.sourceAccessor],target:e[t.targetAccessor],value:e[t.valueAccessor],data:e};r[t.groupAccessor]=e[t.groupAccessor];t.linkList[i]=r}));this.nodeData&&this.nodeData.length>1?this.nodeList=this.nodeData:this.createNodeList()};t.prototype.createNodeList=function(){var t=this;this.nodeList=[];this.linkData.map((function(e){if(!t.nodeList.some((function(i){return i.id===e[t.sourceAccessor]}))){var i={id:e[t.sourceAccessor]};t.nodeList.push(i)}if(!t.nodeList.some((function(i){return i.id===e[t.targetAccessor]}))){var r={id:e[t.targetAccessor]};t.nodeList.push(r)}}))};t.prototype.validateLabelText=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:"value"};t.prototype.validateIdAccessor=function(){this.innerIDAccessor=this.nodeData&&this.nodeData.length>1?this.nodeList[0][this.nodeIDAccessor]?this.nodeIDAccessor:"id":"id"};t.prototype.validateLinkFillMode=function(){this.innerLinkFillMode=this.groupAccessor&&this.linkConfig.fillMode==="group"?"group":this.linkConfig.fillMode==="source"?"source":this.linkConfig.fillMode==="target"?"target":this.linkConfig.fillMode==="path"?"path":"none"};t.prototype.validateNodeAlignment=function(){this.innerNodeAlignment=this.nodeConfig.alignment==="right"?ns:this.nodeConfig.alignment==="center"?ts:this.nodeConfig.alignment==="justify"?es:is};t.prototype.validateInteractionKeys=function(){this.interactionKeysWithObjs=[];this.innerInteractionKeys=[];this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.sourceAccessor,this.targetAccessor]};t.prototype.validateLinkGroups=function(){var t=this;this.groupKeys=[];if(this.groupAccessor){this.groupKeys=this.linkData.map((function(e){return e[t.groupAccessor]})).filter((function(t,e,i){return i.indexOf(t)===e}))}};t.prototype.setNodesDimensions=function(){var t=this;this.alluvialProperties=Jn(this.nodeConfig.compare,this.linkConfig.visible).nodeId((function(e){return e[t.innerIDAccessor]})).nodeWidth(this.nodeConfig.width).nodePadding(this.nodeConfig.padding).nodeAlign(this.innerNodeAlignment).nodeSort(null).size([this.innerPaddedWidth,this.innerPaddedHeight])};t.prototype.callSankeyGenerator=function(){var t=this;var e=function(e,i){return t.alluvialProperties({nodes:e.map((function(t){return Object.assign({},t)})),links:i.map((function(t){return Object.assign({},t)}))})};this.preppedData=e(this.nodeList,this.linkList);this.nodeCount=$t(this.preppedData.nodes,(function(t){return t.layer}))};t.prototype.renderRootElements=function(){this.svg=jt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").append("svg").attr("width",this.width).attr("height",this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.nodeG=this.rootG.append("g").attr("class","alluvial-node-group");this.linkG=this.rootG.append("g").attr("class","alluvial-link-group");this.labelG=this.rootG.append("g").attr("class","alluvial-dataLabel-group");this.tooltipG=jt(this.alluvialDiagramEl).select(".alluvial-tooltip")};t.prototype.reSetRoot=function(){var t=ss({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:pe});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=ss({selection:this.root,duration:this.duration,namespace:"root_reset",easing:pe});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=ss({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:pe});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");Hn(this.chartID,this.width)};t.prototype.setGlobalSelections=function(){var t=this;if(this.currentNodeLayers){this.previousNodeLayers=this.currentNodeLayers}var e=this.nodeG.selectAll(".node-wrapper").data(this.preppedData.nodes,(function(e){return e[t.innerIDAccessor]}));this.enterNodes=e.enter().append("g").attr("class","node-wrapper").attr("data-offset-group","true");this.enterNodes.append("rect").attr("class","alluvial-node");this.exitNodes=e.exit();this.updateNodes=e.merge(this.enterNodes);this.updateNodes.selectAll(".alluvial-node").data((function(t){return[t]}));this.currentNodeLayers=this.preppedData.nodes;if(this.previousNodeLayers){var i=this.currentNodeLayers.filter((function(e){return t.previousNodeLayers.map((function(e){return e[t.innerIDAccessor]})).includes(e.id)}));this.previousMaxNodeLayer=$t(i,(function(t){return t.layer}));this.previousMinNodeLayer=Zt(i,(function(t){return t.layer}));var r=this.previousNodeLayers.filter((function(e){return t.currentNodeLayers.map((function(e){return e[t.innerIDAccessor]})).includes(e.id)}));this.currentMaxNodeLayer=$t(r,(function(t){return t.layer}));this.currentMinNodeLayer=Zt(r,(function(t){return t.layer}))}if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateNodes.each((function(t,e,i){bn(i[e])}));var n=this.preppedData.nodes;var s=this.linkG.selectAll(".alluvial-link-wrapper").data(n,(function(e){return e[t.innerIDAccessor]}));this.enterLinkGroups=s.enter().append("g");this.exitLinkGroups=s.exit().remove();this.updateLinkGroups=s.merge(this.enterLinkGroups);var a=this.updateLinkGroups.selectAll(".alluvial-link").data((function(t){return t.sourceLinks}),(function(e){return e.data[t.sourceAccessor]+e.data[t.targetAccessor]}));this.enterLinks=a.enter().append("path");this.exitLinks=a.exit();this.updateLinks=a.merge(this.enterLinks).attr("data-offset-element",this.innerLinkFillMode)}else{this.updateNodes.attr("tabindex",null);var a=this.linkG.selectAll(".alluvial-link").data(this.preppedData.links,(function(e){return e.data[t.sourceAccessor]+e.data[t.targetAccessor]}));this.enterLinks=a.enter().append("path");this.exitLinks=a.exit();this.updateLinks=a.merge(this.enterLinks).attr("data-offset-element",null)}var o=this.labelG.selectAll("text").data(this.preppedData.nodes,(function(e){return e[t.innerIDAccessor]}));this.enteringLabels=o.enter().append("text");this.exitingLabels=o.exit();this.updatingLabels=o.merge(this.enteringLabels)};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){jt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid","chart-container");jt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid","main-title");jt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.tooltipG.attr("data-testid","tooltip-container");this.updateNodes.attr("data-testid","node").attr("data-id",(function(e){return"node-"+e[t.innerIDAccessor]}));if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateLinkGroups.attr("data-testid","alluvial-link-group").attr("data-id",(function(e){return"link-group-"+e[t.innerIDAccessor]}))}this.updateLinks.attr("data-testid","link").attr("data-id",(function(e){return"link-"+e.source[t.innerIDAccessor]+"-"+e.target[t.innerIDAccessor]}));this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",(function(e){return"dataLabel-"+e[t.innerIDAccessor]}))}else{jt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid",null);jt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid",null);jt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.updateNodes.attr("data-testid",null).attr("data-id",null);if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateLinkGroups.attr("data-testid",null).attr("data-id",null)}this.updateLinks.attr("data-testid",null).attr("data-id",null);this.updatingLabels.attr("data-testid",null).attr("data-id",null)}};t.prototype.newColumnInterpolationPosition=function(){var t=this;return de().source((function(e){return e.target.layer<=t.previousMinNodeLayer?[e.source.x0,e.y0]:e.source.layer>=t.previousMaxNodeLayer?[e.target.x1,e.y0]:[e.source.x1,e.y0]})).target((function(e){return e.target.layer<=t.previousMinNodeLayer?[e.source.x0,e.y0]:e.source.layer>=t.previousMaxNodeLayer?[e.target.x1,e.y0]:[e.target.x0,e.y1]}))};t.prototype.enterLinkGeometries=function(){var t=this;this.enterLinks.interrupt();var e=this.linkConfig.visible?this.linkConfig.opacity:0;if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.enterLinkGroups.attr("class","alluvial-link-wrapper")}this.enterLinks.attr("class","alluvial-link").classed("entering",true).attr("d",this.newColumnInterpolationPosition());this.enterLinks.attr("cursor",!this.suppressEvents?this.cursor:null).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("stroke-dasharray",(function(e,i,r){e.linelength=r[i].getTotalLength()-2;return e.target.layer<=t.previousMinNodeLayer||e.source.layer>=t.previousMaxNodeLayer?"":e.linelength+" "+e.linelength})).attr("stroke-dashoffset",(function(e){return e.target.layer<=t.previousMinNodeLayer||e.source.layer>=t.previousMaxNodeLayer?0:e.linelength})).attr("stroke-width",(function(e){return e.target.layer<=t.previousMinNodeLayer||e.source.layer>=t.previousMaxNodeLayer?Math.max(1,e.width):.1})).attr("stroke-opacity",e).transition("enter").duration(this.duration).ease(pe).attr("d",rs()).attr("stroke-width",(function(e){return e.target.layer<=t.previousMinNodeLayer||e.source.layer>=t.previousMaxNodeLayer?Math.max(1,e.width):1})).attr("stroke-dashoffset",0)};t.prototype.updateLinkGeometries=function(){var t=this;this.updateLinks.interrupt();var e=this.linkConfig.visible?this.linkConfig.opacity:0;this.updateLinks.transition("opacity").ease(pe).duration(this.duration).attr("stroke-opacity",(function(i){return Rn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))};t.prototype.exitLinkGeometries=function(){var t=this;this.exitLinks.interrupt();var e=this.linkConfig.visible?this.linkConfig.opacity:0;this.exitLinks.attr("stroke-dasharray",(function(e,i,r){e.linelength=r[i].getTotalLength();return e.target.layer<=t.previousMinNodeLayer||e.source.layer>=t.previousMaxNodeLayer?"":e.linelength+" "+e.linelength})).transition("exit").ease(pe).duration(this.duration).attr("d",this.newColumnInterpolationPosition()).attr("stroke-opacity",e).attr("stroke-dashoffset",(function(t){return t.linelength})).attr("stroke-width",(function(e){return e.target.layer<=t.currentMinNodeLayer||e.source.layer>=t.currentMaxNodeLayer?Math.max(1,e.width):.1})).remove()};t.prototype.drawLinkGeometries=function(){var t=this;this.removeTemporaryClickedLinks(this.svg.node());if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateLinkGroups.classed("link-group offset-target",true)}this.updateLinks.attr("stroke",(function(e){return t.innerLinkFillMode==="group"?t.colorArr[t.groupKeys.indexOf(e[t.groupAccessor])]:t.innerLinkFillMode==="none"?t.colorArr[0]||"#E4E4E4":t.innerLinkFillMode==="path"?t.colorArr[e.index]:t.innerLinkFillMode==="source"?t.colorArr[e.source.index]:t.colorArr[e.target.index]})).attr("fill","none").transition("update").duration(this.duration).ease(pe).attr("d",rs()).attr("stroke-width",(function(t){return Math.max(1,t.width)})).call(Gn,(function(){t.removeTemporaryClickedLinks(t.svg.node());t.updateLinks.classed("entering",false).attr("d",rs()).attr("stroke-dasharray","");t.updateLinks.each((function(e,i,r){var n=t.clickHighlight&&t.clickHighlight.length>0&&Vn(e.data,t.clickHighlight,t.innerInteractionKeys);if(n){t.drawDuplicateClickedLink(r[i],e)}}))}));this.updateLinks.transition("accessibilityAfterExit").duration(this.duration).ease(pe).call(Gn,(function(){var e=In(t.rootG.node());t.exitLinks.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();En({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawDuplicateClickedLink=function(t,e){var i=t;var r="vcl-accessibility-focus";var n=i.parentNode;var s=i.cloneNode();jt(s).classed("alluvial-link",false).classed(r+"-highlight "+r+"-hover",true).classed("duplicated-clicked-link",true).classed("entering",false).data([e.data]).attr("focusable",false).attr("aria-label",null).attr("aria-hidden",true).attr("role",null).style("pointer-events","none").attr("tabindex",null);if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){var a=n.parentNode;var o=jt(a).selectAll(".link-group")._groups[0];var l=o[o.length-1];l.appendChild(s)}else{n.appendChild(s)}};t.prototype.removeTemporaryClickedLinks=function(t){jt(t).selectAll(".duplicated-clicked-link").remove()};t.prototype.enterNodeGeometries=function(){var t=this;this.enterNodes.interrupt();if(!this.defaults){this.enterNodes.classed("entering",true)}this.enterNodes.select(".alluvial-node").attr("fill",(function(e,i){return t.nodeConfig.fill?t.colorArr[i]||t.colorArr[0]:"#E4E4E4"})).attr("stroke","#717171").attr("stroke-width","1px").attr("x",(function(t){return t.x0})).attr("y",(function(t){return t.y0})).attr("height",(function(t){return t.y1-t.y0})).attr("opacity",0).attr("width",(function(t){return t.x1-t.x0}))};t.prototype.updateNodeGeometries=function(){var t=this;this.updateNodes.interrupt();this.updateNodes.select(".alluvial-node").transition("node_opacity").duration((function(e,i,r){if(jt(r[i].parentNode).classed("entering")){return t.duration/3}return 0})).delay((function(e,i,r){return jt(r[i].parentNode).classed("entering")?t.duration/1.2:0})).ease(pe).attr("opacity",1)};t.prototype.exitNodeGeometries=function(){this.exitNodes.interrupt();this.exitNodes.select(".alluvial-node").transition("exit").ease(pe).duration(this.duration/3).attr("opacity",0).attr("width",0).select((function(){return this.parentNode})).remove()};t.prototype.drawNodeGeometries=function(){var t=this;this.updateNodes.select(".alluvial-node").transition("update_nodes").duration((function(e,i,r){return jt(r[i].parentNode).classed("entering")?t.duration/3:t.duration})).delay((function(e,i,r){return jt(r[i].parentNode).classed("entering")?t.duration/1.2:0})).ease(pe).attr("x",(function(t){return t.x0})).attr("y",(function(t){return t.y0})).attr("height",(function(t){return t.y1-t.y0})).attr("width",(function(t){return t.x1-t.x0})).attr("opacity",1).call(Gn,(function(){t.updateNodes.classed("entering",false)}))};t.prototype.enterNodeLabels=function(){var t=this;this.enteringLabels.interrupt();var e=this.dataLabel.visible?1:0;var i=this.dataLabel.visible?Number.EPSILON:0;this.widthAllNodesNoLinks=this.nodeCount*this.nodeConfig.width+this.nodeCount*this.nodeConfig.width;this.noLinksLeftPadding=(this.innerPaddedWidth-this.widthAllNodesNoLinks)/2;this.enteringLabels.attr("class","alluvial-diagram-dataLabel entering").attr("opacity",(function(r){if(t.linkConfig.visible){var n=true;if(r[t.sourceLinksString].length){n=r[t.sourceLinksString].some((function(i){return Rn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}if(r[t.targetLinksString].length){n=r[t.targetLinksString].some((function(i){return Rn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}return n?i:0}else{return r.layer===0?i:r.layer===t.nodeCount?i:0}})).attr("x",(function(e){if(t.linkConfig.visible){return t.dataLabel.placement==="outside"?e.x0<t.innerPaddedWidth/2?e.x0:e.x1:e.x0<t.innerPaddedWidth/2?e.x1:e.x0}else{return e.x0<t.innerPaddedWidth/2?t.noLinksLeftPadding:t.noLinksLeftPadding+t.widthAllNodesNoLinks+t.nodeConfig.width}})).attr("y",(function(t){return(t.y1+t.y0)/2})).attr("dx",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"-0.5em":"0.5em":e.x0<t.innerPaddedWidth/2?"0.5em":"-0.5em"})).attr("dy","0.4em").attr("text-anchor",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"end":"start":e.x0<t.innerPaddedWidth/2?"start":"end"}))};t.prototype.updateNodeLabels=function(){var t=this;this.updatingLabels.interrupt("label_opacity");var e=this.dataLabel.visible?1:0;this.updatingLabels.transition("label_opacity").ease(pe).duration((function(e,i,r){if(jt(r[i]).classed("entering")){return t.duration/3}return 0})).delay((function(e,i,r){return jt(r[i]).classed("entering")?t.duration/1.2:0})).attr("opacity",(function(i){if(t.linkConfig.visible){var r=true;if(i[t.sourceLinksString].length){r=i[t.sourceLinksString].some((function(i){return Rn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}if(i[t.targetLinksString].length){r=i[t.targetLinksString].some((function(i){return Rn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}return r?1:0}else{return i.layer===0?e:i.layer===t.nodeCount?e:0}}))};t.prototype.exitNodeLabels=function(){this.exitingLabels.interrupt();this.exitingLabels.transition("exit_labels").duration(this.duration/3).ease(pe).attr("opacity",0).remove()};t.prototype.addStrokeUnder=function(){var t=zn({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.updatingLabels.attr("filter",t)};t.prototype.drawNodeLabels=function(){var t=this;var e=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;this.widthAllNodesNoLinks=this.nodeCount*this.nodeConfig.width+this.nodeCount*this.nodeConfig.width;this.noLinksLeftPadding=(this.innerPaddedWidth-this.widthAllNodesNoLinks)/2;var i=this.updatingLabels.text((function(e){return t.dataLabel.format?Bn(e,t.innerLabelAccessor,t.dataLabel.format):e[t.innerLabelAccessor]})).attr("data-x",(function(e){if(t.linkConfig.visible){return t.dataLabel.placement==="outside"?e.x0<t.innerPaddedWidth/2?e.x0:e.x1:e.x0<t.innerPaddedWidth/2?e.x1:e.x0}else{return e.x0<t.innerPaddedWidth/2?t.noLinksLeftPadding:t.noLinksLeftPadding+t.widthAllNodesNoLinks+t.nodeConfig.width}})).attr("data-y",(function(t){return(t.y1+t.y0)/2})).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-use-dx",e).attr("data-use-dy",e).attr("dx",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"-0.5em":"0.5em":e.x0<t.innerPaddedWidth/2?"0.5em":"-0.5em"})).attr("dy","0.4em").transition("update_labels").duration((function(e,i,r){return jt(r[i]).classed("entering")?t.duration/3:t.duration})).delay((function(e,i,r){return jt(r[i]).classed("entering")?t.duration/1.2:0})).ease(pe);if(this.dataLabel.visible&&(this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly)){var r=this.dataLabel&&this.dataLabel.collisionPlacement;var n=this.updateNodes.select(".alluvial-node").attr("data-x",(function(t){return t.x0})).attr("data-y",(function(t){return t.y0})).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-height",(function(t){return t.y1-t.y0})).attr("data-width",(function(t){return t.x1-t.x0})).each((function(i,n,s){if(!e){var a=s[n];var o=a.parentNode;var l="alluvial-node-collision-clone";var u=a.cloneNode();jt(u).classed("alluvial-node",false).classed(l,true).classed("entering",false).data([i]).attr("focusable",false).attr("aria-label",null).attr("aria-hidden",true).attr("role",null).style("pointer-events","none").style("visibility","hidden").attr("tabindex",null).attr("data-x",r==="all"?i.x0:r==="outside"?i.x0<t.innerPaddedWidth/2?i.x0:i.x1:i.x0<t.innerPaddedWidth/2?i.x1:i.x0).attr("data-width",r==="all"?i.x1-i.x0:1);o.appendChild(u)}}));var s=this.updateNodes.select(".alluvial-node-collision-clone");this.bitmaps=Pn({labelSelection:i,avoidMarks:e?[n]:[n,s],validPositions:e?["middle"]:["left","right"],offsets:e?[1]:[4,4],accessors:[this.innerIDAccessor],size:[Wn(this.width,0),Wn(this.height,0)],hideOnly:this.dataLabel.visible&&e});s.remove();if(e){i.attr("text-anchor",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"end":"start":e.x0<t.innerPaddedWidth/2?"start":"end"})).attr("x",(function(e){if(t.linkConfig.visible){return t.dataLabel.placement==="outside"?e.x0<t.innerPaddedWidth/2?e.x0:e.x1:e.x0<t.innerPaddedWidth/2?e.x1:e.x0}else{return e.x0<t.innerPaddedWidth/2?t.noLinksLeftPadding:t.noLinksLeftPadding+t.widthAllNodesNoLinks+t.nodeConfig.width}})).attr("y",(function(t){return(t.y1+t.y0)/2})).attr("dx",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"-0.5em":"0.5em":e.x0<t.innerPaddedWidth/2?"0.5em":"-0.5em"})).attr("dy","0.4em")}}else{i.attr("text-anchor",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"end":"start":e.x0<t.innerPaddedWidth/2?"start":"end"})).attr("x",(function(e){if(t.linkConfig.visible){return t.dataLabel.placement==="outside"?e.x0<t.innerPaddedWidth/2?e.x0:e.x1:e.x0<t.innerPaddedWidth/2?e.x1:e.x0}else{return e.x0<t.innerPaddedWidth/2?t.noLinksLeftPadding:t.noLinksLeftPadding+t.widthAllNodesNoLinks+t.nodeConfig.width}})).attr("y",(function(t){return(t.y1+t.y0)/2})).attr("dx",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"-0.5em":"0.5em":e.x0<t.innerPaddedWidth/2?"0.5em":"-0.5em"})).attr("dy","0.4em")}i.call(Gn,(function(){t.updatingLabels.classed("entering",false);t.addStrokeUnder()}))};t.prototype.updateInteractionState=function(){var t=this;this.removeTemporaryClickedLinks(this.svg.node());this.updateLinks.interrupt("opacity");this.updatingLabels.interrupt("label_opacity");var e=this.linkConfig.visible?this.linkConfig.opacity:0;var i=this.dataLabel.visible?1:0;var r=this.dataLabel.visible&&(this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly);var n=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;this.updateLinks.attr("stroke-opacity",(function(i){return Rn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}));this.updateLinks.each((function(e,i,r){var n=t.clickHighlight&&t.clickHighlight.length>0&&Vn(e.data,t.clickHighlight,t.innerInteractionKeys);if(n){t.drawDuplicateClickedLink(r[i],e)}}));this.updatingLabels.attr("opacity",(function(e,n,s){var a=+jt(s[n]).attr("opacity");var o=jt(s[n]).style("visibility");var l;if(t.linkConfig.visible){var u=true;if(e[t.sourceLinksString].length){u=e[t.sourceLinksString].some((function(e){return Rn(e.data,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}if(e[t.targetLinksString].length){u=e[t.targetLinksString].some((function(e){return Rn(e.data,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}l=u?i:0}else{l=e.layer===0?i:e.layer===t.nodeCount?i:0}if((l===1&&o==="hidden"||a!==l)&&r){if(l===1){jt(s[n]).classed("collision-added",true).style("visibility",null)}else{jt(s[n]).classed("collision-removed",true)}}return l}));if(r){var s=this.updatingLabels.filter((function(t,e,i){return jt(i[e]).classed("collision-added")}));var a=this.updatingLabels.filter((function(t,e,i){return jt(i[e]).classed("collision-removed")})).attr("data-use-dx",n).attr("data-use-dy",n);if(a.size()>0){this.bitmaps=Pn({bitmaps:this.bitmaps,labelSelection:a,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[Wn(this.width,0),Wn(this.height,0)],hideOnly:false,removeOnly:true});a.classed("collision-removed",false)}if(s.size()>0){var o=this.dataLabel&&this.dataLabel.collisionPlacement;var l=this.updateNodes.select(".alluvial-node").attr("data-x",(function(t){return t.x0})).attr("data-y",(function(t){return t.y0})).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-height",(function(t){return t.y1-t.y0})).attr("data-width",(function(t){return t.x1-t.x0})).each((function(e,i,r){if(!n){var s=r[i];var a=s.parentNode;var l="alluvial-node-collision-clone";var u=s.cloneNode();jt(u).classed("alluvial-node",false).classed(l,true).classed("entering",false).data([e]).attr("focusable",false).attr("aria-label",null).attr("aria-hidden",true).attr("role",null).style("pointer-events","none").style("visibility","hidden").attr("tabindex",null).attr("data-x",o==="all"?e.x0:o==="outside"?e.x0<t.innerPaddedWidth/2?e.x0:e.x1:e.x0<t.innerPaddedWidth/2?e.x1:e.x0).attr("data-width",o==="all"?e.x1-e.x0:1);a.appendChild(u)}}));var u=this.updateNodes.select(".alluvial-node-collision-clone");this.bitmaps=Pn({labelSelection:s,bitmaps:this.bitmaps,avoidMarks:n?[l]:[l,u],validPositions:n?["middle"]:["left","right"],offsets:n?[1]:[4,4],accessors:[this.innerIDAccessor],size:[Wn(this.width,0),Wn(this.height,0)],hideOnly:this.dataLabel.visible&&n,suppressMarkDraw:true});u.remove();if(n){s.attr("text-anchor",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"end":"start":e.x0<t.innerPaddedWidth/2?"start":"end"})).attr("x",(function(e){if(t.linkConfig.visible){return t.dataLabel.placement==="outside"?e.x0<t.innerPaddedWidth/2?e.x0:e.x1:e.x0<t.innerPaddedWidth/2?e.x1:e.x0}else{return e.x0<t.innerPaddedWidth/2?t.noLinksLeftPadding:t.noLinksLeftPadding+t.widthAllNodesNoLinks+t.nodeConfig.width}})).attr("y",(function(t){return(t.y1+t.y0)/2})).attr("dx",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"-0.5em":"0.5em":e.x0<t.innerPaddedWidth/2?"0.5em":"-0.5em"})).attr("dy","0.4em")}s.classed("collision-added",false)}}};t.prototype.drawAnnotations=function(){var t=this;var e=this.preppedData;var i=[];this.annotations.forEach((function(r){var n=Object.assign({},r);var s=r.data;if(e&&s){if(n.positionType==="node"&&n.data.hasOwnProperty(t.innerIDAccessor)){var a=e.nodes.findIndex((function(e){return e[t.innerIDAccessor]===n.data[t.innerIDAccessor]}));s=e.nodes[a]}else if(n.positionType==="source"||n.positionType==="target"&&n.data.hasOwnProperty(t.sourceAccessor)&&n.data.hasOwnProperty(t.targetAccessor)){var a=e.links.findIndex((function(e){return e.data[t.sourceAccessor]===n.data[t.sourceAccessor]&&e.data[t.targetAccessor]===n.data[t.targetAccessor]}));s=e.links[a]}}if(n.positionType&&s){if(n.positionType==="target"&&s.target){n.x=s.target.x0;n.y=s.y1}else if(n.positionType==="source"&&s.source){n.x=s.source.x1;n.y=s.y0}else if(n.positionType==="node"){n.x=s.x1;n.y=(s.y1+s.y0)/2}}delete n.data;i.push(n)}));On({source:this.rootG.node(),data:i,ignoreScales:true,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})};t.prototype.setColors=function(){this.colorArr=this.colors?Yn(this.colors):Kn(this.colorPalette,this.nodeList.length)};t.prototype.setTagLevels=function(){this.topLevel=Xn(this.highestHeadingLevel);this.bottomLevel=Xn(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){vn({rootEle:this.alluvialDiagramEl,title:this.accessibility.title||this.mainTitle,chartTag:"alluvial-diagram",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){var t=Zn(this,Qn,"alluvial-diagram");gn({node:this.svg.node(),chartTag:"alluvial-diagram",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"link",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupAccessor:this.innerIDAccessor,groupKeys:["value"],groupName:"node"})};t.prototype.setGeometryAccessibilityAttributes=function(){this.updateLinks.each((function(t,e,i){bn(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=Zn(this,Qn,"alluvial-diagram");this.updateLinks.each((function(i,r,n){mn({node:n[r],geomType:"link",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"node",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});An({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateNodes.each((function(e,i,r){An({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartCountAccessibility=function(){wn({rootEle:this.alluvialDiagramEl,parentGNode:this.linkG.node(),chartTag:"alluvial-diagram",geomType:"link",groupName:"node"})};t.prototype.setSelectedClass=function(){var t=this;this.updateLinks.classed("highlight",(function(e){var i=Rn(e.data,true,false,"",t.clickHighlight,t.innerInteractionKeys);return t.clickHighlight&&t.clickHighlight.length?i:false})).each((function(e,i,r){var n=Rn(e.data,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;Nn(r[i],n,s)}))};t.prototype.setChartAccessibilityTitle=function(){Sn(this.alluvialDiagramEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){Ln(this.alluvialDiagramEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){kn(this.alluvialDiagramEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){_n(this.alluvialDiagramEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){Cn(this.alluvialDiagramEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){Dn(this.alluvialDiagramEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){Mn(this.alluvialDiagramEl,this.accessibility.statisticalNotes)};t.prototype.setChartAccessibilityStructureNotes=function(){Un(this.alluvialDiagramEl,this.accessibility.structureNotes)};t.prototype.setAnnotationAccessibility=function(){Tn(this.alluvialDiagramEl,this.annotations)};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t.data)};t.prototype.onHoverHandler=function(t){$n(this.chartID,true);this.hoverFunc.emit(t.data);if(this.showTooltip){this.eventsTooltip({data:t,evt:Nt,isToShow:true})}};t.prototype.onMouseOutHandler=function(){$n(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){jn(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;Fn({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,groupAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,ordinalAccessor:this.innerIDAccessor,chartType:"alluvial-diagram"})};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}this.setDimensions();this.prepareData();this.validateIdAccessor();this.validateLabelText();this.validateLinkFillMode();this.validateInteractionKeys();this.validateLinkGroups();this.setColors();return(r("div",null,r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"alluvial-main-title vcl-main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions alluvial-sub-title vcl-sub-title"},this.subTitle),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"link",groupName:"node",chartTag:"alluvial-diagram",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target",cousinActionOverride:"on a link",cousinResultOverride:this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"?"Drill up to link's Source or Target node":"",disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-alluvial-container"}),r("div",{class:"alluvial-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}})))))};t.prototype.init=function(){var t=Object.keys(ve);var e=0;var i={hoverOpacity:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},linkConfig:Object.assign({exception:false})};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:ve[t[e]]}};Object.defineProperty(t.prototype,"alluvialDiagramEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{linkData:["linkDataWatcher"],nodeData:["nodeDataWatcher"],uniqueID:["idWatcher"],mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],highestHeadingLevel:["headingWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],sourceAccessor:["sourceAccessorWatcher"],targetAccessor:["targetAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],nodeIDAccessor:["nodeIDAccessorWatcher"],nodeConfig:["nodeConfigWatcher"],linkConfig:["linkConfigWatcher"],colorPalette:["colorPaletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],cursor:["cursorWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],annotations:["annotationsWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}alluvial-diagram{cursor:default}alluvial-diagram .annotations{pointer-events:none}alluvial-diagram .annotations .handle{pointer-events:all}alluvial-diagram .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}alluvial-diagram .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}alluvial-diagram .hidden{display:none}alluvial-diagram .node rect{cursor:move}alluvial-diagram .node text{pointer-events:none;text-shadow:0 1px 0 #fff}alluvial-diagram .link{fill:none;stroke:#000;stroke-opacity:0.2}alluvial-diagram .link:hover{stroke-opacity:0.5}"},enumerable:true,configurable:true});return t}());var os="http://www.w3.org/1999/xhtml";var ls={svg:"http://www.w3.org/2000/svg",xhtml:os,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function us(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return ls.hasOwnProperty(e)?{space:ls[e],local:t}:t}function hs(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===os&&e.documentElement.namespaceURI===os?e.createElement(t):e.createElementNS(i,t)}}function cs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ds(t){var e=us(t);return(e.local?cs:hs)(e)}function fs(){}function ps(t){return t==null?fs:function(){return this.querySelector(t)}}function ys(t){if(typeof t!=="function")t=ps(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new qa(r,this._parents)}function vs(){return[]}function gs(t){return t==null?vs:function(){return this.querySelectorAll(t)}}function bs(t){if(typeof t!=="function")t=gs(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new qa(r,n)}function ms(t){return function(){return this.matches(t)}}function As(t){if(typeof t!=="function")t=ms(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new qa(r,this._parents)}function ws(t){return new Array(t.length)}function xs(){return new qa(this._enter||this._groups.map(ws),this._parents)}function Ss(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}Ss.prototype={constructor:Ss,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ls(t){return function(){return t}}var ks="$";function _s(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new Ss(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function Cs(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=ks+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=ks+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new Ss(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function Ds(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?Cs:_s,r=this._parents,n=this._groups;if(typeof t!=="function")t=Ls(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new qa(a,r);a._enter=o;a._exit=l;return a}function Ms(){return new qa(this._exit||this._groups.map(ws),this._parents)}function Us(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function Ts(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new qa(a,this._parents)}function Es(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function Is(t){if(!t)t=Ns;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new qa(n,this._parents).order()}function Ns(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Hs(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function Ws(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function Ps(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function Gs(){var t=0;this.each((function(){++t}));return t}function Os(){return!this.node()}function Vs(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function Rs(t){return function(){this.removeAttribute(t)}}function Ys(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zs(t,e){return function(){this.setAttribute(t,e)}}function Fs(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Xs(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function Bs(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function Ks(t,e){var i=us(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?Ys:Rs:typeof e==="function"?i.local?Bs:Xs:i.local?Fs:zs)(i,e))}function qs(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function js(t){return function(){this.style.removeProperty(t)}}function $s(t,e,i){return function(){this.style.setProperty(t,e,i)}}function Zs(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function Qs(t,e,i){return arguments.length>1?this.each((e==null?js:typeof e==="function"?Zs:$s)(t,e,i==null?"":i)):Js(this.node(),t)}function Js(t,e){return t.style.getPropertyValue(e)||qs(t).getComputedStyle(t,null).getPropertyValue(e)}function ta(t){return function(){delete this[t]}}function ea(t,e){return function(){this[t]=e}}function ia(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function ra(t,e){return arguments.length>1?this.each((e==null?ta:typeof e==="function"?ia:ea)(t,e)):this.node()[t]}function na(t){return t.trim().split(/^|\s+/)}function sa(t){return t.classList||new aa(t)}function aa(t){this._node=t;this._names=na(t.getAttribute("class")||"")}aa.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function oa(t,e){var i=sa(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function la(t,e){var i=sa(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function ua(t){return function(){oa(this,t)}}function ha(t){return function(){la(this,t)}}function ca(t,e){return function(){(e.apply(this,arguments)?oa:la)(this,t)}}function da(t,e){var i=na(t+"");if(arguments.length<2){var r=sa(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?ca:e?ua:ha)(i,e))}function fa(){this.textContent=""}function pa(t){return function(){this.textContent=t}}function ya(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function va(t){return arguments.length?this.each(t==null?fa:(typeof t==="function"?ya:pa)(t)):this.node().textContent}function ga(){this.innerHTML=""}function ba(t){return function(){this.innerHTML=t}}function ma(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Aa(t){return arguments.length?this.each(t==null?ga:(typeof t==="function"?ma:ba)(t)):this.node().innerHTML}function wa(){if(this.nextSibling)this.parentNode.appendChild(this)}function xa(){return this.each(wa)}function Sa(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function La(){return this.each(Sa)}function ka(t){var e=typeof t==="function"?t:ds(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function _a(){return null}function Ca(t,e){var i=typeof t==="function"?t:ds(t),r=e==null?_a:typeof e==="function"?e:ps(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function Da(){var t=this.parentNode;if(t)t.removeChild(this)}function Ma(){return this.each(Da)}function Ua(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ta(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ea(t){return this.select(t?Ta:Ua)}function Ia(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Na={};var Ha=null;if(typeof document!=="undefined"){var Wa=document.documentElement;if(!("onmouseenter"in Wa)){Na={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Pa(t,e,i){t=Ga(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function Ga(t,e,i){return function(r){var n=Ha;Ha=r;try{t.call(this,this.__data__,e,i)}finally{Ha=n}}}function Oa(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function Va(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function Ra(t,e,i){var r=Na.hasOwnProperty(t.type)?Pa:Ga;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function Ya(t,e,i){var r=Oa(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?Ra:Va;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function za(t,e,i){var r=qs(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function Fa(t,e){return function(){return za(this,t,e)}}function Xa(t,e){return function(){return za(this,t,e.apply(this,arguments))}}function Ba(t,e){return this.each((typeof e==="function"?Xa:Fa)(t,e))}var Ka=[null];function qa(t,e){this._groups=t;this._parents=e}function ja(){return new qa([[document.documentElement]],Ka)}qa.prototype=ja.prototype={constructor:qa,select:ys,selectAll:bs,filter:As,data:Ds,enter:xs,exit:Ms,join:Us,merge:Ts,order:Es,sort:Is,call:Hs,nodes:Ws,node:Ps,size:Gs,empty:Os,each:Vs,attr:Ks,style:Qs,property:ra,classed:da,text:va,html:Aa,raise:xa,lower:La,append:ka,insert:Ca,remove:Ma,clone:Ea,datum:Ia,on:Ya,dispatch:Ba};function $a(t){return typeof t==="string"?new qa([[document.querySelector(t)]],[document.documentElement]):new qa([[t]],Ka)}function Za(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Qa(t){if(t.length===1)t=Ja(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function Ja(t){return function(e,i){return Za(t(e),i)}}var to=Qa(Za);var eo=to.right;function io(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var ro=Math.sqrt(50),no=Math.sqrt(10),so=Math.sqrt(2);function ao(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=oo(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function oo(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=ro?10:s>=no?5:s>=so?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=ro?10:s>=no?5:s>=so?2:1)}function lo(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=ro)n*=10;else if(s>=no)n*=5;else if(s>=so)n*=2;return e<t?-n:n}function uo(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function ho(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function co(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var fo="$";function po(){}po.prototype=yo.prototype={constructor:po,has:function(t){return fo+t in this},get:function(t){return this[fo+t]},set:function(t,e){this[fo+t]=e;return this},remove:function(t){var e=fo+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===fo)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===fo)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===fo)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===fo)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===fo)++t;return t},empty:function(){for(var t in this)if(t[0]===fo)return false;return true},each:function(t){for(var e in this)if(e[0]===fo)t(this[e],e.slice(1),this)}};function yo(t,e){var i=new po;if(t instanceof po)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function vo(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=yo(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,go,bo)},map:function(t){return s(t,0,mo,Ao)},entries:function(t){return a(s(t,0,mo,Ao),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function go(){return{}}function bo(t,e,i){t[e]=i}function mo(){return yo()}function Ao(t,e,i){t.set(e,i)}var wo=Array.prototype;var xo=wo.map;var So=wo.slice;var Lo={name:"implicit"};function ko(){var t=yo(),e=[],i=[],r=Lo;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==Lo)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=yo();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=So.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return ko(e,i).unknown(r)};co.apply(n,arguments);return n}function _o(){var t=ko().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=io(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return _o(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return co.apply(h(),arguments)}function Co(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function Do(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function Mo(){}var Uo=.7;var To=1/Uo;var Eo="\\s*([+-]?\\d+)\\s*",Io="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",No="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ho=/^#([0-9a-f]{3,8})$/,Wo=new RegExp("^rgb\\("+[Eo,Eo,Eo]+"\\)$"),Po=new RegExp("^rgb\\("+[No,No,No]+"\\)$"),Go=new RegExp("^rgba\\("+[Eo,Eo,Eo,Io]+"\\)$"),Oo=new RegExp("^rgba\\("+[No,No,No,Io]+"\\)$"),Vo=new RegExp("^hsl\\("+[Io,No,No]+"\\)$"),Ro=new RegExp("^hsla\\("+[Io,No,No,Io]+"\\)$");var Yo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Co(Mo,Bo,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:zo,formatHex:zo,formatHsl:Fo,formatRgb:Xo,toString:Xo});function zo(){return this.rgb().formatHex()}function Fo(){return il(this).formatHsl()}function Xo(){return this.rgb().formatRgb()}function Bo(t){var e,i;t=(t+"").trim().toLowerCase();return(e=Ho.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Ko(e):i===3?new Zo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?qo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?qo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Wo.exec(t))?new Zo(e[1],e[2],e[3],1):(e=Po.exec(t))?new Zo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Go.exec(t))?qo(e[1],e[2],e[3],e[4]):(e=Oo.exec(t))?qo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Vo.exec(t))?el(e[1],e[2]/100,e[3]/100,1):(e=Ro.exec(t))?el(e[1],e[2]/100,e[3]/100,e[4]):Yo.hasOwnProperty(t)?Ko(Yo[t]):t==="transparent"?new Zo(NaN,NaN,NaN,0):null}function Ko(t){return new Zo(t>>16&255,t>>8&255,t&255,1)}function qo(t,e,i,r){if(r<=0)t=e=i=NaN;return new Zo(t,e,i,r)}function jo(t){if(!(t instanceof Mo))t=Bo(t);if(!t)return new Zo;t=t.rgb();return new Zo(t.r,t.g,t.b,t.opacity)}function $o(t,e,i,r){return arguments.length===1?jo(t):new Zo(t,e,i,r==null?1:r)}function Zo(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}Co(Zo,$o,Do(Mo,{brighter:function(t){t=t==null?To:Math.pow(To,t);return new Zo(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?Uo:Math.pow(Uo,t);return new Zo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:Qo,formatHex:Qo,formatRgb:Jo,toString:Jo}));function Qo(){return"#"+tl(this.r)+tl(this.g)+tl(this.b)}function Jo(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function tl(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function el(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new nl(t,e,i,r)}function il(t){if(t instanceof nl)return new nl(t.h,t.s,t.l,t.opacity);if(!(t instanceof Mo))t=Bo(t);if(!t)return new nl;if(t instanceof nl)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new nl(a,o,l,t.opacity)}function rl(t,e,i,r){return arguments.length===1?il(t):new nl(t,e,i,r==null?1:r)}function nl(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}Co(nl,rl,Do(Mo,{brighter:function(t){t=t==null?To:Math.pow(To,t);return new nl(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?Uo:Math.pow(Uo,t);return new nl(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new Zo(sl(t>=240?t-240:t+120,n,r),sl(t,n,r),sl(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function sl(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function al(t){return function(){return t}}function ol(t,e){return function(i){return t+i*e}}function ll(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function ul(t){return(t=+t)===1?hl:function(e,i){return i-e?ll(e,i,t):al(isNaN(e)?i:e)}}function hl(t,e){var i=e-t;return i?ol(t,i):al(isNaN(t)?e:t)}var cl=function t(e){var i=ul(e);function r(t,e){var r=i((t=$o(t)).r,(e=$o(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=hl(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function dl(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function fl(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function pl(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=Sl(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function yl(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function vl(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function gl(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=Sl(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var bl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ml=new RegExp(bl.source,"g");function Al(t){return function(){return t}}function wl(t){return function(e){return t(e)+""}}function xl(t,e){var i=bl.lastIndex=ml.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=bl.exec(t))&&(n=ml.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:vl(r,n)})}i=ml.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?wl(l[0].x):Al(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function Sl(t,e){var i=typeof e,r;return e==null||i==="boolean"?al(e):(i==="number"?vl:i==="string"?(r=Bo(e))?(e=r,cl):xl:e instanceof Bo?cl:e instanceof Date?yl:fl(e)?dl:Array.isArray(e)?pl:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?gl:vl)(t,e)}function Ll(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var kl=180/Math.PI;var _l={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cl(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*kl,skewX:Math.atan(l)*kl,scaleX:a,scaleY:o}}var Dl,Ml,Ul,Tl;function El(t){if(t==="none")return _l;if(!Dl)Dl=document.createElement("DIV"),Ml=document.documentElement,Ul=document.defaultView;Dl.style.transform=t;t=Ul.getComputedStyle(Ml.appendChild(Dl),null).getPropertyValue("transform");Ml.removeChild(Dl);t=t.slice(7,-1).split(",");return Cl(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function Il(t){if(t==null)return _l;if(!Tl)Tl=document.createElementNS("http://www.w3.org/2000/svg","g");Tl.setAttribute("transform",t);if(!(t=Tl.transform.baseVal.consolidate()))return _l;t=t.matrix;return Cl(t.a,t.b,t.c,t.d,t.e,t.f)}function Nl(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:vl(t,n)},{i:l-2,x:vl(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:vl(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:vl(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:vl(t,i)},{i:o-2,x:vl(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var Hl=Nl(El,"px, ","px)","deg)");var Wl=Nl(Il,", ",")",")");function Pl(t){return function(){return t}}function Gl(t){return+t}var Ol=[0,1];function Vl(t){return t}function Rl(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:Pl(isNaN(e)?NaN:.5)}function Yl(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function zl(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=Rl(n,r),s=i(a,s);else r=Rl(r,n),s=i(s,a);return function(t){return s(r(t))}}function Fl(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=Rl(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=eo(t,e,1,r)-1;return s[i](n[i](e))}}function Xl(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Bl(){var t=Ol,e=Ol,i=Sl,r,n,s,a=Vl,o,l,u;function h(){o=Math.min(t.length,e.length)>2?Fl:zl;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),vl)))(i)))};c.domain=function(e){return arguments.length?(t=xo.call(e,Gl),a===Vl||(a=Yl(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=So.call(t),h()):e.slice()};c.rangeRound=function(t){return e=So.call(t),i=Ll,h()};c.clamp=function(e){return arguments.length?(a=e?Yl(t):Vl,c):a!==Vl};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function Kl(t,e){return Bl()(t,e)}function ql(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function jl(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function $l(t){return t=jl(Math.abs(t)),t?t[1]:NaN}function Zl(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function Ql(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var Jl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tu(t){if(!(e=Jl.exec(t)))throw new Error("invalid format: "+t);var e;return new eu({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}tu.prototype=eu.prototype;function eu(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}eu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function iu(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var ru;function nu(t,e){var i=jl(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(ru=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+jl(t,Math.max(0,e+s-1))[0]}function su(t,e){var i=jl(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var au={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:ql,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return su(t*100,e)},r:su,s:nu,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function ou(t){return t}var lu=Array.prototype.map,uu=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function hu(t){var e=t.grouping===undefined||t.thousands===undefined?ou:Zl(lu.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?ou:Ql(lu.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=tu(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!au[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=au[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var L=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=iu(t);if(L&&+t===0&&c!=="+")L=false;i=(L?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?uu[8+ru/3]:"")+r+(L&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var k=i.length+t.length+r.length,_=k<p?new Array(p-k+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,k=_.length>>1)+i+t+r+_.slice(k);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=tu(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor($l(e)/3)))*3,n=Math.pow(10,-r),s=uu[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var cu;var du;var fu;pu({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function pu(t){cu=hu(t);du=cu.format;fu=cu.formatPrefix;return cu}function yu(t){return Math.max(0,-$l(Math.abs(t)))}function vu(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($l(e)/3)))*3-$l(Math.abs(t)))}function gu(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,$l(e)-$l(t))+1}function bu(t,e,i,r){var n=lo(t,e,i),s;r=tu(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=vu(n,a)))r.precision=s;return fu(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=gu(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=yu(n)))r.precision=s-(r.type==="%")*2;break}}return du(r)}function mu(t){var e=t.domain;t.ticks=function(t){var i=e();return ao(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return bu(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=oo(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=oo(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=oo(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function Au(){var t=Kl(Vl,Vl);t.copy=function(){return Xl(t,Au())};co.apply(t,arguments);return mu(t)}function wu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function xu(t){return 1-Math.sqrt(1-t*t)}var Su=s.propDefaultValues;var Lu=function(){function t(){}return t}();Lu.mainTitle="Clustered Bar Chart Title";Lu.subTitle="This is the clustered bar chart's subtitle";Lu.height=250;Lu.width=675;Lu.margin={top:400*.01,bottom:400*.01,right:400*.01,left:400*.01};Lu.padding={top:20,bottom:50,right:50,left:50};Lu.ordinalAccessor="label";Lu.valueAccessor="value";Lu.groupAccessor="category";Lu.reverseOrder=false;Lu.layout=Su.layout;Lu.xAxis=Su.xAxis;Lu.yAxis=Su.yAxis;Lu.wrapLabel=Su.wrapLabel;Lu.colorPalette=Su.colorPaletteCategorical;Lu.hoverStyle=Su.hoverStyle;Lu.clickStyle=Su.clickStyle;Lu.referenceStyle=Su.referenceStyle;Lu.cursor=Su.cursor;Lu.roundedCorner=Su.roundedCorner;Lu.barIntervalRatio=Su.barIntervalRatio;Lu.groupIntervalRatio=Su.barIntervalRatio;Lu.hoverOpacity=Su.hoverOpacity;Lu.dataLabel=Su.dataLabel;Lu.legend=Su.categoryLegend;Lu.tooltipLabel=Su.tooltipLabel;Lu.showTooltip=Su.showTooltip;Lu.accessibility=Su.accessibility;Lu.animationConfig=Su.animationConfig;Lu.highestHeadingLevel=Su.highestHeadingLevel;Lu.referenceLines=Su.referenceLines;Lu.annotations=Su.annotations;Lu.clickHighlight=Su.clickHighlight;Lu.suppressEvents=Su.suppressEvents;var ku={value:function(){}};function _u(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new Cu(i)}function Cu(t){this._=t}function Du(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}Cu.prototype=_u.prototype={constructor:Cu,on:function(t,e){var i=this._,r=Du(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=Mu(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=Uu(i[n],t.name,e);else if(e==null)for(n in i)i[n]=Uu(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new Cu(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function Mu(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function Uu(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=ku,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var Tu=0,Eu=0,Iu=0,Nu=1e3,Hu,Wu,Pu=0,Gu=0,Ou=0,Vu=typeof performance==="object"&&performance.now?performance:Date,Ru=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yu(){return Gu||(Ru(zu),Gu=Vu.now()+Ou)}function zu(){Gu=0}function Fu(){this._call=this._time=this._next=null}Fu.prototype=Xu.prototype={constructor:Fu,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?Yu():+i)+(e==null?0:+e);if(!this._next&&Wu!==this){if(Wu)Wu._next=this;else Hu=this;Wu=this}this._call=t;this._time=i;$u()},stop:function(){if(this._call){this._call=null;this._time=Infinity;$u()}}};function Xu(t,e,i){var r=new Fu;r.restart(t,e,i);return r}function Bu(){Yu();++Tu;var t=Hu,e;while(t){if((e=Gu-t._time)>=0)t._call.call(null,e);t=t._next}--Tu}function Ku(){Gu=(Pu=Vu.now())+Ou;Tu=Eu=0;try{Bu()}finally{Tu=0;ju();Gu=0}}function qu(){var t=Vu.now(),e=t-Pu;if(e>Nu)Ou-=e,Pu=t}function ju(){var t,e=Hu,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:Hu=i}}Wu=t;$u(r)}function $u(t){if(Tu)return;if(Eu)Eu=clearTimeout(Eu);var e=t-Gu;if(e>24){if(t<Infinity)Eu=setTimeout(Ku,t-Vu.now()-Ou);if(Iu)Iu=clearInterval(Iu)}else{if(!Iu)Pu=Vu.now(),Iu=setInterval(qu,Nu);Tu=1,Ru(Ku)}}function Zu(t,e,i){var r=new Fu;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var Qu=_u("start","end","interrupt");var Ju=[];var th=0;var eh=1;var ih=2;var rh=3;var nh=4;var sh=5;var ah=6;function oh(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;ch(t,i,{name:e,index:r,group:n,on:Qu,tween:Ju,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:th})}function lh(t,e){var i=hh(t,e);if(i.state>th)throw new Error("too late; already scheduled");return i}function uh(t,e){var i=hh(t,e);if(i.state>ih)throw new Error("too late; already started");return i}function hh(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function ch(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=Xu(s,0,i.time);function s(t){i.state=eh;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==eh)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===rh)return Zu(a);if(d.state===nh){d.state=ah;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=ah;d.timer.stop();delete r[u]}}Zu((function(){if(i.state===rh){i.state=nh;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=ih;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==ih)return;i.state=rh;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=sh,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===sh){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=ah;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function dh(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>ih&&r.state<sh;r.state=ah;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function fh(t){return this.each((function(){dh(this,t)}))}function ph(t,e){var i,r;return function(){var n=uh(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function yh(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=uh(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function vh(t,e){var i=this._id;t+="";if(arguments.length<2){var r=hh(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?ph:yh)(i,t,e))}function gh(t,e,i){var r=t._id;t.each((function(){var t=uh(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return hh(t,r).value[e]}}function bh(t,e){var i;return(typeof e==="number"?vl:e instanceof Bo?cl:(i=Bo(e))?(e=i,cl):xl)(t,e)}function mh(t){return function(){this.removeAttribute(t)}}function Ah(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wh(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function xh(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function Sh(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Lh(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function kh(t,e){var i=us(t),r=i==="transform"?Wl:bh;return this.attrTween(t,typeof e==="function"?(i.local?Lh:Sh)(i,r,gh(this,"attr."+t,e)):e==null?(i.local?Ah:mh)(i):(i.local?xh:wh)(i,r,e+""))}function _h(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function Ch(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function Dh(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=us(t);return this.tween(i,(r.local?_h:Ch)(r,e))}function Mh(t,e){return function(){lh(this,t).delay=+e.apply(this,arguments)}}function Uh(t,e){return e=+e,function(){lh(this,t).delay=e}}function Th(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Mh:Uh)(e,t)):hh(this.node(),e).delay}function Eh(t,e){return function(){uh(this,t).duration=+e.apply(this,arguments)}}function Ih(t,e){return e=+e,function(){uh(this,t).duration=e}}function Nh(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Eh:Ih)(e,t)):hh(this.node(),e).duration}function Hh(t,e){if(typeof e!=="function")throw new Error;return function(){uh(this,t).ease=e}}function Wh(t){var e=this._id;return arguments.length?this.each(Hh(e,t)):hh(this.node(),e).ease}function Ph(t){if(typeof t!=="function")t=ms(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new ac(r,this._parents,this._name,this._id)}function Gh(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new ac(a,this._parents,this._name,this._id)}function Oh(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function Vh(t,e,i){var r,n,s=Oh(e)?lh:uh;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function Rh(t,e){var i=this._id;return arguments.length<2?hh(this.node(),i).on.on(t):this.each(Vh(i,t,e))}function Yh(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function zh(){return this.on("end.remove",Yh(this._id))}function Fh(t){var e=this._name,i=this._id;if(typeof t!=="function")t=ps(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;oh(u[d],e,i,d,u,hh(h,i))}}}return new ac(s,this._parents,e,i)}function Xh(t){var e=this._name,i=this._id;if(typeof t!=="function")t=gs(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=hh(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){oh(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new ac(s,a,e,i)}var Bh=ja.prototype.constructor;function Kh(){return new Bh(this._groups,this._parents)}function qh(t,e){var i,r,n;return function(){var s=Js(this,t),a=(this.style.removeProperty(t),Js(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function jh(t){return function(){this.style.removeProperty(t)}}function $h(t,e,i){var r,n;return function(){var s=Js(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function Zh(t,e,i){var r,n,s;return function(){var a=Js(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),Js(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Qh(t,e,i){var r=(t+="")==="transform"?Hl:bh;return e==null?this.styleTween(t,qh(t,r)).on("end.style."+t,jh(t)):this.styleTween(t,typeof e==="function"?Zh(t,r,gh(this,"style."+t,e)):$h(t,r,e+""),i)}function Jh(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function tc(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,Jh(t,e,i==null?"":i))}function ec(t){return function(){this.textContent=t}}function ic(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function rc(t){return this.tween("text",typeof t==="function"?ic(gh(this,"text",t)):ec(t==null?"":t+""))}function nc(){var t=this._name,e=this._id,i=lc();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=hh(l,e);oh(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new ac(r,this._parents,t,i)}var sc=0;function ac(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function oc(t){return ja().transition(t)}function lc(){return++sc}var uc=ja.prototype;ac.prototype=oc.prototype={constructor:ac,select:Fh,selectAll:Xh,filter:Ph,merge:Gh,selection:Kh,transition:nc,call:uc.call,nodes:uc.nodes,node:uc.node,size:uc.size,empty:uc.empty,each:uc.each,on:Rh,attr:kh,attrTween:Dh,style:Qh,styleTween:tc,text:rc,remove:zh,tween:vh,delay:Th,duration:Nh,ease:Wh};var hc={time:null,delay:0,duration:250,ease:wu};function cc(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return hc.time=Yu(),hc}}return i}function dc(t){var e,i;if(t instanceof ac){e=t._id,t=t._name}else{e=lc(),(i=hc).time=Yu(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){oh(l,t,e,u,a,i||cc(l,e))}}}return new ac(r,this._parents,t,e)}ja.prototype.interrupt=fh;ja.prototype.transition=dc;var fc=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var pc=new Uint8Array(16);function yc(){if(!fc){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return fc(pc)}var vc=[];for(var gc=0;gc<256;++gc){vc[gc]=(gc+256).toString(16).substr(1)}function bc(t,e){var i=e||0;var r=vc;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function mc(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||yc)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||bc(n)}var Ac=s.verifyTextHasSpace,wc=s.checkAttributeTransitions,xc=s.createTextStrokeFilter,Sc=s.drawHoverStrokes,Lc=s.removeHoverStrokes,kc=s.buildStrokes,_c=s.convertColorsToTextures,Cc=s.initializeDescriptionRoot,Dc=s.initializeElementAccess,Mc=s.setElementFocusHandler,Uc=s.setElementAccessID,Tc=s.setAccessibilityController,Ec=s.hideNonessentialGroups,Ic=s.setAccessTitle,Nc=s.setAccessSubtitle,Hc=s.setAccessLongDescription,Wc=s.setAccessExecutiveSummary,Pc=s.setAccessPurpose,Gc=s.setAccessContext,Oc=s.setAccessStatistics,Vc=s.setAccessChartCounts,Rc=s.setAccessXAxis,Yc=s.setAccessYAxis,zc=s.setAccessStructure,Fc=s.setAccessAnnotation,Xc=s.retainAccessFocus,Bc=s.checkAccessFocus,Kc=s.setElementInteractionAccessState,qc=s.setAccessibilityDescriptionWidth,jc=s.autoTextColor,$c=s.annotate,Zc=s.chartAccessors,Qc=s.convertVisaColor,Jc=s.checkInteraction,td=s.checkClicked,ed=s.checkHovered,id=s.drawAxis,rd=s.drawGrid,nd=s.drawLegend,sd=s.setLegendInteractionState,ad=s.drawTooltip,od=s.formatDataLabel,ld=s.formatDate,ud=s.getColors,hd=s.getLicenses,cd=s.getPadding,dd=s.getScopedData,fd=s.initTooltipStyle,pd=s.overrideTitleTooltip,yd=s.placeDataLabels,vd=s.scopeDataKeys,gd=s.transitionEndAll,bd=s.visaColors,md=s.validateAccessibilityProps,Ad=s.findTagLevel,wd=s.prepareRenderChange,xd=s.roundTo,Sd=s.resolveLabelCollision;var Ld=t("clustered_bar_chart",function(){function t(t){var r=this;e(this,t);this.mainTitle=Lu.mainTitle;this.subTitle=Lu.subTitle;this.height=Lu.height;this.width=Lu.width;this.layout=Lu.layout;this.margin=Lu.margin;this.padding=Lu.padding;this.highestHeadingLevel=Lu.highestHeadingLevel;this.ordinalAccessor=Lu.ordinalAccessor;this.valueAccessor=Lu.valueAccessor;this.groupAccessor=Lu.groupAccessor;this.reverseOrder=Lu.reverseOrder;this.xAxis=Lu.xAxis;this.yAxis=Lu.yAxis;this.wrapLabel=Lu.wrapLabel;this.colorPalette=Lu.colorPalette;this.hoverStyle=Lu.hoverStyle;this.clickStyle=Lu.clickStyle;this.referenceStyle=Lu.referenceStyle;this.cursor=Lu.cursor;this.roundedCorner=Lu.roundedCorner;this.barIntervalRatio=Lu.barIntervalRatio;this.groupIntervalRatio=Lu.groupIntervalRatio;this.hoverOpacity=Lu.hoverOpacity;this.animationConfig=Lu.animationConfig;this.dataLabel=Lu.dataLabel;this.showTooltip=Lu.showTooltip;this.tooltipLabel=Lu.tooltipLabel;this.accessibility=Lu.accessibility;this.legend=Lu.legend;this.annotations=Lu.annotations;this.referenceLines=Lu.referenceLines;this.suppressEvents=Lu.suppressEvents;this.clickHighlight=Lu.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.nest=[];this.datakeys=[];this.legendData=[];this.updated=true;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateScales=false;this.shouldValidateAxes=false;this.shouldUpdateAnnotations=false;this.shouldResetRoot=false;this.shouldUpdateTableData=false;this.shouldSetColors=false;this.shouldValidateLabelPlacement=false;this.shouldValidateDataLabelAccessor=false;this.shouldValidateInteractionKeys=false;this.shouldSetSelectionClass=false;this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldUpdateBaseline=false;this.shouldCheckValueAxis=false;this.shouldCheckLabelAxis=false;this.shouldSetGlobalSelections=false;this.shouldEnterUpdateExit=false;this.shouldUpdateGeometries=false;this.shouldUpdateCorners=false;this.shouldUpdateLegendData=false;this.shouldUpdateLegend=false;this.shouldUpdateLegendInteractivity=false;this.shouldSetLegendCursor=false;this.shouldUpdateReferenceLines=false;this.shouldUpdateCursor=false;this.shouldDrawInteractionState=false;this.shouldSetLabelOpacity=false;this.shouldSetLabelPosition=false;this.shouldSetLabelContent=false;this.shouldCheckLabelColor=false;this.shouldBindInteractivity=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldSetTestingAttributes=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetTextures=false;this.shouldSetStrokes=false;this.strokes={};this.topLevel="h2";this.bottomLevel="p";this.textTreatmentHandler=function(t,e,i){var n=$a(i[e]);var s=r.clickHighlight&&r.clickHighlight.length>0&&td(t,r.clickHighlight,r.innerInteractionKeys)&&r.clickStyle.color?bd[r.clickStyle.color]||r.clickStyle.color:r.hoverHighlight&&ed(t,r.hoverHighlight,r.innerInteractionKeys)&&r.hoverStyle.color?bd[r.hoverStyle.color]||r.hoverStyle.color:r.preparedColors[e];var a=r.dataLabel.placement==="auto"?r.layout==="vertical"?r.dataLabel.collisionPlacement==="top"&&n.attr("data-baseline")!=="bottom"||r.dataLabel.collisionPlacement==="middle"&&n.attr("data-baseline")!=="bottom"||r.dataLabel.collisionPlacement==="bottom"&&n.attr("data-baseline")==="bottom"&&(t[r.valueAccessor]>=0&&r.y(0)-r.y(t[r.valueAccessor])>20||t[r.valueAccessor]<0&&r.y(0)-r.y(t[r.valueAccessor])<-20):r.dataLabel.collisionPlacement==="right"&&n.attr("data-align")!=="left"||r.dataLabel.collisionPlacement==="middle"&&n.attr("data-align")!=="left"||r.dataLabel.collisionPlacement==="left"&&n.attr("data-align")!=="right":false;var o=a||r.dataLabel.placement==="bottom"||r.dataLabel.placement==="left"?jc(s):bd.dark_text;n.attr("filter",!n.classed("textIsMoving")?xc({root:r.svg.node(),id:r.chartID,color:a||r.dataLabel.placement==="bottom"||r.dataLabel.placement==="left"?s:"#ffffff"}):null);return o};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldSetTextures=true;this.shouldUpdateTableData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldSetLabelContent=true;this.shouldSetLabelPosition=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateLegendData=true;this.shouldUpdateScales=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetStrokes=true};t.prototype.idWatcher=function(t,e){this.chartID=t||"clustered-bar-chart-"+mc();this.clusteredBarChartEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldSetStrokes=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldSetAnnotationAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldSetLabelPosition=true;this.shouldCheckLabelColor=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.layoutWatcher=function(t,e){this.shouldValidateLabelPlacement=true;this.shouldUpdateScales=true;this.shouldValidateAxes=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldSetLabelPosition=true;this.shouldCheckLabelColor=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetTestingAttributes=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateLegendData=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckValueAxis=true;this.shouldValidateDataLabelAccessor=true;this.shouldSetLabelContent=true;this.shouldSetLabelPosition=true;this.shouldCheckLabelColor=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.groupAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldCheckLabelAxis=true;this.shouldUpdateBaseline=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.reverseOrderWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldSetLabelPosition=true;this.shouldCheckLabelColor=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;if(this.layout==="vertical"){this.shouldValidateAxes=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true}else if(this.layout==="horizontal"){this.shouldValidateAxes=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true}};t.prototype.xAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateXGrid=true}};t.prototype.yAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateYGrid=true}};t.prototype.wrapLabelWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true};t.prototype.cornerWatcher=function(t,e){this.shouldUpdateCorners=true};t.prototype.intervalRatioWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldCheckLabelAxis=true;this.shouldSetLabelPosition=true;this.shouldCheckLabelColor=true;this.shouldUpdateAnnotations=true};t.prototype.groupIntervalRatioWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldSetLabelPosition=true;this.shouldCheckLabelColor=true;this.shouldUpdateAnnotations=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true};t.prototype.labelWatcher=function(t,e){var i=t&&t.placement?t.placement:false;var r=e&&e.placement?e.placement:false;var n=t&&t.collisionPlacement?t.collisionPlacement:false;var s=e&&e.collisionPlacement?e.collisionPlacement:false;var a=t&&t.visible;var o=e&&e.visible;var l=t&&t.labelAccessor?t.labelAccessor:false;var u=e&&e.labelAccessor?e.labelAccessor:false;var h=t&&t.format?t.format:false;var c=e&&e.format?e.format:false;var d=t&&t.collisionHideOnly?t.collisionHideOnly:false;var f=e&&e.collisionHideOnly?e.collisionHideOnly:false;if(a!==o){this.shouldSetLabelOpacity=true}if(i!==r||n!==s||d!==f){this.shouldValidateLabelPlacement=true;this.shouldSetLabelPosition=true;this.shouldCheckLabelColor=true}if(l!==u||h!==c){this.shouldValidateDataLabelAccessor=true;this.shouldUpdateTableData=true;this.shouldSetLabelContent=true;this.shouldCheckLabelColor=true}};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideTextures?t.hideTextures:false;var w=e&&e.hideTextures?e.hideTextures:false;if(A!==w){this.shouldSetTextures=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true}var x=t&&t.showSmallLabels?t.showSmallLabels:false;var S=e&&e.showSmallLabels?e.showSmallLabels:false;if(x!==S){this.shouldSetLabelOpacity=true}var L=t&&t.hideStrokes?t.hideStrokes:false;var k=e&&e.hideStrokes?e.hideStrokes:false;if(L!==k){this.shouldUpdateLegend=true;this.shouldSetStrokes=true;this.shouldDrawInteractionState=true}var _=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var C=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var D=t&&t.elementsAreInterface?t.elementsAreInterface:false;var M=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(_!==C||D!==M){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(D!==M){this.shouldDrawInteractionState=true}};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldCheckValueAxis=true;this.shouldUpdateGeometries=true;this.shouldSetLabelPosition=true;this.shouldCheckLabelColor=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.clickWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetSelectionClass=true};t.prototype.hoverWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"clustered-bar-chart-"+mc();t.clusteredBarChartEl.id=t.chartID;t.setTagLevels();t.prepareData();t.prepareLegendData();t.setDimensions();t.prepareScales();t.validateInteractionKeys();t.validateDataLabelAccessor();t.validateAxes();t.validateLabelPlacement();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.shouldValidateAccessibilityProps();t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTextures();t.setStrokes();t.drawXGrid();t.drawYGrid();t.setGlobalSelections();t.setTestingAttributes();t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.drawGeometries();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawLegendElements();t.bindLegendInteractivity();t.setLabelContent();t.processLabelPosition(t.updateLabels,false,true,false);t.drawReferenceLines();t.setSelectedClass();t.checkLabelColorAgainstBackground();t.updateCursor();t.bindInteractivity();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();t.drawBaseline();t.onChangeHandler();Ec(t.root.node(),t.barG.node());t.setGroupAccessibilityID();t.defaults=false;t.updateLabels.classed("entering",false);e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldSetTextures){t.setTextures();t.shouldSetTextures=false}if(t.shouldSetStrokes){t.setStrokes();t.shouldSetStrokes=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldEnterUpdateExit){t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateGeometries){t.drawGeometries();t.shouldUpdateGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateCorners){t.setRoundedCorners();t.shouldUpdateCorners=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldSetLabelContent){t.setLabelContent();t.shouldSetLabelContent=false}if(t.shouldSetLabelPosition){t.setLabelPosition();t.shouldSetLabelPosition=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldCheckLabelColor){t.checkLabelColorAgainstBackground();t.shouldCheckLabelColor=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateLegendInteractivity){t.bindLegendInteractivity();t.shouldUpdateLegendInteractivity=false}if(t.shouldSetLegendCursor){t.setLegendCursor();t.shouldSetLegendCursor=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateBaseline){t.drawBaseline();t.shouldUpdateBaseline=false}t.onChangeHandler();t.updateLabels.classed("entering",false);e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;md(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]};t.prototype.validateDataLabelAccessor=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor};t.prototype.validateLabelPlacement=function(){if(this.layout==="vertical"){if(this.dataLabel.placement!=="top"&&this.dataLabel.placement!=="bottom"&&this.dataLabel.placement!=="auto"){this.dataLabel.placement="top"}}else{if(this.dataLabel.placement!=="right"&&this.dataLabel.placement!=="left"&&this.dataLabel.placement!=="auto"){this.dataLabel.placement="right"}}};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?cd(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.prepareData=function(){var t=this;this.data.map((function(e){e[t.valueAccessor]=parseFloat(e[t.valueAccessor]);e[t.groupAccessor]=e[t.groupAccessor]instanceof Date?ld({date:e[t.groupAccessor],format:t.layout==="vertical"?t.xAxis.format:t.yAxis.format,offsetTimezone:true}):e[t.groupAccessor]}));this.nest=vo().key((function(e){return e[t.groupAccessor]})).entries(this.data);this.datakeys=this.nest.map((function(t){return t.key}))};t.prototype.setTableData=function(){var t=vd(this,Zc,"clustered-bar-chart");this.tableData=dd(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareScales=function(){var t=this;var e=this.minValueOverride&&this.minValueOverride<ho(this.data,(function(e){return e[t.valueAccessor]}))?this.minValueOverride:ho(this.data,(function(e){return e[t.valueAccessor]}));if(this.layout==="vertical"){this.y=Au().domain([Math.min(0,e),this.maxValueOverride||uo(this.data,(function(e){return e[t.valueAccessor]}))]).range([this.innerPaddedHeight,0]);this.x0=_o().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedWidth,0]:[0,this.innerPaddedWidth]).padding(this.groupIntervalRatio);this.x1=_o().domain(this.nest[0].values.map((function(e){return e[t.ordinalAccessor]}))).rangeRound([0,this.x0.bandwidth()]).padding(this.barIntervalRatio)}else if(this.layout==="horizontal"){this.x=Au().domain([Math.min(0,e),this.maxValueOverride||uo(this.data,(function(e){return e[t.valueAccessor]}))]).range([0,this.innerPaddedWidth]);this.y0=_o().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedHeight,0]:[0,this.innerPaddedHeight]).padding(this.groupIntervalRatio);this.y1=_o().domain(this.nest[0].values.map((function(e){return e[t.ordinalAccessor]}))).rangeRound([0,this.y0.bandwidth()]).padding(this.barIntervalRatio)}};t.prototype.validateAxes=function(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!(this.layout==="vertical")&&this.xAxis.gridVisible});this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:this.layout==="vertical"&&this.yAxis.gridVisible})};t.prototype.setColors=function(){this.preparedColors=this.colors?Qc(this.colors):ud(this.colorPalette,this.nest[0].values.length)};t.prototype.setTextures=function(){var t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6){this.colorArr=this.preparedColors}else{var e=t;var i=_c({colors:e,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical",disableTransitions:!this.duration});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}};t.prototype.setStrokes=function(){this.strokes=kc({root:this.svg.node(),id:this.chartID,colors:this.preparedColors.range?this.preparedColors.range():this.preparedColors,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle})};t.prototype.renderRootElements=function(){this.svg=$a(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","grid-group");this.barG=this.rootG.append("g").attr("class","clustered-bar-group");this.labelG=this.rootG.append("g").attr("class","clustered-bar-dataLabel-group");this.legendG=$a(this.clusteredBarChartEl).select(".clustered-bar-legend").append("svg");this.tooltipG=$a(this.clusteredBarChartEl).select(".clustered-bar-tooltip");this.references=this.rootG.append("g").attr("class","clustered-bar-reference-line-group")};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){$a(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid","chart-container");$a(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid","main-title");$a(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.barG.attr("data-testid","clustered-bar-group");this.updateBarWrappers.attr("data-testid","clustered-bar-wrapper").attr("data-id",(function(t){return"clustered-bar-wrapper-"+t.key}));this.update.attr("data-testid","bar").attr("data-id",(function(e){return"bar-"+e[t.groupAccessor]+"-"+e[t.ordinalAccessor]}));this.labelG.attr("data-testid","clustered-bar-dataLabel-group");this.updateLabelWrappers.attr("data-testid","clustered-bar-dataLabel-wrapper").attr("data-id",(function(t){return"clustered-bar-dataLabel-wrapper-"+t.key}));this.updateLabels.attr("data-testid","dataLabel").attr("data-id",(function(e){return"dataLabel-"+e[t.groupAccessor]+"-"+e[t.ordinalAccessor]}));this.references.attr("data-testid","reference-line-group");this.svg.select("defs").attr("data-testid","pattern-defs");this.references.selectAll(".clustered-bar-reference-line").attr("data-testid","reference-line");this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid","reference-line-label")}else{$a(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid",null);$a(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid",null);$a(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.barG.attr("data-testid",null);this.updateBarWrappers.attr("data-testid",null).attr("data-id",null);this.update.attr("data-testid",null).attr("data-id",null);this.labelG.attr("data-testid",null);this.updateLabelWrappers.attr("data-testid",null).attr("data-id",null);this.updateLabels.attr("data-testid",null).attr("data-id",null);this.references.attr("data-testid",null);this.svg.select("defs").attr("data-testid",null);this.references.selectAll(".clustered-bar-reference-line").attr("data-testid",null);this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid",null)}};t.prototype.reSetRoot=function(){var t=wd({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:xu});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=wd({selection:this.root,duration:this.duration,namespace:"root_reset",easing:xu});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=wd({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:xu});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");qc(this.chartID,this.width)};t.prototype.drawXAxis=function(){id({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.x0:this.x,left:false,wrapLabel:this.wrapLabel&&this.layout==="vertical"?this.x0.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible,duration:this.duration})};t.prototype.drawYAxis=function(){id({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.y:this.y0,left:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible,duration:this.duration})};t.prototype.setXAxisAccessibility=function(){Rc({rootEle:this.clusteredBarChartEl,hasXAxis:this.innerXAxis?this.innerXAxis.visible:false,xAxis:this.layout==="vertical"?this.x0||false:this.x||false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){Yc({rootEle:this.clusteredBarChartEl,hasYAxis:this.innerYAxis?this.innerYAxis.visible:false,yAxis:this.layout==="vertical"?this.y||false:this.y0||false,yAxisLabel:this.yAxis.label?this.yAxis.label:""})};t.prototype.drawBaseline=function(){id({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.x0:this.x,left:false,padding:this.padding,markOffset:this.layout==="vertical"?this.y(0)||-1:this.y0(0)||-1,hide:!(this.layout==="vertical"),duration:this.duration});id({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.y:this.y0,left:true,padding:this.padding,markOffset:this.layout==="vertical"?this.x0(0)||-1:this.x(0)||-1,hide:this.layout==="vertical",duration:this.duration})};t.prototype.drawXGrid=function(){rd(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.layout==="vertical"?this.x0:this.x,false,!this.innerXAxis.gridVisible,this.xAxis.tickInterval,this.duration)};t.prototype.drawYGrid=function(){rd(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.layout==="vertical"?this.y:this.y0,true,!this.innerYAxis.gridVisible,this.yAxis.tickInterval,this.duration)};t.prototype.setGlobalSelections=function(){var t=this;var e=this.barG.selectAll(".clustered-bar-wrapper").data(this.nest,(function(t){return t.key}));this.enterBarWrappers=e.enter().append("g");this.exitBarWrappers=e.exit();this.updateBarWrappers=e.merge(this.enterBarWrappers);var i=this.updateBarWrappers.selectAll(".clustered-bar").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enter=i.enter().append("rect");this.exit=i.exit();this.update=i.merge(this.enter);this.enterSize=this.enter.size();this.exitSize=this.exit.size();var r=this.labelG.selectAll("g").data(this.nest,(function(t){return t.key}));this.enterLabelWrappers=r.enter().append("g");this.exitLabelWrappers=r.exit();this.updateLabelWrappers=r.merge(this.enterLabelWrappers);var n=this.updateLabelWrappers.selectAll("text").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enterLabels=n.enter().append("text");this.exitLabels=n.exit();this.updateLabels=n.merge(this.enterLabels)};t.prototype.enterGeometries=function(){var t=this;this.enter.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"max":"min";this.enterBarWrappers.attr("class","clustered-bar-wrapper").classed("entering",true).attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"})).each((function(t,e,i){Dc(i[e])}));this.enter.attr("class","clustered-bar").attr("cursor",!this.suppressEvents?this.cursor:null).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).each((function(t,e,i){Dc(i[e])})).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("fill",(function(e,i){var r=t.clickHighlight&&t.clickHighlight.length>0&&td(e,t.clickHighlight,t.innerInteractionKeys);var n=t.hoverHighlight&&ed(e,t.hoverHighlight,t.innerInteractionKeys);var s=t.colorArr[i];return r&&t.clickStyle.color?bd[t.clickStyle.color]||t.clickStyle.color:r?s:n&&t.hoverStyle.color?bd[t.hoverStyle.color]||t.hoverStyle.color:s})).attr("opacity",0).attr(r,(function(e){return t[r](Math[s](0,e[t.valueAccessor]))})).attr(n,(function(e){return Math.abs(t.layout==="vertical"?t[r](0)-t[r](e[t.valueAccessor]):t[r](e[t.valueAccessor])-t[r](0))})).attr(e,(function(i){return t[e+"1"](i[t.ordinalAccessor])})).attr(i,this[e+"1"].bandwidth());if(!this.defaults){this.enter.classed("entering",true).attr(e,(function(i,r,n){var s=$a(n[r].parentNode);var a=s.classed("entering");var o=a?t[e+"0"](s.datum().key):t[e+"1"](i[t.ordinalAccessor]);var l=a?t[e+"0"].bandwidth()/2:t[e+"1"].bandwidth()/2;var u=(o+l)/(t.innerPaddedWidth/2);o=a?0:o;var h=o+l*u;return h})).attr(i,0)}this.enterBarWrappers.order();this.enter.order()};t.prototype.updateGeometries=function(){var t=this;this.update.interrupt();this.update.transition("opacity").duration((function(e,i,r){if($a(r[i]).classed("entering")){$a(r[i]).classed("entering",false);return t.duration}return 0})).ease(xu).attr("opacity",(function(e){return Jc(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))};t.prototype.exitGeometries=function(){var t=this;this.exitBarWrappers.interrupt();this.exit.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r="innerPadded"+i[0].toUpperCase()+i.substring(1);this.exit.transition("exit").duration(this.duration).ease(xu).attr("opacity",0).attr(e,(function(n,s,a){var o=$a(a[s]);var l=+o.attr(e)+ +o.attr(i)/2;l=+o.attr(e)+ +o.attr(i)/2*(l/(t[r]/2));return l})).attr(i,0);this.exitSize+=this.exitBarWrappers.selectAll(".clustered-bar").size();this.exitBarWrappers.selectAll(".clustered-bar").transition("exit_wrappers").duration(this.duration*.75).ease(xu).attr("opacity",0).attr(e,(function(i,n,s){var a=s[n].parentNode;var o=a.transform.baseVal.consolidate().matrix.e;var l=t[e+"0"].bandwidth()/2;var u=(o+l)/(t[r]/2);var h=l*u;return h})).attr(i,0);this.update.transition("accessibilityAfterExit").duration(this.duration).ease(xu).call(gd,(function(){var e=Bc(t.rootG.node());t.exit.remove();t.exitBarWrappers.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();Xc({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawGeometries=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"max":"min";this.updateBarWrappers.transition("update").duration(this.duration).ease(xu).attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"})).call(gd,(function(){t.updateBarWrappers.classed("entering",false)}));this.update.classed("geometryIsMoving",(function(a,o,l){var u=wc($a(l[o]),[{attr:e,numeric:true,newValue:t[e+"1"](a[t.ordinalAccessor])},{attr:i,numeric:true,newValue:t[e+"1"].bandwidth()},{attr:r,numeric:true,newValue:t[r](Math[s](0,a[t.valueAccessor]))},{attr:n,numeric:true,newValue:Math.abs(t.layout==="vertical"?t[r](0)-t[r](a[t.valueAccessor]):t[r](a[t.valueAccessor])-t[r](0))}]);return u})).attr("data-"+e,(function(i){return t.layout==="vertical"?t[e+"1"](i[t.ordinalAccessor]):t[e+"1"](i[t.ordinalAccessor])})).attr("data-translate-x",(function(e){return(t.layout==="vertical"?t.x0(e[t.groupAccessor]):0)+t.padding.left+t.margin.left})).attr("data-translate-y",(function(e){return(t.layout==="vertical"?0:t.y0(e[t.groupAccessor]))+t.padding.top+t.margin.top})).attr("data-"+i,this[e+"1"].bandwidth()).attr("data-"+r,(function(e){return t[r](Math[s](0,e[t.valueAccessor]))})).attr("data-"+n,(function(e){return Math.abs(t.layout==="vertical"?t[r](0)-t[r](e[t.valueAccessor]):t[r](e[t.valueAccessor])-t[r](0))})).transition("update").duration((function(e,i,r){return $a(r[i]).classed("entering")?t.duration/2:t.duration})).delay((function(e,i,r){return $a(r[i]).classed("entering")?t.duration/2:0})).ease(xu).attr(r,(function(e){return t[r](Math[s](0,e[t.valueAccessor]))})).attr(n,(function(e){return Math.abs(t.layout==="vertical"?t[r](0)-t[r](e[t.valueAccessor]):t[r](e[t.valueAccessor])-t[r](0))})).attr(e,(function(i){return t[e+"1"](i[t.ordinalAccessor])})).attr(i,this[e+"1"].bandwidth()).call(gd,(function(){t.update.classed("geometryIsMoving",false);t.updateInteractionState();t.checkLabelColorAgainstBackground();Xc({parentGNode:t.rootG.node()})}))};t.prototype.updateInteractionState=function(){var t=this;Lc(this.svg.node());this.update.interrupt("opacity");this.update.attr("opacity",(function(e){return Jc(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).attr("fill",(function(e,i){var r=t.clickHighlight&&t.clickHighlight.length>0&&td(e,t.clickHighlight,t.innerInteractionKeys);var n=t.hoverHighlight&&ed(e,t.hoverHighlight,t.innerInteractionKeys);var s=t.colorArr[i];return r&&t.clickStyle.color?bd[t.clickStyle.color]||t.clickStyle.color:r?s:n&&t.hoverStyle.color?bd[t.hoverStyle.color]||t.hoverStyle.color:s})).attr("filter",(function(e,i,r){if(!t.accessibility.hideStrokes&&!$a(r[i]).classed("geometryIsMoving")){var n=t.clickHighlight&&t.clickHighlight.length>0&&td(e,t.clickHighlight,t.innerInteractionKeys);var s=t.hoverHighlight&&ed(e,t.hoverHighlight,t.innerInteractionKeys);var a=t.preparedColors[i];var o=n?"click":s&&!$a(r[i]).classed("geometryIsMoving")?"hover":"rest";var l=n&&t.clickStyle.color?bd[t.clickStyle.color]||t.clickStyle.color:n?a:s&&t.hoverStyle.color?bd[t.hoverStyle.color]||t.hoverStyle.color:a;if(o==="hover"){Sc({inputElement:r[i],id:t.chartID,key:e[t.ordinalAccessor]+e[t.groupAccessor],strokeWidth:t.hoverStyle.strokeWidth,fill:l})}return t.strokes[o+l]}return null}));Xc({parentGNode:this.rootG.node()});sd({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity});this.updateLabels.interrupt("opacity");var e=this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly;var i=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;this.processLabelOpacity(this.updateLabels,e);if(e){var r=this.updateLabels.filter((function(t,e,i){return $a(i[e]).classed("collision-added")}));var n=this.updateLabels.filter((function(t,e,i){return $a(i[e]).classed("collision-removed")})).attr("data-use-dx",i).attr("data-use-dy",i);if(n.size()>0){this.bitmaps=Sd({bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[xd(this.width,0),xd(this.height,0)],hideOnly:false,removeOnly:true});n.classed("collision-removed",false)}if(r.size()>0){this.processLabelPosition(r,false,false,true);r.classed("collision-added",false)}}};t.prototype.setLabelOpacity=function(){this.processLabelOpacity(this.updateLabels)};t.prototype.processLabelOpacity=function(t,e){var i=this;var r=this.dataLabel.visible?1:0;var n=this.layout==="vertical"?"x":"y";var s=this.layout==="vertical"?"width":"height";var a=this.layout==="vertical"?"y":"x";var o=this.layout==="vertical"?"height":"width";var l=this[n+"0"].bandwidth()/this.nest[0].values.length;t.attr("opacity",(function(t,u,h){var c=+$a(h[u]).attr("opacity");var d=$a(h[u]).style("visibility");var f={};f[s]=i.dataLabel.placement==="left"||i.dataLabel.placement==="bottom"?i[n+"1"].bandwidth():l;if(i.dataLabel.placement==="left"||i.dataLabel.placement==="bottom"){f[o]=Math.abs(i.layout==="vertical"?i[a](0)-i[a](t[i.valueAccessor]):i[a](t[i.valueAccessor])-i[a](0))}var p=i.dataLabel.placement==="auto"||i.dataLabel.collisionHideOnly||i.accessibility.showSmallLabels||Ac({text:od(t,i.innerLabelAccessor,i.dataLabel.format),dimensions:f,fontSize:14});var y=p?Jc(t,r,i.hoverOpacity,i.hoverHighlight,i.clickHighlight,i.innerInteractionKeys)<1?0:1:0;if((y===1&&d==="hidden"||c!==y)&&e){if(y===1){$a(h[u]).classed("collision-added",true).style("visibility",null)}else{$a(h[u]).classed("collision-removed",true)}}return y}))};t.prototype.checkLabelColorAgainstBackground=function(){var t=this;this.updateLabels.attr("fill",(function(e,i,r){return t.textTreatmentHandler(e,i,r)}))};t.prototype.setRoundedCorners=function(){this.update.transition("corners").duration(this.duration).ease(xu).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=Jc(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;Kc(r[i],n,s);return n}))};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);this.updateLabels.attr("cursor",!this.suppressEvents?this.cursor:null)};t.prototype.enterDataLabels=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.dataLabel.visible?1:0;this.enterLabelWrappers.attr("class","clustered-bar-label-wrapper").classed("entering",true).attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"}));this.enterLabels.attr("class","clustered-bar-dataLabel").classed("entering",true).classed("clustered-bar-dataLabel-horizontal",false).classed("clustered-bar-dataLabel-vertical",false).classed("clustered-bar-dataLabel-"+this.layout,true).attr("cursor",!this.suppressEvents?this.cursor:null).attr("opacity",(function(e){return Jc(e,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:Number.EPSILON})).attr("fill",this.textTreatmentHandler).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.enterLabels.attr(e,(function(i,r,n){var s=e+"0";var a=e+"1";var o=e==="x"?"innerPaddedWidth":"innerPaddedHeight";var l=$a(n[r].parentNode);var u=l.classed("entering");var h=u?t[s](l.datum().key):t[a](i[t.ordinalAccessor]);var c=u?t[s].bandwidth()/2:t[a].bandwidth()/2;var d=(h+c)/(t[o]/2);h=u?0:h;var f=h+c*d;return f}))};t.prototype.updateDataLabels=function(){var t=this;this.updateLabels.interrupt();var e=this.dataLabel.visible?1:0;this.updateLabels.transition("opacity").duration((function(e,i,r){if($a(r[i]).classed("entering")){return t.duration/4}return 0})).delay((function(e,i,r){if($a(r[i]).classed("entering")){return t.duration/4*3}return 0})).ease(xu).attr("opacity",(function(i){return Jc(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1})).call(gd,(function(){t.updateLabels.classed("entering",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabelWrappers.selectAll("text").transition("exit").ease(xu).duration(this.duration/3).attr("opacity",0).call(gd,(function(){t.exitLabelWrappers.remove()}));this.exitLabels.transition("exit").ease(xu).duration(this.duration/3).attr("opacity",0).remove()};t.prototype.setLabelContent=function(){var t=this;this.updateLabels.text((function(e){return od(e,t.innerLabelAccessor,t.dataLabel.format)}))};t.prototype.setLabelPosition=function(){var t=this;this.updateLabelWrappers.classed("clustered-bar-dataLabel-horizontal",false).classed("clustered-bar-dataLabel-vertical",false).classed("clustered-bar-dataLabel-"+this.layout,true);var e=wd({selection:this.updateLabelWrappers,duration:this.duration,namespace:"position-label-wrappers",easing:xu});e.attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"})).call(gd,(function(){t.updateLabelWrappers.classed("entering",false)}));var i=this.enterLabels.filter((function(t,e,i){return $a(i[e]).classed("entering")}));var r=this.updateLabels.filter((function(t,e,i){return!$a(i[e]).classed("entering")}));if(i.size()>0){this.processLabelPosition(i,false,true,false);this.processLabelPosition(r,true,false,true)}else{this.processLabelPosition(r,true,true,false)}};t.prototype.processLabelPosition=function(t,e,i,r){var n=this;var s=this.layout==="vertical"?"x":"y";var a=this.layout==="vertical"?"width":"height";var o=this.layout==="vertical"?"y":"x";var l=this.layout==="vertical"?"height":"width";var u=this.layout==="vertical"?"max":"min";var h=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;var c=15;var d={vertical:{top:{validPositions:["top","bottom"],offsets:[4,1]},middle:{validPositions:["middle","top"],offsets:[1,c/2]},bottom:{validPositions:["middle","top"],offsets:[1,c/2]}},horizontal:{right:{validPositions:["right","left"],offsets:[4,8]},middle:{validPositions:["middle","right"],offsets:[1,15]},left:{validPositions:["left","right"],offsets:[1,20]}}};var f=this.dataLabel&&this.dataLabel.collisionPlacement;var p=f&&d[this.layout][f]?this.dataLabel.collisionPlacement:this.layout==="vertical"?"top":"right";t.style("visibility",(function(t,e,i){return n.dataLabel.placement==="auto"||n.dataLabel.collisionHideOnly?$a(i[e]).style("visibility"):null})).attr("data-"+s,(function(t,e,i){if(e===0){var r=i[e];var a=getComputedStyle(r);var o=parseFloat(a.fontSize);c=Math.max(o-1,1)}return n[s+"1"](t[n.ordinalAccessor])})).attr("data-translate-x",(function(t){return(n.layout==="vertical"?n.x0(t[n.groupAccessor]):0)+n.padding.left+n.margin.left})).attr("data-translate-y",(function(t){return(n.layout==="vertical"?0:n.y0(t[n.groupAccessor]))+n.padding.top+n.margin.top})).attr("data-"+a,this[s+"1"].bandwidth()).attr("data-"+o,(function(t){return n[o](Math[u](0,t[n.valueAccessor]))})).attr("data-"+l,(function(t){return Math.abs(n.layout==="vertical"?n[o](0)-n[o](t[n.valueAccessor]):n[o](t[n.valueAccessor])-n[o](0))}));var y=wd({selection:t,duration:!e?0:this.duration,namespace:"position-labels",easing:xu});this.bitmaps=yd({root:y,xScale:this.layout==="vertical"?this.x1:this.x,yScale:this.layout==="vertical"?this.y:this.y1,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"bar",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",bitmaps:!i?this.bitmaps:undefined,labelSelection:y,avoidMarks:[this.update],validPositions:h?["middle"]:d[this.layout][p].validPositions,offsets:h?[1]:d[this.layout][p].offsets,accessors:[this.groupAccessor,this.ordinalAccessor,"key"],size:[xd(this.width,0),xd(this.height,0)],boundsScope:h?undefined:p,hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly,suppressMarkDraw:r}})};t.prototype.drawReferenceLines=function(){var t=this;var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class","clustered-bar-reference").attr("opacity",1);var r=i.append("line");r.attr("class","clustered-bar-reference-line").attr("opacity",0);var n=i.append("text");n.attr("class","clustered-bar-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".clustered-bar-reference-line").data((function(t){return[t]})).transition("merge").ease(xu).duration(this.duration);var o=s.selectAll(".clustered-bar-reference-line-label").data((function(t){return[t]})).transition("merge").ease(xu).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(xu).duration(this.duration).attr("opacity",0).remove();if(this.layout==="vertical"){i.attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));s.transition("merge").ease(xu).duration(this.duration).attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em")}else if(this.layout==="horizontal"){i.attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));s.transition("merge").ease(xu).duration(this.duration).attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));r.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);a.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);n.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}));o.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}))}a.style("stroke",bd[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",bd[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.prepareLegendData=function(){this.legendData=this.nest[0].values};t.prototype.drawLegendElements=function(){nd({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.bindLegendInteractivity=function(){var t=this;$a(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:"").on("click",this.legend.interactive&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.legend.interactive&&!this.suppressEvents?function(e){return t.hoverFunc.emit(e)}:null).on("mouseout",this.legend.interactive&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.setLegendCursor=function(){$a(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:null)};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateLabels.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.drawAnnotations=function(){$c({source:this.rootG.node(),data:this.annotations,xScale:this.layout!=="horizontal"?this.x0:this.x,xAccessor:this.layout!=="horizontal"?this.groupAccessor:this.valueAccessor,yScale:this.layout!=="horizontal"?this.y:this.y0,yAccessor:this.layout!=="horizontal"?this.valueAccessor:this.groupAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})};t.prototype.setAnnotationAccessibility=function(){Fc(this.clusteredBarChartEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=Ad(this.highestHeadingLevel);this.bottomLevel=Ad(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){Cc({rootEle:this.clusteredBarChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"clustered-bar-chart",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){Tc({node:this.svg.node(),chartTag:"clustered-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:vd(this,Zc,"clustered-bar-chart"),groupAccessor:this.groupAccessor,groupName:"cluster",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){Dc(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=vd(this,Zc,"clustered-bar-chart");this.update.each((function(i,r,n){Mc({node:n[r],geomType:"bar",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"cluster",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});Uc({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateBarWrappers.each((function(e,i,r){Uc({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){Ic(this.clusteredBarChartEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){Nc(this.clusteredBarChartEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){Hc(this.clusteredBarChartEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){Wc(this.clusteredBarChartEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){Pc(this.clusteredBarChartEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){Gc(this.clusteredBarChartEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){Oc(this.clusteredBarChartEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){Vc({rootEle:this.clusteredBarChartEl,parentGNode:this.barG.node(),chartTag:"clustered-bar-chart",geomType:"bar",groupName:"cluster"})};t.prototype.setChartAccessibilityStructureNotes=function(){zc(this.clusteredBarChartEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){pd(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&t[this.ordinalAccessor]){this.eventsTooltip({data:t,evt:Ha,isToShow:true})}};t.prototype.onMouseOutHandler=function(){pd(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){fd(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;ad({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"clustered"})};t.prototype.render=function(){var t="light";this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldCheckValueAxis){if(this.layout==="horizontal"){this.shouldUpdateXAxis=true;this.shouldUpdateXGrid=true}else if(this.layout==="vertical"){this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true}this.shouldCheckValueAxis=false}if(this.shouldCheckLabelAxis){if(this.layout==="vertical"){this.shouldUpdateXAxis=true;this.shouldUpdateXGrid=true;this.shouldSetXAxisAccessibility=true}else if(this.layout==="horizontal"){this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true;this.shouldSetYAxisAccessibility=true}this.shouldCheckLabelAxis=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateLegendData){this.prepareLegendData();this.shouldUpdateLegendData=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldValidateAxes){this.validateAxes();this.shouldValidateAxes=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldValidateLabelPlacement){this.validateLabelPlacement();this.shouldValidateLabelPlacement=false}return r("div",{class:"o-layout is--"+this.layout+" "+t},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"clustered-bar-main-title vcl-main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions clustered-bar-sub-title vcl-sub-title"},this.subTitle),r("div",{class:"clustered-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"bar",groupName:"cluster",chartTag:"clustered-bar-chart",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-clustered-bar-container"}),r("div",{class:"clustered-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))};t.prototype.init=function(){var t=Object.keys(Lu);var e=0;var i={mainTitle:{exception:""},subTitle:{exception:""},barIntervalRatio:{exception:0},groupIntervalRatio:{exception:0},showTooltip:{exception:false},wrapLabel:{exception:false},hoverOpacity:{exception:0}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:Lu[t[e]]}};Object.defineProperty(t.prototype,"clusteredBarChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],reverseOrder:["reverseOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],colors:["colorsWatcher"],colorPalette:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],groupIntervalRatio:["groupIntervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}clustered-bar-chart{cursor:default}clustered-bar-chart .annotations{pointer-events:none}clustered-bar-chart .annotations .handle{pointer-events:all}clustered-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}clustered-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}clustered-bar-chart .hidden{display:none}clustered-bar-chart #visa-viz-d3-clustered-bar-container{clear:both}clustered-bar-chart .clustered-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}clustered-bar-chart .clustered-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}clustered-bar-chart .clustered-bar-legend .key-dot{margin:3px 8px}clustered-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}clustered-bar-chart .light .grid path{stroke-width:0}clustered-bar-chart .light .axis{font-size:12px}clustered-bar-chart .light .axis .tick text{fill:#767676}clustered-bar-chart .light .axis .tick line{stroke:#767676}clustered-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .light .y.axis path{stroke:#767676;opacity:0}clustered-bar-chart .light .x.axis path{stroke:#767676}clustered-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}clustered-bar-chart .dark .grid path{stroke-width:0}clustered-bar-chart .dark .axis{font-size:12px}clustered-bar-chart .dark .axis .tick line{stroke:lightgrey}clustered-bar-chart .dark .axis .tick text{fill:grey}clustered-bar-chart .dark .axis path{stroke:black}clustered-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .dark .o-layout--chart svg{background:black}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-vertical{text-anchor:middle}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-horizontal{text-anchor:start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=hd();var kd="http://www.w3.org/1999/xhtml";var _d={svg:"http://www.w3.org/2000/svg",xhtml:kd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cd(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return _d.hasOwnProperty(e)?{space:_d[e],local:t}:t}function Dd(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===kd&&e.documentElement.namespaceURI===kd?e.createElement(t):e.createElementNS(i,t)}}function Md(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ud(t){var e=Cd(t);return(e.local?Md:Dd)(e)}function Td(){}function Ed(t){return t==null?Td:function(){return this.querySelector(t)}}function Id(t){if(typeof t!=="function")t=Ed(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new fp(r,this._parents)}function Nd(){return[]}function Hd(t){return t==null?Nd:function(){return this.querySelectorAll(t)}}function Wd(t){if(typeof t!=="function")t=Hd(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new fp(r,n)}function Pd(t){return function(){return this.matches(t)}}function Gd(t){if(typeof t!=="function")t=Pd(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new fp(r,this._parents)}function Od(t){return new Array(t.length)}function Vd(){return new fp(this._enter||this._groups.map(Od),this._parents)}function Rd(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}Rd.prototype={constructor:Rd,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Yd(t){return function(){return t}}var zd="$";function Fd(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new Rd(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function Xd(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=zd+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=zd+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new Rd(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function Bd(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?Xd:Fd,r=this._parents,n=this._groups;if(typeof t!=="function")t=Yd(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new fp(a,r);a._enter=o;a._exit=l;return a}function Kd(){return new fp(this._exit||this._groups.map(Od),this._parents)}function qd(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function jd(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new fp(a,this._parents)}function $d(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function Zd(t){if(!t)t=Qd;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new fp(n,this._parents).order()}function Qd(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Jd(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function tf(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function ef(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function rf(){var t=0;this.each((function(){++t}));return t}function nf(){return!this.node()}function sf(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function af(t){return function(){this.removeAttribute(t)}}function of(t){return function(){this.removeAttributeNS(t.space,t.local)}}function lf(t,e){return function(){this.setAttribute(t,e)}}function uf(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function hf(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function cf(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function df(t,e){var i=Cd(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?of:af:typeof e==="function"?i.local?cf:hf:i.local?uf:lf)(i,e))}function ff(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function pf(t){return function(){this.style.removeProperty(t)}}function yf(t,e,i){return function(){this.style.setProperty(t,e,i)}}function vf(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function gf(t,e,i){return arguments.length>1?this.each((e==null?pf:typeof e==="function"?vf:yf)(t,e,i==null?"":i)):bf(this.node(),t)}function bf(t,e){return t.style.getPropertyValue(e)||ff(t).getComputedStyle(t,null).getPropertyValue(e)}function mf(t){return function(){delete this[t]}}function Af(t,e){return function(){this[t]=e}}function wf(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function xf(t,e){return arguments.length>1?this.each((e==null?mf:typeof e==="function"?wf:Af)(t,e)):this.node()[t]}function Sf(t){return t.trim().split(/^|\s+/)}function Lf(t){return t.classList||new kf(t)}function kf(t){this._node=t;this._names=Sf(t.getAttribute("class")||"")}kf.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function _f(t,e){var i=Lf(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function Cf(t,e){var i=Lf(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function Df(t){return function(){_f(this,t)}}function Mf(t){return function(){Cf(this,t)}}function Uf(t,e){return function(){(e.apply(this,arguments)?_f:Cf)(this,t)}}function Tf(t,e){var i=Sf(t+"");if(arguments.length<2){var r=Lf(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?Uf:e?Df:Mf)(i,e))}function Ef(){this.textContent=""}function If(t){return function(){this.textContent=t}}function Nf(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Hf(t){return arguments.length?this.each(t==null?Ef:(typeof t==="function"?Nf:If)(t)):this.node().textContent}function Wf(){this.innerHTML=""}function Pf(t){return function(){this.innerHTML=t}}function Gf(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Of(t){return arguments.length?this.each(t==null?Wf:(typeof t==="function"?Gf:Pf)(t)):this.node().innerHTML}function Vf(){if(this.nextSibling)this.parentNode.appendChild(this)}function Rf(){return this.each(Vf)}function Yf(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zf(){return this.each(Yf)}function Ff(t){var e=typeof t==="function"?t:Ud(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function Xf(){return null}function Bf(t,e){var i=typeof t==="function"?t:Ud(t),r=e==null?Xf:typeof e==="function"?e:Ed(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function Kf(){var t=this.parentNode;if(t)t.removeChild(this)}function qf(){return this.each(Kf)}function jf(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $f(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Zf(t){return this.select(t?$f:jf)}function Qf(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Jf={};var tp=null;if(typeof document!=="undefined"){var ep=document.documentElement;if(!("onmouseenter"in ep)){Jf={mouseenter:"mouseover",mouseleave:"mouseout"}}}function ip(t,e,i){t=rp(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function rp(t,e,i){return function(r){var n=tp;tp=r;try{t.call(this,this.__data__,e,i)}finally{tp=n}}}function np(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function sp(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function ap(t,e,i){var r=Jf.hasOwnProperty(t.type)?ip:rp;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function op(t,e,i){var r=np(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?ap:sp;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function lp(t,e,i){var r=ff(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function up(t,e){return function(){return lp(this,t,e)}}function hp(t,e){return function(){return lp(this,t,e.apply(this,arguments))}}function cp(t,e){return this.each((typeof e==="function"?hp:up)(t,e))}var dp=[null];function fp(t,e){this._groups=t;this._parents=e}function pp(){return new fp([[document.documentElement]],dp)}fp.prototype=pp.prototype={constructor:fp,select:Id,selectAll:Wd,filter:Gd,data:Bd,enter:Vd,exit:Kd,join:qd,merge:jd,order:$d,sort:Zd,call:Jd,nodes:tf,node:ef,size:rf,empty:nf,each:sf,attr:df,style:gf,property:xf,classed:Tf,text:Hf,html:Of,raise:Rf,lower:zf,append:Ff,insert:Bf,remove:qf,clone:Zf,datum:Qf,on:op,dispatch:cp};function yp(t){return typeof t==="string"?new fp([[document.querySelector(t)]],[document.documentElement]):new fp([[t]],dp)}function vp(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function gp(t){if(t.length===1)t=bp(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function bp(t){return function(e,i){return vp(t(e),i)}}var mp=gp(vp);var Ap=mp.right;function wp(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var xp=Math.sqrt(50),Sp=Math.sqrt(10),Lp=Math.sqrt(2);function kp(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=_p(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function _p(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=xp?10:s>=Sp?5:s>=Lp?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=xp?10:s>=Sp?5:s>=Lp?2:1)}function Cp(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=xp)n*=10;else if(s>=Sp)n*=5;else if(s>=Lp)n*=2;return e<t?-n:n}function Dp(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function Mp(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}var Up=new Date,Tp=new Date;function Ep(t,e,i,r){function n(e){return t(e=arguments.length===0?new Date:new Date(+e)),e}n.floor=function(e){return t(e=new Date(+e)),e};n.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i};n.round=function(t){var e=n(t),i=n.ceil(t);return t-e<i-t?e:i};n.offset=function(t,i){return e(t=new Date(+t),i==null?1:Math.floor(i)),t};n.range=function(i,r,s){var a=[],o;i=n.ceil(i);s=s==null?1:Math.floor(s);if(!(i<r)||!(s>0))return a;do{a.push(o=new Date(+i)),e(i,s),t(i)}while(o<i&&i<r);return a};n.filter=function(i){return Ep((function(e){if(e>=e)while(t(e),!i(e))e.setTime(e-1)}),(function(t,r){if(t>=t){if(r<0)while(++r<=0){while(e(t,-1),!i(t)){}}else while(--r>=0){while(e(t,+1),!i(t)){}}}}))};if(i){n.count=function(e,r){Up.setTime(+e),Tp.setTime(+r);t(Up),t(Tp);return Math.floor(i(Up,Tp))};n.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?n:n.filter(r?function(e){return r(e)%t===0}:function(e){return n.count(0,e)%t===0})}}return n}var Ip=Ep((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Ip.every=function(t){t=Math.floor(t);if(!isFinite(t)||!(t>0))return null;if(!(t>1))return Ip;return Ep((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,i){e.setTime(+e+i*t)}),(function(e,i){return(i-e)/t}))};var Np=1e3;var Hp=6e4;var Wp=36e5;var Pp=864e5;var Gp=6048e5;var Op=Ep((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Np)}),(function(t,e){return(e-t)/Np}),(function(t){return t.getUTCSeconds()}));var Vp=Ep((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Np)}),(function(t,e){t.setTime(+t+e*Hp)}),(function(t,e){return(e-t)/Hp}),(function(t){return t.getMinutes()}));var Rp=Ep((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Np-t.getMinutes()*Hp)}),(function(t,e){t.setTime(+t+e*Wp)}),(function(t,e){return(e-t)/Wp}),(function(t){return t.getHours()}));var Yp=Ep((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Hp)/Pp}),(function(t){return t.getDate()-1}));function zp(t){return Ep((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e*7)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Hp)/Gp}))}var Fp=zp(0);var Xp=zp(1);var Bp=zp(2);var Kp=zp(3);var qp=zp(4);var jp=zp(5);var $p=zp(6);var Zp=Ep((function(t){t.setDate(1);t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12}),(function(t){return t.getMonth()}));var Qp=Ep((function(t){t.setMonth(0,1);t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Qp.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Ep((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t);e.setMonth(0,1);e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)}))};var Jp=Ep((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Pp}),(function(t){return t.getUTCDate()-1}));function ty(t){return Ep((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e*7)}),(function(t,e){return(e-t)/Gp}))}var ey=ty(0);var iy=ty(1);var ry=ty(2);var ny=ty(3);var sy=ty(4);var ay=ty(5);var oy=ty(6);var ly=Ep((function(t){t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));ly.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Ep((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)}),(function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i*t)}))};function uy(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var hy="$";function cy(){}cy.prototype=dy.prototype={constructor:cy,has:function(t){return hy+t in this},get:function(t){return this[hy+t]},set:function(t,e){this[hy+t]=e;return this},remove:function(t){var e=hy+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===hy)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===hy)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===hy)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===hy)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===hy)++t;return t},empty:function(){for(var t in this)if(t[0]===hy)return false;return true},each:function(t){for(var e in this)if(e[0]===hy)t(this[e],e.slice(1),this)}};function dy(t,e){var i=new cy;if(t instanceof cy)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function fy(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=dy(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,py,yy)},map:function(t){return s(t,0,vy,gy)},entries:function(t){return a(s(t,0,vy,gy),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function py(){return{}}function yy(t,e,i){t[e]=i}function vy(){return dy()}function gy(t,e,i){t.set(e,i)}var by=Array.prototype;var my=by.map;var Ay=by.slice;var wy={name:"implicit"};function xy(){var t=dy(),e=[],i=[],r=wy;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==wy)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=dy();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=Ay.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return xy(e,i).unknown(r)};uy.apply(n,arguments);return n}function Sy(){var t=xy().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=wp(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return Sy(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return uy.apply(h(),arguments)}function Ly(t){var e=t.copy;t.padding=t.paddingOuter;delete t.paddingInner;delete t.paddingOuter;t.copy=function(){return Ly(e())};return t}function ky(){return Ly(Sy.apply(null,arguments).paddingInner(1))}function _y(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function Cy(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function Dy(){}var My=.7;var Uy=1/My;var Ty="\\s*([+-]?\\d+)\\s*",Ey="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Iy="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ny=/^#([0-9a-f]{3,8})$/,Hy=new RegExp("^rgb\\("+[Ty,Ty,Ty]+"\\)$"),Wy=new RegExp("^rgb\\("+[Iy,Iy,Iy]+"\\)$"),Py=new RegExp("^rgba\\("+[Ty,Ty,Ty,Ey]+"\\)$"),Gy=new RegExp("^rgba\\("+[Iy,Iy,Iy,Ey]+"\\)$"),Oy=new RegExp("^hsl\\("+[Ey,Iy,Iy]+"\\)$"),Vy=new RegExp("^hsla\\("+[Ey,Iy,Iy,Ey]+"\\)$");var Ry={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_y(Dy,Xy,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Yy,formatHex:Yy,formatHsl:zy,formatRgb:Fy,toString:Fy});function Yy(){return this.rgb().formatHex()}function zy(){return ev(this).formatHsl()}function Fy(){return this.rgb().formatRgb()}function Xy(t){var e,i;t=(t+"").trim().toLowerCase();return(e=Ny.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?By(e):i===3?new $y(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?Ky(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?Ky(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Hy.exec(t))?new $y(e[1],e[2],e[3],1):(e=Wy.exec(t))?new $y(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Py.exec(t))?Ky(e[1],e[2],e[3],e[4]):(e=Gy.exec(t))?Ky(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Oy.exec(t))?tv(e[1],e[2]/100,e[3]/100,1):(e=Vy.exec(t))?tv(e[1],e[2]/100,e[3]/100,e[4]):Ry.hasOwnProperty(t)?By(Ry[t]):t==="transparent"?new $y(NaN,NaN,NaN,0):null}function By(t){return new $y(t>>16&255,t>>8&255,t&255,1)}function Ky(t,e,i,r){if(r<=0)t=e=i=NaN;return new $y(t,e,i,r)}function qy(t){if(!(t instanceof Dy))t=Xy(t);if(!t)return new $y;t=t.rgb();return new $y(t.r,t.g,t.b,t.opacity)}function jy(t,e,i,r){return arguments.length===1?qy(t):new $y(t,e,i,r==null?1:r)}function $y(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}_y($y,jy,Cy(Dy,{brighter:function(t){t=t==null?Uy:Math.pow(Uy,t);return new $y(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?My:Math.pow(My,t);return new $y(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:Zy,formatHex:Zy,formatRgb:Qy,toString:Qy}));function Zy(){return"#"+Jy(this.r)+Jy(this.g)+Jy(this.b)}function Qy(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Jy(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function tv(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new rv(t,e,i,r)}function ev(t){if(t instanceof rv)return new rv(t.h,t.s,t.l,t.opacity);if(!(t instanceof Dy))t=Xy(t);if(!t)return new rv;if(t instanceof rv)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new rv(a,o,l,t.opacity)}function iv(t,e,i,r){return arguments.length===1?ev(t):new rv(t,e,i,r==null?1:r)}function rv(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}_y(rv,iv,Cy(Dy,{brighter:function(t){t=t==null?Uy:Math.pow(Uy,t);return new rv(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?My:Math.pow(My,t);return new rv(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new $y(nv(t>=240?t-240:t+120,n,r),nv(t,n,r),nv(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function nv(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function sv(t){return function(){return t}}function av(t,e){return function(i){return t+i*e}}function ov(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function lv(t){return(t=+t)===1?uv:function(e,i){return i-e?ov(e,i,t):sv(isNaN(e)?i:e)}}function uv(t,e){var i=e-t;return i?av(t,i):sv(isNaN(t)?e:t)}var hv=function t(e){var i=lv(e);function r(t,e){var r=i((t=jy(t)).r,(e=jy(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=uv(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function cv(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function dv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fv(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=xv(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function pv(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function yv(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function vv(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=xv(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var gv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bv=new RegExp(gv.source,"g");function mv(t){return function(){return t}}function Av(t){return function(e){return t(e)+""}}function wv(t,e){var i=gv.lastIndex=bv.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=gv.exec(t))&&(n=bv.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:yv(r,n)})}i=bv.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?Av(l[0].x):mv(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function xv(t,e){var i=typeof e,r;return e==null||i==="boolean"?sv(e):(i==="number"?yv:i==="string"?(r=Xy(e))?(e=r,hv):wv:e instanceof Xy?hv:e instanceof Date?pv:dv(e)?cv:Array.isArray(e)?fv:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?vv:yv)(t,e)}function Sv(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var Lv=180/Math.PI;var kv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _v(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*Lv,skewX:Math.atan(l)*Lv,scaleX:a,scaleY:o}}var Cv,Dv,Mv,Uv;function Tv(t){if(t==="none")return kv;if(!Cv)Cv=document.createElement("DIV"),Dv=document.documentElement,Mv=document.defaultView;Cv.style.transform=t;t=Mv.getComputedStyle(Dv.appendChild(Cv),null).getPropertyValue("transform");Dv.removeChild(Cv);t=t.slice(7,-1).split(",");return _v(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function Ev(t){if(t==null)return kv;if(!Uv)Uv=document.createElementNS("http://www.w3.org/2000/svg","g");Uv.setAttribute("transform",t);if(!(t=Uv.transform.baseVal.consolidate()))return kv;t=t.matrix;return _v(t.a,t.b,t.c,t.d,t.e,t.f)}function Iv(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:yv(t,n)},{i:l-2,x:yv(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:yv(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:yv(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:yv(t,i)},{i:o-2,x:yv(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var Nv=Iv(Tv,"px, ","px)","deg)");var Hv=Iv(Ev,", ",")",")");function Wv(t){return function(){return t}}function Pv(t){return+t}var Gv=[0,1];function Ov(t){return t}function Vv(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:Wv(isNaN(e)?NaN:.5)}function Rv(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function Yv(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=Vv(n,r),s=i(a,s);else r=Vv(r,n),s=i(s,a);return function(t){return s(r(t))}}function zv(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=Vv(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=Ap(t,e,1,r)-1;return s[i](n[i](e))}}function Fv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Xv(){var t=Gv,e=Gv,i=xv,r,n,s,a=Ov,o,l,u;function h(){o=Math.min(t.length,e.length)>2?zv:Yv;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),yv)))(i)))};c.domain=function(e){return arguments.length?(t=my.call(e,Pv),a===Ov||(a=Rv(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=Ay.call(t),h()):e.slice()};c.rangeRound=function(t){return e=Ay.call(t),i=Sv,h()};c.clamp=function(e){return arguments.length?(a=e?Rv(t):Ov,c):a!==Ov};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function Bv(t,e){return Xv()(t,e)}function Kv(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function qv(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function jv(t){return t=qv(Math.abs(t)),t?t[1]:NaN}function $v(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function Zv(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var Qv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jv(t){if(!(e=Qv.exec(t)))throw new Error("invalid format: "+t);var e;return new tg({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Jv.prototype=tg.prototype;function tg(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}tg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eg(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var ig;function rg(t,e){var i=qv(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(ig=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+qv(t,Math.max(0,e+s-1))[0]}function ng(t,e){var i=qv(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var sg={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:Kv,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ng(t*100,e)},r:ng,s:rg,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function ag(t){return t}var og=Array.prototype.map,lg=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ug(t){var e=t.grouping===undefined||t.thousands===undefined?ag:$v(og.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?ag:Zv(og.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=Jv(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!sg[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=sg[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var L=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=eg(t);if(L&&+t===0&&c!=="+")L=false;i=(L?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?lg[8+ig/3]:"")+r+(L&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var k=i.length+t.length+r.length,_=k<p?new Array(p-k+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,k=_.length>>1)+i+t+r+_.slice(k);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=Jv(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(jv(e)/3)))*3,n=Math.pow(10,-r),s=lg[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var hg;var cg;var dg;fg({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function fg(t){hg=ug(t);cg=hg.format;dg=hg.formatPrefix;return hg}function pg(t){return Math.max(0,-jv(Math.abs(t)))}function yg(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jv(e)/3)))*3-jv(Math.abs(t)))}function vg(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,jv(e)-jv(t))+1}function gg(t,e,i,r){var n=Cp(t,e,i),s;r=Jv(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=yg(n,a)))r.precision=s;return dg(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=vg(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=pg(n)))r.precision=s-(r.type==="%")*2;break}}return cg(r)}function bg(t){var e=t.domain;t.ticks=function(t){var i=e();return kp(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return gg(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=_p(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=_p(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=_p(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function mg(){var t=Bv(Ov,Ov);t.copy=function(){return Fv(t,mg())};uy.apply(t,arguments);return bg(t)}function Ag(t,e){t=t.slice();var i=0,r=t.length-1,n=t[i],s=t[r],a;if(s<n){a=i,i=r,r=a;a=n,n=s,s=a}t[i]=e.floor(n);t[r]=e.ceil(s);return t}function wg(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);e.setFullYear(t.y);return e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function xg(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));e.setUTCFullYear(t.y);return e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Sg(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function Lg(t){var e=t.dateTime,i=t.date,r=t.time,n=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths;var u=Tg(n),h=Eg(n),c=Tg(s),d=Eg(s),f=Tg(a),p=Eg(a),y=Tg(o),v=Eg(o),g=Tg(l),b=Eg(l);var m={a:I,A:N,b:H,B:W,c:null,d:Jg,e:Jg,f:nb,g:yb,G:gb,H:tb,I:eb,j:ib,L:rb,m:sb,M:ab,p:P,q:G,Q:Vb,s:Rb,S:ob,u:lb,U:ub,V:cb,w:db,W:fb,x:null,X:null,y:pb,Y:vb,Z:bb,"%":Ob};var A={a:O,A:V,b:R,B:Y,c:null,d:mb,e:mb,f:Lb,g:Hb,G:Pb,H:Ab,I:wb,j:xb,L:Sb,m:kb,M:_b,p:z,q:F,Q:Vb,s:Rb,S:Cb,u:Db,U:Mb,V:Tb,w:Eb,W:Ib,x:null,X:null,y:Nb,Y:Wb,Z:Gb,"%":Ob};var w={a:_,A:C,b:D,B:M,c:U,d:zg,e:zg,f:jg,g:Og,G:Gg,H:Xg,I:Xg,j:Fg,L:qg,m:Yg,M:Bg,p:k,q:Rg,Q:Zg,s:Qg,S:Kg,u:Ng,U:Hg,V:Wg,w:Ig,W:Pg,x:T,X:E,y:Og,Y:Gg,Z:Vg,"%":$g};m.x=x(i,m);m.X=x(r,m);m.c=x(e,m);A.x=x(i,A);A.X=x(r,A);A.c=x(e,A);function x(t,e){return function(i){var r=[],n=-1,s=0,a=t.length,o,l,u;if(!(i instanceof Date))i=new Date(+i);while(++n<a){if(t.charCodeAt(n)===37){r.push(t.slice(s,n));if((l=kg[o=t.charAt(++n)])!=null)o=t.charAt(++n);else l=o==="e"?" ":"0";if(u=e[o])o=u(i,l);r.push(o);s=n+1}}r.push(t.slice(s,n));return r.join("")}}function S(t,e){return function(i){var r=Sg(1900,undefined,1),n=L(r,t,i+="",0),s,a;if(n!=i.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(r.s*1e3+("L"in r?r.L:0));if(e&&!("Z"in r))r.Z=0;if("p"in r)r.H=r.H%12+r.p*12;if(r.m===undefined)r.m="q"in r?r.q:0;if("V"in r){if(r.V<1||r.V>53)return null;if(!("w"in r))r.w=1;if("Z"in r){s=xg(Sg(r.y,0,1)),a=s.getUTCDay();s=a>4||a===0?iy.ceil(s):iy(s);s=Jp.offset(s,(r.V-1)*7);r.y=s.getUTCFullYear();r.m=s.getUTCMonth();r.d=s.getUTCDate()+(r.w+6)%7}else{s=wg(Sg(r.y,0,1)),a=s.getDay();s=a>4||a===0?Xp.ceil(s):Xp(s);s=Yp.offset(s,(r.V-1)*7);r.y=s.getFullYear();r.m=s.getMonth();r.d=s.getDate()+(r.w+6)%7}}else if("W"in r||"U"in r){if(!("w"in r))r.w="u"in r?r.u%7:"W"in r?1:0;a="Z"in r?xg(Sg(r.y,0,1)).getUTCDay():wg(Sg(r.y,0,1)).getDay();r.m=0;r.d="W"in r?(r.w+6)%7+r.W*7-(a+5)%7:r.w+r.U*7-(a+6)%7}if("Z"in r){r.H+=r.Z/100|0;r.M+=r.Z%100;return xg(r)}return wg(r)}}function L(t,e,i,r){var n=0,s=e.length,a=i.length,o,l;while(n<s){if(r>=a)return-1;o=e.charCodeAt(n++);if(o===37){o=e.charAt(n++);l=w[o in kg?e.charAt(n++):o];if(!l||(r=l(t,i,r))<0)return-1}else if(o!=i.charCodeAt(r++)){return-1}}return r}function k(t,e,i){var r=u.exec(e.slice(i));return r?(t.p=h[r[0].toLowerCase()],i+r[0].length):-1}function _(t,e,i){var r=f.exec(e.slice(i));return r?(t.w=p[r[0].toLowerCase()],i+r[0].length):-1}function C(t,e,i){var r=c.exec(e.slice(i));return r?(t.w=d[r[0].toLowerCase()],i+r[0].length):-1}function D(t,e,i){var r=g.exec(e.slice(i));return r?(t.m=b[r[0].toLowerCase()],i+r[0].length):-1}function M(t,e,i){var r=y.exec(e.slice(i));return r?(t.m=v[r[0].toLowerCase()],i+r[0].length):-1}function U(t,i,r){return L(t,e,i,r)}function T(t,e,r){return L(t,i,e,r)}function E(t,e,i){return L(t,r,e,i)}function I(t){return a[t.getDay()]}function N(t){return s[t.getDay()]}function H(t){return l[t.getMonth()]}function W(t){return o[t.getMonth()]}function P(t){return n[+(t.getHours()>=12)]}function G(t){return 1+~~(t.getMonth()/3)}function O(t){return a[t.getUTCDay()]}function V(t){return s[t.getUTCDay()]}function R(t){return l[t.getUTCMonth()]}function Y(t){return o[t.getUTCMonth()]}function z(t){return n[+(t.getUTCHours()>=12)]}function F(t){return 1+~~(t.getUTCMonth()/3)}return{format:function(t){var e=x(t+="",m);e.toString=function(){return t};return e},parse:function(t){var e=S(t+="",false);e.toString=function(){return t};return e},utcFormat:function(t){var e=x(t+="",A);e.toString=function(){return t};return e},utcParse:function(t){var e=S(t+="",true);e.toString=function(){return t};return e}}}var kg={"-":"",_:" ",0:"0"},_g=/^\s*\d+/,Cg=/^%/,Dg=/[\\^$*+?|[\]().{}]/g;function Mg(t,e,i){var r=t<0?"-":"",n=(r?-t:t)+"",s=n.length;return r+(s<i?new Array(i-s+1).join(e)+n:n)}function Ug(t){return t.replace(Dg,"\\$&")}function Tg(t){return new RegExp("^(?:"+t.map(Ug).join("|")+")","i")}function Eg(t){var e={},i=-1,r=t.length;while(++i<r)e[t[i].toLowerCase()]=i;return e}function Ig(t,e,i){var r=_g.exec(e.slice(i,i+1));return r?(t.w=+r[0],i+r[0].length):-1}function Ng(t,e,i){var r=_g.exec(e.slice(i,i+1));return r?(t.u=+r[0],i+r[0].length):-1}function Hg(t,e,i){var r=_g.exec(e.slice(i,i+2));return r?(t.U=+r[0],i+r[0].length):-1}function Wg(t,e,i){var r=_g.exec(e.slice(i,i+2));return r?(t.V=+r[0],i+r[0].length):-1}function Pg(t,e,i){var r=_g.exec(e.slice(i,i+2));return r?(t.W=+r[0],i+r[0].length):-1}function Gg(t,e,i){var r=_g.exec(e.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1}function Og(t,e,i){var r=_g.exec(e.slice(i,i+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function Vg(t,e,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function Rg(t,e,i){var r=_g.exec(e.slice(i,i+1));return r?(t.q=r[0]*3-3,i+r[0].length):-1}function Yg(t,e,i){var r=_g.exec(e.slice(i,i+2));return r?(t.m=r[0]-1,i+r[0].length):-1}function zg(t,e,i){var r=_g.exec(e.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1}function Fg(t,e,i){var r=_g.exec(e.slice(i,i+3));return r?(t.m=0,t.d=+r[0],i+r[0].length):-1}function Xg(t,e,i){var r=_g.exec(e.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1}function Bg(t,e,i){var r=_g.exec(e.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1}function Kg(t,e,i){var r=_g.exec(e.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1}function qg(t,e,i){var r=_g.exec(e.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1}function jg(t,e,i){var r=_g.exec(e.slice(i,i+6));return r?(t.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function $g(t,e,i){var r=Cg.exec(e.slice(i,i+1));return r?i+r[0].length:-1}function Zg(t,e,i){var r=_g.exec(e.slice(i));return r?(t.Q=+r[0],i+r[0].length):-1}function Qg(t,e,i){var r=_g.exec(e.slice(i));return r?(t.s=+r[0],i+r[0].length):-1}function Jg(t,e){return Mg(t.getDate(),e,2)}function tb(t,e){return Mg(t.getHours(),e,2)}function eb(t,e){return Mg(t.getHours()%12||12,e,2)}function ib(t,e){return Mg(1+Yp.count(Qp(t),t),e,3)}function rb(t,e){return Mg(t.getMilliseconds(),e,3)}function nb(t,e){return rb(t,e)+"000"}function sb(t,e){return Mg(t.getMonth()+1,e,2)}function ab(t,e){return Mg(t.getMinutes(),e,2)}function ob(t,e){return Mg(t.getSeconds(),e,2)}function lb(t){var e=t.getDay();return e===0?7:e}function ub(t,e){return Mg(Fp.count(Qp(t)-1,t),e,2)}function hb(t){var e=t.getDay();return e>=4||e===0?qp(t):qp.ceil(t)}function cb(t,e){t=hb(t);return Mg(qp.count(Qp(t),t)+(Qp(t).getDay()===4),e,2)}function db(t){return t.getDay()}function fb(t,e){return Mg(Xp.count(Qp(t)-1,t),e,2)}function pb(t,e){return Mg(t.getFullYear()%100,e,2)}function yb(t,e){t=hb(t);return Mg(t.getFullYear()%100,e,2)}function vb(t,e){return Mg(t.getFullYear()%1e4,e,4)}function gb(t,e){var i=t.getDay();t=i>=4||i===0?qp(t):qp.ceil(t);return Mg(t.getFullYear()%1e4,e,4)}function bb(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Mg(e/60|0,"0",2)+Mg(e%60,"0",2)}function mb(t,e){return Mg(t.getUTCDate(),e,2)}function Ab(t,e){return Mg(t.getUTCHours(),e,2)}function wb(t,e){return Mg(t.getUTCHours()%12||12,e,2)}function xb(t,e){return Mg(1+Jp.count(ly(t),t),e,3)}function Sb(t,e){return Mg(t.getUTCMilliseconds(),e,3)}function Lb(t,e){return Sb(t,e)+"000"}function kb(t,e){return Mg(t.getUTCMonth()+1,e,2)}function _b(t,e){return Mg(t.getUTCMinutes(),e,2)}function Cb(t,e){return Mg(t.getUTCSeconds(),e,2)}function Db(t){var e=t.getUTCDay();return e===0?7:e}function Mb(t,e){return Mg(ey.count(ly(t)-1,t),e,2)}function Ub(t){var e=t.getUTCDay();return e>=4||e===0?sy(t):sy.ceil(t)}function Tb(t,e){t=Ub(t);return Mg(sy.count(ly(t),t)+(ly(t).getUTCDay()===4),e,2)}function Eb(t){return t.getUTCDay()}function Ib(t,e){return Mg(iy.count(ly(t)-1,t),e,2)}function Nb(t,e){return Mg(t.getUTCFullYear()%100,e,2)}function Hb(t,e){t=Ub(t);return Mg(t.getUTCFullYear()%100,e,2)}function Wb(t,e){return Mg(t.getUTCFullYear()%1e4,e,4)}function Pb(t,e){var i=t.getUTCDay();t=i>=4||i===0?sy(t):sy.ceil(t);return Mg(t.getUTCFullYear()%1e4,e,4)}function Gb(){return"+0000"}function Ob(){return"%"}function Vb(t){return+t}function Rb(t){return Math.floor(+t/1e3)}var Yb;var zb;Fb({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Fb(t){Yb=Lg(t);zb=Yb.format;return Yb}var Xb=1e3,Bb=Xb*60,Kb=Bb*60,qb=Kb*24,jb=qb*7,$b=qb*30,Zb=qb*365;function Qb(t){return new Date(t)}function Jb(t){return t instanceof Date?+t:+new Date(+t)}function tm(t,e,i,r,n,s,a,o,l){var u=Bv(Ov,Ov),h=u.invert,c=u.domain;var d=l(".%L"),f=l(":%S"),p=l("%I:%M"),y=l("%I %p"),v=l("%a %d"),g=l("%b %d"),b=l("%B"),m=l("%Y");var A=[[a,1,Xb],[a,5,5*Xb],[a,15,15*Xb],[a,30,30*Xb],[s,1,Bb],[s,5,5*Bb],[s,15,15*Bb],[s,30,30*Bb],[n,1,Kb],[n,3,3*Kb],[n,6,6*Kb],[n,12,12*Kb],[r,1,qb],[r,2,2*qb],[i,1,jb],[e,1,$b],[e,3,3*$b],[t,1,Zb]];function w(o){return(a(o)<o?d:s(o)<o?f:n(o)<o?p:r(o)<o?y:e(o)<o?i(o)<o?v:g:t(o)<o?b:m)(o)}function x(e,i,r,n){if(e==null)e=10;if(typeof e==="number"){var s=Math.abs(r-i)/e,a=gp((function(t){return t[2]})).right(A,s);if(a===A.length){n=Cp(i/Zb,r/Zb,e);e=t}else if(a){a=A[s/A[a-1][2]<A[a][2]/s?a-1:a];n=a[1];e=a[0]}else{n=Math.max(Cp(i,r,e),1);e=o}}return n==null?e:e.every(n)}u.invert=function(t){return new Date(h(t))};u.domain=function(t){return arguments.length?c(my.call(t,Jb)):c().map(Qb)};u.ticks=function(t,e){var i=c(),r=i[0],n=i[i.length-1],s=n<r,a;if(s)a=r,r=n,n=a;a=x(t,r,n,e);a=a?a.range(r,n+1):[];return s?a.reverse():a};u.tickFormat=function(t,e){return e==null?w:l(e)};u.nice=function(t,e){var i=c();return(t=x(t,i[0],i[i.length-1],e))?c(Ag(i,t)):u};u.copy=function(){return Fv(u,tm(t,e,i,r,n,s,a,o,l))};return u}function em(){return uy.apply(tm(Qp,Zp,Fp,Yp,Rp,Vp,Op,Ip,zb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var im=s.propDefaultValues;var rm=function(){function t(){}return t}();rm.mainTitle="Dumbbell Plot Title";rm.subTitle="This is the dumbbell plot's subtitle";rm.height=300;rm.width=650;rm.margin={top:300*.01,bottom:300*.01,right:650*.01,left:650*.01};rm.padding={top:20,bottom:50,right:50,left:50};rm.ordinalAccessor="date";rm.valueAccessor="value";rm.seriesAccessor="category";rm.focusMarker={key:"",sizeFromBar:12};rm.marker={visible:true,type:"dot",sizeFromBar:8};rm.barStyle={opacity:1,width:1,colorRule:"default"};rm.differenceLabel={visible:false,placement:"left",calculation:"difference",format:"0[.][0][0]a",collisionHideOnly:false};rm.layout=im.layout;rm.accessibility=im.accessibility;rm.animationConfig=im.animationConfig;rm.highestHeadingLevel=im.highestHeadingLevel;rm.sortOrder=im.sortOrder;rm.xAxis=im.xAxisDate;rm.yAxis=im.yAxis;rm.showBaselineX=im.showBaselineFalse;rm.showBaselineY=im.showBaselineFalse;rm.wrapLabel=im.wrapLabel;rm.colorPalette=im.colorPaletteCategorical;rm.hoverStyle=im.hoverStyle;rm.clickStyle=im.clickStyle;rm.referenceStyle=im.referenceStyle;rm.cursor=im.cursor;rm.roundedCorner=im.roundedCorner;rm.barIntervalRatio=im.barIntervalRatio;rm.hoverOpacity=im.hoverOpacity;rm.dataLabel=im.dataLabelEnds;rm.legend=im.hiddenLegend;rm.tooltipLabel=im.tooltipLabel;rm.showTooltip=im.showTooltip;rm.suppressEvents=im.suppressEvents;rm.referenceLines=im.referenceLines;rm.annotations=im.annotations;rm.clickHighlight=im.clickHighlight;rm.seriesLabel=im.seriesLabel;function nm(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function sm(t){return 1-Math.sqrt(1-t*t)}var am={value:function(){}};function om(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new lm(i)}function lm(t){this._=t}function um(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}lm.prototype=om.prototype={constructor:lm,on:function(t,e){var i=this._,r=um(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=hm(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=cm(i[n],t.name,e);else if(e==null)for(n in i)i[n]=cm(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new lm(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function hm(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function cm(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=am,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var dm=0,fm=0,pm=0,ym=1e3,vm,gm,bm=0,mm=0,Am=0,wm=typeof performance==="object"&&performance.now?performance:Date,xm=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Sm(){return mm||(xm(Lm),mm=wm.now()+Am)}function Lm(){mm=0}function km(){this._call=this._time=this._next=null}km.prototype=_m.prototype={constructor:km,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?Sm():+i)+(e==null?0:+e);if(!this._next&&gm!==this){if(gm)gm._next=this;else vm=this;gm=this}this._call=t;this._time=i;Tm()},stop:function(){if(this._call){this._call=null;this._time=Infinity;Tm()}}};function _m(t,e,i){var r=new km;r.restart(t,e,i);return r}function Cm(){Sm();++dm;var t=vm,e;while(t){if((e=mm-t._time)>=0)t._call.call(null,e);t=t._next}--dm}function Dm(){mm=(bm=wm.now())+Am;dm=fm=0;try{Cm()}finally{dm=0;Um();mm=0}}function Mm(){var t=wm.now(),e=t-bm;if(e>ym)Am-=e,bm=t}function Um(){var t,e=vm,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:vm=i}}gm=t;Tm(r)}function Tm(t){if(dm)return;if(fm)fm=clearTimeout(fm);var e=t-mm;if(e>24){if(t<Infinity)fm=setTimeout(Dm,t-wm.now()-Am);if(pm)pm=clearInterval(pm)}else{if(!pm)bm=wm.now(),pm=setInterval(Mm,ym);dm=1,xm(Dm)}}function Em(t,e,i){var r=new km;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var Im=om("start","end","interrupt");var Nm=[];var Hm=0;var Wm=1;var Pm=2;var Gm=3;var Om=4;var Vm=5;var Rm=6;function Ym(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;Bm(t,i,{name:e,index:r,group:n,on:Im,tween:Nm,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Hm})}function zm(t,e){var i=Xm(t,e);if(i.state>Hm)throw new Error("too late; already scheduled");return i}function Fm(t,e){var i=Xm(t,e);if(i.state>Pm)throw new Error("too late; already started");return i}function Xm(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function Bm(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=_m(s,0,i.time);function s(t){i.state=Wm;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==Wm)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===Gm)return Em(a);if(d.state===Om){d.state=Rm;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=Rm;d.timer.stop();delete r[u]}}Em((function(){if(i.state===Gm){i.state=Om;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=Pm;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==Pm)return;i.state=Gm;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=Vm,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===Vm){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=Rm;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function Km(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>Pm&&r.state<Vm;r.state=Rm;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function qm(t){return this.each((function(){Km(this,t)}))}function jm(t,e){var i,r;return function(){var n=Fm(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function $m(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=Fm(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function Zm(t,e){var i=this._id;t+="";if(arguments.length<2){var r=Xm(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?jm:$m)(i,t,e))}function Qm(t,e,i){var r=t._id;t.each((function(){var t=Fm(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return Xm(t,r).value[e]}}function Jm(t,e){var i;return(typeof e==="number"?yv:e instanceof Xy?hv:(i=Xy(e))?(e=i,hv):wv)(t,e)}function tA(t){return function(){this.removeAttribute(t)}}function eA(t){return function(){this.removeAttributeNS(t.space,t.local)}}function iA(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function rA(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function nA(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function sA(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function aA(t,e){var i=Cd(t),r=i==="transform"?Hv:Jm;return this.attrTween(t,typeof e==="function"?(i.local?sA:nA)(i,r,Qm(this,"attr."+t,e)):e==null?(i.local?eA:tA)(i):(i.local?rA:iA)(i,r,e+""))}function oA(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function lA(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function uA(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=Cd(t);return this.tween(i,(r.local?oA:lA)(r,e))}function hA(t,e){return function(){zm(this,t).delay=+e.apply(this,arguments)}}function cA(t,e){return e=+e,function(){zm(this,t).delay=e}}function dA(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?hA:cA)(e,t)):Xm(this.node(),e).delay}function fA(t,e){return function(){Fm(this,t).duration=+e.apply(this,arguments)}}function pA(t,e){return e=+e,function(){Fm(this,t).duration=e}}function yA(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?fA:pA)(e,t)):Xm(this.node(),e).duration}function vA(t,e){if(typeof e!=="function")throw new Error;return function(){Fm(this,t).ease=e}}function gA(t){var e=this._id;return arguments.length?this.each(vA(e,t)):Xm(this.node(),e).ease}function bA(t){if(typeof t!=="function")t=Pd(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new RA(r,this._parents,this._name,this._id)}function mA(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new RA(a,this._parents,this._name,this._id)}function AA(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function wA(t,e,i){var r,n,s=AA(e)?zm:Fm;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function xA(t,e){var i=this._id;return arguments.length<2?Xm(this.node(),i).on.on(t):this.each(wA(i,t,e))}function SA(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function LA(){return this.on("end.remove",SA(this._id))}function kA(t){var e=this._name,i=this._id;if(typeof t!=="function")t=Ed(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;Ym(u[d],e,i,d,u,Xm(h,i))}}}return new RA(s,this._parents,e,i)}function _A(t){var e=this._name,i=this._id;if(typeof t!=="function")t=Hd(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=Xm(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){Ym(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new RA(s,a,e,i)}var CA=pp.prototype.constructor;function DA(){return new CA(this._groups,this._parents)}function MA(t,e){var i,r,n;return function(){var s=bf(this,t),a=(this.style.removeProperty(t),bf(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function UA(t){return function(){this.style.removeProperty(t)}}function TA(t,e,i){var r,n;return function(){var s=bf(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function EA(t,e,i){var r,n,s;return function(){var a=bf(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),bf(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function IA(t,e,i){var r=(t+="")==="transform"?Nv:Jm;return e==null?this.styleTween(t,MA(t,r)).on("end.style."+t,UA(t)):this.styleTween(t,typeof e==="function"?EA(t,r,Qm(this,"style."+t,e)):TA(t,r,e+""),i)}function NA(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function HA(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,NA(t,e,i==null?"":i))}function WA(t){return function(){this.textContent=t}}function PA(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function GA(t){return this.tween("text",typeof t==="function"?PA(Qm(this,"text",t)):WA(t==null?"":t+""))}function OA(){var t=this._name,e=this._id,i=zA();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=Xm(l,e);Ym(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new RA(r,this._parents,t,i)}var VA=0;function RA(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function YA(t){return pp().transition(t)}function zA(){return++VA}var FA=pp.prototype;RA.prototype=YA.prototype={constructor:RA,select:kA,selectAll:_A,filter:bA,merge:mA,selection:DA,transition:OA,call:FA.call,nodes:FA.nodes,node:FA.node,size:FA.size,empty:FA.empty,each:FA.each,on:xA,attr:aA,attrTween:uA,style:IA,styleTween:HA,text:GA,remove:LA,tween:Zm,delay:dA,duration:yA,ease:gA};var XA={time:null,delay:0,duration:250,ease:nm};function BA(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return XA.time=Sm(),XA}}return i}function KA(t){var e,i;if(t instanceof RA){e=t._id,t=t._name}else{e=zA(),(i=XA).time=Sm(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){Ym(l,t,e,u,a,i||BA(l,e))}}}return new RA(r,this._parents,t,e)}pp.prototype.interrupt=qm;pp.prototype.transition=KA;var qA=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var jA=new Uint8Array(16);function $A(){if(!qA){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return qA(jA)}var ZA=[];for(var QA=0;QA<256;++QA){ZA[QA]=(QA+256).toString(16).substr(1)}function JA(t,e){var i=e||0;var r=ZA;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function tw(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||$A)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||JA(n)}var ew=s.getAccessibleStrokes,iw=s.ensureTextContrast,rw=s.createTextStrokeFilter,nw=s.createUrl,sw=s.initializeDescriptionRoot,aw=s.initializeElementAccess,ow=s.setElementFocusHandler,lw=s.setElementAccessID,uw=s.setAccessibilityController,hw=s.hideNonessentialGroups,cw=s.setAccessTitle,dw=s.setAccessSubtitle,fw=s.setAccessLongDescription,pw=s.setAccessExecutiveSummary,yw=s.setAccessPurpose,vw=s.setAccessContext,gw=s.setAccessStatistics,bw=s.setAccessChartCounts,mw=s.setAccessXAxis,Aw=s.setAccessYAxis,ww=s.setAccessStructure,xw=s.setAccessAnnotation,Sw=s.retainAccessFocus,Lw=s.checkAccessFocus,kw=s.setElementInteractionAccessState,_w=s.setAccessibilityDescriptionWidth,Cw=s.drawTooltip,Dw=s.annotate,Mw=s.chartAccessors,Uw=s.checkInteraction,Tw=s.checkClicked,Ew=s.checkHovered,Iw=s.convertVisaColor,Nw=s.drawAxis,Hw=s.drawGrid,Ww=s.drawLegend,Pw=s.setLegendInteractionState,Gw=s.formatDataLabel,Ow=s.getColors,Vw=s.getLicenses,Rw=s.getPadding,Yw=s.getScopedData,zw=s.initTooltipStyle,Fw=s.overrideTitleTooltip,Xw=s.placeDataLabels,Bw=s.scopeDataKeys,Kw=s.visaColors,qw=s.transitionEndAll,jw=s.validateAccessibilityProps,$w=s.findTagLevel,Zw=s.prepareRenderChange,Qw=s.roundTo,Jw=s.getTextWidth,tx=s.resolveLabelCollision;var ex=t("dumbbell_plot",function(){function t(t){var r=this;e(this,t);this.mainTitle=rm.mainTitle;this.subTitle=rm.subTitle;this.height=rm.height;this.width=rm.width;this.margin=rm.margin;this.padding=rm.padding;this.highestHeadingLevel=rm.highestHeadingLevel;this.ordinalAccessor=rm.ordinalAccessor;this.valueAccessor=rm.valueAccessor;this.seriesAccessor=rm.seriesAccessor;this.sortOrder=rm.sortOrder;this.xAxis=rm.xAxis;this.yAxis=rm.yAxis;this.wrapLabel=rm.wrapLabel;this.layout=rm.layout;this.showBaselineX=rm.showBaselineX;this.showBaselineY=rm.showBaselineY;this.colorPalette=rm.colorPalette;this.hoverStyle=rm.hoverStyle;this.hoverOpacity=rm.hoverOpacity;this.animationConfig=rm.animationConfig;this.clickStyle=rm.clickStyle;this.referenceStyle=rm.referenceStyle;this.cursor=rm.cursor;this.focusMarker=rm.focusMarker;this.marker=rm.marker;this.barStyle=rm.barStyle;this.dataLabel=rm.dataLabel;this.seriesLabel=rm.seriesLabel;this.differenceLabel=rm.differenceLabel;this.showTooltip=rm.showTooltip;this.tooltipLabel=rm.tooltipLabel;this.accessibility=rm.accessibility;this.legend=rm.legend;this.annotations=rm.annotations;this.referenceLines=rm.referenceLines;this.suppressEvents=rm.suppressEvents;this.clickHighlight=rm.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.updated=true;this.time={timemillisecond:Ip,timesecond:Op,timeminute:Vp,timehour:Rp,timeday:Yp,timeweek:Fp,timemonth:Zp,timeyear:Qp};this.shouldUpdateLayout=false;this.shouldValidate=false;this.shouldUpdateAnnotations=false;this.shouldUpdateReferenceLines=false;this.shouldResetRoot=false;this.shouldUpdateXAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYAxis=false;this.shouldUpdateYGrid=false;this.shouldUpdateScales=false;this.shouldUpdateBaseline=false;this.shouldCheckValueAxis=false;this.shouldCheckLabelAxis=false;this.shouldSetColors=false;this.shouldUpdateLegend=false;this.shouldSetGlobalSelections=false;this.shouldSetSeriesSelections=false;this.shouldSetTestingAttributes=false;this.shouldUpdateData=false;this.shouldEnterUpdateExit=false;this.shouldEnterUpdateExitMarkers=false;this.shouldUpdateMarkerOpacity=false;this.shouldUpdateGeometries=false;this.shouldUpdateSeriesLabels=false;this.shouldUpdateDifferenceLabels=false;this.shouldUpdateLabels=false;this.shouldValidateInteractionKeys=false;this.shouldUpdateTableData=false;this.shouldValidateDataLabelPlacement=false;this.shouldValidateDataLabelAccessor=false;this.shouldAddStrokeUnder=false;this.shouldUpdateBaselineX=false;this.shouldUpdateBaselineY=false;this.shouldUpdateLegendData=false;this.shouldUpdateMarkerIDs=false;this.shouldValidateLayout=false;this.shouldValidateSeriesLabelPlacement=false;this.shouldValidateDiffLabelPlacement=false;this.shouldBindInteractivity=false;this.shouldBindLegendInteractivity=false;this.shouldBindSeriesInteractivity=false;this.shouldUpdateCursor=false;this.shouldSetLegendCursor=false;this.shouldSetSeriesCursor=false;this.shouldSetLabelOpacity=false;this.shouldSetSeriesLabelOpacity=false;this.shouldSetDifferenceLabelOpacity=false;this.shouldSetSelectionClass=false;this.shouldDrawInteractionState=false;this.shouldRenderMarkerGroup=false;this.shouldUpdateBarStyle=false;this.shouldUpdateMarkerSize=false;this.shouldUpdateDiffLabelColor=false;this.shouldUpdateMarkerStyle=false;this.shouldDrawMarkerGeometries=false;this.shouldUpdateMarkerData=false;this.shouldUpdateSeriesData=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityAttributes=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.topLevel="h2";this.bottomLevel="p";this.strokes={};this.handleMarkerColors=function(t,e,i){var n=r.rawColors[t.referenceIndex]||r.rawColors[0];var s=e<2&&r.clickHighlight.length?r.clickStyle.color||n:e<4?n:r.hoverStyle.color||n;var a=r.colorArr[t.referenceIndex]||r.colorArr[0];var o=e<2&&r.clickHighlight.length?r.clickStyle.color||a:e<4?a:r.hoverStyle.color||a;yp(i[e]).attr("fill",o);return!r.accessibility.hideStrokes?r.strokes[s.toLowerCase()]:o};this.handleSeriesLabelColors=function(t,e){var i;var n;if(r.seriesInteraction){i=Ew(t,r.hoverHighlight,r.innerInteractionKeys);n=Tw(t,r.clickHighlight,r.innerInteractionKeys)}var s=r.rawColors[e]||r.rawColors[0];var a=r.seriesInteraction?n&&r.clickHighlight.length?r.clickStyle.color||s:i&&r.hoverHighlight?r.hoverStyle.color||s:s:s;return r.textColors[a.toLowerCase()]};this.handleLabelColors=function(t,e){var i=Ew(t,r.hoverHighlight,r.innerInteractionKeys);var n=Tw(t,r.clickHighlight,r.innerInteractionKeys);var s=r.rawColors[e]||r.rawColors[0];var a=n&&r.clickHighlight.length?r.clickStyle.color||s:i&&r.hoverHighlight?r.hoverStyle.color||s:s;return r.textColors[a.toLowerCase()]};this.handleBarColors=function(t,e,i){t.focusMarker=false;if(t.values[0][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=0}else if(t.values[1][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=1}var n=Tw(t.values[0],r.clickHighlight,r.innerInteractionKeys)&&Tw(t.values[1],r.clickHighlight,r.innerInteractionKeys);var s=Ew(t.values[0],r.hoverHighlight,r.innerInteractionKeys)&&Ew(t.values[1],r.hoverHighlight,r.innerInteractionKeys);var a=r.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?r.rawColors[t.focusMarker]:r.barStyle.colorRule==="greaterValue"?r.rawColors[t.greaterIndex]:r.rawColors[2];var o=n&&r.clickHighlight.length?r.clickStyle.color||a:s&&r.hoverHighlight?r.hoverStyle.color||a:a;var l=r.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?r.colorArr[t.focusMarker]:r.barStyle.colorRule==="greaterValue"?r.colorArr[t.greaterIndex]:r.colorArr[2];var u=n&&r.clickHighlight.length?r.clickStyle.color||l:s&&r.hoverHighlight?r.hoverStyle.color||l:l;yp(i[e]).attr("fill",u);return!r.accessibility.hideStrokes?r.strokes[o.toLowerCase()]:u};this.handleBarOpacity=function(t,e,i){var n=Uw(t.values[0],1,0,r.hoverHighlight,r.clickHighlight,r.innerInteractionKeys);var s=Uw(t.values[1],1,0,r.hoverHighlight,r.clickHighlight,r.innerInteractionKeys);var a=n&&s?r.barStyle.opacity:r.hoverOpacity;yp(i[e]).attr("stroke-opacity",a);return a};this.setBarSize=function(t,e,i){var n=Tw(t.values[0],r.clickHighlight,r.innerInteractionKeys)&&Tw(t.values[1],r.clickHighlight,r.innerInteractionKeys);var s=Ew(t.values[0],r.hoverHighlight,r.innerInteractionKeys)&&Ew(t.values[1],r.hoverHighlight,r.innerInteractionKeys);var a=r.dumbbellInteraction?n?parseFloat(r.clickStyle.strokeWidth+"")||r.barStyle.width:s?parseFloat(r.hoverStyle.strokeWidth+"")||r.barStyle.width:r.barStyle.width:r.barStyle.width;var o=r.x(t.values[0][r.xAccessor]);var l=r.y(t.values[0][r.yAccessor]);var u=r.x(t.values[1][r.xAccessor]);var h=r.y(t.values[1][r.yAccessor]);var c=r.isVertical?l>h?.001:-.001:0;var d=!r.isVertical?o>u?.001:-.001:0;var f=r.isVertical?a/2:0;var p=!r.isVertical?a/2:0;yp(i[e]).attr("data-barSize",a).attr("data-centerX1",(function(t){return r.x(t.values[0][r.xAccessor])})).attr("data-centerY1",(function(t){return r.y(t.values[0][r.yAccessor])})).attr("data-centerX2",(function(t){return r.x(t.values[1][r.xAccessor])})).attr("data-centerY2",(function(t){return r.y(t.values[1][r.yAccessor])}));return"M "+(o+d)+" "+(l+c)+" L "+o+" "+l+" L "+(o+f)+" "+(l+p)+" L "+(u+f)+" "+(h+p)+" L "+u+" "+h+" L "+(u-f)+" "+(h-p)+" L "+(o-f)+" "+(l-p)+" L "+o+" "+l+" L "+(o+f)+" "+(l+p)+" L "+(u+f)+" "+(h+p)+" L "+u+" "+h+" L "+(u-d)+" "+(h-c)};this.setDiffLabelColor=function(t){t.focusMarker=false;if(t.values[0][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=0}else if(t.values[1][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=1}var e=r.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?r.rawColors[t.focusMarker]:r.barStyle.colorRule==="greaterValue"?r.rawColors[t.greaterIndex]:r.rawColors[2];var i;var n;if(r.dumbbellInteraction){n=Tw(t.values[0],r.clickHighlight,r.innerInteractionKeys)&&Tw(t.values[1],r.clickHighlight,r.innerInteractionKeys);i=Ew(t.values[0],r.hoverHighlight,r.innerInteractionKeys)&&Ew(t.values[1],r.hoverHighlight,r.innerInteractionKeys)}var s=r.dumbbellInteraction?n&&r.clickHighlight.length?r.clickStyle.color||e:i&&r.hoverHighlight?r.hoverStyle.color||e:e:e;return r.textColors[s.toLowerCase()]};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.mainTitleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subTitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldUpdateLayout=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true};t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateLegendData=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateBarStyle=true;this.shouldSetColors=true};t.prototype.idWatcher=function(t,e){this.chartID=t||"dumbbell-plot-"+tw();this.dumbbellPlotEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldAddStrokeUnder=true;this.shouldUpdateMarkerIDs=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldSetAnnotationAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldUpdateGeometries=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldCheckLabelAxis=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldCheckValueAxis=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true};t.prototype.seriesAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldSetGlobalSelections=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateLegendData=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateLegend=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateTableData=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.sortWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true};t.prototype.xAxisWatcher=function(t,e){var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;var a=t&&t.format?t.format:false;var o=e&&e.format?e.format:false;var l=t&&t.unit?t.unit:false;var u=e&&e.unit?e.unit:false;if(i!==r||n!==s){this.shouldUpdateXGrid=true}if(a!==o||l!==u){this.shouldUpdateScales=true;if(l!==u){this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true}}this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true};t.prototype.yAxisWatcher=function(t,e){var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateYGrid=true}this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true};t.prototype.wrapLabelWatcher=function(t,e){this.shouldCheckLabelAxis=true};t.prototype.layoutWatcher=function(t,e){this.shouldValidateLayout=true;this.shouldValidateDataLabelPlacement=true;this.shouldValidateSeriesLabelPlacement=true;this.shouldUpdateSeriesData=true;this.shouldValidateDiffLabelPlacement=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true};t.prototype.showBaselineXWatcher=function(t,e){this.shouldUpdateBaselineX=true};t.prototype.showBaselineYWatcher=function(t,e){this.shouldUpdateBaselineY=true};t.prototype.paletteWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldSetColors=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerStyle=true;this.shouldUpdateLegend=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDiffLabelColor=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldSetSeriesCursor=true};t.prototype.focusMarkerWatcher=function(t,e){this.shouldDrawMarkerGeometries=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateLabels=true;var i=t&&t.sizeFromBar?t.sizeFromBar:0;var r=e&&e.sizeFromBar?e.sizeFromBar:0;if(i!==r){this.shouldUpdateMarkerSize=true}var n=t&&t.key?t.key:false;var s=e&&e.key?e.key:false;if(n!==s){this.shouldUpdateDiffLabelColor=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateBarStyle=true}};t.prototype.markerWatcher=function(t,e){var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldUpdateMarkerOpacity=true}var n=t&&t.type?t.type:false;var s=e&&e.type?e.type:false;if(n!==s){this.shouldRenderMarkerGroup=true;this.shouldEnterUpdateExitMarkers=true}this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateData=true;this.shouldUpdateLabels=true;var a=t&&t.sizeFromBar?t.sizeFromBar:0;var o=e&&e.sizeFromBar?e.sizeFromBar:0;if(a!==o){this.shouldUpdateMarkerSize=true}};t.prototype.barStyleWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateDiffLabelColor=true;this.shouldDrawInteractionState=true;var i=t&&t.width?t.width:0;var r=e&&e.width?e.width:0;if(i!==r){this.shouldDrawInteractionState=true;this.shouldUpdateMarkerData=true;this.shouldUpdateData=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateSeriesLabels=true}};t.prototype.dataLabelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.placement?t.placement:false;var r=e&&e.placement?e.placement:false;var n=t&&t.visible;var s=e&&e.visible;var a=t&&t.labelAccessor?t.labelAccessor:false;var o=e&&e.labelAccessor?e.labelAccessor:false;if(n!==s){this.shouldSetLabelOpacity=true}if(i!==r){this.shouldValidateDataLabelPlacement=true}if(a!==o){this.shouldValidateDataLabelAccessor=true}};t.prototype.seriesLabelWatcher=function(t,e){this.shouldValidateSeriesLabelPlacement=true;this.shouldUpdateSeriesLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetSeriesLabelOpacity=true}var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(n!==s){this.shouldUpdateSeriesData=true;this.shouldSetSeriesSelections=true}};t.prototype.differenceLabelWatcher=function(t,e){this.shouldUpdateDifferenceLabels=true;this.shouldUpdateDiffLabelColor=true;this.shouldAddStrokeUnder=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetDifferenceLabelOpacity=true}var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(n!==s){this.shouldValidateDiffLabelPlacement=true}};t.prototype.showTooltipWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideStrokes?t.hideStrokes:false;var w=e&&e.hideStrokes?e.hideStrokes:false;if(A!==w){this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerStyle=true;this.shouldAddStrokeUnder=true;this.shouldUpdateLegend=true}var x=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var S=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var L=t&&t.elementsAreInterface?t.elementsAreInterface:false;var k=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(x!==S||L!==k){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(L!==k){this.shouldSetSelectionClass=true}};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldBindLegendInteractivity=true;this.shouldSetLegendCursor=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldCheckValueAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldBindLegendInteractivity=true;this.shouldBindSeriesInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldSetSeriesCursor=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.hoverWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true};t.prototype.clickWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true;var i=t&&t.length===1?t[0]===this.seriesAccessor:false;var r=e&&e.length===1?e[0]===this.seriesAccessor:false;if(i!==r){this.shouldBindSeriesInteractivity=true;this.shouldSetSeriesCursor=true;this.shouldBindLegendInteractivity=true;this.shouldSetLegendCursor=true}};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.chartID=t.uniqueID||"dumbbell-plot-"+tw();t.dumbbellPlotEl.id=t.chartID;t.setTagLevels();t.checkIfSafari();t.validateLayout();t.validateDataLabelPlacement();t.validateSeriesLabelPlacement();t.validateDiffLabelPlacement();t.validateInteractionKeys();t.prepareData();t.prepareMarkerData();t.prepareSeriesData();t.prepareLegendData();t.setLayoutData();t.prepareScales();t.validateDataLabelAccessor();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.defaults=true;t.shouldValidateAccessibilityProps();t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.drawXGrid();t.drawYGrid();t.renderMarkerGroup();t.setGlobalSelections();t.setTestingAttributes();t.enterMarkerGeometries();t.updateMarkerGeometries();t.exitMarkerGeometries();t.updateMarkerSize();t.enterDumbbells();t.updateDumbbells();t.exitDumbbells();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterDifferenceLabels();t.updateDifferenceLabels();t.exitDifferenceLabels();t.updateMarkerIds();t.drawDumbbells();t.updateInteractionState();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawLegendElements();t.drawDataLabels();t.drawSeriesLabels();t.drawDifferenceLabels();t.addStrokeUnder();t.drawReferenceLines();t.setSelectedClass();t.setLabelOpacity();t.bindLegendInteractivity();t.setLegendCursor();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();t.drawBaselineX();t.drawBaselineY();t.onChangeHandler();hw(t.root.node(),t.dumbbellG.node());t.setGroupAccessibilityAttributes();t.setGroupAccessibilityID();t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldRenderMarkerGroup){t.renderMarkerGroup();t.shouldRenderMarkerGroup=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldSetSeriesSelections){t.setSeriesSelections();t.shouldSetSeriesSelections=false}if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldEnterUpdateExitMarkers){t.enterMarkerGeometries();t.updateMarkerGeometries();t.exitMarkerGeometries();t.shouldEnterUpdateExitMarkers=false;t.shouldUpdateMarkerOpacity=false}if(t.shouldUpdateMarkerOpacity){t.updateMarkerGeometries();t.shouldUpdateMarkerOpacity=false}if(t.shouldEnterUpdateExit){t.enterDumbbells();t.updateDumbbells();t.exitDumbbells();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterDifferenceLabels();t.updateDifferenceLabels();t.exitDifferenceLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateMarkerIDs){t.updateMarkerIds();t.shouldUpdateMarkerIDs=false}if(t.shouldUpdateGeometries){t.drawDumbbells();t.shouldUpdateGeometries=false}if(t.shouldUpdateBarStyle){t.updateBarStyle();t.shouldUpdateBarStyle=false}if(t.shouldUpdateMarkerStyle){t.updateMarkerStyle();t.shouldUpdateMarkerStyle=false}if(t.shouldUpdateMarkerSize){t.updateMarkerSize();t.shouldUpdateMarkerSize=false}if(t.shouldDrawMarkerGeometries){t.drawMarkerGeometries();t.shouldDrawMarkerGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldUpdateSeriesLabels){t.drawSeriesLabels();t.shouldUpdateSeriesLabels=false}if(t.shouldUpdateDifferenceLabels){t.drawDifferenceLabels();t.shouldUpdateDifferenceLabels=false}if(t.shouldAddStrokeUnder){t.addStrokeUnder();t.shouldAddStrokeUnder=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldSetSeriesLabelOpacity){t.setSeriesLabelOpacity();t.shouldSetSeriesLabelOpacity=false}if(t.shouldSetDifferenceLabelOpacity){t.setDifferenceLabelOpacity();t.shouldSetDifferenceLabelOpacity=false}if(t.shouldUpdateDiffLabelColor){t.updateDiffLabelColor();t.shouldUpdateDiffLabelColor=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldBindLegendInteractivity){t.bindLegendInteractivity();t.shouldBindLegendInteractivity=false}if(t.shouldBindSeriesInteractivity){t.bindSeriesInteractivity();t.shouldBindSeriesInteractivity=false}if(t.shouldSetLegendCursor){t.setLegendCursor();t.shouldSetLegendCursor=false}if(t.shouldSetSeriesCursor){t.setSeriesCursor();t.shouldSetSeriesCursor=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateBaselineX){t.drawBaselineX();t.shouldUpdateBaseline=false}if(t.shouldUpdateBaselineY){t.drawBaselineY();t.shouldUpdateBaseline=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;jw(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor];this.seriesInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.seriesAccessor;this.dumbbellInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.ordinalAccessor};t.prototype.validateDataLabelAccessor=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor};t.prototype.validateLayout=function(){this.layoutOverride=!this.layout||this.data[0][this.ordinalAccessor]instanceof Date?"vertical":this.layout;this.isVertical=this.layoutOverride==="vertical"};t.prototype.validateDataLabelPlacement=function(){this.placement=this.dataLabel.placement;if(this.isVertical){if(this.placement!=="left"&&this.placement!=="right"&&this.placement!=="auto"){this.placement="ends"}}else{if(this.placement!=="top"&&this.placement!=="bottom"&&this.placement!=="auto"){this.placement="ends"}}};t.prototype.validateSeriesLabelPlacement=function(){this.seriesLabelDetails=Object.assign({},this.seriesLabel);if(!this.seriesLabelDetails.placement){this.seriesLabelDetails.placement=this.isVertical?"right":"top"}if(this.isVertical&&(this.seriesLabelDetails.placement!=="right"&&this.seriesLabelDetails.placement!=="left"&&this.seriesLabelDetails.placement!=="auto")){this.seriesLabelDetails.placement="right"}else if(!this.isVertical&&(this.seriesLabelDetails.placement!=="top"&&this.seriesLabelDetails.placement!=="bottom"&&this.seriesLabelDetails.placement!=="auto")){this.seriesLabelDetails.placement="top"}if(!this.seriesLabelDetails.label||!this.seriesLabelDetails.label.length){this.seriesLabelDetails.label=""}};t.prototype.validateDiffLabelPlacement=function(){this.diffLabelDetails=Object.assign({},this.differenceLabel);if(!this.diffLabelDetails.placement){this.diffLabelDetails.placement=this.isVertical?"left":"top"}if(this.isVertical&&(this.diffLabelDetails.placement!=="right"&&this.diffLabelDetails.placement!=="left"&&this.diffLabelDetails.placement!=="auto")){this.diffLabelDetails.placement="left"}else if(!this.isVertical&&(this.diffLabelDetails.placement!=="top"&&this.diffLabelDetails.placement!=="bottom"&&this.diffLabelDetails.placement!=="auto")){this.diffLabelDetails.placement="top"}};t.prototype.checkIfSafari=function(){this.url=nw()};t.prototype.setColors=function(){var t=this;this.colors=this.colors?Iw(this.colors):"";this.rawColors=this.colors||Ow(this.colorPalette,3);this.colorArr=this.rawColors;this.textColors={};this.strokes={};this.rawColors.forEach((function(e){if(!t.accessibility.hideStrokes){var i=ew(e);var r=i.length===2?i[1]:i[0];t.strokes[e.toLowerCase()]=r}t.textColors[e.toLowerCase()]=iw(e,"#ffffff",4.5)}));if(this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){var e=ew(this.hoverStyle.color);var i=e.length===2?e[1]:e[0];this.strokes[this.hoverStyle.color.toLowerCase()]=i}this.textColors[this.hoverStyle.color.toLowerCase()]=iw(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){var e=ew(this.clickStyle.color);var i=e.length===2?e[1]:e[0];this.strokes[this.clickStyle.color.toLowerCase()]=i}this.textColors[this.clickStyle.color.toLowerCase()]=iw(this.clickStyle.color,"#ffffff",4.5)}};t.prototype.setLayoutData=function(){this.padding=typeof this.padding==="string"?Rw(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.setTableData=function(){var t=Bw(this,Mw,"dumbbell-plot");this.tableData=Yw(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareData=function(){var t=this;var e=fy().key((function(e){return e[t.ordinalAccessor]})).entries(this.data);e.forEach((function(e){e.focusMarker=false;e.greaterIndex=1;var i="marker";var r="marker";if(e.values[0][t.seriesAccessor]===t.focusMarker.key){e.focusMarker=0;i="focusMarker"}else if(e.values[1][t.seriesAccessor]===t.focusMarker.key){e.focusMarker=1;r="focusMarker"}var n=Tw(e.values[0],t.clickHighlight,t.innerInteractionKeys)?parseFloat(t.clickStyle.strokeWidth+"")||t.barStyle.width:Ew(e.values[0],t.hoverHighlight,t.innerInteractionKeys)?parseFloat(t.hoverStyle.strokeWidth+"")||t.barStyle.width:t.barStyle.width;var s=Tw(e.values[1],t.clickHighlight,t.innerInteractionKeys)?parseFloat(t.clickStyle.strokeWidth+"")||t.barStyle.width:Ew(e.values[1],t.hoverHighlight,t.innerInteractionKeys)?parseFloat(t.hoverStyle.strokeWidth+"")||t.barStyle.width:t.barStyle.width;e.values[0].offset=e.focusMarker!==0&&!t.marker.visible?1:t.marker.type==="dot"?t[i].sizeFromBar*(n+1)/2:t.marker.type==="stroke"?t[i].sizeFromBar*(n+1)/5:!e.focusMarker?t[i].sizeFromBar*(n+1)/2:t[i].sizeFromBar*(n+1)/5;e.values[1].offset=e.focusMarker!==1&&!t.marker.visible?-1:t.marker.type==="dot"?-(t[r].sizeFromBar*(s+1))/2:t.marker.type==="stroke"?-(t[r].sizeFromBar*(s+1))/5:e.focusMarker?-(t[r].sizeFromBar*(s+1))/2:-(t[r].sizeFromBar*(s+1))/5;if(e.values[0][t.valueAccessor]>=e.values[1][t.valueAccessor]){e.greaterIndex=0;e.values[0].offset=-e.values[0].offset;e.values[1].offset=-e.values[1].offset}}));var i=function(e){var i={absoluteDiff:"Absolute Difference ",difference:"Difference "};var r=t.differenceLabel&&t.differenceLabel.calculation&&i[t.differenceLabel.calculation]?t.differenceLabel.calculation:"difference";var n=t.differenceLabel&&t.differenceLabel.format&&t.differenceLabel.visible?t.differenceLabel.format:t.differenceLabel&&t.dataLabel.format&&t.dataLabel.visible?t.dataLabel.format:"0[.][0][0]a";return i[r]+Gw(e,r,n)};this.nest=e.sort((function(e,r){e.difference=e.values[0][t.valueAccessor]-e.values[1][t.valueAccessor];r.difference=r.values[0][t.valueAccessor]-r.values[1][t.valueAccessor];e.absoluteDiff=Math.abs(e.difference);r.absoluteDiff=Math.abs(r.difference);e.middle=(e.values[0][t.valueAccessor]+e.values[1][t.valueAccessor])/2;r.middle=(r.values[0][t.valueAccessor]+r.values[1][t.valueAccessor])/2;e.message=i(e);r.message=i(r);var n=e.focusMarker!==false?e.focusMarker:0;return e.values[0][t.ordinalAccessor]instanceof Date?0:t.sortOrder==="asc"||t.sortOrder==="diffAsc"?e.difference-r.difference:t.sortOrder==="desc"||t.sortOrder==="diffDesc"?r.difference-e.difference:t.sortOrder==="focusAsc"?e.values[n][t.valueAccessor]-r.values[n][t.valueAccessor]:t.sortOrder==="focusDesc"?r.values[n][t.valueAccessor]-e.values[n][t.valueAccessor]:t.sortOrder==="absoluteDiffAsc"?e.absoluteDiff-r.absoluteDiff:t.sortOrder==="absoluteDiffDesc"?r.absoluteDiff-e.absoluteDiff:0}))};t.prototype.prepareMarkerData=function(){this.markerData=[];var t={focus:false,label:this.nest[0].values[0][this.seriesAccessor]};var e={focus:false,label:this.nest[0].values[1][this.seriesAccessor]};if(this.nest[0].focusMarker){e.focus=true}else if(this.nest[0].focusMarker===0){t.focus=true}var i=Object.assign(Object.assign({},t),{limitOpacity:true});var r=Object.assign(Object.assign({},e),{limitOpacity:true});var n=Object.assign({},t);var s=Object.assign({},e);this.markerData.push(t);this.markerData.push(e);this.markerData.push(i);this.markerData.push(r);this.markerData.push(n);this.markerData.push(s);var a=0;this.markerData.forEach((function(t){t.index=a;t.referenceIndex=a<2?a:a<4?a-2:a-4;a++}))};t.prototype.prepareSeriesData=function(){var t,e;var i=this.seriesLabelDetails.placement==="auto";var r=this.isVertical?"right":"top";var n=i?true:this.seriesLabelDetails.placement.includes(r);var s=(t={label:this.nest[0].values[0][this.seriesAccessor]},t[this.seriesAccessor]=this.nest[0].values[0][this.seriesAccessor],t.value=n?this.nest[this.nest.length-1].values[0][this.valueAccessor]:this.nest[0].values[0][this.valueAccessor],t);var a=(e={label:this.nest[0].values[1][this.seriesAccessor]},e[this.seriesAccessor]=this.nest[0].values[1][this.seriesAccessor],e.value=n?this.nest[this.nest.length-1].values[1][this.valueAccessor]:this.nest[0].values[1][this.valueAccessor],e);this.seriesData=[s,a]};t.prototype.prepareLegendData=function(){var t,e;var i=(t={label:this.nest[0].values[0][this.seriesAccessor]},t[this.seriesAccessor]=this.nest[0].values[0][this.seriesAccessor],t);var r=(e={label:this.nest[0].values[1][this.seriesAccessor]},e[this.seriesAccessor]=this.nest[0].values[1][this.seriesAccessor],e);this.legendData=[i,r];this.ordinalLabel=this.legendData.map((function(t){return t.label}))};t.prototype.prepareScales=function(){var t=this;var e=Mp(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));var i=Dp(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));if(this.isVertical){this.xAccessor=this.ordinalAccessor;this.yAccessor=this.valueAccessor;this.y=mg().domain([this.minValueOverride||this.minValueOverride===0?this.minValueOverride:e-(i-e)*.15,this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:i+(i-e)*.15]).range([this.innerPaddedHeight,0]);if(this.data[0][this.ordinalAccessor]instanceof Date){var r=Dp(this.data,(function(e){return e[t.ordinalAccessor]}));var n=Mp(this.data,(function(e){return e[t.ordinalAccessor]}));this.x=em().domain([n,r]).range([0,this.innerPaddedWidth]);if(this.xAxis.unit){var s=this.time["time"+this.xAxis.unit];this.x.domain([s.offset(n,-1),s.offset(r,+1)])}}else{this.x=ky().domain(this.nest.map((function(t){return t.key}))).padding(.5).range([0,this.innerPaddedWidth])}}else if(!this.isVertical){this.xAccessor=this.valueAccessor;this.yAccessor=this.ordinalAccessor;this.x=mg().domain([this.minValueOverride||this.minValueOverride===0?this.minValueOverride:e-(i-e)*.15,this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:i+(i-e)*.15]).range([0,this.innerPaddedWidth]);this.y=ky().domain(this.nest.map((function(t){return t.key}))).padding(.5).range([this.innerPaddedHeight,0])}};t.prototype.addStrokeUnder=function(){var t=rw({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.seriesLabelWrapper.selectAll("text").attr("filter",!this.accessibility.hideStrokes?t:null);this.diffLabelWrapper.attr("filter",!this.accessibility.hideStrokes?t:null);this.labels.attr("filter",!this.accessibility.hideStrokes?t:null);this.labels.attr("filter",!this.accessibility.hideStrokes?t:null);this.dumbbellG.attr("filter",!this.accessibility.hideStrokes?t:null)};t.prototype.renderRootElements=function(){this.svg=yp(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.defs=this.rootG.append("defs");this.baselineG=this.rootG.append("g").attr("class","baseline-group");this.gridG=this.rootG.append("g").attr("class","gridline-group");this.dumbbellG=this.rootG.append("g").attr("class","dumbbell-group");this.seriesLabelWrapper=this.rootG.select(".dumbbell-series-wrapper");this.seriesLabelWrapper=this.rootG.append("g").attr("class","dumbbell-series-wrapper");this.diffLabelWrapper=this.rootG.select(".dumbbell-diff-label-wrapper");this.diffLabelWrapper=this.rootG.append("g").attr("class","dumbbell-diff-label-wrapper");this.legendG=yp(this.dumbbellPlotEl).select(".dumbbell-legend").append("svg");this.tooltipG=yp(this.dumbbellPlotEl).select(".dumbbell-tooltip");this.labels=this.rootG.append("g").attr("class","dumbbell-dataLabel-group");this.references=this.rootG.append("g").attr("class","dumbbell-reference-line-group")};t.prototype.renderMarkerGroup=function(){this.markerG=this.defs.select("."+this.marker.type+"markers");if(!this.markerG.node()){this.defs.selectAll("g").remove();this.markerG=this.defs.append("g").attr("class",this.marker.type+"markers")}};t.prototype.setSeriesSelections=function(){var t=this.seriesLabelWrapper.selectAll(".dumbbell-series-label").data(this.seriesData,(function(t){return t.label}));this.enterSeriesLabel=t.enter().append("text");this.exitSeriesLabel=t.exit();this.updateSeriesLabel=t.merge(this.enterSeriesLabel)};t.prototype.setGlobalSelections=function(){var t=this;var e=this.dumbbellG.selectAll(".dumbbell-plot").data(this.nest,(function(t){return t.key}));this.enter=e.enter().append("path");this.exit=e.exit();this.update=e.merge(this.enter);this.exitSize=this.exit.size();this.enterSize=this.enter.size();var i=this.markerG.selectAll("marker").data(this.markerData,(function(t,e){return t.label+e}));this.enterMarkers=i.enter().append("marker");this.exitMarkers=i.exit();this.updateMarkers=i.merge(this.enterMarkers);this.setSeriesSelections();var r=this.diffLabelWrapper.selectAll(".dumbbell-diff-label").data(this.nest,(function(t){return t.key}));this.enterDiffLabel=r.enter().append("text");this.exitDiffLabel=r.exit();this.updateDiffLabel=r.merge(this.enterDiffLabel);var n=this.labels.selectAll("g").data(this.nest,(function(t){return t.key}));this.enterLabels=n.enter().append("g");this.exitLabels=n.exit();this.updateLabels=n.merge(this.enterLabels);var s=this.updateLabels.selectAll(".dumbbell-dataLabel").data((function(t){return[t.values[0],t.values[1]]}),(function(e){return e[t.seriesAccessor]}));this.enterLabelChildren=s.enter().append("text");this.exitLabelChildren=s.exit();this.updateLabelChildren=s.merge(this.enterLabelChildren)};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){yp(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid","chart-container");yp(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid","main-title");yp(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid","sub-title");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.dumbbellG.attr("data-testid","dumbbell-group");this.baselineG.attr("data-testid","baseline-group");this.references.attr("data-testid","reference-line-group");this.updateLabels.attr("data-testid","dataLabel-wrapper");this.updateLabelChildren.attr("data-testid","dataLabel").attr("data-id",(function(e){return"label-"+e[t.ordinalAccessor]+"-"+e[t.seriesAccessor]}));this.updateDiffLabel.attr("data-testid","difference-label").attr("data-id",(function(t){return"difference-label-"+t.key}));this.updateSeriesLabel.attr("data-testid","series-label");this.updateMarkers.attr("data-testid","marker");this.update.attr("data-testid","line").attr("data-id",(function(t){return"line-"+t.key}))}else{yp(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid",null);yp(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid",null);yp(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.dumbbellG.attr("data-testid",null);this.baselineG.attr("data-testid",null);this.references.attr("data-testid",null);this.updateLabels.attr("data-testid",null);this.updateLabelChildren.attr("data-testid",null).attr("data-id",null);this.updateDiffLabel.attr("data-testid",null).attr("data-id",null);this.updateSeriesLabel.attr("data-testid",null);this.updateMarkers.attr("data-testid",null);this.update.attr("data-testid",null).attr("data-id",null)}};t.prototype.reSetRoot=function(){var t=Zw({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:sm});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=Zw({selection:this.root,duration:this.duration,namespace:"root_reset",easing:sm});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=Zw({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:sm});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");_w(this.chartID,this.width)};t.prototype.drawXAxis=function(){var t=this.innerPaddedWidth/this.nest.length*.7;Nw({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel?t:"",dateFormat:this.xAxis.format,format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration})};t.prototype.drawYAxis=function(){Nw({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,wrapLabel:this.wrapLabel?100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.yAxis.visible,duration:this.duration})};t.prototype.setXAxisAccessibility=function(){mw({rootEle:this.dumbbellPlotEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x?this.x:false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){Aw({rootEle:this.dumbbellPlotEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y?this.y:false,yAxisLabel:this.yAxis.label?this.yAxis.label:""})};t.prototype.drawBaselineX=function(){Nw({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,padding:this.padding,markOffset:this.x(0),hide:!this.isVertical?!this.showBaselineY:true,duration:this.duration})};t.prototype.drawBaselineY=function(){Nw({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0),hide:this.isVertical?!this.showBaselineX:true,duration:this.duration})};t.prototype.drawXGrid=function(){Hw(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.xAxis.gridVisible,this.xAxis.tickInterval,this.duration)};t.prototype.drawYGrid=function(){Hw(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)};t.prototype.enterMarkerGeometries=function(){var t=this;this.enterMarkers.attr("orient","auto").attr("markerUnits","userSpaceOnUse").attr("id",(function(e){return t.generateId(e,e.index)})).attr("class","marker-"+this.marker.type).attr("stroke",this.handleMarkerColors);if(this.marker.type==="dot"){this.enterMarkers.append("circle").attr("r",5)}else if(this.marker.type==="stroke"){this.enterMarkers.append("path")}else if(this.marker.type==="arrow"){this.enterMarkers.append("path")}this.updateMarkerSize(this.enterMarkers)};t.prototype.updateMarkerGeometries=function(){var t=this;this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(function(e){return(t.marker.visible||e.focus)&&!e.limitOpacity?1:t.marker.visible||e.focus?t.hoverOpacity:0}))};t.prototype.updateMarkerStyle=function(){this.updateMarkers.attr("stroke",this.handleMarkerColors)};t.prototype.exitMarkerGeometries=function(){this.exitMarkers.transition("exit").duration(this.duration).ease(sm).remove()};t.prototype.enterDumbbells=function(){var t=this;this.enter.interrupt();this.enter.attr("class","dumbbell-plot").attr("d",(function(e){var i=t.x(e.values[0][t.xAccessor]);var r=t.y(e.values[0][t.yAccessor]);var n=t.x(e.values[1][t.xAccessor]);var s=t.y(e.values[1][t.yAccessor]);var a=t.isVertical?r>s?.001:-.001:0;var o=!t.isVertical?i>n?.001:-.001:0;return"M "+(i+o)+" "+(r+a)+" L "+i+" "+r+" L "+i+" "+r+" L "+n+" "+s+" L "+n+" "+s+" L "+n+" "+s+" L "+i+" "+r+" L "+i+" "+r+" L "+i+" "+r+" L "+n+" "+s+" L "+n+" "+s+" L "+(n-o)+" "+(s-a)})).attr("cursor",!this.suppressEvents?this.cursor:null).attr("opacity",0).each((function(t,e,i){aw(i[e])})).on("click",!this.suppressEvents?function(e,i,r){if(e.values){var n=r[i];var s=tp;var a=t.findMarkerIndex(e,n,s);t.onClickHandler(e.values[a])}}:null).on("mouseover",!this.suppressEvents?function(e,i,r){var n=e;if(e.values){var s=r[i];var a=tp;var o=t.findMarkerIndex(e,s,a);Fw(t.chartID,true);n=e.values[o];t.hoverFunc.emit(n)}t.showTooltip?t.eventsTooltip({data:t.tooltipLabel.labelAccessor&&t.tooltipLabel.labelAccessor.length?n:e,evt:tp,isToShow:true}):""}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity);this.update.order()};t.prototype.updateBarStyle=function(){this.update.attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity)};t.prototype.updateMarkerSize=function(t){var e=this;var i=t||this.updateMarkers;i.each((function(t,i,r){var n=yp(r[i]);var s=i<2&&e.clickHighlight.length?parseFloat(e.clickStyle.strokeWidth+""):i<4?e.barStyle.width:parseFloat(e.hoverStyle.strokeWidth+"");var a=t.focus?e.focusMarker.sizeFromBar:e.marker.sizeFromBar;var o=e.marker.type==="dot"?1:e.marker.type==="stroke"?2:t.focus&&e.focusMarker.key||!e.focusMarker.key&&t.referenceIndex===0?1:2;var l=a*o*(s+1);var u=l?10/l:0;n.attr("viewBox","0 0 "+(10+u)+" "+(10+u)).attr("refX",5+u/2).attr("refY",5+u/2).attr("stroke-width",u).attr("markerWidth",l).attr("markerHeight",l);if(e.marker.type==="dot"){n.select("circle").attr("cx",5+u/2).attr("cy",5+u/2)}else if(e.marker.type==="stroke"){n.select("path").attr("d","M 4.5 "+(0+u/2)+" L 4.5 "+(10+u/2)+" L 6 "+(10+u/2)+" L 6 "+(0+u/2)+" z")}else if(e.marker.type==="arrow"){n.select("path").attr("transform",t.focus&&e.focusMarker.key&&t.referenceIndex===1?"rotate(180,"+(5+u/2)+","+(5+u/2)+")":null).attr("d",t.focus&&e.focusMarker.key||!e.focusMarker.key&&t.referenceIndex===0?"M "+(0+u/2)+" "+(5+u/4)+" L "+(10+u/2)+" "+(0+u/2)+" L "+(10+u/2)+" "+(10+u/2)+" z":"M 4.5 "+(0+u/2)+" L 4.5 "+(10+u/2)+" L 6 "+(10+u/2)+" L 6 "+(0+u/2)+" z")}}))};t.prototype.drawMarkerGeometries=function(){var t=this;this.updateMarkers.selectAll(".marker-"+this.marker.type).data((function(t){return[t]}));if(this.marker.type==="arrow"){this.updateMarkers.selectAll("path").attr("d",(function(e,i,r){var n=i<2&&t.clickHighlight.length?parseFloat(t.clickStyle.strokeWidth+""):i<4?t.barStyle.width:parseFloat(t.hoverStyle.strokeWidth+"");var s=e.focus?t.focusMarker.sizeFromBar:t.marker.sizeFromBar;var a=t.marker.type==="dot"?1:t.marker.type==="stroke"?2:e.focus&&t.focusMarker.key||!t.focusMarker.key&&e.referenceIndex===0?1:2;var o=s*a*(n+1);var l=o?10/o:0;yp(r[i]).attr("transform",e.focus&&t.focusMarker.key&&e.referenceIndex===1?"rotate(180,"+(5+l/2)+","+(5+l/2)+")":null);return e.focus&&t.focusMarker.key||!t.focusMarker.key&&e.referenceIndex===0?"M "+(0+l/2)+" "+(5+l/4)+" L "+(10+l/2)+" "+(0+l/2)+" L "+(10+l/2)+" "+(10+l/2)+" z":"M 4.5 "+(0+l/2)+" L 4.5 "+(10+l/2)+" L 6 "+(10+l/2)+" L 6 "+(0+l/2)+" z"}))}};t.prototype.updateDumbbells=function(){this.update.interrupt();this.enter.transition("opacity").duration(this.duration).ease(sm).attr("opacity",1)};t.prototype.exitDumbbells=function(){var t=this;this.exit.interrupt();this.exit.transition("exit").ease(sm).duration(this.duration/2).attr("opacity",0).attr("d",(function(e,i,r){var n=yp(r[i]);var s=+n.attr("data-centerX1");var a=+n.attr("data-centerY1");var o=+n.attr("data-centerX2");var l=+n.attr("data-centerY2");var u=t.isVertical?a>l?.001:-.001:0;var h=!t.isVertical?s>o?.001:-.001:0;return"M "+(s+h)+" "+(a+u)+" L "+s+" "+a+" L "+s+" "+a+" L "+o+" "+l+" L "+o+" "+l+" L "+o+" "+l+" L "+s+" "+a+" L "+s+" "+a+" L "+s+" "+a+" L "+o+" "+l+" L "+o+" "+l+" L "+(o-h)+" "+(l-u)}));this.update.transition("accessibilityAfterExit").duration(this.duration).ease(sm).call(qw,(function(){var e=Lw(t.rootG.node());t.exit.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();Sw({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawDumbbells=function(){var t=this;this.update.classed("moving",(function(e,i,r){var n=yp(r[i]);var s=Tw(e.values[0],t.clickHighlight,t.innerInteractionKeys)&&Tw(e.values[1],t.clickHighlight,t.innerInteractionKeys);var a=Ew(e.values[0],t.hoverHighlight,t.innerInteractionKeys)&&Ew(e.values[1],t.hoverHighlight,t.innerInteractionKeys);var o=t.dumbbellInteraction?s?parseFloat(t.clickStyle.strokeWidth+"")||t.barStyle.width:a?parseFloat(t.hoverStyle.strokeWidth+"")||t.barStyle.width:t.barStyle.width:t.barStyle.width;var l=t.x(e.values[0][t.xAccessor]);var u=t.y(e.values[0][t.yAccessor]);var h=t.x(e.values[1][t.xAccessor]);var c=t.y(e.values[1][t.yAccessor]);var d=+n.attr("data-barSize");var f=+n.attr("data-centerX1");var p=+n.attr("data-centerY1");var y=+n.attr("data-centerX2");var v=+n.attr("data-centerY2");return o!==d||l!==f||u!==p||h!==y||c!==v})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-d",this.setBarSize).transition("update").ease(sm).duration(this.duration).attr("d",this.setBarSize).call(qw,(function(){t.update.classed("moving",false);Sw({parentGNode:t.rootG.node()})}))};t.prototype.updateMarkerIds=function(){var t=this;this.updateMarkers.attr("id",(function(e){return t.generateId(e,e.index)}));this.update.attr("marker-start",(function(e){var i=Uw(e.values[0],1,0,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys);var r=Ew(e.values[0],t.hoverHighlight,t.innerInteractionKeys);var n=Tw(e.values[0],t.clickHighlight,t.innerInteractionKeys);var s=r&&!n?t.updateMarkers._groups[0][4].id:n||i?t.updateMarkers._groups[0][0].id:t.updateMarkers._groups[0][2].id;return t.url+s+")"})).attr("marker-end",(function(e){var i=Uw(e.values[1],1,0,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys);var r=Ew(e.values[1],t.hoverHighlight,t.innerInteractionKeys);var n=Tw(e.values[1],t.clickHighlight,t.innerInteractionKeys);var s=r&&!n?t.updateMarkers._groups[0][5].id:n||i?t.updateMarkers._groups[0][1].id:t.updateMarkers._groups[0][3].id;return t.url+s+")"}))};t.prototype.updateInteractionState=function(){var t=this;this.update.interrupt("opacity");this.updateLabelChildren.interrupt("opacity");this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(function(e){return(t.marker.visible||e.focus)&&!e.limitOpacity?1:t.marker.visible||e.focus?t.hoverOpacity:0}));this.update.attr("opacity",1).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity).each((function(e,i,r){var n=yp(r[i]);if(!n.classed("moving")){n.attr("d",t.setBarSize)}}));this.drawDataLabels(true);if(this.seriesLabelDetails.visible&&(this.seriesLabelDetails.placement==="auto"||this.seriesLabelDetails.collisionHideOnly)){this.drawSeriesLabels(true)}if(this.diffLabelDetails.visible&&(this.diffLabelDetails.placement==="auto"||this.diffLabelDetails.collisionHideOnly)){this.drawDifferenceLabels(true)}Sw({parentGNode:this.rootG.node()});Pw({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.enterSeriesLabels=function(){var t=this;this.enterSeriesLabel.interrupt();var e=this.seriesLabelDetails.placement==="auto";var i=this.isVertical?"right":"top";var r=e?true:this.seriesLabelDetails.placement.includes(i);this.enterSeriesLabel.attr("opacity",(function(e){var i=!t.seriesLabelDetails.visible?0:1;if(!t.seriesInteraction){return i}else{return Uw(e,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:Number.EPSILON}})).attr("class","dumbbell-series-label").attr("fill",this.handleSeriesLabelColors).attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onHoverHandler(e,false)}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?function(){return t.onMouseOutHandler()}:null).attr("text-anchor",this.isVertical&&r?"start":this.isVertical?"end":"middle").attr("x",(function(e){return t.isVertical&&r?t.innerPaddedWidth:!t.isVertical?t.x(e.value):0})).attr("y",(function(e){return t.isVertical?t.y(e.value):!t.isVertical&&!r?t.innerPaddedHeight:0})).attr("dx",this.isVertical&&r?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")};t.prototype.updateSeriesLabels=function(){var t=this;this.updateSeriesLabel.interrupt();this.updateSeriesLabel.transition("opacity_series_labels").ease(sm).duration(this.duration).attr("opacity",(function(e){var i=!t.seriesLabelDetails.visible?0:1;if(!t.seriesInteraction){return i}else{return Uw(e,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.exitSeriesLabels=function(){this.exitSeriesLabel.transition("exit_series_labels").ease(sm).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawSeriesLabels=function(t){var e=this;var i=this.seriesLabelDetails.placement==="auto";var r=this.isVertical?"right":"top";var n=i?true:this.seriesLabelDetails.placement.includes(r);var s=!i&&this.seriesLabelDetails.collisionHideOnly;var a=this.updateSeriesLabel.text((function(t,i){return e.seriesLabelDetails.label?e.seriesLabelDetails.label[i]:t.label})).style("visibility",(function(t,r,n){return i||e.seriesLabelDetails.collisionHideOnly?yp(n[r]).style("visibility"):null})).attr("fill",this.handleSeriesLabelColors).attr("data-x",(function(t){return e.isVertical&&n?e.innerPaddedWidth:!e.isVertical?e.x(t.value):0})).attr("data-y",(function(t,i,r){var s=r[i];var a=getComputedStyle(s);var o=parseFloat(a.fontSize);var l=Math.max(o-1,1);return e.isVertical?e.y(t.value)+.3*l:!e.isVertical&&!n?e.innerPaddedHeight:0})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",s).attr("data-use-dy",s).attr("data-text-anchor",this.isVertical&&n?"start":this.isVertical?"end":"middle").attr("dx",this.isVertical&&n?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em").transition("update_series_labels").ease(sm).duration((function(){if(t){return 0}return e.duration}));if(this.seriesLabelDetails.visible&&(this.seriesLabelDetails.placement==="auto"||this.seriesLabelDetails.collisionHideOnly)){this.bitmaps=tx({bitmaps:this.bitmaps,labelSelection:a,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:[this.seriesAccessor],size:[Qw(this.width,0),Qw(this.height,0)],hideOnly:this.seriesLabelDetails.visible&&this.seriesLabelDetails.collisionHideOnly&&this.seriesLabelDetails.placement!=="auto"});if(s){a.attr("text-anchor",this.isVertical&&n?"start":this.isVertical?"end":"middle").attr("x",(function(t){return e.isVertical&&n?e.innerPaddedWidth:!e.isVertical?e.x(t.value):0})).attr("y",(function(t){return e.isVertical?e.y(t.value):!e.isVertical&&!n?e.innerPaddedHeight:0})).attr("dx",this.isVertical&&n?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}}else{a.attr("text-anchor",this.isVertical&&n?"start":this.isVertical?"end":"middle").attr("x",(function(t){return e.isVertical&&n?e.innerPaddedWidth:!e.isVertical?e.x(t.value):0})).attr("y",(function(t){return e.isVertical?e.y(t.value):!e.isVertical&&!n?e.innerPaddedHeight:0})).attr("dx",this.isVertical&&n?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}};t.prototype.setSeriesLabelOpacity=function(){var t=this;this.updateSeriesLabel.interrupt("opacity_series_labels");this.updateSeriesLabel.attr("opacity",(function(e){var i=!t.seriesLabelDetails.visible?0:1;if(!t.seriesInteraction){return i}else{return Uw(e,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.enterDifferenceLabels=function(){var t=this;this.enterDiffLabel.interrupt();var e=this.isVertical?"left":"top";var i=this.diffLabelDetails.placement.includes(e);this.enterDiffLabel.attr("class","dumbbell-diff-label").attr("opacity",(function(e){var i=t.differenceLabel.visible?1:0;if(!t.dumbbellInteraction){return i}else{return Uw(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:Number.EPSILON}})).attr("fill",this.setDiffLabelColor).attr("cursor",!this.suppressEvents&&this.dumbbellInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(){return t.onMouseOutHandler()}:null).attr("x",(function(e){return t.isVertical?t.x(e.values[0][t.ordinalAccessor]):t.x(e.middle)})).attr("y",(function(e){return!t.isVertical&&i?t.y(e.key)-t.barStyle.width/2-4:!t.isVertical?t.y(e.key)+t.barStyle.width/2+4:t.y(e.middle)})).attr("dx",this.isVertical&&i?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&i?"0":!this.isVertical?"0.6em":"0.3em")};t.prototype.updateDifferenceLabels=function(){var t=this;this.updateDiffLabel.interrupt();this.updateDiffLabel.transition("opacity_diff_labels").ease(sm).duration(this.duration).attr("opacity",(function(e){var i=t.differenceLabel.visible?1:0;if(!t.dumbbellInteraction){return i}else{return Uw(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.exitDifferenceLabels=function(){this.exitDiffLabel.transition("exit_diff_label").ease(sm).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawDifferenceLabels=function(t){var e=this;var i=this.diffLabelDetails.placement==="auto";var r=this.isVertical?"left":"top";var n=i?true:this.diffLabelDetails.placement.includes(r);var s=!i&&this.differenceLabel.collisionHideOnly;var a=this.updateDiffLabel.text((function(t){return Gw(t,e.differenceLabel.calculation,e.differenceLabel.format)})).style("visibility",(function(t,r,n){return i||e.differenceLabel.collisionHideOnly?yp(n[r]).style("visibility"):null})).attr("data-x",(function(t){return e.isVertical?e.x(t.values[0][e.ordinalAccessor]):e.x(t.middle)})).attr("data-y",(function(t){return!e.isVertical&&n?e.y(t.key)-e.barStyle.width/2-4:!e.isVertical?e.y(t.key)+e.barStyle.width/2+4:e.y(t.middle)})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",s).attr("data-use-dy",s).attr("dx",this.isVertical&&n?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&n?"0":!this.isVertical?"0.6em":"0.3em").attr("text-anchor",(function(t,r,s){return i&&yp(s[r]).attr("text-anchor")?yp(s[r]).attr("text-anchor"):e.isVertical&&n?"end":e.isVertical?"start":"middle"})).transition("update_diff_label").ease(sm).duration((function(){if(t){return 0}return e.duration}));if(this.differenceLabel.visible&&(this.diffLabelDetails.placement==="auto"||this.differenceLabel.collisionHideOnly)){var o=s?["middle"]:this.isVertical?["left","right"]:["top","bottom"];var l=s?[this.barStyle.width/2+4]:[this.barStyle.width/2+4,this.barStyle.width/2+4];this.bitmaps=tx({bitmaps:this.bitmaps,labelSelection:a,avoidMarks:[this.update],validPositions:o,offsets:l,accessors:["key"],size:[Qw(this.width,0),Qw(this.height,0)],hideOnly:this.differenceLabel.visible&&this.differenceLabel.collisionHideOnly&&this.diffLabelDetails.placement!=="auto"});if(s){a.attr("x",(function(t){return e.isVertical?e.x(t.values[0][e.ordinalAccessor]):e.x(t.middle)})).attr("y",(function(t){return!e.isVertical&&n?e.y(t.key)-e.barStyle.width/2-4:!e.isVertical?e.y(t.key)+e.barStyle.width/2+4:e.y(t.middle)})).attr("dx",this.isVertical&&n?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&n?"0":!this.isVertical?"0.6em":"0.3em").attr("text-anchor",this.isVertical&&n?"end":this.isVertical?"start":"middle")}}else{a.attr("x",(function(t){return e.isVertical?e.x(t.values[0][e.ordinalAccessor]):e.x(t.middle)})).attr("y",(function(t){return!e.isVertical&&n?e.y(t.key)-e.barStyle.width/2-4:!e.isVertical?e.y(t.key)+e.barStyle.width/2+4:e.y(t.middle)})).attr("dx",this.isVertical&&n?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&n?"0":!this.isVertical?"0.6em":"0.3em").attr("text-anchor",this.isVertical&&n?"end":this.isVertical?"start":"middle")}};t.prototype.enterDataLabels=function(){var t=this;this.enterLabels.interrupt();this.enterLabels.attr("class","dumbbell-label-wrapper").attr("opacity",0).attr("fill",this.handleLabelColors);this.enterLabelChildren.attr("class","dumbbell-dataLabel").attr("opacity",(function(e){return Uw(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:Number.EPSILON})).attr("fill",this.handleLabelColors).attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null).on("click",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?function(){return t.onMouseOutHandler()}:null);Xw({root:this.enterLabelChildren,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData})};t.prototype.setDifferenceLabelOpacity=function(){var t=this;this.updateDiffLabel.interrupt("opacity_diff_labels");this.updateDiffLabel.attr("opacity",(function(e){var i=t.differenceLabel.visible?1:0;if(!t.dumbbellInteraction){return i}else{return Uw(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.updateDataLabels=function(){var t=this;this.updateLabelChildren.classed("transitioning",true);this.updateLabels.transition("opacity").ease(sm).duration(this.duration).attr("opacity",(function(){var e=!t.dataLabel.visible?0:1;return e})).call(qw,(function(){t.updateLabelChildren.classed("transitioning",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabels.interrupt();this.exitLabels.selectAll(".dumbbell-dataLabel").transition("exit").ease(sm).duration(this.duration/2).attr("opacity",0).call(qw,(function(){t.exitLabels.remove()}));this.exitLabelChildren.transition("exit_dataLabel").ease(sm).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawDataLabels=function(t){var e=this;var i=this.placement==="auto";var r=this.placement!=="auto"&&this.dataLabel.collisionHideOnly;this.updateLabelChildren.text((function(t){return Gw(t,e.innerLabelAccessor,e.dataLabel.format)}));var n=this.updateLabelChildren.attr("fill",this.handleLabelColors).style("visibility",(function(t,r,n){return i||e.dataLabel.collisionHideOnly?yp(n[r]).style("visibility"):null})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",r).attr("data-use-dy",r).attr("dx",(function(t){return e.isVertical?"0.0em":t.offset>=0?"-0.1em":"0.1em"})).attr("dy",(function(t){return e.isVertical&&t.offset>=0?"0.9em":e.isVertical?"-0.3em":"0.0em"})).attr("data-y",(function(t,i,r){var n=r[i];var s=getComputedStyle(n);var a=parseFloat(s.fontSize);var o=Math.max(a-1,1);var l=Jw(n.textContent,a,true,s.fontFamily);var u=e.layoutOverride!=="horizontal"?0:t.offset>=0?-l/2:l/2;var h=e.layoutOverride!=="vertical"?-o/2:t.offset>=0?o/2:-o+-o/2;yp(n).attr("data-x",(function(t){return(e.isVertical?e.x(t[e.ordinalAccessor]):e.x(t[e.valueAccessor])-t.offset)+u}));return e.isVertical?e.y(t[e.valueAccessor])+t.offset+h:e.y(t[e.ordinalAccessor])+h})).attr("data-offset",(function(t){return t.offset})).transition("update_dataLabel").ease(sm).duration((function(){if(t){return 0}return e.duration}));this.bitmaps=Xw({root:n,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.placement==="auto",labelSelection:n,avoidMarks:[this.update],validPositions:["middle"],offsets:[1],accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[Qw(this.width,0),Qw(this.height,0)],boundsScope:"centroid",hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})};t.prototype.updateDiffLabelColor=function(){this.updateDiffLabel.attr("fill",this.setDiffLabelColor)};t.prototype.setLabelOpacity=function(){var t=this;this.updateLabels.attr("opacity",this.dataLabel.visible?1:0);this.updateLabelChildren.attr("opacity",(function(e){return Uw(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}))};t.prototype.updateMarkerOpacity=function(){var t=this;this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(function(e){return(t.marker.visible||e.focus)&&!e.limitOpacity?1:t.marker.visible||e.focus?t.hoverOpacity:0}))};t.prototype.drawReferenceLines=function(){var t=this;var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class",".dumbbell-reference").attr("opacity",1);var r=i.append("line");r.attr("class","dumbbell-reference-line").attr("data-testid",this.unitTest?"reference-line":null).attr("opacity",0);var n=i.append("text");n.attr("class","dumbbell-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".dumbbell-reference-line").data((function(t){return[t]})).transition("merge").ease(sm).duration(this.duration);var o=s.selectAll(".dumbbell-reference-line-label").data((function(t){return[t]})).transition("merge").ease(sm).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(sm).duration(this.duration).attr("opacity",0).remove();i.attr("transform",(function(e){var i=!t.isVertical?"x":"y";return"translate(0,"+t[i](e.value)+")"}));s.transition("merge").ease(sm).duration(this.duration).attr("transform",(function(e){var i=!t.isVertical?"x":"y";return"translate(0,"+t[i](e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.style("stroke",Kw[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",Kw[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=Uw(e.values[0],1,0,{},t.clickHighlight,t.innerInteractionKeys);var s=Uw(e.values[1],1,0,{},t.clickHighlight,t.innerInteractionKeys);var a=n||s;a=t.clickHighlight&&t.clickHighlight.length?a:false;var o=t.accessibility.elementsAreInterface;kw(r[i],a,o);return a}))};t.prototype.drawAnnotations=function(){Dw({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.layoutOverride!=="horizontal"?this.ordinalAccessor:this.valueAccessor,yScale:this.y,yAccessor:this.layoutOverride!=="horizontal"?this.valueAccessor:this.ordinalAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})};t.prototype.setAnnotationAccessibility=function(){xw(this.dumbbellPlotEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=$w(this.highestHeadingLevel);this.bottomLevel=$w(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){sw({rootEle:this.dumbbellPlotEl,title:this.accessibility.title||this.mainTitle,chartTag:"dumbbell-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){var t=Bw(this,Mw,"dumbbell-plot");delete t[this.ordinalAccessor];uw({node:this.svg.node(),chartTag:"dumbbell-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:["message"],nested:"values",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){aw(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=Bw(this,Mw,"dumbbell-plot");delete e[this.ordinalAccessor];this.update.each((function(i,r,n){ow({node:n[r],geomType:"dumbbell",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupKeys:["message"],nested:["values"],uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});lw({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityAttributes=function(){aw(this.dumbbellG.node())};t.prototype.setGroupAccessibilityID=function(){var t=this;this.dumbbellG.each((function(e,i,r){lw({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){cw(this.dumbbellPlotEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){dw(this.dumbbellPlotEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){fw(this.dumbbellPlotEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){pw(this.dumbbellPlotEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){yw(this.dumbbellPlotEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){vw(this.dumbbellPlotEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){gw(this.dumbbellPlotEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){bw({rootEle:this.dumbbellPlotEl,parentGNode:this.dumbbellG.node(),chartTag:"dumbbell-plot",geomType:"dumbbell"})};t.prototype.setChartAccessibilityStructureNotes=function(){ww(this.dumbbellPlotEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t,e){Fw(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&e){this.eventsTooltip({data:t,evt:tp,isToShow:true})}};t.prototype.onMouseOutHandler=function(){Fw(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){zw(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;Cw({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,diffLabelDetails:this.diffLabelDetails,chartType:"dumbbell"})};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);this.updateDiffLabel.attr("cursor",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?this.cursor:null);this.updateLabelChildren.attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null)};t.prototype.drawLegendElements=function(){Ww({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:!this.accessibility.hideStrokes?this.rawColors:null,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,label:this.legend.labels||this.ordinalLabel,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.bindLegendInteractivity=function(){var t=this;yp(this.dumbbellPlotEl).selectAll(".legend").on("click",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?function(e){return t.onHoverHandler(e,false)}:null).on("mouseout",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.setLegendCursor=function(){yp(this.dumbbellPlotEl).selectAll(".legend").style("cursor",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?this.cursor:null)};t.prototype.setSeriesCursor=function(){this.updateSeriesLabel.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null)};t.prototype.bindSeriesInteractivity=function(){var t=this;this.updateSeriesLabel.on("click",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onHoverHandler(e,false)}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?function(){return t.onMouseOutHandler()}:null)};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e,i,r){if(e.values){var n=r[i];var s=tp;var a=t.findMarkerIndex(e,n,s);t.onClickHandler(e.values[a])}}:null).on("mouseover",!this.suppressEvents?function(e,i,r){var n=e;if(e.values){var s=r[i];var a=tp;var o=t.findMarkerIndex(e,s,a);Fw(t.chartID,true);n=e.values[o];t.hoverFunc.emit(n)}t.showTooltip?t.eventsTooltip({data:t.tooltipLabel.labelAccessor&&t.tooltipLabel.labelAccessor.length?n:e,evt:tp,isToShow:true}):""}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateLabelChildren.on("click",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?function(){return t.onMouseOutHandler()}:null);this.updateDiffLabel.on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(){return t.onMouseOutHandler()}:null)};t.prototype.findMarkerIndex=function(t,e,i){var r=this.isVertical?this.findPosition(e,i)[1]:this.findPosition(e,i)[0];var n=this.isVertical?"Y":"X";var s=+yp(e).attr("data-center"+n+"1");var a=+yp(e).attr("data-center"+n+"2");var o=(a-s)/2+s;var l=t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]?0:1;return r<=o?0+l:1-l};t.prototype.findPosition=function(t,e){var i=t.ownerSVGElement||t;var r=i.createSVGPoint();r.x=e.clientX;r.y=e.clientY;r=r.matrixTransform(t.getScreenCTM().inverse());return[r.x,r.y]};t.prototype.generateId=function(t,e){var i=this.marker.type==="dot"?1:this.marker.type==="stroke"?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&t.referenceIndex===0?1:2;i=t.focus?this.focusMarker.sizeFromBar*i:this.marker.sizeFromBar*i;var r=this.marker.visible||t.focus?1:0;var n=this.rawColors[t.referenceIndex][0]==="#"?this.rawColors[t.referenceIndex].substring(1):this.rawColors[t.referenceIndex];var s=(e<2&&this.clickHighlight.length?this.clickStyle.strokeWidth:e<4?this.barStyle.width:this.hoverStyle.strokeWidth).toString();s=""+s;s=s.replace(/\D/g,"n");var a="marker-"+this.chartID+e+this.marker.type+i+n+s+r;return a};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldValidateLayout){this.validateLayout()}if(this.shouldValidateDataLabelPlacement){this.validateDataLabelPlacement();this.shouldValidateDataLabelPlacement=false}if(this.shouldValidateSeriesLabelPlacement){this.validateSeriesLabelPlacement();this.shouldValidateSeriesLabelPlacement=false}if(this.shouldValidateDiffLabelPlacement){this.validateDiffLabelPlacement();this.shouldValidateDiffLabelPlacement=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldUpdateLayout){this.setLayoutData();this.shouldUpdateLayout=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateMarkerData){this.prepareMarkerData();this.shouldUpdateMarkerData=false}if(this.shouldUpdateSeriesData){this.prepareSeriesData();this.shouldUpdateSeriesData=false}if(this.shouldUpdateLegendData){this.prepareLegendData();this.shouldUpdateLegendData=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldCheckValueAxis){if(this.layout==="horizontal"){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true}else if(this.layout==="vertical"||this.layoutOverride){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true}this.shouldCheckValueAxis=false}if(this.shouldCheckLabelAxis){if(this.layout==="vertical"||this.layoutOverride){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true}else if(this.layout==="horizontal"){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true}this.shouldCheckLabelAxis=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"dumbbell-main-title vcl-main-title","data-testid":"main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions dumbbell-sub-title vcl-sub-title","data-testid":"sub-title"},this.subTitle),r("div",{class:"dumbbell-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"dumbbell",chartTag:"dumbbell-plot",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-dumbbell-container"}),r("div",{class:"dumbbell-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))};t.prototype.init=function(){var t=Object.keys(rm);var e=0;var i={wrapLabel:{exception:false},strokeWidth:{exception:0},showDots:{exception:false},dotRadius:{exception:0},hoverOpacity:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:false}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:rm[t[e]]}};Object.defineProperty(t.prototype,"dumbbellPlotEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],seriesAccessor:["seriesAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],layout:["layoutWatcher"],showBaselineX:["showBaselineXWatcher"],showBaselineY:["showBaselineYWatcher"],colorPalette:["paletteWatcher"],colors:["paletteWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],hoverOpacity:["hoverOpacityWatcher"],cursor:["cursorWatcher"],focusMarker:["focusMarkerWatcher"],marker:["markerWatcher"],barStyle:["barStyleWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],differenceLabel:["differenceLabelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],referenceStyle:["referenceWatcher"],referenceLines:["referenceWatcher"],suppressEvents:["suppressWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],interactionKeys:["interactionWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}dumbbell-plot{cursor:default}dumbbell-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}dumbbell-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}dumbbell-plot .hidden{display:none}dumbbell-plot .axis{font-size:12px}dumbbell-plot .axis text{fill:#767676}dumbbell-plot .axis-label{text-anchor:middle;font:1rem sans-serif}dumbbell-plot .axis path{stroke:#767676}dumbbell-plot .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}dumbbell-plot .grid path{stroke-width:0;stroke:#767676}dumbbell-plot .dumbbell-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}dumbbell-plot .dumbbell-group__inactive{opacity:0}dumbbell-plot .dumbbell-group .dot{stroke:#ffffff}dumbbell-plot .dumbbell-group .dumbbell-series-label{font-size:1em}dumbbell-plot .dumbbell-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .dumbbell-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .annotations{pointer-events:none}dumbbell-plot .annotations .handle{pointer-events:all}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=Vw();var ix=undefined&&undefined.__rest||function(t,e){var i={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0)i[r]=t[r];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++){if(e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n]))i[r[n]]=t[r[n]]}return i};var rx=s.getLicenses;var nx=t("group_charts",function(){function t(t){e(this,t);this.chartContent=[];this.selectionMode="multiple";this.onElementUpdate=new Function;this.filterAccessor="label";this.defaultClickElement=[];this.data=[];this.hoverElement="";this.clickElement=[]}t.prototype.componentWillLoad=function(){};t.prototype.componentWillUpdate=function(){if(!this.clickElement){this.clickElement=this.defaultClickElement}this.renderCharts()};t.prototype.onClick=function(t){this.handleClickElement(t)};t.prototype.handleClickElement=function(t){console.log("handleClickElement",t);if(this.selectionMode==="single"){this.clickElement.includes(t)?this.clickElement="":this.clickElement=[t]}else if(this.selectionMode==="multiple"){if(!this.clickElement.includes(t)){this.clickElement.push(t)}else{for(var e=this.clickElement.length-1;e>=0;e--){if(this.clickElement[e]===t){this.clickElement.splice(e,1)}}}}else{this.clickElement=[]}this.onElementUpdate(this.clickElement)};t.prototype.onHover=function(t){this.hoverElement=t};t.prototype.onMouseOut=function(){this.hoverElement=""};t.prototype.drawChart=function(t){var e=this;var i=ix(t,["chartType","width"]);var n={onClickFunc:function(t){return e.onClick(t)},onHoverFunc:function(t){return e.onHover(t)},onMouseOutFunc:function(){return e.onMouseOut()},clickHighlight:this.clickElement,hoverHighlight:this.hoverElement};switch(t.chartType){case"bar-chart":return r("div",{class:"col--lg-"+t.width},r("bar-chart",Object.assign({width:t.width*100},n,i)));case"pie-chart":return r("div",{class:"col--lg-"+t.width},r("pie-chart",Object.assign({width:t.width*100},n,i)));case"scatter-plot":return r("div",{class:"col--lg-"+t.width},r("scatter-plot",Object.assign({width:t.width*100},n,i)));case"circle-packing":return r("div",{class:"col--lg-"+t.width},r("circle-packing",Object.assign({width:t.width*100},n,i)));case"clustered-force-layout":return r("div",{class:"col--lg-"+t.width},r("clustered-force-layout",Object.assign({width:t.width*100},n,i)));case"line-chart":return r("div",{class:"col--lg-"+t.width},r("line-chart",Object.assign({width:t.width*100},n,i)));case"world-map":return r("div",{class:"col--lg-"+t.width},r("world-map",Object.assign({width:t.width*100},n,i)));case"space":return r("div",{class:"col--lg-"+t.width});default:return}};t.prototype.renderCharts=function(){var t=this;return this.chartContent.map((function(e){return t.drawChart(e)}))};t.prototype.render=function(){return r("div",{class:"row"},this.renderCharts())};Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=rx();var sx="http://www.w3.org/1999/xhtml";var ax={svg:"http://www.w3.org/2000/svg",xhtml:sx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ox(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return ax.hasOwnProperty(e)?{space:ax[e],local:t}:t}function lx(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===sx&&e.documentElement.namespaceURI===sx?e.createElement(t):e.createElementNS(i,t)}}function ux(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hx(t){var e=ox(t);return(e.local?ux:lx)(e)}function cx(){}function dx(t){return t==null?cx:function(){return this.querySelector(t)}}function fx(t){if(typeof t!=="function")t=dx(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new BS(r,this._parents)}function px(){return[]}function yx(t){return t==null?px:function(){return this.querySelectorAll(t)}}function vx(t){if(typeof t!=="function")t=yx(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new BS(r,n)}function gx(t){return function(){return this.matches(t)}}function bx(t){if(typeof t!=="function")t=gx(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new BS(r,this._parents)}function mx(t){return new Array(t.length)}function Ax(){return new BS(this._enter||this._groups.map(mx),this._parents)}function wx(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}wx.prototype={constructor:wx,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function xx(t){return function(){return t}}var Sx="$";function Lx(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new wx(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function kx(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=Sx+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=Sx+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new wx(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function _x(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?kx:Lx,r=this._parents,n=this._groups;if(typeof t!=="function")t=xx(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new BS(a,r);a._enter=o;a._exit=l;return a}function Cx(){return new BS(this._exit||this._groups.map(mx),this._parents)}function Dx(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function Mx(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new BS(a,this._parents)}function Ux(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function Tx(t){if(!t)t=Ex;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new BS(n,this._parents).order()}function Ex(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ix(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function Nx(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function Hx(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function Wx(){var t=0;this.each((function(){++t}));return t}function Px(){return!this.node()}function Gx(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function Ox(t){return function(){this.removeAttribute(t)}}function Vx(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rx(t,e){return function(){this.setAttribute(t,e)}}function Yx(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function zx(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function Fx(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function Xx(t,e){var i=ox(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?Vx:Ox:typeof e==="function"?i.local?Fx:zx:i.local?Yx:Rx)(i,e))}function Bx(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Kx(t){return function(){this.style.removeProperty(t)}}function qx(t,e,i){return function(){this.style.setProperty(t,e,i)}}function jx(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function $x(t,e,i){return arguments.length>1?this.each((e==null?Kx:typeof e==="function"?jx:qx)(t,e,i==null?"":i)):Zx(this.node(),t)}function Zx(t,e){return t.style.getPropertyValue(e)||Bx(t).getComputedStyle(t,null).getPropertyValue(e)}function Qx(t){return function(){delete this[t]}}function Jx(t,e){return function(){this[t]=e}}function tS(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function eS(t,e){return arguments.length>1?this.each((e==null?Qx:typeof e==="function"?tS:Jx)(t,e)):this.node()[t]}function iS(t){return t.trim().split(/^|\s+/)}function rS(t){return t.classList||new nS(t)}function nS(t){this._node=t;this._names=iS(t.getAttribute("class")||"")}nS.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function sS(t,e){var i=rS(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function aS(t,e){var i=rS(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function oS(t){return function(){sS(this,t)}}function lS(t){return function(){aS(this,t)}}function uS(t,e){return function(){(e.apply(this,arguments)?sS:aS)(this,t)}}function hS(t,e){var i=iS(t+"");if(arguments.length<2){var r=rS(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?uS:e?oS:lS)(i,e))}function cS(){this.textContent=""}function dS(t){return function(){this.textContent=t}}function fS(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function pS(t){return arguments.length?this.each(t==null?cS:(typeof t==="function"?fS:dS)(t)):this.node().textContent}function yS(){this.innerHTML=""}function vS(t){return function(){this.innerHTML=t}}function gS(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function bS(t){return arguments.length?this.each(t==null?yS:(typeof t==="function"?gS:vS)(t)):this.node().innerHTML}function mS(){if(this.nextSibling)this.parentNode.appendChild(this)}function AS(){return this.each(mS)}function wS(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xS(){return this.each(wS)}function SS(t){var e=typeof t==="function"?t:hx(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function LS(){return null}function kS(t,e){var i=typeof t==="function"?t:hx(t),r=e==null?LS:typeof e==="function"?e:dx(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function _S(){var t=this.parentNode;if(t)t.removeChild(this)}function CS(){return this.each(_S)}function DS(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function MS(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function US(t){return this.select(t?MS:DS)}function TS(t){return arguments.length?this.property("__data__",t):this.node().__data__}var ES={};var IS=null;if(typeof document!=="undefined"){var NS=document.documentElement;if(!("onmouseenter"in NS)){ES={mouseenter:"mouseover",mouseleave:"mouseout"}}}function HS(t,e,i){t=WS(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function WS(t,e,i){return function(r){var n=IS;IS=r;try{t.call(this,this.__data__,e,i)}finally{IS=n}}}function PS(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function GS(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function OS(t,e,i){var r=ES.hasOwnProperty(t.type)?HS:WS;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function VS(t,e,i){var r=PS(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?OS:GS;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function RS(t,e,i){var r=Bx(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function YS(t,e){return function(){return RS(this,t,e)}}function zS(t,e){return function(){return RS(this,t,e.apply(this,arguments))}}function FS(t,e){return this.each((typeof e==="function"?zS:YS)(t,e))}var XS=[null];function BS(t,e){this._groups=t;this._parents=e}function KS(){return new BS([[document.documentElement]],XS)}BS.prototype=KS.prototype={constructor:BS,select:fx,selectAll:vx,filter:bx,data:_x,enter:Ax,exit:Cx,join:Dx,merge:Mx,order:Ux,sort:Tx,call:Ix,nodes:Nx,node:Hx,size:Wx,empty:Px,each:Gx,attr:Xx,style:$x,property:eS,classed:hS,text:pS,html:bS,raise:AS,lower:xS,append:SS,insert:kS,remove:CS,clone:US,datum:TS,on:VS,dispatch:FS};function qS(t){return typeof t==="string"?new BS([[document.querySelector(t)]],[document.documentElement]):new BS([[t]],XS)}function jS(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function $S(t){if(t.length===1)t=ZS(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function ZS(t){return function(e,i){return jS(t(e),i)}}var QS=$S(jS);var JS=QS.right;function tL(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var eL=Math.sqrt(50),iL=Math.sqrt(10),rL=Math.sqrt(2);function nL(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=sL(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function sL(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=eL?10:s>=iL?5:s>=rL?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=eL?10:s>=iL?5:s>=rL?2:1)}function aL(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=eL)n*=10;else if(s>=iL)n*=5;else if(s>=rL)n*=2;return e<t?-n:n}function oL(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function lL(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function uL(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var hL="$";function cL(){}cL.prototype=dL.prototype={constructor:cL,has:function(t){return hL+t in this},get:function(t){return this[hL+t]},set:function(t,e){this[hL+t]=e;return this},remove:function(t){var e=hL+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===hL)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===hL)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===hL)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===hL)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===hL)++t;return t},empty:function(){for(var t in this)if(t[0]===hL)return false;return true},each:function(t){for(var e in this)if(e[0]===hL)t(this[e],e.slice(1),this)}};function dL(t,e){var i=new cL;if(t instanceof cL)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function fL(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=dL(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,pL,yL)},map:function(t){return s(t,0,vL,gL)},entries:function(t){return a(s(t,0,vL,gL),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function pL(){return{}}function yL(t,e,i){t[e]=i}function vL(){return dL()}function gL(t,e,i){t.set(e,i)}var bL=Array.prototype;var mL=bL.slice;var AL={name:"implicit"};function wL(){var t=dL(),e=[],i=[],r=AL;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==AL)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=dL();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=mL.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return wL(e,i).unknown(r)};uL.apply(n,arguments);return n}function xL(){var t=wL().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=tL(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return xL(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return uL.apply(h(),arguments)}function SL(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function LL(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function kL(){}var _L=.7;var CL=1/_L;var DL="\\s*([+-]?\\d+)\\s*",ML="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",UL="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TL=/^#([0-9a-f]{3,8})$/,EL=new RegExp("^rgb\\("+[DL,DL,DL]+"\\)$"),IL=new RegExp("^rgb\\("+[UL,UL,UL]+"\\)$"),NL=new RegExp("^rgba\\("+[DL,DL,DL,ML]+"\\)$"),HL=new RegExp("^rgba\\("+[UL,UL,UL,ML]+"\\)$"),WL=new RegExp("^hsl\\("+[ML,UL,UL]+"\\)$"),PL=new RegExp("^hsla\\("+[ML,UL,UL,ML]+"\\)$");var GL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};SL(kL,YL,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:OL,formatHex:OL,formatHsl:VL,formatRgb:RL,toString:RL});function OL(){return this.rgb().formatHex()}function VL(){return QL(this).formatHsl()}function RL(){return this.rgb().formatRgb()}function YL(t){var e,i;t=(t+"").trim().toLowerCase();return(e=TL.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?zL(e):i===3?new KL(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?FL(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?FL(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=EL.exec(t))?new KL(e[1],e[2],e[3],1):(e=IL.exec(t))?new KL(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=NL.exec(t))?FL(e[1],e[2],e[3],e[4]):(e=HL.exec(t))?FL(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=WL.exec(t))?ZL(e[1],e[2]/100,e[3]/100,1):(e=PL.exec(t))?ZL(e[1],e[2]/100,e[3]/100,e[4]):GL.hasOwnProperty(t)?zL(GL[t]):t==="transparent"?new KL(NaN,NaN,NaN,0):null}function zL(t){return new KL(t>>16&255,t>>8&255,t&255,1)}function FL(t,e,i,r){if(r<=0)t=e=i=NaN;return new KL(t,e,i,r)}function XL(t){if(!(t instanceof kL))t=YL(t);if(!t)return new KL;t=t.rgb();return new KL(t.r,t.g,t.b,t.opacity)}function BL(t,e,i,r){return arguments.length===1?XL(t):new KL(t,e,i,r==null?1:r)}function KL(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}SL(KL,BL,LL(kL,{brighter:function(t){t=t==null?CL:Math.pow(CL,t);return new KL(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?_L:Math.pow(_L,t);return new KL(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:qL,formatHex:qL,formatRgb:jL,toString:jL}));function qL(){return"#"+$L(this.r)+$L(this.g)+$L(this.b)}function jL(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function $L(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function ZL(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new tk(t,e,i,r)}function QL(t){if(t instanceof tk)return new tk(t.h,t.s,t.l,t.opacity);if(!(t instanceof kL))t=YL(t);if(!t)return new tk;if(t instanceof tk)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new tk(a,o,l,t.opacity)}function JL(t,e,i,r){return arguments.length===1?QL(t):new tk(t,e,i,r==null?1:r)}function tk(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}SL(tk,JL,LL(kL,{brighter:function(t){t=t==null?CL:Math.pow(CL,t);return new tk(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?_L:Math.pow(_L,t);return new tk(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new KL(ek(t>=240?t-240:t+120,n,r),ek(t,n,r),ek(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function ek(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function ik(t){return function(){return t}}function rk(t,e){return function(i){return t+i*e}}function nk(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function sk(t){return(t=+t)===1?ak:function(e,i){return i-e?nk(e,i,t):ik(isNaN(e)?i:e)}}function ak(t,e){var i=e-t;return i?rk(t,i):ik(isNaN(t)?e:t)}var ok=function t(e){var i=sk(e);function r(t,e){var r=i((t=BL(t)).r,(e=BL(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=ak(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function lk(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}var uk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hk=new RegExp(uk.source,"g");function ck(t){return function(){return t}}function dk(t){return function(e){return t(e)+""}}function fk(t,e){var i=uk.lastIndex=hk.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=uk.exec(t))&&(n=hk.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:lk(r,n)})}i=hk.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?dk(l[0].x):ck(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}var pk=180/Math.PI;var yk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vk(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*pk,skewX:Math.atan(l)*pk,scaleX:a,scaleY:o}}var gk,bk,mk,Ak;function wk(t){if(t==="none")return yk;if(!gk)gk=document.createElement("DIV"),bk=document.documentElement,mk=document.defaultView;gk.style.transform=t;t=mk.getComputedStyle(bk.appendChild(gk),null).getPropertyValue("transform");bk.removeChild(gk);t=t.slice(7,-1).split(",");return vk(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function xk(t){if(t==null)return yk;if(!Ak)Ak=document.createElementNS("http://www.w3.org/2000/svg","g");Ak.setAttribute("transform",t);if(!(t=Ak.transform.baseVal.consolidate()))return yk;t=t.matrix;return vk(t.a,t.b,t.c,t.d,t.e,t.f)}function Sk(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:lk(t,n)},{i:l-2,x:lk(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:lk(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:lk(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:lk(t,i)},{i:o-2,x:lk(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var Lk=Sk(wk,"px, ","px)","deg)");var kk=Sk(xk,", ",")",")");function _k(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ck(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function Dk(t){return t=Ck(Math.abs(t)),t?t[1]:NaN}function Mk(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function Uk(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var Tk=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ek(t){if(!(e=Tk.exec(t)))throw new Error("invalid format: "+t);var e;return new Ik({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ek.prototype=Ik.prototype;function Ik(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}Ik.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Nk(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var Hk;function Wk(t,e){var i=Ck(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(Hk=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Ck(t,Math.max(0,e+s-1))[0]}function Pk(t,e){var i=Ck(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var Gk={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:_k,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Pk(t*100,e)},r:Pk,s:Wk,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Ok(t){return t}var Vk=Array.prototype.map,Rk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Yk(t){var e=t.grouping===undefined||t.thousands===undefined?Ok:Mk(Vk.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?Ok:Uk(Vk.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=Ek(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!Gk[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=Gk[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var L=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=Nk(t);if(L&&+t===0&&c!=="+")L=false;i=(L?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?Rk[8+Hk/3]:"")+r+(L&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var k=i.length+t.length+r.length,_=k<p?new Array(p-k+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,k=_.length>>1)+i+t+r+_.slice(k);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=Ek(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(Dk(e)/3)))*3,n=Math.pow(10,-r),s=Rk[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var zk;var Fk;var Xk;Bk({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Bk(t){zk=Yk(t);Fk=zk.format;Xk=zk.formatPrefix;return zk}function Kk(t){return Math.max(0,-Dk(Math.abs(t)))}function qk(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dk(e)/3)))*3-Dk(Math.abs(t)))}function jk(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,Dk(e)-Dk(t))+1}function $k(t,e,i,r){var n=aL(t,e,i),s;r=Ek(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=qk(n,a)))r.precision=s;return Xk(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=jk(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=Kk(n)))r.precision=s-(r.type==="%")*2;break}}return Fk(r)}function Zk(t){var e=t.domain;t.ticks=function(t){var i=e();return nL(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return $k(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=sL(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=sL(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=sL(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function Qk(){var t=0,e=1,i=1,r=[.5],n=[0,1],s;function a(t){return t<=t?n[JS(r,t,0,i)]:s}function o(){var n=-1;r=new Array(i);while(++n<i)r[n]=((n+1)*e-(n-i)*t)/(i+1);return a}a.domain=function(i){return arguments.length?(t=+i[0],e=+i[1],o()):[t,e]};a.range=function(t){return arguments.length?(i=(n=mL.call(t)).length-1,o()):n.slice()};a.invertExtent=function(s){var a=n.indexOf(s);return a<0?[NaN,NaN]:a<1?[t,r[0]]:a>=i?[r[i-1],e]:[r[a-1],r[a]]};a.unknown=function(t){return arguments.length?(s=t,a):a};a.thresholds=function(){return r.slice()};a.copy=function(){return Qk().domain([t,e]).range(n).unknown(s)};return uL.apply(Zk(a),arguments)}function Jk(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function t_(t){return 1-Math.sqrt(1-t*t)}var e_=s.propDefaultValues;var i_=function(){function t(){}return t}();i_.mainTitle="Heat Map Title";i_.subTitle="This is the heat map's subtitle";i_.height=250;i_.width=500;i_.margin={top:250*.01,bottom:250*.01,right:500*.01,left:500*.01};i_.padding={top:20,bottom:30,right:60,left:80};i_.xAccessor="date";i_.yAccessor="category";i_.valueAccessor="value";i_.shape="rect";i_.hideAxisPath=e_.showBaselineFalse;i_.accessibility=e_.accessibility;i_.animationConfig=e_.animationConfig;i_.highestHeadingLevel=e_.highestHeadingLevel;i_.xAxis=e_.xAxis;i_.yAxis=e_.yAxis;i_.wrapLabel=e_.wrapLabel;i_.strokeWidth=e_.strokeWidth2;i_.colorPalette=e_.colorPaletteSequential;i_.colorSteps=e_.colorSteps5;i_.hoverStyle=e_.hoverStyle;i_.clickStyle=e_.clickStyle;i_.cursor=e_.cursor;i_.hoverOpacity=e_.hoverOpacity;i_.dataLabel=e_.dataLabel;i_.legend=e_.legend;i_.tooltipLabel=e_.tooltipLabel;i_.showTooltip=e_.showTooltip;i_.suppressEvents=e_.suppressEvents;i_.referenceLines=e_.referenceLines;i_.annotations=e_.annotations;i_.clickHighlight=e_.clickHighlight;var r_={value:function(){}};function n_(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new s_(i)}function s_(t){this._=t}function a_(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}s_.prototype=n_.prototype={constructor:s_,on:function(t,e){var i=this._,r=a_(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=o_(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=l_(i[n],t.name,e);else if(e==null)for(n in i)i[n]=l_(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new s_(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function o_(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function l_(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=r_,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var u_=0,h_=0,c_=0,d_=1e3,f_,p_,y_=0,v_=0,g_=0,b_=typeof performance==="object"&&performance.now?performance:Date,m_=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function A_(){return v_||(m_(w_),v_=b_.now()+g_)}function w_(){v_=0}function x_(){this._call=this._time=this._next=null}x_.prototype=S_.prototype={constructor:x_,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?A_():+i)+(e==null?0:+e);if(!this._next&&p_!==this){if(p_)p_._next=this;else f_=this;p_=this}this._call=t;this._time=i;D_()},stop:function(){if(this._call){this._call=null;this._time=Infinity;D_()}}};function S_(t,e,i){var r=new x_;r.restart(t,e,i);return r}function L_(){A_();++u_;var t=f_,e;while(t){if((e=v_-t._time)>=0)t._call.call(null,e);t=t._next}--u_}function k_(){v_=(y_=b_.now())+g_;u_=h_=0;try{L_()}finally{u_=0;C_();v_=0}}function __(){var t=b_.now(),e=t-y_;if(e>d_)g_-=e,y_=t}function C_(){var t,e=f_,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:f_=i}}p_=t;D_(r)}function D_(t){if(u_)return;if(h_)h_=clearTimeout(h_);var e=t-v_;if(e>24){if(t<Infinity)h_=setTimeout(k_,t-b_.now()-g_);if(c_)c_=clearInterval(c_)}else{if(!c_)y_=b_.now(),c_=setInterval(__,d_);u_=1,m_(k_)}}function M_(t,e,i){var r=new x_;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var U_=n_("start","end","interrupt");var T_=[];var E_=0;var I_=1;var N_=2;var H_=3;var W_=4;var P_=5;var G_=6;function O_(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;z_(t,i,{name:e,index:r,group:n,on:U_,tween:T_,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:E_})}function V_(t,e){var i=Y_(t,e);if(i.state>E_)throw new Error("too late; already scheduled");return i}function R_(t,e){var i=Y_(t,e);if(i.state>N_)throw new Error("too late; already started");return i}function Y_(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function z_(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=S_(s,0,i.time);function s(t){i.state=I_;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==I_)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===H_)return M_(a);if(d.state===W_){d.state=G_;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=G_;d.timer.stop();delete r[u]}}M_((function(){if(i.state===H_){i.state=W_;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=N_;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==N_)return;i.state=H_;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=P_,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===P_){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=G_;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function F_(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>N_&&r.state<P_;r.state=G_;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function X_(t){return this.each((function(){F_(this,t)}))}function B_(t,e){var i,r;return function(){var n=R_(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function K_(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=R_(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function q_(t,e){var i=this._id;t+="";if(arguments.length<2){var r=Y_(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?B_:K_)(i,t,e))}function j_(t,e,i){var r=t._id;t.each((function(){var t=R_(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return Y_(t,r).value[e]}}function $_(t,e){var i;return(typeof e==="number"?lk:e instanceof YL?ok:(i=YL(e))?(e=i,ok):fk)(t,e)}function Z_(t){return function(){this.removeAttribute(t)}}function Q_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function J_(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function tC(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function eC(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function iC(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function rC(t,e){var i=ox(t),r=i==="transform"?kk:$_;return this.attrTween(t,typeof e==="function"?(i.local?iC:eC)(i,r,j_(this,"attr."+t,e)):e==null?(i.local?Q_:Z_)(i):(i.local?tC:J_)(i,r,e+""))}function nC(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function sC(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function aC(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=ox(t);return this.tween(i,(r.local?nC:sC)(r,e))}function oC(t,e){return function(){V_(this,t).delay=+e.apply(this,arguments)}}function lC(t,e){return e=+e,function(){V_(this,t).delay=e}}function uC(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?oC:lC)(e,t)):Y_(this.node(),e).delay}function hC(t,e){return function(){R_(this,t).duration=+e.apply(this,arguments)}}function cC(t,e){return e=+e,function(){R_(this,t).duration=e}}function dC(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?hC:cC)(e,t)):Y_(this.node(),e).duration}function fC(t,e){if(typeof e!=="function")throw new Error;return function(){R_(this,t).ease=e}}function pC(t){var e=this._id;return arguments.length?this.each(fC(e,t)):Y_(this.node(),e).ease}function yC(t){if(typeof t!=="function")t=gx(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new GC(r,this._parents,this._name,this._id)}function vC(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new GC(a,this._parents,this._name,this._id)}function gC(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function bC(t,e,i){var r,n,s=gC(e)?V_:R_;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function mC(t,e){var i=this._id;return arguments.length<2?Y_(this.node(),i).on.on(t):this.each(bC(i,t,e))}function AC(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function wC(){return this.on("end.remove",AC(this._id))}function xC(t){var e=this._name,i=this._id;if(typeof t!=="function")t=dx(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;O_(u[d],e,i,d,u,Y_(h,i))}}}return new GC(s,this._parents,e,i)}function SC(t){var e=this._name,i=this._id;if(typeof t!=="function")t=yx(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=Y_(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){O_(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new GC(s,a,e,i)}var LC=KS.prototype.constructor;function kC(){return new LC(this._groups,this._parents)}function _C(t,e){var i,r,n;return function(){var s=Zx(this,t),a=(this.style.removeProperty(t),Zx(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function CC(t){return function(){this.style.removeProperty(t)}}function DC(t,e,i){var r,n;return function(){var s=Zx(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function MC(t,e,i){var r,n,s;return function(){var a=Zx(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),Zx(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function UC(t,e,i){var r=(t+="")==="transform"?Lk:$_;return e==null?this.styleTween(t,_C(t,r)).on("end.style."+t,CC(t)):this.styleTween(t,typeof e==="function"?MC(t,r,j_(this,"style."+t,e)):DC(t,r,e+""),i)}function TC(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function EC(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,TC(t,e,i==null?"":i))}function IC(t){return function(){this.textContent=t}}function NC(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function HC(t){return this.tween("text",typeof t==="function"?NC(j_(this,"text",t)):IC(t==null?"":t+""))}function WC(){var t=this._name,e=this._id,i=VC();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=Y_(l,e);O_(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new GC(r,this._parents,t,i)}var PC=0;function GC(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function OC(t){return KS().transition(t)}function VC(){return++PC}var RC=KS.prototype;GC.prototype=OC.prototype={constructor:GC,select:xC,selectAll:SC,filter:yC,merge:vC,selection:kC,transition:WC,call:RC.call,nodes:RC.nodes,node:RC.node,size:RC.size,empty:RC.empty,each:RC.each,on:mC,attr:rC,attrTween:aC,style:UC,styleTween:EC,text:HC,remove:wC,tween:q_,delay:uC,duration:dC,ease:pC};var YC={time:null,delay:0,duration:250,ease:Jk};function zC(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return YC.time=A_(),YC}}return i}function FC(t){var e,i;if(t instanceof GC){e=t._id,t=t._name}else{e=VC(),(i=YC).time=A_(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){O_(l,t,e,u,a,i||zC(l,e))}}}return new GC(r,this._parents,t,e)}KS.prototype.interrupt=X_;KS.prototype.transition=FC;var XC=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var BC=new Uint8Array(16);function KC(){if(!XC){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return XC(BC)}var qC=[];for(var jC=0;jC<256;++jC){qC[jC]=(jC+256).toString(16).substr(1)}function $C(t,e){var i=e||0;var r=qC;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function ZC(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||KC)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||$C(n)}var QC=s.calculateLuminance,JC=s.prepareStrokeColorsFromScheme,tD=s.verifyTextHasSpace,eD=s.checkAttributeTransitions,iD=s.createTextStrokeFilter,rD=s.drawHoverStrokes,nD=s.removeHoverStrokes,sD=s.buildStrokes,aD=s.convertColorsToTextures,oD=s.findTagLevel,lD=s.prepareRenderChange,uD=s.initializeDescriptionRoot,hD=s.initializeElementAccess,cD=s.setElementFocusHandler,dD=s.setElementAccessID,fD=s.setAccessibilityController,pD=s.hideNonessentialGroups,yD=s.setAccessTitle,vD=s.setAccessSubtitle,gD=s.setAccessLongDescription,bD=s.setAccessExecutiveSummary,mD=s.setAccessPurpose,AD=s.setAccessContext,wD=s.setAccessStatistics,xD=s.setAccessChartCounts,SD=s.setAccessXAxis,LD=s.setAccessYAxis,kD=s.setAccessStructure,_D=s.setAccessAnnotation,CD=s.retainAccessFocus,DD=s.checkAccessFocus,MD=s.setElementInteractionAccessState,UD=s.setAccessibilityDescriptionWidth,TD=s.autoTextColor,ED=s.annotate,ID=s.chartAccessors,ND=s.checkInteraction,HD=s.checkClicked,WD=s.checkHovered,PD=s.convertVisaColor,GD=s.drawAxis,OD=s.drawLegend,VD=s.drawTooltip,RD=s.formatStats,YD=s.formatDate,zD=s.getColors,FD=s.getLicenses,XD=s.getPadding,BD=s.getScopedData,KD=s.initTooltipStyle,qD=s.overrideTitleTooltip,jD=s.placeDataLabels,$D=s.scopeDataKeys,ZD=s.transitionEndAll,QD=s.validateAccessibilityProps;var JD=t("heat_map",function(){function t(t){var r=this;e(this,t);this.mainTitle=i_.mainTitle;this.subTitle=i_.subTitle;this.height=i_.height;this.width=i_.width;this.highestHeadingLevel=i_.highestHeadingLevel;this.margin=i_.margin;this.padding=i_.padding;this.xAccessor=i_.xAccessor;this.yAccessor=i_.yAccessor;this.valueAccessor=i_.valueAccessor;this.xAxis=i_.xAxis;this.yAxis=i_.yAxis;this.wrapLabel=i_.wrapLabel;this.hideAxisPath=i_.hideAxisPath;this.colorPalette=i_.colorPalette;this.colorSteps=i_.colorSteps;this.hoverStyle=i_.hoverStyle;this.clickStyle=i_.clickStyle;this.cursor=i_.cursor;this.shape=i_.shape;this.hoverOpacity=i_.hoverOpacity;this.animationConfig=i_.animationConfig;this.strokeWidth=i_.strokeWidth;this.dataLabel=i_.dataLabel;this.showTooltip=i_.showTooltip;this.tooltipLabel=i_.tooltipLabel;this.accessibility=i_.accessibility;this.legend=i_.legend;this.annotations=i_.annotations;this.clickHighlight=i_.clickHighlight;this.suppressEvents=i_.suppressEvents;this.shouldValidateAccessibility=true;this.nest=[];this.datakeys=[];this.updated=true;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateTableData=false;this.shouldUpdateScales=false;this.shouldResetRoot=false;this.shouldSetColors=false;this.shouldValidateInteractionKeys=false;this.shouldFormatClickHighlight=false;this.shouldFormatHoverHighlight=false;this.shouldUpdateAnnotations=false;this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldSetGlobalSelections=false;this.shouldEnterUpdateExit=false;this.shouldUpdateGeometries=false;this.shouldSetSelectionClass=false;this.shouldDrawInteractionState=false;this.shouldUpdateLegend=false;this.shouldUpdateCursor=false;this.shouldBindInteractivity=false;this.shouldUpdateLabels=false;this.shouldSetLabelOpacity=false;this.shouldSwapXAxis=false;this.shouldSwapYAxis=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetTextures=false;this.shouldSetStrokes=false;this.strokes={};this.topLevel="h2";this.bottomLevel="p";this.textTreatmentHandler=function(t,e,i){var n=!r.accessibility.hideTextures&&r.accessibility.showExperimentalTextures?r.fillColors(t.valueAccessor):r.rawHeat(t.valueAccessor);var s=TD(n);var a=qS(i[e]);a.attr("filter",!a.classed("textIsMoving")?iD({root:r.svg.node(),id:r.chartID,color:n}):null);return s};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldSetGlobalSelections=true;this.shouldUpdateScales=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetXAxisAccessibility=true;this.shouldSetYAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true;this.shouldSetLabelOpacity=true};t.prototype.idWatcher=function(t,e){this.chartID=t;this.heatMapEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldSetTextures=true;this.shouldDrawInteractionState=true;this.shouldSetStrokes=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.layoutWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetLabelOpacity=true};t.prototype.xAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetXAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true;this.shouldSetLabelOpacity=true};t.prototype.yAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetYAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true;this.shouldSetLabelOpacity=true};t.prototype.groupAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldSetGeometryAriaLabels=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.xKeyOrderWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldDrawInteractionState=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetXAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.yKeyOrderWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldDrawInteractionState=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetYAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.xAxisWatcher=function(t,e){var i=t&&t.format?t.format:false;var r=e&&e.format?e.format:false;var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(i!==r){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true}if(n!==s){this.shouldSwapXAxis=true}this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true};t.prototype.yAxisWatcher=function(t,e){var i=t&&t.format?t.format:false;var r=e&&e.format?e.format:false;var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(i!==r){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true}if(n!==s){this.shouldSwapYAxis=true}this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true};t.prototype.wrapLabelWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.hideAxisPathWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true;this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.shapeWatcher=function(t,e){this.shouldUpdateGeometries=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true};t.prototype.strokeWidthWatcher=function(t,e){this.shouldUpdateGeometries=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldUpdateGeometries=true;this.shouldSetStrokes=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldSetLabelOpacity=true;this.shouldDrawInteractionState=true};t.prototype.labelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetLabelOpacity=true}};t.prototype.showTooltipWatcher=function(t,e){};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideTextures?t.hideTextures:false;var w=e&&e.hideTextures?e.hideTextures:false;var x=t&&t.showExperimentalTextures?t.showExperimentalTextures:false;var S=e&&e.showExperimentalTextures?e.showExperimentalTextures:false;if(A!==w||x!==S){this.shouldSetTextures=true;this.shouldUpdateLegend=true;this.shouldSetStrokes=true;this.shouldDrawInteractionState=true}var L=t&&t.showSmallLabels?t.showSmallLabels:false;var k=e&&e.showSmallLabels?e.showSmallLabels:false;if(L!==k){this.shouldSetLabelOpacity=true}var _=t&&t.hideStrokes?t.hideStrokes:false;var C=e&&e.hideStrokes?e.hideStrokes:false;if(_!==C){this.shouldUpdateLegend=true;this.shouldSetStrokes=true;this.shouldDrawInteractionState=true}var D=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var M=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var U=t&&t.elementsAreInterface?t.elementsAreInterface:false;var T=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(D!==M||U!==T){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(U!==T){this.shouldSetSelectionClass=true}};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetTextures=true};t.prototype.clickWatcher=function(t,e){this.shouldFormatClickHighlight=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true};t.prototype.hoverWatcher=function(t,e){this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"heat-map-"+ZC();t.heatMapEl.id=t.chartID;t.setTagLevels();t.prepareData();t.setDimensions();t.setColors();t.prepareScales();t.validateInteractionKeys();t.setTableData();t.shouldValidateAccessibilityProps();t.formatClickHighlight();t.formatHoverHighlight();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTextures();t.setStrokes();t.setGlobalSelections();t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.drawGeometries();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawDataLabels();t.drawLegendElements();t.setSelectedClass();t.updateInteractionState();t.bindInteractivity();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();pD(t.root.node(),t.map.node());t.setGroupAccessibilityID();t.onChangeHandler();t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldSetTextures){t.setTextures();t.shouldSetTextures=false}if(t.shouldSetStrokes){t.setStrokes();t.shouldSetStrokes=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldEnterUpdateExit){t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateGeometries){t.drawGeometries();t.shouldUpdateGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldSwapXAxis){t.drawXAxis(true);t.shouldSwapXAxis=false}if(t.shouldSwapYAxis){t.drawYAxis(true);t.shouldSwapYAxis=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;QD(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.formatClickHighlight=function(){var t=this;if(this.clickHighlight){this.clickHighlight.map((function(e){if(!e["xAccessor"]||!e["yAccessor"]){e["xAccessor"]=e[t.xAccessor]instanceof Date?YD({date:e[t.xAccessor],format:t.xAxis.format,offsetTimezone:true}):e[t.xAccessor];e["yAccessor"]=e[t.yAccessor]instanceof Date?YD({date:e[t.yAccessor],format:t.yAxis.format,offsetTimezone:true}):e[t.yAccessor]}}))}};t.prototype.formatHoverHighlight=function(){if(this.hoverHighlight){if(!this.hoverHighlight["xAccessor"]||!this.hoverHighlight["yAccessor"]){this.hoverHighlight["xAccessor"]=this.hoverHighlight[this.xAccessor]instanceof Date?YD({date:this.hoverHighlight[this.xAccessor],format:this.xAxis.format,offsetTimezone:true}):this.hoverHighlight[this.xAccessor];this.hoverHighlight["yAccessor"]=this.hoverHighlight[this.yAccessor]instanceof Date?YD({date:this.hoverHighlight[this.yAccessor],format:this.yAxis.format,offsetTimezone:true}):this.hoverHighlight[this.yAccessor]}}};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?XD(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.validateInteractionKeys=function(){var t=this;if(this.interactionKeys&&this.interactionKeys.length){if(this.interactionKeys.includes(this.xAccessor)||this.interactionKeys.includes(this.yAccessor)){var e=[];this.interactionKeys.map((function(i){var r=i===t.xAccessor?"xAccessor":i===t.yAccessor?"yAccessor":i;e.push(r)}));this.innerInteractionKeys=e}}else{this.innerInteractionKeys=["xAccessor","yAccessor"]}};t.prototype.prepareScales=function(){var t=this;var e=(this.minValueOverride||this.minValueOverride===0)&&this.minValueOverride<lL(this.preppedData,(function(t){return t.valueAccessor}))?this.minValueOverride:lL(this.preppedData,(function(t){return t.valueAccessor}));var i=(this.maxValueOverride||this.maxValueOverride===0)&&this.maxValueOverride>oL(this.preppedData,(function(t){return t.valueAccessor}))?this.maxValueOverride:oL(this.preppedData,(function(t){return t.valueAccessor}));this.x=xL().domain(this.xKeyOrder?this.xKeyOrder:this.preppedData.map((function(t){return t.xAccessor}))).range([0,this.innerPaddedWidth]);this.x.padding(this.strokeWidth?this.strokeWidth/this.x.bandwidth():0);this.y=xL().domain(this.yKeyOrder?this.yKeyOrder:this.preppedData.map((function(t){return t.yAccessor}))).range([0,this.innerPaddedHeight]);this.y.padding(this.strokeWidth?this.strokeWidth/this.y.bandwidth():0);this.heat=Qk().domain([e,i]);var r=[];var n=[];var s=0;var a=Math.ceil(this.preparedColors.length/2);var o=this.colorPalette&&this.colorPalette.includes("diverging");var l=this.colorPalette&&this.colorPalette.includes("dark");this.preparedColors.forEach((function(e){var i=JC(e,s,t.preparedColors,o?"diverging":"sequential");if(o){var u=QC(i.fillColor);var h=QC(i.textureColor);var c=u>h?i.textureColor:i.fillColor;var d=u<h?i.textureColor:i.fillColor;if(t.preparedColors.length%2&&s===(t.preparedColors.length-1)/2){n.push(l?c:d);r.push(l?d:c)}else{r.push(l?c:d);n.push(l?d:c)}}else{if(s+1<a){n.push(t.preparedColors[0]);r.push(t.preparedColors[t.preparedColors.length-1])}else{r.push(t.preparedColors[0]);n.push(t.preparedColors[t.preparedColors.length-1])}}s++}));this.fillColors=Qk().domain([e,i]).range(n);this.strokeColors=Qk().domain([e,i]).range(r);this.rawHeat=Qk().domain([e,i]).range(this.preparedColors);this.updateCheck=true};t.prototype.setColors=function(){this.preparedColors=this.colors?PD(this.colors):zD(this.colorPalette,this.colorSteps)};t.prototype.setTextures=function(){var t=this.colorPalette&&this.colorPalette.includes("diverging")?"diverging":"sequential";var e=t==="diverging"?11:9;if(this.accessibility.hideTextures||this.colorSteps>e||!this.accessibility.showExperimentalTextures){this.colorArr=this.preparedColors}else{var i=aD({colors:this.preparedColors,rootSVG:this.svg.node(),id:this.chartID,scheme:t,disableTransitions:!this.duration});this.colorArr=i}this.heat.range(this.colorArr)};t.prototype.setStrokes=function(){var t=Object.assign(Object.assign({},this.clickStyle),{color:undefined});var e=Object.assign(Object.assign({},this.hoverStyle),{color:undefined});this.strokes=sD({root:this.svg.node(),id:this.chartID,colors:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors.range():this.preparedColors,clickStyle:t,hoverStyle:e,strokeOverride:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.strokeColors.range():undefined})};t.prototype.setTableData=function(){var t=$D(this,ID,"heat-map");this.tableData=BD(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareData=function(){var t=this;if(this.updateCheck){this.interpolating=this.preppedData;var e=this.x.domain();var i=this.x.range();var r=this.y.domain();var n=this.y.range();this.interpolating.x=xL().domain(e).range(i);this.interpolating.y=xL().domain(r).range(n)}this.preppedData=this.data.map((function(e){var i=Object.assign({},e);i["valueAccessor"]=parseFloat(e[t.valueAccessor]);i["xAccessor"]=e[t.xAccessor]instanceof Date?YD({date:e[t.xAccessor],format:t.xAxis.format,offsetTimezone:true}):e[t.xAccessor];i["yAccessor"]=e[t.yAccessor]instanceof Date?YD({date:e[t.yAccessor],format:t.yAxis.format,offsetTimezone:true}):e[t.yAccessor];return i}));this.nest=fL().key((function(e){return e[t.yAccessor]})).entries(this.preppedData);this.datakeys=this.nest.map((function(t){return t.key}))};t.prototype.reSetRoot=function(){var t=lD({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:t_});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=lD({selection:this.root,duration:this.duration,namespace:"root_reset",easing:t_});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=lD({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:t_});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");UD(this.chartID,this.width)};t.prototype.drawXAxis=function(t){GD({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,top:this.xAxis.placement==="top",wrapLabel:this.wrapLabel?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:t||!this.xAxis.visible,duration:this.duration,hidePath:this.hideAxisPath})};t.prototype.drawYAxis=function(t){GD({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:this.yAxis.placement!=="right",right:this.yAxis.placement==="right",format:this.yAxis.format,wrapLabel:this.wrapLabel?this.padding.left||100:"",tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:t||!this.yAxis.visible,duration:this.duration,hidePath:this.hideAxisPath})};t.prototype.setXAxisAccessibility=function(){SD({rootEle:this.heatMapEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x||false,xAxisLabel:this.xAxis?this.xAxis.label||"":""})};t.prototype.setYAxisAccessibility=function(){LD({rootEle:this.heatMapEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y||false,yAxisLabel:this.yAxis?this.yAxis.label||"":""})};t.prototype.renderRootElements=function(){this.svg=qS(this.heatMapEl).select(".visa-viz-d3-heat-map-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.map=this.rootG.append("g").attr("class","map-group");this.labelG=this.rootG.append("g").attr("class","heat-map-dataLabel-group");this.legendG=qS(this.heatMapEl).select(".heat-map-legend").append("svg");this.tooltipG=qS(this.heatMapEl).select(".heat-map-tooltip")};t.prototype.setGlobalSelections=function(){this.xAxisElement=this.rootG.selectAll(".bottom");var t=this.map.selectAll(".row").data(this.nest,(function(t){return t.key}));this.enterRowWrappers=t.enter().append("g");this.exitRowWrappers=t.exit();this.updateRowWrappers=t.merge(this.enterRowWrappers);var e=this.updateRowWrappers.selectAll(".grid").data((function(t){return t.values}),(function(t){return t.xAccessor+t.yAccessor}));this.enter=e.enter().append("rect");this.exit=e.exit();this.update=e.merge(this.enter);this.exitSize=this.exit.size();this.enterSize=this.enter.size();this.exitSize+=this.exitRowWrappers.selectAll(".grid").size();var i=this.labelG.selectAll("g").data(this.nest,(function(t){return t.key}));this.enteringLabelGroups=i.enter().append("g");this.exitingLabelGroups=i.exit();this.updatingLabelGroups=i.merge(this.enteringLabelGroups);var r=this.updatingLabelGroups.selectAll("text").data((function(t){return t.values}),(function(t){return t.xAccessor+t.yAccessor}));this.enterLabels=r.enter().append("text");this.exitLabels=r.exit();this.updateLabels=r.merge(this.enterLabels)};t.prototype.enterGeometries=function(){var t=this;this.enter.interrupt();this.enterRowWrappers.attr("class","row").classed("entering",true).attr("cursor",!this.suppressEvents?this.cursor:null).each((function(t,e,i){hD(i[e])}));this.enter.attr("class","grid").each((function(t,e,i){hD(i[e])})).on("click",!this.suppressEvents?function(e){t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("opacity",0).attr("y",(function(e){if(t.interpolating&&t.interpolating.y(e.yAccessor)===undefined){var i=t.y(e.yAccessor);i=i+t.y.bandwidth()*(i/t.y(t.y.domain()[0]));return i}else if(t.interpolating){return t.interpolating.y(e.yAccessor)}return t.y(e.yAccessor)})).attr("height",(function(e){if(t.interpolating&&t.interpolating.y(e.yAccessor)===undefined){return 0}else if(t.interpolating){return t.interpolating.y.bandwidth()}return t.y.bandwidth()})).attr("x",(function(e){if(t.interpolating&&t.interpolating.x(e.xAccessor)===undefined){var i=t.x(e.xAccessor);i=i+t.x.bandwidth()*(i/t.x(t.x.domain()[t.x.domain().length-1]));return i}else if(t.interpolating){return t.interpolating.x(e.xAccessor)}return t.x(e.xAccessor)})).attr("width",(function(e){if(t.interpolating&&t.interpolating.x(e.xAccessor)===undefined){return 0}else if(t.interpolating){return t.interpolating.x.bandwidth()}return t.x.bandwidth()})).attr("rx",this.shape==="circle"?this.x.bandwidth():0).attr("ry",this.shape==="circle"?this.y.bandwidth():0);this.update.order();this.enterRowWrappers.order()};t.prototype.updateGeometries=function(){var t=this;this.update.interrupt();this.update.transition("opacity").duration((function(e,i,r){if(qS(r[i]).classed("entering")){qS(r[i]).classed("entering",false);return t.duration}return 0})).ease(t_).attr("opacity",(function(e){return ND(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))};t.prototype.exitGeometries=function(){var t=this;this.exit.interrupt();this.exit.transition("exit").duration(this.duration).ease(t_).attr("opacity",0).attr("y",(function(e,i,r){if(t.y(e.yAccessor)===undefined){var n=qS(r[i]);var s=+n.attr("y");s=s+ +n.attr("height")*(s/t.y(t.y.domain()[0]));return s}return t.y(e.yAccessor)})).attr("height",(function(e){if(t.y(e.yAccessor)===undefined){return 0}return t.y.bandwidth()})).attr("x",(function(e,i,r){if(t.x(e.xAccessor)===undefined){var n=qS(r[i]);var s=+n.attr("x");s=s+ +n.attr("width")*(s/t.x(t.x.domain()[t.x.domain().length-1]));return s}return t.x(e.xAccessor)})).attr("width",(function(e){if(t.x(e.xAccessor)===undefined){return 0}return t.x.bandwidth()}));this.exitRowWrappers.selectAll(".grid").transition("exit").duration(this.duration).ease(t_).attr("opacity",0).attr("y",(function(e,i,r){var n=qS(r[i]);var s=+n.attr("y");s=s+ +n.attr("height")*(s/t.y(t.y.domain()[0]));return s})).attr("height",0).attr("x",(function(e,i,r){if(t.x(e.xAccessor)===undefined){var n=qS(r[i]);var s=+n.attr("x");s=s+ +n.attr("width")*(s/t.x(t.x.domain()[t.x.domain().length-1]));return s}return t.x(e.xAccessor)})).attr("width",(function(e){if(t.x(e.xAccessor)===undefined){return 0}return t.x.bandwidth()}));this.update.transition("accessibilityAfterExit").duration(this.duration).ease(t_).call(ZD,(function(){var e=DD(t.rootG.node());t.exit.remove();t.exitRowWrappers.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();CD({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawGeometries=function(){var t=this;this.updateRowWrappers.transition("update").duration(this.duration).ease(t_).call(ZD,(function(){t.updateRowWrappers.classed("entering",false)}));var e=this.update.classed("geometryIsMoving",(function(e,i,r){var n=eD(qS(r[i]),[{attr:"y",numeric:true,newValue:t.y(e.yAccessor)},{attr:"height",numeric:true,newValue:t.y.bandwidth()},{attr:"x",numeric:true,newValue:t.x(e.xAccessor)},{attr:"width",numeric:true,newValue:t.x.bandwidth()},{attr:"rx",numeric:true,newValue:t.shape==="circle"?t.x.bandwidth():0},{attr:"ry",numeric:true,newValue:t.shape==="circle"?t.y.bandwidth():0}]);return n})).transition("update").duration(this.duration).ease(t_).attr("y",(function(e){return t.y(e.yAccessor)})).attr("height",this.y.bandwidth()).attr("x",(function(e){return t.x(e.xAccessor)})).attr("width",this.x.bandwidth()).attr("rx",this.shape==="circle"?this.x.bandwidth():0).attr("ry",this.shape==="circle"?this.y.bandwidth():0);if(this.accessibility.hideTextures||!this.accessibility.showExperimentalTextures){e.attr("fill",(function(e){return t.heat(e[t.valueAccessor])}))}e.call(ZD,(function(){t.update.classed("geometryIsMoving",false);t.updateInteractionState();CD({parentGNode:t.rootG.node()})}))};t.prototype.updateInteractionState=function(){var t=this;nD(this.svg.node());this.update.attr("fill",(function(e){return t.heat(e[t.valueAccessor])})).attr("opacity",(function(e){return ND(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).attr("filter",(function(e,i,r){if(!t.accessibility.hideStrokes&&!qS(r[i]).classed("geometryIsMoving")){var n=t.clickHighlight&&t.clickHighlight.length>0&&HD(e,t.clickHighlight,t.innerInteractionKeys);var s=t.hoverHighlight&&WD(e,t.hoverHighlight,t.innerInteractionKeys);var a=!t.accessibility.hideTextures&&t.accessibility.showExperimentalTextures?t.fillColors(e[t.valueAccessor]):t.rawHeat(e[t.valueAccessor]);var o=!t.accessibility.hideTextures&&t.accessibility.showExperimentalTextures?t.strokeColors(e[t.valueAccessor]):undefined;var l=n?"click":s&&!qS(r[i]).classed("geometryIsMoving")?"hover":"rest";if(l==="hover"){rD({inputElement:r[i],id:t.chartID,key:e[t.xAccessor]+e[t.yAccessor],strokeWidth:t.hoverStyle.strokeWidth,fill:a,strokeOverride:o})}return t.strokes[l+a]}return null}));CD({parentGNode:this.rootG.node()});this.updateLabels.attr("fill",this.textTreatmentHandler)};t.prototype.setLabelOpacity=function(){this.processLabelOpacity(this.updateLabels)};t.prototype.processLabelOpacity=function(t,e){var i=this;var r=this.dataLabel.visible?1:0;var n={width:this.x.bandwidth(),height:this.y.bandwidth()};var s=function(t){var e=i.dataLabel.labelAccessor?t[i.dataLabel.labelAccessor]:t.valueAccessor;e=e instanceof Date?YD({date:e,format:i.dataLabel.format,offsetTimezone:true}):RD(e,i.dataLabel.format);var s=i.accessibility.showSmallLabels||tD({text:e,dimensions:n,fontSize:14});return s?ND(t,r,i.hoverOpacity,i.hoverHighlight,i.clickHighlight,i.innerInteractionKeys)<1?0:1:0};if(e){t.attr("opacity",s)}else{t.each((function(t,e,i){if(!qS(i[e]).classed("entering")){qS(i[e]).attr("opacity",(function(){return s(t)}))}}))}};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=ND(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;MD(r[i],n,s);return n}))};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);this.updateLabels.attr("cursor",!this.suppressEvents?this.cursor:null)};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e){t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateLabels.on("click",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.enterDataLabels=function(){var t=this;this.enteringLabelGroups.attr("class","heat-map-label-wrapper");this.enterLabels.attr("class","heat-map-dataLabel entering").attr("opacity",0).attr("fill",this.textTreatmentHandler).attr("cursor",!this.suppressEvents?this.cursor:null).on("click",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);jD({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})};t.prototype.updateDataLabels=function(){var t=this;var e=this.updateLabels.transition("opacity").ease(t_).duration((function(e,i,r){if(qS(r[i]).classed("entering")){return t.duration/2}return 0})).delay((function(e,i,r){if(qS(r[i]).classed("entering")){return t.duration/2}return 0}));this.processLabelOpacity(e,true);e.call(ZD,(function(){t.updateLabels.classed("entering",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabels.transition("exit").ease(t_).duration(this.duration/2).attr("opacity",0).remove();this.exitingLabelGroups.selectAll("text").transition("exit").ease(t_).duration(this.duration/2).attr("opacity",0).call(ZD,(function(){t.exitingLabelGroups.remove()}))};t.prototype.drawDataLabels=function(){var t=this;this.updateLabels.attr("fill",this.textTreatmentHandler).text((function(e){var i=t.dataLabel.labelAccessor?e[t.dataLabel.labelAccessor]:e.valueAccessor;return i instanceof Date?YD({date:i,format:t.dataLabel.format,offsetTimezone:true}):RD(i,t.dataLabel.format)}));var e=this.updateLabels.transition("update").ease(t_).duration(this.duration);jD({root:e,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})};t.prototype.drawLegendElements=function(){OD({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.bottom+60,colorArr:this.legend&&this.legend.type!=="gradient"?this.colorArr:this.preparedColors,baseColorArr:!(this.colorPalette&&this.colorPalette.includes("diverging"))?[this.preparedColors[this.preparedColors.length-1]]:this.strokeColors.range(),hideStrokes:this.accessibility.hideStrokes,scale:this.heat,steps:this.colorSteps,margin:this.margin,padding:this.padding,duration:this.duration,type:this.legend.type,fontSize:12,label:this.legend.labels,format:this.legend.format,hide:!this.legend.visible})};t.prototype.drawAnnotations=function(){ED({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.xAccessor,yScale:this.y,yAccessor:this.yAccessor})};t.prototype.setAnnotationAccessibility=function(){_D(this.heatMapEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=oD(this.highestHeadingLevel);this.bottomLevel=oD(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){uD({rootEle:this.heatMapEl,title:this.accessibility.title||this.mainTitle,chartTag:"heat-map",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){fD({node:this.svg.node(),chartTag:"heat-map",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"cell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:$D(this,ID,"heat-map"),groupAccessor:this.yAccessor,groupName:"row",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){hD(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=$D(this,ID,"heat-map");this.update.each((function(i,r,n){cD({node:n[r],geomType:"cell",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"row",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});dD({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateRowWrappers.each((function(e,i,r){dD({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){yD(this.heatMapEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){vD(this.heatMapEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){gD(this.heatMapEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){bD(this.heatMapEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){mD(this.heatMapEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){AD(this.heatMapEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){wD(this.heatMapEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){xD({rootEle:this.heatMapEl,parentGNode:this.map.node(),chartTag:"heat-map",geomType:"cell",groupName:"row"})};t.prototype.setChartAccessibilityStructureNotes=function(){kD(this.heatMapEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){qD(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip){this.eventsTooltip({data:t,evt:IS,isToShow:true})}};t.prototype.onMouseOutHandler=function(){qD(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){KD(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;VD({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor,xAccessor:this.xAccessor,yAccessor:this.yAccessor,chartType:"heat-map"})};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldFormatClickHighlight){this.formatClickHighlight();this.shouldFormatClickHighlight=false}if(this.shouldFormatHoverHighlight){this.formatHoverHighlight();this.shouldFormatHoverHighlight=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{"data-testid":"main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions","data-testid":"sub-title"},this.subTitle),r("div",{class:"heat-map-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"cell",groupName:"row",chartTag:"heat-map",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-heat-map-container"}),r("div",{class:"heat-map-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))};t.prototype.init=function(){var t=Object.keys(i_);var e=0;var i={strokeWidth:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},wrapLabel:{exception:false},hoverOpacity:{exception:0}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:i_[t[e]]}};Object.defineProperty(t.prototype,"heatMapEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["layoutWatcher"],width:["layoutWatcher"],padding:["layoutWatcher"],margin:["layoutWatcher"],xAccessor:["xAccessorWatcher"],yAccessor:["yAccessorWatcher"],valueAccessor:["groupAccessorWatcher"],xKeyOrder:["xKeyOrderWatcher"],yKeyOrder:["yKeyOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],hideAxisPath:["hideAxisPathWatcher"],colorPalette:["colorsWatcher"],colors:["colorsWatcher"],colorSteps:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],shape:["shapeWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],legend:["legendWatcher"],suppressEvents:["suppressWatcher"],annotations:["annotationsWatcher"],accessibility:["accessibilityWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}heat-map{cursor:default}heat-map .annotations{pointer-events:none}heat-map .annotations .handle{pointer-events:all}heat-map .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}heat-map .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}heat-map .hidden{display:none}heat-map .axis{font-size:12px}heat-map .axis text{fill:#767676}heat-map .axis-label{text-anchor:middle;font:1rem sans-serif}heat-map .axis path{stroke:#767676}heat-map .axis .hidden{visibility:hidden}heat-map .heat-map-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}heat-map .heat-map-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=FD();var tM="http://www.w3.org/1999/xhtml";var eM={svg:"http://www.w3.org/2000/svg",xhtml:tM,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function iM(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return eM.hasOwnProperty(e)?{space:eM[e],local:t}:t}function rM(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===tM&&e.documentElement.namespaceURI===tM?e.createElement(t):e.createElementNS(i,t)}}function nM(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function sM(t){var e=iM(t);return(e.local?nM:rM)(e)}function aM(){}function oM(t){return t==null?aM:function(){return this.querySelector(t)}}function lM(t){if(typeof t!=="function")t=oM(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new RU(r,this._parents)}function uM(){return[]}function hM(t){return t==null?uM:function(){return this.querySelectorAll(t)}}function cM(t){if(typeof t!=="function")t=hM(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new RU(r,n)}function dM(t){return function(){return this.matches(t)}}function fM(t){if(typeof t!=="function")t=dM(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new RU(r,this._parents)}function pM(t){return new Array(t.length)}function yM(){return new RU(this._enter||this._groups.map(pM),this._parents)}function vM(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}vM.prototype={constructor:vM,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function gM(t){return function(){return t}}var bM="$";function mM(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new vM(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function AM(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=bM+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=bM+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new vM(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function wM(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?AM:mM,r=this._parents,n=this._groups;if(typeof t!=="function")t=gM(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new RU(a,r);a._enter=o;a._exit=l;return a}function xM(){return new RU(this._exit||this._groups.map(pM),this._parents)}function SM(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function LM(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new RU(a,this._parents)}function kM(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function _M(t){if(!t)t=CM;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new RU(n,this._parents).order()}function CM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function DM(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function MM(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function UM(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function TM(){var t=0;this.each((function(){++t}));return t}function EM(){return!this.node()}function IM(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function NM(t){return function(){this.removeAttribute(t)}}function HM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function WM(t,e){return function(){this.setAttribute(t,e)}}function PM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function GM(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function OM(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function VM(t,e){var i=iM(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?HM:NM:typeof e==="function"?i.local?OM:GM:i.local?PM:WM)(i,e))}function RM(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function YM(t){return function(){this.style.removeProperty(t)}}function zM(t,e,i){return function(){this.style.setProperty(t,e,i)}}function FM(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function XM(t,e,i){return arguments.length>1?this.each((e==null?YM:typeof e==="function"?FM:zM)(t,e,i==null?"":i)):BM(this.node(),t)}function BM(t,e){return t.style.getPropertyValue(e)||RM(t).getComputedStyle(t,null).getPropertyValue(e)}function KM(t){return function(){delete this[t]}}function qM(t,e){return function(){this[t]=e}}function jM(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function $M(t,e){return arguments.length>1?this.each((e==null?KM:typeof e==="function"?jM:qM)(t,e)):this.node()[t]}function ZM(t){return t.trim().split(/^|\s+/)}function QM(t){return t.classList||new JM(t)}function JM(t){this._node=t;this._names=ZM(t.getAttribute("class")||"")}JM.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function tU(t,e){var i=QM(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function eU(t,e){var i=QM(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function iU(t){return function(){tU(this,t)}}function rU(t){return function(){eU(this,t)}}function nU(t,e){return function(){(e.apply(this,arguments)?tU:eU)(this,t)}}function sU(t,e){var i=ZM(t+"");if(arguments.length<2){var r=QM(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?nU:e?iU:rU)(i,e))}function aU(){this.textContent=""}function oU(t){return function(){this.textContent=t}}function lU(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function uU(t){return arguments.length?this.each(t==null?aU:(typeof t==="function"?lU:oU)(t)):this.node().textContent}function hU(){this.innerHTML=""}function cU(t){return function(){this.innerHTML=t}}function dU(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function fU(t){return arguments.length?this.each(t==null?hU:(typeof t==="function"?dU:cU)(t)):this.node().innerHTML}function pU(){if(this.nextSibling)this.parentNode.appendChild(this)}function yU(){return this.each(pU)}function vU(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gU(){return this.each(vU)}function bU(t){var e=typeof t==="function"?t:sM(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function mU(){return null}function AU(t,e){var i=typeof t==="function"?t:sM(t),r=e==null?mU:typeof e==="function"?e:oM(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function wU(){var t=this.parentNode;if(t)t.removeChild(this)}function xU(){return this.each(wU)}function SU(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function LU(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function kU(t){return this.select(t?LU:SU)}function _U(t){return arguments.length?this.property("__data__",t):this.node().__data__}var CU={};var DU=null;if(typeof document!=="undefined"){var MU=document.documentElement;if(!("onmouseenter"in MU)){CU={mouseenter:"mouseover",mouseleave:"mouseout"}}}function UU(t,e,i){t=TU(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function TU(t,e,i){return function(r){var n=DU;DU=r;try{t.call(this,this.__data__,e,i)}finally{DU=n}}}function EU(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function IU(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function NU(t,e,i){var r=CU.hasOwnProperty(t.type)?UU:TU;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function HU(t,e,i){var r=EU(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?NU:IU;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function WU(t,e,i){var r=RM(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function PU(t,e){return function(){return WU(this,t,e)}}function GU(t,e){return function(){return WU(this,t,e.apply(this,arguments))}}function OU(t,e){return this.each((typeof e==="function"?GU:PU)(t,e))}var VU=[null];function RU(t,e){this._groups=t;this._parents=e}function YU(){return new RU([[document.documentElement]],VU)}RU.prototype=YU.prototype={constructor:RU,select:lM,selectAll:cM,filter:fM,data:wM,enter:yM,exit:xM,join:SM,merge:LM,order:kM,sort:_M,call:DM,nodes:MM,node:UM,size:TM,empty:EM,each:IM,attr:VM,style:XM,property:$M,classed:sU,text:uU,html:fU,raise:yU,lower:gU,append:bU,insert:AU,remove:xU,clone:kU,datum:_U,on:HU,dispatch:OU};function zU(t){return typeof t==="string"?new RU([[document.querySelector(t)]],[document.documentElement]):new RU([[t]],VU)}function FU(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function XU(t){if(t.length===1)t=BU(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function BU(t){return function(e,i){return FU(t(e),i)}}var KU=XU(FU);var qU=KU.right;function jU(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var $U=Math.sqrt(50),ZU=Math.sqrt(10),QU=Math.sqrt(2);function JU(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=tT(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function tT(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=$U?10:s>=ZU?5:s>=QU?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=$U?10:s>=ZU?5:s>=QU?2:1)}function eT(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=$U)n*=10;else if(s>=ZU)n*=5;else if(s>=QU)n*=2;return e<t?-n:n}function iT(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var rT="$";function nT(){}nT.prototype=sT.prototype={constructor:nT,has:function(t){return rT+t in this},get:function(t){return this[rT+t]},set:function(t,e){this[rT+t]=e;return this},remove:function(t){var e=rT+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===rT)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===rT)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===rT)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===rT)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===rT)++t;return t},empty:function(){for(var t in this)if(t[0]===rT)return false;return true},each:function(t){for(var e in this)if(e[0]===rT)t(this[e],e.slice(1),this)}};function sT(t,e){var i=new nT;if(t instanceof nT)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}var aT=Array.prototype;var oT=aT.map;var lT=aT.slice;var uT={name:"implicit"};function hT(){var t=sT(),e=[],i=[],r=uT;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==uT)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=sT();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=lT.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return hT(e,i).unknown(r)};iT.apply(n,arguments);return n}function cT(){var t=hT().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=jU(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return cT(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return iT.apply(h(),arguments)}function dT(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function fT(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function pT(){}var yT=.7;var vT=1/yT;var gT="\\s*([+-]?\\d+)\\s*",bT="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mT="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",AT=/^#([0-9a-f]{3,8})$/,wT=new RegExp("^rgb\\("+[gT,gT,gT]+"\\)$"),xT=new RegExp("^rgb\\("+[mT,mT,mT]+"\\)$"),ST=new RegExp("^rgba\\("+[gT,gT,gT,bT]+"\\)$"),LT=new RegExp("^rgba\\("+[mT,mT,mT,bT]+"\\)$"),kT=new RegExp("^hsl\\("+[bT,mT,mT]+"\\)$"),_T=new RegExp("^hsla\\("+[bT,mT,mT,bT]+"\\)$");var CT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dT(pT,TT,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:DT,formatHex:DT,formatHsl:MT,formatRgb:UT,toString:UT});function DT(){return this.rgb().formatHex()}function MT(){return RT(this).formatHsl()}function UT(){return this.rgb().formatRgb()}function TT(t){var e,i;t=(t+"").trim().toLowerCase();return(e=AT.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?ET(e):i===3?new WT(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?IT(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?IT(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=wT.exec(t))?new WT(e[1],e[2],e[3],1):(e=xT.exec(t))?new WT(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ST.exec(t))?IT(e[1],e[2],e[3],e[4]):(e=LT.exec(t))?IT(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=kT.exec(t))?VT(e[1],e[2]/100,e[3]/100,1):(e=_T.exec(t))?VT(e[1],e[2]/100,e[3]/100,e[4]):CT.hasOwnProperty(t)?ET(CT[t]):t==="transparent"?new WT(NaN,NaN,NaN,0):null}function ET(t){return new WT(t>>16&255,t>>8&255,t&255,1)}function IT(t,e,i,r){if(r<=0)t=e=i=NaN;return new WT(t,e,i,r)}function NT(t){if(!(t instanceof pT))t=TT(t);if(!t)return new WT;t=t.rgb();return new WT(t.r,t.g,t.b,t.opacity)}function HT(t,e,i,r){return arguments.length===1?NT(t):new WT(t,e,i,r==null?1:r)}function WT(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}dT(WT,HT,fT(pT,{brighter:function(t){t=t==null?vT:Math.pow(vT,t);return new WT(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?yT:Math.pow(yT,t);return new WT(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:PT,formatHex:PT,formatRgb:GT,toString:GT}));function PT(){return"#"+OT(this.r)+OT(this.g)+OT(this.b)}function GT(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function OT(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function VT(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new zT(t,e,i,r)}function RT(t){if(t instanceof zT)return new zT(t.h,t.s,t.l,t.opacity);if(!(t instanceof pT))t=TT(t);if(!t)return new zT;if(t instanceof zT)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new zT(a,o,l,t.opacity)}function YT(t,e,i,r){return arguments.length===1?RT(t):new zT(t,e,i,r==null?1:r)}function zT(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}dT(zT,YT,fT(pT,{brighter:function(t){t=t==null?vT:Math.pow(vT,t);return new zT(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?yT:Math.pow(yT,t);return new zT(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new WT(FT(t>=240?t-240:t+120,n,r),FT(t,n,r),FT(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function FT(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function XT(t){return function(){return t}}function BT(t,e){return function(i){return t+i*e}}function KT(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function qT(t){return(t=+t)===1?jT:function(e,i){return i-e?KT(e,i,t):XT(isNaN(e)?i:e)}}function jT(t,e){var i=e-t;return i?BT(t,i):XT(isNaN(t)?e:t)}var $T=function t(e){var i=qT(e);function r(t,e){var r=i((t=HT(t)).r,(e=HT(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=jT(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function ZT(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function QT(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function JT(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=lE(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function tE(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function eE(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function iE(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=lE(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var rE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nE=new RegExp(rE.source,"g");function sE(t){return function(){return t}}function aE(t){return function(e){return t(e)+""}}function oE(t,e){var i=rE.lastIndex=nE.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=rE.exec(t))&&(n=nE.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:eE(r,n)})}i=nE.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?aE(l[0].x):sE(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function lE(t,e){var i=typeof e,r;return e==null||i==="boolean"?XT(e):(i==="number"?eE:i==="string"?(r=TT(e))?(e=r,$T):oE:e instanceof TT?$T:e instanceof Date?tE:QT(e)?ZT:Array.isArray(e)?JT:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?iE:eE)(t,e)}function uE(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var hE=180/Math.PI;var cE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dE(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*hE,skewX:Math.atan(l)*hE,scaleX:a,scaleY:o}}var fE,pE,yE,vE;function gE(t){if(t==="none")return cE;if(!fE)fE=document.createElement("DIV"),pE=document.documentElement,yE=document.defaultView;fE.style.transform=t;t=yE.getComputedStyle(pE.appendChild(fE),null).getPropertyValue("transform");pE.removeChild(fE);t=t.slice(7,-1).split(",");return dE(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function bE(t){if(t==null)return cE;if(!vE)vE=document.createElementNS("http://www.w3.org/2000/svg","g");vE.setAttribute("transform",t);if(!(t=vE.transform.baseVal.consolidate()))return cE;t=t.matrix;return dE(t.a,t.b,t.c,t.d,t.e,t.f)}function mE(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:eE(t,n)},{i:l-2,x:eE(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:eE(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:eE(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:eE(t,i)},{i:o-2,x:eE(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var AE=mE(gE,"px, ","px)","deg)");var wE=mE(bE,", ",")",")");function xE(t){return function(){return t}}function SE(t){return+t}var LE=[0,1];function kE(t){return t}function _E(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:xE(isNaN(e)?NaN:.5)}function CE(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function DE(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=_E(n,r),s=i(a,s);else r=_E(r,n),s=i(s,a);return function(t){return s(r(t))}}function ME(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=_E(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=qU(t,e,1,r)-1;return s[i](n[i](e))}}function UE(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function TE(){var t=LE,e=LE,i=lE,r,n,s,a=kE,o,l,u;function h(){o=Math.min(t.length,e.length)>2?ME:DE;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),eE)))(i)))};c.domain=function(e){return arguments.length?(t=oT.call(e,SE),a===kE||(a=CE(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=lT.call(t),h()):e.slice()};c.rangeRound=function(t){return e=lT.call(t),i=uE,h()};c.clamp=function(e){return arguments.length?(a=e?CE(t):kE,c):a!==kE};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function EE(t,e){return TE()(t,e)}function IE(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function NE(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function HE(t){return t=NE(Math.abs(t)),t?t[1]:NaN}function WE(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function PE(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var GE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function OE(t){if(!(e=GE.exec(t)))throw new Error("invalid format: "+t);var e;return new VE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}OE.prototype=VE.prototype;function VE(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}VE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function RE(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var YE;function zE(t,e){var i=NE(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(YE=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+NE(t,Math.max(0,e+s-1))[0]}function FE(t,e){var i=NE(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var XE={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:IE,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return FE(t*100,e)},r:FE,s:zE,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function BE(t){return t}var KE=Array.prototype.map,qE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function jE(t){var e=t.grouping===undefined||t.thousands===undefined?BE:WE(KE.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?BE:PE(KE.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=OE(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!XE[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=XE[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var L=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=RE(t);if(L&&+t===0&&c!=="+")L=false;i=(L?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?qE[8+YE/3]:"")+r+(L&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var k=i.length+t.length+r.length,_=k<p?new Array(p-k+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,k=_.length>>1)+i+t+r+_.slice(k);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=OE(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(HE(e)/3)))*3,n=Math.pow(10,-r),s=qE[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var $E;var ZE;var QE;JE({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function JE(t){$E=jE(t);ZE=$E.format;QE=$E.formatPrefix;return $E}function tI(t){return Math.max(0,-HE(Math.abs(t)))}function eI(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(HE(e)/3)))*3-HE(Math.abs(t)))}function iI(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,HE(e)-HE(t))+1}function rI(t,e,i,r){var n=eT(t,e,i),s;r=OE(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=eI(n,a)))r.precision=s;return QE(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=iI(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=tI(n)))r.precision=s-(r.type==="%")*2;break}}return ZE(r)}function nI(t){var e=t.domain;t.ticks=function(t){var i=e();return JU(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return rI(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=tT(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=tT(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=tT(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function sI(){var t=EE(kE,kE);t.copy=function(){return UE(t,sI())};iT.apply(t,arguments);return nI(t)}var aI={value:function(){}};function oI(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new lI(i)}function lI(t){this._=t}function uI(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}lI.prototype=oI.prototype={constructor:lI,on:function(t,e){var i=this._,r=uI(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=hI(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=cI(i[n],t.name,e);else if(e==null)for(n in i)i[n]=cI(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new lI(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function hI(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function cI(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=aI,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var dI=0,fI=0,pI=0,yI=1e3,vI,gI,bI=0,mI=0,AI=0,wI=typeof performance==="object"&&performance.now?performance:Date,xI=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function SI(){return mI||(xI(LI),mI=wI.now()+AI)}function LI(){mI=0}function kI(){this._call=this._time=this._next=null}kI.prototype=_I.prototype={constructor:kI,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?SI():+i)+(e==null?0:+e);if(!this._next&&gI!==this){if(gI)gI._next=this;else vI=this;gI=this}this._call=t;this._time=i;TI()},stop:function(){if(this._call){this._call=null;this._time=Infinity;TI()}}};function _I(t,e,i){var r=new kI;r.restart(t,e,i);return r}function CI(){SI();++dI;var t=vI,e;while(t){if((e=mI-t._time)>=0)t._call.call(null,e);t=t._next}--dI}function DI(){mI=(bI=wI.now())+AI;dI=fI=0;try{CI()}finally{dI=0;UI();mI=0}}function MI(){var t=wI.now(),e=t-bI;if(e>yI)AI-=e,bI=t}function UI(){var t,e=vI,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:vI=i}}gI=t;TI(r)}function TI(t){if(dI)return;if(fI)fI=clearTimeout(fI);var e=t-mI;if(e>24){if(t<Infinity)fI=setTimeout(DI,t-wI.now()-AI);if(pI)pI=clearInterval(pI)}else{if(!pI)bI=wI.now(),pI=setInterval(MI,yI);dI=1,xI(DI)}}function EI(t,e,i){var r=new kI;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var II=oI("start","end","interrupt");var NI=[];var HI=0;var WI=1;var PI=2;var GI=3;var OI=4;var VI=5;var RI=6;function YI(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;BI(t,i,{name:e,index:r,group:n,on:II,tween:NI,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:HI})}function zI(t,e){var i=XI(t,e);if(i.state>HI)throw new Error("too late; already scheduled");return i}function FI(t,e){var i=XI(t,e);if(i.state>PI)throw new Error("too late; already started");return i}function XI(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function BI(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=_I(s,0,i.time);function s(t){i.state=WI;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==WI)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===GI)return EI(a);if(d.state===OI){d.state=RI;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=RI;d.timer.stop();delete r[u]}}EI((function(){if(i.state===GI){i.state=OI;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=PI;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==PI)return;i.state=GI;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=VI,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===VI){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=RI;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function KI(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>PI&&r.state<VI;r.state=RI;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function qI(t){return this.each((function(){KI(this,t)}))}function jI(t,e){var i,r;return function(){var n=FI(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function $I(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=FI(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function ZI(t,e){var i=this._id;t+="";if(arguments.length<2){var r=XI(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?jI:$I)(i,t,e))}function QI(t,e,i){var r=t._id;t.each((function(){var t=FI(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return XI(t,r).value[e]}}function JI(t,e){var i;return(typeof e==="number"?eE:e instanceof TT?$T:(i=TT(e))?(e=i,$T):oE)(t,e)}function tN(t){return function(){this.removeAttribute(t)}}function eN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function iN(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function rN(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function nN(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function sN(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function aN(t,e){var i=iM(t),r=i==="transform"?wE:JI;return this.attrTween(t,typeof e==="function"?(i.local?sN:nN)(i,r,QI(this,"attr."+t,e)):e==null?(i.local?eN:tN)(i):(i.local?rN:iN)(i,r,e+""))}function oN(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function lN(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function uN(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=iM(t);return this.tween(i,(r.local?oN:lN)(r,e))}function hN(t,e){return function(){zI(this,t).delay=+e.apply(this,arguments)}}function cN(t,e){return e=+e,function(){zI(this,t).delay=e}}function dN(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?hN:cN)(e,t)):XI(this.node(),e).delay}function fN(t,e){return function(){FI(this,t).duration=+e.apply(this,arguments)}}function pN(t,e){return e=+e,function(){FI(this,t).duration=e}}function yN(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?fN:pN)(e,t)):XI(this.node(),e).duration}function vN(t,e){if(typeof e!=="function")throw new Error;return function(){FI(this,t).ease=e}}function gN(t){var e=this._id;return arguments.length?this.each(vN(e,t)):XI(this.node(),e).ease}function bN(t){if(typeof t!=="function")t=dM(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new RN(r,this._parents,this._name,this._id)}function mN(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new RN(a,this._parents,this._name,this._id)}function AN(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function wN(t,e,i){var r,n,s=AN(e)?zI:FI;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function xN(t,e){var i=this._id;return arguments.length<2?XI(this.node(),i).on.on(t):this.each(wN(i,t,e))}function SN(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function LN(){return this.on("end.remove",SN(this._id))}function kN(t){var e=this._name,i=this._id;if(typeof t!=="function")t=oM(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;YI(u[d],e,i,d,u,XI(h,i))}}}return new RN(s,this._parents,e,i)}function _N(t){var e=this._name,i=this._id;if(typeof t!=="function")t=hM(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=XI(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){YI(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new RN(s,a,e,i)}var CN=YU.prototype.constructor;function DN(){return new CN(this._groups,this._parents)}function MN(t,e){var i,r,n;return function(){var s=BM(this,t),a=(this.style.removeProperty(t),BM(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function UN(t){return function(){this.style.removeProperty(t)}}function TN(t,e,i){var r,n;return function(){var s=BM(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function EN(t,e,i){var r,n,s;return function(){var a=BM(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),BM(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function IN(t,e,i){var r=(t+="")==="transform"?AE:JI;return e==null?this.styleTween(t,MN(t,r)).on("end.style."+t,UN(t)):this.styleTween(t,typeof e==="function"?EN(t,r,QI(this,"style."+t,e)):TN(t,r,e+""),i)}function NN(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function HN(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,NN(t,e,i==null?"":i))}function WN(t){return function(){this.textContent=t}}function PN(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function GN(t){return this.tween("text",typeof t==="function"?PN(QI(this,"text",t)):WN(t==null?"":t+""))}function ON(){var t=this._name,e=this._id,i=zN();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=XI(l,e);YI(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new RN(r,this._parents,t,i)}var VN=0;function RN(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function YN(t){return YU().transition(t)}function zN(){return++VN}var FN=YU.prototype;RN.prototype=YN.prototype={constructor:RN,select:kN,selectAll:_N,filter:bN,merge:mN,selection:DN,transition:ON,call:FN.call,nodes:FN.nodes,node:FN.node,size:FN.size,empty:FN.empty,each:FN.each,on:xN,attr:aN,attrTween:uN,style:IN,styleTween:HN,text:GN,remove:LN,tween:ZI,delay:dN,duration:yN,ease:gN};function XN(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var BN={time:null,delay:0,duration:250,ease:XN};function KN(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return BN.time=SI(),BN}}return i}function qN(t){var e,i;if(t instanceof RN){e=t._id,t=t._name}else{e=zN(),(i=BN).time=SI(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){YI(l,t,e,u,a,i||KN(l,e))}}}return new RN(r,this._parents,t,e)}YU.prototype.interrupt=qI;YU.prototype.transition=qN;var jN=s.getLicenses,$N=s.drawTooltip,ZN=s.initTooltipStyle;var QN=t("level_indicator_alternative",function(){function t(t){e(this,t);this.height=100;this.width=60;this.data=[{}];this.ordinalAccessor="label";this.valueAccessor="value";this.showHeader=true;this.showLabel=false;this.enableColor=true;this.dataFormat="0,0.00";this.threshold=.1;this.colors=["#180F58","#B7C9E7","#B7B7B7","#E2AEBC","#D60036"];this.indicatorLabels=["High","Above","Avg.","Below","Poor"];this.defaultColor=["#180F58"];this.wrapLabel=true;this.alignLabel="center";this.padding={top:this.height*.08,bottom:this.height*.25,right:this.width*.01,left:this.width*.01};this.indicatorWidth=this.height/4;this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.componentWillLoad=function(){this.innerHeight=this.height-this.padding.top-this.padding.bottom;this.innerWidth=this.width-this.padding.left-this.padding.right};t.prototype.componentWillUpdate=function(){this.drawChart()};t.prototype.componentDidLoad=function(){this.drawChart();this.setTooltipInitialStyle()};t.prototype.drawChart=function(){var t=this;this.reSetRoot();this.y=sI().domain([-this.threshold,this.threshold]).range([this.innerHeight-this.indicatorWidth/6,0]);this.x=cT().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([0,this.innerWidth]).padding(.2);if(this.showLabel){this.drawLabel()}this.drawIndicator()};t.prototype.reSetRoot=function(){if(this.svg){this.svg.remove()}this.svg=zU(this.indicatorChartEl).select("#visa-viz-d3-indicator-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.rootG=this.svg.append("g").attr("id","visa-viz-padding-container-g").attr("transform","translate("+this.padding.left+", "+this.padding.top+")").attr("class","indicator");this.tooltipG=zU(this.indicatorChartEl).select(".indicator-tooltip")};t.prototype.drawLabel=function(){var t=this;this.rootG.append("g").attr("class","indicator-label").attr("transform","translate(0, "+this.innerHeight+")").selectAll("text").data(this.data).enter().append("text").attr("dy","1.5em").attr("dx",(function(e){return t.x(e[t.ordinalAccessor])/2})).text((function(e){return t.getLabel(e[t.valueAccessor])}))};t.prototype.drawIndicator=function(){var t=this;var e=this.rootG.append("g").attr("class","indicator-chart").selectAll("g").data(this.data).enter().append("g");var i=[-2,-1,0,1,2];i.map((function(i){e.append("rect").attr("x",(function(e){return t.x(e[t.ordinalAccessor])})).attr("y",(function(){return t.y(t.threshold/2*i)-t.indicatorWidth/4})).attr("height",t.indicatorWidth/2).attr("width",t.indicatorWidth*.8).attr("fill","#E6E6E6")}));e.append("rect").attr("x",(function(e){return t.x(e[t.ordinalAccessor])-t.indicatorWidth*.1})).attr("y",(function(e){return t.y(t.getLevel(e[t.valueAccessor]))-t.indicatorWidth/4})).attr("height",this.indicatorWidth/2).attr("width",this.indicatorWidth).attr("fill",(function(e){return t.enableColor?t.getColor(e[t.valueAccessor]):t.defaultColor})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))};t.prototype.getLevel=function(t){if(t>=this.threshold){return this.threshold}else if(t>=this.threshold/2){return this.threshold/2}else if(t>-this.threshold/2){return 0}else if(t>-this.threshold){return-this.threshold/2}else{return-this.threshold}};t.prototype.getLabel=function(t){if(t>=this.threshold){return this.indicatorLabels[0]}else if(t>=this.threshold/2){return this.indicatorLabels[1]}else if(t>-this.threshold/2){return this.indicatorLabels[2]}else if(t>-this.threshold){return this.indicatorLabels[3]}else{return this.indicatorLabels[4]}};t.prototype.getColor=function(t){if(t>=this.threshold){return this.colors[0]}else if(t>=this.threshold/2){return this.colors[1]}else if(t>-this.threshold/2){return this.colors[2]}else if(t>-this.threshold){return this.colors[3]}else{return this.colors[4]}};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){this.hoverFunc.emit(t);this.eventsTooltip({data:t,evt:DU,isToShow:true})};t.prototype.onMouseOutHandler=function(){this.mouseOutFunc.emit();this.eventsTooltip({isToShow:false})};t.prototype.setTooltipInitialStyle=function(){ZN(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;$N({root:this.tooltipG,data:e,event:i,isToShow:r,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})};t.prototype.render=function(){return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r("div",{class:"visa-ui-text--body",style:{visibility:this.showHeader?"visible":"hidden",width:this.wrapLabel?""+this.indicatorWidth*1.5+"px":"auto",textAlign:this.alignLabel}},this.data[0][this.ordinalAccessor]),r("div",{class:"indicator-tooltip vcl-tooltip",style:{display:"block"}}),r("div",{id:"visa-viz-d3-indicator-container"})))};Object.defineProperty(t.prototype,"indicatorChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}.indicator .indicator-grid line{stroke:#767676;stroke-opacity:1}.indicator .indicator-grid path{stroke-width:0;stroke:#767676}.indicator .indicator-grid text{fill:#767676}.indicator .indicator-label{font-size:0.8em;fill:#767676;text-anchor:start}.indicator .indicator-chart{stroke:#767676}.indicator .indicator-chart rect{stroke:none}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=jN();var JN="http://www.w3.org/1999/xhtml";var tH={svg:"http://www.w3.org/2000/svg",xhtml:JN,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function eH(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return tH.hasOwnProperty(e)?{space:tH[e],local:t}:t}function iH(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===JN&&e.documentElement.namespaceURI===JN?e.createElement(t):e.createElementNS(i,t)}}function rH(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function nH(t){var e=eH(t);return(e.local?rH:iH)(e)}function sH(){}function aH(t){return t==null?sH:function(){return this.querySelector(t)}}function oH(t){if(typeof t!=="function")t=aH(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new VW(r,this._parents)}function lH(){return[]}function uH(t){return t==null?lH:function(){return this.querySelectorAll(t)}}function hH(t){if(typeof t!=="function")t=uH(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new VW(r,n)}function cH(t){return function(){return this.matches(t)}}function dH(t){if(typeof t!=="function")t=cH(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new VW(r,this._parents)}function fH(t){return new Array(t.length)}function pH(){return new VW(this._enter||this._groups.map(fH),this._parents)}function yH(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}yH.prototype={constructor:yH,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function vH(t){return function(){return t}}var gH="$";function bH(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new yH(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function mH(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=gH+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=gH+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new yH(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function AH(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?mH:bH,r=this._parents,n=this._groups;if(typeof t!=="function")t=vH(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new VW(a,r);a._enter=o;a._exit=l;return a}function wH(){return new VW(this._exit||this._groups.map(fH),this._parents)}function xH(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function SH(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new VW(a,this._parents)}function LH(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function kH(t){if(!t)t=_H;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new VW(n,this._parents).order()}function _H(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function CH(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function DH(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function MH(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function UH(){var t=0;this.each((function(){++t}));return t}function TH(){return!this.node()}function EH(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function IH(t){return function(){this.removeAttribute(t)}}function NH(t){return function(){this.removeAttributeNS(t.space,t.local)}}function HH(t,e){return function(){this.setAttribute(t,e)}}function WH(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function PH(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function GH(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function OH(t,e){var i=eH(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?NH:IH:typeof e==="function"?i.local?GH:PH:i.local?WH:HH)(i,e))}function VH(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function RH(t){return function(){this.style.removeProperty(t)}}function YH(t,e,i){return function(){this.style.setProperty(t,e,i)}}function zH(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function FH(t,e,i){return arguments.length>1?this.each((e==null?RH:typeof e==="function"?zH:YH)(t,e,i==null?"":i)):XH(this.node(),t)}function XH(t,e){return t.style.getPropertyValue(e)||VH(t).getComputedStyle(t,null).getPropertyValue(e)}function BH(t){return function(){delete this[t]}}function KH(t,e){return function(){this[t]=e}}function qH(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function jH(t,e){return arguments.length>1?this.each((e==null?BH:typeof e==="function"?qH:KH)(t,e)):this.node()[t]}function $H(t){return t.trim().split(/^|\s+/)}function ZH(t){return t.classList||new QH(t)}function QH(t){this._node=t;this._names=$H(t.getAttribute("class")||"")}QH.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function JH(t,e){var i=ZH(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function tW(t,e){var i=ZH(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function eW(t){return function(){JH(this,t)}}function iW(t){return function(){tW(this,t)}}function rW(t,e){return function(){(e.apply(this,arguments)?JH:tW)(this,t)}}function nW(t,e){var i=$H(t+"");if(arguments.length<2){var r=ZH(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?rW:e?eW:iW)(i,e))}function sW(){this.textContent=""}function aW(t){return function(){this.textContent=t}}function oW(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function lW(t){return arguments.length?this.each(t==null?sW:(typeof t==="function"?oW:aW)(t)):this.node().textContent}function uW(){this.innerHTML=""}function hW(t){return function(){this.innerHTML=t}}function cW(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function dW(t){return arguments.length?this.each(t==null?uW:(typeof t==="function"?cW:hW)(t)):this.node().innerHTML}function fW(){if(this.nextSibling)this.parentNode.appendChild(this)}function pW(){return this.each(fW)}function yW(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vW(){return this.each(yW)}function gW(t){var e=typeof t==="function"?t:nH(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function bW(){return null}function mW(t,e){var i=typeof t==="function"?t:nH(t),r=e==null?bW:typeof e==="function"?e:aH(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function AW(){var t=this.parentNode;if(t)t.removeChild(this)}function wW(){return this.each(AW)}function xW(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function SW(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function LW(t){return this.select(t?SW:xW)}function kW(t){return arguments.length?this.property("__data__",t):this.node().__data__}var _W={};var CW=null;if(typeof document!=="undefined"){var DW=document.documentElement;if(!("onmouseenter"in DW)){_W={mouseenter:"mouseover",mouseleave:"mouseout"}}}function MW(t,e,i){t=UW(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function UW(t,e,i){return function(r){var n=CW;CW=r;try{t.call(this,this.__data__,e,i)}finally{CW=n}}}function TW(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function EW(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function IW(t,e,i){var r=_W.hasOwnProperty(t.type)?MW:UW;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function NW(t,e,i){var r=TW(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?IW:EW;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function HW(t,e,i){var r=VH(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function WW(t,e){return function(){return HW(this,t,e)}}function PW(t,e){return function(){return HW(this,t,e.apply(this,arguments))}}function GW(t,e){return this.each((typeof e==="function"?PW:WW)(t,e))}var OW=[null];function VW(t,e){this._groups=t;this._parents=e}function RW(){return new VW([[document.documentElement]],OW)}VW.prototype=RW.prototype={constructor:VW,select:oH,selectAll:hH,filter:dH,data:AH,enter:pH,exit:wH,join:xH,merge:SH,order:LH,sort:kH,call:CH,nodes:DH,node:MH,size:UH,empty:TH,each:EH,attr:OH,style:FH,property:jH,classed:nW,text:lW,html:dW,raise:pW,lower:vW,append:gW,insert:mW,remove:wW,clone:LW,datum:kW,on:NW,dispatch:GW};function YW(t){return typeof t==="string"?new VW([[document.querySelector(t)]],[document.documentElement]):new VW([[t]],OW)}function zW(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function FW(t){if(t.length===1)t=XW(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function XW(t){return function(e,i){return zW(t(e),i)}}var BW=FW(zW);var KW=BW.right;function qW(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var jW=Math.sqrt(50),$W=Math.sqrt(10),ZW=Math.sqrt(2);function QW(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=JW(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function JW(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=jW?10:s>=$W?5:s>=ZW?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=jW?10:s>=$W?5:s>=ZW?2:1)}function tP(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=jW)n*=10;else if(s>=$W)n*=5;else if(s>=ZW)n*=2;return e<t?-n:n}function eP(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function iP(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}var rP=new Date,nP=new Date;function sP(t,e,i,r){function n(e){return t(e=arguments.length===0?new Date:new Date(+e)),e}n.floor=function(e){return t(e=new Date(+e)),e};n.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i};n.round=function(t){var e=n(t),i=n.ceil(t);return t-e<i-t?e:i};n.offset=function(t,i){return e(t=new Date(+t),i==null?1:Math.floor(i)),t};n.range=function(i,r,s){var a=[],o;i=n.ceil(i);s=s==null?1:Math.floor(s);if(!(i<r)||!(s>0))return a;do{a.push(o=new Date(+i)),e(i,s),t(i)}while(o<i&&i<r);return a};n.filter=function(i){return sP((function(e){if(e>=e)while(t(e),!i(e))e.setTime(e-1)}),(function(t,r){if(t>=t){if(r<0)while(++r<=0){while(e(t,-1),!i(t)){}}else while(--r>=0){while(e(t,+1),!i(t)){}}}}))};if(i){n.count=function(e,r){rP.setTime(+e),nP.setTime(+r);t(rP),t(nP);return Math.floor(i(rP,nP))};n.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?n:n.filter(r?function(e){return r(e)%t===0}:function(e){return n.count(0,e)%t===0})}}return n}var aP=1e3;var oP=6e4;var lP=36e5;var uP=864e5;var hP=6048e5;var cP=sP((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*aP-t.getMinutes()*oP)}),(function(t,e){t.setTime(+t+e*lP)}),(function(t,e){return(e-t)/lP}),(function(t){return t.getHours()}));var dP=sP((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*oP)/uP}),(function(t){return t.getDate()-1}));function fP(t){return sP((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e*7)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*oP)/hP}))}var pP=fP(0);var yP=fP(1);var vP=fP(2);var gP=fP(3);var bP=fP(4);var mP=fP(5);var AP=fP(6);var wP=sP((function(t){t.setDate(1);t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12}),(function(t){return t.getMonth()}));var xP=sP((function(t){t.setMonth(0,1);t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));xP.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:sP((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t);e.setMonth(0,1);e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)}))};function SP(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var LP="$";function kP(){}kP.prototype=_P.prototype={constructor:kP,has:function(t){return LP+t in this},get:function(t){return this[LP+t]},set:function(t,e){this[LP+t]=e;return this},remove:function(t){var e=LP+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===LP)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===LP)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===LP)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===LP)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===LP)++t;return t},empty:function(){for(var t in this)if(t[0]===LP)return false;return true},each:function(t){for(var e in this)if(e[0]===LP)t(this[e],e.slice(1),this)}};function _P(t,e){var i=new kP;if(t instanceof kP)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function CP(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=_P(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,DP,MP)},map:function(t){return s(t,0,UP,TP)},entries:function(t){return a(s(t,0,UP,TP),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function DP(){return{}}function MP(t,e,i){t[e]=i}function UP(){return _P()}function TP(t,e,i){t.set(e,i)}var EP=Array.prototype;var IP=EP.map;var NP=EP.slice;var HP={name:"implicit"};function WP(){var t=_P(),e=[],i=[],r=HP;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==HP)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=_P();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=NP.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return WP(e,i).unknown(r)};SP.apply(n,arguments);return n}function PP(){var t=WP().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=qW(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return PP(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return SP.apply(h(),arguments)}function GP(t){var e=t.copy;t.padding=t.paddingOuter;delete t.paddingInner;delete t.paddingOuter;t.copy=function(){return GP(e())};return t}function OP(){return GP(PP.apply(null,arguments).paddingInner(1))}function VP(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function RP(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function YP(){}var zP=.7;var FP=1/zP;var XP="\\s*([+-]?\\d+)\\s*",BP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",KP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qP=/^#([0-9a-f]{3,8})$/,jP=new RegExp("^rgb\\("+[XP,XP,XP]+"\\)$"),$P=new RegExp("^rgb\\("+[KP,KP,KP]+"\\)$"),ZP=new RegExp("^rgba\\("+[XP,XP,XP,BP]+"\\)$"),QP=new RegExp("^rgba\\("+[KP,KP,KP,BP]+"\\)$"),JP=new RegExp("^hsl\\("+[BP,KP,KP]+"\\)$"),tG=new RegExp("^hsla\\("+[BP,KP,KP,BP]+"\\)$");var eG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};VP(YP,sG,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:iG,formatHex:iG,formatHsl:rG,formatRgb:nG,toString:nG});function iG(){return this.rgb().formatHex()}function rG(){return yG(this).formatHsl()}function nG(){return this.rgb().formatRgb()}function sG(t){var e,i;t=(t+"").trim().toLowerCase();return(e=qP.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?aG(e):i===3?new hG(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?oG(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?oG(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=jP.exec(t))?new hG(e[1],e[2],e[3],1):(e=$P.exec(t))?new hG(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ZP.exec(t))?oG(e[1],e[2],e[3],e[4]):(e=QP.exec(t))?oG(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=JP.exec(t))?pG(e[1],e[2]/100,e[3]/100,1):(e=tG.exec(t))?pG(e[1],e[2]/100,e[3]/100,e[4]):eG.hasOwnProperty(t)?aG(eG[t]):t==="transparent"?new hG(NaN,NaN,NaN,0):null}function aG(t){return new hG(t>>16&255,t>>8&255,t&255,1)}function oG(t,e,i,r){if(r<=0)t=e=i=NaN;return new hG(t,e,i,r)}function lG(t){if(!(t instanceof YP))t=sG(t);if(!t)return new hG;t=t.rgb();return new hG(t.r,t.g,t.b,t.opacity)}function uG(t,e,i,r){return arguments.length===1?lG(t):new hG(t,e,i,r==null?1:r)}function hG(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}VP(hG,uG,RP(YP,{brighter:function(t){t=t==null?FP:Math.pow(FP,t);return new hG(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?zP:Math.pow(zP,t);return new hG(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:cG,formatHex:cG,formatRgb:dG,toString:dG}));function cG(){return"#"+fG(this.r)+fG(this.g)+fG(this.b)}function dG(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function fG(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function pG(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new gG(t,e,i,r)}function yG(t){if(t instanceof gG)return new gG(t.h,t.s,t.l,t.opacity);if(!(t instanceof YP))t=sG(t);if(!t)return new gG;if(t instanceof gG)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new gG(a,o,l,t.opacity)}function vG(t,e,i,r){return arguments.length===1?yG(t):new gG(t,e,i,r==null?1:r)}function gG(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}VP(gG,vG,RP(YP,{brighter:function(t){t=t==null?FP:Math.pow(FP,t);return new gG(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?zP:Math.pow(zP,t);return new gG(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new hG(bG(t>=240?t-240:t+120,n,r),bG(t,n,r),bG(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function bG(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function mG(t){return function(){return t}}function AG(t,e){return function(i){return t+i*e}}function wG(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function xG(t){return(t=+t)===1?SG:function(e,i){return i-e?wG(e,i,t):mG(isNaN(e)?i:e)}}function SG(t,e){var i=e-t;return i?AG(t,i):mG(isNaN(t)?e:t)}var LG=function t(e){var i=xG(e);function r(t,e){var r=i((t=uG(t)).r,(e=uG(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=SG(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function kG(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function _G(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function CG(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=WG(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function DG(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function MG(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function UG(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=WG(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var TG=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,EG=new RegExp(TG.source,"g");function IG(t){return function(){return t}}function NG(t){return function(e){return t(e)+""}}function HG(t,e){var i=TG.lastIndex=EG.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=TG.exec(t))&&(n=EG.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:MG(r,n)})}i=EG.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?NG(l[0].x):IG(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function WG(t,e){var i=typeof e,r;return e==null||i==="boolean"?mG(e):(i==="number"?MG:i==="string"?(r=sG(e))?(e=r,LG):HG:e instanceof sG?LG:e instanceof Date?DG:_G(e)?kG:Array.isArray(e)?CG:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?UG:MG)(t,e)}function PG(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var GG=180/Math.PI;var OG={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function VG(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*GG,skewX:Math.atan(l)*GG,scaleX:a,scaleY:o}}var RG,YG,zG,FG;function XG(t){if(t==="none")return OG;if(!RG)RG=document.createElement("DIV"),YG=document.documentElement,zG=document.defaultView;RG.style.transform=t;t=zG.getComputedStyle(YG.appendChild(RG),null).getPropertyValue("transform");YG.removeChild(RG);t=t.slice(7,-1).split(",");return VG(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function BG(t){if(t==null)return OG;if(!FG)FG=document.createElementNS("http://www.w3.org/2000/svg","g");FG.setAttribute("transform",t);if(!(t=FG.transform.baseVal.consolidate()))return OG;t=t.matrix;return VG(t.a,t.b,t.c,t.d,t.e,t.f)}function KG(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:MG(t,n)},{i:l-2,x:MG(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:MG(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:MG(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:MG(t,i)},{i:o-2,x:MG(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var qG=KG(XG,"px, ","px)","deg)");var jG=KG(BG,", ",")",")");function $G(t){return function(){return t}}function ZG(t){return+t}var QG=[0,1];function JG(t){return t}function tO(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:$G(isNaN(e)?NaN:.5)}function eO(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function iO(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=tO(n,r),s=i(a,s);else r=tO(r,n),s=i(s,a);return function(t){return s(r(t))}}function rO(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=tO(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=KW(t,e,1,r)-1;return s[i](n[i](e))}}function nO(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function sO(){var t=QG,e=QG,i=WG,r,n,s,a=JG,o,l,u;function h(){o=Math.min(t.length,e.length)>2?rO:iO;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),MG)))(i)))};c.domain=function(e){return arguments.length?(t=IP.call(e,ZG),a===JG||(a=eO(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=NP.call(t),h()):e.slice()};c.rangeRound=function(t){return e=NP.call(t),i=PG,h()};c.clamp=function(e){return arguments.length?(a=e?eO(t):JG,c):a!==JG};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function aO(t,e){return sO()(t,e)}function oO(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function lO(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function uO(t){return t=lO(Math.abs(t)),t?t[1]:NaN}function hO(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function cO(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var dO=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fO(t){if(!(e=dO.exec(t)))throw new Error("invalid format: "+t);var e;return new pO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}fO.prototype=pO.prototype;function pO(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}pO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yO(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var vO;function gO(t,e){var i=lO(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(vO=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+lO(t,Math.max(0,e+s-1))[0]}function bO(t,e){var i=lO(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var mO={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:oO,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return bO(t*100,e)},r:bO,s:gO,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function AO(t){return t}var wO=Array.prototype.map,xO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function SO(t){var e=t.grouping===undefined||t.thousands===undefined?AO:hO(wO.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?AO:cO(wO.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=fO(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!mO[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=mO[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var L=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=yO(t);if(L&&+t===0&&c!=="+")L=false;i=(L?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?xO[8+vO/3]:"")+r+(L&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var k=i.length+t.length+r.length,_=k<p?new Array(p-k+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,k=_.length>>1)+i+t+r+_.slice(k);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=fO(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(uO(e)/3)))*3,n=Math.pow(10,-r),s=xO[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var LO;var kO;var _O;CO({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function CO(t){LO=SO(t);kO=LO.format;_O=LO.formatPrefix;return LO}function DO(t){return Math.max(0,-uO(Math.abs(t)))}function MO(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(uO(e)/3)))*3-uO(Math.abs(t)))}function UO(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,uO(e)-uO(t))+1}function TO(t,e,i,r){var n=tP(t,e,i),s;r=fO(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=MO(n,a)))r.precision=s;return _O(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=UO(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=DO(n)))r.precision=s-(r.type==="%")*2;break}}return kO(r)}function EO(t){var e=t.domain;t.ticks=function(t){var i=e();return QW(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return TO(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=JW(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=JW(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=JW(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function IO(){var t=aO(JG,JG);t.copy=function(){return nO(t,IO())};SP.apply(t,arguments);return EO(t)}var NO=Math.PI,HO=2*NO,WO=1e-6,PO=HO-WO;function GO(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function OO(){return new GO}GO.prototype=OO.prototype={constructor:GO,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(t,e,i,r,n,s){this._+="C"+ +t+","+ +e+","+ +i+","+ +r+","+(this._x1=+n)+","+(this._y1=+s)},arcTo:function(t,e,i,r,n){t=+t,e=+e,i=+i,r=+r,n=+n;var s=this._x1,a=this._y1,o=i-t,l=r-e,u=s-t,h=a-e,c=u*u+h*h;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=e)}else if(!(c>WO));else if(!(Math.abs(h*o-l*u)>WO)||!n){this._+="L"+(this._x1=t)+","+(this._y1=e)}else{var d=i-s,f=r-a,p=o*o+l*l,y=d*d+f*f,v=Math.sqrt(p),g=Math.sqrt(c),b=n*Math.tan((NO-Math.acos((p+c-y)/(2*v*g)))/2),m=b/g,A=b/v;if(Math.abs(m-1)>WO){this._+="L"+(t+m*u)+","+(e+m*h)}this._+="A"+n+","+n+",0,0,"+ +(h*d>u*f)+","+(this._x1=t+A*o)+","+(this._y1=e+A*l)}},arc:function(t,e,i,r,n,s){t=+t,e=+e,i=+i,s=!!s;var a=i*Math.cos(r),o=i*Math.sin(r),l=t+a,u=e+o,h=1^s,c=s?r-n:n-r;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null){this._+="M"+l+","+u}else if(Math.abs(this._x1-l)>WO||Math.abs(this._y1-u)>WO){this._+="L"+l+","+u}if(!i)return;if(c<0)c=c%HO+HO;if(c>PO){this._+="A"+i+","+i+",0,1,"+h+","+(t-a)+","+(e-o)+"A"+i+","+i+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u)}else if(c>WO){this._+="A"+i+","+i+",0,"+ +(c>=NO)+","+h+","+(this._x1=t+i*Math.cos(n))+","+(this._y1=e+i*Math.sin(n))}},rect:function(t,e,i,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};function VO(t){return function e(){return t}}function RO(t){this._context=t}RO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function YO(t){return new RO(t)}function zO(t){return t[0]}function FO(t){return t[1]}function XO(){var t=zO,e=FO,i=VO(true),r=null,n=YO,s=null;function a(a){var o,l=a.length,u,h=false,c;if(r==null)s=n(c=OO());for(o=0;o<=l;++o){if(!(o<l&&i(u=a[o],o,a))===h){if(h=!h)s.lineStart();else s.lineEnd()}if(h)s.point(+t(u,o,a),+e(u,o,a))}if(c)return s=null,c+""||null}a.x=function(e){return arguments.length?(t=typeof e==="function"?e:VO(+e),a):t};a.y=function(t){return arguments.length?(e=typeof t==="function"?t:VO(+t),a):e};a.defined=function(t){return arguments.length?(i=typeof t==="function"?t:VO(!!t),a):i};a.curve=function(t){return arguments.length?(n=t,r!=null&&(s=n(r)),a):n};a.context=function(t){return arguments.length?(t==null?r=s=null:s=n(r=t),a):r};return a}var BO=s.propDefaultValues;var KO=function(){function t(){}return t}();KO.mainTitle="Parallel Plot Title";KO.subTitle="This is the parallel plot's subtitle";KO.height=300;KO.width=500;KO.margin={top:300*.01,bottom:300*.01,right:500*.01,left:500*.01};KO.padding={top:20,bottom:50,right:100,left:75};KO.ordinalAccessor="label";KO.valueAccessor="value";KO.seriesAccessor="series";KO.accessibility=BO.accessibility;KO.animationConfig=BO.animationConfig;KO.highestHeadingLevel=BO.highestHeadingLevel;KO.xAxis=BO.xAxis;KO.yAxis=BO.yAxis;KO.showBaselineX=BO.showBaselineFalse;KO.wrapLabel=BO.wrapLabel;KO.colorPalette=BO.colorPaletteCategorical;KO.hoverStyle=BO.hoverStyle;KO.clickStyle=BO.clickStyle;KO.referenceStyle=BO.referenceStyle;KO.strokeWidth=BO.strokeWidth1;KO.showDots=BO.showDots;KO.dotRadius=BO.dotRadius4;KO.hoverOpacity=BO.hoverOpacity;KO.cursor=BO.cursor;KO.dataLabel=BO.dataLabelBottomRight;KO.seriesLabel=BO.seriesLabel;KO.legend=BO.hiddenLegend;KO.tooltipLabel=BO.tooltipLabel;KO.secondaryLines=BO.secondaryLines;KO.showTooltip=BO.showTooltip;KO.suppressEvents=BO.suppressEvents;KO.referenceLines=BO.referenceLines;KO.annotations=BO.annotations;KO.clickHighlight=BO.clickHighlight;function qO(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function jO(t){return 1-Math.sqrt(1-t*t)}var $O={value:function(){}};function ZO(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new QO(i)}function QO(t){this._=t}function JO(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}QO.prototype=ZO.prototype={constructor:QO,on:function(t,e){var i=this._,r=JO(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=tV(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=eV(i[n],t.name,e);else if(e==null)for(n in i)i[n]=eV(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new QO(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function tV(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function eV(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=$O,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var iV=0,rV=0,nV=0,sV=1e3,aV,oV,lV=0,uV=0,hV=0,cV=typeof performance==="object"&&performance.now?performance:Date,dV=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fV(){return uV||(dV(pV),uV=cV.now()+hV)}function pV(){uV=0}function yV(){this._call=this._time=this._next=null}yV.prototype=vV.prototype={constructor:yV,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?fV():+i)+(e==null?0:+e);if(!this._next&&oV!==this){if(oV)oV._next=this;else aV=this;oV=this}this._call=t;this._time=i;wV()},stop:function(){if(this._call){this._call=null;this._time=Infinity;wV()}}};function vV(t,e,i){var r=new yV;r.restart(t,e,i);return r}function gV(){fV();++iV;var t=aV,e;while(t){if((e=uV-t._time)>=0)t._call.call(null,e);t=t._next}--iV}function bV(){uV=(lV=cV.now())+hV;iV=rV=0;try{gV()}finally{iV=0;AV();uV=0}}function mV(){var t=cV.now(),e=t-lV;if(e>sV)hV-=e,lV=t}function AV(){var t,e=aV,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:aV=i}}oV=t;wV(r)}function wV(t){if(iV)return;if(rV)rV=clearTimeout(rV);var e=t-uV;if(e>24){if(t<Infinity)rV=setTimeout(bV,t-cV.now()-hV);if(nV)nV=clearInterval(nV)}else{if(!nV)lV=cV.now(),nV=setInterval(mV,sV);iV=1,dV(bV)}}function xV(t,e,i){var r=new yV;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var SV=ZO("start","end","interrupt");var LV=[];var kV=0;var _V=1;var CV=2;var DV=3;var MV=4;var UV=5;var TV=6;function EV(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;WV(t,i,{name:e,index:r,group:n,on:SV,tween:LV,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:kV})}function IV(t,e){var i=HV(t,e);if(i.state>kV)throw new Error("too late; already scheduled");return i}function NV(t,e){var i=HV(t,e);if(i.state>CV)throw new Error("too late; already started");return i}function HV(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function WV(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=vV(s,0,i.time);function s(t){i.state=_V;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==_V)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===DV)return xV(a);if(d.state===MV){d.state=TV;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=TV;d.timer.stop();delete r[u]}}xV((function(){if(i.state===DV){i.state=MV;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=CV;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==CV)return;i.state=DV;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=UV,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===UV){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=TV;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function PV(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>CV&&r.state<UV;r.state=TV;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function GV(t){return this.each((function(){PV(this,t)}))}function OV(t,e){var i,r;return function(){var n=NV(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function VV(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=NV(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function RV(t,e){var i=this._id;t+="";if(arguments.length<2){var r=HV(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?OV:VV)(i,t,e))}function YV(t,e,i){var r=t._id;t.each((function(){var t=NV(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return HV(t,r).value[e]}}function zV(t,e){var i;return(typeof e==="number"?MG:e instanceof sG?LG:(i=sG(e))?(e=i,LG):HG)(t,e)}function FV(t){return function(){this.removeAttribute(t)}}function XV(t){return function(){this.removeAttributeNS(t.space,t.local)}}function BV(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function KV(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function qV(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function jV(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function $V(t,e){var i=eH(t),r=i==="transform"?jG:zV;return this.attrTween(t,typeof e==="function"?(i.local?jV:qV)(i,r,YV(this,"attr."+t,e)):e==null?(i.local?XV:FV)(i):(i.local?KV:BV)(i,r,e+""))}function ZV(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function QV(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function JV(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=eH(t);return this.tween(i,(r.local?ZV:QV)(r,e))}function tR(t,e){return function(){IV(this,t).delay=+e.apply(this,arguments)}}function eR(t,e){return e=+e,function(){IV(this,t).delay=e}}function iR(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?tR:eR)(e,t)):HV(this.node(),e).delay}function rR(t,e){return function(){NV(this,t).duration=+e.apply(this,arguments)}}function nR(t,e){return e=+e,function(){NV(this,t).duration=e}}function sR(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?rR:nR)(e,t)):HV(this.node(),e).duration}function aR(t,e){if(typeof e!=="function")throw new Error;return function(){NV(this,t).ease=e}}function oR(t){var e=this._id;return arguments.length?this.each(aR(e,t)):HV(this.node(),e).ease}function lR(t){if(typeof t!=="function")t=cH(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new TR(r,this._parents,this._name,this._id)}function uR(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new TR(a,this._parents,this._name,this._id)}function hR(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function cR(t,e,i){var r,n,s=hR(e)?IV:NV;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function dR(t,e){var i=this._id;return arguments.length<2?HV(this.node(),i).on.on(t):this.each(cR(i,t,e))}function fR(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function pR(){return this.on("end.remove",fR(this._id))}function yR(t){var e=this._name,i=this._id;if(typeof t!=="function")t=aH(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;EV(u[d],e,i,d,u,HV(h,i))}}}return new TR(s,this._parents,e,i)}function vR(t){var e=this._name,i=this._id;if(typeof t!=="function")t=uH(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=HV(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){EV(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new TR(s,a,e,i)}var gR=RW.prototype.constructor;function bR(){return new gR(this._groups,this._parents)}function mR(t,e){var i,r,n;return function(){var s=XH(this,t),a=(this.style.removeProperty(t),XH(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function AR(t){return function(){this.style.removeProperty(t)}}function wR(t,e,i){var r,n;return function(){var s=XH(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function xR(t,e,i){var r,n,s;return function(){var a=XH(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),XH(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function SR(t,e,i){var r=(t+="")==="transform"?qG:zV;return e==null?this.styleTween(t,mR(t,r)).on("end.style."+t,AR(t)):this.styleTween(t,typeof e==="function"?xR(t,r,YV(this,"style."+t,e)):wR(t,r,e+""),i)}function LR(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function kR(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,LR(t,e,i==null?"":i))}function _R(t){return function(){this.textContent=t}}function CR(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function DR(t){return this.tween("text",typeof t==="function"?CR(YV(this,"text",t)):_R(t==null?"":t+""))}function MR(){var t=this._name,e=this._id,i=IR();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=HV(l,e);EV(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new TR(r,this._parents,t,i)}var UR=0;function TR(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function ER(t){return RW().transition(t)}function IR(){return++UR}var NR=RW.prototype;TR.prototype=ER.prototype={constructor:TR,select:yR,selectAll:vR,filter:lR,merge:uR,selection:bR,transition:MR,call:NR.call,nodes:NR.nodes,node:NR.node,size:NR.size,empty:NR.empty,each:NR.each,on:dR,attr:$V,attrTween:JV,style:SR,styleTween:kR,text:DR,remove:pR,tween:RV,delay:iR,duration:sR,ease:oR};var HR={time:null,delay:0,duration:250,ease:qO};function WR(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return HR.time=fV(),HR}}return i}function PR(t){var e,i;if(t instanceof TR){e=t._id,t=t._name}else{e=IR(),(i=HR).time=fV(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){EV(l,t,e,u,a,i||WR(l,e))}}}return new TR(r,this._parents,t,e)}RW.prototype.interrupt=GV;RW.prototype.transition=PR;var GR=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var OR=new Uint8Array(16);function VR(){if(!GR){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return GR(OR)}var RR=[];for(var YR=0;YR<256;++YR){RR[YR]=(YR+256).toString(16).substr(1)}function zR(t,e){var i=e||0;var r=RR;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function FR(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||VR)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||zR(n)}var XR=s.getAccessibleStrokes,BR=s.ensureTextContrast,KR=s.createTextStrokeFilter,qR=s.findTagLevel,jR=s.prepareRenderChange,$R=s.initializeDescriptionRoot,ZR=s.initializeElementAccess,QR=s.setElementFocusHandler,JR=s.setElementAccessID,tY=s.setAccessibilityController,eY=s.hideNonessentialGroups,iY=s.setAccessTitle,rY=s.setAccessSubtitle,nY=s.setAccessLongDescription,sY=s.setAccessExecutiveSummary,aY=s.setAccessPurpose,oY=s.setAccessContext,lY=s.setAccessStatistics,uY=s.setAccessChartCounts,hY=s.setAccessXAxis,cY=s.setAccessYAxis,dY=s.setAccessStructure,fY=s.setAccessAnnotation,pY=s.retainAccessFocus,yY=s.checkAccessFocus,vY=s.setElementInteractionAccessState,gY=s.setAccessibilityDescriptionWidth,bY=s.annotate,mY=s.chartAccessors,AY=s.checkInteraction,wY=s.checkClicked,xY=s.checkHovered,SY=s.convertVisaColor,LY=s.drawAxis,kY=s.drawGrid,_Y=s.drawLegend,CY=s.setLegendInteractionState,DY=s.drawTooltip,MY=s.formatDataLabel,UY=s.getColors,TY=s.getLicenses,EY=s.getPadding,IY=s.getScopedData,NY=s.initTooltipStyle,HY=s.overrideTitleTooltip,WY=s.placeDataLabels,PY=s.resolveLines,GY=s.scopeDataKeys,OY=s.transitionEndAll,VY=s.visaColors,RY=s.validateAccessibilityProps,YY=s.roundTo,zY=s.getTextWidth,FY=s.resolveLabelCollision;var XY=t("parallel_plot",function(){function t(t){var r=this;e(this,t);this.mainTitle=KO.mainTitle;this.subTitle=KO.subTitle;this.height=KO.height;this.width=KO.width;this.highestHeadingLevel=KO.highestHeadingLevel;this.margin=KO.margin;this.padding=KO.padding;this.ordinalAccessor=KO.ordinalAccessor;this.valueAccessor=KO.valueAccessor;this.seriesAccessor=KO.seriesAccessor;this.xAxis=KO.xAxis;this.yAxis=KO.yAxis;this.wrapLabel=KO.wrapLabel;this.showBaselineX=KO.showBaselineX;this.colorPalette=KO.colorPalette;this.hoverStyle=KO.hoverStyle;this.clickStyle=KO.clickStyle;this.referenceStyle=KO.referenceStyle;this.cursor=KO.cursor;this.hoverOpacity=KO.hoverOpacity;this.animationConfig=KO.animationConfig;this.strokeWidth=KO.strokeWidth;this.showDots=KO.showDots;this.dotRadius=KO.dotRadius;this.dataLabel=KO.dataLabel;this.showTooltip=KO.showTooltip;this.tooltipLabel=KO.tooltipLabel;this.accessibility=KO.accessibility;this.legend=KO.legend;this.annotations=KO.annotations;this.seriesLabel=KO.seriesLabel;this.referenceLines=KO.referenceLines;this.secondaryLines=KO.secondaryLines;this.suppressEvents=KO.suppressEvents;this.clickHighlight=KO.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.updated=true;this.enterSize=0;this.exitSize=0;this.time={timehour:cP,timeday:dP,timeweek:pP,timemonth:wP,timeyear:xP};this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateScales=false;this.shouldUpdateTableData=false;this.shouldUpdateLabels=false;this.shouldUpdateAnnotations=false;this.shouldDrawInteractionState=false;this.shouldSetSelectionClass=false;this.shouldUpdateCursor=false;this.shouldSetColors=false;this.shouldUpdateLines=false;this.shouldUpdatePoints=false;this.shouldUpdateLegend=false;this.shouldUpdateReferenceLines=false;this.shouldBindInteractivity=false;this.shouldUpdateLegendInteractivity=false;this.shouldResetRoot=false;this.shouldUpdateBaseline=false;this.shouldValidateInteractionKeys=false;this.shouldEnterUpdateExit=false;this.shouldSetGlobalSelections=false;this.shouldSetTestingAttributes=false;this.shouldSetLabelOpacity=false;this.shouldSetSeriesLabelOpacity=false;this.shouldSetLegendCursor=false;this.shouldAddStrokeUnder=false;this.shouldValidateSeriesLabels=false;this.shouldUpdateSeriesLabels=false;this.shouldUpdateColors=false;this.shouldUpdateStrokeWidth=false;this.shouldUpdateInterpolationData=false;this.shouldSetScaleUsed=false;this.shouldUpdateDotRadius=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldUpdateDashPatterns=false;this.shouldValidateDataLabelAccessor=false;this.topLevel="h2";this.bottomLevel="p";this.strokes={};this.b=",";this.short="2,2";this.med="4,2";this.long="8,2";this.dashPatterns=["",this.long,this.long+this.b+this.med,this.short+this.b+this.long+this.b+this.long,this.short+this.b+this.short+this.b+this.long];this.hiddenHash={};this.collisionSettings={all:{validPositions:["top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:[3,2,4,4,1,1,1,1]},top:{validPositions:["top","top-left","top-right"],offsets:[3,1,1]},middle:{validPositions:["left","right"],offsets:[4,4]},bottom:{validPositions:["bottom","bottom-left","bottom-right"],offsets:[2,1,1]},right:{validPositions:["right","top-right","bottom-right"],offsets:[4,1,1]},left:{validPositions:["left","top-left","bottom-left"],offsets:[4,1,1]}};this.dynamicY=function(t){if(r.yAxis.scales==="individual"){return r.multiYScale[t[r.ordinalAccessor]].y(t[r.valueAccessor])}return r.y(t[r.valueAccessor])};this.interpolateDynamicY=function(t){if(r.yAxis.scales==="individual"){return r.interpolating.multiYScale[t[r.ordinalAccessor]].y(t[r.valueAccessor])}return r.interpolating.y(t[r.valueAccessor])};this.handleDotStroke=function(t,e,i){if(!r.accessibility.hideStrokes){var n=r.clickHighlight&&r.clickHighlight.length>0&&wY(t,r.clickHighlight,r.innerInteractionKeys);var s=r.hoverHighlight&&xY(t,r.hoverHighlight,r.innerInteractionKeys);var a=YW(i[e].parentNode).attr("fill");var o=n&&r.clickStyle.color?VY[r.clickStyle.color]||r.clickStyle.color:n?a:s&&r.hoverStyle.color?VY[r.hoverStyle.color]||r.hoverStyle.color:a;YW(i[e]).attr("stroke-width",r.calculateStrokeWidth(t));YW(i[e]).attr("fill",o);return r.strokes[o.toLowerCase()]}return null};this.handleLineStroke=function(t,e){var i=r.colorArr[e]||r.colorArr[0];var n=t.values[0];var s=wY(n,r.clickHighlight,r.innerInteractionKeys);var a=xY(n,r.hoverHighlight,r.innerInteractionKeys);return r.seriesInteraction?s&&r.clickStyle.color?r.strokes[(VY[r.clickStyle.color]||r.clickStyle.color).toLowerCase()]:s?i:a&&r.hoverStyle.color?r.strokes[(VY[r.hoverStyle.color]||r.hoverStyle.color).toLowerCase()]:i:i};this.handleSeriesTextFill=function(t,e){var i=r.rawColors[e]||r.rawColors[0];var n=t.values[0];var s=wY(n,r.clickHighlight,r.innerInteractionKeys);var a=xY(n,r.hoverHighlight,r.innerInteractionKeys);var o=r.seriesInteraction?s&&r.clickStyle.color?VY[r.clickStyle.color]||r.clickStyle.color:s?i:a&&r.hoverStyle.color?VY[r.hoverStyle.color]||r.hoverStyle.color:i:i;return r.textColors[o.toLowerCase()]};this.handleTextFill=function(t,e,i){var n=r.clickHighlight&&r.clickHighlight.length>0&&wY(t,r.clickHighlight,r.innerInteractionKeys);var s=r.hoverHighlight&&xY(t,r.hoverHighlight,r.innerInteractionKeys);var a=YW(i[e].parentNode).attr("fill");var o=n&&r.clickStyle.color?VY[r.clickStyle.color]||r.clickStyle.color:n?a:s&&r.hoverStyle.color?VY[r.hoverStyle.color]||r.hoverStyle.color:a;return r.textColors[o.toLowerCase()]};this.calculateStrokeWidth=function(t,e){var i=!e?t:t.values[0];return!e||r.seriesInteraction?wY(i,r.clickHighlight,r.innerInteractionKeys)?r.clickStyle.strokeWidth||r.strokeWidth:xY(i,r.hoverHighlight,r.innerInteractionKeys)?r.hoverStyle.strokeWidth||r.strokeWidth:!r.secondaryLines.keys.includes(i[r.seriesAccessor])?r.strokeWidth:1:!r.secondaryLines.keys.includes(i[r.seriesAccessor])?r.strokeWidth:1};this.handleStrokeDasharray=function(t,e){return r.secondaryLines.keys.includes(t.key)?r.short:!r.accessibility.hideTextures?r.dashPatterns[e]:""};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldUpdateDotRadius=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldValidate=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true};t.prototype.idWatcher=function(t,e){this.chartID=t;this.parallelChartEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldUpdateLegend=true;this.shouldAddStrokeUnder=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldResetRoot=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.seriesAccessorWatcher=function(t,e){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldValidate=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateTableData=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldUpdateLabels=true;this.shouldBindInteractivity=true;this.shouldUpdateCursor=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldUpdateTableData=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetGeometryAriaLabels=true;this.shouldUpdateStrokeWidth=true};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldSetGlobalSelections=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGlobalSelections=true};t.prototype.xAxisWatcher=function(t,e){this.shouldUpdateXAxis=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateXGrid=true}this.shouldSetXAxisAccessibility=true};t.prototype.yAxisWatcher=function(t,e){var i=t&&t.scales?t.scales:false;var r=e&&e.scales?e.scales:false;if(i!==r){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true}this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;var n=t&&t.gridVisible;var s=e&&e.gridVisible;var a=t&&t.tickInterval?t.tickInterval:0;var o=e&&e.tickInterval?e.tickInterval:0;if(n!==s||a!==o){this.shouldUpdateYGrid=true}};t.prototype.wrapLabelWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.showBaselineXWatcher=function(t,e){this.shouldUpdateBaseline=true};t.prototype.paletteWatcher=function(t,e){this.shouldSetColors=true;this.shouldUpdateColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldUpdateColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldSetColors=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldSetColors=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true};t.prototype.strokeWidthWatcher=function(t,e){this.shouldUpdateStrokeWidth=true};t.prototype.showDotsWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.dotRadiusWatcher=function(t,e){this.shouldUpdateDotRadius=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true};t.prototype.dataLabelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;var a=t&&t.labelAccessor?t.labelAccessor:false;var o=e&&e.labelAccessor?e.labelAccessor:false;if(i!==r){this.shouldSetLabelOpacity=true}if(n!==s){this.shouldUpdateSeriesLabels=true}if(a!==o){this.shouldValidateDataLabelAccessor=true}};t.prototype.seriesLabelWatcher=function(t,e){this.shouldUpdateSeriesLabels=true;this.shouldUpdateTableData=true;this.shouldValidateSeriesLabels=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetSeriesLabelOpacity=true}};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.showTooltipWatcher=function(t,e){};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.showSmallLabels?t.showSmallLabels:false;var w=e&&e.showSmallLabels?e.showSmallLabels:false;if(A!==w){this.shouldSetLabelOpacity=true}var x=t&&t.hideStrokes?t.hideStrokes:false;var S=e&&e.hideStrokes?e.hideStrokes:false;if(x!==S){this.shouldUpdateStrokeWidth=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true}var L=t&&t.hideTextures?t.hideTextures:false;var k=e&&e.hideTextures?e.hideTextures:false;if(L!==k){this.shouldUpdateDashPatterns=true;this.shouldUpdateLegend=true}var _=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var C=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var D=t&&t.elementsAreInterface?t.elementsAreInterface:false;var M=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(_!==C||D!==M){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(D!==M){this.shouldSetSelectionClass=true}};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.secondaryLinesWatcher=function(t,e){var i=t&&t.showDataLabel;var r=e&&e.showDataLabel;var n=t&&t.showSeriesLabel;var s=e&&e.showSeriesLabel;var a=t&&t.keys?t.keys:false;var o=e&&e.keys?e.keys:false;var l=t&&t.opacity?t.opacity:0;var u=e&&e.opacity?e.opacity:0;if(a!==o){this.shouldUpdateLines=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true}if(i!==r){this.shouldSetLabelOpacity=true}if(n!==s){this.shouldUpdateLabels=true}if(l!==u){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true}};t.prototype.clickWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true};t.prototype.hoverWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldBindInteractivity=true;this.shouldUpdateCursor=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"parallel-plot-"+FR();t.parallelChartEl.id=t.chartID;t.setTagLevels();t.setDimensions();t.setScaleUsed();t.prepareScales();t.prepareData();t.updateInterpolationData();t.validateInteractionKeys();t.validateSeriesLabels();t.validateDataLabelAccessor();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.renderChartRootElemets();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.drawXGrid();t.drawYGrid();t.setGlobalSelections();t.setTestingAttributes();t.drawXAxis();t.setXAxisAccessibility();t.enterYAxis();t.exitYAxis();t.drawYAxis();t.setYAxisAccessibility();t.enterChartLines();t.updateChartLines();t.exitChartLines();t.enterPoints();t.updatePoints();t.exitPoints();t.drawChartLines();t.drawPoints();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawLegendElements();t.drawDataLabels();t.drawSeriesLabels();t.addStrokeUnder();t.drawReferenceLines();t.setSelectedClass();t.updateCursor();t.bindInteractivity();t.setLegendCursor();t.bindLegendInteractivity();t.drawBaseline();t.drawAnnotations();t.setAnnotationAccessibility();eY(t.root.node(),t.dotG.node());t.setGroupAccessibilityID();t.onChangeHandler();t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldEnterUpdateExit){t.enterYAxis();t.exitYAxis();t.enterChartLines();t.updateChartLines();t.exitChartLines();t.enterPoints();t.updatePoints();t.exitPoints();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateLines){t.drawChartLines();t.shouldUpdateLines=false}if(t.shouldUpdatePoints){t.drawPoints();t.shouldUpdatePoints=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateColors){t.updateColors();t.shouldUpdateColors=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldUpdateSeriesLabels){t.drawSeriesLabels();t.shouldUpdateSeriesLabels=false}if(t.addStrokeUnder){t.addStrokeUnder();t.shouldAddStrokeUnder=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldUpdateStrokeWidth){t.updateStrokeWidth();t.shouldUpdateStrokeWidth=false}if(t.shouldUpdateDotRadius){t.updateDotRadius();t.shouldUpdateDotRadius=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldUpdateDashPatterns){t.updateStrokePattern();t.shouldUpdateDashPatterns=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldSetSeriesLabelOpacity){t.setSeriesLabelOpacity();t.shouldSetSeriesLabelOpacity=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateLegendInteractivity){t.bindLegendInteractivity();t.shouldUpdateLegendInteractivity=false}if(t.shouldSetLegendCursor){t.setLegendCursor();t.shouldSetLegendCursor=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateBaseline){t.drawBaseline();t.shouldUpdateBaseline=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;RY(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?EY(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.seriesAccessor];this.seriesInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.seriesAccessor};t.prototype.setColors=function(){var t=this;this.rawColors=this.colors?SY(this.colors):UY(this.colorPalette,this.nest.length);this.textColors={};var e=this.rawColors;this.strokes={};if(!this.accessibility.hideStrokes){e=[]}this.rawColors.forEach((function(i){if(!t.accessibility.hideStrokes){var r=XR(i);var n=r.length===2?r[1]:r[0];t.strokes[i.toLowerCase()]=n;e.push(n)}t.textColors[i.toLowerCase()]=BR(i,"#ffffff",4.5)}));if(this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){var i=XR(this.hoverStyle.color);var r=i.length===2?i[1]:i[0];this.strokes[this.hoverStyle.color.toLowerCase()]=r}this.textColors[this.hoverStyle.color.toLowerCase()]=BR(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){var i=XR(this.clickStyle.color);var r=i.length===2?i[1]:i[0];this.strokes[this.clickStyle.color.toLowerCase()]=r}this.textColors[this.clickStyle.color.toLowerCase()]=BR(this.clickStyle.color,"#ffffff",4.5)}this.colorArr=e};t.prototype.setTableData=function(){var t=GY(this,mY,"parallel-plot");this.tableData=IY(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareData=function(){var t=this;this.multiYScale={};this.data.map((function(e){var i=t.hiddenHash[e[t.ordinalAccessor]+"-"+(e[t.seriesAccessor]||"b")];if(i&&(t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly)&&!e["enter"]&&!e["exit"]){e["hidden"]=i["data-label-hidden"];e["auto-x"]=i.x;e["auto-y"]=i.y;e["auto-text-anchor"]=i["text-anchor"]}}));this.nest=CP().key((function(e){if(!t.multiYScale[e[t.ordinalAccessor]]){t.multiYScale[e[t.ordinalAccessor]]={min:Infinity,max:0}}if(t.multiYScale[e[t.ordinalAccessor]].min>e[t.valueAccessor]){t.multiYScale[e[t.ordinalAccessor]].min=e[t.valueAccessor]}if(t.multiYScale[e[t.ordinalAccessor]].max<e[t.valueAccessor]){t.multiYScale[e[t.ordinalAccessor]].max=e[t.valueAccessor]}return e[t.seriesAccessor]})).entries(this.data);this.map=CP().key((function(e){return e[t.seriesAccessor]})).map(this.data);var e=Object.keys(this.multiYScale);e.forEach((function(e){var i=t.multiYScale[e];var r=t.innerPaddedHeight*.05;i.y=IO().domain([t.minValueOverride||t.minValueOverride===0?t.minValueOverride:i.min,t.maxValueOverride||t.maxValueOverride===0?t.maxValueOverride:i.max]).range([t.innerPaddedHeight-r,0+r]);i.ticks=[i.y.invert(t.innerPaddedHeight),i.y.invert(0)]}))};t.prototype.updateInterpolationData=function(){var t=this;if(this.interpolating){var e=this.nest.length;this.nest.forEach((function(i){i.interpolate={};var r=t.interpolating.map.get(i.key);var n=i.values;if(!r){i.interpolate.start=n;i.interpolate.end=n}else{var s=PY(r,n,t.ordinalAccessor);if(!s.length){i.interpolate.start=r;i.interpolate.end=n;e--}else{i.interpolate.start=s[0];i.interpolate.end=s[1]}}}));if(!e&&this.nest.length===this.interpolating.length){this.interpolating=false}}};t.prototype.prepareScales=function(){var t=this;if(this.nest){this.interpolating=this.nest;var e=this.x.domain();var i=this.x.range();var r=this.y.domain();var n=this.y.range();this.interpolating.scales=this.scalesUsed;this.interpolating.multiYScale=Object.assign({},this.multiYScale);this.interpolating.x=this.x.domain(e).range(i);this.interpolating.y=IO().domain(r).range(n);this.interpolating.line=XO().x((function(e){return t.interpolating.x(e[t.ordinalAccessor])})).y((function(e){if(t.interpolating.scales==="individual"){return t.interpolating.multiYScale[e[t.ordinalAccessor]].y(e[t.valueAccessor])}return t.interpolating.y(e[t.valueAccessor])}));this.interpolating.map=this.map}this.extent={};this.extent.minValue=iP(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));this.extent.maxValue=eP(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));var s=0+this.innerPaddedHeight*.05;var a=this.innerPaddedHeight-this.innerPaddedHeight*.05;if(this.yAxis.scales==="preNormalized"){this.extent.minValue=0;this.extent.maxValue=1;s=0;a=this.innerPaddedHeight}this.extent.minValue=this.minValueOverride||this.minValueOverride===0?this.minValueOverride:this.extent.minValue;this.extent.maxValue=this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:this.extent.maxValue;s=this.minValueOverride||this.minValueOverride===0?this.minValueOverride:s;a=this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:a;this.y=IO().domain([this.extent.minValue,this.extent.maxValue]).range([a,s]);this.x=OP().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([0,this.innerPaddedWidth]);this.line=XO().x((function(e){return t.x(e[t.ordinalAccessor])})).y((function(e){if(t.yAxis.scales==="individual"){return t.multiYScale[e[t.ordinalAccessor]].y(e[t.valueAccessor])}return t.y(e[t.valueAccessor])}))};t.prototype.validateDataLabelAccessor=function(){this.innerLabelAccessor=this.dataLabel&&this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor};t.prototype.validateSeriesLabels=function(){this.labelDetails=Object.assign({},this.seriesLabel);if(!this.labelDetails.placement){this.labelDetails.placement=""}if(!this.labelDetails.label||!this.labelDetails.label.length){this.labelDetails.label=""}this.isRight=this.labelDetails.placement!=="left"};t.prototype.setScaleUsed=function(){this.scalesUsed=this.yAxis.scales};t.prototype.renderRootElements=function(){this.svg=YW(this.parallelChartEl).select(".visa-viz-d3-parallel-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","grid-group");this.references=this.rootG.append("g").attr("class","parallel-reference-line-group")};t.prototype.renderChartRootElemets=function(){this.yGroup=this.rootG.append("g").attr("class","y-scales-group");this.parallelLineG=this.rootG.append("g").attr("class","parallel-group parallel-line-group");this.dotG=this.rootG.append("g").attr("class","parallel-group");this.seriesLabelG=this.rootG.append("g").attr("class","parallel-series-wrapper");this.labels=this.rootG.append("g").attr("class","parallel-dataLabel-group");this.legendG=YW(this.parallelChartEl).select(".parallel-legend").append("svg");this.tooltipG=YW(this.parallelChartEl).select(".parallel-tooltip");this.setTooltipInitialStyle()};t.prototype.reSetRoot=function(){var t=jR({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:jO});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=jR({selection:this.root,duration:this.duration,namespace:"root_reset",easing:jO});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=jR({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:jO});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");gY(this.chartID,this.width)};t.prototype.setGlobalSelections=function(){var t=this;var e=Object.keys(this.multiYScale);var i=this.yGroup.selectAll(".y-wrapper").data(e,(function(t){return t}));this.yEnter=i.enter().append("g");this.yExit=i.exit();this.yUpdate=i.merge(this.yEnter);var r=this.parallelLineG.selectAll(".parallel-plot").data(this.nest,(function(t){return t.key}));this.enterLines=r.enter().append("path");this.exitLines=r.exit();this.updateLines=r.merge(this.enterLines);this.enterSize=this.enterLines.size();var n=this.dotG.selectAll(".parallel-dot-wrapper").data(this.nest,(function(t){return t.key}));this.enterDotWrappers=n.enter().append("g");this.exitDotWrappers=n.exit();this.updateDotWrappers=n.merge(this.enterDotWrappers);var s=this.seriesLabelG.selectAll(".parallel-series-label").data(this.nest,(function(t){return t.key}));this.seriesLabelEnter=s.enter().append("text");this.seriesLabelExit=s.exit();this.seriesLabelUpdate=s.merge(this.seriesLabelEnter);var a=this.labels.selectAll("g").data(this.nest,(function(t){return t.key}));this.enteringLabelGroups=a.enter().append("g");this.exitingLabelGroups=a.exit();this.updatingLabelGroups=a.merge(this.enteringLabelGroups);if(this.interpolating){this.updateDotWrappers.selectAll("circle").remove();var o=this.updateDotWrappers.selectAll("circle").data((function(t){return t.interpolate.start}));this.enterDots=o.enter().append("circle");this.exitDots=o.exit();this.updateDots=o.merge(this.enterDots);this.updatingLabelGroups.selectAll(".parallel-dataLabel").remove();var l=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((function(t){return t.interpolate.start}));this.enteringLabels=l.enter().append("text");this.updatingLabels=l.merge(this.enteringLabels)}else{var o=this.updateDotWrappers.selectAll("circle").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enterDots=o.enter().append("circle");this.exitDots=o.exit();this.updateDots=o.merge(this.enterDots);this.enterSize=this.enterDots.size();this.exitSize=this.exitDots.size();var l=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enteringLabels=l.enter().append("text");this.exitingLabels=l.exit();this.updatingLabels=l.merge(this.enteringLabels)}};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){YW(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid","chart-container");YW(this.parallelChartEl).select(".parallel-main-title").attr("data-testid","main-title");YW(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.gridG.attr("data-testid","grid-group");this.references.attr("data-testid","reference-line-group");this.yGroup.attr("data-testid","y-scales-group");this.yUpdate.attr("data-testid","y-scale-wrapper");this.parallelLineG.attr("data-testid","parallel-line-group");this.updateLines.attr("data-testid","parallel-line").attr("data-id",(function(t){return"parallel-line-"+t.key}));this.seriesLabelG.attr("data-testid","parallel-series-label-container");this.seriesLabelUpdate.attr("data-testid","parallel-series-label").attr("data-id",(function(t){return"parallel-series-label-"+t.key}));this.dotG.attr("data-testid","marker-group");this.updateDotWrappers.attr("data-testid","marker-series-group").attr("data-id",(function(t){return"marker-series-"+t.key}));this.updateDots.attr("data-testid","marker").attr("data-id",(function(e){return"marker-"+e[t.seriesAccessor]+"-"+e[t.ordinalAccessor]}));this.labels.attr("data-testid","dataLabel-group-container");this.updatingLabelGroups.attr("data-testid","dataLabel-group").attr("data-id",(function(t){return"dataLabel-group-"+t.key}));this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",(function(e){return"dataLabel-"+e[t.seriesAccessor]+"-"+e[t.ordinalAccessor]}));this.svg.select("defs").attr("data-testid","pattern-defs")}else{YW(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid",null);YW(this.parallelChartEl).select(".parallel-main-title").attr("data-testid",null);YW(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.gridG.attr("data-testid",null);this.references.attr("data-testid",null);this.yGroup.attr("data-testid",null);this.yUpdate.attr("data-testid",null);this.parallelLineG.attr("data-testid",null);this.updateLines.attr("data-testid",null).attr("data-id",null);this.seriesLabelG.attr("data-testid",null);this.seriesLabelUpdate.attr("data-testid",null).attr("data-id",null);this.dotG.attr("data-testid",null);this.updateDotWrappers.attr("data-testid",null).attr("data-id",null);this.updateDots.attr("data-testid",null).attr("data-id",null);this.labels.attr("data-testid",null);this.updatingLabelGroups.attr("data-testid",null).attr("data-id",null);this.updatingLabels.attr("data-testid",null).attr("data-id",null);this.svg.select("defs").attr("data-testid",null)}};t.prototype.drawXAxis=function(){var t=this.innerPaddedWidth/this.nest[0].values.length*.7;LY({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel?t:"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration,hidePath:true})};t.prototype.enterYAxis=function(){var t=this;this.yEnter.attr("class","y-wrapper").attr("transform",(function(e){return"translate("+t.x(e)+",0)"})).attr("opacity",0)};t.prototype.exitYAxis=function(){this.yExit.transition("exit").duration(this.duration).ease(jO).attr("opacity",0).remove()};t.prototype.drawYAxis=function(){var t=this;this.yUpdate.each((function(e,i,r){var n=t.yAxis.scales==="individual"?t.multiYScale[e].ticks:!t.yAxis.onlyTickExtents?t.yAxis.onlyTickExtents:[t.extent.minValue,t.extent.maxValue];var s=t.multiYScale[e].y.domain();var a=s[0]===s[1]?true:i===0||t.yAxis.scales==="individual"?!t.yAxis.visible:true;LY({root:YW(r[i]),height:t.innerPaddedHeight,width:t.innerPaddedWidth,axisScale:t.yAxis.scales==="individual"?t.multiYScale[e].y:t.y,left:true,wrapLabel:t.wrapLabel?t.padding.left:"",format:t.yAxis.format,tickInterval:n?1:t.yAxis.tickInterval,label:t.yAxis.scales==="individual"||a?"":t.yAxis.label,padding:t.padding,hide:a,hidePath:true,duration:t.duration,ticks:n})})).transition("update").duration(this.duration).ease(jO).attr("transform",(function(e){return"translate("+t.x(e)+",0)"})).attr("opacity",1)};t.prototype.setXAxisAccessibility=function(){hY({rootEle:this.parallelChartEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x?this.x:false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){cY({rootEle:this.parallelChartEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y?this.y:false,yAxisLabel:this.yAxis.label?this.yAxis.label:"",xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.drawBaseline=function(){LY({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0),hide:!this.showBaselineX,duration:this.duration})};t.prototype.drawXGrid=function(){kY(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,false,this.xAxis.tickInterval,this.duration)};t.prototype.drawYGrid=function(){kY(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)};t.prototype.enterChartLines=function(){var t=this;this.enterLines.interrupt();this.enterLines.attr("class","parallel-plot entering").attr("d",(function(e){return t.line(e.values)})).attr("data-d",(function(e){return t.line(e.values)})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top);this.enterLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("stroke-dasharray",(function(t,e,i){t.linelength=i[e].getTotalLength();return t.linelength+" "+t.linelength})).attr("stroke",this.handleLineStroke).attr("fill","none").attr("stroke-width",.1)};t.prototype.updateChartLines=function(){var t=this;this.updateLines.interrupt();this.updateLines.transition().duration(this.duration).ease(jO).attr("stroke-dashoffset",0).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e,true)})).call(OY,(function(){t.updateLines.attr("stroke-dasharray",t.handleStrokeDasharray)}));this.updateLines.transition("opacity").ease(jO).duration(this.duration).attr("opacity",(function(e){var i=t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1;if(!t.seriesInteraction){return i}else if(t.secondaryLines.keys.includes(e.key)){return AY(e.values[0],t.secondaryLines.opacity,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}else{return AY(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}}))};t.prototype.exitChartLines=function(){this.exitLines.interrupt();this.exitLines.attr("stroke-dasharray",(function(t,e,i){t.linelength=i[e].getTotalLength();return t.linelength+" "+t.linelength})).transition("exit").ease(jO).duration(this.duration).attr("opacity",0).attr("stroke-dashoffset",(function(t){return t.linelength})).attr("stroke-width",.1).remove()};t.prototype.drawChartLines=function(){var t=this;if(this.interpolating){this.updateLines.attr("d",(function(e,i,r){if(YW(r[i]).classed("entering")){return t.line(e.values)}return t.interpolating.line(e.interpolate.start)}))}this.updateLines.attr("stroke-width",(function(e){return t.calculateStrokeWidth(e,true)})).attr("stroke-dashoffset",(function(t){return t.linelength})).attr("data-d",(function(e){return t.interpolating?t.line(e.interpolate.end):t.line(e.values)})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(jO).duration(this.duration).attr("d",(function(e){return t.interpolating?t.line(e.interpolate.end):t.line(e.values)})).call(OY,(function(){t.updateLines.classed("entering",false).attr("data-d",(function(e){return t.line(e.values)})).attr("d",(function(e){return t.line(e.values)})).attr("stroke-dasharray",t.handleStrokeDasharray)}))};t.prototype.enterPoints=function(){var t=this;this.enterDots.interrupt();this.enterDotWrappers.attr("class","parallel-dot-wrapper").attr("opacity",0).attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]})).each((function(t,e,i){ZR(i[e])}));this.enterDots.each((function(t,e,i){ZR(i[e])})).attr("stroke",this.handleDotStroke).attr("cursor",!this.suppressEvents?this.cursor:null).attr("data-fill",true).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);if(this.interpolating){this.enterDots.attr("cx",(function(e){return t.interpolating.x(e[t.ordinalAccessor])})).attr("cy",this.interpolateDynamicY).attr("r",(function(e){return e.enter?0:wY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):xY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e)}));this.enterDotWrappers.selectAll("circle").attr("r",0).attr("cx",(function(e){return t.x(e[t.ordinalAccessor])})).attr("cy",this.dynamicY).attr("opacity",0)}this.updateDotWrappers.order();this.updateDots.order()};t.prototype.updatePoints=function(){var t=this;this.updateDots.interrupt();var e=this.showDots?1:0;this.updateDots.attr("tabindex",(function(t,e){return e===0?"0":"-1"}));this.updateDotWrappers.attr("opacity",(function(i){var r=t.secondaryLines.keys.includes(i.key)?t.secondaryLines.opacity:e;return r}));if(this.interpolating){this.updateDots.attr("opacity",(function(e){t.exitSize+=e.exit?1:0;t.enterSize+=e.enter?1:0;return e.enter?0:1}));this.updateDots=this.updateDotWrappers.selectAll("circle").data((function(t){return t.interpolate.end})).classed("exiting",(function(t){return t.exit}));this.enterDotWrappers.selectAll("circle").each((function(t){t.enterWholeGroup=true}));this.updateDots.transition("opacity").ease(jO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0})).attr("opacity",(function(i){return AY(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}else{this.updateDots.transition("opacity").ease(jO).duration(this.duration).attr("opacity",(function(i){return AY(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}};t.prototype.exitPoints=function(){var t=this;this.exitDots.interrupt();this.exitDots.transition("exit").ease(jO).duration(this.duration).attr("opacity",0).attr("r",0);this.exitDotWrappers.selectAll("circle").each((function(t){t.exitWholeGroup=true})).transition("exit").ease(jO).duration(this.duration/2).delay((function(e,i,r){return t.duration-t.duration*(i/(r.length-1))})).attr("opacity",0).attr("r",0);this.updateDots.transition("accessibilityAfterExit").duration(this.duration/2).delay((function(e,i,r){return t.duration-t.duration*(i/(r.length-1))})).ease(jO).call(OY,(function(){var e=yY(t.rootG.node());t.exitDots.remove();t.exitDotWrappers.remove();t.svg.selectAll(".exiting").remove();t.updateDots=t.updateDotWrappers.selectAll("circle");t.updatingLabels=t.updatingLabelGroups.selectAll(".parallel-dataLabel");t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();pY({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawPoints=function(){var t=this;var e;if(this.interpolating){e=this.updateDots.attr("data-cx",(function(e){return t.x(e[t.ordinalAccessor])})).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",(function(e){return e.exit?0:wY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):xY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).transition("update").ease(jO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0})).attr("r",(function(e){return e.exit?0:wY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):xY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e)}))}else{e=this.updateDots.attr("data-cx",(function(e){return t.x(e[t.ordinalAccessor])})).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",(function(e){return wY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):xY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).attr("r",(function(e){return wY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):xY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e)})).transition("update").ease(jO).duration(this.duration)}this.updateDots.attr("stroke",this.handleDotStroke);e.attr("cx",(function(e){return t.x(e[t.ordinalAccessor])})).attr("cy",this.dynamicY).call(OY,(function(){t.updateDots.each((function(t){t.enterWholeGroup=false;t.enter=false}));pY({parentGNode:t.rootG.node()})}))};t.prototype.enterSeriesLabels=function(){var t=this;this.seriesLabelEnter.interrupt();this.seriesLabelEnter.attr("class","parallel-series-label").attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onSeriesHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("fill",this.handleSeriesTextFill).attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(function(e){if(t.yAxis.scales==="individual"){return t.isRight?t.multiYScale[e.values[e.values.length-1][t.ordinalAccessor]].y(e.values[e.values.length-1][t.valueAccessor]):t.multiYScale[e.values[0][t.ordinalAccessor]].y(e.values[0][t.valueAccessor])}return t.isRight?t.y(e.values[e.values.length-1][t.valueAccessor]):t.y(e.values[0][t.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.5em").attr("text-anchor",this.isRight?"start":"end").attr("opacity",(function(e){var i=!t.seriesLabel.visible?0:t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1;return AY(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:Number.EPSILON}))};t.prototype.updateSeriesLabels=function(){var t=this;this.seriesLabelUpdate.interrupt();this.seriesLabelUpdate.transition("opacity").ease(jO).duration(this.duration).attr("opacity",(function(e){var i=!t.seriesLabel.visible?0:t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1;if(!t.seriesInteraction){return i}else if(t.secondaryLines.keys.includes(e.key)){return AY(e.values[0],i,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}else{return AY(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}}))};t.prototype.exitSeriesLabels=function(){this.seriesLabelExit.interrupt();this.seriesLabelExit.transition("update").ease(jO).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawSeriesLabels=function(){var t=this;var e=this.labelDetails.placement!=="auto"&&this.labelDetails.collisionHideOnly;var i=this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill).text((function(e,i){return t.secondaryLines.keys.includes(e.key)&&!t.secondaryLines.showSeriesLabel?"":t.labelDetails.label?t.labelDetails.label[i]:e.key})).style("visibility",(function(e,i,r){return t.labelDetails.placement==="auto"||t.labelDetails.collisionHideOnly?YW(r[i]).style("visibility"):null})).attr("data-x",this.isRight?this.innerPaddedWidth+10:0).attr("data-y",(function(e,i,r){var n=r[i];var s=getComputedStyle(n);var a=parseFloat(s.fontSize);var o=Math.max(a-1,1);if(t.yAxis.scales==="individual"){return t.isRight?t.multiYScale[e.values[e.values.length-1][t.ordinalAccessor]].y(e.values[e.values.length-1][t.valueAccessor]):t.multiYScale[e.values[0][t.ordinalAccessor]].y(e.values[0][t.valueAccessor])}return t.isRight?t.y(e.values[e.values.length-1][t.valueAccessor])+.4*o:t.y(e.values[0][t.valueAccessor])+.4*o})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.5em").attr("data-use-dx",e).attr("data-use-dy",e).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-text-anchor",this.isRight?"start":"end").transition("update").ease(jO).duration(this.duration);if(this.labelDetails.visible&&(this.labelDetails.placement==="auto"||this.labelDetails.collisionHideOnly)){this.bitmaps=FY({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[this.updateDots],validPositions:e?["middle"]:["middle","top","bottom"],offsets:e?[1]:[1,4,4],accessors:["key"],size:[YY(this.width,0),YY(this.height,0)],hideOnly:this.labelDetails.visible&&e});if(e){i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(function(e){if(t.yAxis.scales==="individual"){return t.isRight?t.multiYScale[e.values[e.values.length-1][t.ordinalAccessor]].y(e.values[e.values.length-1][t.valueAccessor]):t.multiYScale[e.values[0][t.ordinalAccessor]].y(e.values[0][t.valueAccessor])}return t.isRight?t.y(e.values[e.values.length-1][t.valueAccessor]):t.y(e.values[0][t.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.5em")}}else{i.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(function(e){if(t.yAxis.scales==="individual"){return t.isRight?t.multiYScale[e.values[e.values.length-1][t.ordinalAccessor]].y(e.values[e.values.length-1][t.valueAccessor]):t.multiYScale[e.values[0][t.ordinalAccessor]].y(e.values[0][t.valueAccessor])}return t.isRight?t.y(e.values[e.values.length-1][t.valueAccessor]):t.y(e.values[0][t.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.5em")}};t.prototype.enterDataLabels=function(){var t=this;this.enteringLabels.interrupt();this.enteringLabelGroups.attr("class","parallel-label-wrapper").attr("opacity",0).attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]}));this.enteringLabels.attr("opacity",0).attr("fill",this.handleTextFill).attr("class","parallel-dataLabel").attr("cursor",!this.suppressEvents?this.cursor:null).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);if(this.interpolating){var e=this.enteringLabels.attr("class","parallel-dataLabel").attr("opacity",Number.EPSILON);WY({root:e,xScale:this.interpolating.x,yScale:this.interpolateDynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"});this.updatingLabels.attr("opacity",(function(t){return t.enter?Number.EPSILON:1}));var i=this.enteringLabelGroups.selectAll(".parallel-dataLabel").attr("opacity",Number.EPSILON);WY({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}else{var e=this.enteringLabels.attr("opacity",Number.EPSILON).attr("class","parallel-dataLabel");WY({root:e,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}if(this.dataLabel.placement==="auto"){this.updatingLabels.each((function(t,e,i){if(!t.enter&&!t.exit&&!t.hidden&&(t["auto-x"]||t["auto-x"]===0)&&(t["auto-y"]||t["auto-y"]===0)){YW(i[e]).attr("x",+YW(i[e]).attr("x")+(+t["auto-x"]||0)).attr("y",+YW(i[e]).attr("y")+(+t["auto-y"]||0)).attr("text-anchor",t["auto-text-anchor"])}}))}};t.prototype.updateDataLabels=function(){var t=this;this.updatingLabelGroups.interrupt();this.updatingLabelGroups.attr("opacity",(function(e){var i=!t.dataLabel.visible?0:t.secondaryLines.keys.includes(e.key)&&t.secondaryLines.showDataLabel?t.secondaryLines.opacity:t.secondaryLines.keys.includes(e.key)&&!t.secondaryLines.showDataLabel?0:1;return i}));if(this.interpolating){this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((function(t){return t.interpolate.end})).classed("exiting",(function(t){return t.exit}));this.enteringLabelGroups.each((function(t){return t.enterWholeGroup=true}));this.updatingLabels.transition("opacity").ease(jO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0})).attr("opacity",(function(e,i,r){var n=e.exit?0:AY(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1;var s=+YW(r[i].parentNode).attr("opacity");YW(r[i]).attr("data-hidden",s===0||n===0?"true":null);return n}))}else{this.updatingLabels.attr("opacity",(function(e,i,r){var n=e.exit?0:AY(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1;var s=+YW(r[i].parentNode).attr("opacity");YW(r[i]).attr("data-hidden",s===0||n===0?"true":null);return n}))}};t.prototype.exitDataLabels=function(){var t=this;this.exitingLabels.interrupt();this.exitingLabels.transition("exit").ease(jO).duration(this.duration).attr("opacity",0).remove();this.exitingLabelGroups.selectAll(".parallel-dataLabel").transition("exit").ease(jO).duration(this.duration/2).delay((function(e,i,r){return t.duration-t.duration*(i/(r.length-1))})).attr("opacity",0).call(OY,(function(){t.exitingLabelGroups.remove()}))};t.prototype.drawDataLabels=function(){var t=this;var e=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;var i=this.updatingLabels.text((function(e){return MY(e,t.innerLabelAccessor,t.dataLabel.format)}));if(this.interpolating){i=this.updatingLabels.style("visibility",(function(e,i,r){return t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly?e.hidden?"hidden":YW(r[i]).style("visibility"):null})).attr("data-x",(function(e){return t.interpolating.x(e[t.ordinalAccessor])})).attr("data-y",this.interpolateDynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(jO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0}))}else{i=this.updatingLabels.style("visibility",(function(e,i,r){return t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly?e.hidden?"hidden":YW(r[i]).style("visibility"):null})).attr("data-x",(function(e){return t.x(e[t.ordinalAccessor])})).attr("data-y",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(jO).duration(this.duration)}var r=this.gridG.selectAll("line").attr("data-y2",this.innerPaddedHeight).attr("data-y1",0).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-x1",(function(e){return t.x(e)})).attr("data-x2",(function(e){return t.x(e)}));var n=this.yUpdate.selectAll(".y.axis").filter((function(t,e,i){return+YW(i[e]).attr("opacity")>=1e-4})).selectAll("text").attr("data-fill",true).attr("data-y",(function(e){return t.y(e)})).attr("data-width",(function(e,i,r){var n=r[i];var s=getComputedStyle(n);var a=parseFloat(s.fontSize);var o=Math.max(a-1,1);var l=zY(n.textContent,a,true,s.fontFamily);YW(n).attr("data-x",+YW(n).attr("x")).attr("data-translate-x",t.margin.left+t.padding.left-l).attr("data-translate-y",t.margin.top+t.padding.top-o/2).attr("data-height",o);return l}));var s=this.dataLabel&&this.dataLabel.collisionPlacement;var a=e?["middle"]:s&&this.collisionSettings[s]?this.collisionSettings[s].validPositions:this.collisionSettings["all"].validPositions;var o=e?[1]:s&&this.collisionSettings[s]?this.collisionSettings[s].offsets:this.collisionSettings["all"].offsets;this.bitmaps=WY({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",labelSelection:i,avoidMarks:[n,r,this.updateLines,this.updateDots],validPositions:a,offsets:o,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[YY(this.width,0),YY(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}});i.call(OY,(function(){t.hiddenHash={};t.updatingLabels.each((function(e,i,r){t.hiddenHash[e[t.ordinalAccessor]+"-"+(e[t.seriesAccessor]||"b")]={"data-label-hidden":YW(r[i]).attr("data-label-hidden")==="true",x:+YW(r[i]).attr("x")-+YW(r[i]).attr("data-x"),y:+YW(r[i]).attr("y")-+YW(r[i]).attr("data-y"),"text-anchor":YW(r[i]).attr("text-anchor")}}))}))};t.prototype.updateInteractionState=function(){var t=this;this.updateLines.interrupt("opacity");this.updateLines.attr("opacity",(function(e){var i=t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1;if(!t.seriesInteraction){return i}else if(t.secondaryLines.keys.includes(e.key)){return AY(e.values[0],t.secondaryLines.opacity,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}else{return AY(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}}));var e=this.showDots?1:0;this.updateDotWrappers.attr("opacity",(function(i){var r=t.secondaryLines.keys.includes(i.key)?t.secondaryLines.opacity:e;return r}));this.updateDots.each((function(i,r,n){if(!i.enter&&!i.enterWholeGroup&&!i.exit&&!i.exitWholeGroup){YW(n[r]).attr("opacity",(function(){return AY(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}}));pY({parentGNode:this.rootG.node()});CY({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.setSeriesLabelOpacity=function(){var t=this;var e=this.labelDetails.placement!=="auto"&&this.labelDetails.collisionHideOnly;var i=this.labelDetails.placement==="auto"||e;this.seriesLabelUpdate.each((function(i,r,n){var s=YW(n[r]);var a=+s.attr("opacity");var o=s.style("visibility");if(!s.classed("entering")){s.attr("opacity",(function(){var l=(!t.seriesLabel.visible?0:t.secondaryLines.keys.includes(i.key)?t.secondaryLines.opacity:1)<1?0:1;var u=+YW(n[r].parentNode).attr("opacity");s.attr("data-hidden",u===0||l===0?"true":null);if(!t.seriesInteraction){YW(n[r]).attr("data-hidden",l===0?"true":null);if(a!==l&&(t.labelDetails.placement==="auto"||e)){if(l===1){YW(n[r]).classed("collision-added",true).style("visibility",null)}else{YW(n[r]).classed("collision-removed",true)}}return l}else if(t.secondaryLines.keys.includes(i.key)){var h=AY(i.values[0],l,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1;YW(n[r]).attr("data-hidden",h===0?"true":null);if((h===1&&o==="hidden"||a!==h)&&(t.labelDetails.placement==="auto"||e)){if(h===1){YW(n[r]).classed("collision-added",true).style("visibility",null)}else{YW(n[r]).classed("collision-removed",true)}}return h}else{var h=AY(i.values[0],l,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1;YW(n[r]).attr("data-hidden",h===0?"true":null);if((h===1&&o==="hidden"||a!==h)&&(t.labelDetails.placement==="auto"||e)){if(h===1){YW(n[r]).classed("collision-added",true).style("visibility",null)}else{YW(n[r]).classed("collision-removed",true)}}return h}}))}}));if(i){var r=this.seriesLabelUpdate.filter((function(t,e,i){return YW(i[e]).classed("collision-added")})).attr("data-text-anchor",(function(t,e,i){return YW(i[e]).attr("collision-text-anchor")||YW(i[e]).attr("data-text-anchor")})).attr("collision-text-anchor",null);var n=this.seriesLabelUpdate.filter((function(t,e,i){return YW(i[e]).classed("collision-removed")})).attr("data-use-dx",e).attr("data-use-dy",e).attr("keep-data-y",e).attr("collision-text-anchor",(function(t,e,i){return YW(i[e]).attr("data-text-anchor")})).attr("data-text-anchor",null);if(n.size()>0){this.bitmaps=FY({bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[YY(this.width,0),YY(this.height,0)],hideOnly:false,removeOnly:true});n.classed("collision-removed",false).attr("keep-data-y",null)}if(r.size()>0){this.bitmaps=FY({bitmaps:this.bitmaps,labelSelection:r,avoidMarks:[this.updateDots],validPositions:e?["middle"]:["middle","top","bottom"],offsets:e?[1]:[1,4,4],accessors:["key"],size:[YY(this.width,0),YY(this.height,0)],hideOnly:this.labelDetails.visible&&e});if(e){r.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(function(e){if(t.yAxis.scales==="individual"){return t.isRight?t.multiYScale[e.values[e.values.length-1][t.ordinalAccessor]].y(e.values[e.values.length-1][t.valueAccessor]):t.multiYScale[e.values[0][t.ordinalAccessor]].y(e.values[0][t.valueAccessor])}return t.isRight?t.y(e.values[e.values.length-1][t.valueAccessor]):t.y(e.values[0][t.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.5em")}r.classed("collision-added",false)}}};t.prototype.setLabelOpacity=function(){var t=this;var e=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;var i=this.dataLabel.placement==="auto"||e;var r=this.dataLabel&&this.dataLabel.collisionPlacement;this.updatingLabelGroups.attr("opacity",(function(e){return(!t.dataLabel.visible?0:t.secondaryLines.keys.includes(e.key)&&t.secondaryLines.showDataLabel?t.secondaryLines.opacity:t.secondaryLines.keys.includes(e.key)&&!t.secondaryLines.showDataLabel?0:1)<1?0:1}));this.updatingLabels.each((function(i,r,n){var s=+YW(n[r]).attr("opacity");var a=YW(n[r]).style("visibility");if(!i.enter&&!i.enterWholeGroup&&!i.exit&&!i.exitWholeGroup){YW(n[r]).attr("opacity",(function(){var o=AY(i,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1;var l=+YW(n[r].parentNode).attr("opacity");YW(n[r]).attr("data-hidden",l===0||o===0?"true":null);if((o===1&&a==="hidden"||s!==o)&&(t.dataLabel.placement==="auto"||e)){if(o===1){YW(n[r]).classed("collision-added",true).style("visibility",null)}else{YW(n[r]).classed("collision-removed",true)}}return o}))}}));if(i){var n=this.updatingLabels.filter((function(t,e,i){return YW(i[e]).classed("collision-added")})).transition().duration(0);var s=this.updatingLabels.filter((function(t,e,i){return YW(i[e]).classed("collision-removed")})).attr("data-use-dx",e).attr("data-use-dy",e);var a=e?["middle"]:r&&this.collisionSettings[r]?this.collisionSettings[r].validPositions:this.collisionSettings["all"].validPositions;var o=e?[1]:r&&this.collisionSettings[r]?this.collisionSettings[r].offsets:this.collisionSettings["all"].offsets;if(s.size()>0){this.bitmaps=FY({bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[YY(this.width,0),YY(this.height,0)],hideOnly:false,removeOnly:true});s.classed("collision-removed",false)}if(n.size()>0){this.bitmaps=WY({root:n,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[this.updateLines,this.updateDots],validPositions:a,offsets:o,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[YY(this.width,0),YY(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly,suppressMarkDraw:true}});n.call(OY,(function(){t.updatingLabels.each((function(e,i,r){YW(r[i]).classed("collision-added",false);t.hiddenHash[e[t.ordinalAccessor]+"-"+(e[t.seriesAccessor]||"b")]={"data-label-hidden":YW(r[i]).attr("data-label-hidden")==="true",x:+YW(r[i]).attr("x")-+YW(r[i]).attr("data-x"),y:+YW(r[i]).attr("y")-+YW(r[i]).attr("data-y"),"text-anchor":YW(r[i]).attr("text-anchor")}}))}))}}};t.prototype.bindInteractivity=function(){var t=this;this.updateLines.on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateDots.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.seriesLabelUpdate.on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onSeriesHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updatingLabels.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.addStrokeUnder=function(){var t=KR({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.labels.attr("filter",t);this.seriesLabelG.attr("filter",t)};t.prototype.updateColors=function(){var t=this;this.updateDotWrappers.attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]}));this.updateDots.attr("stroke",this.handleDotStroke);this.updateLines.attr("stroke",this.handleLineStroke);this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill);this.updatingLabelGroups.attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]}));this.updatingLabels.attr("fill",this.handleTextFill)};t.prototype.updateCursor=function(){this.updateLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null);this.updateDots.attr("cursor",!this.suppressEvents?this.cursor:null);this.seriesLabelUpdate.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null);this.updatingLabels.attr("cursor",!this.suppressEvents?this.cursor:null)};t.prototype.drawReferenceLines=function(){var t=this;var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class",".parallel-reference").attr("opacity",1);var r=i.append("line");r.attr("class","line-reference-line").attr("opacity",0);var n=i.append("text");n.attr("class","parallel-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".parallel-reference-line").data((function(t){return[t]})).transition("merge").ease(jO).duration(this.duration);var o=s.selectAll(".parallel-reference-line-label").data((function(t){return[t]})).transition("merge").ease(jO).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(jO).duration(this.duration).attr("opacity",0).remove();i.attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));s.transition("merge").ease(jO).duration(this.duration).attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.style("stroke",VY[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",VY[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.updateStrokeWidth=function(){var t=this;this.updateLines.attr("stroke-width",(function(e){return t.calculateStrokeWidth(e,true)}));this.updateDots.attr("stroke",this.handleDotStroke)};t.prototype.updateStrokePattern=function(){this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)};t.prototype.updateDotRadius=function(){var t=this;this.updateDots.each((function(e,i,r){var n=YW(r[i]);if(!e.enter&&!e.enterWholeGroup&&!n.classed("entering")&&!e.exit){n.attr("r",(function(){return wY(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):xY(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2}))}})).attr("stroke",this.handleDotStroke)};t.prototype.setSelectedClass=function(){var t=this;this.updateDots.classed("highlight",(function(e,i,r){var n=AY(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;vY(r[i],n,s);return n}))};t.prototype.drawAnnotations=function(){bY({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.ordinalAccessor,yScale:this.y,yAccessor:this.valueAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})};t.prototype.setAnnotationAccessibility=function(){fY(this.parallelChartEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=qR(this.highestHeadingLevel);this.bottomLevel=qR(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){$R({rootEle:this.parallelChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"parallel-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){tY({node:this.svg.node(),chartTag:"parallel-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:GY(this,mY,"parallel-plot"),groupAccessor:this.seriesAccessor,groupName:"line",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.updateDots.each((function(t,e,i){ZR(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=GY(this,mY,"parallel-plot");this.updateDots.each((function(i,r,n){QR({node:n[r],geomType:"point",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"line",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});JR({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateDotWrappers.each((function(e,i,r){JR({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){iY(this.parallelChartEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){rY(this.parallelChartEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){nY(this.parallelChartEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){sY(this.parallelChartEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){aY(this.parallelChartEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){oY(this.parallelChartEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){lY(this.parallelChartEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){uY({rootEle:this.parallelChartEl,parentGNode:this.dotG.node(),chartTag:"parallel-plot",geomType:"point",groupName:"line"})};t.prototype.setChartAccessibilityStructureNotes=function(){dY(this.parallelChartEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.interpolating=false;this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){HY(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&t[this.ordinalAccessor]){this.eventsTooltip({data:t,evt:CW,isToShow:true})}};t.prototype.onSeriesHoverHandler=function(t){this.hoverFunc.emit(t)};t.prototype.onMouseOutHandler=function(){HY(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){NY(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;DY({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,chartType:"parallel"})};t.prototype.bindLegendInteractivity=function(){var t=this;YW(this.parallelChartEl).selectAll(".legend").on("click",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?function(e){if(e.values){t.hoverFunc.emit(e.values[0])}}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive?function(){return t.onMouseOutHandler()}:null)};t.prototype.setLegendCursor=function(){YW(this.parallelChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?this.cursor:null)};t.prototype.drawLegendElements=function(){_Y({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,dashPatterns:!this.accessibility.hideTextures?this.dashPatterns:null,margin:this.margin,padding:this.padding,duration:this.duration,type:"parallel",secondary:this.secondaryLines.keys,fontSize:16,data:this.nest,label:this.legend.labels,hide:!(this.legend.visible||!this.legend),interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldSetScaleUsed){this.setScaleUsed();this.shouldSetScaleUsed=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateInterpolationData){this.updateInterpolationData();this.shouldUpdateInterpolationData=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldValidateSeriesLabels){this.validateSeriesLabels();this.shouldValidateSeriesLabels=false}return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"parallel-main-title vcl-main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions parallel-sub-title vcl-sub-title"},this.subTitle),r("div",{class:"parallel-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"point",groupName:"line",chartTag:"parallel-plot",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-parallel-container"}),r("div",{class:"parallel-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))};t.prototype.init=function(){var t=Object.keys(KO);var e=0;var i={wrapLabel:{exception:false},strokeWidth:{exception:0},showDots:{exception:false},hoverOpacity:{exception:0},dotRadius:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:false}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:KO[t[e]]}};Object.defineProperty(t.prototype,"parallelChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],seriesAccessor:["seriesAccessorWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],showBaselineX:["showBaselineXWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],showDots:["showDotsWatcher"],dotRadius:["dotRadiusWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],secondaryLines:["secondaryLinesWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}parallel-plot{cursor:default}parallel-plot .annotations{pointer-events:none}parallel-plot .annotations .handle{pointer-events:all}parallel-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}parallel-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}parallel-plot .hidden{display:none}parallel-plot .axis{font-size:12px}parallel-plot .axis text{fill:#767676}parallel-plot .axis-label{text-anchor:middle;font:1rem sans-serif}parallel-plot .axis path{stroke:#767676}parallel-plot .grid line{stroke:#767676;shape-rendering:crispEdges}parallel-plot .grid path{stroke-width:0;stroke:#767676}parallel-plot .grid.left line{stroke-dasharray:4, 4;stroke-opacity:0.6}parallel-plot .parallel-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}parallel-plot .parallel-group__inactive{opacity:0}parallel-plot .parallel-group .parallel-plot{fill:none}parallel-plot .parallel-group .dot{stroke:#ffffff}parallel-plot .parallel-group .parallel-series-label{font-size:1em}parallel-plot .parallel-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}parallel-plot .parallel-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=TY();var BY="http://www.w3.org/1999/xhtml";var KY={svg:"http://www.w3.org/2000/svg",xhtml:BY,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qY(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return KY.hasOwnProperty(e)?{space:KY[e],local:t}:t}function jY(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===BY&&e.documentElement.namespaceURI===BY?e.createElement(t):e.createElementNS(i,t)}}function $Y(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ZY(t){var e=qY(t);return(e.local?$Y:jY)(e)}function QY(){}function JY(t){return t==null?QY:function(){return this.querySelector(t)}}function tz(t){if(typeof t!=="function")t=JY(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new IF(r,this._parents)}function ez(){return[]}function iz(t){return t==null?ez:function(){return this.querySelectorAll(t)}}function rz(t){if(typeof t!=="function")t=iz(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new IF(r,n)}function nz(t){return function(){return this.matches(t)}}function sz(t){if(typeof t!=="function")t=nz(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new IF(r,this._parents)}function az(t){return new Array(t.length)}function oz(){return new IF(this._enter||this._groups.map(az),this._parents)}function lz(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}lz.prototype={constructor:lz,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function uz(t){return function(){return t}}var hz="$";function cz(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new lz(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function dz(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=hz+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=hz+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new lz(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function fz(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?dz:cz,r=this._parents,n=this._groups;if(typeof t!=="function")t=uz(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new IF(a,r);a._enter=o;a._exit=l;return a}function pz(){return new IF(this._exit||this._groups.map(az),this._parents)}function yz(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function vz(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new IF(a,this._parents)}function gz(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function bz(t){if(!t)t=mz;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new IF(n,this._parents).order()}function mz(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Az(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function wz(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function xz(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function Sz(){var t=0;this.each((function(){++t}));return t}function Lz(){return!this.node()}function kz(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function _z(t){return function(){this.removeAttribute(t)}}function Cz(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Dz(t,e){return function(){this.setAttribute(t,e)}}function Mz(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Uz(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function Tz(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function Ez(t,e){var i=qY(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?Cz:_z:typeof e==="function"?i.local?Tz:Uz:i.local?Mz:Dz)(i,e))}function Iz(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Nz(t){return function(){this.style.removeProperty(t)}}function Hz(t,e,i){return function(){this.style.setProperty(t,e,i)}}function Wz(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function Pz(t,e,i){return arguments.length>1?this.each((e==null?Nz:typeof e==="function"?Wz:Hz)(t,e,i==null?"":i)):Gz(this.node(),t)}function Gz(t,e){return t.style.getPropertyValue(e)||Iz(t).getComputedStyle(t,null).getPropertyValue(e)}function Oz(t){return function(){delete this[t]}}function Vz(t,e){return function(){this[t]=e}}function Rz(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function Yz(t,e){return arguments.length>1?this.each((e==null?Oz:typeof e==="function"?Rz:Vz)(t,e)):this.node()[t]}function zz(t){return t.trim().split(/^|\s+/)}function Fz(t){return t.classList||new Xz(t)}function Xz(t){this._node=t;this._names=zz(t.getAttribute("class")||"")}Xz.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function Bz(t,e){var i=Fz(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function Kz(t,e){var i=Fz(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function qz(t){return function(){Bz(this,t)}}function jz(t){return function(){Kz(this,t)}}function $z(t,e){return function(){(e.apply(this,arguments)?Bz:Kz)(this,t)}}function Zz(t,e){var i=zz(t+"");if(arguments.length<2){var r=Fz(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?$z:e?qz:jz)(i,e))}function Qz(){this.textContent=""}function Jz(t){return function(){this.textContent=t}}function tF(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function eF(t){return arguments.length?this.each(t==null?Qz:(typeof t==="function"?tF:Jz)(t)):this.node().textContent}function iF(){this.innerHTML=""}function rF(t){return function(){this.innerHTML=t}}function nF(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function sF(t){return arguments.length?this.each(t==null?iF:(typeof t==="function"?nF:rF)(t)):this.node().innerHTML}function aF(){if(this.nextSibling)this.parentNode.appendChild(this)}function oF(){return this.each(aF)}function lF(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uF(){return this.each(lF)}function hF(t){var e=typeof t==="function"?t:ZY(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function cF(){return null}function dF(t,e){var i=typeof t==="function"?t:ZY(t),r=e==null?cF:typeof e==="function"?e:JY(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function fF(){var t=this.parentNode;if(t)t.removeChild(this)}function pF(){return this.each(fF)}function yF(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vF(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gF(t){return this.select(t?vF:yF)}function bF(t){return arguments.length?this.property("__data__",t):this.node().__data__}var mF={};var AF=null;if(typeof document!=="undefined"){var wF=document.documentElement;if(!("onmouseenter"in wF)){mF={mouseenter:"mouseover",mouseleave:"mouseout"}}}function xF(t,e,i){t=SF(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function SF(t,e,i){return function(r){var n=AF;AF=r;try{t.call(this,this.__data__,e,i)}finally{AF=n}}}function LF(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function kF(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function _F(t,e,i){var r=mF.hasOwnProperty(t.type)?xF:SF;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function CF(t,e,i){var r=LF(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?_F:kF;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function DF(t,e,i){var r=Iz(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function MF(t,e){return function(){return DF(this,t,e)}}function UF(t,e){return function(){return DF(this,t,e.apply(this,arguments))}}function TF(t,e){return this.each((typeof e==="function"?UF:MF)(t,e))}var EF=[null];function IF(t,e){this._groups=t;this._parents=e}function NF(){return new IF([[document.documentElement]],EF)}IF.prototype=NF.prototype={constructor:IF,select:tz,selectAll:rz,filter:sz,data:fz,enter:oz,exit:pz,join:yz,merge:vz,order:gz,sort:bz,call:Az,nodes:wz,node:xz,size:Sz,empty:Lz,each:kz,attr:Ez,style:Pz,property:Yz,classed:Zz,text:eF,html:sF,raise:oF,lower:uF,append:hF,insert:dF,remove:pF,clone:gF,datum:bF,on:CF,dispatch:TF};function HF(t){return typeof t==="string"?new IF([[document.querySelector(t)]],[document.documentElement]):new IF([[t]],EF)}function WF(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function PF(t){if(t.length===1)t=GF(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function GF(t){return function(e,i){return WF(t(e),i)}}var OF=PF(WF);var VF=OF.right;function RF(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var YF=Math.sqrt(50),zF=Math.sqrt(10),FF=Math.sqrt(2);function XF(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=BF(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function BF(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=YF?10:s>=zF?5:s>=FF?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=YF?10:s>=zF?5:s>=FF?2:1)}function KF(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=YF)n*=10;else if(s>=zF)n*=5;else if(s>=FF)n*=2;return e<t?-n:n}function qF(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function jF(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function $F(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var ZF="$";function QF(){}QF.prototype=JF.prototype={constructor:QF,has:function(t){return ZF+t in this},get:function(t){return this[ZF+t]},set:function(t,e){this[ZF+t]=e;return this},remove:function(t){var e=ZF+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===ZF)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===ZF)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===ZF)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===ZF)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===ZF)++t;return t},empty:function(){for(var t in this)if(t[0]===ZF)return false;return true},each:function(t){for(var e in this)if(e[0]===ZF)t(this[e],e.slice(1),this)}};function JF(t,e){var i=new QF;if(t instanceof QF)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}var tX=Array.prototype;var eX=tX.map;var iX=tX.slice;var rX={name:"implicit"};function nX(){var t=JF(),e=[],i=[],r=rX;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==rX)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=JF();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=iX.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return nX(e,i).unknown(r)};$F.apply(n,arguments);return n}function sX(){var t=nX().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=RF(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return sX(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return $F.apply(h(),arguments)}function aX(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function oX(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function lX(){}var uX=.7;var hX=1/uX;var cX="\\s*([+-]?\\d+)\\s*",dX="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",fX="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pX=/^#([0-9a-f]{3,8})$/,yX=new RegExp("^rgb\\("+[cX,cX,cX]+"\\)$"),vX=new RegExp("^rgb\\("+[fX,fX,fX]+"\\)$"),gX=new RegExp("^rgba\\("+[cX,cX,cX,dX]+"\\)$"),bX=new RegExp("^rgba\\("+[fX,fX,fX,dX]+"\\)$"),mX=new RegExp("^hsl\\("+[dX,fX,fX]+"\\)$"),AX=new RegExp("^hsla\\("+[dX,fX,fX,dX]+"\\)$");var wX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aX(lX,kX,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:xX,formatHex:xX,formatHsl:SX,formatRgb:LX,toString:LX});function xX(){return this.rgb().formatHex()}function SX(){return HX(this).formatHsl()}function LX(){return this.rgb().formatRgb()}function kX(t){var e,i;t=(t+"").trim().toLowerCase();return(e=pX.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?_X(e):i===3?new UX(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?CX(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?CX(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yX.exec(t))?new UX(e[1],e[2],e[3],1):(e=vX.exec(t))?new UX(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=gX.exec(t))?CX(e[1],e[2],e[3],e[4]):(e=bX.exec(t))?CX(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=mX.exec(t))?NX(e[1],e[2]/100,e[3]/100,1):(e=AX.exec(t))?NX(e[1],e[2]/100,e[3]/100,e[4]):wX.hasOwnProperty(t)?_X(wX[t]):t==="transparent"?new UX(NaN,NaN,NaN,0):null}function _X(t){return new UX(t>>16&255,t>>8&255,t&255,1)}function CX(t,e,i,r){if(r<=0)t=e=i=NaN;return new UX(t,e,i,r)}function DX(t){if(!(t instanceof lX))t=kX(t);if(!t)return new UX;t=t.rgb();return new UX(t.r,t.g,t.b,t.opacity)}function MX(t,e,i,r){return arguments.length===1?DX(t):new UX(t,e,i,r==null?1:r)}function UX(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}aX(UX,MX,oX(lX,{brighter:function(t){t=t==null?hX:Math.pow(hX,t);return new UX(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?uX:Math.pow(uX,t);return new UX(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:TX,formatHex:TX,formatRgb:EX,toString:EX}));function TX(){return"#"+IX(this.r)+IX(this.g)+IX(this.b)}function EX(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function IX(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function NX(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new PX(t,e,i,r)}function HX(t){if(t instanceof PX)return new PX(t.h,t.s,t.l,t.opacity);if(!(t instanceof lX))t=kX(t);if(!t)return new PX;if(t instanceof PX)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new PX(a,o,l,t.opacity)}function WX(t,e,i,r){return arguments.length===1?HX(t):new PX(t,e,i,r==null?1:r)}function PX(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}aX(PX,WX,oX(lX,{brighter:function(t){t=t==null?hX:Math.pow(hX,t);return new PX(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?uX:Math.pow(uX,t);return new PX(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new UX(GX(t>=240?t-240:t+120,n,r),GX(t,n,r),GX(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function GX(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function OX(t){return function(){return t}}function VX(t,e){return function(i){return t+i*e}}function RX(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function YX(t){return(t=+t)===1?zX:function(e,i){return i-e?RX(e,i,t):OX(isNaN(e)?i:e)}}function zX(t,e){var i=e-t;return i?VX(t,i):OX(isNaN(t)?e:t)}var FX=function t(e){var i=YX(e);function r(t,e){var r=i((t=MX(t)).r,(e=MX(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=zX(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function XX(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function BX(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function KX(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=iB(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function qX(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function jX(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function $X(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=iB(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var ZX=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,QX=new RegExp(ZX.source,"g");function JX(t){return function(){return t}}function tB(t){return function(e){return t(e)+""}}function eB(t,e){var i=ZX.lastIndex=QX.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=ZX.exec(t))&&(n=QX.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:jX(r,n)})}i=QX.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?tB(l[0].x):JX(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function iB(t,e){var i=typeof e,r;return e==null||i==="boolean"?OX(e):(i==="number"?jX:i==="string"?(r=kX(e))?(e=r,FX):eB:e instanceof kX?FX:e instanceof Date?qX:BX(e)?XX:Array.isArray(e)?KX:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?$X:jX)(t,e)}function rB(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var nB=180/Math.PI;var sB={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function aB(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*nB,skewX:Math.atan(l)*nB,scaleX:a,scaleY:o}}var oB,lB,uB,hB;function cB(t){if(t==="none")return sB;if(!oB)oB=document.createElement("DIV"),lB=document.documentElement,uB=document.defaultView;oB.style.transform=t;t=uB.getComputedStyle(lB.appendChild(oB),null).getPropertyValue("transform");lB.removeChild(oB);t=t.slice(7,-1).split(",");return aB(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function dB(t){if(t==null)return sB;if(!hB)hB=document.createElementNS("http://www.w3.org/2000/svg","g");hB.setAttribute("transform",t);if(!(t=hB.transform.baseVal.consolidate()))return sB;t=t.matrix;return aB(t.a,t.b,t.c,t.d,t.e,t.f)}function fB(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:jX(t,n)},{i:l-2,x:jX(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:jX(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:jX(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:jX(t,i)},{i:o-2,x:jX(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var pB=fB(cB,"px, ","px)","deg)");var yB=fB(dB,", ",")",")");function vB(t){return function(){return t}}function gB(t){return+t}var bB=[0,1];function mB(t){return t}function AB(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:vB(isNaN(e)?NaN:.5)}function wB(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function xB(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=AB(n,r),s=i(a,s);else r=AB(r,n),s=i(s,a);return function(t){return s(r(t))}}function SB(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=AB(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=VF(t,e,1,r)-1;return s[i](n[i](e))}}function LB(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kB(){var t=bB,e=bB,i=iB,r,n,s,a=mB,o,l,u;function h(){o=Math.min(t.length,e.length)>2?SB:xB;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),jX)))(i)))};c.domain=function(e){return arguments.length?(t=eX.call(e,gB),a===mB||(a=wB(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=iX.call(t),h()):e.slice()};c.rangeRound=function(t){return e=iX.call(t),i=rB,h()};c.clamp=function(e){return arguments.length?(a=e?wB(t):mB,c):a!==mB};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function _B(t,e){return kB()(t,e)}function CB(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function DB(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function MB(t){return t=DB(Math.abs(t)),t?t[1]:NaN}function UB(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function TB(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var EB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function IB(t){if(!(e=EB.exec(t)))throw new Error("invalid format: "+t);var e;return new NB({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}IB.prototype=NB.prototype;function NB(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}NB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function HB(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var WB;function PB(t,e){var i=DB(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(WB=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+DB(t,Math.max(0,e+s-1))[0]}function GB(t,e){var i=DB(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var OB={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:CB,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return GB(t*100,e)},r:GB,s:PB,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function VB(t){return t}var RB=Array.prototype.map,YB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zB(t){var e=t.grouping===undefined||t.thousands===undefined?VB:UB(RB.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?VB:TB(RB.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=IB(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!OB[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=OB[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var L=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=HB(t);if(L&&+t===0&&c!=="+")L=false;i=(L?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?YB[8+WB/3]:"")+r+(L&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var k=i.length+t.length+r.length,_=k<p?new Array(p-k+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,k=_.length>>1)+i+t+r+_.slice(k);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=IB(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(MB(e)/3)))*3,n=Math.pow(10,-r),s=YB[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var FB;var XB;var BB;KB({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function KB(t){FB=zB(t);XB=FB.format;BB=FB.formatPrefix;return FB}function qB(t){return Math.max(0,-MB(Math.abs(t)))}function jB(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(MB(e)/3)))*3-MB(Math.abs(t)))}function $B(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,MB(e)-MB(t))+1}function ZB(t,e,i,r){var n=KF(t,e,i),s;r=IB(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=jB(n,a)))r.precision=s;return BB(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=$B(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=qB(n)))r.precision=s-(r.type==="%")*2;break}}return XB(r)}function QB(t){var e=t.domain;t.ticks=function(t){var i=e();return XF(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return ZB(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=BF(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=BF(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=BF(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function JB(){var t=_B(mB,mB);t.copy=function(){return LB(t,JB())};$F.apply(t,arguments);return QB(t)}var tK=Math.PI,eK=2*tK,iK=1e-6,rK=eK-iK;function nK(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function sK(){return new nK}nK.prototype=sK.prototype={constructor:nK,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(t,e,i,r,n,s){this._+="C"+ +t+","+ +e+","+ +i+","+ +r+","+(this._x1=+n)+","+(this._y1=+s)},arcTo:function(t,e,i,r,n){t=+t,e=+e,i=+i,r=+r,n=+n;var s=this._x1,a=this._y1,o=i-t,l=r-e,u=s-t,h=a-e,c=u*u+h*h;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=e)}else if(!(c>iK));else if(!(Math.abs(h*o-l*u)>iK)||!n){this._+="L"+(this._x1=t)+","+(this._y1=e)}else{var d=i-s,f=r-a,p=o*o+l*l,y=d*d+f*f,v=Math.sqrt(p),g=Math.sqrt(c),b=n*Math.tan((tK-Math.acos((p+c-y)/(2*v*g)))/2),m=b/g,A=b/v;if(Math.abs(m-1)>iK){this._+="L"+(t+m*u)+","+(e+m*h)}this._+="A"+n+","+n+",0,0,"+ +(h*d>u*f)+","+(this._x1=t+A*o)+","+(this._y1=e+A*l)}},arc:function(t,e,i,r,n,s){t=+t,e=+e,i=+i,s=!!s;var a=i*Math.cos(r),o=i*Math.sin(r),l=t+a,u=e+o,h=1^s,c=s?r-n:n-r;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null){this._+="M"+l+","+u}else if(Math.abs(this._x1-l)>iK||Math.abs(this._y1-u)>iK){this._+="L"+l+","+u}if(!i)return;if(c<0)c=c%eK+eK;if(c>rK){this._+="A"+i+","+i+",0,1,"+h+","+(t-a)+","+(e-o)+"A"+i+","+i+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u)}else if(c>iK){this._+="A"+i+","+i+",0,"+ +(c>=tK)+","+h+","+(this._x1=t+i*Math.cos(n))+","+(this._y1=e+i*Math.sin(n))}},rect:function(t,e,i,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};function aK(t){return function e(){return t}}function oK(t){this._context=t}oK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function lK(t){return new oK(t)}function uK(t){return t[0]}function hK(t){return t[1]}function cK(){var t=uK,e=hK,i=aK(true),r=null,n=lK,s=null;function a(a){var o,l=a.length,u,h=false,c;if(r==null)s=n(c=sK());for(o=0;o<=l;++o){if(!(o<l&&i(u=a[o],o,a))===h){if(h=!h)s.lineStart();else s.lineEnd()}if(h)s.point(+t(u,o,a),+e(u,o,a))}if(c)return s=null,c+""||null}a.x=function(e){return arguments.length?(t=typeof e==="function"?e:aK(+e),a):t};a.y=function(t){return arguments.length?(e=typeof t==="function"?t:aK(+t),a):e};a.defined=function(t){return arguments.length?(i=typeof t==="function"?t:aK(!!t),a):i};a.curve=function(t){return arguments.length?(n=t,r!=null&&(s=n(r)),a):n};a.context=function(t){return arguments.length?(t==null?r=s=null:s=n(r=t),a):r};return a}var dK=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var fK=new Uint8Array(16);function pK(){if(!dK){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return dK(fK)}var yK=[];for(var vK=0;vK<256;++vK){yK[vK]=(vK+256).toString(16).substr(1)}function gK(t,e){var i=e||0;var r=yK;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function bK(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||pK)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||gK(n)}var mK={value:function(){}};function AK(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new wK(i)}function wK(t){this._=t}function xK(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}wK.prototype=AK.prototype={constructor:wK,on:function(t,e){var i=this._,r=xK(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=SK(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=LK(i[n],t.name,e);else if(e==null)for(n in i)i[n]=LK(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new wK(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function SK(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function LK(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=mK,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var kK=0,_K=0,CK=0,DK=1e3,MK,UK,TK=0,EK=0,IK=0,NK=typeof performance==="object"&&performance.now?performance:Date,HK=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function WK(){return EK||(HK(PK),EK=NK.now()+IK)}function PK(){EK=0}function GK(){this._call=this._time=this._next=null}GK.prototype=OK.prototype={constructor:GK,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?WK():+i)+(e==null?0:+e);if(!this._next&&UK!==this){if(UK)UK._next=this;else MK=this;UK=this}this._call=t;this._time=i;FK()},stop:function(){if(this._call){this._call=null;this._time=Infinity;FK()}}};function OK(t,e,i){var r=new GK;r.restart(t,e,i);return r}function VK(){WK();++kK;var t=MK,e;while(t){if((e=EK-t._time)>=0)t._call.call(null,e);t=t._next}--kK}function RK(){EK=(TK=NK.now())+IK;kK=_K=0;try{VK()}finally{kK=0;zK();EK=0}}function YK(){var t=NK.now(),e=t-TK;if(e>DK)IK-=e,TK=t}function zK(){var t,e=MK,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:MK=i}}UK=t;FK(r)}function FK(t){if(kK)return;if(_K)_K=clearTimeout(_K);var e=t-EK;if(e>24){if(t<Infinity)_K=setTimeout(RK,t-NK.now()-IK);if(CK)CK=clearInterval(CK)}else{if(!CK)TK=NK.now(),CK=setInterval(YK,DK);kK=1,HK(RK)}}function XK(t,e,i){var r=new GK;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var BK=AK("start","end","interrupt");var KK=[];var qK=0;var jK=1;var $K=2;var ZK=3;var QK=4;var JK=5;var tq=6;function eq(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;sq(t,i,{name:e,index:r,group:n,on:BK,tween:KK,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:qK})}function iq(t,e){var i=nq(t,e);if(i.state>qK)throw new Error("too late; already scheduled");return i}function rq(t,e){var i=nq(t,e);if(i.state>$K)throw new Error("too late; already started");return i}function nq(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function sq(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=OK(s,0,i.time);function s(t){i.state=jK;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==jK)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===ZK)return XK(a);if(d.state===QK){d.state=tq;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=tq;d.timer.stop();delete r[u]}}XK((function(){if(i.state===ZK){i.state=QK;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=$K;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==$K)return;i.state=ZK;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=JK,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===JK){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=tq;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function aq(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>$K&&r.state<JK;r.state=tq;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function oq(t){return this.each((function(){aq(this,t)}))}function lq(t,e){var i,r;return function(){var n=rq(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function uq(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=rq(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function hq(t,e){var i=this._id;t+="";if(arguments.length<2){var r=nq(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?lq:uq)(i,t,e))}function cq(t,e,i){var r=t._id;t.each((function(){var t=rq(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return nq(t,r).value[e]}}function dq(t,e){var i;return(typeof e==="number"?jX:e instanceof kX?FX:(i=kX(e))?(e=i,FX):eB)(t,e)}function fq(t){return function(){this.removeAttribute(t)}}function pq(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yq(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function vq(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function gq(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function bq(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function mq(t,e){var i=qY(t),r=i==="transform"?yB:dq;return this.attrTween(t,typeof e==="function"?(i.local?bq:gq)(i,r,cq(this,"attr."+t,e)):e==null?(i.local?pq:fq)(i):(i.local?vq:yq)(i,r,e+""))}function Aq(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function wq(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function xq(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=qY(t);return this.tween(i,(r.local?Aq:wq)(r,e))}function Sq(t,e){return function(){iq(this,t).delay=+e.apply(this,arguments)}}function Lq(t,e){return e=+e,function(){iq(this,t).delay=e}}function kq(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Sq:Lq)(e,t)):nq(this.node(),e).delay}function _q(t,e){return function(){rq(this,t).duration=+e.apply(this,arguments)}}function Cq(t,e){return e=+e,function(){rq(this,t).duration=e}}function Dq(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?_q:Cq)(e,t)):nq(this.node(),e).duration}function Mq(t,e){if(typeof e!=="function")throw new Error;return function(){rq(this,t).ease=e}}function Uq(t){var e=this._id;return arguments.length?this.each(Mq(e,t)):nq(this.node(),e).ease}function Tq(t){if(typeof t!=="function")t=nz(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new tj(r,this._parents,this._name,this._id)}function Eq(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new tj(a,this._parents,this._name,this._id)}function Iq(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function Nq(t,e,i){var r,n,s=Iq(e)?iq:rq;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function Hq(t,e){var i=this._id;return arguments.length<2?nq(this.node(),i).on.on(t):this.each(Nq(i,t,e))}function Wq(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function Pq(){return this.on("end.remove",Wq(this._id))}function Gq(t){var e=this._name,i=this._id;if(typeof t!=="function")t=JY(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;eq(u[d],e,i,d,u,nq(h,i))}}}return new tj(s,this._parents,e,i)}function Oq(t){var e=this._name,i=this._id;if(typeof t!=="function")t=iz(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=nq(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){eq(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new tj(s,a,e,i)}var Vq=NF.prototype.constructor;function Rq(){return new Vq(this._groups,this._parents)}function Yq(t,e){var i,r,n;return function(){var s=Gz(this,t),a=(this.style.removeProperty(t),Gz(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function zq(t){return function(){this.style.removeProperty(t)}}function Fq(t,e,i){var r,n;return function(){var s=Gz(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function Xq(t,e,i){var r,n,s;return function(){var a=Gz(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),Gz(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Bq(t,e,i){var r=(t+="")==="transform"?pB:dq;return e==null?this.styleTween(t,Yq(t,r)).on("end.style."+t,zq(t)):this.styleTween(t,typeof e==="function"?Xq(t,r,cq(this,"style."+t,e)):Fq(t,r,e+""),i)}function Kq(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function qq(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,Kq(t,e,i==null?"":i))}function jq(t){return function(){this.textContent=t}}function $q(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function Zq(t){return this.tween("text",typeof t==="function"?$q(cq(this,"text",t)):jq(t==null?"":t+""))}function Qq(){var t=this._name,e=this._id,i=ij();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=nq(l,e);eq(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new tj(r,this._parents,t,i)}var Jq=0;function tj(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function ej(t){return NF().transition(t)}function ij(){return++Jq}var rj=NF.prototype;tj.prototype=ej.prototype={constructor:tj,select:Gq,selectAll:Oq,filter:Tq,merge:Eq,selection:Rq,transition:Qq,call:rj.call,nodes:rj.nodes,node:rj.node,size:rj.size,empty:rj.empty,each:rj.each,on:Hq,attr:mq,attrTween:xq,style:Bq,styleTween:qq,text:Zq,remove:Pq,tween:hq,delay:kq,duration:Dq,ease:Uq};function nj(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var sj={time:null,delay:0,duration:250,ease:nj};function aj(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return sj.time=WK(),sj}}return i}function oj(t){var e,i;if(t instanceof tj){e=t._id,t=t._name}else{e=ij(),(i=sj).time=WK(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){eq(l,t,e,u,a,i||aj(l,e))}}}return new tj(r,this._parents,t,e)}NF.prototype.interrupt=oq;NF.prototype.transition=oj;var lj=s.initTooltipStyle,uj=s.drawAxis,hj=s.drawGrid,cj=s.drawTooltip,dj=s.formatStats,fj=s.getLicenses,pj=s.checkInteraction,yj=s.checkClicked,vj=s.checkHovered,gj=s.interactionStyle,bj=s.getColors,mj=s.outlineColor,Aj=s.visaColors;var wj=t("pareto_chart",function(){function t(t){var r=this;e(this,t);this.height=400;this.width=800;this.showDataLabel=true;this.ordinalAccessor="label";this.valueAccessor="value";this.showTooltip=true;this.dataLabel={visible:true,placement:"top",content:"valueAccessor",format:"0,0.00"};this.referenceLines=[];this.layout="vertical";this.xAxis={visible:true,gridVisible:true,tickInterval:1};this.yAxis={visible:true,gridVisible:true,tickInterval:1};this.wrapLabel=false;this.colorPalette="single_blue";this.hoverOpacity=1;this.cursor="default";this.sortOrder="";this.roundedCorner=0;this.margin={top:this.height*.01,bottom:this.height*.01,right:this.width*.01,left:this.width*.01};this.padding={top:20,bottom:60,right:80,left:80};this.hideDataTable=false;this.paretoStroke="#767676";this.paretoHighlight="#15195A";this.paretoDot=3;this.clickHighlight=[];this.shouldUpdateChart=false;this.shouldUpdateBarStyle=false;this.placeDataLabels=function(t,e){var i;var n;var s;var a="0em";var o;if(r.layout==="vertical"){if((r.dataLabel.placement||"top")==="top"){i=r.x(t[r.ordinalAccessor])+r.x.bandwidth()/2;n=r.y(Math.max(0,t[r.valueAccessor]));s="-.3em";o="middle"}else if((r.dataLabel.placement||"top")==="bottom"){i=r.x(t[r.ordinalAccessor])+r.x.bandwidth()/2;n=r.y(0)-5;s="-.2em";o="middle"}}else if(r.layout==="horizontal"){if((r.dataLabel.placement||"top")==="top"){n=r.y(t[r.ordinalAccessor])+r.y.bandwidth()/2+4;i=r.x(t[r.valueAccessor])+4;s=".2em";o="start"}else if((r.dataLabel.placement||"top")==="bottom"){n=r.y(t[r.ordinalAccessor])+r.y.bandwidth()/2+4;i=r.x(0);s=".2em";o="start"}else if((r.dataLabel.placement||"top")==="bottomAbove"){n=r.y(t[r.ordinalAccessor]);i=r.x(0);s=".2em";a="-.2em";o="start"}else if((r.dataLabel.placement||"top")==="bottomBelow"){n=r.y(t[r.ordinalAccessor])+r.y.bandwidth();i=r.x(0);s=".2em";a="1em";o="start"}}if(e==="x"){return i}else if(e==="y"){return n}else if(e==="em"){return s}else if(e==="em2"){return a}else if(e==="anchor"){return o}else{return null}};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.idWatcher=function(t,e){this.chartID=t;this.barChartEl.id=this.chartID};t.prototype.dataWatcher=function(t,e){this.shouldUpdateChart=true};t.prototype.highlightWatcher=function(t,e){this.shouldUpdateBarStyle=true};t.prototype.componentWillLoad=function(){this.chartID=this.uniqueID||"bar-chart-"+bK();this.barChartEl.id=this.chartID;this.updateChartVariable()};t.prototype.componentDidLoad=function(){this.updateData();this.drawChart();this.setTooltipInitialStyle()};t.prototype.componentWillUpdate=function(){this.updateChartVariable()};t.prototype.componentDidUpdate=function(){var t=this;if(this.sortOrder==="asc"){this.data.sort((function(e,i){return Number(e[t.valueAccessor])-Number(i[t.valueAccessor])}))}else if(this.sortOrder==="desc"){this.data.sort((function(e,i){return Number(i[t.valueAccessor])-Number(e[t.valueAccessor])}))}if(this.shouldUpdateBarStyle){this.shouldUpdateBarStyle=false;this.updateBarSytle(this.bars)}else{this.shouldUpdateChart=false;this.updateData();this.drawChart()}};t.prototype.updateData=function(){var t=this;var e=0;this.data.map((function(i,r){i[t.valueAccessor]=parseFloat(i[t.valueAccessor]);i[t.valueAccessor]=+i[t.valueAccessor];e+=i[t.valueAccessor];i.CumulativeAmount=r===0?i[t.valueAccessor]:i[t.valueAccessor]+t.data[r-1].CumulativeAmount}));this.data.map((function(t){t.CumulativePercentage=t.CumulativeAmount/e}))};t.prototype.updateChartVariable=function(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!(this.layout==="vertical")&&this.xAxis.gridVisible});this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:this.layout==="vertical"&&this.yAxis.gridVisible});if(!this.innerXAxis.visible){this.padding.bottom=this.height*.05}if(!this.innerYAxis.visible){this.padding.left=this.width*.05}this.interactionKeys?"":this.interactionKeys=[this.groupAccessor||this.ordinalAccessor];this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.updateBarSytle=function(t){var e=this;t.attr("fill",(function(t){return e.clickHighlight.length>0&&yj(t,e.clickHighlight,e.interactionKeys)&&e.clickStyle.color?Aj[e.clickStyle.color]||e.clickStyle.color:e.hoverHighlight&&vj(t,e.hoverHighlight,e.interactionKeys)&&e.hoverStyle.color?Aj[e.hoverStyle.color]||e.hoverStyle.color:e.groupAccessor?e.colorArr(t[e.groupAccessor]):e.colorArr(t[e.valueAccessor])})).attr("style",(function(t){return gj({data:t,clickHighlight:e.clickHighlight,hoverHighlight:e.hoverHighlight,clickStyle:e.clickStyle,hoverStyle:e.hoverStyle,interactionKeys:e.interactionKeys,defaultStroke:mj(e.groupAccessor?e.colorArr(t[e.groupAccessor]):e.colorArr(t[e.valueAccessor])),defaultStrokeWidth:3})})).attr("opacity",(function(t){return pj(t,1,e.hoverOpacity,e.hoverHighlight,e.clickHighlight,e.interactionKeys)}))};t.prototype.drawChart=function(){var t=this;this.reSetRoot();if(this.layout==="vertical"){this.y=JB().domain([0,this.maxValueOverride||qF(this.data,(function(e){return e[t.valueAccessor]}))]).range([this.innerPaddedHeight,0]);if(this.yAxis.gridVisible==true){var e=Math.ceil(qF(this.data,(function(e){return e[t.valueAccessor]}))*10)/10;this.y=JB().domain([0,e]).range([this.innerPaddedHeight,0])}this.x=sX().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([0,this.innerPaddedWidth]).padding(.2);this.yCum=JB().domain([0,1]).range([this.innerPaddedHeight,0])}else if(this.layout==="horizontal"){this.x=JB().domain([0,this.maxValueOverride||qF(this.data,(function(e){return e[t.valueAccessor]}))]).range([0,this.innerPaddedWidth]);this.y=sX().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([this.innerPaddedHeight,0]).padding(.2)}this.line=cK().x((function(e){return t.x(e[t.ordinalAccessor])+t.x.bandwidth()/2})).y((function(e){return t.yCum(e.CumulativePercentage)}));var i=jF(this.data,(function(e){return e[t.valueAccessor]}));var r=qF(this.data,(function(e){return e[t.valueAccessor]}));this.colorArr=this.groupAccessor?bj(this.colors||this.colorPalette,nX().domain(this.data.map((function(e){return e[t.groupAccessor]}))).domain()):bj(this.colors||this.colorPalette,[i,r]);this.hoverStyle=this.hoverStyle?this.hoverStyle:this.colorPalette.includes("single")?{color:"comp_blue",strokeWidth:3}:{strokeWidth:3};this.clickStyle=this.clickStyle?this.clickStyle:this.colorPalette.includes("single")?{color:"supp_purple",strokeWidth:3}:{strokeWidth:3};this.drawGrid();this.drawAxis();this.drawBars();if(this.line){this.drawLine()}this.drawDataLabels();this.drawReferenceLines()};t.prototype.reSetRoot=function(){if(this.svg){this.svg.remove()}this.svg=HF(this.barChartEl).select("#visa-viz-d3-pareto-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g").attr("transform","translate("+this.margin.left+", "+this.margin.top+")");this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g").attr("transform","translate("+this.padding.left+", "+this.padding.top+")");this.tooltipG=HF(this.barChartEl).select(".pareto-tooltip")};t.prototype.drawAxis=function(){uj({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel&&this.layout==="vertical"?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible});uj({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible});uj({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.yCum,right:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.formatCum||"0.0%",hide:!this.innerYAxis.visible})};t.prototype.formatDataLabel=function(t){if(this.dataLabel.content==="ordinalAccessor"){return t[this.ordinalAccessor]}else{if(this.dataLabel.format){return dj(t[this.valueAccessor],this.dataLabel.format)}else{return t[this.valueAccessor]}}};t.prototype.drawDataLabels=function(){var t=this;if(this.dataLabel.visible){this.rootG.selectAll("text.dataLabel").remove();this.rootG.append("g").attr("class","bar-dataLabel-group").attr("id","bar-dataLabel-group").selectAll(".text").data(this.data).enter().append("text").attr("x",(function(e){return t.placeDataLabels(e,"x")})).attr("y",(function(e){return t.placeDataLabels(e,"y")})).attr(this.layout==="vertical"?"dy":"dx",(function(e){return t.placeDataLabels(e,"em")})).attr(this.layout==="vertical"?"dx":"dy",(function(e){return t.placeDataLabels(e,"em2")})).attr("text-anchor",(function(e){return t.placeDataLabels(e,"anchor")})).attr("class","bar-dataLabel-"+this.layout).text((function(e){return t.formatDataLabel(e)})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))}};t.prototype.drawGrid=function(){hj(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.innerXAxis.gridVisible,this.xAxis.tickInterval);hj(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.innerYAxis.gridVisible,this.yAxis.tickInterval)};t.prototype.drawBars=function(){var t=this;if(this.layout==="vertical"){this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class","bar").attr("tabindex",(function(t,e){return e===0?"0":"-1"})).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",(function(e){return t.x(e[t.ordinalAccessor])})).attr("y",(function(e){return t.y(Math.max(0,e[t.valueAccessor]))})).attr("height",(function(e){return Math.abs(t.y(0)-t.y(e[t.valueAccessor]))})).attr("width",this.x.bandwidth()).attr("cursor",this.cursor).attr("fill",(function(e){return t.clickHighlight.length>0&&yj(e,t.clickHighlight,t.interactionKeys)&&t.clickStyle.color?Aj[t.clickStyle.color]||t.clickStyle.color:t.hoverHighlight&&vj(e,t.hoverHighlight,t.interactionKeys)&&t.hoverStyle.color?Aj[t.hoverStyle.color]||t.hoverStyle.color:t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])})).attr("style",(function(e){return gj({data:e,clickHighlight:t.clickHighlight,hoverHighlight:t.hoverHighlight,clickStyle:t.clickStyle,hoverStyle:t.hoverStyle,interactionKeys:t.interactionKeys,defaultStroke:mj(t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])),defaultStrokeWidth:3})})).attr("opacity",(function(e){return pj(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.interactionKeys)})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))}else if(this.layout==="horizontal"){this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class",(function(e){return t.clickHighlight.includes(e[t.ordinalAccessor])?"bar highlight":"bar"})).attr("tabindex",(function(t,e){return e===0?"0":"-1"})).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",(function(e){return t.x(Math.min(0,e[t.valueAccessor]))})).attr("y",(function(e){return t.y(e[t.ordinalAccessor])})).attr("height",this.y.bandwidth()).attr("width",(function(e){return Math.abs(t.x(e[t.valueAccessor])-t.x(0))})).attr("cursor",this.cursor).attr("fill",(function(e){return t.clickHighlight.length>0&&yj(e,t.clickHighlight,t.interactionKeys)&&t.clickStyle.color?Aj[t.clickStyle.color]||t.clickStyle.color:t.hoverHighlight&&vj(e,t.hoverHighlight,t.interactionKeys)&&t.hoverStyle.color?Aj[t.hoverStyle.color]||t.hoverStyle.color:t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])})).attr("style",(function(e){return gj({data:e,clickHighlight:t.clickHighlight,hoverHighlight:t.hoverHighlight,clickStyle:t.clickStyle,hoverStyle:t.hoverStyle,interactionKeys:t.interactionKeys,defaultStroke:mj(t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])),defaultStrokeWidth:3})})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))}};t.prototype.drawLine=function(){var t=this;var e=false;var i;for(var r=0;r<this.data.length;r++){if(!e&&this.data[r].CumulativePercentage>this.paretoThreshold){i=r;e=true}}var n=this.rootG.append("g").attr("class","pareto-line");n.append("path").datum(this.data).attr("d",this.line).attr("class","pareto-line-path").attr("x",this.x.bandwidth()/2).attr("fill","none").attr("stroke",this.paretoStroke).attr("stroke-width",1);n.selectAll(".pareto-background-dot").data([this.data[i]]).enter().append("circle").attr("class","pareto-background-dot").attr("fill","#fff").attr("stroke",this.paretoHighlight).attr("stroke-width","1px").attr("r",this.paretoDot+6).attr("cx",(function(e){return t.x(e[t.ordinalAccessor])+t.x.bandwidth()/2})).attr("cy",(function(e){return t.yCum(e.CumulativePercentage)}));n.selectAll(".pareto-dot").data(this.data).enter().append("circle").attr("class","pareto-dot").attr("fill",(function(e,r){if(r===i){return t.paretoHighlight}else{return t.paretoStroke}})).attr("r",(function(e,r){return i===r?t.paretoDot+3:t.paretoDot})).attr("cx",(function(e){return t.x(e[t.ordinalAccessor])+t.x.bandwidth()/2})).attr("cy",(function(e){return t.yCum(e.CumulativePercentage)}));n.selectAll("text").data(this.data).enter().append("text").attr("x",(function(e){return t.placeDataLabels(e,"x")})).attr("y",(function(e){return t.yCum(e.CumulativePercentage)})).attr("dy","-1em").attr("text-anchor","middle").attr("class","pareto-label").attr("fill",this.paretoHighlight).text((function(t,e){return i===e?dj(t.CumulativePercentage,"0.0%"):""}))};t.prototype.drawReferenceLines=function(){var t=this;if(this.referenceLines.length>0){if(this.layout==="vertical"){this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",(function(t){return t.referenceID})).attr("class","bar-reference-line").attr("x1",0).attr("x2",this.innerPaddedWidth).attr("y1",(function(e){return t.y(e.referenceData.referenceValue)})).attr("y2",(function(e){return t.y(e.referenceData.referenceValue)})).style("stroke",(function(t){return t.referenceData.strokeColor})).style("stroke-width",(function(t){return t.referenceData.strokeWidth})).style("opacity",(function(t){return t.referenceData.strokeOpacity}));this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",(function(t){return t.referenceID+"-label"})).attr("class","bar-reference-line-label").attr("text-anchor",(function(t){return(t.referenceData.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.referenceData.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("dx",(function(t){return(t.referenceData.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("y",(function(e){return t.y(e.referenceData.referenceValue)})).attr("dy","0.3em").text((function(t){return t.referenceData.labelValue})).style("fill",(function(t){return t.referenceData.strokeColor}))}else if(this.layout==="horizontal"){this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",(function(t){return t.referenceID})).attr("class","bar-reference-line").attr("y1",0).attr("y2",this.innerPaddedHeight).attr("x1",(function(e){return t.x(e.referenceData.referenceValue)})).attr("x2",(function(e){return t.x(e.referenceData.referenceValue)})).style("stroke",(function(t){return t.referenceData.strokeColor})).style("stroke-width",(function(t){return t.referenceData.strokeWidth})).style("opacity",(function(t){return t.referenceData.strokeOpacity}));this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",(function(t){return t.referenceID+"-label"})).attr("class","bar-reference-line-label").attr("text-anchor","middle").attr("x",(function(e){return t.x(e.referenceData.referenceValue)})).attr("y",(function(e){return(e.referenceData.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dy",(function(t){return(t.referenceData.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"})).text((function(t){return t.referenceData.labelValue})).style("fill",(function(t){return t.referenceData.strokeColor}))}this.rootG.exit().remove()}};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){this.hoverFunc.emit(t);if(this.showTooltip){this.eventsTooltip({data:t,evt:AF,isToShow:true})}};t.prototype.onMouseOutHandler=function(){this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){lj(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;cj({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:undefined,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})};t.prototype.render=function(){var t="light";return r("div",{class:"o-layout is--"+this.layout+" "+t},r("div",{class:"o-layout--chart"},r("h1",{class:"visa-ui-header--4"},this.mainTitle),r("p",{class:"visa-ui-text--instructions"},this.subTitle),r("div",{class:"pareto-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("div",{id:"visa-viz-d3-pareto-container"})))};Object.defineProperty(t.prototype,"barChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{uniqueID:["idWatcher"],data:["dataWatcher"],hoverHighlight:["highlightWatcher"],clickHighlight:["highlightWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}pareto-chart .axis{font-size:12px}pareto-chart .axis text{font:0.65rem;fill:#767676}pareto-chart .axis-label{text-anchor:middle;font:1rem sans-serif}pareto-chart .axis path{stroke:#767676}pareto-chart .patero-line path{stroke:#767676}pareto-chart .patero-line .patero-highlight{fill:black}pareto-chart .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}pareto-chart .grid path{stroke-width:0;stroke:#767676}pareto-chart .y.axis path{stroke:#767676;opacity:0}pareto-chart .x.axis path{stroke:#767676}pareto-chart .o-layout--chart .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}pareto-chart .o-layout--chart .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=fj();var xj="http://www.w3.org/1999/xhtml";var Sj={svg:"http://www.w3.org/2000/svg",xhtml:xj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lj(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return Sj.hasOwnProperty(e)?{space:Sj[e],local:t}:t}function kj(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===xj&&e.documentElement.namespaceURI===xj?e.createElement(t):e.createElementNS(i,t)}}function _j(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Cj(t){var e=Lj(t);return(e.local?_j:kj)(e)}function Dj(){}function Mj(t){return t==null?Dj:function(){return this.querySelector(t)}}function Uj(t){if(typeof t!=="function")t=Mj(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new uZ(r,this._parents)}function Tj(){return[]}function Ej(t){return t==null?Tj:function(){return this.querySelectorAll(t)}}function Ij(t){if(typeof t!=="function")t=Ej(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new uZ(r,n)}function Nj(t){return function(){return this.matches(t)}}function Hj(t){if(typeof t!=="function")t=Nj(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new uZ(r,this._parents)}function Wj(t){return new Array(t.length)}function Pj(){return new uZ(this._enter||this._groups.map(Wj),this._parents)}function Gj(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}Gj.prototype={constructor:Gj,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Oj(t){return function(){return t}}var Vj="$";function Rj(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new Gj(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function Yj(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=Vj+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=Vj+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new Gj(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function zj(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?Yj:Rj,r=this._parents,n=this._groups;if(typeof t!=="function")t=Oj(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new uZ(a,r);a._enter=o;a._exit=l;return a}function Fj(){return new uZ(this._exit||this._groups.map(Wj),this._parents)}function Xj(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function Bj(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new uZ(a,this._parents)}function Kj(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function qj(t){if(!t)t=jj;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new uZ(n,this._parents).order()}function jj(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function $j(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function Zj(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function Qj(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function Jj(){var t=0;this.each((function(){++t}));return t}function t$(){return!this.node()}function e$(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function i$(t){return function(){this.removeAttribute(t)}}function r$(t){return function(){this.removeAttributeNS(t.space,t.local)}}function n$(t,e){return function(){this.setAttribute(t,e)}}function s$(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function a$(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function o$(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function l$(t,e){var i=Lj(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?r$:i$:typeof e==="function"?i.local?o$:a$:i.local?s$:n$)(i,e))}function u$(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function h$(t){return function(){this.style.removeProperty(t)}}function c$(t,e,i){return function(){this.style.setProperty(t,e,i)}}function d$(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function f$(t,e,i){return arguments.length>1?this.each((e==null?h$:typeof e==="function"?d$:c$)(t,e,i==null?"":i)):p$(this.node(),t)}function p$(t,e){return t.style.getPropertyValue(e)||u$(t).getComputedStyle(t,null).getPropertyValue(e)}function y$(t){return function(){delete this[t]}}function v$(t,e){return function(){this[t]=e}}function g$(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function b$(t,e){return arguments.length>1?this.each((e==null?y$:typeof e==="function"?g$:v$)(t,e)):this.node()[t]}function m$(t){return t.trim().split(/^|\s+/)}function A$(t){return t.classList||new w$(t)}function w$(t){this._node=t;this._names=m$(t.getAttribute("class")||"")}w$.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function x$(t,e){var i=A$(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function S$(t,e){var i=A$(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function L$(t){return function(){x$(this,t)}}function k$(t){return function(){S$(this,t)}}function _$(t,e){return function(){(e.apply(this,arguments)?x$:S$)(this,t)}}function C$(t,e){var i=m$(t+"");if(arguments.length<2){var r=A$(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?_$:e?L$:k$)(i,e))}function D$(){this.textContent=""}function M$(t){return function(){this.textContent=t}}function U$(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function T$(t){return arguments.length?this.each(t==null?D$:(typeof t==="function"?U$:M$)(t)):this.node().textContent}function E$(){this.innerHTML=""}function I$(t){return function(){this.innerHTML=t}}function N$(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function H$(t){return arguments.length?this.each(t==null?E$:(typeof t==="function"?N$:I$)(t)):this.node().innerHTML}function W$(){if(this.nextSibling)this.parentNode.appendChild(this)}function P$(){return this.each(W$)}function G$(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function O$(){return this.each(G$)}function V$(t){var e=typeof t==="function"?t:Cj(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function R$(){return null}function Y$(t,e){var i=typeof t==="function"?t:Cj(t),r=e==null?R$:typeof e==="function"?e:Mj(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function z$(){var t=this.parentNode;if(t)t.removeChild(this)}function F$(){return this.each(z$)}function X$(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function B$(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function K$(t){return this.select(t?B$:X$)}function q$(t){return arguments.length?this.property("__data__",t):this.node().__data__}var j$={};var $$=null;if(typeof document!=="undefined"){var Z$=document.documentElement;if(!("onmouseenter"in Z$)){j$={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Q$(t,e,i){t=J$(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function J$(t,e,i){return function(r){var n=$$;$$=r;try{t.call(this,this.__data__,e,i)}finally{$$=n}}}function tZ(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function eZ(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function iZ(t,e,i){var r=j$.hasOwnProperty(t.type)?Q$:J$;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function rZ(t,e,i){var r=tZ(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?iZ:eZ;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function nZ(t,e,i){var r=u$(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function sZ(t,e){return function(){return nZ(this,t,e)}}function aZ(t,e){return function(){return nZ(this,t,e.apply(this,arguments))}}function oZ(t,e){return this.each((typeof e==="function"?aZ:sZ)(t,e))}var lZ=[null];function uZ(t,e){this._groups=t;this._parents=e}function hZ(){return new uZ([[document.documentElement]],lZ)}uZ.prototype=hZ.prototype={constructor:uZ,select:Uj,selectAll:Ij,filter:Hj,data:zj,enter:Pj,exit:Fj,join:Xj,merge:Bj,order:Kj,sort:qj,call:$j,nodes:Zj,node:Qj,size:Jj,empty:t$,each:e$,attr:l$,style:f$,property:b$,classed:C$,text:T$,html:H$,raise:P$,lower:O$,append:V$,insert:Y$,remove:F$,clone:K$,datum:q$,on:rZ,dispatch:oZ};function cZ(t){return typeof t==="string"?new uZ([[document.querySelector(t)]],[document.documentElement]):new uZ([[t]],lZ)}function dZ(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function fZ(t){if(t.length===1)t=pZ(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function pZ(t){return function(e,i){return dZ(t(e),i)}}var yZ=fZ(dZ);var vZ=yZ.right;function gZ(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var bZ=Math.sqrt(50),mZ=Math.sqrt(10),AZ=Math.sqrt(2);function wZ(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=xZ(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function xZ(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=bZ?10:s>=mZ?5:s>=AZ?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=bZ?10:s>=mZ?5:s>=AZ?2:1)}function SZ(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=bZ)n*=10;else if(s>=mZ)n*=5;else if(s>=AZ)n*=2;return e<t?-n:n}function LZ(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function kZ(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function _Z(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var CZ="$";function DZ(){}DZ.prototype=MZ.prototype={constructor:DZ,has:function(t){return CZ+t in this},get:function(t){return this[CZ+t]},set:function(t,e){this[CZ+t]=e;return this},remove:function(t){var e=CZ+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===CZ)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===CZ)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===CZ)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===CZ)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===CZ)++t;return t},empty:function(){for(var t in this)if(t[0]===CZ)return false;return true},each:function(t){for(var e in this)if(e[0]===CZ)t(this[e],e.slice(1),this)}};function MZ(t,e){var i=new DZ;if(t instanceof DZ)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function UZ(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=MZ(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,TZ,EZ)},map:function(t){return s(t,0,IZ,NZ)},entries:function(t){return a(s(t,0,IZ,NZ),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function TZ(){return{}}function EZ(t,e,i){t[e]=i}function IZ(){return MZ()}function NZ(t,e,i){t.set(e,i)}var HZ=Array.prototype;var WZ=HZ.map;var PZ=HZ.slice;var GZ={name:"implicit"};function OZ(){var t=MZ(),e=[],i=[],r=GZ;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==GZ)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=MZ();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=PZ.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return OZ(e,i).unknown(r)};_Z.apply(n,arguments);return n}function VZ(){var t=OZ().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=gZ(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return VZ(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return _Z.apply(h(),arguments)}function RZ(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function YZ(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function zZ(){}var FZ=.7;var XZ=1/FZ;var BZ="\\s*([+-]?\\d+)\\s*",KZ="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",qZ="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jZ=/^#([0-9a-f]{3,8})$/,$Z=new RegExp("^rgb\\("+[BZ,BZ,BZ]+"\\)$"),ZZ=new RegExp("^rgb\\("+[qZ,qZ,qZ]+"\\)$"),QZ=new RegExp("^rgba\\("+[BZ,BZ,BZ,KZ]+"\\)$"),JZ=new RegExp("^rgba\\("+[qZ,qZ,qZ,KZ]+"\\)$"),tQ=new RegExp("^hsl\\("+[KZ,qZ,qZ]+"\\)$"),eQ=new RegExp("^hsla\\("+[KZ,qZ,qZ,KZ]+"\\)$");var iQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};RZ(zZ,aQ,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:rQ,formatHex:rQ,formatHsl:nQ,formatRgb:sQ,toString:sQ});function rQ(){return this.rgb().formatHex()}function nQ(){return vQ(this).formatHsl()}function sQ(){return this.rgb().formatRgb()}function aQ(t){var e,i;t=(t+"").trim().toLowerCase();return(e=jZ.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?oQ(e):i===3?new cQ(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?lQ(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?lQ(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$Z.exec(t))?new cQ(e[1],e[2],e[3],1):(e=ZZ.exec(t))?new cQ(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=QZ.exec(t))?lQ(e[1],e[2],e[3],e[4]):(e=JZ.exec(t))?lQ(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=tQ.exec(t))?yQ(e[1],e[2]/100,e[3]/100,1):(e=eQ.exec(t))?yQ(e[1],e[2]/100,e[3]/100,e[4]):iQ.hasOwnProperty(t)?oQ(iQ[t]):t==="transparent"?new cQ(NaN,NaN,NaN,0):null}function oQ(t){return new cQ(t>>16&255,t>>8&255,t&255,1)}function lQ(t,e,i,r){if(r<=0)t=e=i=NaN;return new cQ(t,e,i,r)}function uQ(t){if(!(t instanceof zZ))t=aQ(t);if(!t)return new cQ;t=t.rgb();return new cQ(t.r,t.g,t.b,t.opacity)}function hQ(t,e,i,r){return arguments.length===1?uQ(t):new cQ(t,e,i,r==null?1:r)}function cQ(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}RZ(cQ,hQ,YZ(zZ,{brighter:function(t){t=t==null?XZ:Math.pow(XZ,t);return new cQ(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?FZ:Math.pow(FZ,t);return new cQ(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:dQ,formatHex:dQ,formatRgb:fQ,toString:fQ}));function dQ(){return"#"+pQ(this.r)+pQ(this.g)+pQ(this.b)}function fQ(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function pQ(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function yQ(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new bQ(t,e,i,r)}function vQ(t){if(t instanceof bQ)return new bQ(t.h,t.s,t.l,t.opacity);if(!(t instanceof zZ))t=aQ(t);if(!t)return new bQ;if(t instanceof bQ)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new bQ(a,o,l,t.opacity)}function gQ(t,e,i,r){return arguments.length===1?vQ(t):new bQ(t,e,i,r==null?1:r)}function bQ(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}RZ(bQ,gQ,YZ(zZ,{brighter:function(t){t=t==null?XZ:Math.pow(XZ,t);return new bQ(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?FZ:Math.pow(FZ,t);return new bQ(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new cQ(mQ(t>=240?t-240:t+120,n,r),mQ(t,n,r),mQ(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function mQ(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function AQ(t){return function(){return t}}function wQ(t,e){return function(i){return t+i*e}}function xQ(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function SQ(t){return(t=+t)===1?LQ:function(e,i){return i-e?xQ(e,i,t):AQ(isNaN(e)?i:e)}}function LQ(t,e){var i=e-t;return i?wQ(t,i):AQ(isNaN(t)?e:t)}var kQ=function t(e){var i=SQ(e);function r(t,e){var r=i((t=hQ(t)).r,(e=hQ(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=LQ(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function _Q(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function CQ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function DQ(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=PQ(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function MQ(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function UQ(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function TQ(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=PQ(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var EQ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,IQ=new RegExp(EQ.source,"g");function NQ(t){return function(){return t}}function HQ(t){return function(e){return t(e)+""}}function WQ(t,e){var i=EQ.lastIndex=IQ.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=EQ.exec(t))&&(n=IQ.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:UQ(r,n)})}i=IQ.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?HQ(l[0].x):NQ(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function PQ(t,e){var i=typeof e,r;return e==null||i==="boolean"?AQ(e):(i==="number"?UQ:i==="string"?(r=aQ(e))?(e=r,kQ):WQ:e instanceof aQ?kQ:e instanceof Date?MQ:CQ(e)?_Q:Array.isArray(e)?DQ:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?TQ:UQ)(t,e)}function GQ(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var OQ=180/Math.PI;var VQ={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function RQ(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*OQ,skewX:Math.atan(l)*OQ,scaleX:a,scaleY:o}}var YQ,zQ,FQ,XQ;function BQ(t){if(t==="none")return VQ;if(!YQ)YQ=document.createElement("DIV"),zQ=document.documentElement,FQ=document.defaultView;YQ.style.transform=t;t=FQ.getComputedStyle(zQ.appendChild(YQ),null).getPropertyValue("transform");zQ.removeChild(YQ);t=t.slice(7,-1).split(",");return RQ(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function KQ(t){if(t==null)return VQ;if(!XQ)XQ=document.createElementNS("http://www.w3.org/2000/svg","g");XQ.setAttribute("transform",t);if(!(t=XQ.transform.baseVal.consolidate()))return VQ;t=t.matrix;return RQ(t.a,t.b,t.c,t.d,t.e,t.f)}function qQ(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:UQ(t,n)},{i:l-2,x:UQ(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:UQ(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:UQ(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:UQ(t,i)},{i:o-2,x:UQ(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var jQ=qQ(BQ,"px, ","px)","deg)");var $Q=qQ(KQ,", ",")",")");function ZQ(t){return function(){return t}}function QQ(t){return+t}var JQ=[0,1];function tJ(t){return t}function eJ(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:ZQ(isNaN(e)?NaN:.5)}function iJ(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function rJ(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=eJ(n,r),s=i(a,s);else r=eJ(r,n),s=i(s,a);return function(t){return s(r(t))}}function nJ(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=eJ(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=vZ(t,e,1,r)-1;return s[i](n[i](e))}}function sJ(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function aJ(){var t=JQ,e=JQ,i=PQ,r,n,s,a=tJ,o,l,u;function h(){o=Math.min(t.length,e.length)>2?nJ:rJ;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),UQ)))(i)))};c.domain=function(e){return arguments.length?(t=WZ.call(e,QQ),a===tJ||(a=iJ(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=PZ.call(t),h()):e.slice()};c.rangeRound=function(t){return e=PZ.call(t),i=GQ,h()};c.clamp=function(e){return arguments.length?(a=e?iJ(t):tJ,c):a!==tJ};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function oJ(t,e){return aJ()(t,e)}function lJ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function uJ(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function hJ(t){return t=uJ(Math.abs(t)),t?t[1]:NaN}function cJ(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function dJ(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var fJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pJ(t){if(!(e=fJ.exec(t)))throw new Error("invalid format: "+t);var e;return new yJ({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}pJ.prototype=yJ.prototype;function yJ(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}yJ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vJ(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var gJ;function bJ(t,e){var i=uJ(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(gJ=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+uJ(t,Math.max(0,e+s-1))[0]}function mJ(t,e){var i=uJ(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var AJ={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:lJ,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return mJ(t*100,e)},r:mJ,s:bJ,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function wJ(t){return t}var xJ=Array.prototype.map,SJ=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function LJ(t){var e=t.grouping===undefined||t.thousands===undefined?wJ:cJ(xJ.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?wJ:dJ(xJ.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=pJ(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!AJ[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=AJ[b],x=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(t){var i=m,r=A,a,d,S;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var L=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=vJ(t);if(L&&+t===0&&c!=="+")L=false;i=(L?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?SJ[8+gJ/3]:"")+r+(L&&c==="("?")":"");if(x){a=-1,d=t.length;while(++a<d){if(S=t.charCodeAt(a),48>S||S>57){r=(S===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var k=i.length+t.length+r.length,_=k<p?new Array(p-k+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,k=_.length>>1)+i+t+r+_.slice(k);break;default:t=_+i+t+r;break}return s(t)}S.toString=function(){return t+""};return S}function h(t,e){var i=u((t=pJ(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(hJ(e)/3)))*3,n=Math.pow(10,-r),s=SJ[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var kJ;var _J;var CJ;DJ({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function DJ(t){kJ=LJ(t);_J=kJ.format;CJ=kJ.formatPrefix;return kJ}function MJ(t){return Math.max(0,-hJ(Math.abs(t)))}function UJ(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hJ(e)/3)))*3-hJ(Math.abs(t)))}function TJ(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,hJ(e)-hJ(t))+1}function EJ(t,e,i,r){var n=SZ(t,e,i),s;r=pJ(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=UJ(n,a)))r.precision=s;return CJ(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=TJ(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=MJ(n)))r.precision=s-(r.type==="%")*2;break}}return _J(r)}function IJ(t){var e=t.domain;t.ticks=function(t){var i=e();return wZ(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return EJ(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=xZ(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=xZ(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=xZ(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function NJ(){var t=oJ(tJ,tJ);t.copy=function(){return sJ(t,NJ())};_Z.apply(t,arguments);return IJ(t)}function HJ(t,e){t=t.slice();var i=0,r=t.length-1,n=t[i],s=t[r],a;if(s<n){a=i,i=r,r=a;a=n,n=s,s=a}t[i]=e.floor(n);t[r]=e.ceil(s);return t}var WJ=new Date,PJ=new Date;function GJ(t,e,i,r){function n(e){return t(e=arguments.length===0?new Date:new Date(+e)),e}n.floor=function(e){return t(e=new Date(+e)),e};n.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i};n.round=function(t){var e=n(t),i=n.ceil(t);return t-e<i-t?e:i};n.offset=function(t,i){return e(t=new Date(+t),i==null?1:Math.floor(i)),t};n.range=function(i,r,s){var a=[],o;i=n.ceil(i);s=s==null?1:Math.floor(s);if(!(i<r)||!(s>0))return a;do{a.push(o=new Date(+i)),e(i,s),t(i)}while(o<i&&i<r);return a};n.filter=function(i){return GJ((function(e){if(e>=e)while(t(e),!i(e))e.setTime(e-1)}),(function(t,r){if(t>=t){if(r<0)while(++r<=0){while(e(t,-1),!i(t)){}}else while(--r>=0){while(e(t,+1),!i(t)){}}}}))};if(i){n.count=function(e,r){WJ.setTime(+e),PJ.setTime(+r);t(WJ),t(PJ);return Math.floor(i(WJ,PJ))};n.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?n:n.filter(r?function(e){return r(e)%t===0}:function(e){return n.count(0,e)%t===0})}}return n}var OJ=GJ((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));OJ.every=function(t){t=Math.floor(t);if(!isFinite(t)||!(t>0))return null;if(!(t>1))return OJ;return GJ((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,i){e.setTime(+e+i*t)}),(function(e,i){return(i-e)/t}))};var VJ=1e3;var RJ=6e4;var YJ=36e5;var zJ=864e5;var FJ=6048e5;var XJ=GJ((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*VJ)}),(function(t,e){return(e-t)/VJ}),(function(t){return t.getUTCSeconds()}));var BJ=GJ((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*VJ)}),(function(t,e){t.setTime(+t+e*RJ)}),(function(t,e){return(e-t)/RJ}),(function(t){return t.getMinutes()}));var KJ=GJ((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*VJ-t.getMinutes()*RJ)}),(function(t,e){t.setTime(+t+e*YJ)}),(function(t,e){return(e-t)/YJ}),(function(t){return t.getHours()}));var qJ=GJ((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*RJ)/zJ}),(function(t){return t.getDate()-1}));function jJ(t){return GJ((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e*7)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*RJ)/FJ}))}var $J=jJ(0);var ZJ=jJ(1);var QJ=jJ(2);var JJ=jJ(3);var t0=jJ(4);var e0=jJ(5);var i0=jJ(6);var r0=GJ((function(t){t.setDate(1);t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12}),(function(t){return t.getMonth()}));var n0=GJ((function(t){t.setMonth(0,1);t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));n0.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:GJ((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t);e.setMonth(0,1);e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)}))};var s0=GJ((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/zJ}),(function(t){return t.getUTCDate()-1}));function a0(t){return GJ((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e*7)}),(function(t,e){return(e-t)/FJ}))}var o0=a0(0);var l0=a0(1);var u0=a0(2);var h0=a0(3);var c0=a0(4);var d0=a0(5);var f0=a0(6);var p0=GJ((function(t){t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));p0.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:GJ((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)}),(function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i*t)}))};function y0(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);e.setFullYear(t.y);return e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function v0(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));e.setUTCFullYear(t.y);return e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function g0(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function b0(t){var e=t.dateTime,i=t.date,r=t.time,n=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths;var u=k0(n),h=_0(n),c=k0(s),d=_0(s),f=k0(a),p=_0(a),y=k0(o),v=_0(o),g=k0(l),b=_0(l);var m={a:I,A:N,b:H,B:W,c:null,d:K0,e:K0,f:Q0,g:u1,G:c1,H:q0,I:j0,j:$0,L:Z0,m:J0,M:t1,p:P,q:G,Q:N1,s:H1,S:e1,u:i1,U:r1,V:s1,w:a1,W:o1,x:null,X:null,y:l1,Y:h1,Z:d1,"%":I1};var A={a:O,A:V,b:R,B:Y,c:null,d:f1,e:f1,f:b1,g:M1,G:T1,H:p1,I:y1,j:v1,L:g1,m:m1,M:A1,p:z,q:F,Q:N1,s:H1,S:w1,u:x1,U:S1,V:k1,w:_1,W:C1,x:null,X:null,y:D1,Y:U1,Z:E1,"%":I1};var w={a:_,A:C,b:D,B:M,c:U,d:P0,e:P0,f:z0,g:I0,G:E0,H:O0,I:O0,j:G0,L:Y0,m:W0,M:V0,p:k,q:H0,Q:X0,s:B0,S:R0,u:D0,U:M0,V:U0,w:C0,W:T0,x:T,X:E,y:I0,Y:E0,Z:N0,"%":F0};m.x=x(i,m);m.X=x(r,m);m.c=x(e,m);A.x=x(i,A);A.X=x(r,A);A.c=x(e,A);function x(t,e){return function(i){var r=[],n=-1,s=0,a=t.length,o,l,u;if(!(i instanceof Date))i=new Date(+i);while(++n<a){if(t.charCodeAt(n)===37){r.push(t.slice(s,n));if((l=m0[o=t.charAt(++n)])!=null)o=t.charAt(++n);else l=o==="e"?" ":"0";if(u=e[o])o=u(i,l);r.push(o);s=n+1}}r.push(t.slice(s,n));return r.join("")}}function S(t,e){return function(i){var r=g0(1900,undefined,1),n=L(r,t,i+="",0),s,a;if(n!=i.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(r.s*1e3+("L"in r?r.L:0));if(e&&!("Z"in r))r.Z=0;if("p"in r)r.H=r.H%12+r.p*12;if(r.m===undefined)r.m="q"in r?r.q:0;if("V"in r){if(r.V<1||r.V>53)return null;if(!("w"in r))r.w=1;if("Z"in r){s=v0(g0(r.y,0,1)),a=s.getUTCDay();s=a>4||a===0?l0.ceil(s):l0(s);s=s0.offset(s,(r.V-1)*7);r.y=s.getUTCFullYear();r.m=s.getUTCMonth();r.d=s.getUTCDate()+(r.w+6)%7}else{s=y0(g0(r.y,0,1)),a=s.getDay();s=a>4||a===0?ZJ.ceil(s):ZJ(s);s=qJ.offset(s,(r.V-1)*7);r.y=s.getFullYear();r.m=s.getMonth();r.d=s.getDate()+(r.w+6)%7}}else if("W"in r||"U"in r){if(!("w"in r))r.w="u"in r?r.u%7:"W"in r?1:0;a="Z"in r?v0(g0(r.y,0,1)).getUTCDay():y0(g0(r.y,0,1)).getDay();r.m=0;r.d="W"in r?(r.w+6)%7+r.W*7-(a+5)%7:r.w+r.U*7-(a+6)%7}if("Z"in r){r.H+=r.Z/100|0;r.M+=r.Z%100;return v0(r)}return y0(r)}}function L(t,e,i,r){var n=0,s=e.length,a=i.length,o,l;while(n<s){if(r>=a)return-1;o=e.charCodeAt(n++);if(o===37){o=e.charAt(n++);l=w[o in m0?e.charAt(n++):o];if(!l||(r=l(t,i,r))<0)return-1}else if(o!=i.charCodeAt(r++)){return-1}}return r}function k(t,e,i){var r=u.exec(e.slice(i));return r?(t.p=h[r[0].toLowerCase()],i+r[0].length):-1}function _(t,e,i){var r=f.exec(e.slice(i));return r?(t.w=p[r[0].toLowerCase()],i+r[0].length):-1}function C(t,e,i){var r=c.exec(e.slice(i));return r?(t.w=d[r[0].toLowerCase()],i+r[0].length):-1}function D(t,e,i){var r=g.exec(e.slice(i));return r?(t.m=b[r[0].toLowerCase()],i+r[0].length):-1}function M(t,e,i){var r=y.exec(e.slice(i));return r?(t.m=v[r[0].toLowerCase()],i+r[0].length):-1}function U(t,i,r){return L(t,e,i,r)}function T(t,e,r){return L(t,i,e,r)}function E(t,e,i){return L(t,r,e,i)}function I(t){return a[t.getDay()]}function N(t){return s[t.getDay()]}function H(t){return l[t.getMonth()]}function W(t){return o[t.getMonth()]}function P(t){return n[+(t.getHours()>=12)]}function G(t){return 1+~~(t.getMonth()/3)}function O(t){return a[t.getUTCDay()]}function V(t){return s[t.getUTCDay()]}function R(t){return l[t.getUTCMonth()]}function Y(t){return o[t.getUTCMonth()]}function z(t){return n[+(t.getUTCHours()>=12)]}function F(t){return 1+~~(t.getUTCMonth()/3)}return{format:function(t){var e=x(t+="",m);e.toString=function(){return t};return e},parse:function(t){var e=S(t+="",false);e.toString=function(){return t};return e},utcFormat:function(t){var e=x(t+="",A);e.toString=function(){return t};return e},utcParse:function(t){var e=S(t+="",true);e.toString=function(){return t};return e}}}var m0={"-":"",_:" ",0:"0"},A0=/^\s*\d+/,w0=/^%/,x0=/[\\^$*+?|[\]().{}]/g;function S0(t,e,i){var r=t<0?"-":"",n=(r?-t:t)+"",s=n.length;return r+(s<i?new Array(i-s+1).join(e)+n:n)}function L0(t){return t.replace(x0,"\\$&")}function k0(t){return new RegExp("^(?:"+t.map(L0).join("|")+")","i")}function _0(t){var e={},i=-1,r=t.length;while(++i<r)e[t[i].toLowerCase()]=i;return e}function C0(t,e,i){var r=A0.exec(e.slice(i,i+1));return r?(t.w=+r[0],i+r[0].length):-1}function D0(t,e,i){var r=A0.exec(e.slice(i,i+1));return r?(t.u=+r[0],i+r[0].length):-1}function M0(t,e,i){var r=A0.exec(e.slice(i,i+2));return r?(t.U=+r[0],i+r[0].length):-1}function U0(t,e,i){var r=A0.exec(e.slice(i,i+2));return r?(t.V=+r[0],i+r[0].length):-1}function T0(t,e,i){var r=A0.exec(e.slice(i,i+2));return r?(t.W=+r[0],i+r[0].length):-1}function E0(t,e,i){var r=A0.exec(e.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1}function I0(t,e,i){var r=A0.exec(e.slice(i,i+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function N0(t,e,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function H0(t,e,i){var r=A0.exec(e.slice(i,i+1));return r?(t.q=r[0]*3-3,i+r[0].length):-1}function W0(t,e,i){var r=A0.exec(e.slice(i,i+2));return r?(t.m=r[0]-1,i+r[0].length):-1}function P0(t,e,i){var r=A0.exec(e.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1}function G0(t,e,i){var r=A0.exec(e.slice(i,i+3));return r?(t.m=0,t.d=+r[0],i+r[0].length):-1}function O0(t,e,i){var r=A0.exec(e.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1}function V0(t,e,i){var r=A0.exec(e.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1}function R0(t,e,i){var r=A0.exec(e.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1}function Y0(t,e,i){var r=A0.exec(e.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1}function z0(t,e,i){var r=A0.exec(e.slice(i,i+6));return r?(t.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function F0(t,e,i){var r=w0.exec(e.slice(i,i+1));return r?i+r[0].length:-1}function X0(t,e,i){var r=A0.exec(e.slice(i));return r?(t.Q=+r[0],i+r[0].length):-1}function B0(t,e,i){var r=A0.exec(e.slice(i));return r?(t.s=+r[0],i+r[0].length):-1}function K0(t,e){return S0(t.getDate(),e,2)}function q0(t,e){return S0(t.getHours(),e,2)}function j0(t,e){return S0(t.getHours()%12||12,e,2)}function $0(t,e){return S0(1+qJ.count(n0(t),t),e,3)}function Z0(t,e){return S0(t.getMilliseconds(),e,3)}function Q0(t,e){return Z0(t,e)+"000"}function J0(t,e){return S0(t.getMonth()+1,e,2)}function t1(t,e){return S0(t.getMinutes(),e,2)}function e1(t,e){return S0(t.getSeconds(),e,2)}function i1(t){var e=t.getDay();return e===0?7:e}function r1(t,e){return S0($J.count(n0(t)-1,t),e,2)}function n1(t){var e=t.getDay();return e>=4||e===0?t0(t):t0.ceil(t)}function s1(t,e){t=n1(t);return S0(t0.count(n0(t),t)+(n0(t).getDay()===4),e,2)}function a1(t){return t.getDay()}function o1(t,e){return S0(ZJ.count(n0(t)-1,t),e,2)}function l1(t,e){return S0(t.getFullYear()%100,e,2)}function u1(t,e){t=n1(t);return S0(t.getFullYear()%100,e,2)}function h1(t,e){return S0(t.getFullYear()%1e4,e,4)}function c1(t,e){var i=t.getDay();t=i>=4||i===0?t0(t):t0.ceil(t);return S0(t.getFullYear()%1e4,e,4)}function d1(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+S0(e/60|0,"0",2)+S0(e%60,"0",2)}function f1(t,e){return S0(t.getUTCDate(),e,2)}function p1(t,e){return S0(t.getUTCHours(),e,2)}function y1(t,e){return S0(t.getUTCHours()%12||12,e,2)}function v1(t,e){return S0(1+s0.count(p0(t),t),e,3)}function g1(t,e){return S0(t.getUTCMilliseconds(),e,3)}function b1(t,e){return g1(t,e)+"000"}function m1(t,e){return S0(t.getUTCMonth()+1,e,2)}function A1(t,e){return S0(t.getUTCMinutes(),e,2)}function w1(t,e){return S0(t.getUTCSeconds(),e,2)}function x1(t){var e=t.getUTCDay();return e===0?7:e}function S1(t,e){return S0(o0.count(p0(t)-1,t),e,2)}function L1(t){var e=t.getUTCDay();return e>=4||e===0?c0(t):c0.ceil(t)}function k1(t,e){t=L1(t);return S0(c0.count(p0(t),t)+(p0(t).getUTCDay()===4),e,2)}function _1(t){return t.getUTCDay()}function C1(t,e){return S0(l0.count(p0(t)-1,t),e,2)}function D1(t,e){return S0(t.getUTCFullYear()%100,e,2)}function M1(t,e){t=L1(t);return S0(t.getUTCFullYear()%100,e,2)}function U1(t,e){return S0(t.getUTCFullYear()%1e4,e,4)}function T1(t,e){var i=t.getUTCDay();t=i>=4||i===0?c0(t):c0.ceil(t);return S0(t.getUTCFullYear()%1e4,e,4)}function E1(){return"+0000"}function I1(){return"%"}function N1(t){return+t}function H1(t){return Math.floor(+t/1e3)}var W1;var P1;G1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function G1(t){W1=b0(t);P1=W1.format;return W1}var O1=1e3,V1=O1*60,R1=V1*60,Y1=R1*24,z1=Y1*7,F1=Y1*30,X1=Y1*365;function B1(t){return new Date(t)}function K1(t){return t instanceof Date?+t:+new Date(+t)}function q1(t,e,i,r,n,s,a,o,l){var u=oJ(tJ,tJ),h=u.invert,c=u.domain;var d=l(".%L"),f=l(":%S"),p=l("%I:%M"),y=l("%I %p"),v=l("%a %d"),g=l("%b %d"),b=l("%B"),m=l("%Y");var A=[[a,1,O1],[a,5,5*O1],[a,15,15*O1],[a,30,30*O1],[s,1,V1],[s,5,5*V1],[s,15,15*V1],[s,30,30*V1],[n,1,R1],[n,3,3*R1],[n,6,6*R1],[n,12,12*R1],[r,1,Y1],[r,2,2*Y1],[i,1,z1],[e,1,F1],[e,3,3*F1],[t,1,X1]];function w(o){return(a(o)<o?d:s(o)<o?f:n(o)<o?p:r(o)<o?y:e(o)<o?i(o)<o?v:g:t(o)<o?b:m)(o)}function x(e,i,r,n){if(e==null)e=10;if(typeof e==="number"){var s=Math.abs(r-i)/e,a=fZ((function(t){return t[2]})).right(A,s);if(a===A.length){n=SZ(i/X1,r/X1,e);e=t}else if(a){a=A[s/A[a-1][2]<A[a][2]/s?a-1:a];n=a[1];e=a[0]}else{n=Math.max(SZ(i,r,e),1);e=o}}return n==null?e:e.every(n)}u.invert=function(t){return new Date(h(t))};u.domain=function(t){return arguments.length?c(WZ.call(t,K1)):c().map(B1)};u.ticks=function(t,e){var i=c(),r=i[0],n=i[i.length-1],s=n<r,a;if(s)a=r,r=n,n=a;a=x(t,r,n,e);a=a?a.range(r,n+1):[];return s?a.reverse():a};u.tickFormat=function(t,e){return e==null?w:l(e)};u.nice=function(t,e){var i=c();return(t=x(t,i[0],i[i.length-1],e))?c(HJ(i,t)):u};u.copy=function(){return sJ(u,q1(t,e,i,r,n,s,a,o,l))};return u}function j1(){return _Z.apply(q1(n0,r0,$J,qJ,KJ,BJ,XJ,OJ,P1).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $1(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function Z1(t){return 1-Math.sqrt(1-t*t)}var Q1={value:function(){}};function J1(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new t2(i)}function t2(t){this._=t}function e2(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}t2.prototype=J1.prototype={constructor:t2,on:function(t,e){var i=this._,r=e2(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=i2(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=r2(i[n],t.name,e);else if(e==null)for(n in i)i[n]=r2(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new t2(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function i2(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function r2(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=Q1,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var n2=0,s2=0,a2=0,o2=1e3,l2,u2,h2=0,c2=0,d2=0,f2=typeof performance==="object"&&performance.now?performance:Date,p2=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function y2(){return c2||(p2(v2),c2=f2.now()+d2)}function v2(){c2=0}function g2(){this._call=this._time=this._next=null}g2.prototype=b2.prototype={constructor:g2,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?y2():+i)+(e==null?0:+e);if(!this._next&&u2!==this){if(u2)u2._next=this;else l2=this;u2=this}this._call=t;this._time=i;S2()},stop:function(){if(this._call){this._call=null;this._time=Infinity;S2()}}};function b2(t,e,i){var r=new g2;r.restart(t,e,i);return r}function m2(){y2();++n2;var t=l2,e;while(t){if((e=c2-t._time)>=0)t._call.call(null,e);t=t._next}--n2}function A2(){c2=(h2=f2.now())+d2;n2=s2=0;try{m2()}finally{n2=0;x2();c2=0}}function w2(){var t=f2.now(),e=t-h2;if(e>o2)d2-=e,h2=t}function x2(){var t,e=l2,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:l2=i}}u2=t;S2(r)}function S2(t){if(n2)return;if(s2)s2=clearTimeout(s2);var e=t-c2;if(e>24){if(t<Infinity)s2=setTimeout(A2,t-f2.now()-d2);if(a2)a2=clearInterval(a2)}else{if(!a2)h2=f2.now(),a2=setInterval(w2,o2);n2=1,p2(A2)}}function L2(t,e,i){var r=new g2;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var k2=J1("start","end","interrupt");var _2=[];var C2=0;var D2=1;var M2=2;var U2=3;var T2=4;var E2=5;var I2=6;function N2(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;G2(t,i,{name:e,index:r,group:n,on:k2,tween:_2,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:C2})}function H2(t,e){var i=P2(t,e);if(i.state>C2)throw new Error("too late; already scheduled");return i}function W2(t,e){var i=P2(t,e);if(i.state>M2)throw new Error("too late; already started");return i}function P2(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function G2(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=b2(s,0,i.time);function s(t){i.state=D2;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==D2)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===U2)return L2(a);if(d.state===T2){d.state=I2;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=I2;d.timer.stop();delete r[u]}}L2((function(){if(i.state===U2){i.state=T2;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=M2;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==M2)return;i.state=U2;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=E2,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===E2){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=I2;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function O2(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>M2&&r.state<E2;r.state=I2;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function V2(t){return this.each((function(){O2(this,t)}))}function R2(t,e){var i,r;return function(){var n=W2(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function Y2(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=W2(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function z2(t,e){var i=this._id;t+="";if(arguments.length<2){var r=P2(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?R2:Y2)(i,t,e))}function F2(t,e,i){var r=t._id;t.each((function(){var t=W2(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return P2(t,r).value[e]}}function X2(t,e){var i;return(typeof e==="number"?UQ:e instanceof aQ?kQ:(i=aQ(e))?(e=i,kQ):WQ)(t,e)}function B2(t){return function(){this.removeAttribute(t)}}function K2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function q2(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function j2(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function $2(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Z2(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Q2(t,e){var i=Lj(t),r=i==="transform"?$Q:X2;return this.attrTween(t,typeof e==="function"?(i.local?Z2:$2)(i,r,F2(this,"attr."+t,e)):e==null?(i.local?K2:B2)(i):(i.local?j2:q2)(i,r,e+""))}function J2(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function t5(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function e5(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=Lj(t);return this.tween(i,(r.local?J2:t5)(r,e))}function i5(t,e){return function(){H2(this,t).delay=+e.apply(this,arguments)}}function r5(t,e){return e=+e,function(){H2(this,t).delay=e}}function n5(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?i5:r5)(e,t)):P2(this.node(),e).delay}function s5(t,e){return function(){W2(this,t).duration=+e.apply(this,arguments)}}function a5(t,e){return e=+e,function(){W2(this,t).duration=e}}function o5(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?s5:a5)(e,t)):P2(this.node(),e).duration}function l5(t,e){if(typeof e!=="function")throw new Error;return function(){W2(this,t).ease=e}}function u5(t){var e=this._id;return arguments.length?this.each(l5(e,t)):P2(this.node(),e).ease}function h5(t){if(typeof t!=="function")t=Nj(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new I5(r,this._parents,this._name,this._id)}function c5(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new I5(a,this._parents,this._name,this._id)}function d5(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function f5(t,e,i){var r,n,s=d5(e)?H2:W2;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function p5(t,e){var i=this._id;return arguments.length<2?P2(this.node(),i).on.on(t):this.each(f5(i,t,e))}function y5(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function v5(){return this.on("end.remove",y5(this._id))}function g5(t){var e=this._name,i=this._id;if(typeof t!=="function")t=Mj(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;N2(u[d],e,i,d,u,P2(h,i))}}}return new I5(s,this._parents,e,i)}function b5(t){var e=this._name,i=this._id;if(typeof t!=="function")t=Ej(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=P2(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){N2(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new I5(s,a,e,i)}var m5=hZ.prototype.constructor;function A5(){return new m5(this._groups,this._parents)}function w5(t,e){var i,r,n;return function(){var s=p$(this,t),a=(this.style.removeProperty(t),p$(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function x5(t){return function(){this.style.removeProperty(t)}}function S5(t,e,i){var r,n;return function(){var s=p$(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function L5(t,e,i){var r,n,s;return function(){var a=p$(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),p$(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function k5(t,e,i){var r=(t+="")==="transform"?jQ:X2;return e==null?this.styleTween(t,w5(t,r)).on("end.style."+t,x5(t)):this.styleTween(t,typeof e==="function"?L5(t,r,F2(this,"style."+t,e)):S5(t,r,e+""),i)}function _5(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function C5(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,_5(t,e,i==null?"":i))}function D5(t){return function(){this.textContent=t}}function M5(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function U5(t){return this.tween("text",typeof t==="function"?M5(F2(this,"text",t)):D5(t==null?"":t+""))}function T5(){var t=this._name,e=this._id,i=H5();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=P2(l,e);N2(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new I5(r,this._parents,t,i)}var E5=0;function I5(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function N5(t){return hZ().transition(t)}function H5(){return++E5}var W5=hZ.prototype;I5.prototype=N5.prototype={constructor:I5,select:g5,selectAll:b5,filter:h5,merge:c5,selection:A5,transition:T5,call:W5.call,nodes:W5.nodes,node:W5.node,size:W5.size,empty:W5.empty,each:W5.each,on:p5,attr:Q2,attrTween:e5,style:k5,styleTween:C5,text:U5,remove:v5,tween:z2,delay:n5,duration:o5,ease:u5};var P5={time:null,delay:0,duration:250,ease:$1};function G5(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return P5.time=y2(),P5}}return i}function O5(t){var e,i;if(t instanceof I5){e=t._id,t=t._name}else{e=H5(),(i=P5).time=y2(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){N2(l,t,e,u,a,i||G5(l,e))}}}return new I5(r,this._parents,t,e)}hZ.prototype.interrupt=V2;hZ.prototype.transition=O5;var V5=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var R5=new Uint8Array(16);function Y5(){if(!V5){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return V5(R5)}var z5=[];for(var F5=0;F5<256;++F5){z5[F5]=(F5+256).toString(16).substr(1)}function X5(t,e){var i=e||0;var r=z5;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function B5(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||Y5)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||X5(n)}var K5=s.propDefaultValues;var q5=function(){function t(){}return t}();q5.mainTitle="Stacked Bar Chart Title";q5.subTitle="This is the stacked bar chart's subtitle";q5.height=280;q5.width=700;q5.margin={top:400*.01,bottom:400*.01,right:400*.01,left:400*.01};q5.padding={top:20,bottom:50,right:50,left:50};q5.normalized=false;q5.showTotalValue=true;q5.showZeroLabels=false;q5.ordinalAccessor="label";q5.valueAccessor="value";q5.groupAccessor="item";q5.layout=K5.layout;q5.accessibility=K5.accessibility;q5.animationConfig=K5.animationConfig;q5.highestHeadingLevel=K5.highestHeadingLevel;q5.sortOrder=K5.sortOrder;q5.xAxis=K5.xAxis;q5.yAxis=K5.yAxis;q5.wrapLabel=K5.wrapLabel;q5.colorPalette=K5.colorPaletteCategorical;q5.hoverStyle=K5.hoverStyle;q5.clickStyle=K5.clickStyle;q5.referenceStyle=K5.referenceStyle;q5.cursor=K5.cursor;q5.roundedCorner=K5.roundedCorner;q5.barIntervalRatio=K5.barIntervalRatio;q5.hoverOpacity=K5.hoverOpacity;q5.dataLabel=K5.dataLabelMiddle;q5.legend=K5.categoryLegend;q5.tooltipLabel=K5.tooltipLabel;q5.showTooltip=K5.showTooltip;q5.suppressEvents=K5.suppressEvents;q5.referenceLines=K5.referenceLines;q5.annotations=K5.annotations;q5.clickHighlight=K5.clickHighlight;var j5=s.getBrowser,$5=s.verifyTextHasSpace,Z5=s.checkAttributeTransitions,Q5=s.createTextStrokeFilter,J5=s.drawHoverStrokes,t6=s.removeHoverStrokes,e6=s.buildStrokes,i6=s.convertColorsToTextures,r6=s.findTagLevel,n6=s.prepareRenderChange,s6=s.initializeDescriptionRoot,a6=s.initializeElementAccess,o6=s.setElementFocusHandler,l6=s.setElementAccessID,u6=s.setAccessibilityController,h6=s.hideNonessentialGroups,c6=s.setAccessTitle,d6=s.setAccessSubtitle,f6=s.setAccessLongDescription,p6=s.setAccessExecutiveSummary,y6=s.setAccessPurpose,v6=s.setAccessContext,g6=s.setAccessStatistics,b6=s.setAccessChartCounts,m6=s.setAccessXAxis,A6=s.setAccessYAxis,w6=s.setAccessStructure,x6=s.setAccessAnnotation,S6=s.retainAccessFocus,L6=s.checkAccessFocus,k6=s.setElementInteractionAccessState,_6=s.setAccessibilityDescriptionWidth,C6=s.autoTextColor,D6=s.annotate,M6=s.chartAccessors,U6=s.checkInteraction,T6=s.checkClicked,E6=s.checkHovered,I6=s.convertVisaColor,N6=s.drawAxis,H6=s.drawGrid,W6=s.drawLegend,P6=s.setLegendInteractionState,G6=s.drawTooltip,O6=s.formatStats,V6=s.formatDate,R6=s.formatDataLabel,Y6=s.getPadding,z6=s.getColors,F6=s.getLicenses,X6=s.getScopedData,B6=s.initTooltipStyle,K6=s.overrideTitleTooltip,q6=s.placeDataLabels,j6=s.transitionEndAll,$6=s.scopeDataKeys,Z6=s.visaColors,Q6=s.validateAccessibilityProps,J6=s.roundTo,t3=s.resolveLabelCollision;var e3=t("stacked_bar_chart",function(){function t(t){var r=this;e(this,t);this.mainTitle=q5.mainTitle;this.subTitle=q5.subTitle;this.height=q5.height;this.width=q5.width;this.layout=q5.layout;this.highestHeadingLevel=q5.highestHeadingLevel;this.margin=q5.margin;this.padding=q5.padding;this.ordinalAccessor=q5.ordinalAccessor;this.valueAccessor=q5.valueAccessor;this.groupAccessor=q5.groupAccessor;this.sortOrder=q5.sortOrder;this.xAxis=q5.xAxis;this.yAxis=q5.yAxis;this.wrapLabel=q5.wrapLabel;this.normalized=q5.normalized;this.colorPalette=q5.colorPalette;this.hoverStyle=q5.hoverStyle;this.clickStyle=q5.clickStyle;this.referenceStyle=q5.referenceStyle;this.cursor=q5.cursor;this.roundedCorner=q5.roundedCorner;this.barIntervalRatio=q5.barIntervalRatio;this.hoverOpacity=q5.hoverOpacity;this.animationConfig=q5.animationConfig;this.dataLabel=q5.dataLabel;this.showTotalValue=q5.showTotalValue;this.showTooltip=q5.showTooltip;this.tooltipLabel=q5.tooltipLabel;this.accessibility=q5.accessibility;this.legend=q5.legend;this.annotations=q5.annotations;this.showZeroLabels=q5.showZeroLabels;this.referenceLines=q5.referenceLines;this.suppressEvents=q5.suppressEvents;this.clickHighlight=q5.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.series=[];this.extent=[];this.datakeys=[];this.updated=true;this.shouldValidateInteractionKeys=false;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateTableData=false;this.shouldSetColors=false;this.shouldValidateAxes=false;this.shouldValidateClickHighlight=false;this.shouldUpdateScales=false;this.shouldUpdateAnnotations=false;this.shouldResetRoot=false;this.shouldEnterUpdateExit=false;this.shouldSetGlobalSelections=false;this.shouldSetTestingAttributes=false;this.shouldUpdateGeometries=false;this.shouldCheckValueAxis=false;this.shouldCheckLabelAxis=false;this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldUpdateBaseline=false;this.shouldSetSelectionClass=false;this.shouldUpdateCursor=false;this.shouldUpdateCorners=false;this.shouldUpdateLegendData=false;this.shouldValidateLabelPlacement=false;this.shouldValidateDataLabelAccessor=false;this.shouldUpdateLegend=false;this.shouldUpdateLegendInteractivity=false;this.shouldUpdateReferenceLines=false;this.shouldDrawInteractionState=false;this.shouldBindInteractivity=false;this.shouldSetLabelOpacity=false;this.shouldUpdateLabels=false;this.shouldUpdateTotalLabels=false;this.shouldCheckLabelColor=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetTextures=false;this.shouldSetStrokes=false;this.isSafari=j5()==="Safari";this.strokes={};this.textStrokes={};this.topLevel="h2";this.bottomLevel="p";this.textTreatmentHandler=function(t,e,i){var n=cZ(i[e]);var s=r.clickHighlight&&r.clickHighlight.length>0&&T6(t,r.clickHighlight,r.innerInteractionKeys)&&r.clickStyle.color?Z6[r.clickStyle.color]||r.clickStyle.color:r.hoverHighlight&&E6(t,r.hoverHighlight,r.innerInteractionKeys)&&r.hoverStyle.color?Z6[r.hoverStyle.color]||r.hoverStyle.color:r.preparedColors[e];var a=C6(s);if(!n.classed("textIsMoving")){var o=r.textStrokes[s];if(o!==n.attr("filter")){if(r.isSafari){n.attr("filter",null);setTimeout((function(){n.attr("filter",o)}),0)}else{n.attr("filter",o)}}}else{n.attr("filter",null)}return a};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldSetColors=true;this.shouldSetTextures=true;this.shouldDrawInteractionState=true;this.shouldUpdateScales=true;this.shouldUpdateTableData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLegendData=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateLabels=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetStrokes=true};t.prototype.idWatcher=function(t,e){this.chartID=t;this.stackedBarChartEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldSetTextures=true;this.shouldCheckLabelColor=true;this.shouldDrawInteractionState=true;this.shouldSetStrokes=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetLabelOpacity=true};t.prototype.layoutWatcher=function(t,e){this.interpolating=false;this.shouldValidateLabelPlacement=true;this.shouldUpdateScales=true;this.shouldValidateAxes=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetLabelOpacity=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldUpdateLegendData=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;this.shouldCheckValueAxis=true};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateTableData=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;this.shouldSetGlobalSelections=true;this.shouldCheckValueAxis=true};t.prototype.groupAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldCheckLabelAxis=true;this.shouldUpdateBaseline=true;this.shouldUpdateReferenceLines=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.sortWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldCheckLabelAxis=true};t.prototype.xAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXAxis=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateXGrid=true}};t.prototype.yAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYAxis=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateYGrid=true}};t.prototype.wrapLabelWatcher=function(t,e){this.shouldCheckLabelAxis=true};t.prototype.normalizedWatcher=function(t,e){this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldCheckValueAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateTableData=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true};t.prototype.paletteWatcher=function(t,e){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetSelectionClass=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true};t.prototype.cornerWatcher=function(t,e){this.shouldUpdateCorners=true};t.prototype.intervalRatioWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldSetLabelOpacity=true;this.shouldCheckLabelAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateAnnotations=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.labelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateGeometries=true;this.shouldUpdateTableData=true;var i=t&&t.placement?t.placement:false;var r=e&&e.placement?e.placement:false;var n=t&&t.visible;var s=e&&e.visible;var a=t&&t.labelAccessor?t.labelAccessor:false;var o=e&&e.labelAccessor?e.labelAccessor:false;if(n!==s){this.shouldSetLabelOpacity=true}if(i!==r){this.shouldSetLabelOpacity=true;this.shouldValidateLabelPlacement=true;this.shouldCheckLabelColor=true}if(a!==o){this.shouldValidateDataLabelAccessor=true}};t.prototype.showTotalValueWatcher=function(t,e){this.shouldUpdateTotalLabels=true;this.shouldUpdateTableData=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGeometryAriaLabels=true};t.prototype.showTooltipWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideTextures?t.hideTextures:false;var w=e&&e.hideTextures?e.hideTextures:false;if(A!==w){this.shouldSetTextures=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true}var x=t&&t.showSmallLabels?t.showSmallLabels:false;var S=e&&e.showSmallLabels?e.showSmallLabels:false;if(x!==S){this.shouldSetLabelOpacity=true}var L=t&&t.hideStrokes?t.hideStrokes:false;var k=e&&e.hideStrokes?e.hideStrokes:false;if(L!==k){this.shouldSetStrokes=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true}var _=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var C=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var D=t&&t.elementsAreInterface?t.elementsAreInterface:false;var M=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(_!==C||D!==M){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(D!==M){this.shouldSetSelectionClass=true}};t.prototype.showZeroLabelsWatcher=function(t,e){this.shouldUpdateLabels=true};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldUpdateLegendInteractivity=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldCheckValueAxis=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true};t.prototype.hoverWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.clickWatcher=function(t,e){this.shouldValidateClickHighlight=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"stacked-bar-chart-"+B5();t.stackedBarChartEl.id=t.chartID;t.setTagLevels();t.prepareData();t.prepareLegendData();t.setDimensions();t.prepareScales();t.validateClickHighlight();t.validateInteractionKeys();t.validateDataLabelAccessor();t.validateAxes();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTextures();t.setStrokes();t.drawXGrid();t.drawYGrid();t.setGlobalSelections();t.setTestingAttributes();t.enterGeometries();t.updateGeometries();t.exitGeometries();t.setRoundedCorners();t.drawGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterTotalDataLabels();t.updateTotalDataLabels();t.exitTotalDataLabels();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawLegendElements();t.bindLegendInteractivity();t.validateLabelPlacement();t.drawDataLabels();t.drawTotalDataLabels();t.drawReferenceLines();t.setSelectedClass();t.checkLabelColorAgainstBackground();t.updateCursor();t.bindInteractivity();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();t.drawBaseline();h6(t.root.node(),t.barG.node());t.setGroupAccessibilityID();t.onChangeHandler();t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldSetTextures){t.setTextures();t.shouldSetTextures=false}if(t.shouldSetStrokes){t.setStrokes();t.shouldSetStrokes=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldEnterUpdateExit){t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterTotalDataLabels();t.updateTotalDataLabels();t.exitTotalDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateCorners){t.setRoundedCorners();t.shouldUpdateCorners=false}if(t.shouldUpdateGeometries){t.drawGeometries();t.shouldUpdateGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldUpdateTotalLabels){t.drawTotalDataLabels();t.shouldUpdateTotalLabels=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldCheckLabelColor){t.checkLabelColorAgainstBackground();t.shouldCheckLabelColor=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateLegendInteractivity){t.bindLegendInteractivity();t.shouldUpdateLegendInteractivity=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateBaseline){t.drawBaseline();t.shouldUpdateBaseline=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;Q6(this.chartID,this.accessibility,{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined,tooltipLabel:this.tooltipLabel,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor},misc:{normalized:this.normalized}})}};t.prototype.validateLabelPlacement=function(){if(this.layout==="vertical"){if(!(this.dataLabel.placement==="top"||this.dataLabel.placement==="middle"||this.dataLabel.placement==="bottom"||this.dataLabel.placement==="auto")){this.dataLabel.placement="middle"}}else{if(!(this.dataLabel.placement==="end"||this.dataLabel.placement==="middle"||this.dataLabel.placement==="base"||this.dataLabel.placement==="auto")){this.dataLabel.placement="middle"}}};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]};t.prototype.validateDataLabelAccessor=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor};t.prototype.validateAxes=function(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!(this.layout==="vertical")&&this.xAxis.gridVisible});this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:this.layout==="vertical"&&this.yAxis.gridVisible})};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?Y6(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.prepareData=function(){var t=this;this.extent=[0,0];var e=[];this.data.forEach((function(t){var i=Object.keys(t);var r={};i.forEach((function(e){r[e]=!(t[e]instanceof Date)?t[e]:new Date(t[e].getTime())}));e.push(r)}));var i=UZ().key((function(e){e[t.valueAccessor]=parseFloat(e[t.valueAccessor]);e[t.groupAccessor]=e[t.groupAccessor]instanceof Date?V6({date:e[t.groupAccessor],format:t.layout==="vertical"?t.xAxis.format:t.yAxis.format,offsetTimezone:true}):e[t.groupAccessor];return e[t.groupAccessor]})).entries(e);this.interpolating=this.series.length?this.series:"";if(this.interpolating){this.interpolating.stackOrder=this.stackOrder}var r={};var n=function(e){var i=0;var n=e.length;var s=[];t.stackOrder={};var a=function(){var n=Object.assign({},e[i]);var a=0;var o=0;var l=0;var u={positive:0,negative:0};var h=e[i].values;var c=h.length;n.values=[];var d=0;var f=function(){var e=Object.assign({},h[a]);var i=e[t.valueAccessor];if(i>=0){e.stackEnd=u.positive;u.positive+=i;e.stackStart=u.positive}else{e.stackStart=u.negative;u.negative+=i;e.stackEnd=u.negative}var s=t.stackOrder[e[t.groupAccessor]];if(!s){t.stackOrder[e[t.groupAccessor]]={};s=t.stackOrder[e[t.groupAccessor]]}if(!s[e[t.ordinalAccessor]]){s[e[t.ordinalAccessor]]={previous:d,value:i,stackStart:e.stackStart,stackEnd:e.stackEnd}}e.enteringStackStart=false;if(t.interpolating&&t.interpolating.stackOrder[e[t.groupAccessor]]){var c=t.interpolating.stackOrder[e[t.groupAccessor]];var f=function(t){if(t===0){return 0}else if(c[t]){if(i>=0&&c[t].value>=0){return c[t].stackStart}else if(i<0&&c[t].value<0){return c[t].stackEnd}}var e=s[t].previous;return f(e)};if(!c[e[t.ordinalAccessor]]){e.enteringStackStart=f(d)}}d=e[t.ordinalAccessor];e.getSum=function(){return n.sum};o+=i;if(i>0){l+=i}if(!r[e[t.ordinalAccessor]]){r[e[t.ordinalAccessor]]=1}n.values.push(e)};for(a=0;a<c;a++){f()}if(u.positive>t.extent[1]){t.extent[1]=u.positive}if(u.negative<t.extent[0]){t.extent[0]=u.negative}n.sum=o;n.sumMessage="Sum "+o;n.sumAboveZero=l;s.push(n)};for(i=0;i<n;i++){a()}return s};n(i);this.datakeys=Object.keys(r);this.series=n(i);if(this.sortOrder==="asc"){this.series=__spreadArrays(this.series).sort((function(t,e){return t.sum-e.sum}))}else if(this.sortOrder==="desc"){this.series=__spreadArrays(this.series).sort((function(t,e){return e.sum-t.sum}))}};t.prototype.prepareLegendData=function(){this.legendData=this.series[0].values};t.prototype.validateClickHighlight=function(){var t=this;this.clickHighlight.map((function(e){e[t.groupAccessor]=e[t.groupAccessor]instanceof Date?V6({date:e[t.groupAccessor],format:t.layout==="vertical"?t.xAxis.format:t.yAxis.format,offsetTimezone:true}):e[t.groupAccessor]}))};t.prototype.setTableData=function(){var t=[];this.series.forEach((function(e){e.values.forEach((function(e){t.push(e)}))}));var e=$6(this,M6,"stacked-bar-chart");this.tableData=X6(t,e);this.tableColumns=Object.keys(e)};t.prototype.setColors=function(){this.preparedColors=this.colors?I6(this.colors):z6(this.colorPalette,this.datakeys.length)};t.prototype.setTextures=function(){var t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6){this.colorArr=this.preparedColors}else{var e=t;var i=i6({colors:e,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical",disableTransitions:!this.duration});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}};t.prototype.setStrokes=function(){var t=this;var e=this.preparedColors.range?this.preparedColors.range():this.preparedColors;this.strokes=e6({root:this.svg.node(),id:this.chartID,colors:e,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,stacked:true});this.textStrokes={};e.forEach((function(e){t.textStrokes[e]=Q5({root:t.svg.node(),id:t.chartID,color:e})}));if(this.clickStyle&&this.clickStyle.color){this.textStrokes[this.clickStyle.color]=Q5({root:this.svg.node(),id:this.chartID,color:this.clickStyle.color})}if(this.hoverStyle&&this.hoverStyle.color){this.textStrokes[this.hoverStyle.color]=Q5({root:this.svg.node(),id:this.chartID,color:this.hoverStyle.color})}};t.prototype.prepareScales=function(){var t=this.minValueOverride&&this.minValueOverride<this.extent[0]?this.minValueOverride:this.extent[0];var e=this.maxValueOverride||this.extent[1];var i=this.normalized?[0,1]:[t,e];if(this.interpolating){this.interpolating.oldXDomain=this.x.domain();this.interpolating.oldXRange=this.x.range();this.interpolating.oldYDomain=this.y.domain();this.interpolating.oldYRange=this.y.range()}if(this.layout==="vertical"){if(this.interpolating){this.interpolating.padding=this.x.padding();this.interpolating.x=VZ().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange).padding(this.interpolating.padding);this.interpolating.y=NJ().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange)}this.y=NJ().domain(i).range([this.innerPaddedHeight,0]);this.x=VZ().domain(this.series.map((function(t){return t.key}))).range([0,this.innerPaddedWidth]).padding(this.barIntervalRatio)}else if(this.layout==="horizontal"){if(this.interpolating){this.interpolating.padding=this.y.padding();this.interpolating.x=NJ().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange);this.interpolating.y=VZ().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange).padding(this.interpolating.padding)}this.x=NJ().domain(i).range([0,this.innerPaddedWidth]);this.y=VZ().domain(this.series.map((function(t){return t.key}))).range([0,this.innerPaddedHeight]).padding(this.barIntervalRatio)}};t.prototype.renderRootElements=function(){this.svg=cZ(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","grid-group");this.barG=this.rootG.append("g").attr("class","stacked-bar-group");this.labelG=this.rootG.append("g").attr("class","stacked-bar-dataLabel-group");this.totalLabels=this.rootG.append("g").attr("class","bar-dataLabel-group");this.legendG=cZ(this.stackedBarChartEl).select(".stacked-bar-legend").append("svg");this.tooltipG=cZ(this.stackedBarChartEl).select(".stacked-bar-tooltip");this.references=this.rootG.append("g").attr("class","stacked-bar-reference-line-group")};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){cZ(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").attr("data-testid","chart-container");cZ(this.stackedBarChartEl).select(".stacked-bar-main-title").attr("data-testid","main-title");cZ(this.stackedBarChartEl).select(".stacked-bar-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.barG.attr("data-testid","stacked-bar-group");this.updateBarWrappers.attr("data-testid","stacked-bar-wrapper").attr("data-id",(function(t){return"stacked-bar-wrapper-"+t.key}));this.update.attr("data-testid","bar").attr("data-id",(function(e){return"bar-"+e[t.groupAccessor]+"-"+e[t.ordinalAccessor]}));this.labelG.attr("data-testid","stacked-bar-dataLabel-group");this.updateLabelWrappers.attr("data-testid","stacked-bar-dataLabel-wrapper").attr("data-id",(function(t){return"stacked-bar-dataLabel-wrapper-"+t.key}));this.updateLabels.attr("data-testid","dataLabel").attr("data-id",(function(e){return"dataLabel-"+e[t.groupAccessor]+"-"+e[t.ordinalAccessor]}));this.totalLabels.attr("data-testid","stacked-bar-totalLabel-group");this.updateTotalLabels.attr("data-testid","totalLabel").attr("data-id",(function(t){return"totalLabel-"+t.key}));this.references.attr("data-testid","reference-line-group");this.svg.select("defs").attr("data-testid","pattern-defs");this.references.selectAll(".stacked-bar-reference-line").attr("data-testid","reference-line");this.references.selectAll(".stacked-bar-reference-line-label").attr("data-testid","reference-line-label")}else{cZ(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").attr("data-testid",null);cZ(this.stackedBarChartEl).select(".stacked-bar-main-title").attr("data-testid",null);cZ(this.stackedBarChartEl).select(".stacked-bar-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.barG.attr("data-testid",null);this.updateBarWrappers.attr("data-testid",null).attr("data-id",null);this.update.attr("data-testid",null).attr("data-id",null);this.labelG.attr("data-testid",null);this.updateLabelWrappers.attr("data-testid",null).attr("data-id",null);this.updateLabels.attr("data-testid",null).attr("data-id",null);this.totalLabels.attr("data-testid",null);this.updateTotalLabels.attr("data-testid",null).attr("data-id",null);this.references.attr("data-testid",null);this.svg.select("defs").attr("data-testid",null);this.references.selectAll(".stacked-bar-reference-line").attr("data-testid",null);this.references.selectAll(".stacked-bar-reference-line-label").attr("data-testid",null)}};t.prototype.reSetRoot=function(){var t=n6({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:Z1});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var e=n6({selection:this.root,duration:this.duration,namespace:"root_reset",easing:Z1});e.attr("transform","translate("+this.margin.left+", "+this.margin.top+")");var i=n6({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:Z1});i.attr("transform","translate("+this.padding.left+", "+this.padding.top+")");_6(this.chartID,this.width)};t.prototype.drawXAxis=function(){N6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel&&this.layout==="vertical"?this.x.bandwidth():"",format:this.xAxis.format,dateFormat:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible,duration:this.duration})};t.prototype.drawYAxis=function(){N6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,dateFormat:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible,duration:this.duration})};t.prototype.setXAxisAccessibility=function(){m6({rootEle:this.stackedBarChartEl,hasXAxis:this.innerXAxis?this.innerXAxis.visible:false,xAxis:this.layout==="vertical"?this.x||false:this.y||false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){A6({rootEle:this.stackedBarChartEl,hasYAxis:this.innerYAxis?this.innerYAxis.visible:false,yAxis:this.layout==="vertical"?this.y||false:this.x||false,yAxisLabel:this.yAxis.label?this.yAxis.label:""})};t.prototype.drawBaseline=function(){if(this.layout==="vertical"){N6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0)||-1,duration:this.duration})}if(this.layout==="horizontal"){N6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,padding:this.padding,markOffset:this.x(0)||-1,duration:this.duration})}};t.prototype.drawXGrid=function(){H6(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.innerXAxis.gridVisible,this.xAxis.tickInterval,this.duration)};t.prototype.drawYGrid=function(){H6(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.innerYAxis.gridVisible,this.yAxis.tickInterval,this.duration)};t.prototype.setGlobalSelections=function(){var t=this;var e=this.barG.selectAll(".stacked-bar-series").data(this.series,(function(t){return t.key}));this.enterBarWrappers=e.enter().append("g");this.exitBarWrappers=e.exit();this.updateBarWrappers=e.merge(this.enterBarWrappers);var i=this.updateBarWrappers.selectAll(".stacked-bar").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enter=i.enter().append("rect");this.exit=i.exit();this.update=i.merge(this.enter);this.exitSize=this.exit.size();this.enterSize=this.enter.size();var r=this.labelG.selectAll(".stacked-bar-dataLabel-series").data(this.series,(function(t){return t.key}));this.enterLabelWrappers=r.enter().append("g");this.exitLabelWrappers=r.exit();this.updateLabelWrappers=r.merge(this.enterLabelWrappers);var n=this.updateLabelWrappers.selectAll(".stacked-bar-dataLabel").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enterLabels=n.enter().append("text");this.exitLabels=n.exit();this.updateLabels=n.merge(this.enterLabels);var s=this.totalLabels.selectAll(".bar-dataLabel-group text").data(this.series,(function(t){return t.key}));this.enterTotalLabels=s.enter().append("text");this.exitTotalLabels=s.exit();this.updateTotalLabels=s.merge(this.enterTotalLabels)};t.prototype.enterGeometries=function(){var t=this;this.enter.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"innerPaddedWidth":"innerPaddedHeight";this.enter.attr("class","stacked-bar").attr("cursor",!this.suppressEvents?this.cursor:null).each((function(t,e,i){a6(i[e])})).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("fill",(function(e,i){var r=t.clickHighlight&&t.clickHighlight.length>0&&T6(e,t.clickHighlight,t.innerInteractionKeys);var n=t.hoverHighlight&&E6(e,t.hoverHighlight,t.innerInteractionKeys);var s=t.colorArr[i];return r&&t.clickStyle.color?Z6[t.clickStyle.color]||t.clickStyle.color:r?s:n&&t.hoverStyle.color?Z6[t.hoverStyle.color]||t.hoverStyle.color:s})).attr("opacity",0).attr(r,(function(e){var i=t[r];if(t.interpolating){i=t.interpolating[r]}var n=e.stackEnd;if(e.stackEnd<0){n=e.stackStart}if(typeof e.enteringStackStart==="number"){n=e.enteringStackStart}var s=!t.normalized?1:e.getSum();return i(n/s)})).attr(n,0).attr(e,(function(i){var r=t[e];if(t.interpolating){r=t.interpolating[e]}return r(i[t.groupAccessor])})).attr(i,(function(){var i=t[e];if(t.interpolating){i=t.interpolating[e]}return i.bandwidth()}));this.enterBarWrappers.attr("class","stacked-bar-series entering").each((function(t,e,i){a6(i[e])})).selectAll(".stacked-bar").attr(n,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackEnd/i)-t.y(e.stackStart/i):t.x(e.stackStart/i)-t.x(e.stackEnd/i)}));this.enterBarWrappers.selectAll(".stacked-bar").attr(r,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackStart/i):t.x(e.stackEnd/i)})).attr(e,(function(i){var r=t[e](i[t.groupAccessor])+t[e].bandwidth()/2;r=t[e](i[t.groupAccessor])+t[e].bandwidth()/2*(r/(t[s]/2));return r})).attr(i,0);this.enterBarWrappers.order();this.enter.order()};t.prototype.updateGeometries=function(){var t=this;this.update.interrupt();this.update.transition("opacity").duration((function(e,i,r){if(cZ(r[i]).classed("entering")){cZ(r[i]).classed("entering",false);return t.duration}return 0})).ease(Z1).attr("opacity",(function(e){return U6(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).call(j6,(function(){t.update.classed("entering",false)}))};t.prototype.exitGeometries=function(){var t=this;this.exit.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"innerPaddedWidth":"innerPaddedHeight";this.exit.attr("filter",null).transition("exit").duration(this.duration).ease(Z1).attr(n,0).attr(r,(function(e){var i=e.stackEnd;if(e.stackEnd<0){i=e.stackStart}var n=!t.normalized?1:e.getSum();return t[r](i/n)})).attr(e,(function(i){return t[e](i[t.groupAccessor])}));this.exitBarWrappers.selectAll(".stacked-bar").attr("filter",null).transition("exit").duration(this.duration).ease(Z1).attr("opacity",0).attr(r,(function(t,e,i){return cZ(i[e]).attr(r)})).attr(e,(function(r,n,a){var o=cZ(a[n]);var l=+o.attr(e)+ +o.attr(i)/2;l=+o.attr(e)+ +o.attr(i)/2*(l/(t[s]/2));return l})).attr(n,(function(t,e,i){return cZ(i[e]).attr(n)})).attr(i,0);this.update.transition("accessibilityAfterExit").duration(this.duration).ease(Z1).call(j6,(function(){var e=L6(t.rootG.node());t.exit.remove();t.exitBarWrappers.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();S6({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawGeometries=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";this.updateBarWrappers.transition("update").duration(this.duration).ease(Z1).call(j6,(function(){t.updateBarWrappers.classed("entering",false)}));this.update.classed("geometryIsMoving",(function(s,a,o){var l=!t.normalized?1:s.getSum();var u=Z5(cZ(o[a]),[{attr:e,numeric:true,newValue:t[e](s[t.groupAccessor])},{attr:i,numeric:true,newValue:t[e].bandwidth()},{attr:r,numeric:true,newValue:t.layout==="vertical"?t.y(s.stackStart/l):t.x(s.stackEnd/l)},{attr:n,numeric:true,newValue:t.layout==="vertical"?t.y(s.stackEnd/l)-t.y(s.stackStart/l):t.x(s.stackStart/l)-t.x(s.stackEnd/l)}]);return u})).attr("data-"+e,(function(i){return t[e](i[t.groupAccessor])})).attr("data-"+i,this[e].bandwidth()).attr("data-"+r,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackStart/i):t.x(e.stackEnd/i)})).attr("data-"+n,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackEnd/i)-t.y(e.stackStart/i):t.x(e.stackStart/i)-t.x(e.stackEnd/i)})).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).transition("update").duration(this.duration).ease(Z1).attr(r,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackStart/i):t.x(e.stackEnd/i)})).attr(n,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackEnd/i)-t.y(e.stackStart/i):t.x(e.stackStart/i)-t.x(e.stackEnd/i)})).attr(e,(function(i){return t[e](i[t.groupAccessor])})).attr(i,this[e].bandwidth()).call(j6,(function(){setTimeout((function(){t.update.classed("geometryIsMoving",false);t.updateInteractionState();t.updateLabels.classed("textIsMoving",false);t.checkLabelColorAgainstBackground()}),0);S6({parentGNode:t.rootG.node()})}))};t.prototype.updateInteractionState=function(){var t=this;t6(this.svg.node());this.update.interrupt("opacity");this.updateLabels.interrupt("opacity");this.update.attr("opacity",(function(e){return U6(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).attr("fill",(function(e,i){var r=t.clickHighlight&&t.clickHighlight.length>0&&T6(e,t.clickHighlight,t.innerInteractionKeys);var n=t.hoverHighlight&&E6(e,t.hoverHighlight,t.innerInteractionKeys);var s=t.colorArr[i];return r&&t.clickStyle.color?Z6[t.clickStyle.color]||t.clickStyle.color:r?s:n&&t.hoverStyle.color?Z6[t.hoverStyle.color]||t.hoverStyle.color:s})).each((function(e,i,r){var n=cZ(r[i]);if(!t.accessibility.hideStrokes&&!n.classed("geometryIsMoving")){var s=t.clickHighlight&&t.clickHighlight.length>0&&T6(e,t.clickHighlight,t.innerInteractionKeys);var a=t.hoverHighlight&&E6(e,t.hoverHighlight,t.innerInteractionKeys);var o=t.preparedColors[i];var l=s?"click":a?"hover":"rest";var u=s&&t.clickStyle.color?Z6[t.clickStyle.color]||t.clickStyle.color:s?o:a&&t.hoverStyle.color?Z6[t.hoverStyle.color]||t.hoverStyle.color:o;if(l==="hover"){J5({inputElement:r[i],id:t.chartID,key:e[t.ordinalAccessor]+e[t.groupAccessor],strokeWidth:t.hoverStyle.strokeWidth,fill:u})}var h=t.strokes[l+u];if(h!==n.attr("filter")){if(t.isSafari){n.attr("filter",null);setTimeout((function(){n.attr("filter",h)}),0)}else{n.attr("filter",h)}}}else{n.attr("filter",null)}}));S6({parentGNode:this.rootG.node()});P6({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.setLabelOpacity=function(){var t=this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly;var e=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;var i=15;this.updateLabels.each((function(t,e,r){if(e===0){var n=r[e];var s=getComputedStyle(n);var a=parseFloat(s.fontSize);i=Math.max(a-1,1)}}));this.processLabelOpacity(this.updateLabels,t);this.updateTotalLabels.attr("opacity",this.showTotalValue&&!this.normalized?1:0);if(t){var r=this.updateLabels.filter((function(t,e,i){return cZ(i[e]).classed("collision-added")}));var n=this.updateLabels.filter((function(t,e,i){return cZ(i[e]).classed("collision-removed")})).attr("data-use-dx",e).attr("data-use-dy",e);var s={vertical:{top:{validPositions:["bottom"],offsets:[5]},middle:{validPositions:["middle"],offsets:[1]},bottom:{validPositions:["top"],offsets:[i/2]}},horizontal:{right:{validPositions:["left"],offsets:[8]},middle:{validPositions:["middle"],offsets:[1]},left:{validPositions:["right"],offsets:[20]}}};var a=this.dataLabel&&this.dataLabel.collisionPlacement;var o=a&&s[this.layout][a]?this.dataLabel.collisionPlacement:this.layout==="vertical"?"top":"right";if(n.size()>0){this.bitmaps=t3({bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[J6(this.width,0),J6(this.height,0)],hideOnly:false,removeOnly:true});n.classed("collision-removed",false)}if(r.size()>0){this.bitmaps=q6({root:r,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",bitmaps:this.bitmaps,labelSelection:r,avoidMarks:[this.update],validPositions:e?["middle"]:s[this.layout][o].validPositions,offsets:e?[1]:s[this.layout][o].offsets,accessors:[this.groupAccessor,this.ordinalAccessor,"key"],size:[J6(this.width,0),J6(this.height,0)],boundsScope:e?undefined:o,hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly,suppressMarkDraw:true}});r.classed("collision-added",false)}}};t.prototype.processLabelOpacity=function(t,e){var i=this;var r=this.dataLabel.visible?1:0;var n=this.layout==="vertical"?"x":"y";var s=this.layout==="vertical"?"width":"height";var a=this.layout==="vertical"?"height":"width";t.attr("opacity",(function(t,o,l){var u=+cZ(l[o]).attr("opacity");var h=cZ(l[o]).style("visibility");var c=!i.normalized?1:t.getSum();var d={};d[s]=i[n].bandwidth();d[a]=i.layout==="vertical"?i.y(t.stackEnd/c)-i.y(t.stackStart/c):i.x(t.stackStart/c)-i.x(t.stackEnd/c);var f=i.dataLabel.placement==="auto"||i.dataLabel.collisionHideOnly||i.accessibility.showSmallLabels||$5({text:R6(t,i.innerLabelAccessor,i.dataLabel.format,i.normalized),dimensions:d,fontSize:14});var p=f?U6(t,r,i.hoverOpacity,i.hoverHighlight,i.clickHighlight,i.innerInteractionKeys)<1?e?Number.EPSILON:0:1:0;if((p===1&&h==="hidden"||u!==p)&&e){if(p===1){cZ(l[o]).classed("collision-added",true).style("visibility",null)}else{cZ(l[o]).classed("collision-removed",true)}}return p}))};t.prototype.checkLabelColorAgainstBackground=function(){var t=this;this.updateLabels.attr("fill",(function(e,i,r){return t.textTreatmentHandler(e,i,r)}))};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.setRoundedCorners=function(){this.update.transition("shared_update").duration(this.duration).ease(Z1).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=U6(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;k6(r[i],n,s);return n}))};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);cZ(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null)};t.prototype.enterDataLabels=function(){var t=this;var e=this.dataLabel.visible?1:0;this.enterLabelWrappers.attr("class","stacked-bar-dataLabel-series entering");this.enterLabels.attr("class","stacked-bar-dataLabel entering").style("pointer-events","none").classed("stacked-bar-dataLabel-"+this.layout,true).attr("opacity",(function(i){return U6(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:Number.EPSILON})).attr("fill",this.textTreatmentHandler);q6({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized})};t.prototype.updateDataLabels=function(){var t=this;this.updateLabels.interrupt();this.updateLabelWrappers.transition("update").duration(this.duration).ease(Z1).call(j6,(function(){t.updateLabelWrappers.classed("entering",false)}));var e=this.updateLabels.transition("opacity").ease(Z1).duration((function(e,i,r){if(cZ(r[i]).classed("entering")){cZ(r[i]).classed("entering",false);return t.duration}return 0}));this.processLabelOpacity(e);e.call(j6,(function(){t.updateLabels.classed("entering",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabelWrappers.selectAll("text").attr("filter",null).transition("exit").ease(Z1).duration(this.duration/2).attr("opacity",0).call(j6,(function(){t.exitLabelWrappers.remove()}));this.exitLabels.attr("filter",null).transition("exit").ease(Z1).duration(this.duration/2).attr("opacity",0).remove()};t.prototype.drawDataLabels=function(){var t=this;var e=15;var i=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;this.updateLabels.classed("stacked-bar-dataLabel-horizontal",false).classed("stacked-bar-dataLabel-vertical",false).classed("stacked-bar-dataLabel-"+this.layout,true).text((function(i,r,n){if(i[t.valueAccessor]===0&&!t.showZeroLabels){return""}if(r===0){var s=n[r];var a=getComputedStyle(s);var o=parseFloat(a.fontSize);e=Math.max(o-1,1)}return R6(i,t.innerLabelAccessor,t.dataLabel.format,t.normalized)})).style("visibility",(function(e,i,r){return t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly?cZ(r[i]).style("visibility"):null}));this.updateLabelWrappers.transition("update").duration(this.duration).ease(Z1).call(j6,(function(){t.updateLabelWrappers.classed("entering",false)}));var r=this.layout==="vertical"?"x":"y";var n=this.layout==="vertical"?"y":"x";var s=this.layout==="vertical"?"stackStart":"stackEnd";var a=this.updateLabels.classed("textIsMoving",(function(e){if(!t.interpolating){return false}var i=!t.normalized?1:e.getSum();var a=t.interpolating[r](e[t.groupAccessor])!==t[r](e[t.groupAccessor])||t.interpolating[n](e[s]/i)!==t[n](e[s]/i);return a})).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).transition("update").ease(Z1).duration(this.duration);var o={vertical:{top:{validPositions:["bottom"],offsets:[5]},middle:{validPositions:["middle"],offsets:[1]},bottom:{validPositions:["top"],offsets:[e/2]}},horizontal:{right:{validPositions:["left"],offsets:[8]},middle:{validPositions:["middle"],offsets:[1]},left:{validPositions:["right"],offsets:[20]}}};var l=this.dataLabel&&this.dataLabel.collisionPlacement;var u=l&&o[this.layout][l]?this.dataLabel.collisionPlacement:this.layout==="vertical"?"top":"right";this.bitmaps=q6({root:a,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",labelSelection:a,avoidMarks:[this.update],validPositions:i?["middle"]:o[this.layout][u].validPositions,offsets:i?[1]:o[this.layout][u].offsets,accessors:[this.groupAccessor,this.ordinalAccessor,"key"],size:[J6(this.width,0),J6(this.height,0)],boundsScope:i?undefined:u,hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})};t.prototype.enterTotalDataLabels=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"y":"x";this.enterTotalLabels.attr("class","bar-dataLabel-"+this.layout).attr("opacity",Number.EPSILON).attr("fill",Z6.dark_text).attr(e,(function(i){return t[e](i.key)+t[e].bandwidth()/2})).attr(i,(function(e){return t[i](e.sumAboveZero)+4}))};t.prototype.updateTotalDataLabels=function(){var t=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.transition("total_opacity").ease(Z1).duration(this.duration).attr("opacity",t)};t.prototype.exitTotalDataLabels=function(){this.exitTotalLabels.transition("exit").ease(Z1).duration(this.duration/2).attr("opacity",0).remove()};t.prototype.drawTotalDataLabels=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"y":"x";var r=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.text((function(e){return O6(e.sum,t.dataLabel.format)})).attr("text-anchor",this.layout==="vertical"?"middle":"start");var n=this.updateTotalLabels.classed("bar-dataLabel-horizontal",false).classed("bar-dataLabel-vertical",false).classed("bar-dataLabel-"+this.layout,true).attr("data-"+e,(function(i){return t[e](i.key)+t[e].bandwidth()/2})).attr("data-"+i,(function(e){return t[i](e.sumAboveZero)})).attr("data-use-dx",true).attr("data-use-dy",true).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("dx",this.layout==="vertical"?"0":"0.3em").attr("dy",this.layout==="vertical"?"-0.3em":".3em").style("visibility",(function(e,i,r){return t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly?cZ(r[i]).style("visibility"):null})).transition("update").ease(Z1).duration(this.duration).attr("opacity",r);if(this.showTotalValue&&(this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly)){this.bitmaps=t3({bitmaps:this.bitmaps,labelSelection:n,avoidMarks:[this.update],validPositions:["middle"],offsets:[1],accessors:[this.ordinalAccessor],size:[J6(this.width,0),J6(this.height,0)],hideOnly:true});n.attr(e,(function(i){return t[e](i.key)+t[e].bandwidth()/2})).attr(i,(function(e){return t[i](e.sumAboveZero)}))}else{n.attr(e,(function(i){return t[e](i.key)+t[e].bandwidth()/2})).attr(i,(function(e){return t[i](e.sumAboveZero)}))}};t.prototype.drawReferenceLines=function(){var t=this;var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class",".stacked-bar-reference").attr("opacity",1);var r=i.append("line");r.attr("class","stacked-bar-reference-line").attr("opacity",0);var n=i.append("text");n.attr("class","stacked-bar-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".stacked-bar-reference-line").data((function(t){return[t]})).transition("merge").ease(Z1).duration(this.duration);var o=s.selectAll(".stacked-bar-reference-line-label").data((function(t){return[t]})).transition("merge").ease(Z1).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(Z1).duration(this.duration).attr("opacity",0).remove();if(this.layout==="vertical"){i.attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));s.transition("merge").ease(Z1).duration(this.duration).attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em")}else if(this.layout==="horizontal"){i.attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));s.transition("merge").ease(Z1).duration(this.duration).attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));r.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);a.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);n.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}));o.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}))}a.style("stroke",Z6[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",Z6[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.drawAnnotations=function(){var t=this;var e=this.layout!=="horizontal"?this.x:this.y;var i=this.layout!=="horizontal"?this.y:this.x;if(this.data[0][this.groupAccessor]instanceof Date){var r=LZ(this.data,(function(e){return e[t.groupAccessor]}));var n=kZ(this.data,(function(e){return e[t.groupAccessor]}));var s=this.layout!=="horizontal"?[0,this.innerPaddedWidth]:[this.innerPaddedHeight,0];e=j1().domain([n,r]).range(s)}D6({source:this.rootG.node(),data:this.annotations,xScale:this.layout!=="horizontal"?e:i,xAccessor:this.layout!=="horizontal"?this.groupAccessor:this.valueAccessor,yScale:this.layout!=="horizontal"?i:e,yAccessor:this.layout!=="horizontal"?this.valueAccessor:this.groupAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})};t.prototype.setAnnotationAccessibility=function(){x6(this.stackedBarChartEl,this.annotations)};t.prototype.drawLegendElements=function(){W6({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.bindLegendInteractivity=function(){var t=this;cZ(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null).on("click",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?function(e){return t.hoverFunc.emit(e)}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?function(){return t.onMouseOutHandler()}:null)};t.prototype.setTagLevels=function(){this.topLevel=r6(this.highestHeadingLevel);this.bottomLevel=r6(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){s6({rootEle:this.stackedBarChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"stacked-bar-chart",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){u6({node:this.svg.node(),chartTag:"stacked-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:$6(this,M6,"stacked-bar-chart"),groupAccessor:this.groupAccessor,groupName:"stack",groupKeys:this.showTotalValue?["sumMessage"]:false,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){a6(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=$6(this,M6,"stacked-bar-chart");this.update.each((function(i,r,n){o6({node:n[r],geomType:"bar",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupKeys:t.showTotalValue?["sumMessage"]:false,groupName:"stack",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});l6({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateBarWrappers.each((function(e,i,r){l6({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){c6(this.stackedBarChartEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){d6(this.stackedBarChartEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){f6(this.stackedBarChartEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){p6(this.stackedBarChartEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){y6(this.stackedBarChartEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){v6(this.stackedBarChartEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){g6(this.stackedBarChartEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){b6({rootEle:this.stackedBarChartEl,parentGNode:this.barG.node(),chartTag:"stacked-bar-chart",geomType:"bar",groupName:"stack"})};t.prototype.setChartAccessibilityStructureNotes=function(){w6(this.stackedBarChartEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){K6(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&t){this.eventsTooltip({data:t,evt:$$,isToShow:true})}};t.prototype.onMouseOutHandler=function(){K6(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){B6(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;G6({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,normalized:this.normalized,chartType:"stacked"})};t.prototype.render=function(){var t="light";this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldCheckValueAxis){if(this.layout==="horizontal"){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true}else if(this.layout==="vertical"){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true}this.shouldCheckValueAxis=false}if(this.shouldCheckLabelAxis){if(this.layout==="vertical"){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true}else if(this.layout==="horizontal"){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true}this.shouldCheckLabelAxis=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateLegendData){this.prepareLegendData();this.shouldUpdateLegendData=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldValidateClickHighlight){this.validateClickHighlight();this.shouldValidateClickHighlight=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldValidateAxes){this.validateAxes();this.shouldValidateAxes=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldValidateLabelPlacement){this.validateLabelPlacement();this.shouldValidateLabelPlacement=false}return r("div",{class:"o-layout is--"+this.layout+" "+t},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"stacked-bar-main-title vcl-main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions stacked-bar-sub-title vcl-sub-title"},this.subTitle),r("div",{class:"stacked-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("keyboard-instructions",{uniqueID:this.chartID,geomType:"bar",groupName:"stack",chartTag:"stacked-bar-chart",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),r("div",{class:"visa-viz-d3-stacked-bar-container"}),r("div",{class:"stacked-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))};t.prototype.init=function(){var t=Object.keys(q5);var e=0;var i={mainTitle:{exception:""},subTitle:{exception:""},showTooltip:{exception:false},wrapLabel:{exception:false},showTotalValue:{exception:false},barIntervalRatio:{exception:0},hoverOpacity:{exception:0}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:q5[t[e]]}};Object.defineProperty(t.prototype,"stackedBarChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],normalized:["normalizedWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTotalValue:["showTotalValueWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],showZeroLabels:["showZeroLabelsWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],interactionKeys:["interactionWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}stacked-bar-chart{cursor:default}stacked-bar-chart .annotations{pointer-events:none}stacked-bar-chart .annotations .handle{pointer-events:all}stacked-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}stacked-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}stacked-bar-chart .hidden{display:none}stacked-bar-chart #visa-viz-d3-stacked-bar-container{clear:both}stacked-bar-chart .stacked-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}stacked-bar-chart .stacked-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}stacked-bar-chart .stacked-bar-legend .key-dot{margin:3px 8px}stacked-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}stacked-bar-chart .light .grid path{stroke-width:0}stacked-bar-chart .light .axis{font-size:12px}stacked-bar-chart .light .axis .tick text{fill:#767676}stacked-bar-chart .light .axis .tick line{stroke:#767676}stacked-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .light .y.axis path{stroke:#767676;opacity:0}stacked-bar-chart .light .x.axis path{stroke:#767676}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-vertical{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-horizontal{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}stacked-bar-chart .dark .grid path{stroke-width:0}stacked-bar-chart .dark .axis{font-size:12px}stacked-bar-chart .dark .axis .tick line{stroke:lightgrey}stacked-bar-chart .dark .axis .tick text{fill:grey}stacked-bar-chart .dark .axis path{stroke:black}stacked-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .dark .o-layout--chart svg{background:black}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=F6()}}}));